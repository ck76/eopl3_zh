<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>编程语言要素</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="right.css" title="default"/><link rel="stylesheet" type="text/css" href="footnote.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="tip.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript">
(function() {
  document.write('<link rel="stylesheet" href="katex/katex.min.css" />');
})();(function() {document.write('<scr' + 'ipt type="text/javascript" src="katex/katex.min.js"></scr' + 'ipt>');})();(function(f) {
  // A "simple" onLoad function
  if (window.document.readyState == "complete") {
    f();
  } else if (window.document.addEventListener) {
    window.document.addEventListener("DOMContentLoaded", f, false);
  } else if (window.attachEvent) {
    window.attachEvent("onreadystatechange", function() {
      if (window.document.readyState == "complete") {
        f();
      }
    });
  } else {
    var oldLoad = window.onload;
    if (typeof(oldLoad) == "function") {
      window.onload = function() {
        try {
          oldLoad();
        } finally {
          f();
        }
      };
    } else {
      window.onload = f;
    }
  }
})(function() {
  // This is an ugly way to change the doctype, in case the scribble document
  // did not use (with-html5).
  if (!(document.doctype && document.doctype.publicId == '')) {
    if (console && console.log) {
      console.log("Re-wrote the document to use the HTML5 doctype.\n"
                  + "  Consider using the following declaration:\n"
                  + "      @title[#:style (with-html5 manual-doc-style)]{…}");
    }
    var wholeDoc = '<!doctype HTML>\n' + document.documentElement.outerHTML;
    document.open();
    document.clear();
    document.write(wholeDoc);
  }
  var inlineElements = document.getElementsByClassName("texMathInline");
  for (var i = 0; i < inlineElements.length; i++) {
    var e = inlineElements[i];
    katex.render(e.textContent, e, { displayMode:false, throwOnError:false });
  }
  var displayElements = document.getElementsByClassName("texMathDisplay");
  for (var i = 0; i < displayElements.length; i++) {
    var e = displayElements[i];
    katex.render(e.textContent, e, { displayMode:true, throwOnError:false });
  }
});
</script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#32534;&#31243;&#35821;&#35328;&#35201;&#32032;</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="#%28part._fw-trans%29" class="tocviewlink" data-pltdoc="x">&#35793;&#32773;&#30340;&#35805;</a></td></tr><tr><td align="right"></td><td><a href="#%28part._glo%29" class="tocviewlink" data-pltdoc="x">&#35793;&#21517;&#34920;</a></td></tr><tr><td align="right"></td><td><a href="#%28part._fw%29" class="tocviewlink" data-pltdoc="x">&#24207;</a></td></tr><tr><td align="right"></td><td><a href="#%28part._pf%29" class="tocviewlink" data-pltdoc="x">&#21069;&#35328;</a></td></tr><tr><td align="right"></td><td><a href="#%28part._awk%29" class="tocviewlink" data-pltdoc="x">&#33268;&#35874;</a></td></tr><tr><td align="right">1&nbsp;</td><td><a href="#%28part._isd%29" class="tocviewlink" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._da%29" class="tocviewlink" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._expr%29" class="tocviewlink" data-pltdoc="x">&#34920;&#36798;&#24335;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._state%29" class="tocviewlink" data-pltdoc="x">&#29366;&#24577;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._cpi%29" class="tocviewlink" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._cps%29" class="tocviewlink" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._types%29" class="tocviewlink" data-pltdoc="x">&#31867;&#22411;</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="#%28part._modules%29" class="tocviewlink" data-pltdoc="x">&#27169;&#22359;</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="#%28part._oac%29" class="tocviewlink" data-pltdoc="x">&#23545;&#35937;&#21644;&#31867;</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="#%28part._further-reading%29" class="tocviewlink" data-pltdoc="x">&#25193;&#23637;&#38405;&#35835;</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="#%28part._sllgen-parsing-system%29" class="tocviewlink" data-pltdoc="x">SLLGEN&#35299;&#26512;&#31995;&#32479;</a></td></tr><tr><td align="right"></td><td><a href="#%28part._bib%29" class="tocviewlink" data-pltdoc="x">&#21442;&#32771;&#20070;&#30446;</a></td></tr><tr><td align="right"></td><td><a href="#%28part._indices%29" class="tocviewlink" data-pltdoc="x">&#32034;&#24341;</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._~e7~bc~96~e7~a8~8b~e8~af~ad~e8~a8~80~e8~a6~81~e7~b4~a0%29" class="tocsubseclink" data-pltdoc="x">&#32534;&#31243;&#35821;&#35328;&#35201;&#32032;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._fw-trans%29" class="tocsubseclink" data-pltdoc="x">&#35793;&#32773;&#30340;&#35805;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._glo%29" class="tocsubseclink" data-pltdoc="x">&#35793;&#21517;&#34920;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._fw%29" class="tocsubseclink" data-pltdoc="x">&#24207;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._fw-s%29" class="tocsubseclink" data-pltdoc="x">&#19977;&#29256;&#38468;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._pf%29" class="tocsubseclink" data-pltdoc="x">&#21069;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._pf-obj%29" class="tocsubseclink" data-pltdoc="x">&#30446;&#26631;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._pf-org%29" class="tocsubseclink" data-pltdoc="x">&#32452;&#32455;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._pf-use%29" class="tocsubseclink" data-pltdoc="x">&#29992;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._awk%29" class="tocsubseclink" data-pltdoc="x">&#33268;&#35874;</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._isd%29" class="tocsubseclink" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._s1..1%29" class="tocsubseclink" data-pltdoc="x">&#36882;&#25512;&#23450;&#20041;&#30340;&#25968;&#25454;</a></td></tr><tr><td><span class="tocsublinknumber">1.1.1<tt>&nbsp;</tt></span><a href="#%28part._s1..1..1%29" class="tocsubseclink" data-pltdoc="x">&#24402;&#32435;&#23450;&#20041;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">1.1.2<tt>&nbsp;</tt></span><a href="#%28part._s1..1..2%29" class="tocsubseclink" data-pltdoc="x">&#35821;&#27861;&#23450;&#20041;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">1.1.3<tt>&nbsp;</tt></span><a href="#%28part._s1..1..3%29" class="tocsubseclink" data-pltdoc="x">&#24402;&#32435;&#35777;&#26126;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._s1..2%29" class="tocsubseclink" data-pltdoc="x">&#25512;&#23548;&#36882;&#24402;&#31243;&#24207;</a></td></tr><tr><td><span class="tocsublinknumber">1.2.1<tt>&nbsp;</tt></span><a href="#%28part._s1..2..1%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">list-<wbr></wbr>length</span></a></td></tr><tr><td><span class="tocsublinknumber">1.2.2<tt>&nbsp;</tt></span><a href="#%28part._s1..2..2%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">nth-<wbr></wbr>element</span></a></td></tr><tr><td><span class="tocsublinknumber">1.2.3<tt>&nbsp;</tt></span><a href="#%28part._s1..2..3%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">remove-<wbr></wbr>first</span></a></td></tr><tr><td><span class="tocsublinknumber">1.2.4<tt>&nbsp;</tt></span><a href="#%28part._s1..2..4%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">occurs-<wbr></wbr>free?</span></a></td></tr><tr><td><span class="tocsublinknumber">1.2.5<tt>&nbsp;</tt></span><a href="#%28part._s1..2..5%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">subst</span></a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._s1..3%29" class="tocsubseclink" data-pltdoc="x">&#36741;&#21161;&#36807;&#31243;&#21644;&#19978;&#19979;&#25991;&#21442;&#25968;</a></td></tr><tr><td><span class="tocsublinknumber">1.4<tt>&nbsp;</tt></span><a href="#%28part._s1..4%29" class="tocsubseclink" data-pltdoc="x">&#32451;&#20064;</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._da%29" class="tocsubseclink" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._s2..1%29" class="tocsubseclink" data-pltdoc="x">&#29992;&#25509;&#21475;&#23450;&#20041;&#25968;&#25454;</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._s2..2%29" class="tocsubseclink" data-pltdoc="x">&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;</a></td></tr><tr><td><span class="tocsublinknumber">2.2.1<tt>&nbsp;</tt></span><a href="#%28part._s2..2..1%29" class="tocsubseclink" data-pltdoc="x">&#29615;&#22659;&#30340;&#25509;&#21475;</a></td></tr><tr><td><span class="tocsublinknumber">2.2.2<tt>&nbsp;</tt></span><a href="#%28part._s2..2..2%29" class="tocsubseclink" data-pltdoc="x">&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">2.2.3<tt>&nbsp;</tt></span><a href="#%28part._s2..2..3%29" class="tocsubseclink" data-pltdoc="x">&#36807;&#31243;&#34920;&#31034;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._s2..3%29" class="tocsubseclink" data-pltdoc="x">&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;</a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#%28part._s2..4%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#24037;&#20855;</a></td></tr><tr><td><span class="tocsublinknumber">2.5<tt>&nbsp;</tt></span><a href="#%28part._s2..5%29" class="tocsubseclink" data-pltdoc="x">&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._expr%29" class="tocsubseclink" data-pltdoc="x">&#34920;&#36798;&#24335;</a></td></tr><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._s3..1%29" class="tocsubseclink" data-pltdoc="x">&#35268;&#33539;&#21644;&#23454;&#29616;&#31574;&#30053;</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._s3..2%29" class="tocsubseclink" data-pltdoc="x">LET&#65306;&#19968;&#38376;&#31616;&#21333;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.1<tt>&nbsp;</tt></span><a href="#%28part._s3..2..1%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#35821;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.2<tt>&nbsp;</tt></span><a href="#%28part._s3..2..2%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#20540;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.3<tt>&nbsp;</tt></span><a href="#%28part._s3..2..3%29" class="tocsubseclink" data-pltdoc="x">&#29615;&#22659;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.4<tt>&nbsp;</tt></span><a href="#%28part._s3..2..4%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#34920;&#36798;&#24335;&#30340;&#34892;&#20026;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.5<tt>&nbsp;</tt></span><a href="#%28part._s3..2..5%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#31243;&#24207;&#30340;&#34892;&#20026;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.6<tt>&nbsp;</tt></span><a href="#%28part._s3..2..6%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#26465;&#20214;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.7<tt>&nbsp;</tt></span><a href="#%28part._s3..2..7%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041; <span class="stt">let</span></a></td></tr><tr><td><span class="tocsublinknumber">3.2.8<tt>&nbsp;</tt></span><a href="#%28part._s3..2..8%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616; LET &#35268;&#33539;</a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._s3..3%29" class="tocsubseclink" data-pltdoc="x">PROC&#65306;&#26377;&#36807;&#31243;&#30340;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">3.3.1<tt>&nbsp;</tt></span><a href="#%28part._s3..3..1%29" class="tocsubseclink" data-pltdoc="x">&#19968;&#20010;&#20363;&#23376;</a></td></tr><tr><td><span class="tocsublinknumber">3.3.2<tt>&nbsp;</tt></span><a href="#%28part._s3..3..2%29" class="tocsubseclink" data-pltdoc="x">&#34920;&#31034;&#36807;&#31243;</a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._s3..4%29" class="tocsubseclink" data-pltdoc="x">LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#%28part._s3..5%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#30028;&#21644;&#21464;&#37327;&#32465;&#23450;</a></td></tr><tr><td><span class="tocsublinknumber">3.6<tt>&nbsp;</tt></span><a href="#%28part._s3..6%29" class="tocsubseclink" data-pltdoc="x">&#28040;&#38500;&#21464;&#37327;&#21517;</a></td></tr><tr><td><span class="tocsublinknumber">3.7<tt>&nbsp;</tt></span><a href="#%28part._s3..7%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616;&#35789;&#27861;&#22320;&#22336;</a></td></tr><tr><td><span class="tocsublinknumber">3.7.1<tt>&nbsp;</tt></span><a href="#%28part._s3..7..1%29" class="tocsubseclink" data-pltdoc="x">&#32763;&#35793;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">3.7.2<tt>&nbsp;</tt></span><a href="#%28part._s3..7..2%29" class="tocsubseclink" data-pltdoc="x">&#26080;&#21517;&#35299;&#37322;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._state%29" class="tocsubseclink" data-pltdoc="x">&#29366;&#24577;</a></td></tr><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#%28part._s4..1%29" class="tocsubseclink" data-pltdoc="x">&#35745;&#31639;&#30340;&#25928;&#26524;</a></td></tr><tr><td><span class="tocsublinknumber">4.2<tt>&nbsp;</tt></span><a href="#%28part._s4..2%29" class="tocsubseclink" data-pltdoc="x">EXPLICIT-<wbr></wbr>REFS&#65306;&#26174;&#24335;&#24341;&#29992;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">4.2.1<tt>&nbsp;</tt></span><a href="#%28part._s4..2..1%29" class="tocsubseclink" data-pltdoc="x">&#23384;&#20648;&#22120;&#20256;&#36882;&#35268;&#33539;</a></td></tr><tr><td><span class="tocsublinknumber">4.2.2<tt>&nbsp;</tt></span><a href="#%28part._s4..2..2%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#26174;&#24335;&#24341;&#29992;&#25805;&#20316;</a></td></tr><tr><td><span class="tocsublinknumber">4.2.3<tt>&nbsp;</tt></span><a href="#%28part._s4..2..3%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616;</a></td></tr><tr><td><span class="tocsublinknumber">4.3<tt>&nbsp;</tt></span><a href="#%28part._s4..3%29" class="tocsubseclink" data-pltdoc="x">IMPLICIT-<wbr></wbr>REFS&#65306;&#38544;&#24335;&#24341;&#29992;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">4.3.1<tt>&nbsp;</tt></span><a href="#%28part._s4..3..1%29" class="tocsubseclink" data-pltdoc="x">&#35268;&#33539;</a></td></tr><tr><td><span class="tocsublinknumber">4.3.2<tt>&nbsp;</tt></span><a href="#%28part._s4..3..2%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616;</a></td></tr><tr><td><span class="tocsublinknumber">4.4<tt>&nbsp;</tt></span><a href="#%28part._s4..4%29" class="tocsubseclink" data-pltdoc="x">MUTABLE-<wbr></wbr>PAIRS&#65306;&#21487;&#21464;&#24207;&#23545;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">4.4.1<tt>&nbsp;</tt></span><a href="#%28part._s4..4..1%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616;</a></td></tr><tr><td><span class="tocsublinknumber">4.4.2<tt>&nbsp;</tt></span><a href="#%28part._s4..4..2%29" class="tocsubseclink" data-pltdoc="x">&#21487;&#21464;&#24207;&#23545;&#30340;&#21478;&#19968;&#31181;&#34920;&#31034;</a></td></tr><tr><td><span class="tocsublinknumber">4.5<tt>&nbsp;</tt></span><a href="#%28part._s4..5%29" class="tocsubseclink" data-pltdoc="x">&#20256;&#21442;&#21464;&#20307;</a></td></tr><tr><td><span class="tocsublinknumber">4.5.1<tt>&nbsp;</tt></span><a href="#%28part._s4..5..1%29" class="tocsubseclink" data-pltdoc="x">&#25353;&#25351;&#35843;&#29992;</a></td></tr><tr><td><span class="tocsublinknumber">4.5.2<tt>&nbsp;</tt></span><a href="#%28part._s4..5..2%29" class="tocsubseclink" data-pltdoc="x">&#25042;&#27714;&#20540;&#65306;&#25353;&#21517;&#35843;&#29992;&#21644;&#25353;&#38656;&#35843;&#29992;</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._cpi%29" class="tocsubseclink" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">5.1<tt>&nbsp;</tt></span><a href="#%28part._s5..1%29" class="tocsubseclink" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">5.2<tt>&nbsp;</tt></span><a href="#%28part._s5..2%29" class="tocsubseclink" data-pltdoc="x">&#36339;&#36291;&#24335;&#35299;&#37322;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">5.3<tt>&nbsp;</tt></span><a href="#%28part._s5..3%29" class="tocsubseclink" data-pltdoc="x">&#25351;&#20196;&#24335;&#35299;&#37322;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">5.4<tt>&nbsp;</tt></span><a href="#%28part._s5..4%29" class="tocsubseclink" data-pltdoc="x">&#24322;&#24120;</a></td></tr><tr><td><span class="tocsublinknumber">5.5<tt>&nbsp;</tt></span><a href="#%28part._s5..5%29" class="tocsubseclink" data-pltdoc="x">&#32447;&#31243;</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._cps%29" class="tocsubseclink" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a></td></tr><tr><td><span class="tocsublinknumber">6.1<tt>&nbsp;</tt></span><a href="#%28part._s6..1%29" class="tocsubseclink" data-pltdoc="x">&#20889;&#20986;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#30340;&#31243;&#24207;</a></td></tr><tr><td><span class="tocsublinknumber">6.2<tt>&nbsp;</tt></span><a href="#%28part._s6..2%29" class="tocsubseclink" data-pltdoc="x">&#23614;&#24335;</a></td></tr><tr><td><span class="tocsublinknumber">6.3<tt>&nbsp;</tt></span><a href="#%28part._s6..3%29" class="tocsubseclink" data-pltdoc="x">&#36716;&#25442;&#20026;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a></td></tr><tr><td><span class="tocsublinknumber">6.4<tt>&nbsp;</tt></span><a href="#%28part._s6..4%29" class="tocsubseclink" data-pltdoc="x">&#24314;&#27169;&#35745;&#31639;&#25928;&#26524;</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._types%29" class="tocsubseclink" data-pltdoc="x">&#31867;&#22411;</a></td></tr><tr><td><span class="tocsublinknumber">7.1<tt>&nbsp;</tt></span><a href="#%28part._s7..1%29" class="tocsubseclink" data-pltdoc="x">&#20540;&#21450;&#20854;&#31867;&#22411;</a></td></tr><tr><td><span class="tocsublinknumber">7.2<tt>&nbsp;</tt></span><a href="#%28part._s7..2%29" class="tocsubseclink" data-pltdoc="x">&#36171;&#20104;&#34920;&#36798;&#20540;&#31867;&#22411;</a></td></tr><tr><td><span class="tocsublinknumber">7.3<tt>&nbsp;</tt></span><a href="#%28part._s7..3%29" class="tocsubseclink" data-pltdoc="x">CHECKED&#65306;&#24102;&#26377;&#31867;&#22411;&#26816;&#26597;&#30340;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">7.3.1<tt>&nbsp;</tt></span><a href="#%28part._s7..3..1%29" class="tocsubseclink" data-pltdoc="x">&#26816;&#26597;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">7.4<tt>&nbsp;</tt></span><a href="#%28part._s7..4%29" class="tocsubseclink" data-pltdoc="x">INFERRED&#65306;&#24102;&#26377;&#31867;&#22411;&#25512;&#23548;&#30340;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">7.4.1<tt>&nbsp;</tt></span><a href="#%28part._s7..4..1%29" class="tocsubseclink" data-pltdoc="x">&#20195;&#25442;&#24335;</a></td></tr><tr><td><span class="tocsublinknumber">7.4.2<tt>&nbsp;</tt></span><a href="#%28part._s7..4..2%29" class="tocsubseclink" data-pltdoc="x">&#21512;&#19968;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">7.4.3<tt>&nbsp;</tt></span><a href="#%28part._s7..4..3%29" class="tocsubseclink" data-pltdoc="x">&#25214;&#20986;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;</a></td></tr><tr><td><span class="tocsublinknumber">8<tt>&nbsp;</tt></span><a href="#%28part._modules%29" class="tocsubseclink" data-pltdoc="x">&#27169;&#22359;</a></td></tr><tr><td><span class="tocsublinknumber">8.1<tt>&nbsp;</tt></span><a href="#%28part._s8..1%29" class="tocsubseclink" data-pltdoc="x">&#31616;&#21333;&#27169;&#22359;&#31995;&#32479;</a></td></tr><tr><td><span class="tocsublinknumber">8.1.1<tt>&nbsp;</tt></span><a href="#%28part._s8..1..1%29" class="tocsubseclink" data-pltdoc="x">&#20363;&#23376;</a></td></tr><tr><td><span class="tocsublinknumber">8.1.2<tt>&nbsp;</tt></span><a href="#%28part._s8..1..2%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616;&#31616;&#21333;&#27169;&#22359;&#31995;&#32479;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._s8..1-syntax%29" class="tocsubseclink" data-pltdoc="x">&#35821;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._s8..1-the-interpreter%29" class="tocsubseclink" data-pltdoc="x">&#35299;&#37322;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._s8..1-checker%29" class="tocsubseclink" data-pltdoc="x">&#26816;&#26597;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">8.2<tt>&nbsp;</tt></span><a href="#%28part._s8..2%29" class="tocsubseclink" data-pltdoc="x">&#22768;&#26126;&#31867;&#22411;&#30340;&#27169;&#22359;</a></td></tr><tr><td><span class="tocsublinknumber">8.2.1<tt>&nbsp;</tt></span><a href="#%28part._s8..2..1%29" class="tocsubseclink" data-pltdoc="x">&#20363;&#23376;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._s8..2-transparent-types%29" class="tocsubseclink" data-pltdoc="x">&#36879;&#26126;&#31867;&#22411;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._s8..2-opaque-types%29" class="tocsubseclink" data-pltdoc="x">&#27169;&#31946;&#31867;&#22411;</a></td></tr><tr><td><span class="tocsublinknumber">8.2.2<tt>&nbsp;</tt></span><a href="#%28part._s8..2..2%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._syntax-and-the-interpreter%29" class="tocsubseclink" data-pltdoc="x">&#35821;&#27861;&#21644;&#35299;&#37322;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._the-checker%29" class="tocsubseclink" data-pltdoc="x">&#26816;&#26597;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">8.3<tt>&nbsp;</tt></span><a href="#%28part._s8..3%29" class="tocsubseclink" data-pltdoc="x">&#27169;&#22359;&#36807;&#31243;</a></td></tr><tr><td><span class="tocsublinknumber">8.3.1<tt>&nbsp;</tt></span><a href="#%28part._s8..3..1%29" class="tocsubseclink" data-pltdoc="x">&#20363;&#23376;</a></td></tr><tr><td><span class="tocsublinknumber">8.3.2<tt>&nbsp;</tt></span><a href="#%28part._s8..3..2%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._s8..3-syntax%29" class="tocsubseclink" data-pltdoc="x">&#35821;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._s8..3-interpreter%29" class="tocsubseclink" data-pltdoc="x">&#35299;&#37322;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._s8..3-checker%29" class="tocsubseclink" data-pltdoc="x">&#26816;&#26597;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">9<tt>&nbsp;</tt></span><a href="#%28part._oac%29" class="tocsubseclink" data-pltdoc="x">&#23545;&#35937;&#21644;&#31867;</a></td></tr><tr><td><span class="tocsublinknumber">9.1<tt>&nbsp;</tt></span><a href="#%28part._s9..1%29" class="tocsubseclink" data-pltdoc="x">&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;</a></td></tr><tr><td><span class="tocsublinknumber">9.2<tt>&nbsp;</tt></span><a href="#%28part._s9..2%29" class="tocsubseclink" data-pltdoc="x">&#32487;&#25215;</a></td></tr><tr><td><span class="tocsublinknumber">9.3<tt>&nbsp;</tt></span><a href="#%28part._s9..3%29" class="tocsubseclink" data-pltdoc="x">&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">9.4<tt>&nbsp;</tt></span><a href="#%28part._s9..4%29" class="tocsubseclink" data-pltdoc="x">&#35299;&#37322;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">9.4.1<tt>&nbsp;</tt></span><a href="#%28part._s9..4..1%29" class="tocsubseclink" data-pltdoc="x">&#23545;&#35937;</a></td></tr><tr><td><span class="tocsublinknumber">9.4.2<tt>&nbsp;</tt></span><a href="#%28part._s9..4..2%29" class="tocsubseclink" data-pltdoc="x">&#26041;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">9.4.3<tt>&nbsp;</tt></span><a href="#%28part._s9..4..3%29" class="tocsubseclink" data-pltdoc="x">&#31867;&#21644;&#31867;&#29615;&#22659;</a></td></tr><tr><td><span class="tocsublinknumber">9.4.4<tt>&nbsp;</tt></span><a href="#%28part._s9..4..4%29" class="tocsubseclink" data-pltdoc="x">&#26041;&#27861;&#29615;&#22659;</a></td></tr><tr><td><span class="tocsublinknumber">9.4.5<tt>&nbsp;</tt></span><a href="#%28part._s9..4..5%29" class="tocsubseclink" data-pltdoc="x">&#32451;&#20064;</a></td></tr><tr><td><span class="tocsublinknumber">9.5<tt>&nbsp;</tt></span><a href="#%28part._s9..5%29" class="tocsubseclink" data-pltdoc="x">&#24102;&#26377;&#31867;&#22411;&#30340;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">9.6<tt>&nbsp;</tt></span><a href="#%28part._s9..6%29" class="tocsubseclink" data-pltdoc="x">&#31867;&#22411;&#26816;&#26597;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">10<tt>&nbsp;</tt></span><a href="#%28part._further-reading%29" class="tocsubseclink" data-pltdoc="x">&#25193;&#23637;&#38405;&#35835;</a></td></tr><tr><td><span class="tocsublinknumber">11<tt>&nbsp;</tt></span><a href="#%28part._sllgen-parsing-system%29" class="tocsubseclink" data-pltdoc="x">SLLGEN&#35299;&#26512;&#31995;&#32479;</a></td></tr><tr><td><span class="tocsublinknumber">11.1<tt>&nbsp;</tt></span><a href="#%28part._.B..1%29" class="tocsubseclink" data-pltdoc="x">&#25195;&#25551;</a></td></tr><tr><td><span class="tocsublinknumber">11.2<tt>&nbsp;</tt></span><a href="#%28part._.B..2%29" class="tocsubseclink" data-pltdoc="x">&#35299;&#26512;</a></td></tr><tr><td><span class="tocsublinknumber">11.3<tt>&nbsp;</tt></span><a href="#%28part._.B..3%29" class="tocsubseclink" data-pltdoc="x">SLLGEN &#20013;&#30340;&#25195;&#25551;&#22120;&#21644;&#35299;&#26512;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.B..3-scanners%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#25195;&#25551;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.B..3-grammars%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#35821;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.B..3-operations%29" class="tocsubseclink" data-pltdoc="x">SLLGEN&#30340;&#25805;&#20316;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.B..3-arbno%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">arbno</span>
&#21644; <span class="stt">separated-<wbr></wbr>list</span> &#27169;&#26495;&#20851;&#38190;&#23383;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._bib%29" class="tocsubseclink" data-pltdoc="x">&#21442;&#32771;&#20070;&#30446;</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._indices%29" class="tocsubseclink" data-pltdoc="x">&#32034;&#24341;</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2 class="heading"><a name="(part._~e7~bc~96~e7~a8~8b~e8~af~ad~e8~a8~80~e8~a6~81~e7~b4~a0)"></a>&#32534;&#31243;&#35821;&#35328;&#35201;&#32032;<span class="button-group"><a href="#(part._~e7~bc~96~e7~a8~8b~e8~af~ad~e8~a8~80~e8~a6~81~e7~b4~a0)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Daniel P. Friedman</p><span class="SAuthorSep"><br/></span><p class="author">Mitchell Wand</p></span></div><p><div class="SIntrapara"></div><div class="SIntrapara"></div></p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._fw-trans%29" class="toptoclink" data-pltdoc="x">&#35793;&#32773;&#30340;&#35805;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._glo%29" class="toptoclink" data-pltdoc="x">&#35793;&#21517;&#34920;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._fw%29" class="toptoclink" data-pltdoc="x">&#24207;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._fw-s%29" class="toclink" data-pltdoc="x">&#19977;&#29256;&#38468;&#35328;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._pf%29" class="toptoclink" data-pltdoc="x">&#21069;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._pf-obj%29" class="toclink" data-pltdoc="x">&#30446;&#26631;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._pf-org%29" class="toclink" data-pltdoc="x">&#32452;&#32455;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._pf-use%29" class="toclink" data-pltdoc="x">&#29992;&#27861;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._awk%29" class="toptoclink" data-pltdoc="x">&#33268;&#35874;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._isd%29" class="toptoclink" data-pltdoc="x">1<span class="hspace">&nbsp;</span>&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..1%29" class="toclink" data-pltdoc="x">1.1<span class="hspace">&nbsp;</span>&#36882;&#25512;&#23450;&#20041;&#30340;&#25968;&#25454;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..1..1%29" class="toclink" data-pltdoc="x">1.1.1<span class="hspace">&nbsp;</span>&#24402;&#32435;&#23450;&#20041;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..1..2%29" class="toclink" data-pltdoc="x">1.1.2<span class="hspace">&nbsp;</span>&#35821;&#27861;&#23450;&#20041;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..1..3%29" class="toclink" data-pltdoc="x">1.1.3<span class="hspace">&nbsp;</span>&#24402;&#32435;&#35777;&#26126;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..2%29" class="toclink" data-pltdoc="x">1.2<span class="hspace">&nbsp;</span>&#25512;&#23548;&#36882;&#24402;&#31243;&#24207;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..2..1%29" class="toclink" data-pltdoc="x">1.2.1<span class="hspace">&nbsp;</span><span class="stt">list-length</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..2..2%29" class="toclink" data-pltdoc="x">1.2.2<span class="hspace">&nbsp;</span><span class="stt">nth-element</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..2..3%29" class="toclink" data-pltdoc="x">1.2.3<span class="hspace">&nbsp;</span><span class="stt">remove-first</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..2..4%29" class="toclink" data-pltdoc="x">1.2.4<span class="hspace">&nbsp;</span><span class="stt">occurs-free?</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..2..5%29" class="toclink" data-pltdoc="x">1.2.5<span class="hspace">&nbsp;</span><span class="stt">subst</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..3%29" class="toclink" data-pltdoc="x">1.3<span class="hspace">&nbsp;</span>&#36741;&#21161;&#36807;&#31243;&#21644;&#19978;&#19979;&#25991;&#21442;&#25968;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s1..4%29" class="toclink" data-pltdoc="x">1.4<span class="hspace">&nbsp;</span>&#32451;&#20064;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._da%29" class="toptoclink" data-pltdoc="x">2<span class="hspace">&nbsp;</span>&#25968;&#25454;&#25277;&#35937;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s2..1%29" class="toclink" data-pltdoc="x">2.1<span class="hspace">&nbsp;</span>&#29992;&#25509;&#21475;&#23450;&#20041;&#25968;&#25454;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s2..2%29" class="toclink" data-pltdoc="x">2.2<span class="hspace">&nbsp;</span>&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s2..2..1%29" class="toclink" data-pltdoc="x">2.2.1<span class="hspace">&nbsp;</span>&#29615;&#22659;&#30340;&#25509;&#21475;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s2..2..2%29" class="toclink" data-pltdoc="x">2.2.2<span class="hspace">&nbsp;</span>&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s2..2..3%29" class="toclink" data-pltdoc="x">2.2.3<span class="hspace">&nbsp;</span>&#36807;&#31243;&#34920;&#31034;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s2..3%29" class="toclink" data-pltdoc="x">2.3<span class="hspace">&nbsp;</span>&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s2..4%29" class="toclink" data-pltdoc="x">2.4<span class="hspace">&nbsp;</span>&#23450;&#20041;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#24037;&#20855;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s2..5%29" class="toclink" data-pltdoc="x">2.5<span class="hspace">&nbsp;</span>&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._expr%29" class="toptoclink" data-pltdoc="x">3<span class="hspace">&nbsp;</span>&#34920;&#36798;&#24335;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..1%29" class="toclink" data-pltdoc="x">3.1<span class="hspace">&nbsp;</span>&#35268;&#33539;&#21644;&#23454;&#29616;&#31574;&#30053;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..2%29" class="toclink" data-pltdoc="x">3.2<span class="hspace">&nbsp;</span>LET&#65306;&#19968;&#38376;&#31616;&#21333;&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..2..1%29" class="toclink" data-pltdoc="x">3.2.1<span class="hspace">&nbsp;</span>&#23450;&#20041;&#35821;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..2..2%29" class="toclink" data-pltdoc="x">3.2.2<span class="hspace">&nbsp;</span>&#23450;&#20041;&#20540;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..2..3%29" class="toclink" data-pltdoc="x">3.2.3<span class="hspace">&nbsp;</span>&#29615;&#22659;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..2..4%29" class="toclink" data-pltdoc="x">3.2.4<span class="hspace">&nbsp;</span>&#23450;&#20041;&#34920;&#36798;&#24335;&#30340;&#34892;&#20026;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..2..5%29" class="toclink" data-pltdoc="x">3.2.5<span class="hspace">&nbsp;</span>&#23450;&#20041;&#31243;&#24207;&#30340;&#34892;&#20026;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..2..6%29" class="toclink" data-pltdoc="x">3.2.6<span class="hspace">&nbsp;</span>&#23450;&#20041;&#26465;&#20214;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..2..7%29" class="toclink" data-pltdoc="x">3.2.7<span class="hspace">&nbsp;</span>&#23450;&#20041; <span class="stt">let</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..2..8%29" class="toclink" data-pltdoc="x">3.2.8<span class="hspace">&nbsp;</span>&#23454;&#29616; LET &#35268;&#33539;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..3%29" class="toclink" data-pltdoc="x">3.3<span class="hspace">&nbsp;</span>PROC&#65306;&#26377;&#36807;&#31243;&#30340;&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..3..1%29" class="toclink" data-pltdoc="x">3.3.1<span class="hspace">&nbsp;</span>&#19968;&#20010;&#20363;&#23376;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..3..2%29" class="toclink" data-pltdoc="x">3.3.2<span class="hspace">&nbsp;</span>&#34920;&#31034;&#36807;&#31243;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..4%29" class="toclink" data-pltdoc="x">3.4<span class="hspace">&nbsp;</span>LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..5%29" class="toclink" data-pltdoc="x">3.5<span class="hspace">&nbsp;</span>&#23450;&#30028;&#21644;&#21464;&#37327;&#32465;&#23450;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..6%29" class="toclink" data-pltdoc="x">3.6<span class="hspace">&nbsp;</span>&#28040;&#38500;&#21464;&#37327;&#21517;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..7%29" class="toclink" data-pltdoc="x">3.7<span class="hspace">&nbsp;</span>&#23454;&#29616;&#35789;&#27861;&#22320;&#22336;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..7..1%29" class="toclink" data-pltdoc="x">3.7.1<span class="hspace">&nbsp;</span>&#32763;&#35793;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s3..7..2%29" class="toclink" data-pltdoc="x">3.7.2<span class="hspace">&nbsp;</span>&#26080;&#21517;&#35299;&#37322;&#22120;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._state%29" class="toptoclink" data-pltdoc="x">4<span class="hspace">&nbsp;</span>&#29366;&#24577;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..1%29" class="toclink" data-pltdoc="x">4.1<span class="hspace">&nbsp;</span>&#35745;&#31639;&#30340;&#25928;&#26524;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..2%29" class="toclink" data-pltdoc="x">4.2<span class="hspace">&nbsp;</span>EXPLICIT-REFS&#65306;&#26174;&#24335;&#24341;&#29992;&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..2..1%29" class="toclink" data-pltdoc="x">4.2.1<span class="hspace">&nbsp;</span>&#23384;&#20648;&#22120;&#20256;&#36882;&#35268;&#33539;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..2..2%29" class="toclink" data-pltdoc="x">4.2.2<span class="hspace">&nbsp;</span>&#23450;&#20041;&#26174;&#24335;&#24341;&#29992;&#25805;&#20316;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..2..3%29" class="toclink" data-pltdoc="x">4.2.3<span class="hspace">&nbsp;</span>&#23454;&#29616;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..3%29" class="toclink" data-pltdoc="x">4.3<span class="hspace">&nbsp;</span>IMPLICIT-REFS&#65306;&#38544;&#24335;&#24341;&#29992;&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..3..1%29" class="toclink" data-pltdoc="x">4.3.1<span class="hspace">&nbsp;</span>&#35268;&#33539;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..3..2%29" class="toclink" data-pltdoc="x">4.3.2<span class="hspace">&nbsp;</span>&#23454;&#29616;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..4%29" class="toclink" data-pltdoc="x">4.4<span class="hspace">&nbsp;</span>MUTABLE-PAIRS&#65306;&#21487;&#21464;&#24207;&#23545;&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..4..1%29" class="toclink" data-pltdoc="x">4.4.1<span class="hspace">&nbsp;</span>&#23454;&#29616;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..4..2%29" class="toclink" data-pltdoc="x">4.4.2<span class="hspace">&nbsp;</span>&#21487;&#21464;&#24207;&#23545;&#30340;&#21478;&#19968;&#31181;&#34920;&#31034;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..5%29" class="toclink" data-pltdoc="x">4.5<span class="hspace">&nbsp;</span>&#20256;&#21442;&#21464;&#20307;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..5..1%29" class="toclink" data-pltdoc="x">4.5.1<span class="hspace">&nbsp;</span>&#25353;&#25351;&#35843;&#29992;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s4..5..2%29" class="toclink" data-pltdoc="x">4.5.2<span class="hspace">&nbsp;</span>&#25042;&#27714;&#20540;&#65306;&#25353;&#21517;&#35843;&#29992;&#21644;&#25353;&#38656;&#35843;&#29992;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._cpi%29" class="toptoclink" data-pltdoc="x">5<span class="hspace">&nbsp;</span>&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s5..1%29" class="toclink" data-pltdoc="x">5.1<span class="hspace">&nbsp;</span>&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s5..2%29" class="toclink" data-pltdoc="x">5.2<span class="hspace">&nbsp;</span>&#36339;&#36291;&#24335;&#35299;&#37322;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s5..3%29" class="toclink" data-pltdoc="x">5.3<span class="hspace">&nbsp;</span>&#25351;&#20196;&#24335;&#35299;&#37322;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s5..4%29" class="toclink" data-pltdoc="x">5.4<span class="hspace">&nbsp;</span>&#24322;&#24120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s5..5%29" class="toclink" data-pltdoc="x">5.5<span class="hspace">&nbsp;</span>&#32447;&#31243;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._cps%29" class="toptoclink" data-pltdoc="x">6<span class="hspace">&nbsp;</span>&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s6..1%29" class="toclink" data-pltdoc="x">6.1<span class="hspace">&nbsp;</span>&#20889;&#20986;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#30340;&#31243;&#24207;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s6..2%29" class="toclink" data-pltdoc="x">6.2<span class="hspace">&nbsp;</span>&#23614;&#24335;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s6..3%29" class="toclink" data-pltdoc="x">6.3<span class="hspace">&nbsp;</span>&#36716;&#25442;&#20026;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s6..4%29" class="toclink" data-pltdoc="x">6.4<span class="hspace">&nbsp;</span>&#24314;&#27169;&#35745;&#31639;&#25928;&#26524;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._types%29" class="toptoclink" data-pltdoc="x">7<span class="hspace">&nbsp;</span>&#31867;&#22411;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s7..1%29" class="toclink" data-pltdoc="x">7.1<span class="hspace">&nbsp;</span>&#20540;&#21450;&#20854;&#31867;&#22411;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s7..2%29" class="toclink" data-pltdoc="x">7.2<span class="hspace">&nbsp;</span>&#36171;&#20104;&#34920;&#36798;&#20540;&#31867;&#22411;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s7..3%29" class="toclink" data-pltdoc="x">7.3<span class="hspace">&nbsp;</span>CHECKED&#65306;&#24102;&#26377;&#31867;&#22411;&#26816;&#26597;&#30340;&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s7..3..1%29" class="toclink" data-pltdoc="x">7.3.1<span class="hspace">&nbsp;</span>&#26816;&#26597;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s7..4%29" class="toclink" data-pltdoc="x">7.4<span class="hspace">&nbsp;</span>INFERRED&#65306;&#24102;&#26377;&#31867;&#22411;&#25512;&#23548;&#30340;&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s7..4..1%29" class="toclink" data-pltdoc="x">7.4.1<span class="hspace">&nbsp;</span>&#20195;&#25442;&#24335;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s7..4..2%29" class="toclink" data-pltdoc="x">7.4.2<span class="hspace">&nbsp;</span>&#21512;&#19968;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s7..4..3%29" class="toclink" data-pltdoc="x">7.4.3<span class="hspace">&nbsp;</span>&#25214;&#20986;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._modules%29" class="toptoclink" data-pltdoc="x">8<span class="hspace">&nbsp;</span>&#27169;&#22359;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..1%29" class="toclink" data-pltdoc="x">8.1<span class="hspace">&nbsp;</span>&#31616;&#21333;&#27169;&#22359;&#31995;&#32479;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..1..1%29" class="toclink" data-pltdoc="x">8.1.1<span class="hspace">&nbsp;</span>&#20363;&#23376;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..1..2%29" class="toclink" data-pltdoc="x">8.1.2<span class="hspace">&nbsp;</span>&#23454;&#29616;&#31616;&#21333;&#27169;&#22359;&#31995;&#32479;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..1-syntax%29" class="toclink" data-pltdoc="x">&#35821;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..1-the-interpreter%29" class="toclink" data-pltdoc="x">&#35299;&#37322;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..1-checker%29" class="toclink" data-pltdoc="x">&#26816;&#26597;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..2%29" class="toclink" data-pltdoc="x">8.2<span class="hspace">&nbsp;</span>&#22768;&#26126;&#31867;&#22411;&#30340;&#27169;&#22359;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..2..1%29" class="toclink" data-pltdoc="x">8.2.1<span class="hspace">&nbsp;</span>&#20363;&#23376;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..2-transparent-types%29" class="toclink" data-pltdoc="x">&#36879;&#26126;&#31867;&#22411;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..2-opaque-types%29" class="toclink" data-pltdoc="x">&#27169;&#31946;&#31867;&#22411;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..2..2%29" class="toclink" data-pltdoc="x">8.2.2<span class="hspace">&nbsp;</span>&#23454;&#29616;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._syntax-and-the-interpreter%29" class="toclink" data-pltdoc="x">&#35821;&#27861;&#21644;&#35299;&#37322;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._the-checker%29" class="toclink" data-pltdoc="x">&#26816;&#26597;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..3%29" class="toclink" data-pltdoc="x">8.3<span class="hspace">&nbsp;</span>&#27169;&#22359;&#36807;&#31243;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..3..1%29" class="toclink" data-pltdoc="x">8.3.1<span class="hspace">&nbsp;</span>&#20363;&#23376;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..3..2%29" class="toclink" data-pltdoc="x">8.3.2<span class="hspace">&nbsp;</span>&#23454;&#29616;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..3-syntax%29" class="toclink" data-pltdoc="x">&#35821;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..3-interpreter%29" class="toclink" data-pltdoc="x">&#35299;&#37322;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s8..3-checker%29" class="toclink" data-pltdoc="x">&#26816;&#26597;&#22120;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._oac%29" class="toptoclink" data-pltdoc="x">9<span class="hspace">&nbsp;</span>&#23545;&#35937;&#21644;&#31867;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..1%29" class="toclink" data-pltdoc="x">9.1<span class="hspace">&nbsp;</span>&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..2%29" class="toclink" data-pltdoc="x">9.2<span class="hspace">&nbsp;</span>&#32487;&#25215;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..3%29" class="toclink" data-pltdoc="x">9.3<span class="hspace">&nbsp;</span>&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..4%29" class="toclink" data-pltdoc="x">9.4<span class="hspace">&nbsp;</span>&#35299;&#37322;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..4..1%29" class="toclink" data-pltdoc="x">9.4.1<span class="hspace">&nbsp;</span>&#23545;&#35937;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..4..2%29" class="toclink" data-pltdoc="x">9.4.2<span class="hspace">&nbsp;</span>&#26041;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..4..3%29" class="toclink" data-pltdoc="x">9.4.3<span class="hspace">&nbsp;</span>&#31867;&#21644;&#31867;&#29615;&#22659;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..4..4%29" class="toclink" data-pltdoc="x">9.4.4<span class="hspace">&nbsp;</span>&#26041;&#27861;&#29615;&#22659;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..4..5%29" class="toclink" data-pltdoc="x">9.4.5<span class="hspace">&nbsp;</span>&#32451;&#20064;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..5%29" class="toclink" data-pltdoc="x">9.5<span class="hspace">&nbsp;</span>&#24102;&#26377;&#31867;&#22411;&#30340;&#35821;&#35328;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._s9..6%29" class="toclink" data-pltdoc="x">9.6<span class="hspace">&nbsp;</span>&#31867;&#22411;&#26816;&#26597;&#22120;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._further-reading%29" class="toptoclink" data-pltdoc="x">10<span class="hspace">&nbsp;</span>&#25193;&#23637;&#38405;&#35835;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sllgen-parsing-system%29" class="toptoclink" data-pltdoc="x">11<span class="hspace">&nbsp;</span>SLLGEN&#35299;&#26512;&#31995;&#32479;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.B..1%29" class="toclink" data-pltdoc="x">11.1<span class="hspace">&nbsp;</span>&#25195;&#25551;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.B..2%29" class="toclink" data-pltdoc="x">11.2<span class="hspace">&nbsp;</span>&#35299;&#26512;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.B..3%29" class="toclink" data-pltdoc="x">11.3<span class="hspace">&nbsp;</span>SLLGEN &#20013;&#30340;&#25195;&#25551;&#22120;&#21644;&#35299;&#26512;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.B..3-scanners%29" class="toclink" data-pltdoc="x">&#23450;&#20041;&#25195;&#25551;&#22120;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.B..3-grammars%29" class="toclink" data-pltdoc="x">&#23450;&#20041;&#35821;&#27861;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.B..3-operations%29" class="toclink" data-pltdoc="x">SLLGEN&#30340;&#25805;&#20316;</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.B..3-arbno%29" class="toclink" data-pltdoc="x"><span class="stt">arbno</span>
&#21644; <span class="stt">separated-list</span> &#27169;&#26495;&#20851;&#38190;&#23383;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._bib%29" class="toptoclink" data-pltdoc="x">&#21442;&#32771;&#20070;&#30446;</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._indices%29" class="toptoclink" data-pltdoc="x">&#32034;&#24341;</a></p></td></tr></table><h3 class="heading"><a name="(part._fw-trans)"></a>&#35793;&#32773;&#30340;&#35805;<span class="button-group"><a href="#(part._fw-trans)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p>&#36825;&#37324;&#20171;&#32461;&#32473;&#35835;&#32773;&#30340;&#65292;&#26159;&#20025;&#23612;&#23572;&#183;&#24343;&#37324;&#24503;&#26364; (Daniel P. Friedman) &#25945;&#25480;&#30340;&#33879;&#20316;&#12290;</p><p>&#24343;&#37324;&#24503;&#26364;&#25945;&#25480;&#30340;&#33879;&#20316;&#65292;&#38500;&#20102;&#26089;&#24180;&#35770;&#25991;&#20197;&#21450;&#8220;&#23567;&#20154;&#20070;&#8221;&#31995;&#21015;
&#65288;<span class="emph">The Little Schemer</span> &#21450;&#20854;&#23427;&#65289;&#20043;&#22806;&#65292;&#35793;&#32773;&#25152;&#35265;&#65292;&#23578;&#26377;&#12298;<span class="emph">&#32534;&#31243;&#35821;
&#35328;&#35201;&#32032;</span>&#12299;&#65288;<span class="emph">Essentials of Programming Languages</span>&#65292;&#31616;&#31216;
<span class="emph">EoPL</span>&#65289;&#21644;&#12298;<span class="emph">Scheme &#19982;&#32534;&#31243;&#33402;&#26415;</span>&#12299; (<span class="emph">Scheme and the
Art of Programming</span>)&#12290;&#36825;&#20123;&#20070;&#20013;&#65292;&#24403;&#23646; &#12298;<span class="emph">&#32534;&#31243;&#35821;&#35328;&#35201;&#32032;</span>&#12299;&#21644;
&#12298;<span class="emph">Scheme &#19982;&#32534;&#31243;&#33402;&#26415;</span>&#12299;&#26368;&#20855;&#25945;&#26448;&#24615;&#36136;&#12290;&#20004;&#20070;&#25152;&#36848;&#35805;&#39064;&#26082;&#22810;&#65292;&#34892;&#25991;&#21448;&#24179;&#30333;&#26131;&#25026;&#65292;
&#35835;&#32773;&#24490;&#30528;&#20316;&#32773;&#38138;&#23601;&#30340;&#36947;&#36335;&#28459;&#27493;&#65292;&#33258;&#33021;&#19968;&#31397;&#32534;&#31243;&#35821;&#35328;&#30340;&#38376;&#24452;&#12290;&#36739;&#26202;&#20986;&#30340;&#8220;&#23567;&#20154;
&#20070;&#8221;&#31995;&#21015;&#65292;&#34429;&#28982;&#26159;&#22827;&#23376;&#33258;&#36947;&#65292;&#21364;&#26377;&#26575;&#25289;&#22270;&#23545;&#35805;&#24405;&#30340;&#24847;&#21619;&#12290;&#27599;&#26412;&#19987;&#28041;&#19968;&#20010;&#20027;&#39064;&#65292;
&#34180;&#34180;&#19968;&#26412;&#65292;&#19981;&#20687;&#24066;&#38754;&#19978;&#24120;&#35265;&#30340;&#35745;&#31639;&#26426;&#20070;&#31821;&#65292;&#21160;&#36740;&#21315;&#39029;&#12290;&#20294;&#26159;&#27599;&#19968;&#26412;&#37117;&#35328;&#31616;&#24847;&#36165;&#65292;&#20540;&#24471;&#21453;&#22797;&#38405;
&#35835;&#12290;</p><p><span class="emph">The Little Schemer</span> &#22240;&#20026;&#29992;&#26032;&#39062;&#65288;&#23601;&#35745;&#31639;&#26426;&#31185;&#23398;&#26469;&#35828;&#65289;&#30340;&#24418;&#24335;&#35762;&#25480;&#26368;&#22522;&#26412;&#30340;
&#35745;&#31639;&#26426;&#31185;&#23398;&#21407;&#29702;&#65292;&#26089;&#25104;&#20026;&#21516;&#31867;&#22270;&#20070;&#20013;&#30340;&#21517;&#33879;&#12290;&#19981;&#36807;&#36825;&#31867;&#22270;&#20070;&#20284;&#20046;&#20687;&#22841;&#29983;&#29275;&#25490;&#19968;&#26679;&#65292;&#19981;&#22823;&#23545;&#25105;
&#22269;&#35835;&#32773;&#30340;&#32963;&#21475;&#65292;&#25152;&#20197;&#23427;&#30340;&#32763;&#35793;&#21644;&#24341;&#36827;&#65292;&#36824;&#26159;&#36817;&#20960;&#24180;&#30340;&#20107;&#65292;&#26159;&#21542;&#24341;&#36215;&#28040;&#21270;&#19981;&#33391;&#65292;&#22823;&#27010;&#20173;&#24453;&#35266;&#23519;&#12290;
&#33267;&#20110;&#20043;&#21518;&#35762;&#36923;&#36753;&#32534;&#31243;&#30340; <span class="emph">The Reasoned Schemer</span>&#65292;&#35762;&#35774;&#35745;&#27169;&#24335;&#30340; <span class="emph">A
Little Java, A Few Patterns</span>&#65292;&#35762;&#23450;&#29702;&#35777;&#26126;&#30340; <span class="emph">The Little Prover</span>&#65292;
&#35762;<span class="emph">&#20381;&#36182;&#31867;&#22411;</span> (<span class="emph">dependent types</span>) &#30340; <span class="emph">The Little Typer</span>&#65292;&#26356;&#20047;&#20154;&#38382;&#27941;&#12290;
&#36825;&#20063;&#35768;&#19981;&#33021;&#24618;&#35835;&#32773;&#65306;&#36825;&#20123;&#33879;&#20316;&#25152;&#28041;&#30340;&#20027;&#39064;&#65292;&#26412;&#26469;&#23601;&#40092;&#26377;&#24191;&#27867;&#20256;&#25773;&#30340;&#20013;&#25991;&#35793;&#33879;&#65288;&#35774;&#35745;&#27169;&#24335;&#38500;
&#22806;&#65289;&#12290;&#20316;&#32773;&#19981;&#36807;&#26159;&#23558;&#23427;&#20204;&#21453;&#21005;&#25552;&#28860;&#65292;&#20197;&#31616;&#27905;&#32780;&#23500;&#26377;&#21019;&#36896;&#24615;&#30340;&#26041;&#24335;&#21152;&#20197;&#20171;&#32461;&#12290;&#26082;&#28982;&#36825;&#20123;&#22270;&#20070;&#30340;
&#20027;&#39064;&#65292;&#26412;&#19981;&#20026;&#20154;&#25152;&#29087;&#30693;&#65292;&#21448;&#19981;&#20687;&#28909;&#38376;&#25216;&#26415;&#19968;&#26679;&#65292;&#22570;&#20570;&#39640;&#34218;&#32844;&#20301;&#30340;&#25970;&#38376;&#30742;&#65292;&#24590;&#33021;&#26399;&#26395;&#35835;&#32773;&#23545;&#23427;
&#20204;&#21457;&#29983;&#20852;&#36259;&#21602;&#65311;</p><p>&#21516;&#26679;&#30340;&#29702;&#30001;&#65292;&#21364;&#19981;&#36866;&#29992;&#20110;&#12298;<span class="emph">&#32534;&#31243;&#35821;&#35328;&#35201;&#32032;</span>&#12299;&#12290;&#22914;&#26524;&#35828;&#32534;&#31243;&#35821;&#35328;&#19990;&#30028;&#26159;&#19968;&#24231;&#26080;&#23613;
&#23485;&#24191;&#30340;&#22478;&#22561;&#65292;&#8220;&#23567;&#20154;&#20070;&#8221;&#31995;&#21015;&#23601;&#26159;&#20171;&#32461;&#22478;&#22561;&#20013;&#35774;&#35745;&#26368;&#31934;&#24039;&#30340;&#25151;
&#38388;&#65307;<span class="emph">EoPL</span> &#20171;&#32461;&#30340;&#65292;&#26159;&#36896;&#22478;&#22561;&#29992;&#30340;&#30722;&#30707;&#12290;&#25151;&#38388;&#30340;&#24067;&#23616;&#35013;&#39280;&#24448;&#24448;&#21464;&#21270;&#24456;&#24555;&#65292;&#36896;&#25151;
&#38388;&#29992;&#30340;&#30722;&#30707;&#21464;&#21160;&#24471;&#21364;&#26497;&#24930;&#12290;&#34429;&#28982;&#26032;&#30340;&#32534;&#31243;&#35821;&#35328;&#20173;&#22312;&#28304;&#28304;&#19981;&#26029;&#22320;&#35774;&#35745;&#20986;&#26469;&#65292;&#26412;&#20070;&#20171;&#32461;&#30340;&#22823;&#22810;&#25968;
&#27010;&#24565;&#20173;&#23558;&#23384;&#22312;&#20110;&#35768;&#22810;&#26395;&#24471;&#35265;&#26395;&#19981;&#35265;&#30340;&#32534;&#31243;&#35821;&#35328;&#20043;&#20013;&#12290;&#21363;&#20351;&#35835;&#32773;&#24182;&#19981;&#25171;&#31639;&#20570;&#35745;&#31639;&#26426;&#39046;&#22495;&#30340;
&#8220;&#27877;&#29926;&#21280;&#8221;&#65292;&#20180;&#32454;&#38405;&#35835;&#26412;&#20070;&#65292;&#20173;&#33021;&#23545;&#20247;&#22810;&#20064;&#35265;&#30340;&#27010;&#24565;&#21152;&#28145;&#29702;&#35299;&#12290;</p><p>&#23613;&#31649;&#35745;&#31639;&#26426;&#31185;&#23398;&#20063;&#31216;&#31185;&#23398;&#65292;&#20174;&#22823;&#37327;&#27969;&#34892;&#30340;&#20070;&#31821;&#20043;&#20013;&#65292;&#25105;&#20204;&#24456;&#38590;&#30475;&#21040;&#23427;&#30340;&#31185;&#23398;&#24615;&#33258;&#20309;&#32780;&#26469;&#65292;&#35835;
&#36807;&#26412;&#20070;&#65292;&#25105;&#20204;&#33021;&#22815;&#28165;&#26224;&#22320;&#30475;&#21040;&#65306;&#30475;&#20284;&#28102;&#20081;&#30340;&#32534;&#31243;&#35821;&#35328;&#19990;&#30028;&#32972;&#21518;&#65292;&#20063;&#23384;&#22312;&#26576;&#20123;&#29282;&#22266;&#30340;&#36816;&#34892;&#35268;&#24459;&#12290;
&#22914;&#21516;&#22320;&#24515;&#35828;&#32473;&#20154;&#24102;&#26469;&#30340;&#22256;&#25200;&#19968;&#26679;&#65292;&#36829;&#32972;&#36825;&#20123;&#35268;&#24459;&#65292;&#23558;&#32473;&#32534;&#31243;&#35821;&#35328;&#30340;&#29992;&#25143;&#24102;&#26469;&#26080;&#31351;&#30340;&#40635;&#28902;&#12290;&#29702;
&#35299;&#23427;&#20204;&#65292;&#23601;&#33021;&#26356;&#36731;&#26494;&#22320;&#29702;&#35299;&#19968;&#38376;&#32534;&#31243;&#35821;&#35328;&#12290;&#32780;&#36825;&#26679;&#30340;&#29702;&#35299;&#65292;&#21183;&#24517;&#33021;&#28040;&#38500;&#35768;&#22810;&#26080;&#35859;&#30340;&#20105;&#35770;&#12290;</p><p>&#35828;&#36215;&#20105;&#35770;&#65292;&#26412;&#20070;&#20986;&#29256;&#24050;&#26377;&#19977;&#21313;&#24180;&#12290;&#19977;&#21313;&#24180;&#38388;&#65292;&#26080;&#25968;&#30340;&#20105;&#35770;&#26469;&#20102;&#21448;&#21435;&#20102;&#65292;&#26412;&#20070;&#21364;&#20174;&#26410;&#33021;&#22312;&#20013;&#22269;
&#25214;&#21040;&#23427;&#30340;&#35835;&#32773;&#12290;&#23427;&#20170;&#22825;&#23601;&#33021;&#21527;&#65311;&#22825;&#26263;&#19979;&#26469;&#65292;&#22823;&#39118;&#22914;&#37202;&#65292;&#32495;&#32418;&#30340;&#26202;&#38686;&#20174;&#33485;&#37057;&#30340;&#26641;&#26408;&#21518;&#30452;&#21319;&#36215;&#26469;&#65292;
&#28385;&#36335;&#27773;&#36710;&#21809;&#30528;&#24613;&#20419;&#30340;&#27468;&#35875;&#65292;&#20687;&#26159;&#20652;&#30528;&#25105;&#65292;&#24555;&#28857;&#23558;&#36825;&#26412;&#20070;&#35793;&#20986;&#26469;&#12290;&#34429;&#20173;&#25265;&#30528;&#36825;&#26679;&#30340;&#30097;&#38382;&#65292;&#25105;&#36824;
&#26159;&#24895;&#24847;&#25226;&#36825;&#26412;&#20070;&#20171;&#32461;&#32473;&#35835;&#32773;&#12290;</p><h3 class="heading"><a name="(part._glo)"></a>&#35793;&#21517;&#34920;<span class="button-group"><a href="#(part._glo)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p>&#19979;&#34920;&#21015;&#20986;&#26412;&#20070;&#19987;&#26377;&#21517;&#35789;&#21450;&#20854;&#32763;&#35793;&#65292;&#24182;&#23545;&#26377;&#30097;&#20041;&#32773;&#30053;&#21152;&#35828;&#26126;&#12290;</p><p><table cellspacing="0" cellpadding="0" class="Small"><tr><td valign="baseline"><p><div class="SIntrapara"></div></p></td><td valign="baseline"><p><div class="SIntrapara"></div></p></td></tr><tr><td valign="baseline"><p>Abstract data type (ADT)</p></td><td valign="baseline"><p>&#25277;&#35937;&#25968;&#25454;&#31867;&#22411;</p></td></tr><tr><td valign="baseline"><p>Abstract syntax tree</p></td><td valign="baseline"><p>&#25277;&#35937;&#35821;&#27861;&#26641;</p></td></tr><tr><td valign="baseline"><p>Abstract syntax</p></td><td valign="baseline"><p>&#25277;&#35937;&#35821;&#27861;</p></td></tr><tr><td valign="baseline"><p>Abstract type</p></td><td valign="baseline"><p>&#25277;&#35937;&#31867;&#22411;</p></td></tr><tr><td valign="baseline"><p>Abstraction boundary</p></td><td valign="baseline"><p>&#25277;&#35937;&#36793;&#30028;</p></td></tr><tr><td valign="baseline"><p>Activation record</p></td><td valign="baseline"><p>&#27963;&#36291;&#35760;&#24405;&#34920;</p></td></tr><tr><td valign="baseline"><p>Actual parameter</p></td><td valign="baseline"><p><div class="SIntrapara">&#23454;&#38469;&#21442;&#25968;&#65292;&#31616;&#31216;&#23454;&#21442;
&#65288;<span class="emph">&#21516; argument</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Advertise</p></td><td valign="baseline"><p>&#20844;&#24067;</p></td></tr><tr><td valign="baseline"><p>Alternation</p></td><td valign="baseline"><p>&#24182;&#32852;</p></td></tr><tr><td valign="baseline"><p>Analyzer</p></td><td valign="baseline"><p>&#20998;&#26512;&#22120;</p></td></tr><tr><td valign="baseline"><p>Ancestor</p></td><td valign="baseline"><p>&#31062;&#20808;</p></td></tr><tr><td valign="baseline"><p>Antecedent</p></td><td valign="baseline"><p>&#21069;&#20214;</p></td></tr><tr><td valign="baseline"><p>Application expression</p></td><td valign="baseline"><p>&#35843;&#29992;&#34920;&#36798;&#24335;</p></td></tr><tr><td valign="baseline"><p>Apply</p></td><td valign="baseline"><p>&#24212;&#29992;</p></td></tr><tr><td valign="baseline"><p>Argument</p></td><td valign="baseline"><p><div class="SIntrapara">&#23454;&#21442;&#65288;<span class="emph">&#25991;&#20013;&#26377;&#26102;&#20063;&#29992;&#36825;&#19968;&#26415;&#35821;&#27867;
&#25351;&#21442;&#25968;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Association-list</p></td><td valign="baseline"><p>&#20851;&#32852;&#21015;&#34920;</p></td></tr><tr><td valign="baseline"><p>Axiom</p></td><td valign="baseline"><p>&#20844;&#29702;</p></td></tr><tr><td valign="baseline"><p>Backus-Naur Form</p></td><td valign="baseline"><p>&#24052;&#31185;&#26031;-&#35834;&#23572;&#33539;&#24335;</p></td></tr><tr><td valign="baseline"><p><span class="texMathInline">\beta</span>-reduction</p></td><td valign="baseline"><p><span class="texMathInline">\beta</span>-&#25512;&#23548;</p></td></tr><tr><td valign="baseline"><p>Bigits</p></td><td valign="baseline"><p>&#22823;&#20301;</p></td></tr><tr><td valign="baseline"><p>Bignum representation</p></td><td valign="baseline"><p>&#22823;&#25968;&#34920;&#31034;&#27861;</p></td></tr><tr><td valign="baseline"><p>Binary method problem</p></td><td valign="baseline"><p>&#20108;&#20803;&#26041;&#27861;&#38382;&#39064;</p></td></tr><tr><td valign="baseline"><p>Binary semaphore</p></td><td valign="baseline"><p>&#20108;&#20803;&#20449;&#21495;&#37327;</p></td></tr><tr><td valign="baseline"><p>Binding</p></td><td valign="baseline"><p>&#32465;&#23450;</p></td></tr><tr><td valign="baseline"><p>Blocked</p></td><td valign="baseline"><p>&#21463;&#38459;&#22622;</p></td></tr><tr><td valign="baseline"><p>Body</p></td><td valign="baseline"><p><div class="SIntrapara">&#20027;&#20307;&#65288;<span class="emph">&#19968;&#33324;&#25351;&#26576;&#31181;&#35821;&#27861;&#32467;&#26500;
&#65288;<span class="stt">let</span>&#23450;&#20041;&#12289;&#36807;&#31243;&#23450;&#20041;&#12289;&#31867;&#26041;&#27861;&#23450;&#20041;&#65292;&#29978;&#33267;&#25972;&#20010;&#31243;&#24207;&#65289;&#20043;&#20013;&#65292;&#21464;&#37327;&#22768;&#26126;&#21253;&#35065;&#36215;&#26469;&#30340;&#12289;&#25191;
&#34892;&#26399;&#26395;&#21160;&#20316;&#30340;&#37096;&#20998;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Bottom-up</p></td><td valign="baseline"><p>&#33258;&#24213;&#21521;&#19978;</p></td></tr><tr><td valign="baseline"><p>Bounce</p></td><td valign="baseline"><p><div class="SIntrapara">&#24377;&#29699;&#65288;<span class="emph">&#21442;&#35265; trampoline</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Bound variable</p></td><td valign="baseline"><p>&#32465;&#23450;&#21464;&#37327;</p></td></tr><tr><td valign="baseline"><p>Bound</p></td><td valign="baseline"><p>&#32465;&#23450;</p></td></tr><tr><td valign="baseline"><p>Byte code</p></td><td valign="baseline"><p>&#23383;&#33410;&#30721;</p></td></tr><tr><td valign="baseline"><p>Call by name</p></td><td valign="baseline"><p>&#25353;&#21517;&#35843;&#29992;</p></td></tr><tr><td valign="baseline"><p>Call by need</p></td><td valign="baseline"><p>&#25353;&#38656;&#35843;&#29992;</p></td></tr><tr><td valign="baseline"><p>Call by reference</p></td><td valign="baseline"><p>&#25353;&#25351;&#35843;&#29992;</p></td></tr><tr><td valign="baseline"><p>Call by value result</p></td><td valign="baseline"><p>&#25353;&#20540;&#21644;&#32467;&#26524;&#35843;&#29992;</p></td></tr><tr><td valign="baseline"><p>Call by value</p></td><td valign="baseline"><p>&#25353;&#20540;&#35843;&#29992;</p></td></tr><tr><td valign="baseline"><p>car</p></td><td valign="baseline"><p>&#39318;&#39033;&#65292;&#25110;&#19981;&#35793;</p></td></tr><tr><td valign="baseline"><p>Casting</p></td><td valign="baseline"><p>&#24378;&#21046;&#36716;&#25442;</p></td></tr><tr><td valign="baseline"><p>cdr</p></td><td valign="baseline"><p>&#20313;&#39033;&#65292;&#25110;&#19981;&#35793;</p></td></tr><tr><td valign="baseline"><p>Child</p></td><td valign="baseline"><p>&#23376;&#31867;</p></td></tr><tr><td valign="baseline"><p>Class environment</p></td><td valign="baseline"><p>&#31867;&#29615;&#22659;</p></td></tr><tr><td valign="baseline"><p>Class</p></td><td valign="baseline"><p><div class="SIntrapara">&#31867;&#65292;&#25110;&#31867;&#21035;&#65288;<span class="emph">&#22312;<a href="#%28part._oac%29" data-pltdoc="x">&#23545;&#35937;&#21644;&#31867;</a>&#65292;class &#29305;&#25351;
&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#20013;&#30340;&#31867;&#65307;&#22312;<a href="#%28elem._sllgen%29" data-pltdoc="x">&#38468;&#24405; B</a>&#65292;class &#25351;&#35789;&#29260;&#30340;&#31181;&#31867;&#12290;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Client</p></td><td valign="baseline"><p>&#23458;&#25143;</p></td></tr><tr><td valign="baseline"><p>Closed over, closed in</p></td><td valign="baseline"><p>&#38381;&#21512;&#20110;</p></td></tr><tr><td valign="baseline"><p>Closure</p></td><td valign="baseline"><p>&#38381;&#21253;</p></td></tr><tr><td valign="baseline"><p>Coinduction</p></td><td valign="baseline"><p>&#20313;&#24402;&#32435;</p></td></tr><tr><td valign="baseline"><p>Concatenation</p></td><td valign="baseline"><p>&#20018;&#32852;</p></td></tr><tr><td valign="baseline"><p>Conclusion</p></td><td valign="baseline"><p>&#32467;&#35770;</p></td></tr><tr><td valign="baseline"><p>Concrete syntax</p></td><td valign="baseline"><p>&#20855;&#20307;&#35821;&#27861;</p></td></tr><tr><td valign="baseline"><p>Concrete type</p></td><td valign="baseline"><p>&#20855;&#20307;&#31867;&#22411;</p></td></tr><tr><td valign="baseline"><p>Consequent</p></td><td valign="baseline"><p>&#21518;&#20214;</p></td></tr><tr><td valign="baseline"><p>Constructor</p></td><td valign="baseline"><p>&#26500;&#36896;&#22120;</p></td></tr><tr><td valign="baseline"><p>Context</p></td><td valign="baseline"><p>&#19978;&#19979;&#25991;</p></td></tr><tr><td valign="baseline"><p>Continuation-passing style</p></td><td valign="baseline"><p>&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</p></td></tr><tr><td valign="baseline"><p>Continuation</p></td><td valign="baseline"><p><div class="SIntrapara">&#32493;&#25991;&#65288;<span class="emph">&#36825;&#19968;&#26415;&#35821;&#25110;&#35793;&#20316;
&#8220;&#32487;&#32493;&#8221;&#65292;&#25110;&#35793;&#20316;&#8220;&#32493;&#24310;&#8221;&#65292;&#25110;&#35793;&#20316;&#8220;&#65288;&#35745;&#31639;&#65289;
&#32493;&#20307;&#8221;&#65307;&#36825;&#37324;&#35793;&#20316;&#8220;&#32493;&#25991;&#8221;&#65292;&#26159;&#23558;&#31243;&#24207;&#31867;&#27604;&#20026;&#25991;&#31456;&#65292;&#37027;&#20040;&#20316;&#20026;&#31243;&#24207;&#20013;&#20219;&#24847;&#20301;
&#32622;&#21518;&#32493;&#20869;&#23481;&#30340;&#25277;&#35937;&#65292;continuation&#21363;&#20026;&#8220;&#32493;&#25991;&#8221;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Contour diagram</p></td><td valign="baseline"><p>&#31561;&#28145;&#32447;</p></td></tr><tr><td valign="baseline"><p>Contract</p></td><td valign="baseline"><p>&#21512;&#32422;</p></td></tr><tr><td valign="baseline"><p>Contravariant</p></td><td valign="baseline"><p>&#36870;&#21464;&#30340;</p></td></tr><tr><td valign="baseline"><p>Control context</p></td><td valign="baseline"><p>&#25511;&#21046;&#19978;&#19979;&#25991;</p></td></tr><tr><td valign="baseline"><p>Coroutine</p></td><td valign="baseline"><p>&#21327;&#31243;</p></td></tr><tr><td valign="baseline"><p>Covariant</p></td><td valign="baseline"><p>&#21327;&#21464;&#30340;</p></td></tr><tr><td valign="baseline"><p>Critical region</p></td><td valign="baseline"><p>&#20851;&#38190;&#21306;&#22495;</p></td></tr><tr><td valign="baseline"><p>Curried</p></td><td valign="baseline"><p>&#21654;&#21937;&#24335;</p></td></tr><tr><td valign="baseline"><p>Currying</p></td><td valign="baseline"><p>&#21654;&#21737;&#21270;</p></td></tr><tr><td valign="baseline"><p>Data abstraction</p></td><td valign="baseline"><p>&#25968;&#25454;&#25277;&#35937;</p></td></tr><tr><td valign="baseline"><p>De Bruijn index</p></td><td valign="baseline"><p>&#24503;&#24067;&#40065;&#37329;&#32034;&#24341;</p></td></tr><tr><td valign="baseline"><p>Declaration</p></td><td valign="baseline"><p>&#22768;&#26126;</p></td></tr><tr><td valign="baseline"><p>Deduction tree</p></td><td valign="baseline"><p>&#25512;&#29702;&#26641;</p></td></tr><tr><td valign="baseline"><p>Deference</p></td><td valign="baseline"><p>&#35299;&#24341;&#29992;</p></td></tr><tr><td valign="baseline"><p>Defined language</p></td><td valign="baseline"><p>&#34987;&#23450;&#35821;&#35328;</p></td></tr><tr><td valign="baseline"><p>Defining language</p></td><td valign="baseline"><p>&#23450;&#20041;&#35821;&#35328;</p></td></tr><tr><td valign="baseline"><p>Defunctionalization</p></td><td valign="baseline"><p>&#28040;&#20989;</p></td></tr><tr><td valign="baseline"><p>Delegate</p></td><td valign="baseline"><p>&#22996;&#25176;</p></td></tr><tr><td valign="baseline"><p>Denoted value</p></td><td valign="baseline"><p>&#25351;&#20195;&#20540;</p></td></tr><tr><td valign="baseline"><p>Derivation</p></td><td valign="baseline"><p>&#25512;&#23548;</p></td></tr><tr><td valign="baseline"><p>Descendant</p></td><td valign="baseline"><p>&#21518;&#20195;</p></td></tr><tr><td valign="baseline"><p>Domain equation</p></td><td valign="baseline"><p>&#23450;&#20041;&#22495;&#26041;&#31243;</p></td></tr><tr><td valign="baseline"><p>Domain-specific language</p></td><td valign="baseline"><p>&#29305;&#23450;&#39046;&#22495;&#35821;&#35328;</p></td></tr><tr><td valign="baseline"><p>Double dispatch</p></td><td valign="baseline"><p>&#21452;&#27966;&#21457;</p></td></tr><tr><td valign="baseline"><p>Dynamic assignment</p></td><td valign="baseline"><p>&#21160;&#24577;&#36171;&#20540;</p></td></tr><tr><td valign="baseline"><p>Dynamic binding</p></td><td valign="baseline"><p>&#21160;&#24577;&#32465;&#23450;</p></td></tr><tr><td valign="baseline"><p>Dynamic dispatch</p></td><td valign="baseline"><p>&#21160;&#24577;&#20998;&#21457;</p></td></tr><tr><td valign="baseline"><p>Dynamic extent</p></td><td valign="baseline"><p>&#21160;&#24577;&#26399;&#38480;</p></td></tr><tr><td valign="baseline"><p>Dynamic scoping</p></td><td valign="baseline"><p>&#21160;&#24577;&#23450;&#30028;</p></td></tr><tr><td valign="baseline"><p>Dynamic</p></td><td valign="baseline"><p>&#21160;&#24577;</p></td></tr><tr><td valign="baseline"><p>Eager</p></td><td valign="baseline"><p>&#21363;&#26102;</p></td></tr><tr><td valign="baseline"><p>Effect</p></td><td valign="baseline"><p><div class="SIntrapara">&#25928;&#26524;&#65288;<span class="emph">effect &#24120;&#24120;&#19982; side &#36830;&#29992;&#65292;
&#36890;&#35793;&#20026;&#8220;&#21103;&#20316;&#29992;&#8221;&#65307;&#22312;&#26412;&#20070;&#20013;&#65292;effect &#20174;&#19981;&#19982; side &#36830;&#29992;&#65292;&#25110;&#35768;&#26159;&#26263;&#31034;&#65306;
&#20316;&#20026;&#31243;&#24207;&#25928;&#26524;&#30340; effect&#65292;&#19981;&#20165;&#20165;&#26159;&#19968;&#31181;&#8220;&#21103;&#20135;&#21697;&#8221;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Environment</p></td><td valign="baseline"><p>&#29615;&#22659;</p></td></tr><tr><td valign="baseline"><p>Exception handling</p></td><td valign="baseline"><p>&#24322;&#24120;&#22788;&#29702;</p></td></tr><tr><td valign="baseline"><p>Expanded type</p></td><td valign="baseline"><p>&#23637;&#24320;&#31867;&#22411;</p></td></tr><tr><td valign="baseline"><p>Explicit reference</p></td><td valign="baseline"><p>&#26174;&#24335;&#24341;&#29992;</p></td></tr><tr><td valign="baseline"><p>Export</p></td><td valign="baseline"><p>&#36755;&#20986;</p></td></tr><tr><td valign="baseline"><p>Expressed value</p></td><td valign="baseline"><p>&#34920;&#36798;&#20540;</p></td></tr><tr><td valign="baseline"><p>Expression-oriented</p></td><td valign="baseline"><p>&#38754;&#21521;&#34920;&#36798;&#24335;</p></td></tr><tr><td valign="baseline"><p>Extend</p></td><td valign="baseline"><p>&#25193;&#23637;</p></td></tr><tr><td valign="baseline"><p>Extent</p></td><td valign="baseline"><p>&#26399;&#38480;</p></td></tr><tr><td valign="baseline"><p>External</p></td><td valign="baseline"><p>&#22806;&#22312;</p></td></tr><tr><td valign="baseline"><p>Extractor</p></td><td valign="baseline"><p><div class="SIntrapara">&#25552;&#21462;&#22120;&#65288;<span class="emph">&#25552;&#21462;&#25968;&#25454;&#32467;&#26500;&#20013;&#26576;&#19968;&#37096;
&#20998;&#20869;&#23481;&#30340;&#36807;&#31243;&#32479;&#31216;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Field</p></td><td valign="baseline"><p>&#23383;&#27573;</p></td></tr><tr><td valign="baseline"><p>Flowchart program</p></td><td valign="baseline"><p>&#27969;&#31243;&#22270;&#31243;&#24207;</p></td></tr><tr><td valign="baseline"><p>Fluid binding</p></td><td valign="baseline"><p>&#27969;&#24335;&#32465;&#23450;</p></td></tr><tr><td valign="baseline"><p>For effect</p></td><td valign="baseline"><p>&#27714;&#25928;&#26524;</p></td></tr><tr><td valign="baseline"><p>Form</p></td><td valign="baseline"><p><div class="SIntrapara">&#24418;&#24335;&#65288;<span class="emph">&#22312;&#26412;&#20070;&#20013;&#65292;&#36825;&#19968;&#26415;&#35821;&#21644; construct &#21547;
&#24847;&#30456;&#36817;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Formal parameter</p></td><td valign="baseline"><p>&#24418;&#24335;&#21442;&#25968;&#65292;&#31616;&#31216;&#24418;&#21442;</p></td></tr><tr><td valign="baseline"><p>Frame</p></td><td valign="baseline"><p>&#24103;</p></td></tr><tr><td valign="baseline"><p>Front end</p></td><td valign="baseline"><p>&#21069;&#31471;</p></td></tr><tr><td valign="baseline"><p>Frozen</p></td><td valign="baseline"><p>&#20923;&#32467;</p></td></tr><tr><td valign="baseline"><p>Generalization</p></td><td valign="baseline"><p>&#27867;&#21270;</p></td></tr><tr><td valign="baseline"><p>Generalize</p></td><td valign="baseline"><p>&#25918;&#23485;</p></td></tr><tr><td valign="baseline"><p>Global</p></td><td valign="baseline"><p>&#20840;&#23616;&#24615;</p></td></tr><tr><td valign="baseline"><p>Grammar</p></td><td valign="baseline"><p>&#35821;&#27861;</p></td></tr><tr><td valign="baseline"><p>Grammatical</p></td><td valign="baseline"><p>&#35821;&#27861;</p></td></tr><tr><td valign="baseline"><p>Hard-coded</p></td><td valign="baseline"><p>&#30828;&#32534;&#30721;</p></td></tr><tr><td valign="baseline"><p>Host class</p></td><td valign="baseline"><p>&#25345;&#26377;&#31867;</p></td></tr><tr><td valign="baseline"><p>Hypothesis</p></td><td valign="baseline"><p>&#20551;&#35774;</p></td></tr><tr><td valign="baseline"><p>Ill-typed</p></td><td valign="baseline"><p>&#24322;&#24120;&#31867;&#22411;</p></td></tr><tr><td valign="baseline"><p>Implementation language</p></td><td valign="baseline"><p>&#23454;&#29616;&#35821;&#35328;</p></td></tr><tr><td valign="baseline"><p>Implementation</p></td><td valign="baseline"><p>&#23454;&#29616;</p></td></tr><tr><td valign="baseline"><p>Implicit reference</p></td><td valign="baseline"><p>&#38544;&#24335;&#24341;&#29992;</p></td></tr><tr><td valign="baseline"><p>Inclusive or</p></td><td valign="baseline"><p>&#28085;&#30422;&#25110;</p></td></tr><tr><td valign="baseline"><p>Infer</p></td><td valign="baseline"><p>&#25512;&#26029;</p></td></tr><tr><td valign="baseline"><p>Inherit from</p></td><td valign="baseline"><p>&#32487;&#25215;&#20110;</p></td></tr><tr><td valign="baseline"><p>Inheritance</p></td><td valign="baseline"><p>&#32487;&#25215;</p></td></tr><tr><td valign="baseline"><p>Inherited attribute</p></td><td valign="baseline"><p>&#32487;&#25215;&#23646;&#24615;</p></td></tr><tr><td valign="baseline"><p>Inlining</p></td><td valign="baseline"><p>&#20869;&#32852;</p></td></tr><tr><td valign="baseline"><p>Input expression</p></td><td valign="baseline"><p>&#36755;&#20837;&#34920;&#36798;&#24335;</p></td></tr><tr><td valign="baseline"><p>Instance variable</p></td><td valign="baseline"><p>&#23454;&#20363;&#21464;&#37327;</p></td></tr><tr><td valign="baseline"><p>Instance</p></td><td valign="baseline"><p>&#23454;&#20363;</p></td></tr><tr><td valign="baseline"><p>Interface polymorphism</p></td><td valign="baseline"><p>&#25509;&#21475;&#22810;&#24577;</p></td></tr><tr><td valign="baseline"><p>Interface</p></td><td valign="baseline"><p>&#25509;&#21475;</p></td></tr><tr><td valign="baseline"><p>Internal</p></td><td valign="baseline"><p>&#20869;&#22312;</p></td></tr><tr><td valign="baseline"><p>Interpreter recipe</p></td><td valign="baseline"><p>&#35299;&#37322;&#22120;&#31192;&#26041;</p></td></tr><tr><td valign="baseline"><p>Invariant</p></td><td valign="baseline"><p>&#19981;&#21464;&#24335;</p></td></tr><tr><td valign="baseline"><p>Iterative control behavior</p></td><td valign="baseline"><p>&#36845;&#20195;&#24615;&#25511;&#21046;&#34892;&#20026;</p></td></tr><tr><td valign="baseline"><p>Kleene Plus</p></td><td valign="baseline"><p>&#20811;&#33713;&#23612;&#21152;&#21495;</p></td></tr><tr><td valign="baseline"><p>Kleene Star</p></td><td valign="baseline"><p>&#20811;&#33713;&#23612;&#26143;&#21495;</p></td></tr><tr><td valign="baseline"><p>Kleene closure</p></td><td valign="baseline"><p>&#20811;&#33713;&#23612;&#38381;&#21253;</p></td></tr><tr><td valign="baseline"><p>L-value</p></td><td valign="baseline"><p>&#24038;&#20540;</p></td></tr><tr><td valign="baseline"><p>Lambda calculus</p></td><td valign="baseline"><p>Lambda &#28436;&#31639;</p></td></tr><tr><td valign="baseline"><p>Lazy evaluation</p></td><td valign="baseline"><p>&#25042;&#27714;&#20540;</p></td></tr><tr><td valign="baseline"><p>Lexeme</p></td><td valign="baseline"><p>&#35789;&#32032;</p></td></tr><tr><td valign="baseline"><p>Lexical address</p></td><td valign="baseline"><p>&#35789;&#27861;&#22320;&#22336;</p></td></tr><tr><td valign="baseline"><p>Lexical depth</p></td><td valign="baseline"><p>&#35789;&#28145;</p></td></tr><tr><td valign="baseline"><p>Lexical item</p></td><td valign="baseline"><p>&#35789;&#26465;</p></td></tr><tr><td valign="baseline"><p>Lexical scoping</p></td><td valign="baseline"><p>&#35789;&#27861;&#23450;&#30028;</p></td></tr><tr><td valign="baseline"><p>Lexical specification</p></td><td valign="baseline"><p>&#35789;&#27861;&#35268;&#33539;</p></td></tr><tr><td valign="baseline"><p>Lexical variable</p></td><td valign="baseline"><p>&#35789;&#27861;&#21464;&#37327;</p></td></tr><tr><td valign="baseline"><p>List</p></td><td valign="baseline"><p>&#21015;&#34920;</p></td></tr><tr><td valign="baseline"><p>Location</p></td><td valign="baseline"><p><div class="SIntrapara">&#20301;&#32622;&#65288;<span class="emph">&#29305;&#25351;&#23384;&#20648;&#22120;&#20013;&#30340;&#20301;&#32622;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Member</p></td><td valign="baseline"><p>&#25104;&#21592;</p></td></tr><tr><td valign="baseline"><p>Memoization</p></td><td valign="baseline"><p>&#21161;&#35760;&#27861;</p></td></tr><tr><td valign="baseline"><p>Message-psasing</p></td><td valign="baseline"><p>&#28040;&#24687;&#20256;&#36882;</p></td></tr><tr><td valign="baseline"><p>Metacircular interpreter</p></td><td valign="baseline"><p>&#33258;&#24490;&#29615;&#35299;&#37322;&#22120;</p></td></tr><tr><td valign="baseline"><p>Method name</p></td><td valign="baseline"><p>&#26041;&#27861;&#21517;</p></td></tr><tr><td valign="baseline"><p>Method var</p></td><td valign="baseline"><p>&#26041;&#27861;&#21464;&#37327;</p></td></tr><tr><td valign="baseline"><p>Method</p></td><td valign="baseline"><p>&#26041;&#27861;</p></td></tr><tr><td valign="baseline"><p>Module definition</p></td><td valign="baseline"><p>&#27169;&#22359;&#23450;&#20041;</p></td></tr><tr><td valign="baseline"><p>Module procedure</p></td><td valign="baseline"><p>&#27169;&#22359;&#36807;&#31243;</p></td></tr><tr><td valign="baseline"><p>Module</p></td><td valign="baseline"><p>&#27169;&#22359;</p></td></tr><tr><td valign="baseline"><p>Multiple inheritance</p></td><td valign="baseline"><p>&#22810;&#32487;&#25215;</p></td></tr><tr><td valign="baseline"><p>Mutable</p></td><td valign="baseline"><p>&#21487;&#21464;&#30340;</p></td></tr><tr><td valign="baseline"><p>Mutex exclusion, mutex</p></td><td valign="baseline"><p>&#20114;&#26021;&#38145;</p></td></tr><tr><td valign="baseline"><p>Mutually recursive</p></td><td valign="baseline"><p>&#20114;&#36882;&#24402;</p></td></tr><tr><td valign="baseline"><p>Name mangling</p></td><td valign="baseline"><p>&#21517;&#31216;&#28151;&#28102;</p></td></tr><tr><td valign="baseline"><p><div class="SIntrapara">Natural parameter passing</div></p></td><td valign="baseline"><p><div class="SIntrapara">&#33258;&#28982;&#24335;&#20256;&#21442;
&#65288;<span class="emph">&#30456;&#23545;&#20110;&#20197; &#8220;call by&#8221; &#24320;&#22836;&#30340;&#20960;&#31181;&#21442;&#25968;&#20256;&#36882;&#26426;&#21046;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p><div class="SIntrapara">Object-oriented programming</div></p></td><td valign="baseline"><p>&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;</p></td></tr><tr><td valign="baseline"><p>Object</p></td><td valign="baseline"><p>&#23545;&#35937;</p></td></tr><tr><td valign="baseline"><p>Observer</p></td><td valign="baseline"><p>&#35266;&#27979;&#22120;</p></td></tr><tr><td valign="baseline"><p>Occurrence check</p></td><td valign="baseline"><p>&#39564;&#23384;</p></td></tr><tr><td valign="baseline"><p>Occur free</p></td><td valign="baseline"><p>&#33258;&#30001;&#20986;&#29616;</p></td></tr><tr><td valign="baseline"><p>Offer</p></td><td valign="baseline"><p>&#25552;&#20986;</p></td></tr><tr><td valign="baseline"><p>Opaque type</p></td><td valign="baseline"><p>&#27169;&#31946;&#31867;&#22411;</p></td></tr><tr><td valign="baseline"><p>Operand position</p></td><td valign="baseline"><p>&#25805;&#20316;&#25968;&#20301;&#32622;</p></td></tr><tr><td valign="baseline"><p>Operand</p></td><td valign="baseline"><p>&#25805;&#20316;&#25968;</p></td></tr><tr><td valign="baseline"><p>Operator</p></td><td valign="baseline"><p>&#25805;&#20316;&#31526;</p></td></tr><tr><td valign="baseline"><p>Overloading</p></td><td valign="baseline"><p>&#37325;&#36733;</p></td></tr><tr><td valign="baseline"><p>Override</p></td><td valign="baseline"><p>&#35206;&#30422;</p></td></tr><tr><td valign="baseline"><p>pair</p></td><td valign="baseline"><p>&#24207;&#23545;</p></td></tr><tr><td valign="baseline"><p>Parameterized module</p></td><td valign="baseline"><p>&#21442;&#25968;&#21270;&#27169;&#22359;</p></td></tr><tr><td valign="baseline"><p>Parent</p></td><td valign="baseline"><p>&#29238;&#31867;</p></td></tr><tr><td valign="baseline"><p>Parser</p></td><td valign="baseline"><p>&#35299;&#26512;&#22120;</p></td></tr><tr><td valign="baseline"><p>Parsing</p></td><td valign="baseline"><p>&#35299;&#26512;</p></td></tr><tr><td valign="baseline"><p>Polish prefix notation</p></td><td valign="baseline"><p>&#27874;&#20848;&#21069;&#32512;&#34920;&#31034;&#27861;</p></td></tr><tr><td valign="baseline"><p>Polymorphic</p></td><td valign="baseline"><p>&#22810;&#24577;</p></td></tr><tr><td valign="baseline"><p>Pool</p></td><td valign="baseline"><p><div class="SIntrapara">&#27744;&#65288;<span class="emph">&#29305;&#25351;&#32447;&#31243;&#27744;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Pre-emptive scheduling</p></td><td valign="baseline"><p>&#25250;&#21344;&#24335;&#35843;&#24230;</p></td></tr><tr><td valign="baseline"><p>Predicate</p></td><td valign="baseline"><p>&#35859;&#35789;</p></td></tr><tr><td valign="baseline"><p>Prefix list</p></td><td valign="baseline"><p>&#21069;&#32512;&#21015;&#34920;</p></td></tr><tr><td valign="baseline"><p>Private</p></td><td valign="baseline"><p>&#31169;&#26377;&#30340;</p></td></tr><tr><td valign="baseline"><p>Procedural</p></td><td valign="baseline"><p><div class="SIntrapara">&#36807;&#31243;&#24335;</div></p></td></tr><tr><td valign="baseline"><p>Procedure</p></td><td valign="baseline"><p><div class="SIntrapara">&#36807;&#31243;&#65288;<span class="emph">&#25991;&#20013;&#20351;&#29992; procedure &#34920;
&#31034;&#32534;&#31243;&#35821;&#35328;&#20013;&#30340;&#20989;&#25968;&#65307;&#20351;&#29992; function &#26102;&#65292;&#19968;&#33324;&#34920;&#31034;&#25968;&#23398;&#20013;&#30340;&#20989;&#25968;&#65292;&#36825;&#37324;&#23558;&#21069;&#32773;&#35793;&#20316;
&#8220;&#36807;&#31243;&#8221;&#65292;&#20197;&#31034;&#21306;&#21035;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Production</p></td><td valign="baseline"><p>&#29983;&#25104;&#24335;</p></td></tr><tr><td valign="baseline"><p>Promise</p></td><td valign="baseline"><p>&#25215;&#35834;</p></td></tr><tr><td valign="baseline"><p>Propagate</p></td><td valign="baseline"><p>&#20256;&#25773;</p></td></tr><tr><td valign="baseline"><p>Protected</p></td><td valign="baseline"><p>&#21463;&#20445;&#25252;&#30340;</p></td></tr><tr><td valign="baseline"><p>Prototype</p></td><td valign="baseline"><p>&#21407;&#22411;</p></td></tr><tr><td valign="baseline"><p>Pseudo-variable</p></td><td valign="baseline"><p>&#20266;&#21464;&#37327;</p></td></tr><tr><td valign="baseline"><p>Public</p></td><td valign="baseline"><p>&#20844;&#26377;&#30340;</p></td></tr><tr><td valign="baseline"><p>Qualified</p></td><td valign="baseline"><p>&#21463;&#38480;&#21464;&#37327;</p></td></tr><tr><td valign="baseline"><p>Quantum</p></td><td valign="baseline"><p><div class="SIntrapara">&#37327;&#23376;&#65288;<span class="emph">&#21363;&#26102;&#38388;&#29255;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>R-value</p></td><td valign="baseline"><p>&#21491;&#20540;</p></td></tr><tr><td valign="baseline"><p>Ready queue</p></td><td valign="baseline"><p>&#23601;&#32490;&#38431;&#21015;</p></td></tr><tr><td valign="baseline"><p>Record</p></td><td valign="baseline"><p>&#35760;&#24405;&#34920;</p></td></tr><tr><td valign="baseline"><p>Recursive control behavior</p></td><td valign="baseline"><p>&#36882;&#24402;&#24615;&#25511;&#21046;&#34892;&#20026;</p></td></tr><tr><td valign="baseline"><p>Reference</p></td><td valign="baseline"><p>&#24341;&#29992;</p></td></tr><tr><td valign="baseline"><p><div class="SIntrapara">Regexp, regular expression</div></p></td><td valign="baseline"><p>&#27491;&#21017;&#34920;&#36798;&#24335;</p></td></tr><tr><td valign="baseline"><p>Registerization</p></td><td valign="baseline"><p>&#23492;&#23384;</p></td></tr><tr><td valign="baseline"><p>Representation-independent</p></td><td valign="baseline"><p>&#34920;&#31034;&#26080;&#20851;</p></td></tr><tr><td valign="baseline"><p>Ribcage</p></td><td valign="baseline"><p>&#32907;&#25490;</p></td></tr><tr><td valign="baseline"><p>Rib</p></td><td valign="baseline"><p>&#32907;&#39592;</p></td></tr><tr><td valign="baseline"><p>Rule (of inference)</p></td><td valign="baseline"><p>&#65288;&#25512;&#29702;&#65289;&#35268;&#21017;</p></td></tr><tr><td valign="baseline"><p>Runnable</p></td><td valign="baseline"><p>&#21487;&#36816;&#34892;</p></td></tr><tr><td valign="baseline"><p>Running</p></td><td valign="baseline"><p>&#22312;&#36816;&#34892;</p></td></tr><tr><td valign="baseline"><p>Safe</p></td><td valign="baseline"><p>&#23433;&#20840;</p></td></tr><tr><td valign="baseline"><p>Scanning</p></td><td valign="baseline"><p>&#25195;&#25551;</p></td></tr><tr><td valign="baseline"><p>Scheduler</p></td><td valign="baseline"><p>&#35843;&#24230;&#22120;</p></td></tr><tr><td valign="baseline"><p>Scope</p></td><td valign="baseline"><p>&#20316;&#29992;&#22495;</p></td></tr><tr><td valign="baseline"><p>Scoping</p></td><td valign="baseline"><p>&#23450;&#30028;</p></td></tr><tr><td valign="baseline"><p>Semi-infinite</p></td><td valign="baseline"><p>&#21322;&#26080;&#38480;</p></td></tr><tr><td valign="baseline"><p>Separated list</p></td><td valign="baseline"><p>&#20998;&#38548;&#34920;</p></td></tr><tr><td valign="baseline"><p>Sequentialization</p></td><td valign="baseline"><p>&#24207;&#21015;&#21270;</p></td></tr><tr><td valign="baseline"><p>Shadow</p></td><td valign="baseline"><p>&#36974;&#34109;</p></td></tr><tr><td valign="baseline"><p>Share</p></td><td valign="baseline"><p>&#20849;&#20139;</p></td></tr><tr><td valign="baseline"><p>Signature</p></td><td valign="baseline"><p>&#31614;&#21517;</p></td></tr><tr><td valign="baseline"><p>Simple interface</p></td><td valign="baseline"><p>&#31616;&#21333;&#25509;&#21475;</p></td></tr><tr><td valign="baseline"><p>Simple module</p></td><td valign="baseline"><p>&#31616;&#21333;&#27169;&#22359;</p></td></tr><tr><td valign="baseline"><p>Simple variable</p></td><td valign="baseline"><p>&#31616;&#21333;&#21464;&#37327;</p></td></tr><tr><td valign="baseline"><p>Single-inheritance</p></td><td valign="baseline"><p>&#21333;&#32487;&#25215;</p></td></tr><tr><td valign="baseline"><p>Sound</p></td><td valign="baseline"><p>&#20581;&#22766;&#30340;</p></td></tr><tr><td valign="baseline"><p>Source language</p></td><td valign="baseline"><p>&#28304;&#35821;&#35328;</p></td></tr><tr><td valign="baseline"><p>Stack</p></td><td valign="baseline"><p>&#26632;</p></td></tr><tr><td valign="baseline"><p>Statement-oriented</p></td><td valign="baseline"><p>&#38754;&#21521;&#35821;&#21477;</p></td></tr><tr><td valign="baseline"><p>State</p></td><td valign="baseline"><p>&#29366;&#24577;</p></td></tr><tr><td valign="baseline"><p>Static depth</p></td><td valign="baseline"><p>&#38745;&#28145;</p></td></tr><tr><td valign="baseline"><p>Static environment</p></td><td valign="baseline"><p>&#38745;&#24577;&#29615;&#22659;</p></td></tr><tr><td valign="baseline"><p>Static method dispatch</p></td><td valign="baseline"><p>&#38745;&#24577;&#26041;&#27861;&#20998;&#21457;</p></td></tr><tr><td valign="baseline"><p>Static</p></td><td valign="baseline"><p>&#38745;&#24577;</p></td></tr><tr><td valign="baseline"><p>Storable value</p></td><td valign="baseline"><p>&#21487;&#23384;&#20648;&#20540;</p></td></tr><tr><td valign="baseline"><p>Store-passing interpreter</p></td><td valign="baseline"><p>&#20256;&#36882;&#23384;&#20648;&#22120;&#30340;&#35299;&#37322;&#22120;</p></td></tr><tr><td valign="baseline"><p>Store-passing specification</p></td><td valign="baseline"><p>&#23384;&#20648;&#22120;&#20256;&#36882;&#35268;&#33539;</p></td></tr><tr><td valign="baseline"><p>Store</p></td><td valign="baseline"><p>&#23384;&#20648;&#22120;</p></td></tr><tr><td valign="baseline"><p>Structural induction</p></td><td valign="baseline"><p>&#32467;&#26500;&#21270;&#24402;&#32435;&#27861;</p></td></tr><tr><td valign="baseline"><p>Subclass polymorphism</p></td><td valign="baseline"><p>&#23376;&#31867;&#22810;&#24577;</p></td></tr><tr><td valign="baseline"><p>Subclass</p></td><td valign="baseline"><p>&#23376;&#31867;</p></td></tr><tr><td valign="baseline"><p>Subgoal induction</p></td><td valign="baseline"><p>&#23376;&#30446;&#26631;&#24402;&#32435;</p></td></tr><tr><td valign="baseline"><p>Subroutine</p></td><td valign="baseline"><p>&#23376;&#31243;&#24207;</p></td></tr><tr><td valign="baseline"><p>Substitution</p></td><td valign="baseline"><p><div class="SIntrapara">&#20195;&#25442;&#65292;&#20195;&#25442;&#24335;&#65288;&#32452;&#65289;&#65288;<span class="emph">&#35270;&#19978;&#19979;&#25991;&#65292;&#36825;
&#19968;&#26415;&#35821;&#26377;&#26102;&#34920;&#31034;&#31867;&#22411;&#25512;&#23548;&#30340;&#21160;&#20316;&#65292;&#26377;&#26102;&#34920;&#31034;&#21160;&#20316;&#30340;&#32467;&#26524;&#65307;&#34920;&#31034;&#32467;&#26524;&#26102;&#65292;&#26377;&#26102;&#20026;&#21333;&#25968;&#65292;
&#26377;&#26102;&#20026;&#22797;&#25968;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Subtype polymorphism</p></td><td valign="baseline"><p>&#23376;&#31867;&#22411;&#22810;&#24577;</p></td></tr><tr><td valign="baseline"><p>Subtyping</p></td><td valign="baseline"><p>&#23376;&#31867;&#22411;&#21028;&#23450;</p></td></tr><tr><td valign="baseline"><p>Super call</p></td><td valign="baseline"><p>&#36229;&#31867;&#35843;&#29992;</p></td></tr><tr><td valign="baseline"><p>Superclass</p></td><td valign="baseline"><p>&#36229;&#31867;</p></td></tr><tr><td valign="baseline"><p>Superprototype</p></td><td valign="baseline"><p>&#36229;&#22411;</p></td></tr><tr><td valign="baseline"><p>Supply, provide</p></td><td valign="baseline"><p>&#25552;&#20379;</p></td></tr><tr><td valign="baseline"><p>Symbol table</p></td><td valign="baseline"><p>&#31526;&#21495;&#34920;</p></td></tr><tr><td valign="baseline"><p>Syntactic category</p></td><td valign="baseline"><p>&#21477;&#27861;&#31867;&#21035;</p></td></tr><tr><td valign="baseline"><p>Syntactic derivation</p></td><td valign="baseline"><p>&#21477;&#27861;&#25512;&#23548;</p></td></tr><tr><td valign="baseline"><p>Table</p></td><td valign="baseline"><p><div class="SIntrapara">&#34920;&#65288;<span class="emph">&#29305;&#25351;&#21704;&#24076;&#34920;&#65292;&#25110;&#19982;&#20043;&#31867;&#20284;&#30340;&#25968;&#25454;
&#32467;&#26500;&#12290;<a href="#%28part._da%29" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a>&#20013;&#30340; Record &#19982;&#20043;&#31867;&#20284;&#12290;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Tail call</p></td><td valign="baseline"><p>&#23614;&#35843;&#29992;</p></td></tr><tr><td valign="baseline"><p>Tail form</p></td><td valign="baseline"><p>&#23614;&#24335;</p></td></tr><tr><td valign="baseline"><p>Tail position</p></td><td valign="baseline"><p>&#23614;&#31471;</p></td></tr><tr><td valign="baseline"><p>Target language</p></td><td valign="baseline"><p>&#30446;&#26631;&#35821;&#35328;</p></td></tr><tr><td valign="baseline"><p>Thawed</p></td><td valign="baseline"><p>&#35299;&#20923;</p></td></tr><tr><td valign="baseline"><p>Thread identifier</p></td><td valign="baseline"><p>&#32447;&#31243;&#25551;&#36848;&#31526;</p></td></tr><tr><td valign="baseline"><p>Thread</p></td><td valign="baseline"><p>&#32447;&#31243;</p></td></tr><tr><td valign="baseline"><p>Thunk</p></td><td valign="baseline"><p>&#20540;&#31665;</p></td></tr><tr><td valign="baseline"><p>Time slice</p></td><td valign="baseline"><p>&#26102;&#38388;&#29255;</p></td></tr><tr><td valign="baseline"><p>Token</p></td><td valign="baseline"><p>&#35789;&#29260;</p></td></tr><tr><td valign="baseline"><p>Top-down</p></td><td valign="baseline"><p>&#33258;&#39030;&#21521;&#19979;</p></td></tr><tr><td valign="baseline"><p>Trampoline</p></td><td valign="baseline"><p><div class="SIntrapara">&#36339;&#24202;&#65288;<span class="emph">&#35835;&#32773;&#25110;&#35768;&#23545; Microsoft
Windows XP &#31995;&#32479;&#33258;&#24102;&#30340;&#8220;&#19977;&#32500;&#24377;&#29699;&#8221;&#28216;&#25103;&#20173;&#26377;&#21360;&#35937;&#65292;&#25991;&#20013;&#30340; trampoline &#21644;
bounce &#21487;&#20197;&#35270;&#20026;&#36825;&#19968;&#28216;&#25103;&#30340;&#31867;&#27604;&#8212;&#8212;&#25110;&#32773;&#35828;&#65292;&#36825;&#19968;&#28216;&#25103;&#29983;&#21160;&#35828;&#26126;&#20102; trampoline &#21644; bounce
&#30340;&#20316;&#29992;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Trampolining</p></td><td valign="baseline"><p><div class="SIntrapara">&#36339;&#36291;&#65288;<span class="emph">&#35270;&#35821;&#22659;&#65292;&#26377;&#26102;&#20063;&#23558;&#36825;
&#19968;&#26415;&#35821;&#30452;&#25509;&#32763;&#35793;&#20026;&#36339;&#24202;</span>&#65289;</div></p></td></tr><tr><td valign="baseline"><p>Translator</p></td><td valign="baseline"><p>&#32763;&#35793;&#22120;</p></td></tr><tr><td valign="baseline"><p>Transparent</p></td><td valign="baseline"><p>&#36879;&#26126;</p></td></tr><tr><td valign="baseline"><p>Type Checking</p></td><td valign="baseline"><p>&#31867;&#22411;&#26816;&#26597;</p></td></tr><tr><td valign="baseline"><p>Type Inference</p></td><td valign="baseline"><p>&#31867;&#22411;&#25512;&#23548;</p></td></tr><tr><td valign="baseline"><p>Type abbreviation</p></td><td valign="baseline"><p>&#31867;&#22411;&#32553;&#20889;</p></td></tr><tr><td valign="baseline"><p>Type environment</p></td><td valign="baseline"><p>&#31867;&#22411;&#29615;&#22659;</p></td></tr><tr><td valign="baseline"><p>Type error</p></td><td valign="baseline"><p>&#31867;&#22411;&#38169;&#35823;</p></td></tr><tr><td valign="baseline"><p>Type expression</p></td><td valign="baseline"><p>&#31867;&#22411;&#34920;&#36798;&#24335;</p></td></tr><tr><td valign="baseline"><p>Type structure</p></td><td valign="baseline"><p>&#31867;&#22411;&#32467;&#26500;</p></td></tr><tr><td valign="baseline"><p>Unary representation</p></td><td valign="baseline"><p>&#19968;&#20803;&#34920;&#31034;&#27861;</p></td></tr><tr><td valign="baseline"><p>Unification</p></td><td valign="baseline"><p>&#21512;&#19968;</p></td></tr><tr><td valign="baseline"><p>Value declaration</p></td><td valign="baseline"><p>&#20540;&#22768;&#26126;</p></td></tr><tr><td valign="baseline"><p>Value restriction</p></td><td valign="baseline"><p>&#20540;&#32422;&#26463;</p></td></tr><tr><td valign="baseline"><p>Variable aliasing</p></td><td valign="baseline"><p>&#21464;&#37327;&#21035;&#21517;</p></td></tr><tr><td valign="baseline"><p>Variable expression</p></td><td valign="baseline"><p>&#21464;&#37327;&#34920;&#36798;&#24335;</p></td></tr><tr><td valign="baseline"><p>Variable</p></td><td valign="baseline"><p>&#21464;&#37327;</p></td></tr><tr><td valign="baseline"><p>Variant</p></td><td valign="baseline"><p>&#21464;&#20307;</p></td></tr><tr><td valign="baseline"><p>Virtual machine</p></td><td valign="baseline"><p>&#34394;&#25311;&#26426;</p></td></tr><tr><td valign="baseline"><p>Well-typed</p></td><td valign="baseline"><p>&#27491;&#24120;&#31867;&#22411;</p></td></tr></table></p><h3 class="heading"><a name="(part._fw)"></a>&#24207;<span class="button-group"><a href="#(part._fw)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(idx._(gentag._0))"></a>
&#26412;&#20070;&#24341;&#20320;&#30452;&#38754;&#35745;&#31639;&#26426;&#32534;&#31243;&#20013;&#26368;&#22522;&#26412;&#30340;&#24605;&#24819;&#65306;</p><blockquote class="SCentered"><p><span class="emph">&#35745;&#31639;&#26426;&#35821;&#35328;&#30340;&#35299;&#37322;&#22120;&#19981;&#36807;&#26159;&#21478;&#19968;&#20010;&#31243;&#24207;</span>&#12290;</p></blockquote><p>&#21548;&#19978;&#21435;&#26174;&#32780;&#26131;&#35265;&#65292;&#19981;&#26159;&#21527;&#65311;&#20294;&#26159;&#21547;&#20041;&#39047;&#28145;&#12290;&#33509;&#20320;&#26159;&#35745;&#31639;&#29702;&#35770;&#23398;&#23478;&#65292;&#35299;&#37322;&#22120;&#24605;&#24819;&#20250;&#20351;&#20320;&#24819;&#36215;&#21733;
&#24503;&#23572;&#21457;&#29616;&#30340;&#24418;&#24335;&#36923;&#36753;&#31995;&#32479;&#23616;&#38480;&#65292;&#22270;&#28789;&#30340;&#36890;&#29992;&#35745;&#31639;&#26426;&#27010;&#24565;&#65292;&#36824;&#26377;&#20911;&#35834;&#20381;&#26364;&#23384;&#20648;&#31243;&#24207;&#26426;&#30340;&#22522;&#26412;&#24605;
&#24819;&#12290;&#33509;&#20320;&#26159;&#31243;&#24207;&#21592;&#65292;&#25484;&#25569;&#35299;&#37322;&#22120;&#24605;&#24819;&#21017;&#26159;&#24040;&#22823;&#21147;&#37327;&#30340;&#28304;&#27849;&#12290;&#23427;&#22914;&#28748;&#39030;&#37261;&#37264;&#65292;&#33021;&#24443;&#24213;&#25913;&#21464;&#20320;&#24605;
&#32771;&#32534;&#31243;&#30340;&#26041;&#24335;&#12290;</p><p>&#21548;&#35828;&#35299;&#37322;&#22120;&#20043;&#21069;&#65292;&#25105;&#20415;&#27809;&#23569;&#32534;&#31243;&#65292;&#20063;&#24320;&#21457;&#36807;&#19968;&#20123;&#22823;&#22411;&#31243;&#24207;&#12290;&#20854;&#20013;&#19968;&#20363;&#26159;&#30001; PL/I &#20889;&#25104;&#30340;&#22823;&#22411;
&#25968;&#25454;&#21644;&#20449;&#24687;&#26816;&#32034;&#31995;&#32479;&#12290;&#23454;&#29616;&#31995;&#32479;&#26102;&#65292;&#25105;&#25226; PL/I &#30475;&#20316;&#19968;&#25209;&#22266;&#23450;&#30340;&#35268;&#21017;&#65292;&#30001;&#19968;&#20123;&#36965;&#19981;&#21487;&#21450;&#30340;&#35821;
&#35328;&#35774;&#35745;&#32773;&#35746;&#31435;&#12290;&#25105;&#35748;&#20026;&#25105;&#30340;&#24037;&#20316;&#19981;&#26159;&#20462;&#25913;&#36825;&#20123;&#35268;&#21017;&#65292;&#29978;&#25110;&#28145;&#20837;&#29702;&#35299;&#23427;&#20204;&#65292;&#32780;&#26159;&#20174;&#65288;&#26497;&#20026;&#65289;&#28009;
&#32321;&#30340;&#25163;&#20876;&#20013;&#25361;&#25361;&#25315;&#25315;&#65292;&#36873;&#20986;&#36825;&#31181;&#37027;&#31181;&#21151;&#33021;&#26469;&#29992;&#12290;&#25105;&#20174;&#27809;&#24819;&#36807;&#26377;&#19968;&#20123;&#28508;&#34255;&#30340;&#32467;&#26500;&#32452;&#32455;&#35821;&#35328;&#65292;&#20063;
&#19981;&#35273;&#24471;&#25105;&#21487;&#33021;&#24471;&#25512;&#32763;&#35821;&#35328;&#35774;&#35745;&#32773;&#30340;&#19968;&#20123;&#20915;&#23450;&#12290;&#25105;&#19981;&#30693;&#36947;&#22914;&#20309;&#21019;&#36896;&#23884;&#21512;&#30340;&#23376;&#35821;&#35328;&#26469;&#24110;&#25105;&#32452;&#32455;&#31995;
&#32479;&#23454;&#29616;&#65292;&#25152;&#20197;&#25972;&#20010;&#31243;&#24207;&#19981;&#26159;&#21508;&#37096;&#20998;&#33021;&#22815;&#28789;&#27963;&#32452;&#21512;&#30340;&#20960;&#31181;&#35821;&#35328;&#65292;&#20498;&#20687;&#24133;&#24222;&#26434;&#30340;&#39532;&#36187;&#20811;&#65292;&#27599;&#29255;&#37117;
&#24471;&#23567;&#24515;&#22609;&#36896;&#21644;&#25918;&#32622;&#12290;&#19981;&#29702;&#35299;&#35299;&#37322;&#22120;&#65292;&#20320;&#36824;&#26159;&#33021;&#32534;&#31243;&#65292;&#29978;&#33267;&#33021;&#25104;&#20026;&#19968;&#21517;&#31216;&#32844;&#30340;&#31243;&#24207;&#21592;&#65292;&#20294;&#20320;&#26080;
&#27861;&#25104;&#20026;&#22823;&#24072;&#12290;</p><p><a name="(idx._(gentag._1))"></a>
&#20316;&#20026;&#19968;&#21517;&#31243;&#24207;&#21592;&#65292;&#20986;&#20110;&#19977;&#20010;&#21407;&#22240;&#65292;&#20320;&#24212;&#35813;&#20102;&#35299;&#35299;&#37322;&#22120;&#12290;</p><p>&#39318;&#20808;&#65292;&#22312;&#26576;&#20123;&#26102;&#21051;&#65292;&#20320;&#24471;&#23454;&#29616;&#35299;&#37322;&#22120;&#8212;&#8212;&#20063;&#35768;&#19981;&#26159;&#20840;&#33021;&#32780;&#36890;&#29992;&#35821;&#35328;&#30340;&#35299;&#37322;&#22120;&#65292;&#20294;&#32456;&#24402;&#26159;&#35299;&#37322;&#22120;&#12290;
&#20960;&#20046;&#27599;&#19968;&#20010;&#19982;&#20154;&#28789;&#27963;&#20132;&#20114;&#30340;&#22797;&#26434;&#35745;&#31639;&#26426;&#31995;&#32479;&#8212;&#8212;&#20363;&#22914;&#65292;&#35745;&#31639;&#26426;&#32472;&#22270;&#24037;&#20855;&#25110;&#20449;&#24687;&#26816;&#32034;&#31995;&#32479;&#8212;&#8212;&#37117;&#21253;
&#21547;&#26576;&#31181;&#35299;&#37322;&#22120;&#26469;&#32452;&#32455;&#20132;&#20114;&#12290;&#36825;&#20123;&#31243;&#24207;&#21487;&#33021;&#21253;&#21547;&#22797;&#26434;&#30340;&#21333;&#39033;&#25805;&#20316;&#8212;&#8212;&#22312;&#26174;&#31034;&#23631;&#30340;&#19968;&#20010;&#21306;&#22495;&#21152;&#19978;&#38452;
&#24433;&#65292;&#25110;&#25191;&#34892;&#25968;&#25454;&#24211;&#25628;&#32034;&#8212;&#8212;&#20294;&#35299;&#37322;&#22120;&#26159;&#33014;&#27700;&#65292;&#20351;&#20320;&#23558;&#21333;&#39033;&#25805;&#20316;&#32452;&#21512;&#25104;&#26377;&#29992;&#30340;&#27169;&#24335;&#12290;&#20320;&#33021;&#25226;&#19968;&#39033;
&#25805;&#20316;&#30340;&#32467;&#26524;&#24403;&#20316;&#21478;&#19968;&#25805;&#20316;&#30340;&#36755;&#20837;&#21527;&#65311;&#20320;&#33021;&#32473;&#19968;&#20010;&#25805;&#20316;&#24207;&#21015;&#21629;&#21517;&#21527;&#65311;&#21517;&#23383;&#26159;&#23616;&#37096;&#30340;&#36824;&#26159;&#20840;&#23616;&#30340;&#65311;
&#20320;&#33021;&#32473;&#19968;&#20010;&#25805;&#20316;&#24207;&#21015;&#21152;&#19978;&#21442;&#25968;&#65292;&#24182;&#32473;&#23427;&#30340;&#36755;&#20837;&#21629;&#21517;&#21527;&#65311;&#35832;&#22914;&#27492;&#31867;&#12290;&#19981;&#35770;&#21333;&#39033;&#25805;&#20316;&#22810;&#20040;&#22797;&#26434;&#31934;
&#24039;&#65292;&#24120;&#24120;&#26159;&#33014;&#27700;&#30340;&#36136;&#37327;&#26368;&#30452;&#25130;&#22320;&#20915;&#23450;&#31995;&#32479;&#30340;&#33021;&#21147;&#12290;&#24456;&#23481;&#26131;&#25214;&#21040;&#21333;&#39033;&#25805;&#20316;&#33391;&#22909;&#65292;&#20294;&#33014;&#27700;&#31967;&#31957;&#30340;
&#31243;&#24207;&#65307;&#22238;&#22836;&#26469;&#30475;&#65292;&#25105;&#35273;&#24471;&#25105;&#30340; PL/I &#25968;&#25454;&#24211;&#31243;&#24207;&#33014;&#27700;&#23454;&#22312;&#31967;&#31957;&#12290;</p><p>&#20854;&#27425;&#65292;&#21363;&#20351;&#31243;&#24207;&#26412;&#36523;&#19981;&#26159;&#35299;&#37322;&#22120;&#65292;&#20063;&#21253;&#21547;&#31867;&#20284;&#35299;&#37322;&#22120;&#30340;&#37325;&#35201;&#29255;&#27573;&#12290;&#32454;&#31350;&#19968;&#20010;&#22797;&#26434;&#30340;&#35745;&#31639;&#26426;&#36741;
&#21161;&#35774;&#35745;&#31995;&#32479;&#65292;&#20320;&#21487;&#33021;&#21457;&#29616;&#21327;&#21516;&#24037;&#20316;&#30340;&#20960;&#20309;&#22270;&#24418;&#35782;&#21035;&#35821;&#35328;&#65292;&#22270;&#24418;&#35299;&#37322;&#22120;&#65292;&#22522;&#20110;&#35268;&#21017;&#30340;&#25511;&#21046;&#35299;&#37322;
&#22120;&#65292;&#20197;&#21450;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#35299;&#37322;&#22120;&#12290;&#32452;&#32455;&#22797;&#26434;&#31243;&#24207;&#26368;&#26377;&#25928;&#30340;&#26041;&#24335;&#20043;&#19968;&#26159;&#35270;&#20043;&#20026;&#19968;&#32452;&#35821;&#35328;&#65292;&#27599;&#31181;&#35821;
&#35328;&#20174;&#19981;&#21516;&#35282;&#24230;&#65292;&#20197;&#19981;&#21516;&#26041;&#24335;&#22788;&#29702;&#31243;&#24207;&#20803;&#32032;&#12290;&#20026;&#21512;&#36866;&#30340;&#30446;&#30340;&#36873;&#25321;&#21512;&#36866;&#30340;&#35821;&#35328;&#65292;&#29702;&#35299;&#23454;&#29616;&#26102;&#30340;&#21033;
&#24330;&#26435;&#34913;&#65306;&#36825;&#23601;&#26159;&#35299;&#37322;&#22120;&#30740;&#31350;&#30340;&#20869;&#23481;&#12290;</p><p>&#23398;&#20064;&#35299;&#37322;&#22120;&#30340;&#31532;&#19977;&#20010;&#21407;&#22240;&#65292;&#26159;&#30452;&#25509;&#28041;&#21450;&#35821;&#35328;&#32467;&#26500;&#30340;&#32534;&#31243;&#25216;&#26415;&#26085;&#30410;&#37325;&#35201;&#12290;&#22914;&#20170;&#65292;&#25805;&#20316;&#38754;&#21521;&#23545;&#35937;
&#31995;&#32479;&#20013;&#31867;&#30340;&#23618;&#27425;&#22791;&#21463;&#20851;&#27880;&#65292;&#32780;&#36825;&#21482;&#26159;&#35813;&#36235;&#21183;&#30340;&#19968;&#20010;&#20363;&#23376;&#12290;&#36825;&#21487;&#33021;&#26159;&#26080;&#21487;&#36991;&#20813;&#30340;&#32467;&#26524;&#65292;&#22240;&#20026;&#25105;
&#20204;&#30340;&#31243;&#24207;&#27491;&#26085;&#36235;&#22797;&#26434;&#8212;&#8212;&#22810;&#30041;&#24515;&#35821;&#35328;&#21487;&#33021;&#26159;&#24212;&#23545;&#36825;&#31181;&#22797;&#26434;&#24615;&#30340;&#26368;&#22909;&#24037;&#20855;&#12290;&#20877;&#24819;&#24819;&#37027;&#20010;&#22522;&#26412;&#24605;&#24819;&#65306;
&#35299;&#37322;&#22120;&#26412;&#36523;&#19981;&#36807;&#26159;&#19968;&#20010;&#31243;&#24207;&#12290;&#20294;&#37027;&#31243;&#24207;&#20197;&#26576;&#31181;&#35821;&#35328;&#20889;&#23601;&#65292;&#20854;&#35299;&#37322;&#22120;&#26412;&#36523;&#19981;&#36807;&#26159;&#21478;&#19968;&#31243;&#24207;&#65292;&#20197;
&#26576;&#31181;&#35821;&#35328;&#20889;&#23601;&#65292;&#20854;&#35299;&#37322;&#22120;&#26412;&#36523;&#21448;&#26159;&#8230;&#8230;&#25110;&#35768;&#25130;&#28982;&#21306;&#20998;&#31243;&#24207;&#21644;&#32534;&#31243;&#35821;&#35328;&#26159;&#20010;&#35823;&#23548;&#24615;&#30340;&#24819;&#27861;&#65292;&#26410;
&#26469;&#30340;&#31243;&#24207;&#21592;&#19981;&#20877;&#33258;&#35270;&#20026;&#32534;&#20889;&#26576;&#31181;&#31243;&#24207;&#65292;&#32780;&#26159;&#20026;&#27599;&#20010;&#24212;&#29992;&#21019;&#36896;&#26032;&#30340;&#35821;&#35328;&#12290;
<a name="(idx._(gentag._2))"></a></p><p>&#24343;&#37324;&#24503;&#26364;&#21644;&#23451;&#24503;&#23436;&#25104;&#20102;&#26631;&#24535;&#24615;&#30340;&#24037;&#20316;&#65292;&#20182;&#20204;&#30340;&#33879;&#20316;&#21183;&#23558;&#25913;&#21464;&#32534;&#31243;&#35821;&#35328;&#35838;&#31243;&#30340;&#22270;&#26223;&#12290;&#20182;&#20204;&#19981;&#21482;
&#32473;&#20320;<span class="emph">&#35762;&#35762;</span>&#35299;&#37322;&#22120;&#65292;&#20182;&#20204;<span class="emph">&#23637;&#31034;</span>&#32473;&#20320;&#30475;&#12290;&#26412;&#20070;&#30340;&#26680;&#24515;&#26159;&#19968;&#31995;&#21015;&#31934;&#22937;&#30340;&#35299;&#37322;&#22120;&#65292;&#22987;
&#20110;&#19968;&#31181;&#39640;&#32423;&#25277;&#35937;&#35821;&#35328;&#65292;&#36880;&#27493;&#25581;&#31034;&#35821;&#35328;&#29305;&#24615;&#65292;&#30452;&#33267;&#19968;&#29366;&#24577;&#26426;&#12290;&#20107;&#23454;&#19978;&#20320;&#21487;&#20197;&#36816;&#34892;&#36825;&#20123;&#20195;&#30721;&#65292;&#30740;
&#20064;&#21644;&#20462;&#25913;&#23427;&#20204;&#65292;&#25913;&#21464;&#36825;&#20123;&#35299;&#37322;&#22120;&#30340;&#22788;&#29702;&#26041;&#24335;&#65292;&#35832;&#22914;&#23450;&#30028;&#12289;&#21442;&#25968;&#20256;&#36882;&#12289;&#25511;&#21046;&#32467;&#26500;&#65292;&#31561;&#31561;&#12290;</p><p>&#20316;&#32773;&#20197;&#35299;&#37322;&#22120;&#30740;&#31350;&#35821;&#35328;&#30340;&#25191;&#34892;&#65292;&#24182;&#23637;&#31034;&#20102;&#22914;&#20309;&#29992;&#21516;&#26679;&#30340;&#24605;&#24819;&#19981;&#21152;&#36816;&#34892;&#22320;&#20998;&#26512;&#31243;&#24207;&#12290;&#22312;&#26032;&#22686;&#30340;
&#20004;&#31456;&#20013;&#65292;&#20182;&#20204;&#23637;&#31034;&#20102;&#22914;&#20309;&#23454;&#29616;&#31867;&#22411;&#26816;&#26597;&#22120;&#21644;&#25512;&#23548;&#22120;&#65292;&#20197;&#21450;&#36825;&#20123;&#29305;&#24615;&#22312;&#29616;&#20195;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#35821;&#35328;
&#20013;&#22914;&#20309;&#20132;&#20114;&#12290;</p><p>&#36825;&#31181;&#26041;&#27861;&#20043;&#25152;&#20197;&#21560;&#24341;&#20154;&#65292;&#37096;&#20998;&#22312;&#20110;&#20316;&#32773;&#36873;&#25321;&#20102;&#20248;&#33391;&#30340;&#24037;&#20855;&#8212;&#8212;Scheme &#35821;&#35328;&#12290;&#36825;&#31181;&#35821;&#35328;&#32467;&#21512;&#20102;
Lisp &#30340;&#32479;&#19968;&#35821;&#27861;&#21644;&#25968;&#25454;&#25277;&#35937;&#33021;&#21147;&#65292;&#20197;&#21450; Algol &#30340;&#35789;&#27861;&#23450;&#30028;&#21644;&#22359;&#29366;&#32467;&#26500;&#12290;&#20294;&#21033;&#22120;&#21040;&#20102;&#22823;&#24072;&#25163;
&#20013;&#26041;&#33021;&#29289;&#23613;&#20854;&#29992;&#12290;&#26412;&#20070;&#30340;&#31034;&#20363;&#35299;&#37322;&#22120;&#36275;&#21487;&#22402;&#33539;&#12290;&#30830;&#23454;&#22914;&#27492;&#65292;&#22240;&#20026;&#20182;&#20204;&#26159;<span class="emph">&#21487;&#20197;&#36816;&#34892;</span>&#30340;
&#31034;&#33539;&#12290;&#25105;&#30830;&#20449;&#36825;&#20123;&#35299;&#37322;&#22120;&#21644;&#20998;&#26512;&#22120;&#23558;&#22312;&#26410;&#26469;&#25968;&#24180;&#29616;&#36523;&#20110;&#35768;&#22810;&#32534;&#31243;&#31995;&#32479;&#30340;&#26680;&#24515;&#20043;&#20013;&#12290;</p><p>&#36825;&#19981;&#26159;&#26412;&#23481;&#26131;&#30340;&#20070;&#12290;&#35299;&#37322;&#22120;&#38590;&#20197;&#25484;&#25569;&#19981;&#26159;&#27809;&#26377;&#21407;&#22240;&#30340;&#12290;&#35821;&#35328;&#35774;&#35745;&#32773;&#35201;&#27604;&#26222;&#36890;&#24212;&#29992;&#30340;&#24320;&#21457;&#32773;&#26356;
&#21152;&#36828;&#31163;&#26368;&#32456;&#29992;&#25143;&#12290;&#35774;&#35745;&#24212;&#29992;&#31243;&#24207;&#26102;&#65292;&#20320;&#32771;&#34385;&#23558;&#35201;&#23436;&#25104;&#30340;&#20855;&#20307;&#20219;&#21153;&#65292;&#20197;&#21450;&#23558;&#35201;&#21253;&#21547;&#30340;&#21151;&#33021;&#12290;&#20294;
&#35774;&#35745;&#35821;&#35328;&#26102;&#65292;&#20320;&#32771;&#34385;&#20154;&#20204;&#24819;&#35201;&#23454;&#29616;&#30340;&#31181;&#31181;&#24212;&#29992;&#65292;&#20197;&#21450;&#23454;&#29616;&#23427;&#20204;&#30340;&#21487;&#33021;&#26041;&#24335;&#12290;&#20320;&#30340;&#35821;&#35328;&#24212;&#35813;&#26159;
&#38745;&#24577;&#20316;&#29992;&#22495;&#36824;&#26159;&#21160;&#24577;&#20316;&#29992;&#22495;&#65292;&#25110;&#32773;&#20108;&#32773;&#20860;&#26377;&#65311;&#23427;&#24212;&#35813;&#26377;&#32487;&#25215;&#21527;&#65311;&#23427;&#20256;&#36882;&#21442;&#25968;&#26102;&#26159;&#20256;&#24341;&#29992;&#36824;&#26159;
&#20256;&#20540;&#65311;<span class="emph">&#32493;&#25991;</span>&#24212;&#35813;&#26159;&#26174;&#24335;&#30340;&#36824;&#26159;&#38544;&#24335;&#30340;&#65311;&#36825;&#20123;&#37117;&#21462;&#20915;&#20110;&#20320;&#24819;&#35753;&#20320;&#30340;&#35821;&#35328;&#22914;&#20309;&#20351;&#29992;&#65292;&#21738;
&#20123;&#31243;&#24207;&#24212;&#35813;&#24456;&#23481;&#26131;&#32534;&#20889;&#65292;&#21738;&#20123;&#31243;&#24207;&#21487;&#20197;&#19981;&#37027;&#20040;&#26131;&#20889;&#12290;</p><p>&#27492;&#22806;&#65292;&#35299;&#37322;&#22120;&#23454;&#22312;<span class="emph">&#26159;</span>&#24494;&#22937;&#30340;&#31243;&#24207;&#12290;&#35299;&#37322;&#22120;&#20013;&#19968;&#34892;&#20195;&#30721;&#30340;&#31616;&#21333;&#25913;&#21464;&#37117;&#33021;&#20351;&#26368;&#32456;&#35821;&#35328;&#30340;
&#34892;&#20026;&#21457;&#29983;&#21095;&#21464;&#12290;&#21035;&#24819;&#31895;&#35835;&#36825;&#20123;&#31243;&#24207;&#8212;&#8212;&#21363;&#20351;&#26159;&#30456;&#23545;&#31616;&#21333;&#30340;&#20195;&#30721;&#65292;&#19990;&#19978;&#20063;&#32477;&#23569;&#26377;&#20154;&#33021;&#22815;&#19968;&#30629;&#26032;&#30340;
&#35299;&#37322;&#22120;&#23601;&#39044;&#27979;&#23427;&#30340;&#34892;&#20026;&#12290;&#25152;&#20197;&#38075;&#30740;&#36825;&#20123;&#31243;&#24207;&#21543;&#12290;&#26368;&#22909;&#65292;<span class="emph">&#36816;&#34892;</span>&#23427;&#20204;&#8212;&#8212;&#36825;&#20123;&#26159;&#33021;&#36816;&#34892;&#30340;
&#20195;&#30721;&#12290;&#35797;&#30528;&#35299;&#37322;&#19968;&#20123;&#31616;&#21333;&#30340;&#34920;&#36798;&#24335;&#65292;&#28982;&#21518;&#35797;&#35797;&#26356;&#22797;&#26434;&#30340;&#12290;&#28155;&#21152;&#38169;&#35823;&#20449;&#24687;&#12290;&#20462;&#25913;&#35299;&#37322;&#22120;&#12290;&#35774;&#35745;
&#20320;&#33258;&#24049;&#30340;&#21464;&#20307;&#12290;&#35797;&#30528;&#30495;&#27491;&#25484;&#25569;&#36825;&#20123;&#31243;&#24207;&#65292;&#32780;&#19981;&#26159;&#23545;&#20043;&#22914;&#20309;&#24037;&#20316;&#31895;&#20855;&#21360;&#35937;&#12290;</p><p>&#22914;&#26524;&#20320;&#36825;&#26679;&#20570;&#20102;&#65292;&#20320;&#23545;&#32534;&#31243;&#21644;&#36523;&#20026;&#31243;&#24207;&#21592;&#30340;&#33258;&#24049;&#30475;&#27861;&#23450;&#20250;&#19981;&#21516;&#12290;&#20320;&#23558;&#33258;&#35270;&#20026;&#35821;&#35328;&#30340;&#35774;&#35745;&#24072;&#65292;
&#32780;&#19981;&#20165;&#26159;&#35821;&#35328;&#30340;&#29992;&#25143;&#12290;&#20320;&#23558;&#25104;&#20026;&#35821;&#35328;&#32452;&#25104;&#35268;&#21017;&#30340;&#20027;&#20154;&#65292;&#32780;&#19981;&#20165;&#26159;&#20182;&#20154;&#25152;&#36873;&#35268;&#21017;&#30340;&#38543;&#20174;&#12290;
<a name="(idx._(gentag._3))"></a></p><h4 class="heading"><a name="(part._fw-s)"></a>&#19977;&#29256;&#38468;&#35328;<span class="button-group"><a href="#(part._fw-s)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._4))"></a>
&#19978;&#36848;&#24207;&#35328;&#20889;&#20110;&#30701;&#30701;&#19971;&#24180;&#20043;&#21069;&#12290;&#22312;&#20061;&#21313;&#24180;&#20195;&#65292;&#38590;&#20197;&#24819;&#35937;&#19971;&#24180;&#20043;&#20869;&#65292;&#20449;&#24687;&#24212;&#29992;&#21644;&#26381;&#21153;&#24050;&#36941;&#24067;&#20840;&#29699;&#12290;
&#23427;&#20204;&#30001;&#25345;&#32493;&#22686;&#38271;&#30340;&#32534;&#31243;&#35821;&#35328;&#21644;&#32534;&#31243;&#26694;&#26550;&#39537;&#21160;&#8212;&#8212;&#36825;&#19968;&#20999;&#37117;&#22522;&#20110;&#19981;&#26029;&#22766;&#22823;&#30340;&#35299;&#37322;&#22120;&#24179;&#21488;&#12290;</p><p>&#24819;&#21019;&#24314; Web &#39029;&#38754;&#21527;&#65311;&#22312;&#20061;&#21313;&#24180;&#20195;&#65292;&#37027;&#31561;&#20110;&#26684;&#24335;&#21270;&#38745;&#24577;&#25991;&#26412;&#21644;&#22270;&#20687;&#65292;&#23454;&#38469;&#19978;&#26159;&#21019;&#24314;&#30001;&#27983;&#35272;&#22120;
&#36816;&#34892;&#30340;&#31243;&#24207;&#65292;&#32780;&#27983;&#35272;&#22120;&#20165;&#20165;&#25191;&#34892;&#19968;&#26465;&#8220;print&#8221;&#35821;&#21477;&#12290;&#20170;&#22825;&#30340;
&#21160;&#24577;&#32593;&#39029;&#20805;&#20998;&#21033;&#29992;&#33050;&#26412;&#35821;&#35328;&#65288;&#35299;&#37322;&#24615;&#35821;&#35328;&#30340;&#21478;&#19968;&#21517;&#23383;&#65289;&#65292;&#22914; Javascript&#12290;&#27983;&#35272;&#22120;&#31243;&#24207;&#21017;&#30456;
&#24403;&#22797;&#26434;&#65292;&#21253;&#21547;&#23545; Web &#26381;&#21153;&#22120;&#30340;&#24322;&#27493;&#35843;&#29992;&#12290;&#32780;&#26381;&#21153;&#22120;&#36890;&#24120;&#36816;&#34892;&#30528;&#21478;&#19968;&#31243;&#24207;&#65292;&#30001;&#23436;&#20840;&#19981;&#21516;&#30340;&#32534;
&#31243;&#26694;&#26550;&#20889;&#23601;&#12290;&#26694;&#26550;&#21448;&#21487;&#33021;&#21547;&#26377;&#22810;&#31181;&#26381;&#21153;&#65292;&#27599;&#31181;&#26381;&#21153;&#37117;&#26377;&#21508;&#33258;&#30340;&#35821;&#35328;&#12290;</p><p>&#25110;&#32773;&#20320;&#35201;&#21019;&#24314;&#19968;&#20010;&#26426;&#22120;&#20154;&#65292;&#22312;&#22823;&#22411;&#22810;&#20154;&#22312;&#32447;&#28216;&#25103;&#8212;&#8212;&#22914;&#39764;&#20861;&#19990;&#30028;&#8212;&#8212;&#20013;&#25913;&#21892;&#24418;&#35937;&#12290;&#36825;&#26102;&#65292;&#20320;&#21487;&#33021;
&#20351;&#29992; Lua &#20043;&#31867;&#30340;&#33050;&#26412;&#35821;&#35328;&#8212;&#8212;&#36824;&#21487;&#33021;&#25903;&#25345;&#38754;&#21521;&#23545;&#35937;&#25193;&#23637;&#8212;&#8212;&#26469;&#21327;&#21161;&#34920;&#36798;&#21508;&#31867;&#34892;&#20026;&#12290;</p><p>&#21448;&#25110;&#32773;&#20320;&#22312;&#20026;&#22823;&#22411;&#35745;&#31639;&#26426;&#38598;&#32676;&#32534;&#31243;&#65292;&#36827;&#34892;&#20840;&#29699;&#35268;&#27169;&#30340;&#32034;&#24341;&#21644;&#25628;&#32034;&#12290;&#36825;&#26102;&#65292;&#20320;&#21487;&#33021;&#29992;&#20989;&#25968;&#24335;&#32534;
&#31243;&#20013;&#30340; map-reduce &#33539;&#24335;&#26469;&#32534;&#20889;&#31243;&#24207;&#65292;&#20197;&#20943;&#36731;&#26126;&#30830;&#23433;&#25490;&#22788;&#29702;&#22120;&#35843;&#24230;&#32454;&#33410;&#30340;&#36127;&#25285;&#12290;</p><p>&#21448;&#25110;&#32773;&#20320;&#22312;&#20026;&#20256;&#24863;&#22120;&#32593;&#32476;&#24320;&#21457;&#26032;&#30340;&#31639;&#27861;&#65292;&#24182;&#19988;&#23581;&#35797;&#29992;&#25042;&#27714;&#20540;&#26356;&#22909;&#22320;&#35299;&#20915;&#24182;&#34892;&#21644;&#25968;&#25454;&#27719;&#38598;&#38382;&#39064;&#12290;
&#21448;&#25110;&#32773;&#20320;&#22312;&#25506;&#32034; XSLT &#37027;&#26679;&#30340;&#36716;&#25442;&#31995;&#32479;&#26469;&#25511;&#21046; Web &#39029;&#38754;&#12290;&#21448;&#25110;&#32773;&#20320;&#22312;&#35774;&#35745;&#36716;&#25442;&#21644;&#37325;&#28151;&#22810;&#23186;
&#20307;&#27969;&#30340;&#26694;&#26550;&#12290;&#21448;&#25110;&#32773;&#8230;&#8230;</p><p>&#22810;&#23569;&#26032;&#24212;&#29992;&#65281;&#22810;&#23569;&#26032;&#35821;&#35328;&#65281;&#22810;&#23569;&#23853;&#26032;&#30340;&#35299;&#37322;&#22120;&#65281;</p><p>&#20381;&#26087;&#65292;&#32534;&#31243;&#26032;&#25163;&#65292;&#29978;&#33267;&#26377;&#32463;&#39564;&#30340;&#20154;&#65292;&#21487;&#20197;&#20998;&#21035;&#30475;&#24453;&#27599;&#31181;&#26694;&#26550;&#65292;&#22312;&#26082;&#23450;&#30340;&#35268;&#21017;&#20869;&#24037;&#20316;&#12290;&#20294;&#21019;&#36896;
&#26032;&#26694;&#26550;&#35201;&#27714;&#22823;&#24072;&#32423;&#25216;&#33021;&#65306;&#29702;&#35299;&#35821;&#35328;&#36816;&#34892;&#32972;&#21518;&#30340;&#21407;&#29702;&#65292;&#25361;&#36873;&#26368;&#36866;&#21512;&#27599;&#31181;&#24212;&#29992;&#30340;&#35821;&#35328;&#29305;&#24615;&#65292;&#29087;&#30693;
&#22914;&#20309;&#21019;&#36896;&#24102;&#32473;&#35821;&#35328;&#29983;&#21629;&#30340;&#35299;&#37322;&#22120;&#12290;&#36825;&#20123;&#26159;&#20320;&#33021;&#20174;&#26412;&#20070;&#23398;&#21040;&#30340;&#25216;&#33021;&#12290;
<a name="(idx._(gentag._5))"></a>
<br/></p><p><span class="Sright">Hal Abelson</span>
<span class="Sright">&#21073;&#26725;&#65292;&#39532;&#33832;&#35832;&#22622;&#24030;</span>
<span class="Sright">2007&#24180;9&#26376;</span></p><h3 class="heading"><a name="(part._pf)"></a>&#21069;&#35328;<span class="button-group"><a href="#(part._pf)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><h4 class="heading"><a name="(part._pf-obj)"></a>&#30446;&#26631;<span class="button-group"><a href="#(part._pf-obj)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>&#26412;&#20070;&#26159;&#23545;&#32534;&#31243;&#35821;&#35328;&#30340;&#20998;&#26512;&#24615;&#30740;&#31350;&#12290;&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#28145;&#20837;&#26377;&#25928;&#22320;&#29702;&#35299;&#32534;&#31243;&#35821;&#35328;&#30340;&#22522;&#26412;&#27010;&#24565;&#12290;&#36825;&#20123;
&#27010;&#24565;&#30340;&#37325;&#35201;&#24615;&#20037;&#32463;&#35777;&#23454;&#12290;&#23427;&#20204;&#26159;&#29702;&#35299;&#32534;&#31243;&#35821;&#35328;&#26410;&#26469;&#21457;&#23637;&#30340;&#22522;&#30784;&#12290;</p><p><a name="(idx._(gentag._6))"></a>
&#36825;&#20123;&#27010;&#24565;&#22810;&#20851;&#20046;&#31243;&#24207;&#20803;&#32032;&#30340;&#35821;&#20041;&#65292;&#25110;&#31216;&#21547;&#20041;&#12290;&#21547;&#20041;&#21453;&#26144;&#20102;&#20803;&#32032;&#22312;&#31243;&#24207;&#25191;&#34892;&#26102;&#24212;&#24403;&#22914;&#20309;&#35299;&#37322;&#12290;
&#21517;&#20026;&#35299;&#37322;&#22120;&#30340;&#31243;&#24207;&#26368;&#30452;&#25509;&#22320;&#34920;&#29616;&#20102;&#31243;&#24207;&#35821;&#20041;&#65292;&#19988;&#33021;&#25191;&#34892;&#12290;&#23427;&#20204;&#36890;&#36807;&#30452;&#25509;&#20998;&#26512;&#31243;&#24207;&#25991;&#26412;&#30340;&#25277;&#35937;
&#34920;&#31034;&#26469;&#22788;&#29702;&#31243;&#24207;&#12290;&#22240;&#27492;&#25105;&#20204;&#20197;&#35299;&#37322;&#22120;&#20026;&#20027;&#35201;&#36733;&#20307;&#26469;&#34920;&#36798;&#32534;&#31243;&#35821;&#35328;&#20803;&#32032;&#30340;&#35821;&#20041;&#12290;</p><p>&#31243;&#24207;&#20316;&#20026;&#23545;&#35937;&#65292;&#26368;&#23500;&#36259;&#21619;&#30340;&#35805;&#39064;&#26159;&#65306;&#8220;&#23427;&#20570;&#20160;&#20040;&#65311;&#8221;&#35299;&#37322;&#22120;&#30740;
&#31350;&#21521;&#25105;&#20204;&#38416;&#26126;&#36825;&#28857;&#12290;&#35299;&#37322;&#22120;&#33267;&#20851;&#37325;&#35201;&#65292;&#22240;&#20026;&#23427;&#21457;&#38544;&#25225;&#24494;&#65292;&#21448;&#26159;&#26356;&#39640;&#25928;&#32534;&#35793;&#21644;&#20854;&#20182;&#31243;&#24207;&#20998;&#26512;&#30340;
&#19981;&#20108;&#27861;&#38376;&#12290;</p><p>&#26377;&#19968;&#22823;&#31867;&#31995;&#32479;&#65292;&#26681;&#25454;&#35821;&#27861;&#32467;&#26500;&#23558;&#20449;&#24687;&#20174;&#19968;&#31181;&#24418;&#24335;&#36716;&#25442;&#20026;&#21478;&#19968;&#24418;&#24335;&#65292;&#35299;&#37322;&#22120;&#20063;&#26159;&#23427;&#20204;&#30340;&#31034;&#20363;&#12290;
&#20363;&#22914;&#65292;&#32534;&#35793;&#22120;&#23558;&#31243;&#24207;&#36716;&#25442;&#20026;&#36866;&#21512;&#30828;&#20214;&#25110;&#34394;&#25311;&#26426;&#35299;&#37322;&#30340;&#24418;&#24335;&#12290;&#34429;&#28982;&#36890;&#29992;&#30340;&#32534;&#35793;&#25216;&#26415;&#36229;&#20986;&#26412;&#20070;&#33539;
&#22260;&#65292;&#20294;&#25105;&#20204;&#30830;&#23454;&#24320;&#21457;&#20986;&#20102;&#20960;&#20010;&#22522;&#26412;&#30340;&#31243;&#24207;&#32763;&#35793;&#31995;&#32479;&#12290;&#23427;&#20204;&#21453;&#26144;&#20102;&#32534;&#35793;&#20013;&#20856;&#22411;&#30340;&#31243;&#24207;&#20998;&#26512;&#65292;&#27604;
&#22914;&#25511;&#21046;&#36716;&#25442;&#65292;&#21464;&#37327;&#32465;&#23450;&#35299;&#26512;&#65292;&#20197;&#21450;&#31867;&#22411;&#26816;&#26597;&#12290;
<a name="(idx._(gentag._7))"></a></p><p>&#20197;&#19979;&#26159;&#25105;&#20204;&#26041;&#27861;&#30340;&#19968;&#20123;&#29420;&#29305;&#31574;&#30053;&#65306;</p><ol><li><p>&#27599;&#19968;&#26032;&#27010;&#24565;&#37117;&#29992;&#19968;&#31181;&#23567;&#22411;&#35821;&#35328;&#35299;&#37322;&#12290;&#36825;&#20123;&#35821;&#35328;&#36890;&#24120;&#26159;&#28176;&#36827;&#24335;&#30340;&#65306;&#21518;&#38754;&#30340;&#35821;&#35328;&#20381;&#36182;&#21069;
&#38754;&#35821;&#35328;&#30340;&#29305;&#24615;&#12290;</p></li><li><p>&#29992;&#35821;&#35328;&#22788;&#29702;&#22120;&#8212;&#8212;&#22914;&#35299;&#37322;&#22120;&#21644;&#31867;&#22411;&#26816;&#26597;&#22120;&#8212;&#8212;&#35299;&#37322;&#25351;&#23450;&#35821;&#35328;&#25152;&#20889;&#31243;&#24207;&#30340;&#34892;&#20026;&#12290;&#23427;&#20204;&#20197;&#24418;
&#24335;&#21270;&#65288;&#26080;&#27495;&#20041;&#24182;&#19988;&#23436;&#22791;&#65289;&#21644;&#21487;&#25191;&#34892;&#30340;&#26041;&#24335;&#34920;&#29616;&#35821;&#35328;&#35774;&#35745;&#20013;&#30340;&#20915;&#23450;&#12290;</p></li><li><p>&#36866;&#24403;&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;&#29992;&#25509;&#21475;&#21644;&#35268;&#33539;&#24314;&#31435;&#25968;&#25454;&#25277;&#35937;&#12290;&#22914;&#27492;&#65292;&#25105;&#20204;&#21487;&#20197;&#25913;&#21464;&#25968;&#25454;&#30340;&#34920;&#31034;&#32780;
&#19981;&#24517;&#26356;&#25913;&#31243;&#24207;&#12290;&#25105;&#20204;&#20197;&#27492;&#26469;&#30740;&#31350;&#19981;&#21516;&#30340;&#23454;&#29616;&#31574;&#30053;&#12290;</p></li><li><p>&#25105;&#20204;&#30340;&#35821;&#35328;&#22788;&#29702;&#22120;&#22312;&#36739;&#39640;&#23618;&#27425;&#20889;&#23601;&#65292;&#29992;&#20197;&#31616;&#25324;&#22320;&#34920;&#31034;&#35821;&#20041;&#65307;&#21516;&#26102;&#20063;&#22312;&#26497;&#20302;&#23618;&#27425;&#20889;&#23601;&#65292;
&#29992;&#20197;&#29702;&#35299;&#23454;&#29616;&#31574;&#30053;&#12290;</p></li><li><p>&#25105;&#20204;&#23637;&#31034;&#20102;&#22914;&#20309;&#29992;&#31616;&#21333;&#30340;&#20195;&#25968;&#25805;&#20316;&#39044;&#27979;&#31243;&#24207;&#34892;&#20026;&#65292;&#25512;&#23548;&#23427;&#20204;&#30340;&#24615;&#36136;&#12290;&#20294;&#25105;&#20204;&#36890;&#24120;&#24456;
&#23569;&#37319;&#29992;&#25968;&#23398;&#31526;&#21495;&#65292;&#32780;&#26159;&#20559;&#29233;&#30740;&#31350;&#31243;&#24207;&#30340;&#34892;&#20026;&#65292;&#23427;&#20204;&#26159;&#25105;&#20204;&#35821;&#35328;&#23454;&#29616;&#30340;&#32452;&#25104;&#37096;&#20998;&#12290;</p></li><li><p>&#27491;&#25991;&#35299;&#37322;&#20851;&#38190;&#27010;&#24565;&#65292;&#20064;&#39064;&#25506;&#35752;&#22791;&#36873;&#35774;&#35745;&#21644;&#20854;&#23427;&#38382;&#39064;&#12290;&#20363;&#22914;&#65292;&#27491;&#25991;&#38416;&#36848;&#38745;&#24577;&#32465;&#23450;&#65292;&#20064;
&#39064;&#35752;&#35770;&#21160;&#24577;&#32465;&#23450;&#12290;&#19968;&#31995;&#21015;&#20064;&#39064;&#23558;&#35789;&#27861;&#23547;&#22336;&#30340;&#27010;&#24565;&#29992;&#20110;&#26412;&#20070;&#35774;&#35745;&#30340;&#21508;&#31181;&#35821;&#35328;&#12290;</p></li></ol><p>&#36890;&#36807;&#23618;&#27425;&#20016;&#23500;&#30340;&#25277;&#35937;&#65292;&#25105;&#20204;&#33021;&#20174;&#22810;&#20010;&#35282;&#24230;&#30475;&#24453;&#32534;&#31243;&#35821;&#35328;&#12290;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#24120;&#24120;&#25552;&#20379;&#39640;&#23618;&#27425;&#35266;&#28857;&#65292;
&#29992;&#21313;&#20998;&#31616;&#27905;&#30340;&#26041;&#24335;&#34920;&#29616;&#35821;&#35328;&#30340;&#35821;&#20041;&#65292;&#36825;&#19982;&#24418;&#24335;&#25968;&#23398;&#35821;&#20041;&#30456;&#21435;&#19981;&#36828;&#12290;&#21478;&#19968;&#20010;&#26497;&#31471;&#26159;&#65292;&#25105;&#20204;&#23637;&#31034;
&#20102;&#31243;&#24207;&#22914;&#20309;&#36716;&#25442;&#20026;&#27719;&#32534;&#35821;&#35328;&#29305;&#26377;&#30340;&#26497;&#20302;&#23618;&#27425;&#24418;&#24335;&#12290;&#36890;&#36807;&#19968;&#20123;&#23567;&#30340;&#27493;&#39588;&#23436;&#25104;&#36825;&#19968;&#36716;&#25442;&#65292;&#25105;&#20204;&#32500;
&#25345;&#20102;&#39640;&#20302;&#23618;&#27425;&#35266;&#28857;&#20043;&#38388;&#30340;&#28165;&#26224;&#32852;&#31995;&#12290;</p><p>&#25105;&#20204;&#23545;&#26412;&#29256;&#20570;&#20102;&#19968;&#20123;&#37325;&#22823;&#25913;&#21160;&#12290;&#23545;&#25152;&#26377;&#37325;&#35201;&#23450;&#20041;&#65292;&#25105;&#20204;&#37117;&#24341;&#20837;&#20102;&#38750;&#27491;&#24335;&#21512;&#32422;&#12290;&#36825;&#26377;&#21161;&#20110;&#38416;&#26126;
&#25152;&#20570;&#30340;&#25277;&#35937;&#12290;&#27492;&#22806;&#65292;&#26032;&#22686;&#20851;&#20110;&#27169;&#22359;&#30340;&#31456;&#33410;&#12290;&#20026;&#20102;&#20351;&#23454;&#29616;&#26356;&#23481;&#26131;&#65292;&#31532; 3&#12289;4&#12289;5&#12289;7 &#21644;&#31532; 8 &#31456;
&#30340;&#28304;&#35821;&#35328;&#20551;&#23450;&#21482;&#33021;&#32473;&#20989;&#25968;&#20256;&#36882;&#19968;&#20010;&#21442;&#25968;&#65307;&#25105;&#20204;&#22686;&#21152;&#20102;&#25903;&#25345;&#22810;&#21442;&#25968;&#36807;&#31243;&#30340;&#20064;&#39064;&#12290;
<a href="#%28part._cps%29" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a>&#26159;&#26032;&#22686;&#30340;&#65292;&#22240;&#20026;&#25105;&#20204;&#36873;&#25321;&#20102;&#19968;&#38454;&#32452;&#21512;&#24335;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#21464;&#25442;&#65292;&#32780;&#38750;&#20851;&#31995;&#24335;&#30340;&#12290;&#21516;
&#26102;&#65292;&#30001;&#20110;<span class="emph">&#23614;&#24335;</span> (<span class="emph">tail-form expression</span>)&#30340;&#24615;&#36136;&#65292;&#25105;&#20204;&#22312;&#36825;&#19968;&#31456;&#20351;&#29992;&#22810;&#21442;&#25968;&#36807;&#31243;&#12290;
&#22312;&#23545;&#35937;&#21644;&#31867;&#19968;&#31456;&#21516;&#26679;&#22914;&#27492;&#65292;&#20294;&#36825;&#24182;&#38750;&#24517;&#28982;&#12290;&#27599;&#31456;&#37117;&#32463;&#36807;&#20462;&#35746;&#65292;&#26032;&#22686;&#20102;&#24456;&#22810;&#20064;&#39064;&#12290;</p><h4 class="heading"><a name="(part._pf-org)"></a>&#32452;&#32455;<span class="button-group"><a href="#(part._pf-org)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>&#21069;&#20004;&#31456;&#20026;&#28145;&#20837;&#23398;&#20064;&#32534;&#31243;&#35821;&#35328;&#22880;&#23450;&#20102;&#22522;&#30784;&#12290;<a href="#%28part._isd%29" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a>&#24378;&#35843;&#25968;&#25454;&#30340;&#24402;&#32435;&#24335;&#23450;&#20041;&#27861;&#21644;&#36882;&#24402;&#32534;&#31243;
&#20043;&#38388;&#30340;&#32852;&#31995;&#65292;&#20171;&#32461;&#20102;&#20960;&#20010;&#19982;&#21464;&#37327;&#20316;&#29992;&#22495;&#30456;&#20851;&#30340;&#27010;&#24565;&#12290;<a href="#%28part._da%29" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a>&#20171;&#32461;&#20102;&#25968;&#25454;&#31867;&#22411;&#24037;&#20855;&#65292;&#30001;
&#27492;&#24341;&#20986;&#20851;&#20110;&#25968;&#25454;&#25277;&#35937;&#30340;&#35752;&#35770;&#21644;&#34920;&#31034;&#26041;&#24335;&#36716;&#25442;&#30340;&#20363;&#23376;&#65292;&#36825;&#31181;&#36716;&#25442;&#23558;&#22312;&#21518;&#38754;&#30340;&#31456;&#33410;&#20013;&#20351;&#29992;&#12290;</p><p><a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a>&#20351;&#29992;&#36825;&#20123;&#22522;&#30784;&#25551;&#36848;&#32534;&#31243;&#35821;&#35328;&#30340;&#34892;&#20026;&#12290;&#26412;&#31456;&#20171;&#32461;&#35299;&#37322;&#22120;&#65292;&#20316;&#20026;&#35299;&#37322;&#35821;&#35328;&#36816;&#34892;&#26102;
&#34892;&#20026;&#30340;&#26426;&#21046;&#65292;&#24182;&#20026;&#19968;&#38376;&#31616;&#21333;&#30340;&#35789;&#27861;&#20316;&#29992;&#22495;&#35821;&#35328;&#35774;&#35745;&#20102;&#35299;&#37322;&#22120;&#65292;&#35813;&#35821;&#35328;&#25903;&#25345;&#19968;&#31561;&#36807;&#31243;&#21644;&#36882;&#24402;&#12290;
&#36825;&#20010;&#35299;&#37322;&#22120;&#26159;&#26412;&#20070;&#21518;&#32493;&#37096;&#20998;&#35768;&#22810;&#26448;&#26009;&#30340;&#22522;&#30784;&#12290;&#26412;&#31456;&#32467;&#23614;&#35814;&#32454;&#35752;&#35770;&#20102;&#19968;&#31181;&#29992;&#32034;&#24341;&#20195;&#26367;&#21464;&#37327;&#30340;&#35821;
&#35328;&#65292;&#32467;&#26524;&#20415;&#26159;&#65292;&#21464;&#37327;&#26597;&#35810;&#21487;&#30001;&#21015;&#34920;&#24341;&#29992;&#23436;&#25104;&#12290;</p><p><a href="#%28part._state%29" data-pltdoc="x">&#29366;&#24577;</a>&#20171;&#32461;&#30340;&#26032;&#32452;&#20214;&#8212;&#8212;&#29366;&#24577;&#8212;&#8212;&#23558;&#20301;&#32622;&#19982;&#20540;&#23545;&#24212;&#12290;&#21152;&#20837;&#20102;&#23427;&#65292;&#25105;&#20204;&#23601;&#33021;&#30740;&#31350;&#20851;&#20110;&#34920;&#31034;
&#26041;&#24335;&#30340;&#21508;&#31181;&#38382;&#39064;&#12290;&#27492;&#22806;&#65292;&#23427;&#36824;&#20351;&#25105;&#20204;&#33021;&#22815;&#25506;&#32034;&#25353;&#25351;&#35843;&#29992;&#12289;&#25353;&#21517;&#35843;&#29992;&#21644;&#25353;&#38656;&#35843;&#29992;&#30340;&#21442;&#25968;&#20256;&#36882;&#26426;
&#21046;&#12290;</p><p><a href="#%28part._cpi%29" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a>&#29992;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#37325;&#20889;&#25105;&#20204;&#30340;&#22522;&#30784;&#35299;&#37322;&#22120;&#12290;&#36816;&#34892;&#35299;&#37322;&#22120;&#25152;&#38656;&#30340;&#25511;&#21046;&#32467;&#26500;&#38543;&#20043;&#20174;&#36882;
&#24402;&#36716;&#21464;&#20026;&#36845;&#20195;&#12290;&#36825;&#25581;&#31034;&#20102;&#35299;&#37322;&#24615;&#35821;&#35328;&#30340;&#25511;&#21046;&#26426;&#21046;&#65292;&#24378;&#21270;&#20102;&#23545;&#25511;&#21046;&#38382;&#39064;&#30340;&#25972;&#20307;&#30452;&#35273;&#12290;&#23427;&#20063;&#20351;&#25105;
&#20204;&#33021;&#22815;&#29992;&#36454;&#24202;&#12289;&#24322;&#24120;&#22788;&#29702;&#21644;&#22810;&#32447;&#31243;&#26426;&#21046;&#25193;&#23637;&#35821;&#35328;&#12290;</p><p><a href="#%28part._cps%29" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a>&#26159;&#19978;&#19968;&#31456;&#30340;&#32493;&#31687;&#12290;&#19978;&#19968;&#31456;&#25105;&#20204;&#23637;&#31034;&#20102;&#22914;&#20309;&#25226;&#25105;&#20204;&#29087;&#24713;&#30340;&#35299;&#37322;&#22120;&#36716;&#25442;&#20026;&#32493;&#25991;&#20256;&#36882;
&#39118;&#26684;&#65292;&#26412;&#31456;&#25105;&#20204;&#23637;&#31034;&#20102;&#22914;&#20309;&#20026;&#26356;&#22823;&#30340;&#19968;&#31867;&#31243;&#24207;&#23436;&#25104;&#36716;&#25442;&#12290;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#26159;&#19968;&#31181;&#24378;&#22823;&#30340;&#32534;&#31243;&#24037;
&#20855;&#65292;&#22240;&#20026;&#23427;&#20351;&#20960;&#20046;&#25152;&#26377;&#35821;&#35328;&#37117;&#33021;&#23454;&#29616;&#20219;&#24847;&#30340;&#39034;&#24207;&#25511;&#21046;&#26426;&#21046;&#12290;&#36825;&#19968;&#31639;&#27861;&#20063;&#26159;&#25277;&#35937;&#25551;&#36848;&#28304;&#21040;&#28304;&#31243;
&#24207;&#36716;&#25442;&#30340;&#20363;&#23376;&#12290;</p><p><a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#23558;<a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a>&#30340;&#35821;&#35328;&#36716;&#25442;&#20026;&#26377;&#31867;&#22411;&#30340;&#35821;&#35328;&#12290;&#39318;&#20808;&#25105;&#20204;&#23454;&#29616;&#19968;&#20010;&#31867;&#22411;&#26816;&#26597;
&#22120;&#12290;&#28982;&#21518;&#25105;&#20204;&#23637;&#31034;&#22914;&#20309;&#29992;&#22522;&#20110;&#21512;&#19968;&#30340;&#31867;&#22411;&#25512;&#23548;&#31639;&#27861;&#25512;&#26029;&#31243;&#24207;&#20013;&#30340;&#31867;&#22411;&#12290;</p><p><a href="#%28part._modules%29" data-pltdoc="x">&#27169;&#22359;</a>&#24314;&#31435;&#31867;&#22411;&#27169;&#22359;&#65292;&#36825;&#26497;&#24230;&#20381;&#36182;&#23545;&#21069;&#19968;&#31456;&#30340;&#29702;&#35299;&#12290;&#27169;&#22359;&#26082;&#20351;&#25105;&#20204;&#33021;&#22815;&#24314;&#31435;&#21644;&#24378;
&#21270;&#25277;&#35937;&#36793;&#30028;&#65292;&#21448;&#25552;&#20379;&#20102;&#26032;&#30340;&#23450;&#30028;&#26041;&#24335;&#12290;</p><p><a href="#%28part._oac%29" data-pltdoc="x">&#23545;&#35937;&#21644;&#31867;</a>&#20197;&#31867;&#20026;&#20013;&#24515;&#65292;&#23637;&#31034;&#20102;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#35821;&#35328;&#30340;&#22522;&#26412;&#27010;&#24565;&#12290;&#25105;&#20204;&#39318;&#20808;&#35774;&#35745;&#20102;&#39640;&#25928;&#30340;&#36816;
&#34892;&#26102;&#32467;&#26500;&#65292;&#20316;&#20026;&#26412;&#31456;&#31532;&#20108;&#37096;&#20998;&#20869;&#23481;&#30340;&#22522;&#30784;&#12290;&#31532;&#20108;&#37096;&#20998;&#23558;<a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#30340;&#31867;&#22411;&#26816;&#26597;&#22120;&#24605;&#24819;&#21644;
&#31532;&#19968;&#37096;&#20998;&#30340;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#35821;&#35328;&#32467;&#21512;&#36215;&#26469;&#65292;&#32467;&#26524;&#20415;&#26159;&#20256;&#32479;&#30340;&#26377;&#31867;&#22411;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#12290;&#36825;&#35201;&#27714;&#24341;&#20837;
&#26032;&#30340;&#27010;&#24565;&#65292;&#21253;&#25324;&#25509;&#21475;&#12289;&#25277;&#35937;&#26041;&#27861;&#21644;&#24378;&#21046;&#36716;&#25442;&#12290;</p><p>&#8220;<a href="#%28elem._readings%29" data-pltdoc="x"><span class="emph">&#25193;&#23637;&#38405;&#35835;</span></a>&#8221;&#35299;&#37322;&#20102;&#26412;&#20070;&#30340;
&#27599;&#19968;&#24605;&#24819;&#28304;&#20110;&#20309;&#22788;&#12290;&#34429;&#28982;&#26377;&#26102;&#25105;&#20204;&#21482;&#21015;&#20986;&#20102;&#33021;&#25509;&#35302;&#21040;&#30340;&#26469;&#28304;&#65292;&#35835;&#32773;&#27867;&#35272;&#26412;&#31456;&#65292;&#20173;&#33021;&#31397;&#28304;&#35775;&#26412;&#12290;</p><p>&#26368;&#21518;&#65292;<a href="#%28elem._sllgen%29" data-pltdoc="x">&#38468;&#24405; B</a> &#20171;&#32461;&#20102;&#25105;&#20204;&#30340; SLLGEN &#35299;&#26512;&#31995;&#32479;&#12290;</p><p>&#21508;&#31456;&#30340;&#20381;&#36182;&#20851;&#31995;&#22914;&#19979;&#22270;&#25152;&#31034;&#12290;</p><blockquote class="SCentered"><p><img src="structure.svg" alt="章节依赖关系" width="504.0pt" height="196.5pt"/></p></blockquote><h4 class="heading"><a name="(part._pf-use)"></a>&#29992;&#27861;<span class="button-group"><a href="#(part._pf-use)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>&#26412;&#20070;&#22312;&#26412;&#31185;&#29983;&#21644;&#30740;&#31350;&#29983;&#35838;&#31243;&#20013;&#22343;&#24050;&#20351;&#29992;&#65292;&#20063;&#24050;&#22312;&#32844;&#19994;&#31243;&#24207;&#21592;&#30340;&#25345;&#32493;&#25945;&#32946;&#35838;&#31243;&#20013;&#20351;&#29992;&#12290;&#25105;&#20204;&#20551;
&#23450;&#30340;&#32972;&#26223;&#30693;&#35782;&#26377;&#25968;&#25454;&#32467;&#26500;&#65292;&#36807;&#31243;&#24335;&#35821;&#35328;&#65288;&#22914;C&#12289;C++&#12289;Java&#65289;&#21644; Scheme&#12289;ML&#12289;Python &#25110;
Haskell &#30340;&#32534;&#31243;&#32463;&#39564;&#12290;</p><p>&#20064;&#39064;&#26159;&#25991;&#26412;&#30340;&#37325;&#35201;&#37096;&#20998;&#65292;&#25955;&#35265;&#20110;&#21508;&#22788;&#12290;&#23427;&#20204;&#38590;&#26131;&#26377;&#21035;&#65292;&#31616;&#21333;&#32773;&#65292;&#29702;&#35299;&#30456;&#20851;&#26448;&#26009;&#20415;&#36731;&#32780;&#26131;&#20030;
&#65288;&#26631;&#20026; <span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span>&#65289;&#65307;&#22256;&#38590;&#32773;&#65292;&#38656;&#35201;&#33457;&#36153;&#22823;&#37327;&#24605;&#32771;&#21644;&#32534;&#31243;&#24037;&#20316;&#65288;&#26631;&#20026;
<span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span>&#65289;&#12290;&#22823;&#37327;&#20851;&#20110;&#24212;&#29992;&#65292;&#21382;&#21490;&#20197;&#21450;&#29702;&#35770;&#30340;&#26448;&#26009;&#28508;&#34255;&#20854;&#38388;&#12290;&#25105;&#20204;&#24314;&#35758;&#35835;&#19968;&#35835;
&#27599;&#36947;&#20064;&#39064;&#65292;&#24819;&#19968;&#24819;&#22914;&#20309;&#35299;&#20915;&#23427;&#20204;&#12290;&#34429;&#28982;&#25105;&#20204;&#29992; Scheme &#32534;&#20889;&#35299;&#37322;&#31243;&#24207;&#21644;&#36716;&#25442;&#31995;&#32479;&#65292;&#20219;&#20309;&#25903;&#25345;
&#19968;&#31561;&#36807;&#31243;&#21644;&#36171;&#20540;&#30340;&#35821;&#35328;&#65288;ML&#12289;Common Lisp&#12289;Python&#12289;Ruby&#31561;&#31561;&#65289;&#37117;&#36275;&#20197;&#23436;&#25104;&#26412;&#20070;&#32451;&#20064;&#12290;</p><blockquote class="EoplExercise"><p><a name="(elem._ex0..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#24120;&#35828;&#8220;&#26576;&#35821;&#35328;&#20855;&#26377;&#26576;&#24615;&#36136;&#8221;&#12290;&#20026;&#27599;&#31181;&#35828;&#27861;&#25214;&#20986;&#19968;&#31181;&#25110;&#22810;
&#31181;&#20855;&#26377;&#35813;&#24615;&#36136;&#30340;&#35821;&#35328;&#65292;&#20197;&#21450;&#19968;&#31181;&#25110;&#22810;&#31181;&#19981;&#20855;&#26377;&#35813;&#24615;&#36136;&#30340;&#35821;&#35328;&#12290;&#35831;&#38543;&#24847;&#25628;&#32034;&#36825;&#20123;&#20449;&#24687;&#65292;&#19981;&#25304;
&#20219;&#20309;&#32534;&#31243;&#35821;&#35328;&#30340;&#20171;&#32461;&#24615;&#20070;&#31821;&#65288;&#27604;&#22914; Scott(2005)&#65292;Sebesta (2007)&#65292;&#25110;&#32773; Pratt &amp;
Zelkowitz(2001)&#65289;&#12290;<br/></p></blockquote><p>&#36825;&#26159;&#26412;&#23454;&#36341;&#24615;&#30340;&#20070;&#65306;&#26412;&#20070;&#35752;&#35770;&#30340;&#19968;&#20999;&#37117;&#21487;&#22312;&#36890;&#24120;&#30340;&#22823;&#23398;&#35838;&#31243;&#38480;&#24230;&#20869;&#23436;&#25104;&#12290;&#22240;&#20026;&#20989;&#25968;&#24335;&#35821;&#35328;&#30340;
&#25277;&#35937;&#29305;&#24615;&#23588;&#20854;&#36866;&#21512;&#36825;&#31867;&#32534;&#31243;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986;&#24378;&#22823;&#30340;&#35821;&#35328;&#22788;&#29702;&#31995;&#32479;&#65292;&#26082;&#31616;&#27905;&#65292;&#21448;&#33021;&#20197;&#36866;&#24403;&#30340;&#21162;
&#21147;&#25484;&#25569;&#12290;</p><p>&#32593;&#31449;&#30001;&#20986;&#29256;&#31038;&#25552;&#20379;&#65292;&#21253;&#21547;&#26412;&#20070;&#25152;&#26377;&#35299;&#37322;&#22120;&#21644;&#20998;&#26512;&#22120;&#30340;&#23436;&#25972; Scheme &#20195;&#30721;&#12290;&#20195;&#30721;&#29992; PLT
Scheme &#20889;&#25104;&#12290;<span class="NoteBox"><span class="NoteContent">&#26412;&#20070;&#32593;&#31449;&#24050;&#36801;&#31227;&#33267; <a href="http://www.eopl3.com"><span class="url">http://www.eopl3.com</span></a>&#65292;&#20195;&#30721;&#25913;&#29992; Racket
&#23454;&#29616;&#65292;&#32593;&#22336;&#20026; <a href="https://github.com/mwand/eopl3"><span class="url">https://github.com/mwand/eopl3</span></a>&#12290;&#8212;&#8212;<span class="emph">&#35793;&#27880;</span></span></span>&#25105;&#20204;&#36873;&#25321;&#36825;&#31181;
Scheme &#23454;&#29616;&#65292;&#26159;&#22240;&#20026;&#23427;&#30340;&#27169;&#22359;&#31995;&#32479;&#21644;&#32534;&#31243;&#29615;&#22659;&#23545;&#23398;&#29983;&#21161;&#30410;&#33391;&#22810;&#12290;&#20195;&#30721;&#22810;&#21322;&#20860;&#23481;&#20110;
R<span style="vertical-align: super; font-size: 80%">5</span>RS&#65292;&#24403;&#33021;&#36731;&#26131;&#31227;&#26893;&#21040;&#20219;&#20309;&#21151;&#33021;&#23436;&#25972;&#30340; Scheme &#23454;&#29616;&#12290;</p><h3 class="heading"><a name="(part._awk)"></a>&#33268;&#35874;<span class="button-group"><a href="#(part._awk)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p>&#24863;&#35874;&#26080;&#25968;&#21516;&#20107;&#21516;&#23398;&#65292;&#20182;&#20204;&#20351;&#29992;&#21644;&#35780;&#35770;&#20102;&#26412;&#20070;&#30340;&#21069;&#20004;&#29256;&#65292;&#21448;&#20026;&#31532;&#19977;&#29256;&#30340;&#28459;&#38271;&#26500;&#24605;&#25552;&#20379;&#20102;&#26080;&#20215;&#24110;
&#21161;&#12290;&#29305;&#21035;&#24863;&#28608;&#20197;&#19979;&#35832;&#21531;&#30340;&#36129;&#29486;&#65292;&#23545;&#20182;&#20204;&#25105;&#20204;&#28145;&#34920;&#35874;&#24561;&#12290;Oliver Danvy &#40723;&#21169;&#25105;&#20204;&#24605;&#32771;&#19968;&#38454;&#32452;
&#21512;&#24335;&#32493;&#25991;&#20256;&#36882;&#31639;&#27861;&#65292;&#24182;&#25552;&#20986;&#20102;&#19968;&#20123;&#39286;&#26377;&#36259;&#21619;&#30340;&#32451;&#20064;&#12290;Matthias Felleisen &#20999;&#20013;&#32943;&#32174;&#30340;&#20998;&#26512;
&#25913;&#21892;&#20102;&#19968;&#20123;&#31456;&#33410;&#30340;&#35774;&#35745;&#12290;Amr Sabry &#25552;&#20986;&#20102;&#35768;&#22810;&#26377;&#29992;&#30340;&#24314;&#35758;&#65292;&#22312;<a href="#%28part._oac%29" data-pltdoc="x">&#23545;&#35937;&#21644;&#31867;</a>&#30340;&#33609;&#31295;&#20013;&#21457;&#29616;
&#20102;&#33267;&#23569;&#19968;&#22788;&#26497;&#38590;&#23519;&#35273;&#30340;&#38382;&#39064;&#12290;Benjamin Pierce &#33258;&#20351;&#29992;&#26412;&#20070;&#31532;&#19968;&#29256;&#25480;&#35838;&#20197;&#26469;&#25552;&#20986;&#20102;&#19968;&#31995;&#21015;&#28145;
&#20837;&#35265;&#35299;&#65292;&#20854;&#20013;&#22823;&#21322;&#24050;&#20026;&#25105;&#20204;&#37319;&#29992;&#12290;Gary Leavens &#23545;&#31532;&#20108;&#29256;&#30340;&#21021;&#31295;&#25552;&#20986;&#20102;&#26497;&#20026;&#32454;&#33268;&#32780;&#29645;&#36149;&#30340;
&#35780;&#35770;&#65292;&#21253;&#25324;&#35768;&#22810;&#35814;&#32454;&#30340;&#20462;&#25913;&#24314;&#35758;&#12290;Stephanie Weirich &#22312;&#26412;&#20070;&#31532;&#20108;&#29256;<a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#30340;&#31867;&#22411;
&#25512;&#23548;&#20195;&#30721;&#20013;&#21457;&#29616;&#20102;&#19968;&#20010;&#19981;&#26131;&#23519;&#35273;&#30340;&#38382;&#39064;&#12290;Ryan Newton &#38500;&#20102;&#38405;&#35835;<a href="#%28part._da%29" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a>&#33609;&#31295;&#20043;&#22806;&#65292;&#21448;
&#25215;&#25285;&#20102;&#19968;&#20010;&#33392;&#24040;&#20219;&#21153;&#65306;&#20026;&#35813;&#29256;&#30340;&#27599;&#36947;&#32451;&#20064;&#39064;&#25512;&#33616;&#38590;&#24230;&#31561;&#32423;&#12290;Chung-chieh Shan &#20174;&#31532;&#19977;&#29256;&#21021;
&#31295;&#24320;&#22987;&#25480;&#35838;&#65292;&#25552;&#20379;&#20102;&#22823;&#37327;&#26377;&#30410;&#30340;&#35780;&#35770;&#12290;</p><p>Kevin Millikin&#12289;Arthur Lee&#12289;Roger Kirchner&#12289;Max Hailperin &#21644; Erik Hilsdale &#20351;&#29992;
&#20102;&#31532;&#20108;&#29256;&#21021;&#31295;&#12290;Will Clinger&#12289;Will Byrd&#12289;Joe Near &#21644; Kyle Blocher &#20351;&#29992;&#20102;&#26412;&#29256;&#25163;&#31295;&#12290;
&#20182;&#20204;&#30340;&#35780;&#35770;&#24357;&#36275;&#29645;&#36149;&#12290;Ron Garcia&#12289;Matthew Flatt&#12289;Shriram Krishnamurthi&#12289;Steve Ganz&#12289;
Gregor Kiczales&#12289;Marlene Miller&#12289;Galen Williamson&#12289;Dipanwita Sarkar&#12289;Steven
Bogaerts&#12289;Albert Rossi&#12289;Craig Citro&#12289;Christopher Dutchyn&#12289;Jeremy Siek &#21644; Neil
Ching &#20063;&#35748;&#30495;&#38405;&#35835;&#24182;&#20570;&#20102;&#35780;&#35770;&#12290;</p><p>&#23588;&#20854;&#24863;&#35874;&#36825;&#20960;&#20301;&#23545;&#26412;&#20070;&#30340;&#24110;&#21161;&#12290;&#24863;&#35874; Neil Ching &#32534;&#21046;&#20102;&#32034;&#24341;&#12290;&#22312;&#25105;&#20204;&#23581;&#35797;&#35774;&#35745;
<span class="stt">define-datatype</span> &#21644; <span class="stt">cases</span> &#35821;&#27861;&#25193;&#23637;&#26102;&#65292;Jonathan Sobel &#21644; Erik Hilsdale
&#23436;&#25104;&#20102;&#19968;&#20123;&#21407;&#22411;&#23454;&#29616;&#65292;&#36129;&#29486;&#20102;&#24456;&#22810;&#24819;&#27861;&#12290;&#31243;&#24207;&#35821;&#35328;&#23567;&#32452;&#65292;&#23588;&#20854;&#26159; Matthias Felleisen&#12289;
Matthew Flatt&#12289;Robby Findler &#21644; Shriram Krishnamurthi&#65292;&#28909;&#24515;&#24110;&#24537;&#20860;&#23481;&#20182;&#20204;&#30340;
DrScheme &#31995;&#32479;&#12290;Kent Dybvig &#24320;&#21457;&#20102;&#26497;&#20026;&#39640;&#25928;&#21644;&#20581;&#22766;&#30340; Chez Scheme &#23454;&#29616;&#65292;&#26412;&#20070;&#20316;&#32773;&#24050;&#20351;
&#29992;&#22810;&#24180;&#12290;Will Byrd &#22312;&#25972;&#20010;&#36807;&#31243;&#20013;&#37117;&#25552;&#20379;&#20102;&#26080;&#20215;&#24110;&#21161;&#12290;Matthias Felleisen &#24378;&#28872;&#25512;&#33616;&#25105;&#20204;
&#20860;&#23481; DrScheme &#30340;&#27169;&#22359;&#31995;&#32479;&#65292;&#36825;&#22312;&#20301;&#20110; <a href="http://www.eopl3.com"><span class="url">http://www.eopl3.com</span></a> &#30340;&#23454;&#29616;&#20013;&#26174;&#32780;&#26131;&#35265;&#12290;</p><p>&#29305;&#21035;&#20540;&#24471;&#19968;&#25552;&#30340;&#26159;&#20307;&#36148;&#21644;&#20851;&#24515;&#25105;&#20204;&#36827;&#24230;&#30340;&#20154;&#12290;George Springer &#21644; Larry Finkelstein &#25552;
&#20379;&#20102;&#26080;&#20215;&#25903;&#25345;&#12290;&#29305;&#21035;&#24863;&#35874; Bob Prior&#65292;&#25105;&#20204; MIT &#20986;&#29256;&#31038;&#30340;&#20248;&#31168;&#32534;&#36753;&#65292;&#26159;&#20182;&#40723;&#21169;&#25105;&#20204;&#25915;&#19979;&#26412;
&#29256;&#30340;&#20889;&#20316;&#12290;&#21516;&#26679;&#24863;&#35874; Bob &#30340;&#32487;&#20219; Ada Brunstein&#65292;&#24110;&#25105;&#20204;&#27969;&#30021;&#36807;&#28193;&#21040;&#26032;&#30340;&#32534;&#36753;&#12290;&#21360;&#31532;&#23433;&#32435;
&#22823;&#23398;&#20449;&#24687;&#23398;&#38498;&#21644;&#19996;&#21271;&#22823;&#23398;&#35745;&#31639;&#26426;&#20449;&#24687;&#31185;&#23398;&#23398;&#38498;&#20026;&#25105;&#20204;&#36827;&#34892;&#36825;&#19968;&#24037;&#31243;&#21019;&#36896;&#20102;&#29615;&#22659;&#12290;Mary
Friedman &#22312;&#25968;&#21608;&#30340;&#20889;&#20316;&#35848;&#35805;&#20013;&#28909;&#24773;&#25307;&#24453;&#65292;&#22823;&#22823;&#21152;&#24555;&#20102;&#25105;&#20204;&#30340;&#36827;&#31243;&#12290;</p><p>&#25105;&#20204;&#24863;&#35874; Christopher T. Haynes &#22312;&#21069;&#20004;&#29256;&#20013;&#30340;&#21512;&#20316;&#12290;&#24456;&#36951;&#25022;&#65292;&#20182;&#24050;&#24535;&#19981;&#22312;&#27492;&#65292;&#27809;&#26377;&#32487;&#32493;
&#21516;&#25105;&#20204;&#21442;&#19982;&#26412;&#29256;&#30340;&#32534;&#20889;&#12290;</p><p>&#26368;&#21518;&#65292;&#24863;&#35874;&#25105;&#20204;&#30340;&#23478;&#20154;&#65292;&#21253;&#23481;&#25105;&#20204;&#20889;&#20316;&#26412;&#20070;&#26102;&#30340;&#28909;&#24773;&#12290;&#35874;&#35874;&#20320;&#65292;Rob&#12289;Shannon&#12289;Rachel&#12289;
Sara&#65292;&#36824;&#26377; Mary&#65307;&#35874;&#35874;&#20320;&#65292;Rebecca &#21644; Joshua&#65292;Jennifer &#21644; Stephen&#65292;Joshua &#21644;
Georgia&#65292;&#36824;&#26377; Barbara&#12290;</p><p>&#26412;&#29256;&#31609;&#22791;&#33391;&#20037;&#65292;&#25105;&#20204;&#21487;&#33021;&#24573;&#35270;&#20102;&#19968;&#36335;&#24110;&#21161;&#36807;&#25105;&#20204;&#30340;&#20154;&#12290;&#25105;&#20204;&#20026;&#20219;&#20309;&#24573;&#35270;&#36947;&#27465;&#12290;&#24744;&#24635;&#22312;&#20070;&#20013;&#30475;
&#21040;&#36825;&#26679;&#30340;&#35805;&#65292;&#21487;&#33021;&#20250;&#22855;&#24618;&#20026;&#20160;&#20040;&#26377;&#20154;&#20250;&#36825;&#26679;&#20889;&#12290;&#24573;&#35270;&#20102;&#21035;&#20154;&#65292;&#20320;&#24403;&#28982;&#24863;&#21040;&#25265;&#27465;&#12290;&#20294;&#26159;&#65292;&#24403;&#20320;
&#26377;&#20102;&#19968;&#20247;&#24110;&#25163;&#65288;&#24471;&#19968;&#20010;&#26449;&#23376;&#25165;&#35013;&#24471;&#19979;&#65289;&#65292;&#20320;&#30830;&#23454;&#26377;&#31181;&#36131;&#20219;&#24863;&#65306;&#20219;&#20309;&#20154;&#37117;&#19981;&#23481;&#24573;&#35270;&#12290;&#25152;&#20197;&#65292;&#22914;
&#26524;&#24744;&#34987;&#24573;&#35270;&#20102;&#65292;&#25105;&#20204;&#28145;&#34920;&#27465;&#24847;&#12290;<br/></p><p><span class="Sright">&#8212;&#8212; D.P.F&#65292;M.W.</span></p><p class="SPretitle"><span class="mainmatter"></span></p><h3 class="heading">1<tt>&nbsp;</tt><a name="(part._isd)"></a>&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;<span class="button-group"><a href="#(part._isd)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p>&#35299;&#37322;&#22120;&#19982;&#26816;&#26597;&#22120;&#19968;&#31867;&#30340;&#31243;&#24207;&#26159;&#32534;&#31243;&#35821;&#35328;&#22788;&#29702;&#22120;&#30340;&#26680;&#24515;&#65292;&#26412;&#31456;&#20171;&#32461;&#20889;&#36825;&#20123;&#29992;&#21040;&#30340;&#22522;&#26412;&#32534;&#31243;&#24037;&#20855;&#12290;</p><p>&#22240;&#20026;&#32534;&#31243;&#35821;&#35328;&#30340;&#35821;&#27861;&#36890;&#24120;&#20026;&#23884;&#22871;&#25110;&#32773;&#26641;&#29366;&#32467;&#26500;&#65292;&#36882;&#24402;&#23558;&#26159;&#25105;&#20204;&#30340;&#20027;&#35201;&#25216;&#24039;&#12290;
<a href="#%28part._s1..1%29" data-pltdoc="x">&#36882;&#25512;&#23450;&#20041;&#30340;&#25968;&#25454;</a>&#21644;<a href="#%28part._s1..2%29" data-pltdoc="x">&#25512;&#23548;&#36882;&#24402;&#31243;&#24207;</a>&#20171;&#32461;&#24402;&#32435;&#23450;&#20041;&#25968;&#25454;&#32467;&#26500;&#30340;&#26041;&#27861;&#65292;&#24182;&#23637;&#31034;&#22914;&#20309;&#29992;&#36825;&#31867;&#23450;&#20041;&#25351;&#23548;
&#36882;&#24402;&#31243;&#24207;&#30340;&#32534;&#20889;&#12290;<a href="#%28part._s1..3%29" data-pltdoc="x">&#36741;&#21161;&#36807;&#31243;&#21644;&#19978;&#19979;&#25991;&#21442;&#25968;</a>&#23637;&#31034;&#22914;&#20309;&#23558;&#36825;&#20123;&#25216;&#24039;&#25512;&#24191;&#21040;&#26356;&#20026;&#22797;&#26434;&#30340;&#31243;&#24207;&#12290;&#26412;&#31456;&#20197;&#22823;&#37327;
&#32451;&#20064;&#20316;&#32467;&#12290;&#36825;&#20123;&#32451;&#20064;&#26159;&#26412;&#31456;&#30340;&#26680;&#24515;&#12290;&#27442;&#25484;&#25569;&#26412;&#20070;&#20313;&#19979;&#37096;&#20998;&#20381;&#36182;&#30340;&#36882;&#24402;&#32534;&#31243;&#25216;&#24039;&#65292;&#24471;&#33258;&#23427;&#20204;&#30340;
&#32463;&#39564;&#19981;&#21487;&#25110;&#32570;&#12290;</p><h4 class="heading">1.1<tt>&nbsp;</tt><a name="(part._s1..1)"></a>&#36882;&#25512;&#23450;&#20041;&#30340;&#25968;&#25454;<span class="button-group"><a href="#(part._s1..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._8))"></a>
&#32534;&#20889;&#36807;&#31243;&#20195;&#30721;&#26102;&#65292;&#24517;&#39035;&#26126;&#30830;&#30693;&#36947;&#20160;&#20040;&#26679;&#30340;&#20540;&#33021;&#20316;&#20026;&#36807;&#31243;&#30340;&#21442;&#25968;&#65292;&#20160;&#20040;&#26679;&#30340;&#20540;&#26159;&#36807;&#31243;&#30340;&#21512;&#27861;&#36820;
&#22238;&#20540;&#12290;&#36825;&#20123;&#20540;&#30340;&#38598;&#21512;&#36890;&#24120;&#24456;&#22797;&#26434;&#12290;&#26412;&#33410;&#20171;&#32461;&#23450;&#20041;&#20540;&#38598;&#21512;&#30340;&#24418;&#24335;&#21270;&#25216;&#26415;&#12290;</p><h5 class="heading">1.1.1<tt>&nbsp;</tt><a name="(part._s1..1..1)"></a>&#24402;&#32435;&#23450;&#20041;&#27861;<span class="button-group"><a href="#(part._s1..1..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._9))"></a>
&#24402;&#32435;&#23450;&#20041;&#27861;&#26159;&#23450;&#20041;&#20540;&#38598;&#21512;&#30340;&#26377;&#25928;&#26041;&#27861;&#12290;&#20026;&#35299;&#37322;&#36825;&#19968;&#26041;&#27861;&#65292;&#25105;&#20204;&#29992;&#23427;&#26469;&#25551;&#36848;&#33258;&#28982;&#25968; <span class="texMathInline">N =
{0,1,2,...}</span> &#30340;&#26576;&#19968;&#23376;&#38598; <span class="texMathInline">S</span>&#12290;</p><blockquote class="EoplDefinition"><p><div class="SIntrapara"><a name="(elem._d1..1..1)"></a><span class="hspace">&nbsp;</span><a name="(idx._(gentag._10))"></a>
&#33258;&#28982;&#25968; <span class="texMathInline">n</span> &#23646;&#20110; <span class="texMathInline">S</span>&#65292;&#24403;&#19988;&#20165;&#24403;&#65306;
 </div><div class="SIntrapara"><ol><li><p><span class="texMathInline">n = 0</span>&#65292;&#25110;</p></li><li><p><span class="texMathInline">n - 3 \in S</span></p></li></ol></div></p></blockquote><p>&#26469;&#30475;&#30475;&#22914;&#20309;&#29992;&#36825;&#19968;&#23450;&#20041;&#21028;&#26029;&#21738;&#20123;&#33258;&#28982;&#25968;&#23646;&#20110; <span class="texMathInline">S</span>&#12290;&#24050;&#30693; <span class="texMathInline">0 \in S</span>&#65292;&#22240;&#27492; <span class="texMathInline">3 \in S</span>&#65292;
&#22240;&#20026; <span class="texMathInline">(3 - 3) = 0</span>&#65292;&#19988; <span class="texMathInline">0 \in S</span>&#12290;&#21516;&#26679;&#22320;&#65292;<span class="texMathInline">6 \in S</span>&#65292;&#22240;&#20026; <span class="texMathInline">(6 - 3) = 3</span>&#65292;
&#19988; <span class="texMathInline">3 \in S</span>&#12290;&#20381;&#27492;&#31867;&#25512;&#65292;&#21487;&#24471;&#32467;&#35770;&#65306;&#25152;&#26377; <span class="texMathInline">3</span> &#30340;&#25972;&#25968;&#20493;&#37117;&#23646;&#20110; <span class="texMathInline">S</span>&#12290;</p><p>&#20854;&#20182;&#33258;&#28982;&#25968;&#21602;&#65311;<span class="texMathInline">1 \in S</span> &#21527;&#65311;&#24050;&#30693; <span class="texMathInline">1 \ne 0</span>&#65292;&#25152;&#20197;&#26465;&#20214;&#19968;&#19981;&#28385;&#36275;&#12290;&#27492;&#22806;&#65292;<span class="texMathInline">(1 -
3) = -2</span>&#65292;&#19981;&#26159;&#33258;&#28982;&#25968;&#65292;&#25925;&#19981;&#26159; <span class="texMathInline">S</span> &#30340;&#20803;&#32032;&#65292;&#22240;&#27492;&#26465;&#20214;&#20108;&#19981;&#28385;&#36275;&#12290;&#22240;&#20026; <span class="texMathInline">1</span> &#19981;&#28385;&#36275;&#20219;
&#19968;&#26465;&#20214;&#65292;&#25152;&#20197; <span class="texMathInline">1 \notin S</span>&#12290;&#21516;&#26679;&#22320;&#65292;<span class="texMathInline">2 \notin S</span>&#12290;<span class="texMathInline">4</span>&#21602;&#65311;&#20165;&#24403; <span class="texMathInline">1 \in S</span>
&#26102; <span class="texMathInline">4 \in S</span>&#12290;&#20294; <span class="texMathInline">1 \notin S</span>&#65292;&#25152;&#20197; <span class="texMathInline">4 \notin S</span>&#12290;&#21516;&#29702;&#21487;&#24471;&#65292;&#22914;&#26524; <span class="texMathInline">n</span> &#26159;
&#33258;&#28982;&#25968;&#19988;&#19981;&#26159; <span class="texMathInline">3</span> &#30340;&#25972;&#25968;&#20493;&#65292;&#21017; <span class="texMathInline">n \notin S</span>&#12290;</p><p>&#25454;&#27492;&#25512;&#35770;&#65292;&#21487;&#24471; <span class="texMathInline">S</span> &#26159; <span class="texMathInline">3</span> &#30340;&#25972;&#25968;&#20493;&#33258;&#28982;&#25968;&#38598;&#21512;&#12290;</p><p>&#21487;&#20197;&#29992;&#35813;&#23450;&#20041;&#32534;&#20889;&#19968;&#20010;&#20989;&#25968;&#65292;&#21028;&#26029;&#19968;&#20010;&#33258;&#28982;&#25968; <span class="texMathInline">n</span> &#26159;&#21542;&#23646;&#20110; <span class="texMathInline">S</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a name="(idx._(gentag._11))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">in-S?</span></span> : <span class="texMathInline">\mathit{N} \to \mathit{Bool}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(in-S? n) = #t &#33509; n &#23646;&#20110; S&#65292;&#21542;&#21017; #f</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">in-S?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&gt;=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in-S?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#26681;&#25454;&#23450;&#20041;&#65292;&#25105;&#20204;&#29992;Scheme&#32534;&#20889;&#20102;&#19968;&#20010;&#36882;&#24402;&#36807;&#31243;&#12290;&#31526;&#21495; <span class="RktSym">in-S?</span><span class="stt"> </span><span class="RktSym">:</span><span class="stt"> </span><span class="texMathInline">\mathit{N} \to \mathit{Bool}</span> &#26159;&#19968;&#26465;&#27880;&#37322;&#65292;&#31216;&#20026;&#35813;&#20989;&#25968;
<a name="(idx._(gentag._12))"></a>
&#30340;<span class="emph">&#21512;&#32422;</span> (<span class="emph">contract</span>)&#12290;&#23427;&#34920;&#31034; <span class="RktSym">in-S?</span> &#24212;&#20026;&#19968;&#36807;&#31243;&#65292;&#21462;&#19968;&#33258;&#28982;&#25968;&#65292;&#20135;&#29983;&#19968;
&#24067;&#23572;&#20540;&#12290;&#36825;&#26679;&#30340;&#27880;&#37322;&#23545;&#38405;&#35835;&#21644;&#32534;&#20889;&#20195;&#30721;&#24456;&#26377;&#24110;&#21161;&#12290;</p><p>&#35201;&#21028;&#26029;&#26159;&#21542; <span class="texMathInline">n \in S</span>&#65292;&#20808;&#21028;&#26029;&#26159;&#21542; <span class="texMathInline">n = 0</span>&#12290;&#22914;&#26524;&#26159;&#65292;&#37027;&#20040;&#31572;&#26696;&#20026;&#30495;&#12290;&#21542;&#21017;&#65292;&#21028;&#26029;&#26159;
&#21542; <span class="texMathInline">n - 3 \in S</span>&#12290;&#27442;&#30693;&#27492;&#65292;&#39318;&#20808;&#21028;&#26029;&#26159;&#21542; <span class="texMathInline">(n - 3) \geqslant 0</span>&#12290;&#22914;&#26524;&#26159;&#65292;&#37027;&#20040;&#21487;
&#20197;&#29992;&#25105;&#20204;&#30340;&#36807;&#31243;&#21028;&#26029;&#23427;&#26159;&#21542;&#23646;&#20110; <span class="texMathInline">S</span>&#12290;&#22914;&#26524;&#19981;&#26159;&#65292;&#37027;&#20040; <span class="texMathInline">n</span> &#19981;&#21487;&#33021;&#23646;&#20110; <span class="texMathInline">S</span>&#12290;</p><p><span class="texMathInline">S</span> &#21448;&#33021;&#22815;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="EoplDefinition"><p><a name="(elem._d1..1..2)"></a><span class="hspace">&nbsp;</span>&#38598;&#21512; <span class="texMathInline">S</span> &#20026; <span class="texMathInline">N</span> &#25152;&#21253;&#21547;&#30340;&#38598;&#21512;&#20013;&#65292;&#28385;&#36275;&#22914;&#19979;&#20004;&#26465;&#24615;&#36136;&#30340;&#26368;&#23567;&#38598;&#21512;&#65306;<a name="(idx._(gentag._13))"></a></p><ol><li><p><span class="texMathInline">0 \in S</span>&#65292;&#19988;</p></li><li><p>&#33509; <span class="texMathInline">n \in S</span>&#65292;&#21017; <span class="texMathInline">n + 3 \in S</span>&#12290;</p></li></ol></blockquote><p>&#8220;&#26368;&#23567;&#38598;&#21512;&#8221;&#26159;&#25351;&#35813;&#38598;&#21512;&#28385;&#36275;&#24615;&#36136; 1 &#21644; 2&#65292;&#24182;&#19988;&#26159;&#20854;&#20182;&#20219;&#20309;
&#28385;&#36275;&#24615;&#36136; 1 &#21644; 2 &#30340;&#38598;&#21512;&#30340;&#23376;&#38598;&#12290;&#26131;&#30693;&#21482;&#33021;&#26377;&#19968;&#20010;&#36825;&#26679;&#30340;&#38598;&#21512;&#65306;&#22914;&#26524; <span class="texMathInline">S_1</span> &#21644; <span class="texMathInline">S_2</span>
&#37117;&#28385;&#36275;&#24615;&#36136; 1 &#21644; 2&#65292;&#24182;&#19988;&#37117;&#20026;&#26368;&#23567;&#65292;&#37027;&#20040; <span class="texMathInline">S_1 \subseteq S_2</span>&#65288;&#22240;&#20026; <span class="texMathInline">S_1</span> &#26368;&#23567;&#65289;
&#19988; <span class="texMathInline">S_2 \subseteq S_1</span>&#65288;&#22240;&#20026; <span class="texMathInline">S_2</span> &#26368;&#23567;&#65289;&#65292;&#22240;&#27492; <span class="texMathInline">S_1 = S_2</span>&#12290;&#20043;&#25152;&#20197;&#38656;&#35201;&#36825;
&#19968;&#39069;&#22806;&#26465;&#20214;&#65292;&#26159;&#22240;&#20026;&#21542;&#21017;&#30340;&#35805;&#23558;&#26377;&#35768;&#22810;&#38598;&#21512;&#28385;&#36275;&#20854;&#20182;&#20004;&#20010;&#26465;&#20214;&#65288;&#35265;&#65289;&#12290;</p><p>&#35813;&#23450;&#20041;&#36824;&#33021;&#34920;&#31034;&#20026;&#65306;</p><p><span class="texMathDisplay">\infer{0 \in S}{}</span></p><p><span class="texMathDisplay">\infer{(n + 3) \in S}{n \in S}</span></p><p><a name="(idx._(gentag._14))"></a>
&#36825;&#21482;&#26159;&#21069;&#19968;&#23450;&#20041;&#30340;&#31616;&#20415;&#34920;&#31034;&#12290;&#27599;&#20010;&#26465;&#30446;&#31216;&#20026;&#19968;&#26465;<span class="emph">&#25512;&#29702;&#35268;&#21017;</span> (<span class="emph">rule of inference</span>)&#65292;
&#25110;&#31216;<span class="emph">&#35268;&#21017;</span> (<span class="emph">rule</span>)&#65307;&#27700;&#24179;&#32447;&#35835;&#20316;&#8220;&#33509;-&#21017;&#8221;&#12290;&#32447;&#19978;&#37096;&#20998;
&#31216;&#20316;<span class="emph">&#20551;&#35774;</span> (<span class="emph">hypothesis</span>)&#25110;&#32773;<a name="(idx._(gentag._15))"></a><span class="emph">&#21069;&#20214;</span> (<span class="emph">antecedent</span>)&#65307;
<a name="(idx._(gentag._16))"></a>
<a name="(idx._(gentag._17))"></a>
<a name="(idx._(gentag._18))"></a>
&#32447;&#19979;&#37096;&#20998;&#31216;&#20316;<span class="emph">&#32467;&#35770;</span> (<span class="emph">conclusion</span>) &#25110;&#32773;<span class="emph">&#21518;&#20214;</span> (<span class="emph">consequent</span>)&#12290;&#32599;&#21015;&#20004;&#20010;&#25110;
&#26356;&#22810;&#20551;&#35774;&#26102;&#65292;&#23427;&#20204;&#20197;&#38544;&#21547;&#30340;&#8220;&#19982;&#8221;&#36830;&#25509;&#65288;&#35265;&#65289;&#12290;
&#19981;&#21547;&#20551;&#35774;&#30340;&#35268;&#21017;&#31216;&#20316;<a name="(idx._(gentag._19))"></a><span class="emph">&#20844;&#29702;</span> (<span class="emph">axiom</span>)&#12290;&#20889;&#20844;&#29702;&#26102;&#36890;&#24120;&#19981;&#21152;&#27700;&#24179;
&#32447;&#65292;&#22914;&#65306;</p><p><span class="texMathDisplay">0 \in S</span></p><p>&#35813;&#35268;&#21017;&#24847;&#20026;&#65292;&#33258;&#28982;&#25968; <span class="texMathInline">n</span> &#23646;&#20110; <span class="texMathInline">S</span>&#65292;&#24403;&#19988;&#20165;&#24403;&#33021;&#29992;&#26377;&#38480;&#27425;&#25512;&#29702;&#35268;&#21017;&#65292;&#20174;&#20844;&#29702;&#25512;&#24471;&#38472;&#36848;
&#8220;<span class="texMathInline">n \in S</span>&#8221;&#12290;&#36825;&#19968;&#35299;&#37322;&#33258;&#28982;&#20351; <span class="texMathInline">S</span> &#25104;&#20026;&#38381;&#21512;&#20110;&#35813;&#35268;&#21017;
&#30340;&#26368;&#23567;&#38598;&#21512;&#12290;</p><p><a name="(idx._(gentag._20))"></a>
<a name="(idx._(gentag._21))"></a>
&#36825;&#20123;&#23450;&#20041;&#24847;&#24605;&#30456;&#21516;&#12290;&#25105;&#20204;&#25226;&#29256;&#26412;&#19968;&#31216;&#20316;<span class="emph">&#33258;&#39030;&#21521;&#19979;</span> (<span class="emph">top-down</span>) &#30340;&#23450;&#20041;&#65292;&#29256;&#26412;&#20108;
&#31216;&#20316;<span class="emph">&#33258;&#24213;&#21521;&#19978;</span> (<span class="emph">bottom-up</span>) &#30340;&#23450;&#20041;&#65292;&#29256;&#26412;&#19977;&#31216;&#20316;<span class="emph">&#25512;&#29702;&#35268;&#21017;</span>&#23450;&#20041;&#12290;
<a name="(idx._(gentag._22))"></a></p><p>&#20877;&#26469;&#30475;&#20960;&#20010;&#36816;&#29992;&#36825;&#20123;&#30340;&#20363;&#23376;&#12290;</p><p><div class="SIntrapara"><a name="(idx._(gentag._23))"></a>
</div><div class="SIntrapara"><blockquote class="EoplDefinition"><p><div class="SIntrapara"><a name="(elem._d1..1..3)"></a><span class="EoplDefinitionTitle">&#25972;&#25968;&#21015;&#34920;&#65292;&#33258;&#39030;&#21521;&#19979;</span>Scheme&#21015;&#34920;&#26159;&#25972;&#25968;&#21015;&#34920;&#65292;&#24403;&#19988;&#20165;&#24403;&#65306;
</div><div class="SIntrapara"><ol><li><p>&#21015;&#34920;&#20026;&#31354;&#65292;&#25110;</p></li><li><p>&#21015;&#34920;&#20026;&#24207;&#23545;&#65292;&#39318;&#39033;&#20026;&#25972;&#25968;&#65292;&#20313;&#39033;&#20026;&#25972;&#25968;&#21015;&#34920;&#12290;</p></li></ol></div></p></blockquote></div></p><p>&#25105;&#20204;&#29992; <span class="texMathInline">\mathit{Int}</span> &#34920;&#31034;&#25152;&#26377;&#25972;&#25968;&#30340;&#38598;&#21512;&#65292;&#29992; <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> &#34920;&#31034;&#25152;&#26377;&#25972;&#25968;&#21015;&#34920;&#30340;&#38598;&#21512;&#12290;</p><blockquote class="EoplDefinition"><p><a name="(elem._d1..1..4)"></a><span class="EoplDefinitionTitle">&#25972;&#25968;&#21015;&#34920;&#65292;&#33258;&#24213;&#21521;&#19978;</span>&#38598;&#21512;<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>&#26159;&#28385;&#36275;&#22914;&#19979;&#20004;&#26465;&#24615;&#36136;&#30340;&#26368;&#23567;Scheme&#21015;&#34920;&#38598;&#21512;&#65306;</p><ol><li><p><span class="texMathInline">\textnormal{<span class="stt">()</span>} \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span></span>&#65292;&#25110;</p></li><li><p>&#33509; <span class="texMathInline">n \in \mathit{Int}</span> &#19988; <span class="texMathInline">l \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span></span>&#65292;&#21017;
<span class="texMathInline">\textnormal{\texttt{(}}n\phantom{x}.\phantom{x}l\textnormal{\texttt{)}} \in
<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span></span>&#12290;</p></li></ol></blockquote><p><a name="(idx._(gentag._24))"></a>
&#36825;&#37324;&#65292;&#25105;&#20204;&#29992;&#20013;&#32512;&#8220;<span class="stt">.</span>&#8221;&#20195;&#34920; Scheme &#20013; <span class="stt">cons</span> &#25805;
&#20316;&#30340;&#32467;&#26524;&#12290;&#24335;&#23376; <span class="stt">(</span><span class="texMathInline">n</span><span class="stt"> . </span><span class="texMathInline">l</span><span class="stt">)</span> &#20195;&#34920; Scheme &#24207;&#23545;&#30340;&#39318;&#39033;&#20026; <span class="texMathInline">n</span>&#65292;&#20313;&#39033;&#20026; <span class="texMathInline">l</span>&#12290;</p><blockquote class="EoplDefinition"><p><div class="SIntrapara"><a name="(elem._d1..1..5)"></a><span class="EoplDefinitionTitle">&#25972;&#25968;&#21015;&#34920;&#65292;&#25512;&#29702;&#35268;&#21017;</span></div><div class="SIntrapara"><blockquote class="NormalFont"><p><a name="(idx._(gentag._25))"></a>
<span class="texMathDisplay">\infer{<span class="stt">()</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>}{}</span></p><p><span class="texMathDisplay">\infer{<span class="stt">(</span><span class="texMathInline">n</span><span class="stt"> . </span><span class="texMathInline">l</span><span class="stt">)</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>}{n \in \mathit{Int} &amp; l \in
<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>}</span></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._26))"></a></div></p></blockquote><p>&#36825;&#19977;&#20010;&#23450;&#20041;&#31561;&#20215;&#12290;&#26469;&#30475;&#30475;&#22914;&#20309;&#29992;&#23427;&#20204;&#29983;&#25104;&#19968;&#20123; <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> &#30340;&#20803;&#32032;&#12290;</p><ol><li><p>&#30001; &#30340;&#24615;&#36136; 1 &#25110; &#30340;&#35268;&#21017; 1&#65292;
<span class="stt">()</span> &#26159;&#25972;&#25968;&#21015;&#34920;&#12290;</p></li><li><p>&#30001; &#30340;&#24615;&#36136; 2&#65292;<span class="stt">(14 . ())</span> &#26159;&#25972;&#25968;&#21015;&#34920;&#12290;&#22240;&#20026;
<span class="stt">14</span> &#26159;&#25972;&#25968;&#65292;<span class="stt">()</span> &#26159;&#25972;&#25968;&#21015;&#34920;&#12290;&#20889;&#25104; <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> &#35268;&#21017;&#20108;&#30340;&#24418;&#24335;&#65292;
&#23601;&#26159;</p><p><span class="texMathDisplay">\infer{<span class="stt">(14 . ())</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>} {<span class="stt">14</span> \in \mathit{Int}
&amp; <span class="stt">()</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>}</span></p></li><li><p>&#30001; &#30340;&#24615;&#36136; 2&#65292;<span class="stt">(3 . (14 . ()))</span> &#26159;&#25972;&#25968;&#21015;&#34920;&#12290;&#22240;&#20026;
<span class="stt">3</span> &#26159;&#25972;&#25968;&#65292;<span class="stt">(14 . ())</span> &#26159;&#25972;&#25968;&#21015;&#34920;&#12290;&#20173;&#20889;&#25104;<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> &#35268;&#21017;&#20108;&#30340;
&#24418;&#24335;&#65292;&#26159;</p><p><span class="texMathDisplay">\infer{<span class="stt">(3 . (14 . ()))</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>} {<span class="stt">3</span> \in
\mathit{Int} &amp; <span class="stt">(14 . ())</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>}</span></p></li><li><p>&#30001; &#30340;&#24615;&#36136; 2&#65292;<span class="stt">(-7 . (3 . (14 . ())))</span> &#26159;&#25972;&#25968;&#21015;
&#34920;&#12290;&#22240;&#20026; <span class="stt">-7</span> &#26159;&#25972;&#25968;&#65292;<span class="stt">(3 . (14 . ()))</span> &#26159;&#25972;&#25968;&#21015;&#34920;&#12290;&#20877;&#27425;&#20889;&#25104;
<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> &#35268;&#21017;&#20108;&#30340;&#24418;&#24335;&#65292;&#26159;</p><p><span class="texMathDisplay">\infer{\hphantom{\texttt{x}}<span class="stt">(-7 . (3 . (14 . ())))</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>\hphantom{\texttt{x}}}
      {<span class="stt">-7</span> \in \mathit{Int} &amp; <span class="stt">(3 . (14 . ()))</span>\in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>}</span></p></li><li><p>&#19981;&#25353;&#29031;&#36825;&#31181;&#26041;&#24335;&#24471;&#21040;&#30340;&#37117;&#19981;&#26159;&#25972;&#25968;&#21015;&#34920;&#12290;</p></li></ol><p>&#25913;&#21477;&#28857;&#34920;&#31034;&#27861;&#20026;&#21015;&#34920;&#34920;&#31034;&#27861;&#65292;&#21487;&#30693; <span class="stt">()</span>&#12289; <span class="stt">(14)</span>&#12289; <span class="stt">(3 14)</span> &#20197;&#21450; <span class="stt">(-7 3
14)</span> &#37117;&#26159; <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> &#30340;&#20803;&#32032;&#12290;</p><p>&#36824;&#21487;&#20197;&#32467;&#21512;&#21508;&#26465;&#35268;&#21017;&#26469;&#35777;&#26126; <span class="texMathInline"><span class="stt">(-7 . (3 . (14 . ())))</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span></span>&#65292;
&#20197;&#35265;&#20986;&#25972;&#20010;&#25512;&#29702;&#36807;&#31243;&#12290;&#19979;&#38754;&#30340;&#26641;&#29366;&#22270;&#21483;&#20570;<a name="(elem._deriv-tree)"></a><span class="emph">&#25512;&#23548;</span> (<span class="emph">derivation</span>)
&#25110;<span class="emph">&#25512;&#29702;&#26641;</span> (<span class="emph">deduction tree</span>)&#12290;
<a name="(idx._(gentag._27))"></a>
<a name="(idx._(gentag._28))"></a></p><p><span class="texMathDisplay">\infer{\hphantom{\texttt{xx}}<span class="stt">(-7 . (3 . (14 . ())))</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>\hphantom{\texttt{xx}}}
      {<span class="stt">-7</span> \in \mathit{Int} \hphantom{\texttt{x}} &amp;
       \infer{\hphantom{\texttt{x}}<span class="stt">(3 . (14 . ()))</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>\hphantom{\texttt{x}}}
             {<span class="stt">3</span> \in \mathit{Int} &amp;
              \infer{<span class="stt">(14 . ())</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>}
                    {<span class="stt">14</span> \in \mathit{Int} &amp; <span class="stt">()</span> \in <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>}}
      }</span>
<a name="(idx._(gentag._29))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex1..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986;&#19979;&#21015;&#38598;&#21512;&#30340;&#24402;&#32435;&#23450;&#20041;&#12290;&#20197;&#19977;&#31181;&#26041;&#24335;&#65288;&#33258;&#39030;&#21521;&#19979;&#65292;&#33258;&#24213;&#21521;&#19978;&#65292;&#25512;&#29702;&#35268;&#21017;&#65289;&#20889;&#20986;&#27599;&#20010;&#23450;
&#20041;&#65292;&#24182;&#29992;&#20320;&#30340;&#35268;&#21017;&#25512;&#23548;&#20986;&#21508;&#38598;&#21512;&#30340;&#19968;&#20123;&#20803;&#32032;&#12290;</p><ol><li><p><span class="Iidentity">$\{ 3n + 2 \mid n \in N \}$</span></p></li><li><p><span class="Iidentity">$\{ 2n + 3m + 1 \mid n, m \in N \}$</span></p></li><li><p><span class="Iidentity">$\{ (n, 2n + 1) \mid n \in N \}$</span></p></li><li><p><span class="Iidentity">$\{ (n, n^2) \mid n \in N \}$</span>&#12290;&#19981;&#35201;&#22312;&#20320;&#30340;&#35268;&#21017;&#20013;&#20351;&#29992;&#24179;&#26041;&#12290;&#25552;&#31034;&#65306;&#24819;&#19968;&#24819;
&#26041;&#31243; <span class="Iidentity">$ (n + 1) ^ 2 = n ^ 2 + 2n + 1$</span>&#12290;</p></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..2)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19979;&#38754;&#30340;&#20960;&#23545;&#35268;&#21017;&#20998;&#21035;&#23450;&#20041;&#20102;&#20160;&#20040;&#38598;&#21512;&#65311;&#32473;&#20986;&#35299;&#37322;&#12290;</p><ol><li><p><span class="Iidentity">$(0, 1) \in S \qquad \infer{(n + 1, k + 7) \in S}{(n, k) \in S}$</span></p></li><li><p><span class="Iidentity">$(0, 1) \in S \qquad \infer{(n + 1, 2k) \in S}{(n, k) \in S}$</span></p></li><li><p><span class="Iidentity">$(0, 0, 1) \in S \qquad \infer{(n + 1, j, i + j) \in S}{(n, i, j) \in S}$</span></p></li><li><p><span class="Iidentity">$\text{[}\mathord{\star}\mathord{\star}\mathord{\star}\text{]}$</span>
<span class="Iidentity">$\quad$</span> <span class="Iidentity">$(0, 1, 0) \in S \qquad \infer{(n + 1, i + 2, i + j) \in S}{(n, i,
j) \in S}$</span></p></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..3)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._30))"></a>
&#25214;&#20986;&#33258;&#28982;&#25968;&#30340;&#23376;&#38598; <span class="Iidentity">$T$</span>&#65292;&#28385;&#36275; <span class="Iidentity">$0 \in T$</span>&#65292;&#19988;&#23545;&#20219;&#20309; <span class="Iidentity">$n \in T$</span>&#65292;&#37117;&#26377; <span class="Iidentity">$n + 3
\in T$</span>&#65292;&#20294; <span class="Iidentity">$T \neq S$</span>&#65292;<span class="Iidentity">$S$</span> &#26159;&#30001; &#32473;&#20986;&#30340;&#38598;&#21512;&#12290;
<a name="(idx._(gentag._31))"></a></p></blockquote><h5 class="heading">1.1.2<tt>&nbsp;</tt><a name="(part._s1..1..2)"></a>&#35821;&#27861;&#23450;&#20041;&#27861;<span class="button-group"><a href="#(part._s1..1..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._32))"></a>
&#21069;&#36848;&#20363;&#23376;&#36739;&#20026;&#30452;&#35266;&#65292;&#20294;&#26159;&#19981;&#38590;&#24819;&#35937;&#65292;&#25551;&#36848;&#26356;&#22797;&#26434;&#30340;&#25968;&#25454;&#31867;&#22411;&#20250;&#26377;&#22810;&#40635;&#28902;&#12290;&#20026;&#20102;&#26041;&#20415;&#65292;&#25105;&#20204;&#23637;
&#31034;&#22914;&#20309;&#29992;<span class="emph">&#35821;&#27861;</span> (<span class="emph">grammar</span>) &#23450;&#20041;&#38598;&#21512;&#12290;&#35821;&#27861;&#36890;&#24120;&#29992;&#26469;&#25351;&#23450;&#23383;&#31526;&#20018;&#30340;&#38598;&#21512;&#65292;&#20294;&#20063;&#33021;&#29992;
&#26469;&#23450;&#20041;&#20540;&#30340;&#38598;&#21512;&#12290;</p><p><a name="(idx._(gentag._33))"></a>
&#20363;&#22914;&#65292;&#38598;&#21512; <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> &#21487;&#29992;&#35821;&#27861;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{List\mbox{-}of\mbox{-}Int} &amp;::= <span class="stt">()</span> \\[-3pt]
\mathit{List\mbox{-}of\mbox{-}Int} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt"> . </span><span class="Iidentity">\mathit{List\mbox{-}of\mbox{-}Int}</span><span class="stt">)</span>\end{align*}</span></p></blockquote><p>&#36825;&#20004;&#26465;&#35268;&#21017;&#23545;&#24212;&#19978;&#36848; &#20013;&#30340;&#20004;&#26465;&#24615;&#36136;&#12290;&#35268;&#21017;&#19968;&#26159;&#35828;&#31354;&#34920;&#23646;&#20110;
<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>&#65307;&#35268;&#21017;&#20108;&#26159;&#35828;&#65292;&#33509; <span class="texMathInline">n</span> &#23646;&#20110; <span class="texMathInline">\mathit{Int}</span> &#19988; <span class="texMathInline">l</span> &#23646;&#20110;
<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>&#65292;&#21017; <span class="stt">(</span><span class="texMathInline">n</span><span class="stt"> . </span><span class="texMathInline">l</span><span class="stt">)</span> &#23646;&#20110; <span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span>&#12290;&#36825;&#20123;&#35268;&#21017;
&#21483;&#20570;<span class="emph">&#35821;&#27861;</span>&#12290;</p><p>&#26469;&#30475;&#30475;&#35813;&#23450;&#20041;&#30340;&#21508;&#20010;&#37096;&#20998;&#65292;&#20854;&#20013;&#26377;&#65306;</p><ul><li><p><span style="font-weight: bold">&#38750;&#32456;&#32467;&#31526;</span>&#12290;&#36825;&#20123;&#26159;&#25152;&#23450;&#20041;&#30340;&#38598;&#21512;&#21517;&#12290;&#26412;&#20363;&#20013;&#21482;&#23450;&#20041;&#20102;&#19968;&#20010;&#38598;&#21512;&#65292;&#20294;&#26159;&#36890;&#24120;&#65292;
&#21487;&#33021;&#20250;&#23450;&#20041;&#25968;&#20010;&#38598;&#21512;&#12290;&#36825;&#20123;&#38598;&#21512;&#26377;&#26102;&#31216;&#20026;<span class="emph">&#21477;&#27861;&#31867;&#21035;</span> (<span class="emph">syntactic category</span>)&#12290;
<a name="(idx._(gentag._34))"></a>
<a name="(idx._(gentag._35))"></a></p><p>&#20381;&#29031;&#24815;&#20363;&#65292;&#25105;&#20204;&#23558;&#38750;&#32456;&#32467;&#31526;&#21644;&#38598;&#21512;&#21517;&#30340;&#39318;&#23383;&#27597;&#22823;&#20889;&#65292;&#22312;&#25991;&#20013;&#25552;&#21450;&#23427;&#20204;&#30340;&#20803;&#32032;&#26102;&#65292;&#21017;
&#29992;&#23567;&#20889;&#12290;&#36825;&#35201;&#27604;&#21548;&#36215;&#26469;&#23481;&#26131;&#12290;&#20363;&#22914;&#65292; <span class="texMathInline">\mathit{Expression}</span> &#26159;&#38750;&#32456;&#32467;&#31526;&#65292;&#20294;
&#25105;&#20204;&#20889;&#20316; <span class="texMathInline">e \in \mathit{Expression}</span> &#25110; &#8220;<span class="texMathInline">e</span> &#26159;&#19968;&#20010;
expression&#8221;&#12290;</p><p>&#21478;&#19968;&#24120;&#35265;&#20889;&#27861;&#65292;&#21517;&#21483;<span class="emph">&#24052;&#31185;&#26031;-&#35834;&#23572;&#33539;
&#24335;</span> (<span class="emph">Backus-Naur Form</span>)<a name="(idx._(gentag._36))"></a> &#25110;<span class="emph">BNF</span>&#65292;&#26159;&#22312;&#35789;&#21608;&#22260;&#21152;
&#23574;&#25324;&#21495;&#65292;&#22914;<span class="texMathInline">\langle</span>expression<span class="texMathInline">\rangle</span>&#12290;</p></li><li><p><span style="font-weight: bold">&#32456;&#32467;&#31526;</span>&#12290;&#36825;&#20123;&#26159;&#38598;&#21512;&#22806;&#22312;&#34920;&#31034;&#20013;&#30340;&#23383;&#31526;&#65292;&#22312;&#26412;&#20363;&#20013;&#65292;&#26159;
&#8220;<span class="stt">.</span>&#8221;&#12289;
&#8220;<span class="stt">(</span>&#8221;&#21644;
&#8220;<span class="stt">)</span>&#8221;&#12290;&#36825;&#20123;&#24120;&#29992;&#25171;&#23383;&#26426;&#23383;&#20307;&#20889;&#20986;&#65292;&#22914;
<span class="stt">lambda</span>&#12290;<a name="(idx._(gentag._37))"></a></p></li><li><p><span style="font-weight: bold">&#29983;&#25104;&#24335;</span>&#12290;&#35268;&#21017;&#21483;&#20570;<span class="emph">&#29983;&#25104;&#24335;</span> (<span class="emph">production</span>)&#12290;
<a name="(idx._(gentag._38))"></a>&#27599;&#20010;&#29983;&#25104;&#24335;&#30340;&#24038;&#36793;&#26159;&#19968;&#20010;&#38750;&#32456;&#32467;&#31526;&#65292;&#21491;&#36793;
&#21253;&#21547;&#32456;&#32467;&#31526;&#21644;&#38750;&#32456;&#32467;&#31526;&#12290;&#24038;&#21491;&#20004;&#36793;&#36890;&#24120;&#29992;&#31526;&#21495; <span class="texMathInline">::=</span>&#20998;&#38548;&#65292;&#35835;&#20316;<span class="emph">&#26159;</span>
&#25110;<span class="emph">&#21487;&#20197;&#26159;</span>&#12290;&#24335;&#23376;&#21491;&#36793;&#29992;&#20854;&#20182;&#21477;&#27861;&#31867;&#21035;&#21644;<span class="emph">&#32456;&#32467;&#31526;</span>&#65288;&#22914;&#24038;&#25324;&#21495;&#12289;
&#21491;&#25324;&#21495;&#21644;&#21477;&#28857;&#65289;&#25351;&#23450;&#19968;&#31181;&#26041;&#27861;&#65292;&#29992;&#20197;&#26500;&#24314;&#24403;&#21069;&#21477;&#27861;&#31867;&#21035;&#30340;&#20803;&#32032;&#12290;</p></li></ul><p>&#22914;&#26524;&#26576;&#20123;&#21477;&#27861;&#31867;&#21035;&#30340;&#21547;&#20041;&#22312;&#19978;&#19979;&#25991;&#20013;&#36275;&#22815;&#28165;&#26224;&#65292;&#22312;&#29983;&#25104;&#24335;&#20013;&#25552;&#21040;&#23427;&#20204;&#26102;&#36890;&#24120;&#19981;&#20316;&#23450;&#20041;&#65292;&#22914;
<span class="texMathInline">\mathit{Int}</span>&#12290;</p><p>&#35821;&#27861;&#24120;&#24120;&#31616;&#20889;&#12290;&#24403;&#19968;&#20010;&#29983;&#25104;&#24335;&#30340;&#24038;&#36793;&#19982;&#21069;&#19968;&#29983;&#25104;&#24335;&#30456;&#21516;&#26102;&#65292;&#19968;&#33324;&#20250;&#30053;&#21435;&#12290;&#26681;&#25454;&#36825;&#19968;&#24815;&#20363;&#65292;&#25105;
&#20204;&#30340;&#35821;&#27861;&#21487;&#20197;&#20889;&#20316;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{List\mbox{-}of\mbox{-}Int} &amp;::= <span class="stt">()</span> \\[-3pt]
                   &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt"> . </span><span class="Iidentity">\mathit{List\mbox{-}of\mbox{-}Int}</span><span class="stt">)</span>\end{align*}</span></p></blockquote><p>&#32473;&#21516;&#19968;&#21477;&#27861;&#31867;&#21035;&#32534;&#20889;&#19968;&#32452;&#35268;&#21017;&#26102;&#65292;&#20063;&#21487;&#20197;&#21482;&#20889;&#19968;&#27425; <span class="texMathInline">::=</span> &#21644;&#24038;&#36793;&#20869;&#23481;&#65292;&#38543;&#21518;&#30340;&#21508;&#20010;&#21491;&#36793;
&#20869;&#23481;&#29992;&#29305;&#27530;&#31526;&#21495;&#8220;<span class="texMathInline">\mid</span>&#8221;&#65288;&#31446;&#32447;&#65292;&#35835;&#20316;<span class="emph">&#25110;</span><a name="(idx._(gentag._39))"></a>&#65289;
&#20998;&#38548;&#12290;&#29992;&#8220;<span class="texMathInline">\mid</span>&#8221;&#65292;<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> &#30340;&#35821;&#27861;&#21487;&#20889;&#25104;&#65306;</p><p><span class="texMathDisplay"><span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> ::= <span class="stt">()</span> <span class="texMathDisplay">\mid</span> <span class="stt">(</span><span class="texMathInline">\mathit{Int}</span><span class="stt"> . </span><span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span><span class="stt">)</span></span>
<a name="(idx._(gentag._40))"></a></p><p><a name="(idx._(gentag._41))"></a>
&#21478;&#19968;&#31181;&#31616;&#20889;&#26159;<a name="(elem._kleene-star)"></a><span class="emph">&#20811;&#33713;&#23612;&#26143;&#21495;</span> (<span class="emph">Kleene Star</span>)&#65292;&#20889;&#20316;
<span class="texMathInline">\{...\}^*</span>&#12290;&#24403;&#23427;&#20986;&#29616;&#22312;&#21491;&#36793;&#26102;&#65292;&#34920;&#31034;&#19968;&#20010;&#24207;&#21015;&#65292;&#30001;&#20219;&#24847;&#22810;&#20010;&#33457;&#25324;&#21495;&#20043;&#38388;&#30340;&#20869;&#23481;&#32452;&#25104;&#12290;
&#29992;&#20811;&#33713;&#23612;&#26143;&#21495;&#65292;<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> &#30340;&#23450;&#20041;&#21487;&#20197;&#31616;&#20889;&#20026;</p><p><span class="texMathDisplay"><span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Int}</span> ::= <span class="stt">(</span><span class="texMathInline">\{\mathit{Int}\}^*</span><span class="stt">)</span></span></p><p>&#36825;&#20063;&#21253;&#21547;&#27809;&#26377;&#20219;&#20309;&#20869;&#23481;&#30340;&#24773;&#20917;&#12290;&#22914;&#26524;&#20869;&#23481;&#20986;&#29616; 0 &#27425;&#65292;&#24471;&#21040;&#30340;&#26159;&#31354;&#23383;&#31526;&#20018;&#12290;</p><p><a name="(idx._(gentag._42))"></a>
&#26143;&#21495;&#30340;&#21464;&#20307;&#26159;<span class="emph">&#20811;&#33713;&#23612;&#21152;&#21495;</span> (<span class="emph">Kleene Plus</span>) <span class="texMathInline">\{...\}^+</span>&#65292;&#34920;&#31034;&#19968;&#20010;&#25110;&#22810;&#20010;&#20869;&#23481;&#30340;
&#24207;&#21015;&#12290;&#25226;&#19978;&#20363;&#20013;&#30340; <span class="texMathInline">^*</span> &#25442;&#25104; <span class="texMathInline">^+</span>&#65292;&#23450;&#20041;&#30340;&#21477;&#27861;&#31867;&#21035;&#26159;&#38750;&#31354;&#25972;&#25968;&#21015;&#34920;&#12290;</p><p><a name="(idx._(gentag._43))"></a>
&#26143;&#21495;&#30340;&#21478;&#19968;&#21464;&#20307;&#26159;<span class="emph">&#20998;&#38548;&#34920;</span> (<span class="emph">separated list</span>) &#34920;&#31034;&#27861;&#12290;&#20363;&#22914;&#65292;
<span class="texMathInline">\mathit{Int}^{*(c)}</span> &#34920;&#31034;&#19968;&#20010;&#24207;&#21015;&#65292;&#21253;&#21547;&#20219;&#24847;&#25968;&#37327;&#30340;&#38750;&#32456;&#32467;&#31526; <span class="texMathInline">\mathit{Int}</span> &#20803;&#32032;&#65292;&#20197;&#38750;
&#31354;&#23383;&#31526;&#24207;&#21015; <span class="texMathInline">c</span> &#20998;&#38548;&#12290;&#36825;&#20063;&#21253;&#21547;&#27809;&#26377;&#20803;&#32032;&#30340;&#24773;&#20917;&#12290;&#22914;&#26524;&#26377; 0 &#20010;&#20803;&#32032;&#65292;&#24471;&#21040;&#30340;&#26159;&#31354;&#23383;&#31526;&#20018;&#12290;
&#20363;&#22914;&#65292;<span class="texMathInline">\mathit{Int}^{*(,)}</span> &#21253;&#21547;&#23383;&#31526;&#20018;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">8</span></p></td></tr><tr><td><p><span class="stt">14, 12</span></p></td></tr><tr><td><p><span class="stt">7, 3, 14, 16</span></p></td></tr></table></blockquote><p><span class="texMathInline">\mathit{Int}^{*(;)}</span> &#21253;&#21547;&#23383;&#31526;&#20018;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">8</span></p></td></tr><tr><td><p><span class="stt">14; 12</span></p></td></tr><tr><td><p><span class="stt">7; 3; 14; 16</span></p></td></tr></table></div><div class="SIntrapara"><a name="(idx._(gentag._44))"></a></div></p></blockquote></blockquote><p>&#36825;&#20123;&#31616;&#20889;&#19981;&#26159;&#24517;&#38656;&#30340;&#65292;&#24635;&#33021;&#22815;&#19981;&#29992;&#23427;&#20204;&#37325;&#20889;&#35821;&#27861;&#12290;</p><p><a name="(idx._(gentag._45))"></a>
<a name="(idx._(gentag._46))"></a>
&#23545;&#30001;&#35821;&#27861;&#23450;&#20041;&#30340;&#38598;&#21512;&#65292;&#21487;&#20197;&#29992;<span class="emph">&#21477;&#27861;&#25512;&#23548;</span> (<span class="emph">syntactic derivation</span>) &#35777;&#26126;&#32473;&#23450;&#20540;&#26159;&#20854;
&#20803;&#32032;&#12290;&#36825;&#26679;&#30340;&#25512;&#23548;&#20174;&#38598;&#21512;&#23545;&#24212;&#30340;&#38750;&#32456;&#32467;&#31526;&#24320;&#22987;&#65292;&#22312;&#30001;&#31661;&#22836;<span class="texMathInline">\Rightarrow</span> &#25351;&#31034;&#30340;&#27599;&#19968;&#27493;&#20013;&#65292;
&#22914;&#26524;&#38750;&#32456;&#32467;&#31526;&#23545;&#24212;&#30340;&#21477;&#27861;&#31867;&#21035;&#26410;&#20570;&#23450;&#20041;&#65292;&#21017;&#23558;&#20854;&#20195;&#25442;&#20026;&#35813;&#31867;&#21035;&#30340;&#24050;&#30693;&#20803;&#32032;&#65292;&#21542;&#21017;&#20195;&#25442;&#20026;&#23545;&#24212;
&#35268;&#21017;&#21491;&#36793;&#30340;&#20869;&#23481;&#12290;&#20363;&#22914;&#65292;&#21069;&#36848;&#35777;&#26126;&#8220;<span class="stt">(14 . ())</span> &#26159;&#25972;&#25968;&#21015;&#34920;
&#8221;&#65292;&#21487;&#20197;&#29992;&#21477;&#27861;&#25512;&#23548;&#21270;&#20026;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{List\mbox{-}of\mbox{-}Int} &amp;\Rightarrow <span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt"> . </span><span class="Iidentity">\mathit{List\mbox{-}of\mbox{-}Int}</span><span class="stt">)</span> \\[-3pt]
                   &amp;\Rightarrow <span class="stt">(14 . </span><span class="Iidentity">\mathit{List\mbox{-}of\mbox{-}Int}</span><span class="stt">)</span> \\[-3pt]
                   &amp;\Rightarrow <span class="stt">(14 . ())</span>\end{align*}</span></p></blockquote><p>&#38750;&#32456;&#32467;&#31526;&#30340;&#26367;&#25442;&#39034;&#24207;&#26080;&#20851;&#32039;&#35201;&#65292;&#25152;&#20197; <span class="stt">(14 . ())</span> &#30340;&#25512;&#23548;&#20063;&#21487;&#20197;&#20889;&#25104;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{List\mbox{-}of\mbox{-}Int} &amp;\Rightarrow <span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt"> . </span><span class="Iidentity">\mathit{List\mbox{-}of\mbox{-}Int}</span><span class="stt">)</span> \\[-3pt]
                   &amp;\Rightarrow <span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt"> . ())</span> \\[-3pt]
                   &amp;\Rightarrow <span class="stt">(14 . ())</span>\end{align*}</span></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..4)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986;&#20174; <span class="Iidentity">$\mathit{List\mbox{-}of\mbox{-}Int}$</span> &#21040; <span class="stt">(-7 . (3 . (14 ())))</span> &#30340;&#25512;&#23548;&#12290;<br/></p></blockquote><p>&#20877;&#26469;&#30475;&#19968;&#20123;&#26377;&#29992;&#38598;&#21512;&#30340;&#23450;&#20041;&#12290;</p><ol><li><p><a name="(idx._(gentag._47))"></a>
<a name="(idx._(gentag._48))"></a>
&#35768;&#22810;&#31526;&#21495;&#25805;&#20316;&#36807;&#31243;&#29992;&#20110;&#22788;&#29702;&#21482;&#21253;&#21547;&#31526;&#21495;&#21644;&#20855;&#26377;&#31867;&#20284;&#38480;&#21046;&#30340;&#21015;&#34920;&#12290;&#25105;&#20204;&#25226;&#36825;&#20123;&#21483;&#20570;
<span class="stt">s-list</span>&#65292;&#23450;&#20041;&#22914;&#19979;&#65306;</p><blockquote class="EoplDefinition"><p><div class="SIntrapara"><a name="(elem._d1..1..6)"></a><span class="EoplDefinitionTitle">s-list&#65292;s-exp</span></div><div class="SIntrapara"><blockquote class="NormalFont"><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{S\mbox{-}list} &amp;::= <span class="stt">(</span><span class="Iidentity">\{\mathit{S\mbox{-}exp}\}^*</span><span class="stt">)</span> \\[-3pt]
\mathit{S\mbox{-}exp} &amp;::= \mathit{Symbol} \mid \mathit{S\mbox{-}list}\end{align*}</span></p></blockquote></blockquote></div></p></blockquote><p><a name="(elem._s-list)"></a>s-list &#26159; s-exp &#30340;&#21015;&#34920;&#65292;s-exp &#25110;&#32773;&#26159; s-list&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#31526;&#21495;&#12290;
&#36825;&#37324;&#26159;&#19968;&#20123; s-list&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(a b c)</span></p></td></tr><tr><td><p><span class="stt">(an (((s-list)) (with () lots) ((of) nesting)))</span></p></td></tr></table></blockquote><p>&#26377;&#26102;&#20063;&#20351;&#29992;&#26356;&#23485;&#26494;&#30340; s-list &#23450;&#20041;&#65292;&#26082;&#20801;&#35768;&#25972;&#25968;&#65292;&#20063;&#20801;&#35768;&#31526;&#21495;&#12290;
<a name="(idx._(gentag._49))"></a>
<a name="(idx._(gentag._50))"></a></p></li><li><p>&#20351;&#29992;&#19977;&#20803;&#32032;&#21015;&#34920;&#34920;&#31034;&#20869;&#37096;&#33410;&#28857;&#65292;&#21017;&#20197;&#25968;&#20540;&#20026;&#21494;&#23376;&#65292;&#20197;&#31526;&#21495;&#26631;&#31034;&#20869;&#37096;&#33410;&#28857;&#30340;&#20108;&#21449;&#26641;&#21487;
&#29992;&#35821;&#27861;&#34920;&#31034;&#20026;&#65306;
<a name="(idx._(gentag._51))"></a></p><blockquote class="EoplDefinition"><p><div class="SIntrapara"><a name="(elem._d1..1..7)"></a><span class="EoplDefinitionTitle">&#20108;&#21449;&#26641;</span></div><div class="SIntrapara"><blockquote class="NormalFont"><blockquote class="Small"><p><span class="texMathDisplay">\mathit{Bintree} ::= \mathit{Int} \mid <span class="stt">(</span><span class="texMathInline">\mathit{Symbol}</span><span class="stt"> </span><span class="texMathInline">\mathit{Bintree}</span><span class="stt"> </span><span class="texMathInline">\mathit{Bintree}</span><span class="stt">)</span></span></p></blockquote></blockquote></div></p></blockquote><p>&#36825;&#26159;&#27492;&#31867;&#26641;&#30340;&#20960;&#20010;&#20363;&#23376;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">1</span></p></td></tr><tr><td><p><span class="stt">2</span></p></td></tr><tr><td><p><span class="stt">(foo 1 2)</span></p></td></tr><tr><td><p><span class="stt">(bar 1 (foo 1 2))</span></p></td></tr><tr><td><p><span class="stt">(baz</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(bar 1 (foo 1 2))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(biz 4 5))</span></p></td></tr></table></blockquote></li><li><p><span class="emph">lambda &#28436;&#31639;</span> (<span class="emph">lambda calculus</span>) &#26159;&#19968;&#31181;&#31616;&#21333;&#35821;&#35328;&#65292;&#24120;&#29992;&#20110;&#30740;&#31350;&#32534;&#31243;&#35821;&#35328;
&#29702;&#35770;&#12290;&#36825;&#19968;&#35821;&#35328;&#21482;&#21253;&#21547;&#21464;&#37327;&#24341;&#29992;&#65292;&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#20197;&#21450;&#36807;&#31243;&#35843;&#29992;&#65292;&#21487;&#29992;&#35821;&#27861;&#23450;&#20041;&#20026;&#65306;
<a name="(idx._(gentag._52))"></a></p><blockquote class="EoplDefinition"><p><div class="SIntrapara"><a name="(elem._d1..1..8)"></a><span class="EoplDefinitionTitle">lambda &#28436;&#31639;</span><a name="(idx._(gentag._53))"></a>
</div><div class="SIntrapara"><blockquote class="NormalFont"><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{LcExp} &amp;::= \mathit{Identifier} \\[-3pt]
               &amp;::= <span class="stt">(lambda (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) </span><span class="Iidentity">\mathit{LcExp}</span><span class="stt">)</span> \\[-3pt]
               &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{LcExp}</span><span class="stt"> </span><span class="Iidentity">\mathit{LcExp}</span><span class="stt">)</span>\end{align*}</span></p></blockquote></blockquote></div></p><p>&#20854;&#20013;&#65292;identifier &#26159;&#38500; <span class="NormalFont"><span class="stt">lambda</span></span> &#20043;&#22806;&#30340;&#20219;&#20309;&#31526;&#21495;&#12290;</p></blockquote><p><a name="(idx._(gentag._54))"></a>
<a name="(idx._(gentag._55))"></a>
<a name="(idx._(gentag._56))"></a>
&#31532;&#20108;&#20010;&#29983;&#25104;&#24335;&#20013;&#30340; identifier &#26159; <span class="stt">lambda</span> &#34920;&#36798;&#24335;&#20027;&#20307;&#20869;&#30340;&#21464;&#37327;&#21517;&#12290;&#36825;&#19968;&#21464;&#37327;&#21483;&#20570;&#34920;
&#36798;&#24335;&#30340;<span class="emph">&#32465;&#23450;&#21464;&#37327;</span> (<span class="emph">bound variable</span>)&#65292;&#22240;&#20026;&#23427;&#32465;&#23450;&#65288;&#25110;&#31216;&#25429;&#33719;&#65289;&#20027;&#20307;&#20869;&#20986;&#29616;&#30340;&#20219;&#20309;
&#21516;&#21517;&#21464;&#37327;&#12290;&#20986;&#29616;&#22312;&#20027;&#20307;&#20869;&#30340;&#21516;&#21517;&#21464;&#37327;&#37117;&#25351;&#20195;&#36825;&#19968;&#20010;&#12290;
<a name="(idx._(gentag._57))"></a></p><p>&#35201;&#26126;&#30333;&#36825;&#24590;&#20040;&#29992;&#65292;&#32771;&#34385;&#29992;&#31639;&#26415;&#25805;&#20316;&#31526;&#25193;&#23637;&#30340; lambda &#28436;&#31639;&#12290;&#22312;&#36825;&#31181;&#35821;&#35328;&#37324;&#65292;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#26159;&#19968;&#34920;&#36798;&#24335;&#65292;<span class="stt">x</span> &#26159;&#20854;&#32465;&#23450;&#21464;&#37327;&#12290;&#36825;&#24335;&#23376;&#34920;&#31034;&#19968;&#20010;&#36807;&#31243;&#65292;&#25226;&#23427;&#30340;&#21442;&#25968;&#21152;5&#12290;&#22240;&#27492;&#65292;&#22312;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20013;&#65292;&#26368;&#21518;&#19968;&#20010;&#20986;&#29616;&#30340; <span class="stt">x</span> &#19981;&#26159;&#25351; <span class="stt">lambda</span> &#34920;&#36798;&#24335;&#20013;&#32465;&#23450;&#30340; <span class="stt">x</span>&#12290;
<a href="#%28part._s1..2..4%29" data-pltdoc="x"><span class="stt">occurs-free?</span></a>&#20013;&#20171;&#32461;&#20102; <span class="stt">occurs-free?</span>&#65292;&#21040;&#26102;&#25105;&#20204;&#20877;&#35752;&#35770;&#36825;&#20010;&#38382;&#39064;&#12290;</p><p>&#35813;&#35821;&#27861;&#23450;&#20041; <span class="texMathInline">\mathit{LcExp}</span> &#30340;&#20803;&#32032;&#20026; Scheme &#20540;&#65292;&#22240;&#27492;&#24456;&#23481;&#26131;&#20889;&#20986;&#31243;&#24207;&#26469;&#22788;&#29702;&#23427;&#20204;&#12290;</p></li></ol><p><a name="(idx._(gentag._58))"></a>
&#36825;&#20123;&#35821;&#27861;&#21483;&#20570;<span class="emph">&#19978;&#19979;&#25991;&#26080;&#20851;</span> (<span class="emph">context-free</span>) &#35821;&#27861;&#65292;&#22240;&#20026;&#19968;&#26465;&#35268;&#21017;&#23450;&#20041;&#30340;&#21477;&#27861;&#31867;&#21035;&#21487;
&#20197;&#22312;&#20219;&#20309;&#24341;&#29992;&#23427;&#30340;&#19978;&#19979;&#25991;&#20013;&#20351;&#29992;&#12290;&#26377;&#26102;&#36825;&#19981;&#22815;&#20005;&#26684;&#12290;&#32771;&#34385;<a name="(elem._bst)"></a>&#20108;&#21449;&#25628;&#32034;&#26641;&#12290;
&#20854;&#33410;&#28857;&#25110;&#32773;&#20026;&#31354;&#65292;&#25110;&#32773;&#21253;&#21547;&#19968;&#20010;&#25972;&#25968;&#21644;&#20004;&#26869;&#23376;&#26641;
<a name="(idx._(gentag._59))"></a>
<span class="texMathDisplay">\mathit{Binary\mbox{-}search\mbox{-}tree} ::= <span class="stt">()</span> \mid
<span class="stt">(</span><span class="texMathInline">\mathit{Int}</span><span class="stt"> </span><span class="texMathInline">\mathit{Binary\mbox{-}search\mbox{-}tree}</span><span class="stt"> </span><span class="texMathInline">\mathit{Binary\mbox{-}search\mbox{-}tree}</span><span class="stt">)</span></span></p><p>&#36825;&#22914;&#23454;&#21453;&#26144;&#20102;&#27599;&#20010;&#33410;&#28857;&#30340;&#32467;&#26500;&#65292;&#20294;&#26159;&#24573;&#30053;&#20102;&#20108;&#21449;&#25628;&#32034;&#26641;&#30340;&#19968;&#20010;&#35201;&#28857;&#65306;&#25152;&#26377;&#24038;&#23376;&#26641;&#30340;&#38190;&#20540;&#37117;&#23567;
&#20110;&#65288;&#25110;&#31561;&#20110;&#65289;&#24403;&#21069;&#33410;&#28857;&#65292;&#25152;&#26377;&#21491;&#23376;&#26641;&#30340;&#38190;&#20540;&#37117;&#22823;&#20110;&#24403;&#21069;&#33410;&#28857;&#12290;</p><p><a name="(idx._(gentag._60))"></a>
&#22240;&#20026;&#36825;&#26465;&#39069;&#22806;&#38480;&#21046;&#65292;&#20174; <span class="texMathInline">\mathit{Binary\mbox{-}search\mbox{-}tree}</span> &#24471;&#20986;&#30340;&#21477;&#27861;&#25512;
&#23548;&#24182;&#19981;&#37117;&#26159;&#27491;&#30830;&#30340;&#20108;&#21449;&#25628;&#32034;&#26641;&#12290;&#35201;&#21028;&#23450;&#26576;&#20010;&#29983;&#25104;&#24335;&#33021;&#21542;&#29992;&#20110;&#29305;&#23450;&#30340;&#21477;&#27861;&#25512;&#23548;&#65292;&#24517;&#39035;&#26816;&#26597;&#29983;&#25104;
&#24335;&#29992;&#22312;&#21738;&#31181;&#19978;&#19979;&#25991;&#12290;&#36825;&#31181;&#38480;&#21046;&#21483;&#20570;<span class="emph">&#19978;&#19979;&#25991;&#25935;&#24863;
&#38480;&#21046;</span> (<span class="emph">context-sensitive constraints</span>)&#65292;&#25110;&#31216;<a name="(elem._invariant)"></a><span class="emph">&#19981;&#21464;&#24335;</span> (<span class="emph">invariants</span>)&#12290;
<a name="(idx._(gentag._61))"></a></p><p>&#23450;&#20041;&#32534;&#31243;&#35821;&#35328;&#30340;&#35821;&#27861;&#20063;&#20250;&#20135;&#29983;&#19978;&#19979;&#25991;&#25935;&#24863;&#38480;&#21046;&#12290;&#20363;&#22914;&#65292;&#22312;&#35768;&#22810;&#32534;&#31243;&#35821;&#35328;&#20013;&#21464;&#37327;&#24517;&#39035;&#22312;&#20351;&#29992;&#20043;
&#21069;&#22768;&#26126;&#12290;&#23545;&#21464;&#37327;&#20351;&#29992;&#30340;&#36825;&#19968;&#38480;&#21046;&#23601;&#23545;&#20854;&#19978;&#19979;&#25991;&#25935;&#24863;&#12290;&#34429;&#28982;&#21487;&#20197;&#29992;&#24418;&#24335;&#21270;&#26041;&#27861;&#23450;&#20041;&#19978;&#19979;&#25991;&#25935;&#24863;
&#38480;&#21046;&#65292;&#20294;&#36825;&#20123;&#26041;&#27861;&#36828;&#27604;&#26412;&#31456;&#32771;&#34385;&#30340;&#22797;&#26434;&#12290;&#23454;&#38469;&#20013;&#65292;&#24120;&#29992;&#30340;&#26041;&#27861;&#26159;&#20808;&#23450;&#20041;&#19978;&#19979;&#25991;&#26080;&#20851;&#35821;&#27861;&#65292;&#38543;
&#21518;&#20877;&#29992;&#20854;&#20182;&#26041;&#27861;&#28155;&#21152;&#19978;&#19979;&#25991;&#25935;&#24863;&#38480;&#21046;&#12290;<a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#23637;&#31034;&#20102;&#36825;&#31181;&#25216;&#24039;&#30340;&#19968;&#20010;&#20363;&#23376;&#12290;
<a name="(idx._(gentag._62))"></a>
<a name="(idx._(gentag._63))"></a>
<a name="(idx._(gentag._64))"></a>
<a name="(idx._(gentag._65))"></a></p><h5 class="heading">1.1.3<tt>&nbsp;</tt><a name="(part._s1..1..3)"></a>&#24402;&#32435;&#35777;&#26126;&#27861;<span class="button-group"><a href="#(part._s1..1..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._66))"></a>
&#29992;&#24402;&#32435;&#27861;&#25551;&#36848;&#30340;&#38598;&#21512;&#65292;&#20854;&#23450;&#20041;&#26377;&#20004;&#31181;&#29992;&#27861;&#65306;&#35777;&#26126;&#20851;&#20110;&#38598;&#21512;&#20803;&#32032;&#30340;&#23450;&#29702;&#65292;&#20889;&#20986;&#25805;&#20316;&#38598;&#21512;&#20803;&#32032;&#30340;
&#31243;&#24207;&#12290;&#36825;&#37324;&#32473;&#20986;&#19968;&#20010;&#27492;&#31867;&#35777;&#26126;&#30340;&#20363;&#23376;&#65292;&#20889;&#31243;&#24207;&#30041;&#20316;&#19979;&#33410;&#30340;&#20027;&#39064;&#12290;</p><blockquote class="EoplTheorem"><p><a name="(elem._t1..1..1)"></a><span class="hspace">&nbsp;</span><a name="(idx._(gentag._67))"></a>
&#20196; t &#20026;&#20108;&#21449;&#26641;&#65292;&#24418;&#22914;&#65292;&#21017; t &#21253;&#21547;&#22855;&#25968;&#20010;&#33410;&#28857;&#12290;</p></blockquote><blockquote class="EoplProof"><p><a name="(idx._(gentag._68))"></a>
<a name="(idx._(gentag._69))"></a>
&#29992;&#24402;&#32435;&#27861;&#35777;&#26126; <span class="texMathInline">t</span> &#30340;&#22823;&#23567;&#12290;&#20196; <span class="texMathInline">t</span> &#30340;&#22823;&#23567;&#31561;&#20110; <span class="texMathInline">t</span> &#20013;&#33410;&#28857;&#30340;&#20010;&#25968;&#12290;&#24402;&#32435;&#20551;&#35774;&#20026;
<span class="texMathInline">\mathit{IH}(k)</span>&#65306;&#26641;&#30340;&#22823;&#23567;<span class="texMathInline">\leq k</span>&#26102;&#26377;&#22855;&#25968;&#20010;&#33410;&#28857;&#12290;&#20381;&#29031;&#24402;&#32435;&#27861;&#30340;&#24815;&#20363;&#65306;&#20808;&#35777;&#26126;
<span class="texMathInline">\mathit{IH}(0)</span>&#20026;&#30495;&#65292;&#28982;&#21518;&#35777;&#26126;&#33509;&#23545;&#20219;&#19968;&#25972;&#25968; <span class="texMathInline">k</span>&#65292;<span class="texMathInline">\mathit{IH}</span> &#20026;&#30495;&#65292;&#21017;&#23545;
<span class="texMathInline">k + 1</span>&#65292;<span class="texMathInline">\mathit{IH}</span> &#20063;&#20026;&#30495;&#12290;</p><ol><li><p>&#27809;&#26377;&#21738;&#26869;&#26641;&#21482;&#26377; <span class="texMathInline">0</span> &#20010;&#33410;&#28857;&#65292;&#25152;&#20197; <span class="texMathInline">\mathit{IH}(0)</span> &#26174;&#28982;&#25104;&#31435;&#12290;</p></li><li><p>&#35774; <span class="texMathInline">k</span> &#20026;&#25972;&#25968;&#26102;&#65292;<span class="texMathInline">\mathit{IH}(k)</span> &#25104;&#31435;&#65292;&#21363;&#65292;&#20219;&#20309;&#26641;&#30340;&#33410;&#28857;&#25968; <span class="texMathInline">\leq
k</span> &#26102;&#65292;&#20854;&#23454;&#38469;&#25968;&#30446;&#20026;&#22855;&#25968;&#12290;&#38656;&#35777;&#26126; <span class="texMathInline">\mathit{IH}(k + 1)</span> &#20063;&#25104;&#31435;&#65306;&#20219;&#20309;&#26641;&#30340;&#33410;&#28857;&#25968;
<span class="texMathInline">\leq k + 1</span> &#26102;&#65292;&#33410;&#28857;&#25968;&#20026;&#22855;&#25968;&#12290;&#33509; <span class="texMathInline">t</span> &#26377; <span class="texMathInline">\leq k + 1</span> &#20010;&#33410;&#28857;&#65292;&#26681;&#25454;&#20108;&#21449;&#26641;
&#30340;&#23450;&#20041;&#65292;&#21482;&#26377;&#20004;&#31181;&#21487;&#33021;&#65306;</p><ol><li><p><span class="texMathInline">t</span> &#24418;&#22914; <span class="texMathInline">n</span>&#65292;<span class="texMathInline">n</span> &#20026;&#25972;&#25968;&#12290;&#27492;&#26102; <span class="texMathInline">t</span> &#21482;&#26377;&#19968;&#20010;&#33410;&#28857;&#65292;1&#20026;&#22855;&#25968;&#12290;</p></li><li><p><span class="texMathInline">t</span> &#24418;&#22914; <span class="texMathInline"><span class="stt">(</span><span class="texMathInline">sym</span><span class="stt"> </span><span class="texMathInline">t_1</span><span class="stt"> </span><span class="texMathInline">t_2</span><span class="stt">)</span></span>&#65292;&#20854;&#20013;&#65292;<span class="texMathInline">sym</span> &#26159;&#19968;&#31526;&#21495;&#65292;
<span class="texMathInline">t_1</span> &#21644; <span class="texMathInline">t_2</span> &#26159;&#26641;&#12290;&#27492;&#26102; <span class="texMathInline">t_1</span> &#21644; <span class="texMathInline">t_2</span> &#33410;&#28857;&#25968;&#23569;&#20110; <span class="texMathInline">t</span>&#12290;&#22240;&#20026; <span class="texMathInline">t</span>
&#26377; <span class="texMathInline">\leq k + 1</span>&#20010;&#33410;&#28857;&#65292;<span class="texMathInline">t_1</span> &#21644; <span class="texMathInline">t_2</span> &#19968;&#23450;&#26377; <span class="texMathInline">\leq k</span> &#20010;&#33410;&#28857;&#12290;&#22240;&#27492;&#23427;
&#20204;&#31526;&#21512; <span class="texMathInline">\mathit{IH}(k)</span>&#65292;&#19968;&#23450;&#21508;&#26377;&#22855;&#25968;&#20010;&#33410;&#28857;&#65292;&#19981;&#22952;&#20998;&#21035;&#35774;&#20026;<span class="texMathInline">2n_1 + 1</span> &#21644;
<span class="texMathInline">2n_2 + 1</span>&#12290;&#21017;&#31639;&#19978;&#20004;&#26869;&#23376;&#26641;&#21644;&#26681;&#65292;&#21407;&#26641;&#20013;&#30340;&#33410;&#28857;&#24635;&#25968;&#20026;</p><p><span class="texMathDisplay">(2n_1 + 1) + (2n_2 + 1) + 1 = 2(n_1 + n_2 + 1) + 1</span></p><p>&#20063;&#26159;&#19968;&#20010;&#22855;&#25968;&#12290;</p></li></ol></li></ol><p>&#38472;&#36848;&#8220;<span class="texMathInline">\mathit{IH}(k + 1)</span> &#25104;&#31435;&#8221;&#35777;&#27605;&#65292;&#24402;&#32435;&#23436;&#25104;&#12290;
<a name="(idx._(gentag._70))"></a></p></blockquote><p>&#35777;&#26126;&#30340;&#20851;&#38190;&#26159;&#26641; <span class="texMathInline">t</span> &#30340;&#23376;&#32467;&#26500;&#24635;&#26159;&#27604; <span class="texMathInline">t</span> &#33258;&#36523;&#23567;&#12290;&#36825;&#31181;&#35777;&#26126;&#27169;&#24335;
&#21483;&#20570;<span class="emph">&#32467;&#26500;&#21270;&#24402;&#32435;&#27861;</span> (<span class="emph">structural induction</span>)&#12290;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#32467;&#26500;&#21270;&#24402;&#32435;&#35777;&#26126;</span></p></blockquote><p class="TipContent">&#27442;&#35777;&#26126;&#20551;&#35774; <span class="texMathInline">\mathit{IH}(s)</span> &#23545;&#25152;&#26377;&#32467;&#26500; <span class="texMathInline">s</span> &#20026;&#30495;&#65292;
&#38656;&#35777;&#26126;&#65306;</p><ol><li><p><span class="texMathInline">\mathit{IH}</span> &#23545;&#31616;&#21333;&#32467;&#26500;&#65288;&#27809;&#26377;&#23376;&#32467;&#26500;&#65289;&#20026;&#30495;&#12290;</p></li><li><p>&#33509; <span class="texMathInline">\mathit{IH}</span> &#23545; <span class="texMathInline">s</span> &#30340;&#23376;&#32467;&#26500;&#20026;&#30495;&#65292;&#21017;&#23545; <span class="texMathInline">s</span> &#26412;&#36523;&#20063;&#20026;&#30495;&#12290;
<a name="(idx._(gentag._71))"></a></p></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..5)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._72))"></a>
&#35777;&#26126;&#65306;&#33509; <span class="Iidentity">$e \in \mathit{LcExp}$</span>&#65292;&#21017; <span class="Iidentity">$e$</span> &#20013;&#30340;&#24038;&#21491;&#25324;&#21495;&#25968;&#37327;&#30456;&#31561;&#12290;</p></blockquote><h4 class="heading">1.2<tt>&nbsp;</tt><a name="(part._s1..2)"></a>&#25512;&#23548;&#36882;&#24402;&#31243;&#24207;<span class="button-group"><a href="#(part._s1..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._73))"></a>
<a name="(idx._(gentag._74))"></a>
<a name="(idx._(gentag._75))"></a>
<a name="(idx._(gentag._76))"></a>
<a name="(idx._(gentag._77))"></a>
&#25105;&#20204;&#24050;&#32463;&#29992;&#24402;&#32435;&#23450;&#20041;&#27861;&#25551;&#36848;&#20102;&#22797;&#26434;&#38598;&#21512;&#12290;&#25105;&#20204;&#33021;&#22815;&#20998;&#26512;&#24402;&#32435;&#24335;&#38598;&#21512;&#30340;&#20803;&#32032;&#65292;&#35266;&#23519;&#22914;&#20309;&#20174;&#36739;&#23567;
&#20803;&#32032;&#26500;&#24314;&#38598;&#21512;&#12290;&#25105;&#20204;&#29992;&#36825;&#19968;&#24819;&#27861;&#20889;&#20986;&#20102;&#36807;&#31243; <span class="stt">in-S?</span>&#65292;&#29992;&#20197;&#21028;&#26029;&#33258;&#28982;&#25968;&#26159;&#21542;&#23646;&#20110;&#38598;&#21512;
<span class="texMathInline">S</span>&#12290;&#29616;&#22312;&#65292;&#25105;&#20204;&#29992;&#21516;&#26679;&#30340;&#24819;&#27861;&#23450;&#20041;&#26356;&#36890;&#29992;&#30340;&#36807;&#31243;&#65292;&#20197;&#20415;&#23545;&#24402;&#32435;&#24335;&#38598;&#21512;&#20570;&#36816;&#31639;&#12290;</p><p><a name="(idx._(gentag._78))"></a>
&#36882;&#24402;&#36807;&#31243;&#20381;&#36182;&#20110;&#19968;&#26465;&#37325;&#35201;&#21407;&#21017;&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#36739;&#23567;&#23376;&#38382;&#39064;&#21407;&#21017;</span></p></blockquote><p class="TipContent">&#33509;&#33021;&#21270;&#38382;&#39064;&#20026;&#36739;&#23567;&#23376;&#38382;&#39064;&#65292;&#21017;&#33021;&#35843;&#29992;&#35299;&#20915;&#21407;&#38382;&#39064;&#30340;&#36807;&#31243;&#35299;&#20915;
&#23376;&#38382;&#39064;&#12290;</p></blockquote><p>&#24050;&#27714;&#24471;&#30340;&#23376;&#38382;&#39064;&#35299;&#38543;&#21518;&#21487;&#29992;&#26469;&#27714;&#35299;&#21407;&#38382;&#39064;&#12290;&#36825;&#21487;&#34892;&#65292;&#22240;&#20026;&#27599;&#27425;&#36807;&#31243;&#35843;&#29992;&#37117;&#26159;&#38024;&#23545;&#36739;&#23567;&#30340;&#23376;&#38382;
&#39064;&#65292;&#30452;&#33267;&#26368;&#32456;&#35843;&#29992;&#65292;&#38024;&#23545;&#19968;&#20010;&#21487;&#20197;&#30452;&#25509;&#27714;&#35299;&#30340;&#38382;&#39064;&#65292;&#19981;&#38656;&#20877;&#27425;&#35843;&#29992;&#33258;&#36523;&#12290;
<a name="(idx._(gentag._79))"></a>
<a name="(idx._(gentag._80))"></a>
<a name="(idx._(gentag._81))"></a></p><p>&#25105;&#20204;&#29992;&#19968;&#20123;&#20363;&#23376;&#35299;&#37322;&#36825;&#19968;&#24819;&#27861;&#12290;</p><h5 class="heading">1.2.1<tt>&nbsp;</tt><a name="(part._s1..2..1)"></a><span class="stt">list-length</span><span class="button-group"><a href="#(part._s1..2..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._82))"></a>
<a name="(idx._(gentag._83))"></a>
&#26631;&#20934;&#30340; Scheme &#31243;&#24207; <span class="stt">length</span> &#27714;&#20986;&#21015;&#34920;&#20013;&#30340;&#20803;&#32032;&#20010;&#25968;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">2</span></p></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#26469;&#20889;&#20986;&#33258;&#24049;&#30340;&#36807;&#31243; <span class="stt">list-length</span>&#65292;&#20570;&#21516;&#26679;&#30340;&#20107;&#12290;</p><p><a name="(idx._(gentag._84))"></a>
&#20808;&#26469;&#20889;&#20986;&#36807;&#31243;&#30340;<span class="emph">&#21512;&#32422;</span>&#12290;&#21512;&#32422;&#25351;&#23450;&#20102;&#36807;&#31243;&#21487;&#21462;&#21442;&#25968;&#21644;&#21487;&#33021;&#36820;&#22238;&#20540;&#30340;&#38598;&#21512;&#12290;&#21512;&#32422;&#20063;
&#21487;&#20197;&#21253;&#21547;&#36807;&#31243;&#30340;&#26399;&#26395;&#29992;&#27861;&#25110;&#34892;&#20026;&#12290;&#36825;&#26377;&#21161;&#20110;&#25105;&#20204;&#22312;&#32534;&#20889;&#26102;&#21450;&#20197;&#21518;&#36861;&#36394;&#25105;&#20204;&#30340;&#24847;&#22270;&#12290;&#22312;&#20195;&#30721;&#20013;&#65292;
&#36825;&#26159;&#19968;&#26465;&#27880;&#37322;&#65292;&#25105;&#20204;&#29992;&#25171;&#23383;&#26426;&#23383;&#20307;&#31034;&#20043;&#65292;&#20197;&#20415;&#38405;&#35835;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">list-length</span></span> : <span class="texMathInline">\mathit{List} \to \mathit{Int}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(list-length </span><span class="texMathInline">l</span><span class="stt">) = </span><span class="texMathInline">l</span><span class="stt">&#30340;&#38271;&#24230;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">list-length</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#21015;&#34920;&#30340;&#38598;&#21512;&#23450;&#20041;&#20026;</p><p><span class="texMathDisplay">\mathit{List} ::= <span class="stt">()</span> \mid <span class="stt">(</span><span class="texMathInline">Scheme \; value</span><span class="stt">
</span><span class="stt">. </span><span class="texMathInline">\mathit{List}</span><span class="stt">)</span></span></p><p>&#22240;&#27492;&#65292;&#32771;&#34385;&#21015;&#34920;&#30340;&#27599;&#31181;&#24773;&#20917;&#12290;&#33509;&#21015;&#34920;&#20026;&#31354;&#65292;&#21017;&#38271;&#24230;&#20026;0&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">list-length</span></span> : <span class="texMathInline">\mathit{List} \to \mathit{Int}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(list-length </span><span class="texMathInline">l</span><span class="stt">) = </span><span class="texMathInline">l</span><span class="stt"> &#30340;&#38271;&#24230;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">list-length</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lst</span><span class="RktPn">)</span></td></tr><tr><td>\begin{mdframed}[style=codediff]</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td>\end{mdframed}</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#33509;&#21015;&#34920;&#38750;&#31354;&#65292;&#21017;&#20854;&#38271;&#24230;&#27604;&#20854;&#20313;&#39033;&#38271;&#24230;&#22810;1&#12290;&#36825;&#23601;&#32473;&#20986;&#20102;&#23436;&#25972;&#23450;&#20041;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">list-length</span></span> : <span class="texMathInline">\mathit{List} \to \mathit{Int}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(list-length </span><span class="texMathInline">l</span><span class="stt">) = </span><span class="texMathInline">l</span><span class="stt"> &#30340;&#38271;&#24230;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">list-length</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td>\begin{mdframed}[style=codediff]</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-length</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\end{mdframed}</td></tr></table></blockquote></blockquote><p>&#36890;&#36807; <span class="stt">list-length</span> &#30340;&#23450;&#20041;&#65292;&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;&#23427;&#30340;&#36816;&#31639;&#36807;&#31243;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(list-length '(a (b c) d))</span></p></td></tr><tr><td><p><span class="stt">= (+ 1 (list-length '((b c) d)))</span></p></td></tr><tr><td><p><span class="stt">= (+ 1 (+ 1 (list-length '(d))))</span></p></td></tr><tr><td><p><span class="stt">= (+ 1 (+ 1 (+ 1 (list-length '()))))</span></p></td></tr><tr><td><p><span class="stt">= (+ 1 (+ 1 (+ 1 0)))</span></p></td></tr><tr><td><p><span class="stt">= 3</span></p></td></tr></table></div><div class="SIntrapara"><a name="(idx._(gentag._85))"></a></div></p></blockquote><h5 class="heading">1.2.2<tt>&nbsp;</tt><a name="(part._s1..2..2)"></a><span class="stt">nth-element</span><span class="button-group"><a href="#(part._s1..2..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._86))"></a>
&#26631;&#20934;&#30340; Scheme &#36807;&#31243; <span class="stt">list-ref</span> &#21462;&#19968;&#21015;&#34920; <span class="stt">lst</span> &#21644;&#20174; 0 &#24320;&#22987;&#35745;&#25968;&#30340;&#32034;&#24341; <span class="stt">n</span>&#65292;
&#36820;&#22238; <span class="stt">lst</span> &#30340;&#31532; <span class="stt">n</span> &#20010;&#20803;&#32032;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">list-ref</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'b</span></p></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#26469;&#20889;&#20986;&#33258;&#24049;&#30340;&#36807;&#31243; <span class="stt">nth-element</span>&#65292;&#20570;&#21516;&#26679;&#30340;&#20107;&#12290;</p><p>&#20173;&#27839;&#29992;&#19978;&#36848; <span class="texMathInline">List</span> &#30340;&#23450;&#20041;&#12290;</p><p>&#24403; <span class="texMathInline">lst</span> &#20026;&#31354;&#26102;&#65292;<span class="stt">(nth-element </span><span class="texMathInline">lst</span><span class="stt"> </span><span class="texMathInline">n</span><span class="stt">)</span> &#24212;&#24403;&#36820;&#22238;&#20160;&#20040;&#65311;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;
<span class="stt">(nth-element </span><span class="texMathInline">lst</span><span class="stt"> </span><span class="texMathInline">n</span><span class="stt">)</span> &#24819;&#35201;&#21462;&#31354;&#21015;&#34920;&#30340;&#20803;&#32032;&#65292;&#25152;&#20197;&#25253;&#38169;&#12290;</p><p>&#24403; <span class="texMathInline">lst</span> &#38750;&#31354;&#26102;&#65292;<span class="stt">(nth-element </span><span class="texMathInline">lst</span><span class="stt"> </span><span class="texMathInline">n</span><span class="stt">)</span> &#24212;&#24403;&#36820;&#22238;&#20160;&#20040;&#65311;&#31572;&#26696;&#21462;&#20915;&#20110;
<span class="texMathInline">n</span>&#12290;&#33509; <span class="texMathInline">n = 0</span>&#65292;&#31572;&#26696;&#26159; <span class="texMathInline">lst</span> &#30340;&#39318;&#39033;&#12290;</p><p>&#24403; <span class="texMathInline">lst</span> &#38750;&#31354;&#65292;&#19988; <span class="texMathInline">n \neq 0</span> &#26102;&#65292;<span class="stt">(nth-element </span><span class="texMathInline">lst</span><span class="stt"> </span><span class="texMathInline">n</span><span class="stt">)</span> &#24212;&#24403;&#36820;&#22238;&#20160;
&#20040;&#65311;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#31572;&#26696;&#26159; <span class="texMathInline">lst</span> &#20313;&#39033;&#30340;&#31532; <span class="texMathInline">(n - 1)</span> &#20010;&#20803;&#32032;&#12290;&#30001; <span class="texMathInline">n \in N</span> &#19988;
<span class="texMathInline">n \neq 0</span>&#65292;&#21487;&#30693; <span class="texMathInline">n - 1</span> &#19968;&#23450;&#23646;&#20110; <span class="texMathInline">N</span>&#65292;&#22240;&#27492;&#21487;&#20197;&#36882;&#24402;&#35843;&#29992; <span class="stt">nth-element</span>&#25214;
&#20986;&#31532; <span class="texMathInline">(n - 1)</span> &#20010;&#20803;&#32032;&#12290;</p><p>&#36825;&#23601;&#24471;&#20986;&#23450;&#20041;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">nth-element</span></span> : <span class="texMathInline">\mathit{List} \times \mathit{Int} \to \mathit{SchemeVal}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(nth-element </span><span class="texMathInline">lst</span><span class="stt"> </span><span class="texMathInline">n</span><span class="stt">) = </span><span class="texMathInline">lst</span><span class="stt"> &#30340;&#31532; </span><span class="texMathInline">n</span><span class="stt"> &#20010;&#20803;&#32032;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">nth-element</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lst</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-list-too-short</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nth-element</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">report-list-too-short</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">nth-element</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"List too short by ~s elements.~%"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#30340;&#27880;&#37322; <span style="font-weight: bold"><span class="stt">nth-element</span></span><span class="stt"> : </span><span class="texMathInline">\mathit{List} \times \mathit{Int}
\to \mathit{SchemeVal}</span> &#34920;&#31034; <span style="font-weight: bold"><span class="stt">nth-element</span></span> &#26159;&#19968;&#20010;&#36807;&#31243;&#65292;&#21462;&#20004;&#20010;&#21442;&#25968;&#65292;&#19968;
&#20010;&#20026;&#21015;&#34920;&#65292;&#19968;&#20010;&#20026;&#25972;&#25968;&#65292;&#36820;&#22238;&#19968;&#20010;Scheme &#20540;&#12290;&#36825;&#19982;&#25968;&#23398;&#20013;&#30340;&#34920;&#31034; <span class="texMathInline">f : A \times B \to
C</span> &#30456;&#21516;&#12290;</p><p><a name="(idx._(gentag._87))"></a>
<a name="(idx._(gentag._88))"></a>
<a name="(idx._(gentag._89))"></a>
&#36807;&#31243; <span class="stt">report-list-too-short</span> &#35843;&#29992; <span class="stt">eopl:error</span> &#26469;&#25253;&#21578;&#38169;&#35823;&#65292;&#21518;&#32773;&#20250;&#32456;&#27490;&#35745;&#31639;&#12290;
&#23427;&#30340;&#39318;&#20010;&#21442;&#25968;&#26159;&#19968;&#31526;&#21495;&#65292;&#29992;&#20110;&#22312;&#38169;&#35823;&#20449;&#24687;&#20013;&#25351;&#31034;&#35843;&#29992; <span class="stt">eopl:error</span> &#30340;&#36807;&#31243;&#12290;&#31532;&#20108;&#20010;&#21442;
&#25968;&#26159;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#20250;&#25171;&#21360;&#20026;&#38169;&#35823;&#20449;&#24687;&#12290;&#23545;&#24212;&#20110;&#23383;&#31526;&#20018;&#20013;&#30340;&#27599;&#20010;&#23383;&#31526;&#24207;&#21015; <span class="stt">~s</span>&#65292;&#37117;&#24517;&#39035;&#26377;
&#19968;&#20010;&#39069;&#22806;&#21442;&#25968;&#12290;&#25171;&#21360;&#23383;&#31526;&#20018;&#26102;&#65292;&#36825;&#20123;&#21442;&#25968;&#30340;&#20540;&#20250;&#26367;&#25442;&#23545;&#24212;&#30340; <span class="stt">~s</span> &#12290;<span class="stt">~%</span>&#20195;&#34920;&#25442;&#34892;&#12290;
&#38169;&#35823;&#20449;&#24687;&#25171;&#21360;&#21518;&#65292;&#35745;&#31639;&#32456;&#32467;&#12290;&#36807;&#31243; <span class="stt">eopl:error</span> &#24182;&#38750;&#26631;&#20934; Scheme &#30340;&#19968;&#37096;&#20998;&#65292;&#20294;&#22823;&#22810;
&#25968; Scheme &#23454;&#29616;&#25552;&#20379;&#36825;&#26679;&#30340;&#32452;&#20214;&#12290;&#22312;&#26412;&#20070;&#20013;&#65292;&#25105;&#20204;&#20197;&#31867;&#20284;&#26041;&#24335;&#65292;&#29992;&#21517;&#23383;&#21547; <span class="stt">report-</span> &#30340;
&#36807;&#31243;&#25253;&#21578;&#38169;&#35823;&#12290;
<a name="(idx._(gentag._90))"></a>
<a name="(idx._(gentag._91))"></a></p><p>&#26469;&#30475;&#30475; <span class="stt">nth-element</span> &#22914;&#20309;&#31639;&#20986;&#31572;&#26696;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(nth-element '(a b c d e) 3)</span></p></td></tr><tr><td><p><span class="stt">= (nth-element</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">'(b c d e) 2)</span></p></td></tr><tr><td><p><span class="stt">= (nth-element</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">'(c d e) 1)</span></p></td></tr><tr><td><p><span class="stt">= (nth-element</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">'(d e) 0)</span></p></td></tr><tr><td><p><span class="stt">= d</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;<span class="stt">nth-element</span> &#36882;&#24402;&#22788;&#29702;&#36234;&#26469;&#36234;&#30701;&#30340;&#21015;&#34920;&#21644;&#36234;&#26469;&#36234;&#23567;&#30340;&#25968;&#23383;&#12290;</p></blockquote><p>&#22914;&#26524;&#25490;&#38500;&#38169;&#35823;&#26816;&#26597;&#65292;&#25105;&#20204;&#24471;&#38752; <span class="stt">car</span> &#21644; <span class="stt">cdr</span> &#25253;&#38169;&#26469;&#33719;&#30693;&#20256;&#36882;&#20102;&#31354;&#21015;&#34920;&#65292;&#20294;&#23427;&#20204;&#30340;
&#38169;&#35823;&#20449;&#24687;&#26080;&#29978;&#24110;&#21161;&#12290;&#20363;&#22914;&#65292;&#24403;&#25105;&#20204;&#25910;&#21040; <span class="stt">car</span> &#30340;&#38169;&#35823;&#20449;&#24687;&#65292;&#21487;&#33021;&#24471;&#25214;&#36941;&#25972;&#20010;&#31243;&#24207;&#20013;&#20351;&#29992;
<span class="stt">car</span> &#30340;&#22320;&#26041;&#12290;
<a name="(idx._(gentag._92))"></a>
<a name="(idx._(gentag._93))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex1..6)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22914;&#26524;&#35843;&#25442; <span class="stt">nth-element</span> &#20013;&#20004;&#20010;&#26465;&#20214;&#30340;&#39034;&#24207;&#65292;&#20250;&#26377;&#20160;&#20040;&#38382;&#39064;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..7)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><span class="stt">nth-element</span> &#30340;&#38169;&#35823;&#20449;&#24687;&#19981;&#22815;&#35814;&#23613;&#12290;&#37325;&#20889; <span class="stt">nth-element</span>&#65292;&#32473;&#20986;&#26356;&#35814;&#32454;&#30340;&#38169;&#35823;&#20449;
&#24687;&#65292;&#20687;&#26159; &#8220;<span class="stt">(a b c)</span> &#19981;&#36275; 8 &#20010;&#20803;&#32032;&#8221;&#12290;</p></blockquote><h5 class="heading">1.2.3<tt>&nbsp;</tt><a name="(part._s1..2..3)"></a><span class="stt">remove-first</span><span class="button-group"><a href="#(part._s1..2..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._94))"></a>
<a name="(idx._(gentag._95))"></a>
&#36807;&#31243; <span class="stt">remove-first</span> &#21462;&#20004;&#20010;&#21442;&#25968;&#65306;&#31526;&#21495; <span class="texMathInline">s</span> &#21644;&#31526;&#21495;&#21015;&#34920; <span class="texMathInline">los</span>&#12290;&#23427;&#36820;&#22238;&#19968;&#20010;&#21015;&#34920;&#65292;
&#38500;&#20102;&#19981;&#21547;&#31532;&#19968;&#20010;&#20986;&#29616;&#22312; <span class="texMathInline">los</span> &#20013;&#30340;&#31526;&#21495; <span class="texMathInline">s</span> &#22806;&#65292;&#25152;&#21547;&#20803;&#32032;&#21450;&#20854;&#25490;&#21015;&#39034;&#24207;&#19982; <span class="texMathInline">los</span>
&#30456;&#21516;&#12290;&#22914;&#26524; <span class="texMathInline">s</span> &#27809;&#26377;&#20986;&#29616;&#22312; <span class="texMathInline">los</span> &#20013;&#65292;&#21017;&#36820;&#22238; <span class="texMathInline">los</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">remove-first</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(b<span class="stt"> </span>c)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">remove-first</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">e</span><span class="hspace">&nbsp;</span><span class="RktVal">f</span><span class="hspace">&nbsp;</span><span class="RktVal">g</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(e<span class="stt"> </span>f<span class="stt"> </span>g)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">remove-first</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a4</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">c1</span><span class="hspace">&nbsp;</span><span class="RktVal">a4</span><span class="hspace">&nbsp;</span><span class="RktVal">c1</span><span class="hspace">&nbsp;</span><span class="RktVal">a4</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(c1<span class="stt"> </span>c1<span class="stt"> </span>a4)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">remove-first</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'()</span></p></td></tr></table></blockquote></blockquote><p>&#20889;&#20986;&#27492;&#36807;&#31243;&#20043;&#21069;&#65292;&#25105;&#20204;&#20808;&#35201;&#23450;&#20041;&#31526;&#21495;&#21015;&#34920;&#38598;&#21512;
<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Symbol}</span> &#65292;&#20197;&#20415;&#32473;&#20986;&#38382;&#39064;&#30340;&#23436;&#25972;&#25551;&#36848;&#12290;&#19981;&#20687;&#19978;&#19968;&#33410;&#20171;
&#32461;&#30340; s-lists&#65292;&#31526;&#21495;&#21015;&#34920;&#19981;&#21253;&#21547;&#23376;&#21015;&#34920;&#12290;</p><blockquote class="SubFlow"><p><span class="texMathDisplay">\mathit{List\mbox{-}of\mbox{-}Symbol} ::= <span class="stt">()</span> \mid
<span class="stt">(</span><span class="texMathInline">\mathit{Symbol}</span><span class="stt"> . </span><span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Symbol}</span><span class="stt">)</span></span></p><p>&#31526;&#21495;&#21015;&#34920;&#25110;&#32773;&#26159;&#31354;&#21015;&#34920;&#65292;&#25110;&#32773;&#26159;&#39318;&#39033;&#20026;&#31526;&#21495;&#65292;&#20313;&#39033;&#20026;&#31526;&#21495;&#21015;&#34920;&#12290;</p></blockquote><p>&#22914;&#26524;&#21015;&#34920;&#20026;&#31354;&#65292;&#19981;&#38656;&#35201;&#31227;&#38500; <span class="texMathInline">s</span>&#65292;&#21017;&#31572;&#26696;&#20026;&#31354;&#21015;&#34920;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a name="(elem._remove-first)"></a><span style="font-weight: bold"><span class="stt">remove-first</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{Listof}(\mathit{Sym}) \to \mathit{Listof}(\mathit{Sym})</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(remove-first </span><span class="texMathInline">s</span><span class="stt"> </span><span class="texMathInline">los</span><span class="stt">) &#36820;&#22238;&#19968;&#21015;&#34920;&#65292;&#38500;&#20102;&#19981;&#21547;&#31532;&#19968;&#20010;&#20986;&#29616;&#22312; </span><span class="texMathInline">los</span><span class="stt"> &#20013;&#30340;&#31526;&#21495; </span><span class="texMathInline">s</span><span class="stt"> &#22806;&#65292;&#20803;&#32032;&#21450;&#20854;&#25490;&#21015;&#39034;&#24207;&#19982; </span><span class="texMathInline">los</span><span class="stt"> &#30456;&#21516;&#12290;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">remove-first</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20889;&#21512;&#32422;&#26102;&#65292;&#25105;&#20204;&#29992; <span class="texMathInline">\mathit{Listof}(\mathit{Sym})</span> &#32780;&#19981;&#26159;
<span class="texMathInline">\mathit{List\mbox{-}of\mbox{-}Symbol}</span>&#12290;&#29992;&#36825;&#31181;&#20889;&#27861;&#21487;&#20197;&#20813;&#38500;&#35768;&#22810;&#19978;&#38754;&#37027;&#26679;&#30340;&#23450;&#20041;&#12290;</p><p>&#22914;&#26524; <span class="texMathInline">los</span> &#38750;&#31354;&#65292;&#26377;&#27809;&#26377;&#21738;&#31181;&#24773;&#20917;&#21487;&#20197;&#31435;&#21051;&#24471;&#20986;&#31572;&#26696;&#65311;&#22914;&#26524; <span class="texMathInline">los</span> &#30340;&#31532;&#19968;&#20010;&#20803;&#32032;&#26159;
<span class="texMathInline">s</span>&#65292;&#27604;&#22914; <span class="texMathInline">los = <span class="stt">(</span><span class="texMathInline">s</span><span class="stt"> </span><span class="texMathInline">s_1</span><span class="stt"> </span><span class="texMathInline">...</span><span class="stt"> </span><span class="texMathInline">s_{n-1}</span><span class="stt">)</span></span>&#65292;<span class="texMathInline">s</span> &#39318;&#27425;&#20986;&#29616;&#26102;
&#26159; <span class="texMathInline">los</span> &#30340;&#31532;&#19968;&#20010;&#20803;&#32032;&#65292;&#37027;&#20040;&#25226;&#23427;&#21024;&#38500;&#20043;&#21518;&#30340;&#32467;&#26524;&#26159; <span class="stt">(</span><span class="texMathInline">s_1</span><span class="stt"> </span><span class="texMathInline">...</span><span class="stt">
</span><span class="texMathInline">s_{n-1}</span><span class="stt">)</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">remove-first</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{Listof}(\mathit{Sym}) \to \mathit{Listof}(\mathit{Sym})</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">remove-first</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td>\begin{mdframed}[style=codediff]</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\end{mdframed}</td></tr></table></blockquote></blockquote><p>&#22914;&#26524; <span class="texMathInline">los</span> &#30340;&#31532;&#19968;&#20010;&#20803;&#32032;&#19981;&#26159; <span class="texMathInline">s</span>&#65292;&#27604;&#22914; <span class="texMathInline">los = <span class="stt">(</span><span class="texMathInline">s_0</span><span class="stt"> </span><span class="texMathInline">s_1</span><span class="stt"> </span><span class="texMathInline">...</span><span class="stt">
</span><span class="texMathInline">s_{n-1}</span><span class="stt">)</span></span>&#65292;&#21487;&#30693; <span class="texMathInline">s_0</span> &#19981;&#26159;&#31532;&#19968;&#20010;&#20986;&#29616;&#30340; <span class="texMathInline">s</span>&#65292;&#22240;&#27492;&#31572;&#26696;&#20013;&#30340;&#31532;&#19968;&#20010;&#20803;&#32032;&#19968;&#23450;
&#26159;<span class="texMathInline">s_0</span>&#65292;&#21363;&#34920;&#36798;&#24335; <span class="stt">(car los)</span> &#30340;&#20540;&#12290;&#32780;&#19988;&#65292;<span class="texMathInline">los</span> &#20013;&#30340;&#39318;&#20010; <span class="texMathInline">s</span> &#19968;&#23450;&#22312;
<span class="stt">(</span><span class="texMathInline">s_1</span><span class="stt"> </span><span class="texMathInline">...</span><span class="stt"> </span><span class="texMathInline">s_{n-1}</span><span class="stt">)</span> &#20013;&#12290;&#25152;&#20197;&#31572;&#26696;&#30340;&#20313;&#19979;&#37096;&#20998;&#19968;&#23450;&#26159;&#31227;&#38500; <span class="texMathInline">los</span> &#20313;&#39033;
&#20013;&#39318;&#20010; <span class="texMathInline">s</span> &#30340;&#32467;&#26524;&#12290;&#22240;&#20026; <span class="texMathInline">los</span> &#30340;&#20313;&#39033;&#27604; <span class="texMathInline">los</span> &#30701;&#65292;&#25105;&#20204;&#21487;&#20197;&#36882;&#24402;&#35843;&#29992;
<span class="stt">remove-first</span>&#65292;&#20174; <span class="texMathInline">los</span> &#30340;&#20313;&#39033;&#20013;&#31227;&#38500; <span class="texMathInline">s</span>&#65292;&#21363;&#31572;&#26696;&#30340;&#20313;&#39033;&#21487;&#29992;
<span class="stt">(remove-first s (cdr los))</span> &#27714;&#24471;&#12290;&#24050;&#30693;&#22914;&#20309;&#25214;&#20986;&#31572;&#26696;&#30340;&#39318;&#39033;&#21644;&#20313;&#39033;&#65292;&#21487;&#20197;&#29992;
<span class="stt">cons</span> &#32467;&#21512;&#20108;&#32773;&#65292;&#36890;&#36807;&#34920;&#36798;&#24335; <span class="stt">(cons (car los) (remove-first s (cdr los)))</span>
&#27714;&#24471;&#25972;&#20010;&#31572;&#26696;&#12290;&#30001;&#27492;&#65292;<span class="stt">remove-first</span> &#30340;&#23436;&#25972;&#23450;&#20041;&#20026;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">remove-first</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{Listof}(\mathit{Sym}) \to \mathit{Listof}(\mathit{Sym})</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">remove-first</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span></td></tr><tr><td>\begin{mdframed}[style=codediff]</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">remove-first</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">los</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\end{mdframed}</td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._96))"></a>
<a name="(idx._(gentag._97))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..8)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22914;&#26524;&#25226; <span class="stt">remove-first</span> &#23450;&#20041;&#20013;&#30340;&#26368;&#21518;&#19968;&#34892;&#25913;&#20026; <span class="stt">(remove-first s (cdr los))</span>&#65292;
&#24471;&#21040;&#30340;&#36807;&#31243;&#20570;&#20160;&#20040;&#36816;&#31639;&#65311;&#23545;&#20462;&#25913;&#21518;&#30340;&#29256;&#26412;&#65292;&#32473;&#20986;&#21512;&#32422;&#65292;&#21253;&#25324;&#29992;&#27861;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..9)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#23450;&#20041; <span class="stt">remove</span>&#12290;&#23427;&#31867;&#20284;&#20110; <span class="stt">remove-first</span>&#65292;&#20294;&#20250;&#20174;&#31526;&#21495;&#21015;&#34920;&#20013;&#31227;&#38500;&#25152;&#26377;&#32473;&#23450;&#31526;&#21495;&#65292;
&#32780;&#19981;&#21482;&#26159;&#31532;&#19968;&#20010;&#12290;</p></blockquote><h5 class="heading">1.2.4<tt>&nbsp;</tt><a name="(part._s1..2..4)"></a><span class="stt">occurs-free?</span><span class="button-group"><a href="#(part._s1..2..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._98))"></a>
<a name="(idx._(gentag._99))"></a>
<a name="(idx._(gentag._100))"></a>
&#36807;&#31243; <span class="stt">occurs-free?</span> &#21462;&#19968;&#20010;&#21464;&#37327; <span class="texMathInline">var</span>&#65292;&#30001; Scheme &#31526;&#21495;&#34920;&#31034;&#65307;&#19968;&#20010; lambda &#28436;&#31639;
&#34920;&#36798;&#24335; <span class="texMathInline">exp</span>&#65292;&#24418;&#22914;&#65307;&#21028;&#26029; <span class="texMathInline">var</span> &#26159;&#21542;&#33258;&#30001;&#20986;&#29616;&#20110; <span class="texMathInline">exp</span>&#12290;
&#22914;&#26524;&#19968;&#20010;&#21464;&#37327;&#20986;&#29616;&#20110;&#34920;&#36798;&#24335; <span class="texMathInline">exp</span> &#20013;&#65292;&#20294;&#19981;&#22312;&#26576;&#19968; <span class="stt">lambda</span> &#32465;&#23450;&#20043;&#20869;&#65292;&#25105;&#20204;&#35828;&#35813;&#21464;
&#37327;<span class="emph">&#33258;&#30001;&#20986;&#29616;</span> (<span class="emph">occur free</span>) &#20110;&#34920;&#36798;&#24335; <span class="texMathInline">exp</span> &#20013;&#12290;&#20363;&#22914;&#65292;
<a name="(idx._(gentag._101))"></a>
<a name="(idx._(gentag._102))"></a></p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">y</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">lambda</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">lambda</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">lambda</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">lambda</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">lambda</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">z</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">z</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#21487;&#20197;&#36981;&#29031; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#35821;&#27861;&#35299;&#20915;&#27492;&#38382;&#39064;&#65306;</p><blockquote class="NormalFont"><p><span class="Iidentity">\begin{align*}\mathit{LcExp} &amp;::= <span class="Iidentity">\mathit{Identifier}</span> \\
               &amp;::= <span class="stt">(lambda (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) </span><span class="Iidentity">\mathit{LcExp}</span><span class="stt">)</span> \\
               &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{LcExp}</span><span class="stt"> </span><span class="Iidentity">\mathit{LcExp}</span><span class="stt">)</span>\end{align*}</span></p></blockquote><p>&#25105;&#20204;&#21487;&#20197;&#24635;&#32467;&#20986;&#35268;&#21017;&#30340;&#21508;&#31181;&#24773;&#20917;&#65306;</p><ul><li><p>&#33509;&#34920;&#36798;&#24335; <span class="texMathInline">e</span> &#26159;&#19968;&#21464;&#37327;&#65292;&#21017;&#24403;&#19988;&#20165;&#24403; <span class="texMathInline">x</span> &#19982; <span class="texMathInline">e</span> &#30456;&#21516;&#26102;&#65292;&#21464;&#37327; <span class="texMathInline">x</span> &#33258;
&#30001;&#20986;&#29616;&#20110; <span class="texMathInline">e</span>&#12290;</p></li><li><p>&#33509;&#34920;&#36798;&#24335; <span class="texMathInline">e</span> &#24418;&#22914; <span class="stt">(</span><span class="texMathInline">lambda</span><span class="stt"> (</span><span class="texMathInline">y</span><span class="stt">) </span><span class="texMathInline">e{}&rsquo;</span><span class="stt">)</span>&#65292;&#21017;&#24403;&#19988;&#20165;&#24403; <span class="texMathInline">y</span> &#19981;
&#21516;&#20110; <span class="texMathInline">x</span> &#19988; <span class="texMathInline">x</span> &#33258;&#30001;&#20986;&#29616;&#20110; <span class="texMathInline">e{}&rsquo;</span> &#26102;&#65292;&#21464;&#37327; <span class="texMathInline">x</span> &#33258;&#30001;&#20986;&#29616;&#20110; <span class="texMathInline">e</span>&#12290;</p></li><li><p>&#33509;&#34920;&#36798;&#24335; <span class="texMathInline">e</span> &#24418;&#22914; <span class="stt">(</span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt">)</span>&#65292;&#21017;&#24403;&#19988;&#20165;&#24403; <span class="texMathInline">x</span> &#33258;&#30001;&#20986;&#29616;&#20110;
<span class="texMathInline">e_1</span> &#25110; <span class="texMathInline">e_2</span> &#26102;&#65292;<span class="texMathInline">x</span> &#33258;&#30001;&#20986;&#29616;&#20110; <span class="texMathInline">e</span>&#12290;&#36825;&#37324;&#30340;&#8220;&#25110;
&#8221;&#34920;&#31034;<span class="emph">&#28085;&#30422;&#25110;</span> (<span class="emph">inclusive or</span>)&#65292;&#24847;&#20026;&#23427;&#21253;&#21547; <span class="texMathInline">x</span> &#21516;&#26102;&#33258;&#30001;&#20986;&#29616;
&#20110; <span class="texMathInline">e_1</span> &#21644; <span class="texMathInline">e_2</span> &#30340;&#24773;&#20917;&#12290;&#25105;&#20204;&#36890;&#24120;&#29992;&#8220;&#25110;&#8221;&#34920;&#31034;&#36825;
&#31181;&#24847;&#24605;&#12290;
<a name="(idx._(gentag._103))"></a>
<a name="(idx._(gentag._104))"></a></p></li></ul><p>&#20320;&#21487;&#20197;&#35828;&#26381;&#33258;&#24049;&#65292;&#36825;&#20123;&#35268;&#21017;&#28085;&#30422;&#20102;&#8220;<span class="texMathInline">x</span> &#19981;&#22312;&#26576;&#19968; lambda &#32465;&#23450;&#20043;&#20013;
&#8221;&#34920;&#31034;&#30340;&#25152;&#26377;&#24847;&#24605;&#12290;
<a name="(idx._(gentag._105))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex1..10)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#24120;&#29992;&#8220;&#25110;&#8221;&#34920;&#31034;&#8220;&#28085;&#30422;&#25110;
&#8221;&#12290;&#8220;&#25110;&#8221;&#36824;&#26377;&#20160;&#20040;&#21547;&#20041;&#65311;<br/></p></blockquote><p>&#28982;&#21518;&#65292;&#23450;&#20041; <span class="stt">occurs-free?</span> &#23601;&#24456;&#23481;&#26131;&#20102;&#12290;&#22240;&#20026;&#26377;&#19977;&#31181;&#24773;&#20917;&#35201;&#26816;&#26597;&#65292;&#25105;&#20204;&#19981;&#29992; Scheme
&#30340; <span class="stt">if</span>&#65292;&#32780;&#26159;&#29992; <span class="stt">cond</span>&#12290;&#22312; Scheme &#20013;&#65292;&#33509; <span class="texMathInline">exp_1</span> &#25110; <span class="texMathInline">exp_2</span> &#36820;&#22238;&#30495;&#20540;&#65292;
&#21017; <span class="stt">(or </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">)</span> &#36820;&#22238;&#30495;&#20540;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a name="(elem._occurs-free-1~3f)"></a><span style="font-weight: bold"><span class="stt">occurs-free?</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{LcExp} \to \mathit{Bool}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">&#33509;&#31526;&#21495; </span><span class="texMathInline">var</span><span class="stt"> &#33258;&#30001;&#20986;&#29616;&#20110; </span><span class="texMathInline">exp</span><span class="stt">&#65292;&#36820;&#22238; #t&#65292;&#21542;&#21017;&#36820;&#22238; #f</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">occurs-free?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lambda</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">caddr</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#19968;&#36807;&#31243;&#30053;&#26174;&#26214;&#28073;&#12290;&#27604;&#22914;&#65292;&#24456;&#38590;&#24324;&#26126;&#30333; <span class="stt">(car (cadr exp))</span> &#25351;&#20195; <span class="stt">lambda</span> &#34920;&#36798;&#24335;
&#20013;&#30340;&#21464;&#37327;&#22768;&#26126;&#65292;&#25110;&#32773; <span class="stt">(caddr exp)</span> &#25351;&#20195; <span class="stt">lambda</span> &#34920;&#36798;&#24335;&#30340;&#20027;&#20307;&#12290;&#22312;
<a href="#%28part._s2..5%29" data-pltdoc="x">&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</a>&#65292;&#25105;&#20204;&#23637;&#31034;&#22914;&#20309;&#26174;&#33879;&#25913;&#21892;&#36825;&#31181;&#24773;&#20917;&#12290;
<a name="(idx._(gentag._106))"></a>
<a name="(idx._(gentag._107))"></a></p><h5 class="heading">1.2.5<tt>&nbsp;</tt><a name="(part._s1..2..5)"></a><span class="stt">subst</span><span class="button-group"><a href="#(part._s1..2..5)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._108))"></a>
<a name="(idx._(gentag._109))"></a>
<a name="(idx._(gentag._110))"></a>
<a name="(idx._(gentag._111))"></a>
<a name="(idx._(gentag._112))"></a>
<a name="(idx._(gentag._113))"></a>
<a name="(idx._(gentag._114))"></a>
<a name="(idx._(gentag._115))"></a>
&#36807;&#31243; <span class="stt">subst</span> &#21462;&#19977;&#20010;&#21442;&#25968;&#65306;&#20004;&#20010;&#31526;&#21495; <span class="stt">new</span> &#21644; <span class="stt">old</span>&#65292;&#19968;&#20010; s-list&#65292;
<span class="stt">slist</span>&#12290;&#23427;&#26816;&#26597; <span class="stt">slist</span> &#30340;&#25152;&#26377;&#20803;&#32032;&#65292;&#36820;&#22238;&#31867;&#20284; <span class="stt">slist</span> &#30340;&#26032;&#21015;&#34920;&#65292;&#20294;&#25226;&#20854;&#20013;
&#25152;&#26377;&#30340; <span class="stt">old</span> &#26367;&#25442;&#20026; <span class="stt">new</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'((a<span class="stt"> </span>c)<span class="stt"> </span>(a<span class="stt"> </span>()<span class="stt"> </span>d))</span></p></td></tr></table></blockquote></blockquote><p>&#22240;&#20026; <span class="stt">subst</span> &#23450;&#20041;&#20110; s-list &#19978;&#65292;&#23427;&#30340;&#32467;&#26500;&#24212;&#24403;&#21453;&#26144; s-list &#30340;&#23450;&#20041;&#65288;&#65289;&#65306;</p><blockquote class="NormalFont"><p><span class="Iidentity">\begin{align*}\mathit{S\mbox{-}list} &amp;::= <span class="stt">(</span><span class="Iidentity">\{\mathit{S\mbox{-}exp}\}^*</span><span class="stt">)</span> \\
\mathit{S\mbox{-}exp} &amp;::= \mathit{Symbol} \mid \mathit{S\mbox{-}list}\end{align*}</span></p></blockquote><p>&#20811;&#33713;&#23612;&#26143;&#21495;&#31616;&#27905;&#22320;&#25551;&#36848;&#20102;&#38598;&#21512; s-list&#65292;&#20294;&#23545;&#20889;&#31243;&#24207;&#27809;&#20160;&#20040;&#29992;&#12290;&#22240;&#27492;&#25105;&#20204;&#30340;&#31532;&#19968;&#27493;&#26159;&#25243;&#24320;&#20811;
&#33713;&#23612;&#26143;&#21495;&#37325;&#20889;&#35821;&#27861;&#12290;&#24471;&#20986;&#30340;&#35821;&#27861;&#34920;&#26126;&#65292;&#25105;&#20204;&#30340;&#36807;&#31243;&#24212;&#24403;&#35813;&#36882;&#24402;&#22788;&#29702; s-list &#30340;&#39318;&#39033;&#21644;&#20313;&#39033;&#12290;</p><blockquote class="NormalFont"><p><span class="Iidentity">\begin{align*}\mathit{S\mbox{-}list} &amp;::= <span class="stt">()</span> \\
                       &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{S\mbox{-}exp}</span><span class="stt"> . </span><span class="Iidentity">\mathit{S\mbox{-}list}</span><span class="stt">)</span> \\
 \mathit{S\mbox{-}exp} &amp;::= \mathit{Symbol} \mid \mathit{S\mbox{-}list}\end{align*}</span></p></blockquote><p>&#36825;&#19968;&#20363;&#23376;&#27604;&#20043;&#21069;&#30340;&#22797;&#26434;&#65292;&#22240;&#20026;&#23427;&#30340;&#35821;&#27861;&#36755;&#20837;&#21253;&#21547;&#20004;&#20010;&#38750;&#32456;&#32467;&#31526;&#65292;<span class="texMathInline">S\mbox{-}list</span> &#21644;
<span class="texMathInline">S\mbox{-}exp</span>&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#38656;&#35201;&#20004;&#20010;&#36807;&#31243;&#65292;&#19968;&#20010;&#22788;&#29702; <span class="texMathInline">S\mbox{-}list</span>&#65292;&#21478;&#19968;&#20010;&#22788;&#29702;
<span class="texMathInline">S\mbox{-}exp</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">subst</span></span> : <span class="Iidentity">$\mathit{Sym} \times \mathit{Sym} \times \mathit{S\mbox{-}list} \to \mathit{S\mbox{-}list}$</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">new</span><span class="hspace">&nbsp;</span><span class="RktSym">old</span><span class="hspace">&nbsp;</span><span class="RktSym">slist</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">subst-in-s-exp</span></span> : <span class="Iidentity">$\mathit{Sym} \times \mathit{Sym} \times \mathit{S\mbox{-}exp} \to \mathit{S\mbox{-}exp}$</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">subst-in-s-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">new</span><span class="hspace">&nbsp;</span><span class="RktSym">old</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#39318;&#20808;&#22788;&#29702; <span class="stt">subst</span>&#12290;&#22914;&#26524;&#21015;&#34920;&#20026;&#31354;&#65292;&#19981;&#38656;&#35201;&#26367;&#25442; <span class="stt">old</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">subst</span></span> : <span class="Iidentity">$\mathit{Sym} \times \mathit{Sym} \times \mathit{S\mbox{-}list} \to \mathit{S\mbox{-}list}$</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">new</span><span class="hspace">&nbsp;</span><span class="RktSym">old</span><span class="hspace">&nbsp;</span><span class="RktSym">slist</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">slist</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#22914;&#26524; <span class="stt">slist</span> &#38750;&#31354;&#65292;&#23427;&#30340;&#39318;&#39033;&#26159;&#19968;&#20010; <span class="texMathInline">S\mbox{-}exp</span>&#65292;&#20313;&#39033;&#26159;&#21478;&#19968; s-list&#12290;&#36825;&#26102;&#65292;
&#31572;&#26696;&#24212;&#24403;&#26159;&#19968;&#20010;&#21015;&#34920;&#65292;&#23427;&#30340;&#39318;&#39033;&#26159;&#25226; <span class="stt">slist</span> &#39318;&#39033;&#20013;&#30340; <span class="stt">old</span> &#26367;&#25442;&#20026; <span class="stt">new</span> &#30340;
&#32467;&#26524;&#65292;&#23427;&#30340;&#20313;&#39033;&#26159;&#25226; <span class="stt">slist</span> &#20313;&#39033;&#20013;&#30340; <span class="stt">old</span> &#26367;&#25442;&#20026; <span class="stt">new</span> &#30340;&#32467;&#26524;&#12290;&#22240;&#20026;
<span class="stt">slist</span> &#30340;&#39318;&#39033;&#26159; <span class="texMathInline">S\mbox{-}exp</span> &#30340;&#20803;&#32032;&#65292;&#25105;&#20204;&#29992; <span class="stt">subst-in-s-exp</span>&#35299;&#20915;&#36825;&#19968;
&#23376;&#38382;&#39064;&#12290;&#22240;&#20026; <span class="stt">slist</span> &#30340;&#20313;&#39033;&#26159; <span class="texMathInline">S\mbox{-}list</span> &#30340;&#20803;&#32032;&#65292;&#25105;&#20204;&#36882;&#24402;&#35843;&#29992;
<span class="stt">subst</span> &#22788;&#29702;&#23427;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a name="(elem._subst)"></a><span style="font-weight: bold"><span class="stt">subst</span></span> : <span class="Iidentity">$\mathit{Sym} \times \mathit{Sym} \times \mathit{S\mbox{-}list} \to \mathit{S\mbox{-}list}$</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">new</span><span class="hspace">&nbsp;</span><span class="RktSym">old</span><span class="hspace">&nbsp;</span><span class="RktSym">slist</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">slist</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td>\begin{mdframed}[style=codediff]</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subst-in-s-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">new</span><span class="hspace">&nbsp;</span><span class="RktSym">old</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">slist</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">new</span><span class="hspace">&nbsp;</span><span class="RktSym">old</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">slist</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\end{mdframed}</td></tr></table></blockquote></blockquote><p>&#29616;&#22312;&#26469;&#22788;&#29702; <span class="stt">subst-in-s-exp</span>&#12290;&#30001;&#35821;&#27861;&#65292;&#21487;&#30693;&#31526;&#21495;&#34920;&#36798;&#24335; <span class="stt">sexp</span> &#25110;&#32773;&#26159;&#31526;&#21495;&#65292;&#25110;
&#32773;&#26159; s-list&#12290;&#22914;&#26524;&#23427;&#26159;&#31526;&#21495;&#65292;&#37027;&#20040;&#24471;&#26816;&#26597;&#23427;&#19982;&#31526;&#21495; <span class="stt">old</span> &#26159;&#21542;&#30456;&#21516;&#12290;&#22914;&#26524;&#26159;&#65292;&#31572;&#26696;&#20026;
<span class="stt">new</span>&#65307;&#21542;&#21017;&#65292;&#31572;&#26696;&#36824;&#26159; <span class="stt">sexp</span>&#12290;&#22914;&#26524; <span class="stt">sexp</span> &#26159;&#19968;&#20010; s-list&#65292;&#37027;&#20040;&#25105;&#20204;&#36882;&#24402;&#35843;
&#29992; <span class="stt">subst</span> &#25214;&#20986;&#31572;&#26696;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">subst-in-s-exp</span></span> : <span class="Iidentity">$\mathit{Sym} \times \mathit{Sym} \times \mathit{S\mbox{-}exp} \to \mathit{S\mbox{-}exp}$</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">subst-in-s-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">new</span><span class="hspace">&nbsp;</span><span class="RktSym">old</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td>\begin{mdframed}[style=codediff]</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="hspace">&nbsp;</span><span class="RktSym">old</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">new</span><span class="hspace">&nbsp;</span><span class="RktSym">old</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\end{mdframed}</td></tr></table></blockquote></blockquote><p>&#22240;&#20026;&#25105;&#20204;&#20005;&#26684;&#20381;&#29031; <span class="texMathInline">\mathit{S\mbox{-}list}</span> &#21644; <span class="texMathInline">\mathit{S\mbox{-}exp}</span> &#30340;&#23450;&#20041;&#65292;
&#36825;&#20010;&#36882;&#24402;&#19968;&#23450;&#20250;&#32456;&#27490;&#12290;&#22240;&#20026; <span class="stt">subst</span> &#21644; <span class="stt">subst-in-s-exp</span> &#36882;&#24402;&#35843;&#29992;&#24444;&#27492;&#65292;&#25105;&#20204;&#31216;
&#20043;&#20026;<span class="emph">&#20114;&#36882;&#24402;</span> (<span class="emph">mutually recursive</span>)&#12290;
<a name="(idx._(gentag._116))"></a></p><p>&#25226; <span class="stt">subst</span> &#25286;&#35299;&#20026;&#20004;&#20010;&#36807;&#31243;&#8212;&#8212;&#27599;&#20010;&#22788;&#29702;&#19968;&#31181;&#21477;&#27861;&#31867;&#21035;&#8212;&#8212;&#26159;&#20010;&#37325;&#35201;&#25216;&#24039;&#12290;&#23545;&#26356;&#20026;&#22797;&#26434;&#30340;&#31243;
&#24207;&#65292;&#25105;&#20204;&#24471;&#20197;&#27599;&#27425;&#32771;&#34385;&#19968;&#20010;&#21477;&#27861;&#31867;&#21035;&#65292;&#20174;&#32780;&#21270;&#32321;&#20026;&#31616;&#12290;
<a name="(idx._(gentag._117))"></a>
<a name="(idx._(gentag._118))"></a>
<a name="(idx._(gentag._119))"></a>
<a name="(idx._(gentag._120))"></a>
<a name="(idx._(gentag._121))"></a>
<a name="(idx._(gentag._122))"></a>
<a name="(idx._(gentag._123))"></a>
<a name="(idx._(gentag._124))"></a>
<a name="(idx._(gentag._125))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex1..11)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><span class="stt">subst-in-s-exp</span> &#30340;&#26368;&#21518;&#19968;&#34892;&#20013;&#65292;&#36882;&#24402;&#26159;&#38024;&#23545; <span class="stt">sexp</span> &#32780;&#38750;&#26356;&#23567;&#30340;&#23376;&#32467;&#26500;&#65292;&#20026;&#20160;
&#20040;&#19968;&#23450;&#33021;&#32456;&#27490;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..12)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._126))"></a>
&#29992; <span class="stt">subst-in-s-exp</span> &#30340;&#23450;&#20041;&#26367;&#25442; <span class="stt">subst</span> &#20013;&#30340;&#35843;&#29992;&#65292;&#20174;&#32780;&#25490;&#38500;&#36825;&#27425;&#35843;&#29992;&#65292;&#28982;&#21518;&#31616;
&#21270;&#24471;&#21040;&#30340;&#36807;&#31243;&#12290;&#32467;&#26524;&#20013;&#30340; <span class="stt">subst</span> &#24212;&#24403;&#19981;&#38656;&#35201; <span class="stt">subst-in-s-exp</span>&#12290;&#36825;&#31181;&#25216;&#24039;
&#21483;&#20570;<span class="emph">&#20869;&#32852;</span> (<span class="emph">inlining</span>)&#65292;&#29992;&#20110;&#20248;&#21270;&#32534;&#35793;&#22120;&#12290;
<a name="(idx._(gentag._127))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..13)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20174;&#25490;&#38500; <span class="Iidentity">$S\mbox{-}list$</span> &#35821;&#27861;&#20869;&#30340;&#20811;&#33713;&#23612;&#26143;&#21495;&#24320;&#22987;&#12290;&#20381;&#29031;&#21407;&#26412;&#30340;
&#35821;&#27861;&#65292;&#29992; <span class="stt">map</span> &#37325;&#20889; <span class="stt">subst</span>&#12290;<br/></p></blockquote><p><a name="(idx._(gentag._128))"></a>
<a name="(idx._(gentag._129))"></a>
&#29616;&#22312;&#65292;&#25105;&#20204;&#26377;&#20102;&#32534;&#20889;&#36807;&#31243;&#22788;&#29702;&#24402;&#32435;&#25968;&#25454;&#38598;&#30340;&#31373;&#38376;&#65292;&#26469;&#25226;&#23427;&#24635;&#32467;&#25104;&#19968;&#21477;&#21475;&#35776;&#12290;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#36981;&#24490;&#35821;&#27861;&#65281;</span><a name="(idx._(gentag._130))"></a></p></blockquote><p class="TipContent">&#23450;&#20041;&#36807;&#31243;&#22788;&#29702;&#24402;&#32435;&#24335;&#25968;&#25454;&#26102;&#65292;&#31243;&#24207;&#30340;&#32467;&#26500;&#24212;&#24403;&#21453;&#26144;&#25968;&#25454;&#30340;&#32467;
&#26500;&#12290;</p></blockquote><p>&#26356;&#20934;&#30830;&#22320;&#35828;&#65306;</p><ul><li><p><a name="(idx._(gentag._131))"></a>
&#20026;&#35821;&#27861;&#20013;&#30340;&#27599;&#20010;&#38750;&#32456;&#32467;&#31526;&#32534;&#20889;&#19968;&#20010;&#36807;&#31243;&#12290;&#36825;&#19968;&#36807;&#31243;&#36127;&#36131;&#22788;&#29702;&#30456;&#24212;&#38750;&#32456;&#32467;&#31526;&#30340;&#25968;&#25454;&#65292;
&#19981;&#20570;&#20854;&#20182;&#12290;</p></li><li><p>&#22312;&#27599;&#20010;&#36807;&#31243;&#20013;&#65292;&#20026;&#30456;&#24212;&#38750;&#32456;&#32467;&#31526;&#30340;&#27599;&#19968;&#29983;&#25104;&#24335;&#20889;&#19968;&#20998;&#25903;&#12290;&#20320;&#21487;&#33021;&#38656;&#35201;&#39069;&#22806;&#30340;&#20998;&#25903;&#32467;
&#26500;&#65292;&#20294;&#36825;&#26679;&#25165;&#33021;&#36215;&#27493;&#12290;&#23545;&#29983;&#25104;&#24335;&#21491;&#36793;&#20986;&#29616;&#30340;&#27599;&#20010;&#38750;&#32456;&#32467;&#31526;&#65292;&#36882;&#24402;&#35843;&#29992;&#30456;&#24212;&#30340;&#36807;&#31243;&#12290;
<a name="(idx._(gentag._132))"></a>
<a name="(idx._(gentag._133))"></a>
<a name="(idx._(gentag._134))"></a></p></li></ul><h4 class="heading">1.3<tt>&nbsp;</tt><a name="(part._s1..3)"></a>&#36741;&#21161;&#36807;&#31243;&#21644;&#19978;&#19979;&#25991;&#21442;&#25968;<span class="button-group"><a href="#(part._s1..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._135))"></a>
<a name="(idx._(gentag._136))"></a>
<a name="(idx._(gentag._137))"></a>
&#31373;&#38376;<span class="emph">&#36981;&#24490;&#35821;&#27861;</span>&#24456;&#26377;&#25928;&#65292;&#26377;&#26102;&#21364;&#36824;&#26159;&#19981;&#22815;&#12290;&#32771;&#34385;&#36807;&#31243; <span class="stt">number-elements</span>&#12290;&#36825;
&#19968;&#36807;&#31243;&#21462;&#20219;&#20309;&#21015;&#34920; <span class="stt">(</span><span class="texMathInline">v_0</span><span class="stt"> </span><span class="texMathInline">v_1</span><span class="stt"> </span><span class="texMathInline">v_2</span><span class="stt"> ...)</span> &#65292;&#36820;&#22238;&#19968;&#21015;&#34920; <span class="stt">((0</span><span class="stt">
</span><span class="texMathInline">v_0</span><span class="stt">) (1 </span><span class="texMathInline">v_1</span><span class="stt">) (2 </span><span class="texMathInline">v_2</span><span class="stt">) ...)</span>&#12290;</p><p>&#25105;&#20204;&#29992;&#36807;&#30340;&#37027;&#31181;&#30452;&#25286;&#27861;&#19981;&#20945;&#25928;&#65292;&#22240;&#20026;&#27809;&#26377;&#26126;&#26174;&#30340;&#26041;&#27861;&#33021;&#20174; <span class="stt">(number-elements (cdr
lst))</span> &#24471;&#20986; <span class="stt">(number-elements lst)</span> &#65288;&#20294;&#26159;&#65292;&#30475;&#30475;&#65289;&#12290;</p><p><a name="(idx._(gentag._138))"></a>
&#35201;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#25105;&#20204;<span class="emph">&#25918;&#23485;</span> (<span class="emph">generalize</span>) &#38382;&#39064;&#12290;&#25105;&#20204;&#20889;&#19968;&#20010;&#36807;&#31243;
<span class="stt">number-elements-from</span> &#65292;&#23427;&#21462;&#19968;&#20010;&#39069;&#22806;&#21442;&#25968; <span class="texMathInline">n</span>&#65292;&#25351;&#23450;&#36215;&#22987;&#32534;&#21495;&#12290;&#29992;&#36882;&#24402;&#22788;&#29702;&#21015;&#34920;&#65292;
&#36825;&#20010;&#36807;&#31243;&#24456;&#23481;&#26131;&#20889;&#12290;
<a name="(idx._(gentag._139))"></a></p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">number-elements-from</span></span> : <span class="Iidentity">$\mathit{Listof}(\mathit{SchemeVal}) \times \mathit{Int} \to \mathit{Listof}(\mathit{List}(\mathit{Int}, \mathit{SchemeVal}))$</span></td></tr><tr><td><span class="texMathInline">\begin{alignedat}{-1}<span style="font-weight: bold">&#29992;&#27861;</span> : &amp;<span class="stt">(number-elements-from </span><span class="stt">&rsquo;</span><span class="stt">(</span><span class="texMathInline">v_0</span><span class="stt"> </span><span class="texMathInline">v_1</span><span class="stt"> </span><span class="texMathInline">v_2</span><span class="stt"> ...) n)</span> \\ &amp;\hphantom{x}= <span class="stt">((</span><span class="texMathInline">n</span><span class="stt"> </span><span class="texMathInline">v_0</span><span class="stt">) (</span><span class="texMathInline">n + 1</span><span class="stt"> </span><span class="texMathInline">v_1</span><span class="stt">) (</span><span class="texMathInline">n + 2</span><span class="stt"> </span><span class="texMathInline">v_2</span><span class="stt">) ...)</span>\end{alignedat}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">number-elements-from</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lst</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-elements-from</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#21512;&#32422;&#30340;&#26631;&#39064;&#21578;&#35785;&#25105;&#20204;&#36825;&#20010;&#36807;&#31243;&#21462;&#20004;&#20010;&#21442;&#25968;&#65292;&#19968;&#20010;&#21015;&#34920;&#65288;&#21253;&#21547;&#20219;&#24847; Scheme &#20540;&#65289;&#21644;&#19968;&#20010;&#25972;&#25968;&#65292;
&#36820;&#22238;&#19968;&#20010;&#21015;&#34920;&#65292;&#21015;&#34920;&#20013;&#30340;&#27599;&#20010;&#20803;&#32032;&#26159;&#21253;&#21547;&#20004;&#20010;&#20803;&#32032;&#30340;&#21015;&#34920;&#65306;&#19968;&#20010;&#25972;&#25968;&#65292;&#19968;&#20010; Scheme &#20540;&#12290;</p><p>&#19968;&#26086;&#25105;&#20204;&#23450;&#20041;&#20102; <span class="stt">number-elements-from</span>&#65292;&#24456;&#23481;&#26131;&#20889;&#20986;&#25152;&#38656;&#30340;&#36807;&#31243;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a name="(elem._n-e)"></a><span style="font-weight: bold"><span class="stt">number-elements</span></span> : <span class="Iidentity">$\mathit{Listof}(\mathit{SchemeVal}) \to \mathit{Listof}(\mathit{List}(\mathit{Int}, \mathit{SchemeVal}))$</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">number-elements</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lst</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-elements-from</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._140))"></a></div></p></blockquote><p>&#36825;&#37324;&#26377;&#20004;&#20010;&#35201;&#28857;&#12290;&#39318;&#20808;&#65292;&#36807;&#31243; <span class="stt">number-elements-from</span> &#30340;&#23450;&#20041;&#29420;&#31435;&#20110;
<span class="stt">number-elements</span>&#12290;&#31243;&#24207;&#21592;&#32463;&#24120;&#35201;&#20889;&#19968;&#20010;&#36807;&#31243;&#65292;&#21482;&#35843;&#29992;&#26576;&#20010;&#36741;&#21161;&#36807;&#31243;&#65292;&#24182;&#20256;&#36882;&#39069;&#22806;&#30340;&#24120;
&#37327;&#21442;&#25968;&#12290;&#38500;&#38750;&#25105;&#20204;&#29702;&#35299;&#36741;&#21161;&#36807;&#31243;&#23545;&#21442;&#25968;&#30340;<span class="emph">&#27599;&#20010;</span>&#20540;&#20570;&#20160;&#20040;&#65292;&#25105;&#20204;&#24456;&#38590;&#29702;&#35299;&#35843;&#29992;&#23427;&#30340;&#36807;
&#31243;&#20570;&#20160;&#20040;&#12290;&#36825;&#32473;&#20102;&#25105;&#20204;&#19968;&#26465;&#21475;&#35776;&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><a name="(elem._no-myth)"></a><span style="font-weight: bold">&#36991;&#20813;&#31070;&#31192;&#23567;&#24037;&#20855;&#65281;</span>
<a name="(idx._(gentag._141))"></a></p></blockquote><p class="TipContent">&#23450;&#20041;&#36741;&#21161;&#36807;&#31243;&#26102;&#65292;&#24635;&#26159;&#25351;&#26126;&#23427;&#23545;&#25152;&#26377;&#21442;&#25968;&#20540;&#20570;&#20160;&#20040;&#65292;&#32780;&#19981;&#21482;
&#26159;&#21021;&#22987;&#20540;&#12290;</p></blockquote><p><a name="(idx._(gentag._142))"></a>
<a name="(idx._(gentag._143))"></a>
&#20854;&#27425;&#65292;<span class="stt">number-elements-from</span> &#30340;&#20004;&#20010;&#21442;&#25968;&#21508;&#26377;&#20316;&#29992;&#12290;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;&#25105;&#20204;&#35201;&#22788;&#29702;&#30340;&#21015;&#34920;&#65292;
&#38543;&#27599;&#19968;&#27425;&#36882;&#24402;&#35843;&#29992;&#32780;&#20943;&#23567;&#12290;&#32780;&#31532;&#20108;&#20010;&#21442;&#25968;&#65292;&#21017;&#26159;&#23545;&#25105;&#20204;&#24403;&#21069;&#20219;&#21153;<span class="emph">&#19978;&#19979;&#25991;</span> (<span class="emph">context</span>)
&#30340;&#25277;&#35937;&#12290;&#22312;&#26412;&#20363;&#20013;&#65292;&#24403;&#35843;&#29992; <span class="stt">number-elements</span> &#26102;&#65292;&#25105;&#20204;&#26368;&#32456;&#35843;&#29992;
<span class="stt">number-elements-from</span> &#22788;&#29702;&#21407;&#21015;&#34920;&#30340;&#27599;&#20010;&#23376;&#21015;&#34920;&#12290;&#31532;&#20108;&#20010;&#21442;&#25968;&#21578;&#30693;&#25105;&#20204;&#23376;&#21015;&#34920;&#22312;&#21407;&#21015;
&#34920;&#20013;&#30340;&#20301;&#32622;&#12290;&#38543;&#36882;&#24402;&#35843;&#29992;&#65292;&#23427;&#19981;&#20943;&#21453;&#22686;&#65292;&#22240;&#20026;&#25105;&#20204;&#27599;&#27425;&#32463;&#36807;&#21407;&#21015;&#34920;&#30340;&#19968;&#20010;&#20803;&#32032;&#12290;&#26377;&#26102;&#25105;&#20204;&#31216;
&#20043;&#20026;<span class="emph">&#19978;&#19979;&#25991;&#21442;&#25968;</span> (<span class="emph">context argument</span>)&#65292;&#25110;&#32773;<span class="emph">&#32487;&#25215;
&#23646;&#24615;</span> (<span class="emph">inherited attribute</span>)&#12290;
<a name="(idx._(gentag._144))"></a>
<a name="(idx._(gentag._145))"></a></p><p>&#21478;&#19968;&#20010;&#20363;&#23376;&#26159;&#21521;&#37327;&#27714;&#21644;&#12290;</p><p>&#35201;&#27714;&#21015;&#34920;&#20013;&#21508;&#39033;&#30340;&#21644;&#65292;&#25105;&#20204;&#21487;&#20197;&#36981;&#24490;&#35821;&#27861;&#65292;&#36882;&#24402;&#22788;&#29702;&#21015;&#34920;&#30340;&#20313;&#39033;&#12290;&#37027;&#20040;&#25105;&#20204;&#30340;&#36807;&#31243;&#30475;&#36215;&#26469;&#20687;
&#26159;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><a name="(idx._(gentag._146))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a name="(elem._list-sum)"></a><span style="font-weight: bold"><span class="stt">list-sum</span></span> : <span class="Iidentity">$\mathit{Listof}(\mathit{Int}) \to \mathit{Int}$</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">list-sum</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loi</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">loi</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">loi</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">loi</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p></blockquote><p>&#20294;&#26159;&#26080;&#27861;&#25353;&#29031;&#36825;&#31181;&#26041;&#24335;&#22788;&#29702;&#21521;&#37327;&#65292;&#22240;&#20026;&#23427;&#20204;&#19981;&#33021;&#22815;&#24456;&#26041;&#20415;&#22320;&#25286;&#35299;&#12290;</p><p><div class="SIntrapara"><a name="(idx._(gentag._147))"></a>
&#22240;&#20026;&#25105;&#20204;&#26080;&#27861;&#25286;&#35299;&#21521;&#37327;&#65292;&#25105;&#20204;&#25918;&#23485;&#38382;&#39064;&#65292;&#20026;&#21521;&#37327;&#26576;&#19968;&#37096;&#20998;&#27714;&#21644;&#12290;&#38382;&#39064;&#23450;&#20041;&#20026;&#65292;&#35745;&#31639;
</div><div class="SIntrapara"><blockquote class="SubFlow"><p><span class="texMathDisplay">\sum_{i=0}^{i=length(v)-1} v_i</span>
&#20854;&#20013;&#65292;<span class="texMathInline">v</span> &#26159;&#25972;&#25968;&#21521;&#37327;&#12290;&#36890;&#36807;&#25226;&#19978;&#30028;&#25913;&#20026;&#19968;&#20010;&#21442;&#25968; <span class="texMathInline">n</span>&#65292;&#25105;&#20204;&#25918;&#23485;&#20102;&#21407;&#38382;&#39064;&#65292;&#25152;&#20197;&#26032;&#30340;
&#20219;&#21153;&#26159;&#35745;&#31639;
<span class="texMathDisplay">\sum_{i=0}^{i=n} v_i</span>
&#20854;&#20013;&#65292;<span class="texMathInline">0 \leq n &lt; length(v)</span>&#12290;
<a name="(idx._(gentag._148))"></a></p></blockquote></div></p><p><a name="(idx._(gentag._149))"></a>
<a name="(idx._(gentag._150))"></a>
&#25353;&#29031;&#23450;&#20041;&#65292;&#29992;&#24402;&#32435;&#27861;&#22788;&#29702;&#31532;&#20108;&#20010;&#21442;&#25968; <span class="texMathInline">n</span>&#65292;&#21487;&#20197;&#30452;&#25509;&#20889;&#20986;&#27492;&#36807;&#31243;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">partial-vector-sum</span></span> : <span class="texMathInline">\mathit{Vectorof}(\mathit{Int}) \times \mathit{Int} \to \mathit{Int}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">&#33509; </span><span class="texMathInline">0 \leq n &lt; length(v)</span><span class="stt">&#65292;&#21017; </span><span class="Iidentity">\[<span class="stt">(partial-vector-sum </span><span class="Iidentity">v</span><span class="stt"> </span><span class="Iidentity">n</span><span class="stt">) = </span><span class="Iidentity">\sum_{i=0}^{i=n} v_i</span>\]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">partial-vector-sum</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vector-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vector-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">partial-vector-sum</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._151))"></a></div></p></blockquote><p>&#30001;&#20110; <span class="texMathInline">n</span> &#19968;&#23450;&#20250;&#36882;&#20943;&#33267;&#38646;&#65292;&#35777;&#26126;&#27492;&#31243;&#24207;&#30340;&#27491;&#30830;&#24615;&#38656;&#35201;&#29992;&#24402;&#32435;&#27861;&#22788;&#29702; <span class="texMathInline">n</span>&#12290;&#30001; <span class="texMathInline">0
\leq n</span> &#19988; <span class="texMathInline">n \neq 0</span>&#65292;&#21487;&#24471; <span class="texMathInline">0 \leq (n - 1)</span>&#65292;&#25152;&#20197;&#36882;&#24402;&#35843;&#29992;&#36807;&#31243;
<span class="stt">partial-vector-sum</span> &#20173;&#28982;&#28385;&#36275;&#20854;&#21512;&#32422;&#12290;</p><p>&#29616;&#22312;&#65292;&#35201;&#35299;&#20915;&#21407;&#38382;&#39064;&#23601;&#31616;&#21333;&#22810;&#20102;&#12290;&#22240;&#20026;&#21521;&#37327;&#38271;&#24230;&#20026;0&#26102;&#26080;&#27861;&#20351;&#29992;&#36807;&#31243;
<span class="stt">partial-vector-sum</span>&#65292;&#25152;&#20197;&#24471;&#21478;&#34892;&#22788;&#29702;&#36825;&#31181;&#24773;&#20917;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">vector-sum</span></span> : <span class="Iidentity">$\mathit{Vectorof}(\mathit{Int}) \to \mathit{Int}$</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(vector-sum </span><span class="Iidentity">$v$</span><span class="stt">) = </span><span class="Iidentity">$\sum\limits_{i=0}^{i=length(v)-1} v_i$</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">vector-sum</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vector-length</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">partial-vector-sum</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._152))"></a></div></p></blockquote><p>&#36824;&#26377;&#35768;&#22810;&#24773;&#20917;&#19979;&#65292;&#24341;&#20837;&#36741;&#21161;&#21464;&#37327;&#25110;&#36807;&#31243;&#26469;&#35299;&#20915;&#38382;&#39064;&#20250;&#26377;&#24110;&#21161;&#65292;&#29978;&#33267;&#24517;&#19981;&#21487;&#23569;&#12290;&#21482;&#35201;&#33021;&#23545;&#26032;&#36807;
&#31243;&#20570;&#20160;&#20040;&#32473;&#20986;&#29420;&#31435;&#30340;&#23450;&#20041;&#65292;&#23613;&#21487;&#20197;&#22914;&#27492;&#12290;
<a name="(idx._(gentag._153))"></a>
<a name="(idx._(gentag._154))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex1..14)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._155))"></a>
&#33509; <span class="Iidentity">$0 \leq n &lt; length(v)$</span>&#65292;&#35777;&#26126; <span class="stt">partial-vector-sum</span> &#30340;&#27491;&#30830;&#24615;&#12290;</p></blockquote><h4 class="heading">1.4<tt>&nbsp;</tt><a name="(part._s1..4)"></a>&#32451;&#20064;<span class="button-group"><a href="#(part._s1..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._156))"></a>
&#23398;&#20889;&#36882;&#24402;&#31243;&#24207;&#38656;&#35201;&#32451;&#20064;&#65292;&#37027;&#20040;&#25105;&#20204;&#25343;&#20960;&#36947;&#20064;&#39064;&#32467;&#26463;&#26412;&#31456;&#12290;</p><p>&#27599;&#36947;&#20064;&#39064;&#37117;&#20551;&#23450; <span class="stt">s</span> &#26159;&#19968;&#20010;&#31526;&#21495;&#65292;<span class="stt">n</span> &#26159;&#19968;&#20010;&#38750;&#36127;&#25972;&#25968;&#65292;<span class="stt">lst</span> &#26159;&#19968;&#20010;&#21015;&#34920;&#65292;
<span class="stt">loi</span> &#26159;&#19968;&#20010;&#25972;&#25968;&#21015;&#34920;&#65292;<span class="stt">los</span> &#26159;&#19968;&#20010;&#31526;&#21495;&#21015;&#34920;&#65292;<span class="stt">slist</span> &#26159;&#19968;&#20010; s-list&#65292;
<span class="stt">x</span> &#26159;&#20219;&#24847; Scheme &#20540;&#65307;&#31867;&#20284;&#22320;&#65292;<span class="stt">s1</span> &#26159;&#19968;&#20010;&#31526;&#21495;&#65292;<span class="stt">los2</span> &#26159;&#19968;&#20010;&#31526;&#21495;&#21015;&#34920;&#65292;
<span class="stt">x1</span> &#26159;&#19968;&#20010; Scheme &#20540;&#65292;&#31561;&#31561;&#12290;&#36824;&#20551;&#23450; <span class="stt">pred</span> &#26159;&#19968;&#20010;<span class="emph">&#35859;&#35789;</span> (<span class="emph">predicate</span>)&#65292;
&#21363;&#19968;&#20010;&#36807;&#31243;&#65292;&#21462;&#20219;&#24847; Scheme &#20540;&#65292;&#36820;&#22238; <span class="stt">#t</span> &#25110;&#32773; <span class="stt">#f</span>&#12290;&#38500;&#38750;&#26576;&#20010;&#20855;&#20307;&#38382;&#39064;&#21478;&#26377;&#38480;
&#21046;&#65292;&#19981;&#35201;&#23545;&#25968;&#25454;&#20316;&#20854;&#20182;&#20551;&#35774;&#12290;&#22312;&#36825;&#20123;&#20064;&#39064;&#20013;&#65292;&#19981;&#38656;&#35201;&#26816;&#26597;&#36755;&#20837;&#26159;&#21542;&#31526;&#21512;&#25551;&#36848;&#65307;&#23545;&#27599;&#20010;&#36807;&#31243;&#65292;
&#37117;&#20551;&#23450;&#36755;&#20837;&#20540;&#26159;&#25351;&#23450;&#38598;&#21512;&#30340;&#25104;&#21592;&#12290;</p><p>&#23450;&#20041;&#65292;&#27979;&#35797;&#21644;&#35843;&#35797;&#27599;&#20010;&#36807;&#31243;&#12290;&#20320;&#30340;&#23450;&#20041;&#24212;&#24403;&#26377;&#26412;&#31456;&#36825;&#31181;&#21512;&#32422;&#21644;&#29992;&#27861;&#27880;&#37322;&#12290;&#21487;&#20197;&#38543;&#20415;&#23450;&#20041;&#36741;&#21161;
&#36807;&#31243;&#65292;&#20294;&#26159;&#20320;&#23450;&#20041;&#30340;&#27599;&#20010;&#36741;&#21161;&#36807;&#31243;&#37117;&#24212;&#35813;&#26377;&#20854;&#35828;&#26126;&#65292;&#22914;&#21516;<a href="#%28part._s1..3%29" data-pltdoc="x">&#36741;&#21161;&#36807;&#31243;&#21644;&#19978;&#19979;&#25991;&#21442;&#25968;</a>&#37027;&#26679;&#12290;</p><p>&#27979;&#35797;&#36825;&#20123;&#31243;&#24207;&#26102;&#65292;&#20808;&#35797;&#35797;&#25152;&#26377;&#32473;&#20986;&#30340;&#20363;&#23376;&#65292;&#28982;&#21518;&#29992;&#20854;&#20182;&#20363;&#23376;&#27979;&#35797;&#65292;&#22240;&#20026;&#32473;&#23450;&#30340;&#20363;&#23376;&#19981;&#36275;&#20197;&#28085;
&#30422;&#25152;&#26377;&#21487;&#33021;&#30340;&#38169;&#35823;&#12290;</p><blockquote class="EoplExercise"><p><a name="(elem._ex1..15)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._157))"></a>
 <span class="stt">(duple n x)</span> &#36820;&#22238;&#21253;&#21547; <span class="stt">n</span> &#20010; <span class="stt">x</span> &#30340;&#21015;&#34920;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">duple</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(3<span class="stt"> </span>3)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">duple</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">ha</span><span class="hspace">&nbsp;</span><span class="RktVal">ha</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'((ha<span class="stt"> </span>ha)<span class="stt"> </span>(ha<span class="stt"> </span>ha)<span class="stt"> </span>(ha<span class="stt"> </span>ha)<span class="stt"> </span>(ha<span class="stt"> </span>ha))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">duple</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">blah</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'()</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..16)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <span class="stt">lst</span> &#26159;&#30001;&#20108;&#20803;&#21015;&#34920;&#65288;&#38271;&#24230;&#20026;2&#30340;&#21015;&#34920;&#65289;&#32452;&#25104;&#30340;&#21015;&#34920;&#65292;<span class="stt">(invert lst)</span> &#36820;&#22238;&#19968;&#21015;&#34920;&#65292;
 &#25226;&#27599;&#20010;&#20108;&#20803;&#21015;&#34920;&#21453;&#36716;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">invert</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'((1<span class="stt"> </span>a)<span class="stt"> </span>(2<span class="stt"> </span>a)<span class="stt"> </span>(b<span class="stt"> </span>1)<span class="stt"> </span>(b<span class="stt"> </span>2))</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..17)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <span class="stt">(down lst)</span> &#32473; <span class="stt">lst</span> &#30340;&#27599;&#20010;&#39030;&#23618;&#20803;&#32032;&#21152;&#19978;&#19968;&#23545;&#25324;&#21495;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">down</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'((1)<span class="stt"> </span>(2)<span class="stt"> </span>(3))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">down</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">fine</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">idea</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(((a))<span class="stt"> </span>((fine))<span class="stt"> </span>((idea)))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">down</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">more</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">complicated</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">object</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'((a)<span class="stt"> </span>((more<span class="stt"> </span>(complicated)))<span class="stt"> </span>(object))</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..18)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._158))"></a>
<span class="stt">(swapper s1 s2 slist)</span> &#36820;&#22238;&#19968;&#21015;&#34920;&#65292;&#23558; <span class="stt">slist</span> &#20013;&#20986;&#29616;&#30340;&#25152;&#26377; <span class="stt">s1</span> &#26367;&#25442;&#20026;
<span class="stt">s2</span>&#65292;&#25152;&#26377; <span class="stt">s2</span> &#26367;&#25442;&#20026; <span class="stt">s1</span>&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">swapper</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(d<span class="stt"> </span>b<span class="stt"> </span>c<span class="stt"> </span>a)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">swapper</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(d<span class="stt"> </span>a<span class="stt"> </span>()<span class="stt"> </span>c<span class="stt"> </span>a)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">swapper</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">z</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'((y)<span class="stt"> </span>x<span class="stt"> </span>(z<span class="stt"> </span>(y)))</span></p></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._159))"></a></div></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..19)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <span class="stt">(list-set lst n x)</span> &#36820;&#22238;&#19968;&#21015;&#34920;&#65292;&#38500;&#31532; <span class="stt">n</span> &#20010;&#20803;&#32032; &#65288;&#20174;&#38646;&#24320;&#22987;&#35745;&#25968;&#65289;&#20026;
 <span class="stt">x</span> &#22806;&#65292;&#19982; <span class="stt">lst</span> &#30456;&#21516;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">list-set</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(a<span class="stt"> </span>b<span class="stt"> </span>(1<span class="stt"> </span>2)<span class="stt"> </span>d)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">list-ref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-set</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1<span class="stt"> </span>5<span class="stt"> </span>10)</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..20)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._160))"></a>
<span class="stt">(count-occurrences s slist)</span> &#36820;&#22238; <span class="stt">slist</span> &#20013;&#20986;&#29616;&#30340; <span class="stt">s</span> &#20010;&#25968;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">count-occurrences</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">f</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">z</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">count-occurrences</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">f</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">z</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">3</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">count-occurrences</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">w</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">f</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">z</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._161))"></a></div></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..21)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <span class="stt">sos1</span> &#21644; <span class="stt">sos2</span> &#26159;&#20004;&#20010;&#27809;&#26377;&#37325;&#22797;&#20803;&#32032;&#30340;&#31526;&#21495;&#21015;&#34920;&#65292;<span class="stt">(product sos1 sos2)</span>&#36820;
 &#22238;&#20108;&#20803;&#21015;&#34920;&#30340;&#21015;&#34920;&#65292;&#20195;&#34920; <span class="stt">sos1</span> &#21644; <span class="stt">sos2</span> &#30340;&#31515;&#21345;&#23572;&#31215;&#12290;&#20108;&#20803;&#21015;&#34920;&#25490;&#21015;&#39034;&#24207;&#19981;&#38480;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">product</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'((a<span class="stt"> </span>x)<span class="stt"> </span>(a<span class="stt"> </span>y)<span class="stt"> </span>(b<span class="stt"> </span>x)<span class="stt"> </span>(b<span class="stt"> </span>y)<span class="stt"> </span>(c<span class="stt"> </span>x)<span class="stt"> </span>(c<span class="stt"> </span>y))</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..22)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <span class="stt">(filter-in pred lst)</span> &#36820;&#22238;&#30340;&#21015;&#34920;&#65292;&#30001; <span class="stt">lst</span> &#20013;&#28385;&#36275;&#35859;&#35789; <span class="stt">pred</span> &#30340;&#20803;&#32032;&#32452;
 &#25104;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">filter-in</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(2<span class="stt"> </span>7)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">filter-in</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">17</span><span class="hspace">&nbsp;</span><span class="RktVal">foo</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(a<span class="stt"> </span>foo)</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..23)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <span class="stt">(list-index pred lst)</span> &#36820;&#22238; <span class="stt">lst</span> &#20013;&#31532;&#19968;&#20010;&#28385;&#36275;&#35859;&#35789; <span class="stt">pred</span> &#30340;&#20803;&#32032;&#20301;&#32622;&#65292;
     &#20174;&#38646;&#24320;&#22987;&#35745;&#25968;&#12290;&#22914;&#26524; <span class="stt">lst</span> &#20013;&#27809;&#26377;&#20803;&#32032;&#28385;&#36275;&#35859;&#35789;&#65292;<span class="stt">list-index</span> &#36820;&#22238; <span class="stt">#f</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">list-index</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">1</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">list-index</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">17</span><span class="hspace">&nbsp;</span><span class="RktVal">foo</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">0</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">list-index</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..24)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> &#33509; <span class="stt">lst</span> &#20013;&#30340;&#20219;&#20309;&#20803;&#32032;&#19981;&#28385;&#36275; <span class="stt">pred</span>&#65292;<span class="stt">(every? pred lst)</span> &#36820;&#22238; <span class="stt">#f</span>&#65292;
 &#21542;&#21017;&#36820;&#22238; <span class="stt">#t</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">every?</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">e</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">every?</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..25)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> &#33509; <span class="stt">lst</span> &#20013;&#30340;&#20219;&#20309;&#20803;&#32032;&#28385;&#36275; <span class="stt">pred</span>&#65292;<span class="stt">(exists? pred lst)</span> &#36820;&#22238; <span class="stt">#t</span>&#65292;&#21542;&#21017;&#36820;&#22238; <span class="stt">#f</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">exists?</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">e</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">exists?</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">e</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <span class="stt">(up lst)</span> &#31227;&#38500; <span class="stt">lst</span> &#20013;&#27599;&#20010;&#39030;&#23618;&#20803;&#32032;&#21608;&#22260;&#30340;&#19968;&#23545;&#25324;&#21495;&#12290;&#22914;&#26524;&#39030;&#23618;&#20803;&#32032;&#19981;&#26159;&#21015;&#34920;&#65292;
 &#21017;&#29031;&#21407;&#26679;&#25918;&#20837;&#32467;&#26524;&#20013;&#12290;<span class="stt">(up (down lst))</span> &#30340;&#32467;&#26524;&#19982; <span class="stt">lst</span> &#30456;&#21516;&#65292;&#20294; <span class="stt">(down
(up lst))</span> &#19981;&#19968;&#23450;&#26159; <span class="stt">lst</span>&#65288;&#21442;&#35265;&#65289;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">up</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1<span class="stt"> </span>2<span class="stt"> </span>3<span class="stt"> </span>4)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">up</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">z</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(x<span class="stt"> </span>(y)<span class="stt"> </span>z)</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..27)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._162))"></a>
<span class="stt">(flatten slist)</span> &#36820;&#22238;&#19968;&#21015;&#34920;&#65292;&#30001; <span class="stt">slist</span> &#20013;&#30340;&#31526;&#21495;&#25353;&#20986;&#29616;&#39034;&#24207;&#32452;&#25104;&#12290;&#30452;&#35266;&#19978;&#65292;
<span class="stt">flatten</span> &#31227;&#38500;&#21442;&#25968;&#20869;&#30340;&#25152;&#26377;&#20869;&#23618;&#25324;&#21495;&#12290;</p><p><div class="SIntrapara"><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">flatten</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(a<span class="stt"> </span>b<span class="stt"> </span>c)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">flatten</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(a<span class="stt"> </span>b<span class="stt"> </span>c)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">flatten</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">d</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">e</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(a<span class="stt"> </span>b<span class="stt"> </span>c<span class="stt"> </span>d<span class="stt"> </span>e)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">flatten</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(a<span class="stt"> </span>b<span class="stt"> </span>c)</span></p></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._163))"></a></div></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._164))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..28)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <a name="(idx._(gentag._165))"></a>
 <span class="stt">loi1</span> &#21644; <span class="stt">loi2</span> &#26159;&#20803;&#32032;&#25353;&#29031;&#21319;&#24207;&#25490;&#21015;&#30340;&#25972;&#25968;&#21015;&#34920;&#65292;<span class="stt">(merge loi1 loi2)</span> &#36820;
 &#22238; <span class="stt">loi1</span> &#21644; <span class="stt">loi2</span> &#20013;&#25152;&#26377;&#25972;&#25968;&#32452;&#25104;&#30340;&#30340;&#26377;&#24207;&#21015;&#34920;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">merge</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1<span class="stt"> </span>1<span class="stt"> </span>2<span class="stt"> </span>4<span class="stt"> </span>8)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">merge</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">35</span><span class="hspace">&nbsp;</span><span class="RktVal">62</span><span class="hspace">&nbsp;</span><span class="RktVal">81</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="hspace">&nbsp;</span><span class="RktVal">91</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">83</span><span class="hspace">&nbsp;</span><span class="RktVal">85</span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(3<span class="stt"> </span>35<span class="stt"> </span>62<span class="stt"> </span>81<span class="stt"> </span>83<span class="stt"> </span>85<span class="stt"> </span>90<span class="stt"> </span>90<span class="stt"> </span>91)</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..29)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <span class="stt">(sort loi)</span> &#36820;&#22238;&#19968;&#21015;&#34920;&#65292;&#23558; <span class="stt">loi</span> &#20013;&#30340;&#20803;&#32032;&#25353;&#29031;&#21319;&#24207;&#25490;&#21015;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">sort</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(2<span class="stt"> </span>2<span class="stt"> </span>3<span class="stt"> </span>5<span class="stt"> </span>8)</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..30)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <span class="stt">(sort/predicate pred loi)</span> &#36820;&#22238;&#19968;&#21015;&#34920;&#65292;&#23558; <span class="stt">loi</span> &#30340;&#20803;&#32032;&#25353;&#29031;&#35859;&#35789;&#25351;&#23450;&#30340;&#39034;&#24207;
 &#25490;&#21015;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">sort/predicate</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(2<span class="stt"> </span>2<span class="stt"> </span>3<span class="stt"> </span>5<span class="stt"> </span>8)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">sort/predicate</span><span class="hspace">&nbsp;</span><span class="RktSym">&gt;</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(8<span class="stt"> </span>5<span class="stt"> </span>3<span class="stt"> </span>2<span class="stt"> </span>2)</span></p></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._166))"></a></div></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..31)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._167))"></a>
&#20889;&#20986;&#22914;&#19979;&#36807;&#31243;&#65292;&#23545;&#20108;&#21449;&#26641;&#65288;&#65289;&#20570;&#36816;&#31639;&#65306;<span class="stt">leaf</span> &#21644; <span class="stt">interior-node</span>
&#29983;&#25104;&#20108;&#21449;&#26641;&#65292;<span class="stt">leaf?</span> &#26816;&#26597;&#20108;&#21449;&#26641;&#26159;&#21542;&#26159;&#19968;&#29255;&#21494;&#23376;&#65292;<span class="stt">lson</span>&#12289;<span class="stt">rson</span>&#21644;
<span class="stt">contents-of</span> &#21462;&#20986;&#19968;&#20010;&#33410;&#28857;&#30340;&#21508;&#37096;&#20998;&#12290;<span class="stt">contents-of</span> &#24212;&#23545;&#21494;&#23376;&#21644;&#20869;&#37096;&#33410;&#28857;&#37117;&#36866;
&#29992;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..32)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986;&#36807;&#31243; <span class="stt">double-tree</span>&#65292;&#23427;&#21462;&#19968;&#26869;&#20108;&#21449;&#26641;&#65292;&#24418;&#22914;&#65292;&#29983;&#25104;&#21478;&#19968;&#26869;&#20108;&#21449;&#26641;&#65292;&#25226;
&#21407;&#20108;&#21449;&#26641;&#20013;&#30340;&#25152;&#26377;&#25972;&#25968;&#32763;&#20493;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..33)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._168))"></a>
&#20889;&#20986;&#36807;&#31243; <span class="stt">mark-leaves-with-red-depth</span>&#65292;&#23427;&#21462;&#19968;&#26869;&#20108;&#21449;&#26641;&#65288;&#65289;&#65292;&#29983;&#25104;&#19982;
&#21407;&#26641;&#24418;&#29366;&#30456;&#21516;&#30340;&#21478;&#19968;&#26869;&#20108;&#21449;&#26641;&#65292;&#20294;&#22312;&#26032;&#30340;&#20108;&#21449;&#26641;&#20013;&#65292;&#27599;&#20010;&#21494;&#23376;&#20013;&#30340;&#25972;&#25968;&#34920;&#31034;&#23427;&#21644;&#26641;&#26681;&#20043;&#38388;
&#21547;&#26377; <span class="stt">red</span> &#31526;&#21495;&#30340;&#33410;&#28857;&#25968;&#12290;&#20363;&#22914;&#65292;&#34920;&#36798;&#24335;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">mark-leaves-with-red-depth</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">red</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">bar</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">26</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">12</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">red</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">11</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">quux</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">117</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">14</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20351;&#29992; &#20013;&#23450;&#20041;&#30340;&#36807;&#31243;&#65292;&#24212;&#36820;&#22238;&#20108;&#21449;&#26641;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">red</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">bar</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">red</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">quux</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._169))"></a></div></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..34)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> <a name="(idx._(gentag._170))"></a>
 &#20889;&#20986;&#36807;&#31243; <span class="stt">path</span>&#65292;&#23427;&#21462;&#19968;&#20010;&#25972;&#25968; <span class="stt">n</span> &#21644;&#19968;&#26869;&#21547;&#26377;&#25972;&#25968; <span class="stt">n</span> &#30340;&#20108;&#21449;&#25628;&#32034;&#26641;
 &#65288;bst&#65289;<span class="stt">bst</span>&#65292;&#36820;&#22238;&#30001; <span class="stt">left</span> &#21644; <span class="stt">right</span> &#32452;&#25104;&#30340;&#21015;&#34920;&#65292;&#34920;&#31034;&#22914;&#20309;
 &#25214;&#21040;&#21253;&#21547; <span class="stt">n</span> &#30340;&#33410;&#28857;&#12290;&#22914;&#26524;&#22312;&#26641;&#26681;&#22788;&#21457;&#29616; <span class="stt">n</span>&#65292;&#23427;&#36820;&#22238;&#31354;&#21015;&#34920;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktVal">17</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">14</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">26</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">20</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">17</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">31</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'(right<span class="stt"> </span>left<span class="stt"> </span>left)</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..35)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._171))"></a>
&#20889;&#20986;&#36807;&#31243; <span class="stt">number-leaves</span>&#65292;&#23427;&#21462;&#19968;&#26869;&#20108;&#21449;&#26641;&#65292;&#29983;&#25104;&#19982;&#21407;&#26641;&#24418;&#29366;&#30456;&#21516;&#30340;&#20108;&#21449;&#26641;&#65292;&#20294;&#21494;&#23376;
&#30340;&#20869;&#23481;&#20174; 0 &#24320;&#22987;&#35745;&#30340;&#25972;&#25968;&#12290;&#20363;&#22914;&#65292;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">number-leaves</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">foo</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">bar</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">26</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">12</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">baz</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">11</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">quux</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">117</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">leaf</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">14</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#24212;&#36820;&#22238;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">foo</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">bar</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">baz</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">quux</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex1..36)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._172))"></a>
&#20889;&#20986;&#36807;&#31243; <span class="stt">g</span>&#65292;&#21017;n-e&#30340; <span class="stt">number-elements</span> &#21487;&#20197;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">number-elements</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">g</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">list</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">0</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">car</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">number-elements</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._173))"></a>
<a name="(idx._(gentag._174))"></a></div></p></blockquote></blockquote><h3 class="heading">2<tt>&nbsp;</tt><a name="(part._da)"></a>&#25968;&#25454;&#25277;&#35937;<span class="button-group"><a href="#(part._da)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(idx._(gentag._175))"></a></p><h4 class="heading">2.1<tt>&nbsp;</tt><a name="(part._s2..1)"></a>&#29992;&#25509;&#21475;&#23450;&#20041;&#25968;&#25454;<span class="button-group"><a href="#(part._s2..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>&#27599;&#24403;&#25105;&#20204;&#24819;&#20197;&#26576;&#31181;&#26041;&#24335;&#34920;&#31034;&#19968;&#20123;&#37327;&#26102;&#65292;&#25105;&#20204;&#23601;&#26032;&#23450;&#20041;&#20102;&#19968;&#31181;&#25968;&#25454;&#31867;&#22411;&#65306;&#23427;&#30340;&#21462;&#20540;&#26159;&#20854;&#34920;&#31034;&#65292;
&#23427;&#30340;&#25805;&#20316;&#26159;&#22788;&#29702;&#20854;&#23454;&#20307;&#30340;&#36807;&#31243;&#12290;</p><p>&#36825;&#20123;&#23454;&#20307;&#30340;&#34920;&#31034;&#36890;&#24120;&#24456;&#22797;&#26434;&#65292;&#25152;&#20197;&#22914;&#33021;&#36991;&#20813;&#65292;&#25105;&#20204;&#19981;&#24895;&#20851;&#24515;&#20854;&#32454;&#33410;&#12290;&#25105;&#20204;&#21487;&#33021;&#24819;&#25913;&#21464;&#25968;&#25454;&#30340;
&#34920;&#31034;&#12290;&#26368;&#39640;&#25928;&#30340;&#34920;&#31034;&#24448;&#24448;&#38590;&#20197;&#23454;&#29616;&#65292;&#25152;&#20197;&#25105;&#20204;&#21487;&#33021;&#24076;&#26395;&#20808;&#31616;&#21333;&#23454;&#29616;&#65292;&#21482;&#22312;&#30830;&#30693;&#31995;&#32479;&#30340;&#25972;&#20307;&#24615;
&#33021;&#19982;&#20043;&#25912;&#20851;&#26102;&#65292;&#25165;&#25913;&#29992;&#26356;&#39640;&#25928;&#30340;&#34920;&#31034;&#12290;&#19981;&#31649;&#20986;&#20110;&#20160;&#20040;&#21407;&#22240;&#65292;&#22914;&#26524;&#25105;&#20204;&#20915;&#23450;&#25913;&#21464;&#26576;&#20123;&#25968;&#25454;&#30340;&#34920;
&#31034;&#26041;&#24335;&#65292;&#25105;&#20204;&#24471;&#33021;&#23450;&#20301;&#31243;&#24207;&#20013;&#25152;&#26377;&#20381;&#36182;&#34920;&#31034;&#26041;&#24335;&#30340;&#37096;&#20998;&#12290;&#36825;&#23601;&#38656;&#35201;
&#20511;&#21161;<span class="emph">&#25968;&#25454;&#25277;&#35937;</span> (<span class="emph">data abstraction</span>) &#25216;&#26415;&#12290;</p><p><a name="(idx._(gentag._176))"></a>
<a name="(idx._(gentag._177))"></a>
&#25968;&#25454;&#25277;&#35937;&#23558;&#25968;&#25454;&#31867;&#22411;&#20998;&#20026;&#20004;&#37096;&#20998;&#65306;<span class="emph">&#25509;&#21475;</span> (<span class="emph">interface</span>) &#21644;<span class="emph">&#23454;&#29616;</span> (<span class="emph">implementation</span>)&#12290;
<span class="emph">&#25509;&#21475;</span>&#21578;&#35785;&#25105;&#20204;&#26576;&#31867;&#22411;&#34920;&#31034;&#20160;&#20040;&#25968;&#25454;&#65292;&#33021;&#23545;&#25968;&#25454;&#20570;&#20160;&#20040;&#25805;&#20316;&#65292;&#20197;&#21450;&#21487;&#30001;&#36825;&#20123;&#25805;&#20316;&#24471;&#20986;
&#30340;&#24615;&#36136;&#12290;<span class="emph">&#23454;&#29616;</span>&#32473;&#20986;&#25968;&#25454;&#30340;&#20855;&#20307;&#34920;&#31034;&#65292;&#20197;&#21450;&#22788;&#29702;&#25968;&#25454;&#34920;&#31034;&#30340;&#20195;&#30721;&#12290;</p><p><a name="(idx._(gentag._178))"></a>
&#36825;&#26679;&#25277;&#35937;&#20986;&#30340;&#25968;&#25454;&#31867;&#22411;&#31216;&#20026;<span class="emph">&#25277;&#35937;&#25968;&#25454;&#31867;&#22411;</span> (<span class="emph">abstract data type</span>)&#12290;&#31243;&#24207;&#30340;&#20854;&#20313;&#37096;
&#20998;&#8212;&#8212;&#25968;&#25454;&#31867;&#22411;&#30340;<span class="emph">&#23458;&#25143;</span> (<span class="emph">client</span>)<a name="(idx._(gentag._179))"></a> &#8212;&#8212;&#21482;&#33021;&#36890;&#36807;&#25509;&#21475;&#20013;&#25351;&#23450;&#30340;&#25805;&#20316;&#22788;&#29702;&#26032;&#25968;&#25454;&#12290;&#36825;&#26679;&#19968;
&#26469;&#65292;&#22914;&#26524;&#25105;&#20204;&#24076;&#26395;&#25913;&#21464;&#25968;&#25454;&#30340;&#34920;&#31034;&#65292;&#21482;&#38656;&#25913;&#21464;&#25968;&#25454;&#22788;&#29702;&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;</p><p>&#36825;&#19968;&#24819;&#27861;&#24182;&#19981;&#38476;&#29983;&#65306;&#25105;&#20204;&#20889;&#31243;&#24207;&#22788;&#29702;&#25991;&#20214;&#26102;&#65292;&#22810;&#25968;&#26102;&#20505;&#21482;&#20851;&#24515;&#33021;&#21542;&#35843;&#29992;&#36807;&#31243;&#26469;&#25171;&#24320;&#65292;&#20851;&#38381;&#65292;
&#35835;&#21462;&#25991;&#20214;&#25110;&#23545;&#25991;&#20214;&#20570;&#20854;&#20182;&#25805;&#20316;&#12290;&#21516;&#26679;&#22320;&#65292;&#22823;&#22810;&#25968;&#26102;&#20505;&#65292;&#25105;&#20204;&#19981;&#20851;&#24515;&#25972;&#25968;&#22312;&#26426;&#22120;&#20013;&#31350;&#31455;&#24590;&#26679;&#34920;
&#31034;&#65292;&#21482;&#20851;&#24515;&#33021;&#21542;&#21487;&#38752;&#22320;&#25191;&#34892;&#31639;&#26415;&#25805;&#20316;&#12290;</p><p><a name="(idx._(gentag._180))"></a>
<a name="(idx._(gentag._181))"></a>
&#24403;&#23458;&#25143;&#21482;&#33021;&#36890;&#36807;&#25509;&#21475;&#25552;&#20379;&#30340;&#36807;&#31243;&#22788;&#29702;&#26576;&#31867;&#22411;&#30340;&#25968;&#25454;&#26102;&#65292;&#25105;&#20204;&#35828;&#23458;&#25143;&#20195;&#30721;
&#19982;<span class="emph">&#34920;&#31034;&#26080;&#20851;</span> (<span class="emph">representation-independent</span>)&#65292;&#22240;&#20026;&#36825;&#20123;&#20195;&#30721;&#19981;&#20381;&#36182;&#25968;&#25454;&#31867;&#22411;&#20540;&#30340;
&#34920;&#31034;&#12290;</p><p>&#37027;&#20040;&#25152;&#26377;&#20851;&#20110;&#25968;&#25454;&#34920;&#31034;&#30340;&#20449;&#24687;&#24517;&#28982;&#22312;&#23454;&#29616;&#20195;&#30721;&#20043;&#20013;&#12290;&#23454;&#29616;&#26368;&#37325;&#35201;&#30340;&#37096;&#20998;&#23601;&#26159;&#34920;&#31034;&#25968;&#25454;&#30340;&#35268;&#33539;&#12290;
&#25105;&#20204;&#29992;&#31526;&#21495; <span class="texMathInline">\lceil v \rceil</span> &#25351;&#20195;&#8220;&#25968;&#25454; <span class="texMathInline">v</span> &#30340;&#34920;&#31034;&#8221;&#12290;</p><p><a name="(idx._(gentag._182))"></a>
&#35201;&#35828;&#24471;&#26356;&#26126;&#30333;&#20123;&#65292;&#26469;&#30475;&#19968;&#20010;&#31616;&#21333;&#20363;&#23376;&#65306;&#33258;&#28982;&#25968;&#31867;&#22411;&#12290;&#24453;&#34920;&#31034;&#30340;&#25968;&#25454;&#26159;&#33258;&#28982;&#25968;&#12290;&#25509;&#21475;&#30001;&#22235;&#20010;&#36807;
&#31243;&#32452;&#25104;&#65306;<span class="stt">zero</span>&#12289;<span class="stt">is-zero?</span>&#12289;<span class="stt">successor</span> &#21644; <span class="stt">predecessor</span>&#12290;&#24403;&#28982;&#65292;&#19981;&#26159;
&#38543;&#20415;&#20960;&#20010;&#36807;&#31243;&#37117;&#21487;&#20197;&#20316;&#20026;&#36825;&#19968;&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;&#24403;&#19988;&#20165;&#24403;&#19968;&#32452;&#36807;&#31243;&#28385;&#36275;&#22914;&#19979;&#22235;&#20010;&#26041;&#31243;&#26102;&#65292;&#21487;&#20197;&#20316;
&#20026; <span class="stt">zero</span>&#12289;<span class="stt">is-zero?</span>&#12289;<span class="stt">successor</span> &#21644; <span class="stt">predecessor</span> &#30340;&#23454;&#29616;&#65306;</p><blockquote><p><a name="(elem._nat)"></a><span class="stt">(zero)</span> = <span class="texMathInline">\lceil 0 \rceil</span></p><p><span class="stt">(is-zero? </span><span class="texMathInline">\lceil n \rceil</span><span class="stt">)</span> = <span class="Iidentity">$<span class="Iidentity">\begin{cases}<span class="stt">#t</span> &amp; n = 0 \\
<span class="stt">#f</span> &amp; n \neq 0\end{cases}</span>$</span></p><p><span class="stt">(successor </span><span class="texMathInline">\lceil n \rceil</span><span class="stt">)</span> = <span class="texMathInline">\lceil n + 1 \rceil \quad (n \geq 0)</span></p><p><span class="stt">(predecessor </span><span class="texMathInline">\lceil n + 1 \rceil</span><span class="stt">)</span> = <span class="texMathInline">\lceil n \rceil \quad (n \geq 0)</span></p></blockquote><p>&#36825;&#19968;&#23450;&#20041;&#27809;&#26377;&#25351;&#26126;&#33258;&#28982;&#25968;&#24212;&#24403;&#22914;&#20309;&#34920;&#31034;&#65292;&#23427;&#21482;&#35201;&#27714;&#36825;&#20123;&#36807;&#31243;&#37117;&#20135;&#29983;&#25351;&#23450;&#30340;&#34892;&#20026;&#12290;&#21363;&#65292;&#36807;&#31243;
<span class="stt">zero</span> &#24517;&#39035;&#36820;&#22238; <span class="texMathInline">0</span> &#30340;&#34920;&#31034;&#65307;&#32473;&#23450;&#25968;&#23383; <span class="texMathInline">n</span> &#30340;&#34920;&#31034;&#65292;&#36807;&#31243; <span class="stt">successor</span> &#24517;&#39035;
&#36820;&#22238;&#25968;&#23383; <span class="texMathInline">n + 1</span> &#30340;&#34920;&#31034;&#65292;&#31561;&#31561;&#12290;&#36825;&#20010;&#23450;&#20041;&#27809;&#23545; <span class="stt">(predecessor (zero))</span> &#20570;&#20986;&#35828;&#26126;&#65292;
&#25152;&#20197;&#25353;&#36825;&#20010;&#23450;&#20041;&#65292;&#20219;&#20309;&#34892;&#20026;&#37117;&#26159;&#21487;&#20197;&#25509;&#21463;&#30340;&#12290;</p><p>&#29616;&#22312;&#21487;&#20197;&#20889;&#20986;&#22788;&#29702;&#33258;&#28982;&#25968;&#30340;&#23458;&#25143;&#31243;&#24207;&#65292;&#32780;&#19988;&#19981;&#35770;&#29992;&#21738;&#31181;&#34920;&#31034;&#26041;&#24335;&#65292;&#37117;&#20445;&#35777;&#33021;&#24471;&#20986;&#27491;&#30830;&#30340;&#32467;&#26524;&#12290;
&#20363;&#22914;&#65292;&#19981;&#35770;&#24590;&#26679;&#23454;&#29616;&#33258;&#28982;&#25968;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(elem._plus)"></a><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">plus</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">is-zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">y</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">successor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">plus</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">predecessor</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#37117;&#28385;&#36275; <span class="stt">(plus </span><span class="texMathInline">\lceil x \rceil</span><span class="stt"> </span><span class="texMathInline">\lceil y \rceil</span><span class="stt">) </span><span class="texMathInline">=</span><span class="stt"> </span><span class="texMathInline">\lceil x +
y\rceil</span>&#12290;</p></blockquote><p><a name="(idx._(gentag._183))"></a>
<a name="(idx._(gentag._184))"></a>
&#22823;&#22810;&#25968;&#25509;&#21475;&#37117;&#21253;&#21547;&#65306;&#33509;&#24178;<span class="emph">&#26500;&#36896;&#22120;</span> (<span class="emph">constructor</span>)&#65292;&#29992;&#26469;&#20135;&#29983;&#25968;&#25454;&#31867;&#22411;&#30340;&#20803;&#32032;&#65307;
&#33509;&#24178;<span class="emph">&#35266;&#27979;&#22120;</span> (<span class="emph">observer</span>)&#65292;&#29992;&#26469;&#20174;&#25968;&#25454;&#31867;&#22411;&#30340;&#20540;&#20013;&#25552;&#21462;&#20449;&#24687;&#12290;&#36825;&#37324;&#26377;&#19977;&#20010;&#26500;&#36896;&#22120;&#65292;
<span class="stt">zero</span>&#12289;<span class="stt">successor</span> &#21644; <span class="stt">predecessor</span>&#65307;&#19968;&#20010;&#35266;&#27979;&#22120;&#65292;<span class="stt">is-zero?</span>&#12290;
<a name="(idx._(gentag._185))"></a></p><p>&#21487;&#20197;&#29992;&#22810;&#31181;&#26041;&#24335;&#34920;&#31034;&#36825;&#22871;&#25509;&#21475;&#65292;&#25105;&#20204;&#32771;&#34385;&#20854;&#20013;&#19977;&#31181;&#12290;</p><ol><li><p><a name="(idx._(gentag._186))"></a>
 <a name="(idx._(gentag._187))"></a>
 <span class="emph">&#19968;&#20803;&#34920;&#31034;&#27861;</span> (<span class="emph">Unary representation</span>)&#65306;&#22312;&#19968;&#20803;&#34920;&#31034;&#27861;&#20013;&#65292;&#33258;&#28982;&#25968;<span class="texMathInline">n</span> &#30001;
 <span class="texMathInline">n</span> &#20010; <span class="stt">#t</span> &#32452;&#25104;&#30340;&#21015;&#34920;&#34920;&#31034;&#12290;&#25152;&#20197;&#65292;<span class="texMathInline">0</span> &#34920;&#31034;&#20026; <span class="stt">()</span>&#65292;<span class="texMathInline">1</span> &#34920;&#31034;&#20026;
 <span class="stt">(#t)</span>&#65292;<span class="texMathInline">2</span> &#34920;&#31034;&#20026; <span class="stt">(#t #t)</span>&#65292;&#31561;&#31561;&#12290;&#21487;&#20197;&#29992;&#24402;&#32435;&#27861;&#23450;&#20041;&#36825;&#31181;&#34920;&#31034;&#26041;&#24335;&#65306;</p><blockquote><p><span class="texMathInline">\lceil 0 \rceil = <span class="stt">()</span></span></p><p><span class="texMathInline">\lceil n + 1 \rceil = <span class="stt">(#t . </span><span class="texMathInline">\lceil n \rceil</span><span class="stt">)</span></span></p></blockquote><p>&#35201;&#28385;&#36275;&#35813;&#34920;&#31034;&#30340;&#23450;&#20041;&#65292;&#25968;&#25454;&#22788;&#29702;&#36807;&#31243;&#21487;&#20197;&#20889;&#25104;&#65306;</p><p><div class="SIntrapara"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">zero</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">is-zero?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">successor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">predecessor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._188))"></a></div></p></li><li><p><a name="(idx._(gentag._189))"></a>
 <span class="emph">Scheme &#25968;&#23383;&#34920;&#31034;&#27861;</span> (<span class="emph">Scheme number representation</span>)&#65306;&#22312;&#36825;&#31181;&#34920;&#31034;&#20013;&#65292;
 &#21482;&#38656;&#29992; Scheme &#20869;&#32622;&#30340;&#25968;&#23383;&#34920;&#31034;&#27861;&#65288;&#26412;&#36523;&#21487;&#33021;&#21313;&#20998;&#22797;&#26434;&#65281;&#65289;&#12290;&#20196; <span class="texMathInline">\lceil n \rceil</span> &#20026;
 Scheme &#25972;&#25968; <span class="stt">n</span>&#65292;&#21017;&#25152;&#38656;&#30340;&#22235;&#20010;&#36807;&#31243;&#21487;&#20197;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">zero</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">is-zero?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">successor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">predecessor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._190))"></a></div></p></blockquote></li><li><p><span class="emph">&#22823;&#25968;&#34920;&#31034;&#27861;</span> (<span class="emph">Bignum representation</span>)&#65306;
<a name="(idx._(gentag._191))"></a>
<a name="(idx._(gentag._192))"></a>
&#22312;&#22823;&#25968;&#34920;&#31034;&#27861;&#20013;&#65292;&#25968;&#20540;&#20197; <span class="texMathInline">N</span> &#36827;&#21046;&#34920;&#31034;&#65292;<span class="texMathInline">N</span> &#26159;&#26576;&#20010;&#22823;&#25972;&#25968;&#12290;&#35813;&#26041;&#27861;&#20197; <span class="texMathInline">0</span> &#21040;
<span class="texMathInline">N-1</span> &#20043;&#38388;&#30340;&#25968;&#23383;&#65288;&#26377;&#26102;&#19981;&#31216;&#25968;&#20301;&#65292;&#32780;&#31216;<span class="emph">&#22823;&#20301;</span> (<span class="emph">bigits</span>)&#65289;&#32452;&#25104;&#30340;&#21015;&#34920;&#34920;&#31034;&#25968;&#20540;&#65292;
&#36825;&#23601;&#24456;&#23481;&#26131;&#34920;&#31034;&#36828;&#36229;&#26426;&#22120;&#23383;&#38271;&#30340;&#25972;&#25968;&#12290;&#36825;&#37324;&#65292;&#20026;&#20102;&#20415;&#20110;&#20351;&#29992;&#65292;&#25105;&#20204;&#25226;&#26368;&#20302;&#20301;&#25918;&#22312;&#21015;&#34920;&#26368;&#21069;
&#31471;&#12290;&#36825;&#31181;&#34920;&#31034;&#27861;&#21487;&#29992;&#24402;&#32435;&#27861;&#23450;&#20041;&#20026;&#65306;</p><p><span class="Iidentity">$\lceil n \rceil = <span class="Iidentity">\begin{cases}<span class="stt">()</span> &amp; n = 0 \\ <span class="stt">(</span><span class="Iidentity">r</span><span class="stt"> . </span><span class="Iidentity">\lceil q
\rceil</span><span class="stt">)</span> &amp; n = qN + r, 0 \leqslant r &lt; N\end{cases}</span>$</span></p><p>&#25152;&#20197;&#65292;&#22914;&#26524; <span class="texMathInline">N = 16</span>&#65292;&#37027;&#20040; <span class="texMathInline">\lceil 33 \rceil = <span class="stt">(1 2)</span></span>&#65292;<span class="texMathInline">\lceil 258
\rceil = <span class="stt">(2 0 1)</span></span>&#65292;&#22240;&#20026;&#65306;</p><p><span class="texMathDisplay">258 = 2 \times 16^0 + 0 \times 16^1 + 1 \times 16^2</span>
<a name="(idx._(gentag._193))"></a></p></li></ol><p><a name="(idx._(gentag._194))"></a>&#36825;&#20123;&#23454;&#29616;&#37117;&#27809;&#26377;&#24378;&#21046;&#25968;&#25454;&#25277;&#35937;&#65306;&#26080;&#27861;&#38450;&#27490;&#23458;&#25143;&#31243;&#24207;&#26597;&#39564;&#34920;&#31034;&#29992;
&#30340;&#26159;&#21015;&#34920;&#36824;&#26159; Scheme &#25972;&#25968;&#12290;&#19982;&#20043;&#30456;&#23545;&#65292;&#26377;&#20123;&#35821;&#35328;&#30452;&#25509;&#25903;&#25345;&#25968;&#25454;&#25277;&#35937;&#65306;&#23427;&#20204;&#20801;&#35768;&#31243;&#24207;&#21592;&#21019;&#24314;
&#26032;&#30340;&#25509;&#21475;&#65292;&#30830;&#20445;&#21482;&#33021;&#36890;&#36807;&#25509;&#21475;&#25552;&#20379;&#30340;&#36807;&#31243;&#22788;&#29702;&#26032;&#25968;&#25454;&#12290;&#22914;&#26524;&#31867;&#22411;&#30340;&#34920;&#31034;&#38544;&#34255;&#36215;&#26469;&#65292;&#19981;&#20250;&#22240;&#20219;
&#20309;&#25805;&#20316;&#32780;&#26292;&#38706;&#65288;&#21253;&#25324;&#25171;&#21360;&#65289;&#65292;&#37027;&#23601;&#35828;&#35813;&#31867;&#22411;&#26159;<span class="emph">&#27169;&#31946;</span> (<span class="emph">opaque</span>) &#30340;&#65292;&#21542;&#21017;&#31216;&#20043;
&#20026;<span class="emph">&#36879;&#26126;</span> (<span class="emph">transparent</span>) &#30340;&#12290;
<a name="(idx._(gentag._195))"></a>
<a name="(idx._(gentag._196))"></a>
<a name="(idx._(gentag._197))"></a>
<a name="(idx._(gentag._198))"></a></p><p>Scheme &#27809;&#26377;&#25552;&#20379;&#26631;&#20934;&#26426;&#21046;&#26469;&#21019;&#24314;&#26032;&#30340;&#27169;&#31946;&#31867;&#22411;&#65292;&#25152;&#20197;&#25105;&#20204;&#36864;&#32780;&#27714;&#20854;&#27425;&#65306;&#23450;&#20041;&#25509;&#21475;&#65292;&#38752;&#23458;&#25143;
&#31243;&#24207;&#30340;&#20316;&#32773;&#23567;&#24515;&#34892;&#20107;&#65292;&#21482;&#20351;&#29992;&#25509;&#21475;&#20013;&#23450;&#20041;&#30340;&#36807;&#31243;&#12290;</p><p>&#22312;<a href="#%28part._modules%29" data-pltdoc="x">&#27169;&#22359;</a>&#20013;&#65292;&#25105;&#20204;&#35752;&#35770;&#19968;&#20123;&#26041;&#27861;&#65292;&#20197;&#20415;&#24378;&#21270;&#35821;&#35328;&#30340;&#36825;&#31181;&#21327;&#35758;&#12290;</p><blockquote class="EoplExercise"><p><a name="(elem._ex2..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._199))"></a>
&#23454;&#29616;&#22823;&#25968;&#34920;&#31034;&#27861;&#30340;&#22235;&#31181;&#25805;&#20316;&#12290;&#28982;&#21518;&#29992;&#20320;&#30340;&#23454;&#29616;&#35745;&#31639;10&#30340;&#38454;&#20056;&#12290;&#38543;&#30528;&#21442;&#25968;&#25913;&#21464;&#65292;&#25191;&#34892;&#26102;&#38388;&#22914;
&#20309;&#21464;&#21270;&#65311;&#38543;&#30528;&#36827;&#21046;&#25913;&#21464;&#65292;&#25191;&#34892;&#26102;&#38388;&#22914;&#20309;&#21464;&#21270;&#65311;&#35299;&#37322;&#21407;&#22240;&#12290;
<a name="(idx._(gentag._200))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..2)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#35814;&#21152;&#20998;&#26512;&#19978;&#36848;&#34920;&#31034;&#12290;&#20174;&#28385;&#36275;&#25968;&#25454;&#31867;&#22411;&#23450;&#20041;&#30340;&#35282;&#24230;&#26469;&#35828;&#65292;&#23427;&#20204;&#22312;&#20309;&#31181;&#31243;&#24230;&#19978;&#26159;&#25104;&#21151;&#25110;&#22833;&#36133;&#30340;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..3)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._201))"></a>
&#29992;&#24046;&#20998;&#26641;&#34920;&#31034;&#25152;&#26377;&#25972;&#25968;&#65288;&#36127;&#25968;&#21644;&#38750;&#36127;&#25968;&#65289;&#12290;&#24046;&#20998;&#26641;&#26159;&#19968;&#21015;&#34920;&#65292;&#21487;&#29992;&#35821;&#27861;&#23450;&#20041;&#22914;&#19979;&#65306;</p><blockquote class="SubFlow"><p><span class="texMathDisplay">\mathit{Diff\mbox{-}tree} ::= <span class="stt">(one)</span> \mid <span class="stt">(diff</span><span class="stt">
</span><span class="texMathInline">\mathit{Diff\mbox{-}tree}</span><span class="stt"> </span><span class="texMathInline">\mathit{Diff\mbox{-}tree}</span><span class="stt">)</span></span>
<a name="(idx._(gentag._202))"></a></p><p>&#21015;&#34920; <span class="stt">(one)</span> &#34920;&#31034; 1&#12290;&#22914;&#26524; <span class="texMathInline">t_1</span> &#34920;&#31034; <span class="texMathInline">n_1</span>&#65292;<span class="texMathInline">t_2</span> &#34920;&#31034; <span class="texMathInline">n_2</span>&#65292;&#37027;&#20040;
<span class="stt">(diff </span><span class="texMathInline">n_1</span><span class="stt"> </span><span class="texMathInline">n_2</span><span class="stt">)</span> &#34920;&#31034; <span class="texMathInline">n_1 - n_2</span>&#12290;</p><p>&#25152;&#20197;&#65292;<span class="stt">(one)</span> &#21644; <span class="stt">(diff</span> <span class="stt">(one)</span> <span class="stt">(diff</span> <span class="stt">(one)</span>
<span class="stt">(one)))</span> &#37117;&#34920;&#31034;1&#65307;<span class="stt">(diff</span> <span class="stt">(diff</span> <span class="stt">(one)</span> <span class="stt">(one))</span>
<span class="stt">(one))</span> &#34920;&#31034; <span class="texMathInline">-1</span>&#12290;</p><ol><li><p>&#35777;&#26126;&#27492;&#31995;&#32479;&#20013;&#65292;&#27599;&#20010;&#25968;&#37117;&#26377;&#26080;&#38480;&#31181;&#34920;&#31034;&#26041;&#24335;&#12290;</p></li><li><p>&#23454;&#29616;&#36825;&#31181;&#25972;&#25968;&#34920;&#31034;&#27861;&#65306;&#20889;&#20986;nat&#23450;&#20041;&#30340; <span class="stt">zero</span>&#12289;<span class="stt">is-zero?</span>&#12289;
<span class="stt">successor</span> &#21644; <span class="stt">predecessor</span>&#65292;&#27492;&#22806;&#36824;&#35201;&#33021;&#34920;&#31034;&#36127;&#25968;&#12290;&#36825;&#31181;&#26041;&#24335;&#19979;&#65292;&#25972;&#25968;&#30340;&#20219;
&#20309;&#21512;&#27861;&#34920;&#31034;&#37117;&#24212;&#35813;&#33021;&#20316;&#20026;&#20320;&#36807;&#31243;&#30340;&#21442;&#25968;&#12290;&#20363;&#22914;&#65292;&#20320;&#30340;&#36807;&#31243; <span class="stt">successor</span> &#21487;&#20197;&#25509;&#21463;&#26080;
&#38480;&#22810;&#31181; <span class="texMathInline">1</span> &#30340;&#21512;&#27861;&#34920;&#31034;&#65292;&#19988;&#37117;&#24212;&#32473;&#20986;&#19968;&#20010; <span class="texMathInline">2</span>&#30340;&#21512;&#27861;&#34920;&#31034;&#12290;&#23545; <span class="texMathInline">1</span> &#30340;&#19981;&#21516;&#21512;&#27861;
&#34920;&#31034;&#65292;&#21487;&#20197;&#32473;&#20986;&#19981;&#21516;&#30340; <span class="texMathInline">2</span> &#30340;&#21512;&#27861;&#34920;&#31034;&#12290;</p></li><li><p>&#20889;&#20986;&#36807;&#31243; <span class="stt">diff-tree-plus</span>&#65292;&#29992;&#36825;&#31181;&#34920;&#31034;&#20570;&#21152;&#27861;&#12290;&#20320;&#30340;&#36807;&#31243;&#24212;&#38024;&#23545;&#19981;&#21516;&#30340;&#24046;
&#20998;&#26641;&#36827;&#34892;&#20248;&#21270;&#65292;&#24182;&#22312;&#24120;&#25968;&#26102;&#38388;&#20869;&#24471;&#20986;&#32467;&#26524;&#65288;&#21363;&#19982;&#36755;&#20837;&#22823;&#23567;&#26080;&#20851;&#65289;&#12290;&#27880;&#24847;&#65292;&#19981;&#21487;&#20351;&#29992;&#36882;&#24402;&#12290;
<a name="(idx._(gentag._203))"></a></p></li></ol></blockquote></blockquote><h4 class="heading">2.2<tt>&nbsp;</tt><a name="(part._s2..2)"></a>&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;<span class="button-group"><a href="#(part._s2..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._204))"></a>
<a name="(idx._(gentag._205))"></a>
&#20351;&#29992;&#25968;&#25454;&#25277;&#35937;&#30340;&#31243;&#24207;&#20855;&#26377;&#34920;&#31034;&#26080;&#20851;&#24615;&#65306;&#19982;&#29992;&#26469;&#23454;&#29616;&#25277;&#35937;&#25968;&#25454;&#31867;&#22411;&#30340;&#20855;&#20307;&#34920;&#31034;&#26041;&#24335;&#26080;&#20851;&#65292;&#29978;&#33267;
&#21487;&#20197;&#36890;&#36807;&#37325;&#26032;&#23450;&#20041;&#25509;&#21475;&#20013;&#30340;&#19968;&#23567;&#37096;&#20998;&#36807;&#31243;&#26469;&#25913;&#21464;&#34920;&#31034;&#12290;&#22312;&#21518;&#38754;&#30340;&#31456;&#33410;&#20013;&#25105;&#20204;&#24120;&#20250;&#29992;&#21040;&#36825;&#26465;&#24615;
&#36136;&#12290;</p><p><a name="(idx._(gentag._206))"></a>
<a name="(idx._(gentag._207))"></a>
&#26412;&#33410;&#20171;&#32461;&#20960;&#31181;&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;&#12290;&#25105;&#20204;&#29992;&#25968;&#25454;&#31867;&#22411;<span class="emph">&#29615;&#22659;</span> (<span class="emph">environment</span>) &#35299;&#37322;&#36825;
&#20123;&#36873;&#25321;&#12290;&#23545;&#26377;&#38480;&#20010;&#21464;&#37327;&#32452;&#25104;&#30340;&#38598;&#21512;&#65292;&#29615;&#22659;&#23558;&#20540;&#19982;&#20854;&#20013;&#30340;&#27599;&#20010;&#20803;&#32032;&#20851;&#32852;&#36215;&#26469;&#12290;&#22312;&#32534;&#31243;&#35821;&#35328;&#30340;&#23454;
&#29616;&#20043;&#20013;&#65292;&#29615;&#22659;&#21487;&#29992;&#26469;&#32500;&#31995;&#21464;&#37327;&#19982;&#20540;&#30340;&#20851;&#31995;&#12290;&#32534;&#35793;&#22120;&#20063;&#33021;&#29992;&#29615;&#22659;&#23558;&#21464;&#37327;&#21517;&#19982;&#21464;&#37327;&#20449;&#24687;&#20851;&#32852;&#36215;&#26469;&#12290;</p><p>&#21482;&#35201;&#33021;&#22815;&#26816;&#26597;&#20004;&#20010;&#21464;&#37327;&#26159;&#21542;&#30456;&#31561;&#65292;&#21464;&#37327;&#33021;&#22815;&#29992;&#25105;&#20204;&#21916;&#27426;&#30340;&#20219;&#20309;&#26041;&#24335;&#34920;&#31034;&#12290;&#25105;&#20204;&#36873;&#29992; Scheme
&#31526;&#21495;&#34920;&#31034;&#21464;&#37327;&#65292;&#20294;&#22312;&#27809;&#26377;&#31526;&#21495;&#25968;&#25454;&#31867;&#22411;&#30340;&#35821;&#35328;&#20013;&#65292;&#21464;&#37327;&#20063;&#21487;&#20197;&#29992;&#23383;&#31526;&#20018;&#65292;&#21704;&#24076;&#34920;&#24341;&#29992;&#65292;&#29978;&#33267;
&#25968;&#23383;&#34920;&#31034;&#65288;&#35265; <a href="#%28part._s3..6%29" data-pltdoc="x">&#28040;&#38500;&#21464;&#37327;&#21517;</a>&#65289;&#12290;</p><h5 class="heading">2.2.1<tt>&nbsp;</tt><a name="(part._s2..2..1)"></a>&#29615;&#22659;&#30340;&#25509;&#21475;<span class="button-group"><a href="#(part._s2..2..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#29615;&#22659;&#26159;&#19968;&#20989;&#25968;&#65292;&#23450;&#20041;&#22495;&#20026;&#26377;&#38480;&#20010;&#21464;&#37327;&#30340;&#38598;&#21512;&#65292;&#20540;&#22495;&#20026;&#25152;&#26377; Scheme &#20540;&#30340;&#38598;&#21512;&#12290;&#25968;&#23398;&#19978;&#24120;&#35828;&#30340;
&#26377;&#38480;&#20989;&#25968;&#26159;&#25351;&#26377;&#24207;&#25968;&#23545;&#32452;&#25104;&#30340;&#26377;&#38480;&#38598;&#21512;&#65292;&#25105;&#20204;&#37319;&#29992;&#36825;&#19968;&#21547;&#20041;&#65292;&#23601;&#24471;&#34920;&#31034;&#24418;&#22914;
<span class="Iidentity">$\{(var_1,\allowbreak val_1),\allowbreak ...,\allowbreak (var_n, val_n)\}$</span>&#30340;&#25152;
&#26377;&#38598;&#21512;&#12290;&#20854;&#20013;&#65292;<span class="texMathInline">var_i</span> &#26159;&#26576;&#19968;&#21464;&#37327;&#65292;<span class="texMathInline">val_i</span> &#26159;&#20219;&#24847; Scheme &#20540;&#12290;&#26377;&#26102;&#31216;&#29615;&#22659;
<span class="texMathInline">env</span> &#20013;&#21464;&#37327; <span class="texMathInline">var</span> &#30340;&#20540; <span class="texMathInline">val</span> &#20026;&#20854;&#22312; <span class="texMathInline">env</span> &#20013;&#30340;<span class="emph">&#32465;&#23450;</span> (<span class="emph">binding</span>)&#12290;
<a name="(idx._(gentag._208))"></a>
<a name="(idx._(gentag._209))"></a></p><p>&#36825;&#19968;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;&#26377;&#19977;&#20010;&#36807;&#31243;&#65292;&#23450;&#20041;&#22914;&#19979;&#65306;</p><blockquote class="SubFlow"><p><a name="(idx._(gentag._210))"></a>
<a name="(idx._(gentag._211))"></a>
<a name="(idx._(gentag._212))"></a>
<span class="Iidentity">\begin{align*}&amp;<span class="stt">(empty-env)</span> &amp;= &amp;\ \lceil \emptyset \rceil \\
&amp;<span class="stt">(apply-env </span><span class="Iidentity">\lceil f \rceil</span><span class="stt"> </span><span class="Iidentity">var</span><span class="stt">)</span> &amp;= &amp;\ f(var) \\
&amp;<span class="stt">(extend-env </span><span class="Iidentity">var</span><span class="stt"> </span><span class="Iidentity">v</span><span class="stt"> </span><span class="Iidentity">\lceil f \rceil</span><span class="stt">)</span> &amp;= &amp;\ \lceil g \rceil \\
&amp;\phantom{x} &amp;&#20854;&#20013;&#65292;&amp;\ g(var_1) = <span class="Iidentity">\begin{cases}v &amp; &#33509;\ var_1 = var \\
 f(var_1) &amp; &#21542;&#21017;\end{cases}</span>\end{align*}</span>
<a name="(idx._(gentag._213))"></a></p></blockquote><p>&#36807;&#31243; <span class="stt">empty-env</span> &#19981;&#24102;&#21442;&#25968;&#65292;&#24517;&#39035;&#36820;&#22238;&#31354;&#29615;&#22659;&#30340;&#34920;&#31034;&#65307;<span class="stt">apply-env</span> &#29992;&#29615;&#22659;&#23545;&#21464;&#37327;
&#27714;&#20540;&#65307;<span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">val</span><span class="stt"> </span><span class="texMathInline">env</span><span class="stt">)</span> &#20135;&#29983;&#19968;&#20010;&#26032;&#29615;&#22659;&#65292;&#23558;&#21464;&#37327; <span class="texMathInline">var</span>
&#30340;&#20540;&#35774;&#20026; <span class="texMathInline">val</span>&#65292;&#27492;&#22806;&#19982; <span class="texMathInline">env</span> &#30456;&#21516;&#12290;&#20363;&#22914;&#65292;&#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23450;&#20041;&#20102;&#19968;&#20010;&#29615;&#22659; <span class="texMathInline">e</span>&#65292;&#20351; <span class="texMathInline">e(<span class="stt">d</span>) = 6</span>&#65292;<span class="texMathInline">e(<span class="stt">x</span>) = 7</span>&#65292;<span class="texMathInline">e(<span class="stt">y</span>) =
8</span>&#65292;&#19988;&#23545;&#20219;&#20309;&#20854;&#20182;&#21464;&#37327;&#65292;<span class="texMathInline">e</span>&#26410;&#23450;&#20041;&#12290;&#26412;&#20363;&#20013;&#65292;<span class="stt">y</span>&#20808;&#32465;&#23450;&#21040; <span class="texMathInline">14</span>&#65292;&#38543;&#21518;&#32465;&#23450;&#21040;
<span class="texMathInline">8</span>&#12290;&#36825;&#24403;&#28982;&#21482;&#26159;&#29983;&#25104;&#35813;&#29615;&#22659;&#30340;&#20247;&#22810;&#26041;&#27861;&#20043;&#19968;&#12290;</p></blockquote><p>&#22914;&#21516;&#21069;&#19968;&#20010;&#20363;&#23376;&#65292;&#21487;&#20197;&#23558;&#25509;&#21475;&#20013;&#30340;&#36807;&#31243;&#20998;&#20026;&#26500;&#36896;&#22120;&#21644;&#35266;&#27979;&#22120;&#12290;&#26412;&#20363;&#20013;&#65292;<span class="stt">empty-env</span>&#21644;
<span class="stt">extend-env</span>&#26159;&#26500;&#36896;&#22120;&#65292;<span class="stt">apply-env</span>&#26159;&#21807;&#19968;&#30340;&#35266;&#27979;&#22120;&#12290;
<a name="(idx._(gentag._214))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex2..4)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._215))"></a>
&#32771;&#34385;&#25968;&#25454;&#31867;&#22411;<span class="emph">&#26632;</span> (<span class="emph">stack</span>)&#65292;&#20854;&#25509;&#21475;&#21253;&#21547;&#36807;&#31243; <span class="stt">empty-stack</span>&#12289;<span class="stt">push</span>&#12289;
<span class="stt">pop</span>&#12289;<span class="stt">top</span> &#21644; <span class="stt">empty-stack?</span>&#12290;&#25353;&#29031;&#31034;&#20363;&#20013;&#30340;&#26041;&#24335;&#20889;&#20986;&#36825;&#20123;&#25805;&#20316;&#30340;&#23450;&#20041;&#12290;&#21738;
&#20123;&#25805;&#20316;&#26159;&#26500;&#36896;&#22120;&#65311;&#21738;&#20123;&#26159;&#35266;&#27979;&#22120;&#65311;
<a name="(idx._(gentag._216))"></a></p></blockquote><h5 class="heading">2.2.2<tt>&nbsp;</tt><a name="(part._s2..2..2)"></a>&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;<span class="button-group"><a href="#(part._s2..2..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._217))"></a>
<a name="(idx._(gentag._218))"></a>
&#35266;&#23519;&#21487;&#30693;&#65292;&#27599;&#20010;&#29615;&#22659;&#37117;&#33021;&#20174;&#31354;&#29615;&#22659;&#24320;&#22987;&#65292;<span class="texMathInline">n</span> &#27425;&#35843;&#29992; <span class="stt">extend-env</span> &#24471;&#21040;&#65292;&#20854;&#20013; <span class="texMathInline">n
\geqslant 0</span>&#12290;&#20363;&#22914;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="texMathInline">var_n</span><span class="hspace">&nbsp;</span><span class="texMathInline">val_n</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="texMathInline">var_1</span><span class="hspace">&nbsp;</span><span class="texMathInline">val_1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#30001;&#27492;&#21487;&#24471;&#19968;&#31181;&#29615;&#22659;&#30340;&#34920;&#31034;&#26041;&#27861;&#12290;</p></blockquote><p>&#27599;&#20010;&#29615;&#22659;&#37117;&#33021;&#29992;&#19979;&#21015;&#35821;&#27861;&#23450;&#20041;&#30340;&#34920;&#36798;&#24335;&#29983;&#25104;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Env\mbox{-}exp} &amp;::= <span class="stt">(empty-env)</span> \\ &amp;::= <span class="stt">(extend-env</span><span class="stt">
</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">
</span><span class="Iidentity">\mathit{Scheme\mbox{-}value}</span><span class="stt">
</span><span class="Iidentity">\mathit{Env\mbox{-}exp}</span><span class="stt">)</span>\end{align*}</span></p><p>&#21487;&#20197;&#29992;&#25551;&#36848;&#21015;&#34920;&#38598;&#21512;&#30340;&#35821;&#27861;&#34920;&#31034;&#29615;&#22659;&#65292;&#30001;&#27492;&#24471;&#20986; &#20013;&#30340;&#23454;&#29616;&#12290;&#36807;&#31243; <span class="stt">apply-env</span> &#26597;
&#30475;&#34920;&#31034;&#29615;&#22659;&#30340;&#25968;&#25454;&#32467;&#26500; <span class="stt">env</span>&#65292;&#21028;&#26029;&#23427;&#34920;&#31034;&#21738;&#31181;&#29615;&#22659;&#65292;&#24182;&#20570;&#36866;&#24403;&#25805;&#20316;&#12290;&#22914;&#26524;&#23427;&#34920;&#31034;&#31354;&#29615;
&#22659;&#65292;&#37027;&#23601;&#25253;&#38169;&#65307;&#22914;&#26524;&#23427;&#34920;&#31034; <span class="stt">extend-env</span> &#29983;&#25104;&#30340;&#29615;&#22659;&#65292;&#37027;&#23601;&#21028;&#26029;&#35201;&#26597;&#25214;&#30340;&#21464;&#37327;&#26159;&#21542;&#19982;
&#29615;&#22659;&#20013;&#32465;&#23450;&#30340;&#26576;&#19968;&#21464;&#37327;&#30456;&#21516;&#65292;&#22914;&#26524;&#26159;&#65292;&#21017;&#36820;&#22238;&#20445;&#23384;&#30340;&#20540;&#65292;&#21542;&#21017;&#22312;&#20445;&#23384;&#30340;&#29615;&#22659;&#20013;&#26597;&#25214;&#21464;&#37327;&#12290;</p><p>&#36825;&#26159;&#19968;&#31181;&#24120;&#35265;&#30340;&#20195;&#30721;&#27169;&#24335;&#12290;&#25105;&#20204;&#21483;&#23427;<span class="emph">&#35299;&#37322;&#22120;&#31192;&#26041;</span> (<span class="emph">interpreter recipe</span>)&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#35299;&#37322;&#22120;&#31192;&#26041;</span>
<a name="(idx._(gentag._219))"></a></p></blockquote><blockquote class="TipContent"><ol><li><p>&#26597;&#30475;&#19968;&#27573;&#25968;&#25454;&#12290;</p></li><li><p>&#21028;&#26029;&#23427;&#34920;&#31034;&#20160;&#20040;&#26679;&#30340;&#25968;&#25454;&#12290;</p></li><li><p>&#25552;&#21462;&#25968;&#25454;&#30340;&#21508;&#20010;&#37096;&#20998;&#65292;&#23545;&#23427;&#20204;&#20570;&#36866;&#24403;&#25805;&#20316;&#12290;</p></li></ol></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Env} = <span class="stt">(empty-env)</span> \mid <span class="stt">(extend-env </span><span class="texMathInline">\mathit{Var}</span><span class="stt"> </span><span class="texMathInline">\mathit{SchemeVal}</span><span class="stt"> </span><span class="texMathInline">\mathit{Env}</span><span class="stt">)</span></span></td></tr><tr><td><span class="texMathInline">\mathit{Var} = \mathit{Sym}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._220))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">empty-env</span></span> : <span class="texMathInline">() \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._221))"></a></td></tr><tr><td><a name="(idx._(gentag._222))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-env</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{SchemeVal} \times \mathit{Env} \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._223))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-env</span></span> : <span class="texMathInline">\mathit{Env} \times \mathit{Var} \to \mathit{SchemeVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">empty-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-binding-found</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">extend-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">saved-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">caddr</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadddr</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">saved-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">report-no-binding-found</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">apply-env</span><span class="hspace">&nbsp;</span><span class="RktVal">"~s&#26410;&#32465;&#23450;"</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">report-invalid-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">apply-env</span><span class="hspace">&nbsp;</span><span class="RktVal">"&#38750;&#27861;&#29615;&#22659;: ~s"</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#29615;&#22659;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;<a name="(elem._fig-2..1)"></a></p></blockquote></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._224))"></a>
<a name="(idx._(gentag._225))"></a></div></p><blockquote class="EoplExercise"><p><a name="(elem._ex2..5)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._226))"></a>
<a name="(idx._(gentag._227))"></a>
<a name="(idx._(gentag._228))"></a>
<a name="(idx._(gentag._229))"></a>
&#21482;&#35201;&#33021;&#21306;&#20998;&#31354;&#29615;&#22659;&#21644;&#38750;&#31354;&#29615;&#22659;&#65292;&#24182;&#33021;&#20174;&#21518;&#32773;&#20013;&#25552;&#21462;&#20986;&#25968;&#25454;&#29255;&#27573;&#65292;&#23601;&#33021;&#29992;&#20219;&#20309;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#29615;
&#22659;&#12290;&#25353;&#36825;&#31181;&#26041;&#24335;&#23454;&#29616;&#29615;&#22659;&#65306;&#31354;&#29615;&#22659;&#30001;&#31354;&#21015;&#34920;&#34920;&#31034;&#65292;<span class="stt">extend-env</span>&#29983;&#25104;&#22914;&#19979;&#29615;&#22659;&#65306;</p><blockquote class="SubFlow"><blockquote class="SCentered"><p><img src="alist-env.svg" alt="关联列表表示法" width="216.0pt" height="104.4pt"/></p></blockquote><p><a name="(idx._(gentag._230))"></a>
<a name="(idx._(gentag._231))"></a>
&#36825;&#21483; <span class="emph">a-list</span> &#25110;<span class="emph">&#20851;&#32852;&#21015;&#34920;</span> (<span class="emph">association-list</span>) &#34920;&#31034;&#27861;&#12290;</p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..6)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21457;&#26126;&#19977;&#31181;&#20197;&#19978;&#30340;&#29615;&#22659;&#25509;&#21475;&#34920;&#31034;&#65292;&#32473;&#20986;&#23454;&#29616;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..7)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#37325;&#20889; &#20013;&#30340; <span class="stt">apply-env</span>&#65292;&#32473;&#20986;&#26356;&#35814;&#32454;&#30340;&#38169;&#35823;&#20449;&#24687;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..8)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._232))"></a>
<a name="(idx._(gentag._233))"></a>
&#32473;&#29615;&#22659;&#25509;&#21475;&#28155;&#21152;&#35266;&#27979;&#22120; <span class="stt">empty-env?</span>&#65292;&#29992; a-list &#34920;&#31034;&#27861;&#23454;&#29616;&#23427;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..9)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#29615;&#22659;&#25509;&#21475;&#28155;&#21152;&#35266;&#27979;&#22120; <span class="stt">has-binding?</span>&#65292;&#23427;&#21462;&#19968;&#29615;&#22659; <span class="texMathInline">env</span>&#65292;&#19968;&#20010;&#21464;&#37327; <span class="texMathInline">s</span>&#65292;&#21028;&#26029;
<span class="texMathInline">s</span> &#22312; <span class="texMathInline">env</span> &#20013;&#26159;&#21542;&#26377;&#32465;&#23450;&#20540;&#12290;&#29992; a-list &#34920;&#31034;&#27861;&#23454;&#29616;&#23427;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..10)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._234))"></a>
&#32473;&#29615;&#22659;&#25509;&#21475;&#28155;&#21152;&#26500;&#36896;&#22120; <span class="stt">extend-env*</span>&#65292;&#29992; a-list &#34920;&#31034;&#27861;&#23454;&#29616;&#23427;&#12290;&#36825;&#20010;&#26500;&#36896;&#22120;&#21462;&#19968;&#21464;
&#37327;&#21015;&#34920;&#21644;&#19968;&#38271;&#24230;&#30456;&#31561;&#30340;&#20540;&#21015;&#34920;&#65292;&#20197;&#21450;&#19968;&#29615;&#22659;&#65292;&#20854;&#23450;&#20041;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}&amp; <span class="stt">(extend-env* (</span><span class="Iidentity">var_1</span><span class="stt"> </span><span class="Iidentity">\dots</span><span class="stt"> </span><span class="Iidentity">var_k</span><span class="stt">) (</span><span class="Iidentity">val_1</span><span class="stt"> </span><span class="Iidentity">\dots</span><span class="stt"> </span><span class="Iidentity">var_k</span><span class="stt">) </span><span class="Iidentity">\lceil f \rceil</span><span class="stt">)</span> = \lceil g \rceil, \\
&amp; \quad &#20854;&#20013;&#65292;g(var) =
 <span class="Iidentity">\begin{cases}val_i &amp; &#33509; \ var = var_i \  &#23545;&#26576;&#20010; \ i \ &#25104;&#31435;&#65292;1 \leqslant i \leqslant k \\
f(var) &amp; &#21542;&#21017;\end{cases}</span>\end{align*}</span>
<a name="(idx._(gentag._235))"></a>
<a name="(idx._(gentag._236))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..11)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21069;&#19968;&#39064;&#20013;&#30340; <span class="stt">extend-env*</span> &#23454;&#29616;&#27604;&#36739;&#25305;&#21155;&#30340;&#35805;&#65292;&#36816;&#34892;&#26102;&#38388;&#19982; <span class="texMathInline">k</span> &#25104;&#27491;&#27604;&#12290;&#26377;&#19968;&#31181;&#34920;
&#31034;&#21487;&#20351; <span class="stt">extend-env*</span> &#30340;&#36816;&#34892;&#26102;&#38388;&#20026;&#24120;&#25968;&#65306;&#29992;&#31354;&#21015;&#34920;&#34920;&#31034;&#31354;&#29615;&#22659;&#65292;&#29992;&#19979;&#38754;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;
&#31034;&#38750;&#31354;&#29615;&#22659;&#65306;</p><blockquote class="SCentered"><p><img src="rib-cage-one.svg" alt="肋排环境表示法片段" width="201.6pt" height="102.6pt"/></p></blockquote><blockquote class="SubFlow"><p>&#37027;&#20040;&#19968;&#20010;&#29615;&#22659;&#30475;&#36215;&#26469;&#20687;&#26159;&#36825;&#26679;&#65306;</p><blockquote class="SCentered"><p><img src="rib-cage.svg" alt="肋排环境表示法" width="522.0pt" height="156.0pt"/></p></blockquote><p><a name="(idx._(gentag._237))"></a>
<a name="(idx._(gentag._238))"></a>
&#36825;&#21483;&#20570;<span class="emph">&#32907;&#25490;</span> (<span class="emph">ribcage</span>) &#34920;&#31034;&#27861;&#12290;&#29615;&#22659;&#30001;&#21517;&#20026;<span class="emph">&#32907;&#39592;</span> (<span class="emph">rib</span>) &#30340;&#24207;&#23545;&#21015;&#34920;&#34920;&#31034;&#65307;
&#27599;&#26681;&#24038;&#32907;&#26159;&#21464;&#37327;&#21015;&#34920;&#65292;&#21491;&#32907;&#26159;&#23545;&#24212;&#30340;&#20540;&#21015;&#34920;&#12290;</p><p>&#29992;&#36825;&#31181;&#34920;&#31034;&#23454;&#29616; <span class="stt">extend-env*</span> &#21644;&#20854;&#20182;&#29615;&#22659;&#25509;&#21475;&#12290;
<a name="(idx._(gentag._239))"></a>
<a name="(idx._(gentag._240))"></a>
<a name="(idx._(gentag._241))"></a></p></blockquote></blockquote><h5 class="heading">2.2.3<tt>&nbsp;</tt><a name="(part._s2..2..3)"></a>&#36807;&#31243;&#34920;&#31034;&#27861;<span class="button-group"><a href="#(part._s2..2..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._242))"></a>
<a name="(idx._(gentag._243))"></a>
&#29615;&#22659;&#25509;&#21475;&#26377;&#19968;&#26465;&#37325;&#35201;&#24615;&#36136;&#65306;&#23427;&#21482;&#26377; <span class="stt">apply-env</span> &#19968;&#20010;&#35266;&#27979;&#22120;&#12290;&#36825;&#26679;&#23601;&#33021;&#29992;&#21462;&#19968;&#21464;&#37327;&#65292;&#36820;
&#22238;&#32465;&#23450;&#20540;&#30340; Scheme &#36807;&#31243;&#34920;&#31034;&#29615;&#22659;&#12290;</p><p>&#35201;&#36825;&#26679;&#34920;&#31034;&#65292;&#23450;&#20041; <span class="stt">empty-env</span> &#21644; <span class="stt">extend-env</span> &#30340;&#36820;&#22238;&#20540;&#20026;&#36807;&#31243;&#65292;&#35843;&#29992;&#20108;&#32773;&#30340;&#36820;
&#22238;&#20540;&#23601;&#22914;&#21516;&#35843;&#29992;&#19978;&#19968;&#33410;&#30340; <span class="stt">apply-env</span> &#19968;&#26679;&#12290;&#30001;&#27492;&#24471;&#20986;&#19979;&#38754;&#30340;&#23454;&#29616;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Env} = \mathit{Var} \to \mathit{SchemeVal}</span></td></tr><tr><td><span class="texMathInline">\mathit{Var} = \mathit{Sym}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._244))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">empty-env</span></span> : <span class="texMathInline">() \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-binding-found</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._245))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-env</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{SchemeVal} \times \mathit{Env} \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-var</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">saved-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._246))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-env</span></span> : <span class="texMathInline">\mathit{Env} \times \mathit{Var} \to \mathit{SchemeVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><span class="stt">empty-env</span> &#21019;&#24314;&#30340;&#31354;&#29615;&#22659;&#25910;&#21040;&#20219;&#20309;&#21464;&#37327;&#37117;&#20250;&#25253;&#38169;&#65292;&#34920;&#26126;&#32473;&#23450;&#30340;&#21464;&#37327;&#19981;&#22312;&#20854;&#20013;&#12290;&#36807;&#31243;
<span class="stt">extend-env</span> &#36820;&#22238;&#30340;&#36807;&#31243;&#20195;&#34920;&#25193;&#23637;&#32780;&#24471;&#30340;&#29615;&#22659;&#12290;&#36825;&#20010;&#36807;&#31243;&#25910;&#21040;&#21464;&#37327; <span class="stt">search-var</span>
&#21518;&#65292;&#21028;&#26029;&#35813;&#21464;&#37327;&#26159;&#21542;&#19982;&#29615;&#22659;&#20013;&#32465;&#23450;&#30340;&#30456;&#21516;&#12290;&#22914;&#26524;&#30456;&#21516;&#65292;&#23601;&#36820;&#22238;&#20445;&#23384;&#30340;&#20540;&#65307;&#21542;&#21017;&#65292;&#23601;&#22312;&#20445;&#23384;&#30340;
&#29615;&#22659;&#20013;&#26597;&#25214;&#23427;&#12290;</p><p>&#36825;&#31181;&#34920;&#31034;&#27861;&#20013;&#65292;&#25968;&#25454;&#30001; <span class="stt">apply-env</span> <span class="emph">&#25191;&#34892;&#30340;&#21160;&#20316;</span>&#34920;&#31034;&#65292;&#25105;&#20204;&#31216;&#20043;
&#20026;<span class="emph">&#36807;&#31243;&#34920;&#31034;&#27861;</span> (<span class="emph">procedural representation</span>)&#12290;</p><p>&#25968;&#25454;&#31867;&#22411;&#21482;&#26377;&#19968;&#20010;&#35266;&#27979;&#22120;&#30340;&#24773;&#24418;&#24182;&#38750;&#24819;&#35937;&#20013;&#37027;&#33324;&#23569;&#35265;&#12290;&#27604;&#22914;&#65292;&#24403;&#25968;&#25454;&#26159;&#19968;&#32452;&#20989;&#25968;&#65292;&#23601;&#33021;&#29992;&#35843;
&#29992;&#26102;&#25191;&#34892;&#30340;&#21160;&#20316;<a name="(idx._(gentag._247))"></a>&#34920;&#31034;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#21487;&#20197;&#25353;&#29031;&#19979;
&#21015;&#27493;&#39588;&#25552;&#28860;&#20986;&#25509;&#21475;&#21644;&#36807;&#31243;&#34920;&#31034;&#27861;&#65306;</p><ol><li><p>&#25214;&#20986;&#23458;&#25143;&#20195;&#30721;&#20013;&#27714;&#21462;&#25351;&#23450;&#31867;&#22411;&#20540;&#30340; lambda &#34920;&#36798;&#24335;&#12290;&#20026;&#27599;&#20010;&#36825;&#26679;&#30340; lambda &#34920;&#36798;&#24335;
&#20889;&#19968;&#20010;&#26500;&#36896;&#22120;&#36807;&#31243;&#12290;&#26500;&#36896;&#22120;&#36807;&#31243;&#30340;&#21442;&#25968;&#29992;&#20316; lambda &#34920;&#36798;&#24335;&#20013;&#30340;&#33258;&#30001;&#21464;&#37327;&#12290;&#22312;&#23458;&#25143;&#20195;&#30721;&#20013;&#65292;
&#29992;&#26500;&#36896;&#22120;&#35843;&#29992;&#26367;&#25442;&#23545;&#24212;&#30340; lambda &#34920;&#36798;&#24335;&#12290;</p></li><li><p>&#20687;&#23450;&#20041; <span class="stt">apply-env</span> &#37027;&#26679;&#23450;&#20041;&#19968;&#20010; <span class="stt">apply-</span> &#36807;&#31243;&#12290;&#25214;&#20986;&#23458;&#25143;&#20195;&#30721;&#20013;&#25152;&#26377;&#20351;
&#29992;&#25351;&#23450;&#31867;&#22411;&#20540;&#30340;&#22320;&#26041;&#65292;&#21253;&#25324;&#26500;&#36896;&#22120;&#36807;&#31243;&#30340;&#20027;&#20307;&#12290;&#25152;&#26377;&#20351;&#29992;&#25351;&#23450;&#31867;&#22411;&#20540;&#30340;&#22320;&#26041;&#37117;&#25913;&#29992;
<span class="stt">apply-</span> &#36807;&#31243;&#12290;</p></li></ol><p><a name="(idx._(gentag._248))"></a>
&#19968;&#26086;&#23436;&#25104;&#36825;&#20123;&#27493;&#39588;&#65292;&#25509;&#21475;&#23601;&#21253;&#21547;&#25152;&#26377;&#30340;&#26500;&#36896;&#22120;&#36807;&#31243;&#21644; <span class="stt">apply-</span> &#36807;&#31243;&#65292;&#23458;&#25143;&#20195;&#30721;&#21017;&#19982;&#34920;
&#31034;&#26080;&#20851;&#65306;&#23427;&#19981;&#20877;&#20381;&#36182;&#34920;&#31034;&#65292;&#25105;&#20204;&#23558;&#33021;&#38543;&#24847;&#25442;&#29992;&#21478;&#19968;&#22871;&#25509;&#21475;&#23454;&#29616;&#65292;&#27491;&#22914; <a href="#%28part._s2..2..2%29" data-pltdoc="x">&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</a>&#25152;&#36848;&#12290;</p><p>&#22914;&#26524;&#29992;&#20110;&#23454;&#29616;&#30340;&#35821;&#35328;&#19981;&#25903;&#25345;&#39640;&#38454;&#36807;&#31243;&#65292;&#37027;&#23601;&#24471;&#20877;&#20570;&#19968;&#20123;&#27493;&#39588;&#65292;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#21644;&#35299;&#37322;&#22120;&#31192;
&#26041;&#23454;&#29616;&#25152;&#38656;&#25509;&#21475;&#65292;&#23601;&#20687;&#19978;&#19968;&#33410;&#37027;&#26679;&#12290;&#36825;&#19968;&#25805;&#20316;&#21483;&#20570;<span class="emph">&#28040;&#20989;</span> (<span class="emph">defunctionalization</span>)&#12290;
<a name="(idx._(gentag._249))"></a>
&#29615;&#22659;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#20013;&#65292;&#21508;&#31181;&#21464;&#20307;&#37117;&#26159;&#28040;&#20989;&#30340;&#31616;&#21333;&#20363;&#23376;&#12290;&#36807;&#31243;&#34920;&#31034;&#27861;&#21644;&#28040;&#20989;&#34920;&#31034;&#27861;&#30340;&#20851;&#31995;&#23558;
&#26159;&#26412;&#20070;&#21453;&#22797;&#20986;&#29616;&#30340;&#20027;&#39064;&#12290;
<a name="(idx._(gentag._250))"></a>
<a name="(idx._(gentag._251))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex2..12)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._252))"></a>
<a name="(idx._(gentag._253))"></a>
<a name="(idx._(gentag._254))"></a>
<a name="(idx._(gentag._255))"></a>
&#29992;&#36807;&#31243;&#34920;&#31034;&#27861;&#23454;&#29616;ex2.4 &#20013;&#30340;&#26632;&#25968;&#25454;&#31867;&#22411;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..13)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#36807;&#31243;&#34920;&#31034;&#27861;&#65292;&#29992;&#20004;&#20010;&#36807;&#31243;&#32452;&#25104;&#30340;&#21015;&#34920;&#34920;&#31034;&#29615;&#22659;&#65292;&#23454;&#29616; <span class="stt">empty-env?</span>&#12290;&#19968;&#20010;&#36807;&#31243;&#20687;&#21069;
&#38754;&#37027;&#26679;&#65292;&#36820;&#22238;&#21464;&#37327;&#30340;&#32465;&#23450;&#20540;&#65307;&#19968;&#20010;&#36820;&#22238;&#29615;&#22659;&#26159;&#21542;&#20026;&#31354;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..14)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#21069;&#19968;&#39064;&#20013;&#30340;&#34920;&#31034;&#27861;&#65292;&#21152;&#20837;&#31532;&#19977;&#20010;&#36807;&#31243;&#65292;&#29992;&#23427;&#26469; <span class="stt">has-binding?</span> &#65288;&#35265;
ex2.9&#65289;&#12290;
<a name="(idx._(gentag._256))"></a>
<a name="(idx._(gentag._257))"></a></p></blockquote><h4 class="heading">2.3<tt>&nbsp;</tt><a name="(part._s2..3)"></a>&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;<span class="button-group"><a href="#(part._s2..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._258))"></a>
<a href="#%28part._isd%29" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a>&#22823;&#37096;&#20998;&#37117;&#22312;&#22788;&#29702;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#12290;&#20363;&#22914;&#65292; &#32473;&#20986;&#20102;
lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#35821;&#27861;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Lc\mbox{-}Exp}
&amp;::= \mathit{Identifier} \\
&amp;::= \normalfont{<span class="stt">(lambda (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>} \\
&amp;::= \normalfont{<span class="stt">(</span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt"> </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>}\end{align*}</span></p><p>&#25105;&#20204;&#36824;&#20889;&#20986;&#20102;&#36807;&#31243; <span class="stt">occurs-free?</span>&#12290;&#20687;&#24403;&#26102;&#25552;&#21040;&#30340;&#65292;<a href="#%28part._s1..2..4%29" data-pltdoc="x"><span class="stt">occurs-free?</span></a>&#20013;
<span class="stt">occurs-free?</span> &#30340;&#23450;&#20041;&#19981;&#22823;&#23481;&#26131;&#35835;&#25026;&#12290;&#27604;&#22914;&#65292;&#24456;&#38590;&#25630;&#26126;&#30333; <span class="stt">(car (cadr exp))</span> &#25351;
&#20195; <span class="stt">lambda</span> &#34920;&#36798;&#24335;&#20013;&#30340;&#21464;&#37327;&#22768;&#26126;&#65292;&#25110;&#32773; <span class="stt">(caddr exp)</span> &#25351;&#20195;&#34920;&#36798;&#24335;&#30340;&#20027;&#20307;&#12290;</p><p><a name="(idx._(gentag._259))"></a>
&#35201;&#25913;&#21892;&#36825;&#31181;&#24773;&#20917;&#65292;&#21487;&#20197;&#32473; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#28155;&#21152;&#19968;&#22871;&#25509;&#21475;&#12290;&#25105;&#20204;&#30340;&#25509;&#21475;&#26377;&#20960;&#20010;&#26500;&#36896;&#22120;&#65292;&#20197;
&#21450;&#20004;&#31181;&#35266;&#27979;&#22120;&#65306;&#35859;&#35789;&#21644;&#25552;&#21462;&#22120;&#12290;</p><p>&#26500;&#36896;&#22120;&#26377;&#65306;</p><blockquote><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">var-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Var} \to \mathit{Lc\mbox{-}Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">lambda-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Var} \times \mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">app-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \times \mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span></p></td></tr></table></blockquote><p>&#35859;&#35789;&#26377;&#65306;</p><blockquote><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">var-exp?</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Bool}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">lambda-exp?</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Bool}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">app-exp?</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Bool}</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._260))"></a>
&#25552;&#21462;&#22120;&#26377;&#65306;</p><blockquote><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">var-exp-&gt;var</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Var}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">lambda-exp-&gt;bound-var</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Var}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">lambda-exp-&gt;body</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">app-exp-&gt;rator</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">app-exp-&gt;rand</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span></p></td></tr></table></blockquote><p>&#27599;&#20010;&#25552;&#21462;&#22120;&#23545;&#24212; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#20013;&#30340;&#19968;&#37096;&#20998;&#12290;&#29616;&#22312;&#21487;&#20197;&#20889;&#20986;&#19968;&#29256;&#21482;&#20381;&#36182;&#25509;&#21475;&#30340;
<span class="stt">occurs-free?</span>&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><a name="(idx._(gentag._261))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a name="(elem._occurs-free~3f)"></a><span style="font-weight: bold"><span class="stt">occurs-free?</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{LcExp} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">occurs-free?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">var-exp?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp-&gt;var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda-exp?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp-&gt;bound-var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp-&gt;body</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp-&gt;rator</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp-&gt;rand</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._262))"></a></div></p></blockquote><p>&#21482;&#35201;&#20351;&#29992;&#19978;&#36848;&#26500;&#36896;&#22120;&#65292;&#24590;&#26679;&#34920;&#31034; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#37117;&#21487;&#20197;&#12290;
<a name="(idx._(gentag._263))"></a></p><p><a name="(idx._(gentag._264))"></a>
&#25105;&#20204;&#21487;&#20197;&#20889;&#20986;&#35774;&#35745;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#25509;&#21475;&#30340;&#19968;&#33324;&#27493;&#39588;&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#35774;&#35745;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;</span></p></blockquote><blockquote class="TipContent"><ol><li><p>&#20026;&#25968;&#25454;&#31867;&#22411;&#30340;&#27599;&#31181;&#21464;&#20307;&#21152;&#20837;&#19968;&#20010;&#26500;&#36896;&#22120;&#12290;</p></li><li><p>&#20026;&#25968;&#25454;&#31867;&#22411;&#30340;&#27599;&#31181;&#21464;&#20307;&#21152;&#20837;&#19968;&#20010;&#35859;&#35789;&#12290;</p></li><li><p>&#20026;&#20256;&#32473;&#25968;&#25454;&#31867;&#22411;&#26500;&#36896;&#22120;&#30340;&#27599;&#27573;&#25968;&#25454;&#21152;&#20837;&#19968;&#20010;&#25552;&#21462;&#22120;&#12290;
<a name="(idx._(gentag._265))"></a>
<a name="(idx._(gentag._266))"></a></p></li></ol></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..15)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._267))"></a>
&#19978;&#36848;&#35821;&#27861;&#25351;&#23450;&#20102; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#34920;&#31034;&#26041;&#24335;&#65292;&#23454;&#29616;&#20854;&#25509;&#21475;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..16)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#23454;&#29616;&#65292;&#25442;&#29992;&#21478;&#19968;&#31181;&#34920;&#31034;&#65292;&#21435;&#25481; <span class="stt">lambda</span> &#34920;&#36798;&#24335;&#32465;&#23450;&#21464;&#37327;&#21608;&#22260;&#30340;&#25324;&#21495;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..17)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20877;&#21457;&#26126;&#33267;&#23569;&#20004;&#31181;&#26041;&#24335;&#26469;&#34920;&#31034;&#25968;&#25454;&#31867;&#22411; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#65292;&#23454;&#29616;&#23427;&#20204;&#12290;
<a name="(idx._(gentag._268))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..18)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._269))"></a>
<a name="(idx._(gentag._270))"></a>
&#25105;&#20204;&#24120;&#29992;&#21015;&#34920;&#34920;&#31034;&#20540;&#30340;&#24207;&#21015;&#12290;&#22312;&#36825;&#31181;&#34920;&#31034;&#27861;&#20013;&#65292;&#24456;&#23481;&#26131;&#20174;&#24207;&#21015;&#20013;&#30340;&#19968;&#20010;&#20803;&#32032;&#31227;&#21160;&#21040;&#19979;&#19968;&#20010;&#65292;
&#20294;&#26159;&#19981;&#20511;&#21161;&#19978;&#19979;&#25991;&#21442;&#25968;&#65292;&#24456;&#38590;&#20174;&#19968;&#20010;&#20803;&#32032;&#31227;&#21160;&#21040;&#19978;&#19968;&#20010;&#12290;&#23454;&#29616;&#38750;&#31354;&#21452;&#21521;&#25972;&#25968;&#24207;&#21015;&#65292;&#35821;&#27861;&#20026;&#65306;</p><p><span class="Iidentity">\[\mathit{NodeInSequence} ::= <span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt">
</span><span class="Iidentity">\mathit{Listof<span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt">)</span>}</span><span class="stt"> </span><span class="Iidentity">\mathit{Listof<span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt">)</span>}</span><span class="stt">)</span>\]</span></p><p>&#31532;&#19968;&#20010;&#25972;&#25968;&#21015;&#34920;&#26159;&#24403;&#21069;&#20803;&#32032;&#20043;&#21069;&#30340;&#24207;&#21015;&#65292;&#21453;&#21521;&#25490;&#21015;&#12290;&#31532;&#20108;&#20010;&#21015;&#34920;&#26159;&#24403;&#21069;&#20803;&#32032;&#20043;&#21518;&#30340;&#24207;&#21015;&#12290;&#20363;
&#22914;&#65292;<span class="stt">(6 (5 4 3 2 1) (7 8 9))</span> &#34920;&#31034;&#21015;&#34920; <span class="stt">(1 2 3 4 5 6 7 8 9)</span>&#65292;&#24403;&#21069;&#20803;&#32032;&#20026;6&#12290;</p><p>&#29992;&#36825;&#31181;&#34920;&#31034;&#23454;&#29616;&#36807;&#31243; <span class="stt">number-&gt;sequence</span>&#65292;&#23427;&#21462;&#19968;&#25968;&#23383;&#65292;&#29983;&#25104;&#21482;&#21253;&#21547;&#35813;&#25968;&#23383;&#30340;&#24207;&#21015;&#12290;&#25509;
&#30528;&#23454;&#29616; <span class="stt">current-element</span>&#12289;<span class="stt">move-to-left</span>&#12289;<span class="stt">move-to-right</span>&#12289;
<span class="stt">insert-to-left</span>&#12289;<span class="stt">insert-to-right</span>&#12289;<span class="stt">at-left-end?</span> &#21644;
<span class="stt">at-right-end?</span>&#12290;</p><p>&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">number-&gt;sequence</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(7<span class="stt"> </span>()<span class="stt"> </span>())</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">current-element</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">6</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">move-to-left</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(5<span class="stt"> </span>(4<span class="stt"> </span>3<span class="stt"> </span>2<span class="stt"> </span>1)<span class="stt"> </span>(6<span class="stt"> </span>7<span class="stt"> </span>8<span class="stt"> </span>9))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">move-to-right</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(7<span class="stt"> </span>(6<span class="stt"> </span>5<span class="stt"> </span>4<span class="stt"> </span>3<span class="stt"> </span>2<span class="stt"> </span>1)<span class="stt"> </span>(8<span class="stt"> </span>9))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">insert-to-left</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(6<span class="stt"> </span>(13<span class="stt"> </span>5<span class="stt"> </span>4<span class="stt"> </span>3<span class="stt"> </span>2<span class="stt"> </span>1)<span class="stt"> </span>(7<span class="stt"> </span>8<span class="stt"> </span>9))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">insert-to-right</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(6<span class="stt"> </span>(5<span class="stt"> </span>4<span class="stt"> </span>3<span class="stt"> </span>2<span class="stt"> </span>1)<span class="stt"> </span>(13<span class="stt"> </span>7<span class="stt"> </span>8<span class="stt"> </span>9))</span></p></td></tr></table></blockquote></blockquote><p>&#22914;&#26524;&#21442;&#25968;&#22312;&#24207;&#21015;&#26368;&#21491;&#31471;&#65292;&#36807;&#31243;<span class="stt">move-to-right</span>&#24212;&#22833;&#36133;&#12290;&#22914;&#26524;&#21442;&#25968;&#22312;&#24207;&#21015;&#26368;&#24038;&#31471;&#65292;&#36807;&#31243;
<span class="stt">move-to-left</span>&#24212;&#22833;&#36133;&#12290;
<a name="(idx._(gentag._271))"></a>
<a name="(idx._(gentag._272))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..19)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._273))"></a>
&#31354;&#20108;&#21449;&#26641;&#21644;&#29992;&#25972;&#25968;&#26631;&#35760;&#20869;&#37096;&#33410;&#28857;&#30340;&#20108;&#21449;&#26641;&#21487;&#20197;&#29992;&#35821;&#27861;&#34920;&#31034;&#20026;&#65306;</p><p><span class="Iidentity">\[\mathit{BinTree} ::= <span class="stt">()</span> \mid <span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt"> </span><span class="Iidentity">\mathit{BinTree}</span><span class="stt">
</span><span class="Iidentity">\mathit{BinTree}</span><span class="stt">)</span>\]</span></p><p>&#29992;&#36825;&#31181;&#34920;&#31034;&#23454;&#29616;&#36807;&#31243; <span class="stt">number-&gt;bintree</span>&#65292;&#23427;&#21462;&#19968;&#20010;&#25972;&#25968;&#65292;&#20135;&#29983;&#19968;&#26869;&#26032;&#30340;&#20108;&#21449;&#26641;&#65292;&#26641;&#30340;
&#21807;&#19968;&#33410;&#28857;&#21253;&#21547;&#35813;&#25968;&#23383;&#12290;&#25509;&#30528;&#23454;&#29616; <span class="stt">current-element</span>&#12289;<span class="stt">move-to-left-son</span>&#12289;
<span class="stt">move-to-right-son</span>&#12289;<span class="stt">at-leaf?</span>&#12289;<span class="stt">insert-to-left</span> &#21644;
<span class="stt">insert-to-right</span>&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">number-&gt;bintree</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(13<span class="stt"> </span>()<span class="stt"> </span>())</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-to-right</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-to-left</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-&gt;bintree</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">t1</span></td></tr><tr><td><p><span class="RktRes">'(13<span class="stt"> </span>(12<span class="stt"> </span>()<span class="stt"> </span>())<span class="stt"> </span>(14<span class="stt"> </span>()<span class="stt"> </span>()))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">move-to-left-son</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(12<span class="stt"> </span>()<span class="stt"> </span>())</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">current-element</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">move-to-left-son</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">12</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">at-leaf?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">move-to-right-son</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">move-to-left-son</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">insert-to-left</span><span class="hspace">&nbsp;</span><span class="RktVal">15</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(13<span class="stt"> </span>(15<span class="stt"> </span>(12<span class="stt"> </span>()<span class="stt"> </span>())<span class="stt"> </span>())<span class="stt"> </span>(14<span class="stt"> </span>()<span class="stt"> </span>()))</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..20)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25353;&#29031;ex2.19 &#20013;&#30340;&#20108;&#21449;&#26641;&#34920;&#31034;&#65292;&#24456;&#23481;&#26131;&#20174;&#29238;&#33410;&#28857;&#31227;&#21040;&#26576;&#20010;&#23376;&#33410;&#28857;&#65292;&#20294;&#26159;&#19981;&#20511;
&#21161;&#19978;&#19979;&#25991;&#21442;&#25968;&#65292;&#26080;&#27861;&#20174;&#23376;&#33410;&#28857;&#31227;&#21160;&#21040;&#29238;&#33410;&#28857;&#12290;&#25193;&#23637;ex2.18 &#20013;&#30340;&#21015;&#34920;&#34920;&#31034;&#27861;&#65292;
&#29992;&#20197;&#34920;&#31034;&#20108;&#21449;&#26641;&#20013;&#30340;&#33410;&#28857;&#12290;&#25552;&#31034;&#65306;&#24819;&#24819;&#24590;&#26679;&#29992;&#36870;&#24207;&#21015;&#34920;&#34920;&#31034;&#20108;&#21449;&#26641;&#22312;&#24403;&#21069;&#33410;&#28857;&#20197;&#19978;&#30340;&#37096;&#20998;&#65292;
&#23601;&#20687;ex2.18 &#37027;&#26679;&#12290;</p><p>&#29992;&#36825;&#31181;&#34920;&#31034;&#23454;&#29616;ex2.19 &#20013;&#30340;&#36807;&#31243;&#12290;&#25509;&#30528;&#23454;&#29616; <span class="stt">move-up</span> &#21644;
<span class="stt">at-root?</span>&#12290;</p></blockquote><h4 class="heading">2.4<tt>&nbsp;</tt><a name="(part._s2..4)"></a>&#23450;&#20041;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#24037;&#20855;<span class="button-group"><a href="#(part._s2..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._274))"></a>
&#23545;&#22797;&#26434;&#30340;&#25968;&#25454;&#31867;&#22411;&#65292;&#25353;&#29031;&#19978;&#36848;&#27493;&#39588;&#35774;&#35745;&#25509;&#21475;&#24456;&#24555;&#23601;&#20250;&#20351;&#20154;&#21388;&#20518;&#12290;&#26412;&#33410;&#20171;&#32461;&#29992; Scheme &#33258;&#21160;&#35774;
&#35745;&#21644;&#23454;&#29616;&#25509;&#21475;&#30340;&#24037;&#20855;&#12290;&#36825;&#20010;&#24037;&#20855;&#20135;&#29983;&#30340;&#25509;&#21475;&#19982;&#21069;&#19968;&#33410;&#30340;&#34429;&#19981;&#23436;&#20840;&#30456;&#21516;&#65292;&#21364;&#24456;&#31867;&#20284;&#12290;</p><p><a name="(idx._(gentag._275))"></a>
<a name="(idx._(gentag._276))"></a>
&#20173;&#32771;&#34385;&#21069;&#19968;&#33410;&#35752;&#35770;&#30340;&#25968;&#25454;&#31867;&#22411; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#12290;lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#25509;&#21475;&#21487;&#20197;&#36825;&#26679;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(elem._lc-exp)"></a><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bound-var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#30340;&#21517;&#23383; <span class="stt">var-exp</span>&#12289;<span class="stt">var</span>&#12289;<span class="stt">bound-var</span>&#12289;<span class="stt">app-exp</span>&#12289;<span class="stt">rator</span> &#21644;
<span class="stt">rand</span> &#20998;&#21035;&#26159; <span class="emph">&#21464;&#37327;&#34920;&#36798;&#24335;</span> (<span class="emph">variable expression</span>)&#12289;<span class="emph">&#21464;
&#37327;</span> (<span class="emph">variable</span>)&#12289;<span class="emph">&#32465;&#23450;&#21464;&#37327;</span> (<span class="emph">bound variable</span>)&#12289;<span class="emph">&#35843;&#29992;&#34920;&#36798;
&#24335;</span> (<span class="emph">application expression</span>)&#12289;<span class="emph">&#25805;&#20316;&#31526;</span> (<span class="emph">operator</span>) &#21644;<span class="emph">&#25805;&#20316;&#25968;</span> (<span class="emph">operand</span>) &#30340;&#32553;&#20889;&#12290;</p><p>&#36825;&#20123;&#34920;&#36798;&#24335;&#22768;&#26126;&#20102;&#19977;&#31181;&#26500;&#36896;&#22120;&#65306;<span class="stt">var-exp</span>&#12289;<span class="stt">lambda-exp</span> &#21644; <span class="stt">app-exp</span>&#65292;&#20197;&#21450;
&#19968;&#20010;&#35859;&#35789; <span class="stt">lc-exp?</span>&#12290;&#19977;&#20010;&#26500;&#36896;&#22120;&#29992;&#35859;&#35789; <span class="stt">identifier?</span> &#21644; <span class="stt">lc-exp?</span> &#26816;&#26597;&#23427;
&#20204;&#30340;&#21442;&#25968;&#65292;&#30830;&#20445;&#21442;&#25968;&#21512;&#27861;&#12290;&#25152;&#20197;&#65292;&#22914;&#26524;&#29983;&#25104; lc-exp &#26102;&#21482;&#29992;&#36825;&#20123;&#26500;&#36896;&#22120;&#65292;&#21487;&#20197;&#30830;&#20445;&#34920;&#36798;&#24335;&#21450;
&#20854;&#25152;&#26377;&#23376;&#34920;&#36798;&#24335;&#21512;&#27861;&#12290;&#22914;&#27492;&#19968;&#26469;&#65292;&#22788;&#29702; lambda &#34920;&#36798;&#24335;&#26102;&#23601;&#33021;&#36339;&#36807;&#35768;&#22810;&#26816;&#26597;&#12290;</p><p><a name="(idx._(gentag._277))"></a>
<a name="(idx._(gentag._278))"></a>
&#25105;&#20204;&#29992;&#24418;&#24335; <span class="stt">cases</span> &#20195;&#26367;&#35859;&#35789;&#21644;&#25552;&#21462;&#22120;&#65292;&#21028;&#26029;&#25968;&#25454;&#31867;&#22411;&#30340;&#23454;&#20363;&#23646;&#20110;&#21738;&#31181;&#21464;&#20307;&#65292;&#24182;&#25552;&#21462;&#20986;
&#23427;&#30340;&#32452;&#20214;&#12290;&#20026;&#35299;&#37322;&#36825;&#19968;&#24418;&#24335;&#65292;&#25105;&#20204;&#29992;&#25968;&#25454;&#31867;&#22411; <span class="stt">lc-exp</span> &#37325;&#20889;
<span class="stt">occurs-free?</span>&#65288;occurs-free&#65289;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline"><span style="font-weight: bold"><span class="stt">occurs-free?</span></span> : \mathit{Sym} \times \mathit{LcExp} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">occurs-free?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bound-var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">bound-var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#35201;&#29702;&#35299;&#23427;&#65292;&#20551;&#35774; <span class="stt">exp</span> &#26159;&#30001; <span class="stt">app-exp</span> &#29983;&#25104;&#30340; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#12290;&#26681;&#25454;
<span class="stt">exp</span> &#30340;&#21462;&#20540;&#65292;&#20998;&#25903; <span class="stt">app-exp</span> &#23558;&#34987;&#36873;&#20013;&#65292;<span class="stt">rator</span> &#21644; <span class="stt">rand</span> &#21017;&#32465;&#23450;&#21040;&#20004;
&#20010;&#23376;&#34920;&#36798;&#24335;&#65292;&#25509;&#30528;&#65292;&#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23558;&#20250;&#27714;&#20540;&#65292;&#23601;&#20687;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp-&gt;rator</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp-&gt;rand</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">...</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36882;&#24402;&#35843;&#29992; <span class="stt">occurs-free?</span> &#20687;&#36825;&#26679;&#23436;&#25104;&#36816;&#31639;&#12290;
<a name="(idx._(gentag._279))"></a></p></blockquote><p>&#19968;&#33324;&#30340; <span class="stt">define-datatype</span> &#22768;&#26126;&#24418;&#22914;&#65306;</p><blockquote class="SubFlow"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(elem._define-datatype)"></a><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="texMathInline">type\mbox{-}name</span><span class="hspace">&nbsp;</span><span class="texMathInline">type\mbox{-}predicate\mbox{-}name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="texMathInline">\{<span class="stt">(</span>variant\mbox{-}name \quad \{<span class="stt">(</span>filed\mbox{-}name \quad predicate<span class="stt">)</span>\}^{*} <span class="stt">)</span>\}^{+}</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#26032;&#23450;&#20041;&#20102;&#19968;&#31181;&#25968;&#25454;&#31867;&#22411;&#65292;&#21517;&#20026; <span class="texMathInline">type\mbox{-}name</span>&#65292;&#23427;&#26377;&#19968;&#20123;<span class="emph">&#21464;
&#20307;</span> (<span class="emph">variants</span>)&#12290;<a name="(idx._(gentag._280))"></a>&#27599;&#20010;&#21464;&#20307;&#26377;&#19968;&#21464;&#20307;&#21517;&#65292;&#20197;&#21450; 0 &#25110;&#22810;&#20010;&#23383;&#27573;&#65292;&#27599;&#20010;&#23383;&#27573;&#21508;&#26377;&#20854;
&#23383;&#27573;&#21517;&#21644;&#30456;&#24212;&#30340;&#35859;&#35789;&#12290;&#19981;&#35770;&#26159;&#21542;&#23646;&#20110;&#19981;&#21516;&#30340;&#31867;&#22411;&#65292;&#21464;&#20307;&#37117;&#19981;&#33021;&#37325;&#21517;&#12290;&#31867;&#22411;&#20063;&#19981;&#33021;&#37325;&#21517;&#65292;&#19988;&#31867;
&#22411;&#21517;&#19981;&#33021;&#29992;&#20316;&#21464;&#20307;&#21517;&#12290;&#27599;&#20010;&#23383;&#27573;&#30340;&#35859;&#35789;&#24517;&#39035;&#26159;&#19968;&#20010; Scheme &#35859;&#35789;&#12290;</p><p>&#27599;&#20010;&#21464;&#20307;&#37117;&#26377;&#19968;&#20010;&#26500;&#36896;&#22120;&#36807;&#31243;&#65292;&#29992;&#20110;&#21019;&#24314;&#35813;&#21464;&#20307;&#30340;&#20540;&#12290;&#36825;&#20123;&#36807;&#31243;&#30340;&#21517;&#23383;&#19982;&#23545;&#24212;&#30340;&#21464;&#20307;&#30456;&#21516;&#12290;
&#22914;&#26524;&#19968;&#20010;&#21464;&#20307;&#26377; <span class="texMathInline">n</span> &#20010;&#23383;&#27573;&#65292;&#37027;&#20040;&#23427;&#30340;&#26500;&#36896;&#22120;&#21462; <span class="texMathInline">n</span> &#20010;&#21442;&#25968;&#65292;&#29992;&#23545;&#24212;&#30340;&#35859;&#35789;&#26816;&#26597;&#27599;&#20010;
&#21442;&#25968;&#20540;&#65292;&#24182;&#36820;&#22238;&#21464;&#20307;&#20540;&#65292;&#20540;&#30340;&#31532; <span class="texMathInline">i</span> &#20010;&#23383;&#27573;&#20026;&#31532; <span class="texMathInline">i</span> &#20010;&#21442;&#25968;&#20540;&#12290;</p><p><span class="texMathInline">type\mbox{-}predicate\mbox{-}name</span> &#32465;&#23450;&#21040;&#19968;&#20010;&#35859;&#35789;&#12290;&#36825;&#20010;&#35859;&#35789;&#21028;&#26029;&#20854;&#21442;&#25968;&#20540;&#26159;&#21542;&#26159;
&#30456;&#24212;&#30340;&#31867;&#22411;&#12290;</p><p><span class="emph">&#35760;&#24405;&#34920;</span> (<span class="emph">record</span>)<a name="(idx._(gentag._281))"></a> &#21487;&#20197;&#29992;&#21482;&#26377;&#19968;&#31181;&#21464;&#20307;&#30340;&#25968;&#25454;&#31867;&#22411;&#23450;&#20041;&#12290;
&#20026;&#20102;&#21306;&#20998;&#21482;&#26377;&#19968;&#31181;&#21464;&#20307;&#30340;&#25968;&#25454;&#31867;&#22411;&#65292;&#25105;&#20204;&#36981;&#24490;&#19968;&#31181;&#21629;&#21517;&#24815;&#20363;&#65306;&#24403;&#21482;&#26377;&#19968;&#20010;&#21464;&#20307;&#26102;&#65292;&#25105;&#20204;&#20197;
<span class="stt">a-</span><span class="texMathInline">type\mbox{-}name</span>
<a name="(idx._(gentag._282))"></a>
&#25110; <span class="stt">an-</span><span class="texMathInline">type\mbox{-}name</span> &#21629;&#21517;&#26500;&#36896;&#22120;&#65307;&#21542;&#21017;&#65292;&#20197;
<span class="texMathInline">variant\mbox{-}name\mbox{-}type\mbox{-}name</span> &#21629;&#21517;&#26500;&#36896;&#22120;&#12290;</p><p><a name="(idx._(gentag._283))"></a>
<a name="(idx._(gentag._284))"></a>
<a name="(idx._(gentag._285))"></a>
<a name="(idx._(gentag._286))"></a>
&#30001; <span class="stt">define-datatype</span> &#29983;&#25104;&#30340;&#25968;&#25454;&#32467;&#26500;&#21487;&#20197;&#20114;&#36882;&#24402;&#12290;&#20363;&#22914;&#65292;<a href="#%28part._s1..1%29" data-pltdoc="x">&#36882;&#25512;&#23450;&#20041;&#30340;&#25968;&#25454;</a>&#20013;&#30340; s-list
&#35821;&#27861;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{S\mbox{-}list} &amp;::= {\normalfont{<span class="stt">(</span><span class="Iidentity">\{\mathit{S\mbox{-}exp}\}^{*}</span><span class="stt">)</span>}} \\
\mathit{S\mbox{-}exp} &amp;::= \mathit{Symbol} \mid \mathit{S\mbox{-}list}\end{align*}</span></p><p>s-list&#20013;&#30340;&#25968;&#25454;&#21487;&#20197;&#29992;&#25968;&#25454;&#31867;&#22411; <span class="stt">s-list</span>&#34920;&#31034;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-s-list</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">non-empty-s-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktSym">s-exp?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rest</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">s-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">s-exp?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">symbol-s-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sym</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-list-s-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">slst</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25968;&#25454;&#31867;&#22411; <span class="stt">s-list</span> &#29992; <span class="stt">(empty-s-list)</span> &#21644; <span class="stt">non-empty-s-list</span> &#20195;&#26367;
<span class="stt">()</span> &#21644; <span class="stt">cons</span> &#26469;&#34920;&#31034;&#21015;&#34920;&#12290;&#22914;&#26524;&#25105;&#20204;&#36824;&#24819;&#29992; Scheme &#21015;&#34920;&#65292;&#21487;&#20197;&#20889;&#25104;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-s-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sexps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">s-exp?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">list-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pred</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pair?</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pred</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">pred</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324; <span class="stt">(list-of </span><span class="texMathInline">pred</span><span class="stt">)</span> &#29983;&#25104;&#19968;&#20010;&#35859;&#35789;&#65292;&#26816;&#26597;&#20854;&#21442;&#25968;&#20540;&#26159;&#21542;&#26159;&#19968;&#20010;&#21015;&#34920;&#65292;&#19988;&#21015;&#34920;&#30340;
&#27599;&#20010;&#20803;&#32032;&#37117;&#28385;&#36275; <span class="texMathInline">pred</span>&#12290;
<a name="(idx._(gentag._287))"></a>
<a name="(idx._(gentag._288))"></a></p></blockquote><p><a name="(idx._(gentag._289))"></a>
<span class="stt">cases</span> &#35821;&#27861;&#30340;&#19968;&#33324;&#22995;&#24418;&#24335;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="texMathInline">type\mbox{-}name</span><span class="hspace">&nbsp;</span><span class="texMathInline">expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="texMathInline">\{<span class="stt">(</span>variant\mbox{-}name \phantom{x} <span class="stt">(</span>\{filed\mbox{-}name\}^{*}<span class="stt">)</span> \phantom{x} consequent<span class="stt">)</span>\}^{*}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="texMathInline">default</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#35813;&#24418;&#24335;&#25351;&#23450;&#31867;&#22411;&#65292;&#19968;&#20010;&#24453;&#27714;&#20540;&#21644;&#26816;&#26597;&#30340;&#34920;&#36798;&#24335;&#65292;&#20197;&#21450;&#19968;&#20123;&#20174;&#21477;&#12290;&#27599;&#20010;&#20174;&#21477;&#20197;&#25351;&#23450;&#31867;&#22411;&#30340;&#26576;&#19968;
&#21464;&#20307;&#21517;&#21450;&#30456;&#24212;&#23383;&#27573;&#21517;&#20026;&#26631;&#35782;&#12290;<span class="stt">else</span> &#20174;&#21477;&#21487;&#26377;&#21487;&#26080;&#12290;&#39318;&#20808;&#27714; <span class="texMathInline">expression</span> &#30340;&#20540;&#65292;&#24471;
&#21040; <span class="texMathInline">type\mbox{-}name</span> &#30340;&#26576;&#20010;&#20540; <span class="texMathInline">v</span>&#12290;&#22914;&#26524; <span class="texMathInline">v</span> &#26159;&#26576;&#20010;
<span class="texMathInline">variant\mbox{-}name</span> &#30340;&#21464;&#20307;&#65292;&#37027;&#23601;&#36873;&#20013;&#23545;&#24212;&#30340;&#20174;&#21477;&#12290;&#21508; <span class="texMathInline">type\mbox{-}name</span> &#32465;&#23450;
&#21040; <span class="texMathInline">v</span> &#20013;&#23545;&#24212;&#30340;&#23383;&#27573;&#20540;&#12290;&#28982;&#21518;&#22312;&#36825;&#20123;&#32465;&#23450;&#30340;&#20316;&#29992;&#22495;&#20869;&#27714;&#21462;&#24182;&#36820;&#22238; <span class="texMathInline">consequent</span> &#30340;&#20540;&#12290;
&#22914;&#26524; <span class="texMathInline">v</span> &#19981;&#23646;&#20110;&#20219;&#20309;&#21464;&#20307;&#65292;&#19988;&#26377; <span class="stt">else</span> &#20174;&#21477;&#65292;&#21017;&#27714;&#21462;&#24182;&#36820;&#22238; <span class="texMathInline">default</span> &#30340;&#20540;&#12290;
&#22914;&#26524;&#27809;&#26377; <span class="stt">else</span> &#20174;&#21477;&#65292;&#24517;&#39035;&#20026;&#25351;&#23450;&#25968;&#25454;&#31867;&#22411;&#30340;<span class="emph">&#27599;&#20010;</span>&#21464;&#20307;&#25351;&#23450;&#20174;&#21477;&#12290;</p></blockquote><p>&#24418;&#24335; <span class="stt">cases</span> &#26681;&#25454;&#20301;&#32622;&#32465;&#23450;&#21464;&#37327;&#65306; &#31532; <span class="texMathInline">i</span> &#20010;&#21464;&#37327;&#32465;&#23450;&#21040;&#31532; <span class="texMathInline">i</span> &#20010;&#23383;&#27573;&#12290;&#25152;&#20197;&#65292;
&#25105;&#20204;&#21487;&#20197;&#29992;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">or</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20195;&#26367;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">or</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rator</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote></blockquote><p><span class="stt">define-datatype</span> &#21644; <span class="stt">cases</span> &#24418;&#24335;&#25552;&#20379;&#20102;&#19968;&#31181;&#31616;&#27905;&#30340;&#26041;&#24335;&#26469;&#23450;&#20041;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#65292;
&#20294;&#36825;&#31181;&#26041;&#24335;&#24182;&#19981;&#26159;&#21807;&#19968;&#30340;&#12290;&#26681;&#25454;&#20351;&#29992;&#22330;&#26223;&#65292;&#21487;&#33021;&#24471;&#29992;&#19987;&#38376;&#30340;&#34920;&#31034;&#26041;&#24335;&#65292;&#23427;&#20204;&#21033;&#29992;&#25968;&#25454;&#30340;&#29305;&#27530;
&#24615;&#36136;&#65292;&#26356;&#32039;&#20945;&#25110;&#32773;&#26356;&#39640;&#25928;&#12290;&#33719;&#24471;&#36825;&#20123;&#20248;&#21183;&#30340;&#20195;&#20215;&#26159;&#24517;&#39035;&#21160;&#25163;&#23454;&#29616;&#25509;&#21475;&#20013;&#30340;&#36807;&#31243;&#12290;</p><p><a name="(idx._(gentag._290))"></a>
<span class="stt">define-datatype</span> &#24418;&#24335;&#26159;<span class="emph">&#29305;&#23450;&#39046;&#22495;&#35821;&#35328;</span> (<span class="emph">domain-specific language</span>) &#30340;&#20363;
&#23376;&#12290;&#29305;&#23450;&#39046;&#22495;&#35821;&#35328;&#26159;&#19968;&#31181;&#23567;&#24039;&#30340;&#35821;&#35328;&#65292;&#29992;&#26469;&#25551;&#36848;&#23567;&#32780;&#26126;&#30830;&#30340;&#20219;&#21153;&#20013;&#30340;&#21333;&#19968;&#20219;&#21153;&#12290;&#26412;&#20363;&#20013;&#30340;&#20219;
&#21153;&#26159;&#23450;&#20041;&#19968;&#31181;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#12290;&#36825;&#31181;&#35821;&#35328;&#21487;&#33021;&#20687; <span class="stt">define-datatype</span> &#19968;&#26679;&#65292;&#23384;&#22312;&#20110;&#36890;&#29992;&#35821;
&#35328;&#20013;&#65307;&#20063;&#21487;&#33021;&#26159;&#19968;&#38376;&#21333;&#29420;&#30340;&#35821;&#35328;&#65292;&#21035;&#26377;&#19968;&#22871;&#24037;&#20855;&#12290;&#19968;&#33324;&#26469;&#35828;&#65292;&#21019;&#36896;&#36825;&#31867;&#35821;&#35328;&#39318;&#20808;&#35201;&#25214;&#20986;&#20219;&#21153;
&#30340;&#19981;&#21516;&#21464;&#20307;&#65292;&#28982;&#21518;&#35774;&#35745;&#35821;&#35328;&#65292;&#25551;&#36848;&#36825;&#20123;&#21464;&#20307;&#12290;&#36825;&#31181;&#31574;&#30053;&#36890;&#24120;&#38750;&#24120;&#26377;&#25928;&#12290;
<a name="(idx._(gentag._291))"></a>
<a name="(idx._(gentag._292))"></a>
<a name="(idx._(gentag._293))"></a>
<a name="(idx._(gentag._294))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex2..21)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._295))"></a>
&#29992; <span class="stt">define-datatype</span> &#23454;&#29616;<a href="#%28part._s2..2..2%29" data-pltdoc="x">&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</a>&#20013;&#30340;&#29615;&#22659;&#25968;&#25454;&#31867;&#22411;&#12290;&#28982;&#21518;
&#23454;&#29616;ex2.9 &#20013;&#30340; <span class="stt">has-binding?</span>&#12290;
<a name="(idx._(gentag._296))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..22)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._297))"></a>
&#29992; <span class="stt">define-datatype</span> &#23454;&#29616;ex2.4 &#20013;&#30340;&#26632;&#25968;&#25454;&#31867;&#22411;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..23)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._298))"></a>
<span class="stt">lc-exp</span> &#30340;&#23450;&#20041;&#24573;&#30053;&#20102; &#20013;&#30340;&#26465;&#20214;&#65306;
&#8220;<span class="texMathInline">\mathit{Identifier}</span> &#26159;&#38500; <span class="stt">lambda</span> &#20043;&#22806;&#30340;&#20219;&#20309;&#31526;&#21495;&#12290;
&#8221;&#20462;&#25913; <span class="stt">identifier?</span> &#30340;&#23450;&#20041;&#65292;&#34917;&#20805;&#36825;&#19968;&#26465;&#20214;&#12290;&#25552;&#31034;&#65306;&#20219;&#20309;&#35859;&#35789;&#37117;&#33021;&#22312;
<span class="stt">define-datatype</span> &#20013;&#20351;&#29992;&#65292;&#20320;&#23450;&#20041;&#30340;&#20063;&#33021;&#12290;
<a name="(idx._(gentag._299))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..24)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._300))"></a>
&#36825;&#26159;&#29992; <span class="stt">define-datatype</span> &#34920;&#31034;&#30340;&#20108;&#21449;&#26641;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">bintree</span><span class="hspace">&nbsp;</span><span class="RktSym">bintree?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">integer?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interior-node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">key</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">bintree?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">bintree?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23454;&#29616;&#25805;&#20316;&#20108;&#21449;&#26641;&#30340;&#36807;&#31243; <span class="stt">bintree-to-list</span>&#65292;&#21017; <span class="stt">(bintree-to-list</span><span class="stt">
</span><span class="stt">(interior-node </span><span class="stt">&rsquo;</span><span class="stt">a (leaf-node 3) (leaf-node 4)))</span> &#24212;&#36820;&#22238;&#21015;&#34920;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">interior-node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">a</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..25)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._301))"></a>
&#29992; <span class="stt">cases</span> &#20889;&#20986; <span class="stt">max-interior</span>&#65292;&#23427;&#21462;&#33267;&#23569;&#26377;&#19968;&#20010;&#20869;&#37096;&#33410;&#28857;&#30340;&#25972;&#25968;&#20108;&#21449;&#26641;&#65288;&#20687;&#21069;&#19968;
&#36947;&#32451;&#20064;&#37027;&#26679;&#65289;&#65292;&#36820;&#22238;&#21494;&#23376;&#20043;&#21644;&#26368;&#22823;&#30340;&#20869;&#37096;&#33410;&#28857;&#23545;&#24212;&#30340;&#26631;&#31614;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bar</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">baz</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">max-interior</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-2</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'foo</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">max-interior</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'baz</span></p></td></tr></table></blockquote></blockquote><p>&#26368;&#21518;&#19968;&#27425;&#35843;&#29992; <span class="stt">max-interior</span> &#20063;&#21487;&#33021;&#36820;&#22238; <span class="stt">foo</span>&#65292;&#22240;&#20026;&#33410;&#28857; <span class="stt">foo</span> &#21644;
<span class="stt">baz</span> &#30340;&#21494;&#23376;&#20043;&#21644;&#37117;&#20026; 5&#12290;
<a name="(idx._(gentag._302))"></a>
<a name="(idx._(gentag._303))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._304))"></a>
ex1.33 &#36824;&#26377;&#19968;&#31181;&#20889;&#27861;&#12290;&#26641;&#30340;&#38598;&#21512;&#21487;&#20197;&#29992;&#19979;&#21015;&#35821;&#27861;&#23450;&#20041;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Red\mbox{-}blue\mbox{-}tree} &amp;::= \mathit{Red\mbox{-}blue\mbox{-}subtree} \\
\mathit{Red\mbox{-}blue\mbox{-}subtree} &amp;::= <span class="stt">(red-node </span><span class="Iidentity">\mathit{Red\mbox{-}blue\mbox{-}subtree}</span><span class="stt"> </span><span class="Iidentity">\mathit{Red\mbox{-}blue\mbox{-}subtree}</span><span class="stt">)</span> \\
                               &amp;::= <span class="stt">(blue-node </span><span class="Iidentity">\{\mathit{Red\mbox{-}blue\mbox{-}subtree}\}^{*}</span><span class="stt">)</span> \\
                               &amp;::= <span class="stt">(leaf-node </span><span class="Iidentity">\mathit{Int}</span><span class="stt">)</span>\end{align*}</span></p><p>&#29992; <span class="stt">define-datatype</span> &#20889;&#20986;&#31561;&#20215;&#23450;&#20041;&#65292;&#29992;&#24471;&#21040;&#30340;&#25509;&#21475;&#20889;&#20986;&#19968;&#20010;&#36807;&#31243;&#65292;&#23427;&#21462;&#19968;&#26869;&#26641;&#65292;&#29983;&#25104;
&#24418;&#29366;&#30456;&#21516;&#30340;&#21478;&#19968;&#26869;&#26641;&#65292;&#20294;&#25226;&#27599;&#29255;&#21494;&#23376;&#30340;&#20540;&#25913;&#20026;&#20174;&#24403;&#21069;&#21494;&#23376;&#33410;&#28857;&#21040;&#26641;&#26681;&#20043;&#38388;&#32418;&#33394;&#33410;&#28857;&#30340;&#25968;&#30446;&#12290;
<a name="(idx._(gentag._305))"></a></p></blockquote><h4 class="heading">2.5<tt>&nbsp;</tt><a name="(part._s2..5)"></a>&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;<span class="button-group"><a href="#(part._s2..5)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><div class="SIntrapara"><a name="(idx._(gentag._306))"></a>
<a name="(idx._(gentag._307))"></a>
</div><div class="SIntrapara"><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="ast.svg" alt="(lambda (x) (f (f x)))的抽象语法树" width="478.8pt" height="284.4pt"/></p></blockquote></div></p><blockquote class="caption"><p><span class="stt">(lambda (x) (f (f x)))</span> &#30340;&#25277;&#35937;&#35821;&#27861;&#26641;<a name="(elem._fig-2..2)"></a></p></blockquote></blockquote></div></p><p><a name="(idx._(gentag._308))"></a>
<a name="(idx._(gentag._309))"></a>
&#35821;&#27861;&#36890;&#24120;&#25351;&#23450;&#24402;&#32435;&#24335;&#25968;&#25454;&#31867;&#22411;&#30340;&#26576;&#19968;&#20855;&#20307;&#34920;&#31034;&#65292;&#21518;&#32773;&#20351;&#29992;&#21069;&#32773;&#29983;&#25104;&#30340;&#23383;&#31526;&#20018;&#25110;&#20540;&#12290;&#36825;&#31181;&#34920;&#31034;
&#21483;&#20570;<span class="emph">&#20855;&#20307;&#35821;&#27861;</span> (<span class="emph">concrete syntax</span>)&#65292;&#25110;<span class="emph">&#22806;&#22312;</span> (<span class="emph">external</span>) &#34920;&#31034;&#12290;</p><p>&#20363;&#22914;&#65292; &#25351;&#23450;&#38598;&#21512; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#65292;&#29992;&#30340;&#23601;&#26159; lambda &#28436;&#31639;&#34920;
&#36798;&#24335;&#30340;&#20855;&#20307;&#35821;&#27861;&#12290;&#25105;&#20204;&#21487;&#20197;&#29992;&#20854;&#20182;&#20855;&#20307;&#35821;&#27861;&#34920;&#31034; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#12290;&#20363;&#22914;&#65292;&#21487;&#20197;&#29992;</p><blockquote class="SubFlow"><p><a name="(elem._lambda-2)"></a><span class="Iidentity">\begin{align*}\mathit{Lc\mbox{-}exp} &amp;::= \mathit{Identifier} \\
&amp;::= <span class="stt">proc </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> </span><span class="stt">=&gt;</span><span class="stt"> </span><span class="Iidentity">\mathit{Lc\mbox{-}exp}</span> \\
&amp;::= <span class="Iidentity">\mathit{Lc\mbox{-}exp}</span><span class="stt"> (</span><span class="Iidentity">\mathit{Lc\mbox{-}exp}</span><span class="stt">)</span>\end{align*}</span></p><p>&#25226; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#23450;&#20041;&#20026;&#21478;&#19968;&#20010;&#23383;&#31526;&#20018;&#38598;&#21512;&#12290;</p></blockquote><p>&#20026;&#20102;&#22788;&#29702;&#36825;&#26679;&#30340;&#25968;&#25454;&#65292;&#38656;&#35201;&#23558;&#20854;&#36716;&#25442;&#20026;<span class="emph">&#20869;&#22312;</span> (<span class="emph">internal</span>) &#34920;&#31034;&#12290;
<span class="stt">define-datatype</span> &#24418;&#24335;&#25552;&#20379;&#20102;&#19968;&#31181;&#31616;&#27905;&#30340;&#26041;&#24335;&#26469;&#23450;&#20041;&#36825;&#26679;&#30340;&#20869;&#22312;&#34920;&#31034;&#12290;&#25105;&#20204;&#31216;&#20043;
&#20026;<span class="emph">&#25277;&#35937;&#35821;&#27861;</span> (<span class="emph">abstract syntax</span>)&#12290;&#22312;&#25277;&#35937;&#35821;&#27861;&#20013;&#65292;&#19981;&#38656;&#35201;&#23384;&#20648;&#25324;&#21495;&#20043;&#31867;&#30340;&#32456;&#27490;&#31526;&#65292;
&#22240;&#20026;&#23427;&#20204;&#19981;&#20256;&#36798;&#20449;&#24687;&#12290;&#21478;&#19968;&#26041;&#38754;&#65292;&#25105;&#20204;&#35201;&#30830;&#20445;&#25968;&#25454;&#32467;&#26500;&#36275;&#20197;&#21306;&#20998;&#23427;&#25152;&#34920;&#31034;&#30340; lambda &#28436;&#31639;&#34920;
&#36798;&#24335;&#65292;&#24182;&#25552;&#21462;&#20986;&#21508;&#37096;&#20998;&#12290;lc-exp&#30340;&#25968;&#25454;&#31867;&#22411; <span class="stt">lc-exp</span> &#21161;&#25105;&#20204;&#36731;&#26494;&#23454;&#29616;&#36825;&#20123;&#12290;</p><p><a name="(idx._(gentag._310))"></a>
<a name="(idx._(gentag._311))"></a>
<a name="(idx._(gentag._312))"></a>
&#23558;&#20869;&#22312;&#34920;&#31034;&#24418;&#35937;&#21270;&#20026;<span class="emph">&#25277;&#35937;&#35821;&#27861;&#26641;</span> (<span class="emph">abstract syntax tree</span>) &#20063;&#24456;&#19981;&#38169;&#12290;
 &#23637;&#31034;&#20102;&#19968;&#26869;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#23427;&#20195;&#34920;&#25968;&#25454;&#31867;&#22411; <span class="stt">lc-exp</span> &#34920;&#31034;&#30340;
lambda &#28436;&#31639;&#34920;&#36798;&#24335; <span class="stt">(lambda (x) (f (f x)))</span>&#12290;&#26641;&#30340;&#27599;&#20010;&#20869;&#37096;&#33410;&#28857;&#20197;&#30456;&#24212;&#30340;&#29983;&#25104;&#24335;&#21517;
&#23383;&#20026;&#26631;&#35782;&#12290;&#26641;&#26525;&#20197;&#25152;&#20986;&#29616;&#30340;&#38750;&#32456;&#32467;&#31526;&#21517;&#23383;&#20026;&#26631;&#35782;&#12290;&#21494;&#23376;&#23545;&#24212;&#32456;&#27490;&#31526;&#23383;&#31526;&#20018;&#12290;</p><p>&#35201;&#20026;&#26576;&#31181;&#20855;&#20307;&#35821;&#27861;&#35774;&#35745;&#25277;&#35937;&#35821;&#27861;&#65292;&#38656;&#35201;&#32473;&#20854;&#20013;&#30340;&#27599;&#20010;&#29983;&#25104;&#24335;&#65292;&#20197;&#21450;&#29983;&#25104;&#24335;&#20013;&#20986;&#29616;&#30340;&#27599;&#20010;&#38750;&#32456;
&#27490;&#31526;&#21629;&#21517;&#12290;&#24456;&#23481;&#26131;&#23558;&#25277;&#35937;&#35821;&#27861;&#20889;&#25104; <span class="stt">define-datatype</span> &#22768;&#26126;&#12290;&#25105;&#20204;&#20026;&#27599;&#20010;&#38750;&#32456;&#32467;&#31526;&#28155;&#21152;
&#19968;&#20010; <span class="stt">define-datatype</span>&#65292;&#20026;&#27599;&#20010;&#29983;&#25104;&#24335;&#28155;&#21152;&#19968;&#20010;&#21464;&#20307;&#12290;
<a name="(idx._(gentag._313))"></a>
<a name="(idx._(gentag._314))"></a></p><p> &#20013;&#25361;&#20986;&#30340;&#20869;&#23481;&#21487;&#20197;&#31934;&#30830;&#34920;&#31034;&#22914;&#19979;&#65306;</p><p><a name="(elem._lc-grammar2)"></a><span class="Iidentity">\begin{align*}\mathit{Lc\mbox{-}Exp} &amp;::= \mathit{Identifier} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">var-exp (var)</span>} \\[5pt]
&amp;::= \normalfont{<span class="stt">(lambda (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">lambda-exp (bound-var body)</span>} \\[5pt]
&amp;::= \normalfont{<span class="stt">(</span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt"> </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">app-exp (rator rand)</span>}\end{align*}</span></p><p>&#26412;&#20070;&#37319;&#29992;&#36825;&#31181;&#34920;&#31034;&#65292;&#21516;&#26102;&#25351;&#26126;&#20855;&#20307;&#35821;&#27861;&#21644;&#25277;&#35937;&#35821;&#27861;&#12290;
<a name="(idx._(gentag._315))"></a></p><p>&#20855;&#20307;&#35821;&#27861;&#20027;&#35201;&#20379;&#20154;&#20351;&#29992;&#65292;&#25277;&#35937;&#35821;&#27861;&#20027;&#35201;&#20379;&#35745;&#31639;&#26426;&#20351;&#29992;&#65292;&#26082;&#24050;&#21306;&#20998;&#20108;&#32773;&#65292;&#29616;&#22312;&#26469;&#30475;&#30475;&#22914;&#20309;&#23558;&#19968;
&#31181;&#35821;&#27861;&#36716;&#25442;&#20026;&#21478;&#19968;&#31181;&#12290;</p><p>&#24403;&#20855;&#20307;&#35821;&#27861;&#26159;&#20010;&#23383;&#31526;&#20018;&#38598;&#21512;&#65292;&#25512;&#23548;&#20986;&#23545;&#24212;&#30340;&#25277;&#35937;&#35821;&#27861;&#26641;&#21487;&#33021;&#30456;&#24403;&#26840;&#25163;&#12290;&#36825;&#19968;&#20219;&#21153;
&#21483;&#20570;<span class="emph">&#35299;&#26512;</span> (<span class="emph">parsing</span>)&#65292;&#30001;<span class="emph">&#35299;&#26512;&#22120;</span> (<span class="emph">parser</span>) &#23436;&#25104;&#12290;&#22240;&#20026;&#20889;&#35299;&#26512;&#22120;&#36890;&#24120;&#27604;&#36739;
&#40635;&#28902;&#65292;&#25152;&#20197;&#26368;&#22909;&#20511;&#30001;&#24037;&#20855;<span class="emph">&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;</span> (<span class="emph">parser generator</span>) &#23436;&#25104;&#12290;
<a name="(idx._(gentag._316))"></a>
<a name="(idx._(gentag._317))"></a>
&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;&#20197;&#19968;&#22871;&#35821;&#27861;&#20316;&#20026;&#36755;&#20837;&#65292;&#20135;&#29983;&#19968;&#20010;&#35299;&#26512;&#22120;&#12290;&#30001;&#20110;&#35821;&#27861;&#26159;&#30001;&#24037;&#20855;&#22788;&#29702;&#30340;&#65292;&#23427;&#20204;&#24517;&#38656;
&#20197;&#26576;&#31181;&#26426;&#22120;&#33021;&#22815;&#29702;&#35299;&#30340;&#35821;&#35328;&#20889;&#25104;&#65292;&#21363;&#20889;&#35821;&#27861;&#29992;&#30340;&#29305;&#23450;&#39046;&#22495;&#35821;&#35328;&#12290;&#26377;&#24456;&#22810;&#29616;&#25104;&#30340;&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;&#12290;
<a name="(idx._(gentag._318))"></a></p><p><a name="(idx._(gentag._319))"></a>
&#22914;&#26524;&#20855;&#20307;&#35821;&#27861;&#20197;&#21015;&#34920;&#38598;&#21512;&#30340;&#24418;&#24335;&#32473;&#20986;&#65292;&#35299;&#26512;&#36807;&#31243;&#23601;&#20250;&#22823;&#22823;&#31616;&#21270;&#12290;&#27604;&#22914;&#65292;
&#21644;define-datatype <span class="stt">define-datatype</span> &#30340;&#35821;&#27861;&#31867;&#20284;&#65292;
<a href="#%28elem._lambda-2%29" data-pltdoc="x">&#26412;&#33410;&#24320;&#22836;</a>&#30340; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#25351;&#23450;&#20102;&#19968;&#20010;&#21015;&#34920;&#38598;&#21512;&#12290;&#36825;&#26679;&#65292;Scheme
&#36807;&#31243; <span class="stt">read</span> &#20250;&#33258;&#21160;&#25226;&#23383;&#31526;&#20018;&#35299;&#26512;&#20026;&#21015;&#34920;&#21644;&#31526;&#21495;&#12290;&#28982;&#21518;&#65292;&#25226;&#36825;&#20123;&#21015;&#34920;&#32467;&#26500;&#35299;&#26512;&#20026;&#25277;&#35937;&#35821;
&#27861;&#26641;&#23601;&#23481;&#26131;&#22810;&#20102;&#65292;&#23601;&#20687; <span class="stt">parse-expression</span> &#36825;&#26679;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><a name="(idx._(gentag._320))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">parse-expression</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{LcExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">parse-expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">datum</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">pair?</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lambda</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">caddr</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-concrete-syntax</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._321))"></a></div></p></blockquote><p><a name="(idx._(gentag._322))"></a>
&#36890;&#24120;&#65292;&#24456;&#23481;&#26131;&#25226;&#25277;&#35937;&#35821;&#27861;&#26641;&#37325;&#26032;&#36716;&#25442;&#20026;&#21015;&#34920;-&#31526;&#21495;&#34920;&#31034;&#12290;&#25105;&#20204;&#36825;&#26679;&#20570;&#20102;&#65292;Scheme &#30340;&#25171;&#21360;&#36807;&#31243;
&#23601;&#20250;&#23558;&#20854;&#26174;&#31034;&#20026;&#21015;&#34920;&#24418;&#24335;&#30340;&#20855;&#20307;&#35821;&#27861;&#12290;&#36825;&#30001; <span class="stt">unparse-lc-exp</span> &#23436;&#25104;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">unparse-lc-exp</span></span> : <span class="texMathInline">\mathit{LcExp} \to \mathit{SchemeVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">unparse-lc-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bound-var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lambda</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">bound-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unparse-lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unparse-lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unparse-lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._323))"></a>
<a name="(idx._(gentag._324))"></a>
<a name="(idx._(gentag._325))"></a>
<a name="(idx._(gentag._326))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..27)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._327))"></a>
&#30011;&#20986;&#19979;&#38754; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#25277;&#35937;&#35821;&#27861;&#26641;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..28)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._328))"></a>
&#20889;&#20986;&#21453;&#21521;&#35299;&#26512;&#22120;&#65292;&#23558;lc-exp&#30340;&#25277;&#35937;&#35821;&#27861;&#36716;&#25442;&#20026;&#31526;&#21512;&#26412;&#33410;&#31532;&#20108;&#20010;&#35821;&#27861;
&#65288;lc-grammar2&#65289;&#30340;&#23383;&#31526;&#20018;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..29)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._329))"></a>
<a name="(idx._(gentag._330))"></a>
<a name="(idx._(gentag._331))"></a>
&#24403;&#20855;&#20307;&#35821;&#27861;&#20351;&#29992;&#20811;&#33713;&#23612;&#26143;&#21495;&#25110;&#21152;&#21495;&#65288;kleene-star&#65289;&#26102;&#65292;&#29983;&#25104;&#25277;&#35937;&#35821;&#27861;&#26641;&#26102;&#26368;&#22909;
&#20351;&#29992;&#30456;&#24212;&#23376;&#26641;&#30340;<span class="emph">&#21015;&#34920;</span>&#12290;&#20363;&#22914;&#65292;&#22914;&#26524; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#35821;&#27861;&#20026;&#65306;</p><blockquote class="SubFlow"><p><span class="Iidentity">\begin{align*}\mathit{Lc\mbox{-}Exp} &amp;::= \mathit{Identifier} \\[-3pt]
                       &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">var-exp (var)</span>} \\[5pt]
                       &amp;::= \normalfont{<span class="stt">(lambda (</span><span class="Iidentity">\{\mathit{Identifier}\}^{*}</span><span class="stt">) </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>} \\[-3pt]
                       &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">lambda-exp (bound-vars body)</span>} \\[5pt]
                       &amp;::= \normalfont{<span class="stt">(</span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt"> </span><span class="Iidentity">\{\mathit{Lc\mbox{-}Exp}\}^{*}</span><span class="stt">)</span>} \\[-3pt]
                       &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">app-exp (rator rands)</span>}\end{align*}</span></p><p>&#37027;&#20040;&#23383;&#27573; <span class="stt">bound-vars</span> &#30340;&#35859;&#35789;&#21487;&#20889;&#20316; <span class="stt">(list-of identifier?)</span>&#65292;<span class="stt">rands</span> &#30340;
&#35859;&#35789;&#21487;&#20889;&#20316; <span class="stt">(list-of lc-exp?)</span>&#12290;&#20197;&#36825;&#31181;&#26041;&#24335;&#20889;&#20986;&#35813;&#35821;&#27861;&#30340; <span class="stt">define-datatype</span>
&#21644;&#35299;&#26512;&#22120;&#12290;
<a name="(idx._(gentag._332))"></a>
<a name="(idx._(gentag._333))"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..30)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19978;&#38754;&#23450;&#20041;&#30340;&#36807;&#31243; <span class="stt">parse-expression</span> &#24456;&#19981;&#21487;&#38752;&#65306;&#23427;&#26816;&#26597;&#19981;&#21040;&#26576;&#20123;&#21487;&#33021;&#30340;&#35821;&#27861;&#38169;&#35823;&#65292;&#20363;
&#22914; <span class="stt">(a b c)</span>&#65292;&#24182;&#19988;&#22240;&#20854;&#20182;&#34920;&#36798;&#24335;&#32456;&#27490;&#26102;&#32473;&#19981;&#20986;&#24688;&#24403;&#30340;&#38169;&#35823;&#20449;&#24687;&#65292;&#22914; <span class="stt">(lambda)</span>&#12290;
&#20462;&#25913;&#19968;&#19979;&#65292;&#20351;&#20043;&#26356;&#20581;&#22766;&#65292;&#21487;&#25509;&#21463;&#20219;&#20309;s-exp&#65292;&#24182;&#19988;&#23545;&#19981;&#34920;&#31034; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340; s-exp &#32473;
&#20986;&#24688;&#24403;&#30340;&#38169;&#35823;&#20449;&#24687;&#12290;
<a name="(idx._(gentag._334))"></a>
<a name="(idx._(gentag._335))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..31)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._336))"></a>
&#26377;&#26102;&#65292;&#25226;&#20855;&#20307;&#35821;&#27861;&#23450;&#20041;&#20026;&#25324;&#21495;&#21253;&#22260;&#30340;&#31526;&#21495;&#21644;&#25972;&#25968;&#24207;&#21015;&#24456;&#26377;&#29992;&#12290;&#20363;&#22914;&#65292;&#21487;&#20197;&#25226;
&#38598;&#21512;<span class="emph">&#21069;&#32512;&#21015;&#34920;</span> (<span class="emph">prefix list</span>) &#23450;&#20041;&#20026;&#65306;</p><blockquote class="SubFlow"><p><span class="Iidentity">\begin{align*}\mathit{Prefix\mbox{-}list} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Prefix\mbox{-}exp}</span><span class="stt">)</span> \\
\mathit{Prefix\mbox{-}exp}  &amp;::= \mathit{Int} \\
                            &amp;::= <span class="stt">- </span><span class="Iidentity">\mathit{Prefix\mbox{-}exp}</span><span class="stt"> </span><span class="Iidentity">\mathit{Prefix\mbox{-}exp}</span>\end{align*}</span></p><p>&#37027;&#20040; <span class="stt">(- - 3 2 - 4 - 12 7)</span>&#26159;&#19968;&#20010;&#21512;&#27861;&#30340;&#21069;&#32512;&#21015;&#34920;&#12290;&#26377;&#26102;&#20026;&#32426;&#24565;&#20854;&#21457;&#26126;&#32773;Jan
&#321;ukasiewicz&#65292;&#31216;&#20043;&#20026;<span class="emph">&#27874;&#20848;&#21069;&#32512;&#34920;&#31034;&#27861;</span> (<span class="emph">Polish prefix notation</span>)&#12290;&#20889;&#19968;&#20010;
&#35299;&#26512;&#22120;&#65292;&#23558;&#21069;&#32512;&#21015;&#34920;&#34920;&#31034;&#27861;&#36716;&#25442;&#20026;&#25277;&#35937;&#35821;&#27861;&#65306;
<a name="(idx._(gentag._337))"></a>
<a name="(idx._(gentag._338))"></a></p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">prefix-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">prefix-exp?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">integer?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">operand1</span><span class="hspace">&nbsp;</span><span class="RktSym">prefix-exp?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">operand2</span><span class="hspace">&nbsp;</span><span class="RktSym">prefix-exp?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20351;&#19978;&#20363;&#19982;&#36825;&#20960;&#20010;&#26500;&#36896;&#22120;&#29983;&#25104;&#30456;&#21516;&#25277;&#35937;&#35821;&#27861;&#26641;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25552;&#31034;&#65306;&#24819;&#24819;&#22914;&#20309;&#20889;&#19968;&#20010;&#36807;&#31243;&#65292;&#21462;&#19968;&#21015;&#34920;&#65292;&#20135;&#29983;&#19968;&#20010; <span class="stt">prefix-exp</span> &#21644;&#21015;&#34920;&#21097;&#20313;&#20803;&#32032;&#32452;&#25104;
&#30340;&#21015;&#34920;&#12290;
<a name="(idx._(gentag._339))"></a></p></blockquote></blockquote><h3 class="heading">3<tt>&nbsp;</tt><a name="(part._expr)"></a>&#34920;&#36798;&#24335;<span class="button-group"><a href="#(part._expr)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p>&#26412;&#31456;&#30740;&#31350;&#21464;&#37327;&#32465;&#23450;&#21450;&#20854;&#20316;&#29992;&#22495;&#12290;&#25105;&#20204;&#29992;&#19968;&#31995;&#21015;&#23567;&#22411;&#35821;&#35328;&#35299;&#37322;&#36825;&#20123;&#27010;&#24565;&#12290;&#25105;&#20204;&#20026;&#36825;&#20123;&#35821;&#35328;&#20889;&#20986;
&#35268;&#33539;&#65292;&#36981;&#29031;<a href="#%28part._isd%29" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a>&#30340;&#35299;&#37322;&#22120;&#31192;&#26041;&#23454;&#29616;&#20854;&#35299;&#37322;&#22120;&#12290;&#25105;&#20204;&#30340;&#35268;&#33539;&#21644;&#35299;&#37322;&#22120;&#21462;&#19968;
&#21517;&#20026;<span class="emph">&#29615;&#22659;</span> (<span class="emph">environment</span>) &#30340;&#19978;&#19979;&#25991;&#21442;&#25968;&#65292;&#20197;&#35760;&#24405;&#24453;&#27714;&#20540;&#30340;&#34920;&#36798;&#24335;&#20013;&#21508;&#20010;&#21464;&#37327;&#30340;&#21547;
&#20041;&#12290;</p><h4 class="heading">3.1<tt>&nbsp;</tt><a name="(part._s3..1)"></a>&#35268;&#33539;&#21644;&#23454;&#29616;&#31574;&#30053;<span class="button-group"><a href="#(part._s3..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><div class="SIntrapara"><a name="(idx._(gentag._340))"></a>
&#25105;&#20204;&#30340;&#35268;&#33539;&#21253;&#21547;&#33509;&#24178;&#26029;&#35328;&#65292;&#24418;&#22914;&#65306;
</div><div class="SIntrapara"><blockquote class="SubFlow"><p><span class="texMathDisplay"><span class="stt">(value-of </span><span class="texMathInline">exp</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> = val</span></p><p>&#24847;&#20026;&#22312;&#29615;&#22659; <span class="texMathInline">\rho</span> &#20013;&#65292;&#34920;&#36798;&#24335; <span class="texMathInline">exp</span> &#30340;&#20540;&#24212;&#20026; <span class="texMathInline">val</span>&#12290;&#25105;&#20204;&#20687;<a href="#%28part._isd%29" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a>&#37027;&#26679;&#65292;
&#20889;&#20986;&#25512;&#29702;&#35268;&#21017;&#21644;&#26041;&#31243;&#65292;&#20197;&#20415;&#25512;&#23548;&#20986;&#36825;&#26679;&#30340;&#26029;&#35328;&#12290;&#25105;&#20204;&#25163;&#20889;&#35268;&#21017;&#21644;&#26041;&#31243;&#65292;&#25214;&#20986;&#26576;&#20123;&#34920;&#36798;&#24335;&#30340;&#26399;
&#26395;&#20540;&#12290;</p></blockquote></div></p><p><a name="(idx._(gentag._341))"></a>&#32780;&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#20889;&#20986;&#31243;&#24207;&#65292;
<a name="(idx._(gentag._342))"></a>
<a name="(idx._(gentag._343))"></a>
<a name="(idx._(gentag._344))"></a>
&#23454;&#29616;&#35821;&#35328;&#12290;&#27010;&#20917;&#22914; &#25152;&#31034;&#12290;&#39318;&#20808;&#26159;&#31243;&#24207;&#65292;&#30001;&#25105;&#20204;&#35201;&#23454;&#29616;&#30340;&#35821;&#35328;&#20889;&#20986;&#12290;
&#36825;&#21483;&#20570;<span class="emph">&#28304;&#35821;&#35328;</span> (<span class="emph">source language</span>) &#25110;<span class="emph">&#34987;&#23450;&#35821;&#35328;</span> (<span class="emph">defined language</span>)&#12290;&#21069;
&#31471;&#25509;&#25910;&#31243;&#24207;&#25991;&#26412;&#65288;&#30001;&#28304;&#35821;&#35328;&#20889;&#25104;&#30340;&#31243;&#24207;&#65289;&#65292;&#23558;&#20854;&#36716;&#21270;&#20026;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#28982;&#21518;&#23558;&#35821;&#27861;&#26641;&#20256;&#32473;&#35299;&#37322;
&#22120;&#12290;&#35299;&#37322;&#22120;&#26159;&#19968;&#31243;&#24207;&#65292;&#23427;&#26597;&#30475;&#19968;&#27573;&#25968;&#25454;&#32467;&#26500;&#65292;&#26681;&#25454;&#32467;&#26500;&#25191;&#34892;&#19968;&#20123;&#21160;&#20316;&#12290;&#24403;&#28982;&#65292;&#35299;&#37322;&#22120;&#33258;&#36523;&#20063;
&#30001;&#26576;&#31181;&#35821;&#35328;&#20889;&#25104;&#12290;&#25105;&#20204;&#25226;&#37027;&#31181;&#35821;&#35328;&#21483;&#20570;<span class="emph">&#23454;&#29616;&#35821;&#35328;</span> (<span class="emph">implementation language</span>)
<a name="(idx._(gentag._345))"></a>
&#25110;<span class="emph">&#23450;&#20041;&#35821;&#35328;</span> (<span class="emph">defining language</span>)&#12290;&#25105;&#20204;&#30340;&#22823;&#22810;&#25968;&#23454;&#29616;&#37117;&#36981;&#29031;&#36825;&#31181;&#26041;&#24335;&#12290;</p><p><a name="(idx._(gentag._346))"></a>
&#21478;&#19968;&#31181;&#24120;&#35265;&#30340;&#32452;&#32455;&#26041;&#24335;&#22914; &#25152;&#31034;&#12290;&#20854;&#20013;&#65292;&#32534;&#35793;&#22120;&#26367;&#20195;&#20102;&#35299;&#37322;&#22120;&#65292;&#23558;
&#25277;&#35937;&#35821;&#27861;&#26641;&#32763;&#35793;&#20026;&#21478;&#19968;&#31181;&#35821;&#35328;&#65288;&#31216;&#20026;<span class="emph">&#30446;&#26631;&#35821;&#35328;</span> (<span class="emph">target language</span>)&#65289;&#20889;&#25104;&#30340;
&#31243;&#24207;&#65292;&#28982;&#21518;&#25191;&#34892;&#12290;&#30446;&#26631;&#35821;&#35328;&#21487;&#33021;&#20687; &#37027;&#26679;&#65292;&#30001;&#19968;&#20010;&#35299;&#37322;&#22120;&#25191;&#34892;&#65292;&#20063;
&#21487;&#33021;&#32763;&#35793;&#25104;&#26356;&#24213;&#23618;&#30340;&#35821;&#35328;&#25191;&#34892;&#12290;
<a name="(idx._(gentag._347))"></a></p><p>&#36890;&#24120;&#65292;&#30446;&#26631;&#35821;&#35328;&#26159;&#19968;&#31181;&#26426;&#22120;&#35821;&#35328;&#65292;&#30001;&#30828;&#20214;&#35299;&#37322;&#12290;&#20294;&#30446;&#26631;&#35821;&#35328;&#20063;&#21487;&#33021;&#26159;&#19968;&#31181;&#29305;&#23450;&#29992;&#36884;&#30340;&#35821;&#35328;&#65292;
&#27604;&#21407;&#26412;&#30340;&#35821;&#35328;&#31616;&#21333;&#65292;&#20026;&#23427;&#20889;&#19968;&#20010;&#35299;&#37322;&#22120;&#30456;&#23545;&#23481;&#26131;&#12290;&#36825;&#26679;&#65292;&#31243;&#24207;&#21487;&#20197;&#32534;&#35793;&#19968;&#27425;&#65292;&#28982;&#21518;&#22312;&#22810;&#31181;&#19981;
&#21516;&#30340;&#30828;&#20214;&#24179;&#21488;&#19978;&#25191;&#34892;&#12290;&#20986;&#20110;&#21382;&#21490;&#21407;&#22240;&#65292;&#24120;&#31216;&#36825;&#26679;&#30340;&#30446;&#26631;&#35821;&#35328;&#20026;<span class="emph">&#23383;&#33410;&#30721;</span> (<span class="emph">byte
code</span>)&#65292;&#31216;&#20854;&#35299;&#37322;&#22120;&#31216;&#20026;<span class="emph">&#34394;&#25311;&#26426;</span> (<span class="emph">virtual machine</span>)&#12290;
<a name="(idx._(gentag._348))"></a>
<a name="(idx._(gentag._349))"></a>
<a name="(idx._(gentag._350))"></a></p><p>&#32534;&#35793;&#22120;&#24120;&#24120;&#20998;&#20026;&#20004;&#37096;&#20998;&#65306;<span class="emph">&#20998;&#26512;&#22120;</span> (<span class="emph">analyzer</span>)&#65292;&#23581;&#35797;&#25512;&#26029;&#20851;&#20110;&#31243;&#24207;&#30340;&#26377;&#25928;&#20449;
&#24687;&#65307;<span class="emph">&#32763;&#35793;&#22120;</span> (<span class="emph">translator</span>)&#65292;&#25191;&#34892;&#32763;&#35793;&#65292;&#21487;&#33021;&#29992;&#21040;&#26469;&#33258;&#20998;&#26512;&#22120;&#30340;&#20449;&#24687;&#12290;&#36825;&#20123;
&#38454;&#27573;&#26082;&#33021;&#29992;&#25512;&#29702;&#35268;&#21017;&#25351;&#23450;&#65292;&#20063;&#33021;&#29992;&#19987;&#20889;&#35268;&#33539;&#30340;&#35821;&#35328;&#25351;&#23450;&#12290;&#28982;&#21518;&#26159;&#23454;&#29616;&#12290;
<a href="#%28part._cps%29" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a>&#21644;<a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#25506;&#35752;&#20102;&#19968;&#20123;&#31616;&#21333;&#30340;&#20998;&#26512;&#22120;&#21644;&#32763;&#35793;&#22120;&#12290;</p><p><a name="(idx._(gentag._351))"></a>
&#19981;&#35770;&#37319;&#29992;&#21738;&#31181;&#23454;&#29616;&#31574;&#30053;&#65292;&#25105;&#20204;&#37117;&#38656;&#35201;&#19968;&#20010;<span class="emph">&#21069;&#31471;</span> (<span class="emph">front end</span>)&#65292;&#23558;&#31243;&#24207;&#36716;&#25442;&#20026;
&#25277;&#35937;&#35821;&#27861;&#26641;&#12290;&#22240;&#20026;&#31243;&#24207;&#21482;&#26159;&#23383;&#31526;&#20018;&#65292;&#25105;&#20204;&#30340;&#21069;&#31471;&#35201;&#23558;&#36825;&#20123;&#23383;&#31526;&#32452;&#25104;&#26377;&#24847;&#20041;&#30340;&#21333;&#20803;&#12290;&#20998;&#32452;&#36890;&#24120;
&#20998;&#20026;&#20004;&#20010;&#38454;&#27573;&#65306;<span class="emph">&#25195;&#25551;</span> (<span class="emph">scanning</span>) &#21644;<span class="emph">&#35299;&#26512;</span> (<span class="emph">parsing</span>)&#12290;
<a name="(idx._(gentag._352))"></a></p><p>&#25195;&#25551;&#23601;&#26159;&#23558;&#23383;&#31526;&#24207;&#21015;&#20998;&#20026;&#21333;&#35789;&#12289;&#25968;&#23383;&#12289;&#26631;&#28857;&#12289;&#27880;&#37322;&#31561;&#31561;&#12290;&#36825;&#20123;&#21333;&#20803;&#21483;&#20570;<span class="emph">&#35789;&#26465;</span> (<span class="emph">lexical
item</span>)&#12289;<span class="emph">&#35789;&#32032;</span> (<span class="emph">lexeme</span>)&#12289;&#25110;&#32773;&#26368;&#24120;&#35265;&#30340;<span class="emph">&#35789;&#29260;</span> (<span class="emph">token</span>)&#12290;&#25226;&#31243;&#24207;&#20998;
&#20026;&#35789;&#29260;&#30340;&#26041;&#24335;&#21483;&#20570;&#35821;&#35328;&#30340;<span class="emph">&#35789;&#27861;&#35268;&#33539;</span> (<span class="emph">lexical specification</span>)&#12290;&#25195;&#25551;&#22120;&#21462;&#19968;&#23383;&#31526;&#24207;
&#21015;&#65292;&#29983;&#25104;&#35789;&#29260;&#24207;&#21015;&#12290;
<a name="(idx._(gentag._353))"></a>
<a name="(idx._(gentag._354))"></a></p><p>&#35299;&#26512;&#23601;&#26159;&#23558;&#35789;&#29260;&#24207;&#21015;&#32452;&#25104;&#26377;&#23618;&#27425;&#30340;&#35821;&#27861;&#32467;&#26500;&#65292;&#22914;&#34920;&#36798;&#24335;&#12289;&#35821;&#21477;&#21644;&#22359;&#12290;&#36825;&#23601;&#20687;&#29992;&#20174;&#21477;&#32452;&#32455;&#65288;&#25110;
&#31216;&#22270;&#35299;<span class="NoteBox"><span class="NoteContent">&#35199;&#26041;&#26377;diagram sentence&#20043;&#35828;&#65292;&#20197;&#26641;&#29366;&#22270;&#34920;&#31034;&#21477;&#23376;&#32467;&#26500;&#65292;&#22914;&#25105;&#22269;&#20013;&#23398;&#29983;&#23398;&#20064;&#33521;
&#25991;&#20043;&#20027;&#12289;&#35859;&#12289;&#23486;&#12290;&#8212;&#8212;<span class="emph">&#35793;&#27880;</span></span></span>&#65289;&#21477;&#23376;&#12290;&#25105;&#20204;&#31216;&#20043;&#20026;&#35821;&#35328;&#30340;<span class="emph">&#21477;&#27861;</span> (<span class="emph">syntactic</span>)
&#25110;<span class="emph">&#35821;&#27861;</span> (<span class="emph">grammatical</span>) &#32467;&#26500;&#12290;&#35299;&#26512;&#22120;&#21462;&#19968;&#35789;&#29260;&#24207;&#21015;&#65288;&#30001;&#25195;&#25551;&#22120;&#32473;&#20986;&#65289;&#65292;&#29983;&#25104;&#19968;&#26869;
&#25277;&#35937;&#35821;&#27861;&#26641;&#12290;<a name="(idx._(gentag._355))"></a></p><p><a name="(idx._(gentag._356))"></a>
&#35774;&#35745;&#21069;&#31471;&#30340;&#26631;&#20934;&#26041;&#24335;&#26159;&#20351;&#29992;<span class="emph">&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;</span> (<span class="emph">parser generator</span>)&#12290;&#35299;&#26512;&#22120;&#29983;
&#25104;&#22120;&#26159;&#19968;&#31243;&#24207;&#65292;&#21462;&#19968;&#35789;&#27861;&#35268;&#33539;&#21644;&#35821;&#27861;&#65292;&#29983;&#25104;&#19968;&#20010;&#25195;&#25551;&#22120;&#21644;&#35299;&#26512;&#22120;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]
 </div><div class="SIntrapara"><blockquote class="EoplSubfigure"><blockquote class="SCentered"><p><img src="exe-via-interpreter.svg" alt="由解释器执行" width="300.6pt" height="108.0pt"/></p></blockquote><blockquote class="caption"><p>&#30001;&#35299;&#37322;&#22120;&#25191;&#34892;<a name="(elem._fig-3..1-a)"></a></p></blockquote></blockquote></div></p><blockquote class="EoplSubfigure"><blockquote class="SCentered"><p><img src="exe-via-compiler.svg" alt="由编译器执行" width="408.6pt" height="187.2pt"/></p></blockquote><blockquote class="caption"><p>&#30001;&#32534;&#35793;&#22120;&#25191;&#34892;<a name="(elem._fig-3..1-b)"></a></p></blockquote></blockquote><blockquote class="caption"><p>&#35821;&#35328;&#22788;&#29702;&#31995;&#32479;&#22359;&#29366;&#22270;<a name="(elem._fig-3..1)"></a></p></blockquote></blockquote><p>&#22823;&#22810;&#25968;&#20027;&#27969;&#35821;&#35328;&#37117;&#26377;&#35299;&#26512;&#22120;&#29983;&#25104;&#31995;&#32479;&#12290;&#22914;&#26524;&#27809;&#26377;&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;&#65292;&#25110;&#32773;&#27809;&#26377;&#21512;&#36866;&#30340;&#65292;&#21487;&#20197;&#25163;&#20889;
&#25195;&#25551;&#22120;&#21644;&#35299;&#26512;&#22120;&#12290;&#32534;&#35793;&#22120;&#25945;&#26448;&#25551;&#36848;&#20102;&#36825;&#19968;&#36807;&#31243;&#12290;&#26412;&#20070;&#20351;&#29992;&#30340;&#35299;&#26512;&#25216;&#26415;&#21450;&#30456;&#20851;&#35821;&#27861;&#35774;&#35745;&#20174;&#31616;&#65292;
&#19987;&#20026;&#28385;&#36275;&#25105;&#20204;&#30340;&#38656;&#27714;&#12290;
<a name="(idx._(gentag._357))"></a></p><p>&#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#24573;&#30053;&#20855;&#20307;&#35821;&#27861;&#30340;&#32454;&#33410;&#65292;&#25226;&#34920;&#36798;&#24335;&#20889;&#25104;&#21015;&#34920;&#32467;&#26500;&#65292;
&#23601;&#20687;<a href="#%28part._s2..5%29" data-pltdoc="x">&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</a>&#21644;ex2.31&#20013;&#65292;&#22788;&#29702; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#37027;&#26679;&#12290;
<a name="(idx._(gentag._358))"></a>
<a name="(idx._(gentag._359))"></a></p><h4 class="heading">3.2<tt>&nbsp;</tt><a name="(part._s3..2)"></a>LET&#65306;&#19968;&#38376;&#31616;&#21333;&#35821;&#35328;<span class="button-group"><a href="#(part._s3..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._360))"></a>
&#25105;&#20204;&#20808;&#26469;&#23450;&#20041;&#19968;&#31181;&#38750;&#24120;&#31616;&#21333;&#30340;&#35821;&#35328;&#65292;&#26681;&#25454;&#23427;&#26368;&#26377;&#36259;&#30340;&#29305;&#24615;&#65292;&#23558;&#20854;&#21629;&#21517;&#20026; LET&#12290;</p><h5 class="heading">3.2.1<tt>&nbsp;</tt><a name="(part._s3..2..1)"></a>&#23450;&#20041;&#35821;&#27861;<span class="button-group"><a href="#(part._s3..2..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p> &#23637;&#31034;&#20102;&#25105;&#20204;&#36825;&#38376;&#31616;&#21333;&#35821;&#35328;&#30340;&#35821;&#27861;&#12290;&#22312;&#36825;&#31181;&#35821;&#35328;&#20013;&#65292;&#31243;&#24207;&#21482;&#33021;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#12290;&#34920;&#36798;&#24335;&#26159;
&#20010;&#25972;&#25968;&#24120;&#37327;&#12289;&#24046;&#20540;&#34920;&#36798;&#24335;&#12289;&#21028;&#38646;&#34920;&#36798;&#24335;&#12289;&#26465;&#20214;&#34920;&#36798;&#24335;&#12289;&#21464;&#37327;&#12289;&#25110; <span class="stt">let</span> &#34920;&#36798;&#24335;&#12290;</p><p>&#36825;&#37324;&#26159;&#26412;&#38376;&#35821;&#35328;&#20889;&#25104;&#30340;&#19968;&#20010;&#31616;&#21333;&#34920;&#36798;&#24335;&#65292;&#21450;&#20854;&#25277;&#35937;&#35821;&#27861;&#34920;&#31034;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">scan&amp;parse</span><span class="hspace">&nbsp;</span><span class="RktVal">"-(55, -(x,11))"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">55</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplFigure"><p>[!ht]
<br/>
<span class="Iidentity">\begin{align*}\mathit{Program} &amp;::= \mathit{Expression} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">a-program (exp1)</span>} \\[5pt]
\mathit{Expression} &amp;::= \mathit{Number} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">const-exp (num)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">(- </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> , </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">diff-exp (exp1 exp2)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">(zero? </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">zero?-exp (exp1)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">if </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> then </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> else </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">if-exp (exp1 exp2 exp3)</span>} \\[5pt]
\mathit{Expression} &amp;::= \mathit{Identifier} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">var-exp (var)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">let </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> in </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">let-exp (var exp1 body)</span>}\end{align*}</span></p><blockquote class="caption"><p>LET&#35821;&#35328;&#30340;&#35821;&#27861;<a name="(elem._fig-3..2)"></a></p></blockquote></blockquote><h5 class="heading">3.2.2<tt>&nbsp;</tt><a name="(part._s3..2..2)"></a>&#23450;&#20041;&#20540;<span class="button-group"><a href="#(part._s3..2..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#20219;&#20309;&#32534;&#31243;&#35821;&#35328;&#30340;&#35268;&#33539;&#20043;&#20013;&#65292;&#26368;&#37325;&#35201;&#30340;&#19968;&#37096;&#20998;&#23601;&#26159;&#35821;&#35328;&#33021;&#22788;&#29702;&#30340;&#20540;&#30340;&#38598;&#21512;&#12290;&#27599;&#31181;&#35821;&#35328;&#33267;&#23569;&#26377;&#20004;
&#20010;&#36825;&#26679;&#30340;&#38598;&#21512;&#65306;<span class="emph">&#34920;&#36798;&#20540;</span> (<span class="emph">expressed values</span>) &#21644;<span class="emph">&#25351;&#20195;&#20540;</span> (<span class="emph">denoted values</span>)&#12290;
<a name="(idx._(gentag._361))"></a>
<a name="(idx._(gentag._362))"></a>
&#34920;&#36798;&#20540;&#26159;&#25351;&#34920;&#36798;&#24335;&#21487;&#33021;&#30340;&#21462;&#20540;&#65292;&#25351;&#20195;&#20540;&#26159;&#25351;&#21487;&#20197;&#32465;&#23450;&#21040;&#21464;&#37327;&#30340;&#20540;&#12290;</p><p>&#26412;&#31456;&#30340;&#35821;&#35328;&#20013;&#65292;&#34920;&#36798;&#20540;&#21644;&#25351;&#20195;&#20540;&#24635;&#26159;&#30456;&#21516;&#12290;&#23427;&#20204;&#26159;&#65306;</p><blockquote class="SubFlow"><p><a name="(elem._pass-by-value)"></a><span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} \\
\mathit{DenVal} &amp;= \mathit{Int} + \mathit{Bool}\end{align*}</span></p><p><a href="#%28part._state%29" data-pltdoc="x">&#29366;&#24577;</a>&#23637;&#31034;&#34920;&#36798;&#20540;&#21644;&#25351;&#20195;&#20540;&#19981;&#21516;&#30340;&#35821;&#35328;&#12290;</p></blockquote><p>&#35201;&#20351;&#29992;&#36825;&#20010;&#23450;&#20041;&#65292;&#25105;&#20204;&#35201;&#26377;&#34920;&#36798;&#20540;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;&#12290;&#25105;&#20204;&#26377;&#36825;&#20960;&#20010;&#25509;&#21475;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">num-val</span></span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">: \mathit{Int} \to \mathit{ExpVal}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">bool-val</span></span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">: \mathit{Bool} \to \mathit{ExpVal}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">expval-&gt;num</span></span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">: \mathit{ExpVal} \to \mathit{Int}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">expval-&gt;bool</span></span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">: \mathit{ExpVal} \to \mathit{Bool}</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#20551;&#23450;&#65292;&#24403;&#20256;&#32473; <span class="stt">expval-&gt;num</span> &#30340;&#21442;&#25968;&#19981;&#26159;&#25972;&#25968;&#20540;&#65292;&#25110;&#20256;&#32473; <span class="stt">expval-&gt;bool</span> &#30340;
&#21442;&#25968;&#19981;&#26159;&#24067;&#23572;&#20540;&#26102;&#65292;&#20108;&#32773;&#34892;&#20026;&#26410;&#23450;&#20041;&#12290;</p><h5 class="heading">3.2.3<tt>&nbsp;</tt><a name="(part._s3..2..3)"></a>&#29615;&#22659;<span class="button-group"><a href="#(part._s3..2..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._363))"></a>
&#33509;&#35201;&#27714;&#21462;&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#25105;&#20204;&#24471;&#30693;&#36947;&#27599;&#20010;&#21464;&#37327;&#30340;&#20540;&#12290;&#25105;&#20204;&#38752;&#29615;&#22659;&#35760;&#24405;&#36825;&#20123;&#20540;&#65292;&#23601;&#20687;<a href="#%28part._s2..2%29" data-pltdoc="x">&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;</a>&#37027;&#26679;&#12290;</p><p>&#29615;&#22659;&#26159;&#19968;&#20989;&#25968;&#65292;&#23450;&#20041;&#22495;&#20026;&#21464;&#37327;&#30340;&#26377;&#38480;&#38598;&#21512;&#65292;&#20540;&#22495;&#20026;&#25351;&#20195;&#20540;&#12290;&#25105;&#20204;&#29992;&#19968;&#20123;&#32553;&#20889;&#34920;&#31034;&#29615;&#22659;&#12290;</p><ul><li><p><span class="texMathInline">\rho</span> &#34920;&#31034;&#20219;&#19968;&#29615;&#22659;&#12290;</p></li><li><p><span class="texMathInline">\textnormal{[]}</span> &#34920;&#31034;&#31354;&#29615;&#22659;&#12290;</p></li><li><p><span class="texMathInline">\text{[}var = val\text{]}\rho</span> &#34920;&#31034; <span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">val</span><span class="stt">
</span><span class="texMathInline">\rho</span><span class="stt">)</span>&#12290;</p></li><li><p><span class="texMathInline">\text{[}var_1 = val_1, var_2 = val2\text{]}\rho</span> &#26159; <span class="texMathInline">var_1 =
val_1(\text{[}var_2 = val_2\text{]}\rho)</span> &#30340;&#32553;&#20889;&#65292;&#20854;&#20313;&#21516;&#29702;&#12290;</p></li><li><p><span class="texMathInline">\text{[}var_1 = val_1, var_2 = val2,\dots\text{]}</span> &#34920;&#31034;&#30340;&#29615;&#22659;&#20013;&#65292;
<span class="texMathInline">var_1</span> &#30340;&#20540;&#20026; <span class="texMathInline">val_1</span>&#65292;&#20854;&#20313;&#21516;&#29702;&#12290;</p></li></ul><p>&#25105;&#20204;&#20598;&#23572;&#29992;&#19981;&#21516;&#32553;&#36827;&#34920;&#31034;&#22797;&#26434;&#29615;&#22659;&#65292;&#20197;&#20415;&#38405;&#35835;&#12290;&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#33021;&#25226;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">u</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="texMathInline">\rho</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#32553;&#20889;&#20026;</p><p><div class="SIntrapara"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">[</span><span class="RktSym">x=3</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">y=7</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">u=5</span><span class="RktPn">]</span><span class="texMathInline">\rho</span></td></tr></table></blockquote></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._364))"></a></div></p></blockquote><h5 class="heading">3.2.4<tt>&nbsp;</tt><a name="(part._s3..2..4)"></a>&#23450;&#20041;&#34920;&#36798;&#24335;&#30340;&#34892;&#20026;<span class="button-group"><a href="#(part._s3..2..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._365))"></a>
<a name="(idx._(gentag._366))"></a>
<a name="(idx._(gentag._367))"></a>
&#25105;&#20204;&#35821;&#35328;&#20013;&#30340;&#20845;&#31181;&#34920;&#36798;&#24335;&#21508;&#23545;&#24212;&#19968;&#20010;&#24038;&#36793;&#20026; <span class="texMathInline">\mathit{Expression}</span> &#30340;&#29983;&#25104;&#24335;&#12290;&#34920;&#36798;&#24335;
&#25509;&#21475;&#21253;&#21547;&#19971;&#20010;&#36807;&#31243;&#65292;&#20845;&#20010;&#26159;&#26500;&#36896;&#22120;&#65292;&#19968;&#20010;&#26159;&#35266;&#27979;&#22120;&#12290;&#25105;&#20204;&#29992; <span class="texMathInline">\mathit{ExpVal}</span> &#34920;&#31034;&#34920;
&#36798;&#20540;&#30340;&#38598;&#21512;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&#26500;&#36896;&#22120;&#65306;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">const-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Int} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">zero?-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Exp} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">if-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Exp} \times \mathit{Exp} \times \mathit{Exp} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">diff-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Exp} \times \mathit{Exp} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">var-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Var} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">let-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Var} \times \mathit{Exp} \times \mathit{Exp} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#35266;&#27979;&#22120;&#65306;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">value-of</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Exp} \times \mathit{Env} \to \mathit{ExpVal}</span></p></td></tr></table></blockquote><p>&#23454;&#29616;&#20043;&#21069;&#65292;&#25105;&#20204;&#20808;&#20889;&#20986;&#36825;&#20123;&#36807;&#31243;&#30340;&#34892;&#20026;&#35268;&#33539;&#12290;&#20381;&#29031;&#35299;&#37322;&#22120;&#31192;&#26041;&#65292;&#25105;&#20204;&#24076;&#26395; <span class="stt">value-of</span>
&#26597;&#30475;&#34920;&#36798;&#24335;&#65292;&#21028;&#26029;&#20854;&#31867;&#21035;&#65292;&#28982;&#21518;&#36820;&#22238;&#24688;&#24403;&#30340;&#20540;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (const-exp </span><span class="texMathInline">n</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) = (num-val </span><span class="texMathInline">n</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of (var-exp </span><span class="texMathInline">var</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) = (apply-env </span><span class="texMathInline">\rho</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">var</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of (diff-exp </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_2</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (num-val</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(expval-&gt;num (value-of </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(expval-&gt;num (value-of </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))))</span></p></td></tr></table></blockquote><p>&#20219;&#20309;&#29615;&#22659;&#20013;&#65292;&#24120;&#37327;&#34920;&#36798;&#24335;&#30340;&#20540;&#37117;&#26159;&#36825;&#20010;&#24120;&#37327;&#12290;&#21464;&#37327;&#24341;&#29992;&#30340;&#20540;&#20174;&#26576;&#19968;&#29615;&#22659;&#20013;&#26597;&#35810;&#32780;&#24471;&#12290;&#24046;&#20540;&#34920;
&#36798;&#24335;&#30340;&#20540;&#20026;&#31532;&#19968;&#20010;&#25805;&#20316;&#25968;&#22312;&#26576;&#19968;&#29615;&#22659;&#20013;&#30340;&#20540;&#20943;&#21435;&#31532;&#20108;&#20010;&#25805;&#20316;&#25968;&#22312;&#21516;&#19968;&#29615;&#22659;&#20013;&#30340;&#20540;&#12290;&#24403;&#28982;&#65292;&#20934;
&#30830;&#26469;&#35828;&#65292;&#25105;&#20204;&#24471;&#30830;&#20445;&#25805;&#20316;&#25968;&#30340;&#20540;&#26159;&#25968;&#23383;&#65292;&#19988;&#32467;&#26524;&#26159;&#34920;&#31034;&#20026;&#34920;&#36798;&#20540;&#30340;&#25968;&#23383;&#12290;</p><p> &#23637;&#31034;&#20102;&#22914;&#20309;&#32467;&#21512;&#36825;&#20123;&#35268;&#21017;&#27714;&#21462;&#26500;&#36896;&#22120;&#29983;&#25104;&#30340;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#22312;&#26412;&#20363;&#20197;
&#21450;&#20854;&#20182;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#29992; <span class="texMathInline">\textnormal{\guillemotleft} exp
\textnormal{\guillemotright}</span> &#34920;&#31034;&#34920;&#36798;&#24335; <span class="texMathInline">exp</span> &#30340;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#29992; <span class="texMathInline">\lceil n
\rceil</span> &#34920;&#31034; <span class="stt">(num-val </span><span class="texMathInline">n</span><span class="stt">)</span>&#65292;&#29992; <span class="texMathInline">\lfloor val \rfloor</span> &#34920;&#31034;
<span class="stt">(expval-&gt;num </span><span class="texMathInline">val</span><span class="stt">)</span>&#12290;&#25105;&#20204;&#36824;&#36816;&#29992;&#20102;&#19968;&#28857;&#20107;&#23454;&#65306;<span class="texMathInline">\lfloor \lceil n \rceil
\rfloor = n</span>&#12290;
<a name="(idx._(gentag._368))"></a>
<a name="(idx._(gentag._369))"></a>
<a name="(idx._(gentag._370))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex3..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21015;&#20986; &#20013;&#25152;&#26377;&#24212;&#29992; <span class="texMathInline">\lfloor \lceil n \rceil \rfloor = n</span> &#30340;&#22320;&#26041;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..2)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#20986;&#19968;&#20010;&#34920;&#36798;&#20540; <span class="texMathInline">val \in \mathit{ExpVal}</span>&#65292;&#19988; <span class="texMathInline">\lceil \lfloor val \rfloor
\rceil \neq val</span>&#12290;</p></blockquote><h5 class="heading">3.2.5<tt>&nbsp;</tt><a name="(part._s3..2..5)"></a>&#23450;&#20041;&#31243;&#24207;&#30340;&#34892;&#20026;<span class="button-group"><a href="#(part._s3..2..5)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#25972;&#20010;&#31243;&#24207;&#21482;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#12290;&#35201;&#25214;&#20986;&#36825;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#25105;&#20204;&#35201;&#23450;&#20041;&#31243;&#24207;&#20013;&#33258;
&#30001;&#21464;&#37327;&#30340;&#20540;&#12290;&#25152;&#20197;&#31243;&#24207;&#30340;&#20540;&#23601;&#26159;&#22312;&#36866;&#24403;&#30340;&#21021;&#22987;&#29615;&#22659;&#20013;&#27714;&#20986;&#30340;&#35813;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#25105;&#20204;&#25226;&#21021;&#22987;&#29615;&#22659;
&#35774;&#20026; <span class="stt">[i=1,v=5,x=10]</span>&#12290;</p><blockquote class="EoplEquationInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">value-of-program</span><span class="hspace">&nbsp;</span><span class="texMathInline">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="texMathInline">exp</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="stt">i=</span><span class="texMathInline">\lceil \tt{1} \rceil</span>,<span class="stt">v=</span><span class="texMathInline">\lceil \tt{5} \rceil</span>,<span class="stt">x=</span><span class="texMathInline">\lceil \tt{10} \rceil</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><h5 class="heading">3.2.6<tt>&nbsp;</tt><a name="(part._s3..2..6)"></a>&#23450;&#20041;&#26465;&#20214;<span class="button-group"><a href="#(part._s3..2..6)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._371))"></a>
&#25509;&#19979;&#26469;&#26159;&#36825;&#38376;&#35821;&#35328;&#30340;&#24067;&#23572;&#20540;&#25509;&#21475;&#12290;&#36825;&#38376;&#35821;&#35328;&#26377;&#19968;&#20010;&#24067;&#23572;&#20540;&#26500;&#36896;&#22120; <span class="stt">zero?</span>&#65292;&#19968;&#20010;&#24067;&#23572;&#20540;
&#35266;&#27979;&#22120; <span class="stt">if</span> &#34920;&#36798;&#24335;&#12290;</p><p>&#24403;&#19988;&#20165;&#24403;&#25805;&#20316;&#25968;&#30340;&#20540;&#20026;0&#65292;<span class="stt">zero?</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#20026;&#30495;&#12290;&#20687; &#37027;&#26679;&#65292;
&#21487;&#23558;&#20854;&#20889;&#25104;&#19968;&#26465;&#25512;&#29702;&#35268;&#21017;&#12290;&#25105;&#20204;&#20197; <span class="stt">bool-val</span> &#20026;&#26500;&#36896;&#22120;&#65292;&#25226;&#24067;&#23572;&#20540;&#36716;&#25442;&#20026;&#34920;&#36798;&#20540;&#65307;&#20197;
<span class="stt">expval-&gt;num</span> &#20026;&#25552;&#21462;&#22120;&#65292;&#21028;&#26029;&#34920;&#36798;&#24335;&#30340;&#20540;&#26159;&#21542;&#20026;&#25972;&#25968;&#65292;&#22914;&#26524;&#26159;&#65292;&#21017;&#36820;&#22238;&#35813;&#25972;&#25968;&#12290;</p><blockquote class="EoplFigure"><p>&#20196; <span class="texMathInline">\rho =</span> <span class="stt">[i=1,v=5,x=10]</span>&#12290;<br/></p><blockquote class="TwoColumns"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,3), -(v,i))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(x,3)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;x&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">10</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">10</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">\columnbreak</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;v&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;i&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;i&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">4)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">3</span><span class="texMathInline">\rceil</span></p></td></tr></table></blockquote><blockquote class="caption"><p>&#25353;&#29031;&#35268;&#33539;&#20570;&#31616;&#21333;&#36816;&#31639;<a name="(elem._fig-3..3)"></a></p></blockquote></blockquote><p><span class="texMathDisplay">\infer{\begin{alignedat}{-1}
         &amp;<span class="hspace">&nbsp;</span><span class="stt">(value-of (zero?-exp </span><span class="texMathInline">exp_1</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span> \\
         &amp;\hphantom{xx}= \begin{cases}
                           <span class="stt">(bool-val #t)</span> &amp; &#33509; <span class="stt">(expval-&gt;num </span><span class="texMathInline">val_1</span><span class="stt">)</span> = 0 \\
                           <span class="stt">(bool-val #f)</span> &amp; &#33509; <span class="stt">(expval-&gt;num </span><span class="texMathInline">val_1</span><span class="stt">)</span> \neq 0 \hphantom{x}
                         \end{cases}
       \end{alignedat}}
      {<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}</span></p><p>&#19968;&#20010; <span class="stt">if</span> &#34920;&#36798;&#24335;&#23601;&#26159;&#19968;&#20010;&#24067;&#23572;&#20540;&#35266;&#27979;&#22120;&#12290;&#27442;&#27714; <span class="stt">if</span> &#34920;&#36798;&#24335; <span class="stt">(if-exp</span><span class="stt">
</span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">exp_3</span><span class="stt">)</span> &#30340;&#20540;&#65292;&#39318;&#20808;&#21028;&#26029;&#23376;&#34920;&#36798;&#24335; <span class="texMathInline">exp_1</span> &#30340;&#20540;&#65307;&#33509;&#35813;&#20540;&#20026;
&#30495;&#65292;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#24212;&#20026;&#23376;&#34920;&#36798;&#24335; <span class="texMathInline">exp_2</span> &#30340;&#20540;&#65292;&#21542;&#21017;&#20026;&#23376;&#34920;&#36798;&#24335; <span class="texMathInline">exp_3</span> &#30340;&#20540;&#12290;&#36825;
&#20063;&#24456;&#23481;&#26131;&#20889;&#25104;&#25512;&#29702;&#35268;&#21017;&#12290;&#23601;&#20687;&#22312;&#21069;&#19968;&#20010;&#20363;&#23376;&#20013;&#20351;&#29992; <span class="stt">expval-&gt;num</span> &#19968;&#26679;&#65292;&#25105;&#20204;&#29992;
<span class="stt">expval-&gt;bool</span> &#25552;&#21462;&#34920;&#36798;&#20540;&#30340;&#24067;&#23572;&#37096;&#20998;&#12290;</p><p><span class="texMathDisplay">\infer{\begin{alignedat}{-1}
         &amp;<span class="hspace">&nbsp;</span><span class="stt">(value-of (if-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">exp_3</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) </span> \\
         &amp;\hphantom{xx}= \begin{cases}
                          <span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#t</span> \\
                          <span class="stt">(value-of </span><span class="texMathInline">exp_3</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#f</span> \hphantom{x}
                        \end{cases}
       \end{alignedat}}
      {<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}</span></p><p><a name="(idx._(gentag._372))"></a>
&#29992;&#36825;&#31181;&#25512;&#29702;&#35268;&#21017;&#24456;&#23481;&#26131;&#25351;&#23450;&#20219;&#24847;&#34920;&#36798;&#24335;&#30340;&#26399;&#26395;&#34892;&#20026;&#65292;&#20294;&#21364;&#19981;&#36866;&#21512;&#23637;&#31034;&#25512;&#29702;&#36807;&#31243;&#12290;&#20687;
<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &#36825;&#26679;&#30340;&#21069;&#20214;&#34920;&#31034;&#19968;&#37096;&#20998;&#35745;&#31639;&#65292;&#25152;&#20197;&#19968;&#20010;&#35745;&#31639;&#36807;&#31243;&#24212;
&#35813;&#26159;&#19968;&#26869;&#26641;&#65292;&#23601;&#20687;deriv-tree&#37027;&#31181;&#12290;&#24456;&#19981;&#24184;&#30340;&#26159;&#65292;&#36825;&#26679;&#30340;&#26641;&#26497;&#20026;&#26214;&#28073;&#12290;&#22240;&#27492;&#65292;&#25105;
&#20204;&#32463;&#24120;&#25226;&#35268;&#21017;&#36716;&#20026;&#26041;&#31243;&#65292;&#28982;&#21518;&#23601;&#33021;&#29992;&#30456;&#31561;&#20195;&#25442;&#23637;&#31034;&#35745;&#31639;&#36807;&#31243;&#12290;</p><p><a name="(idx._(gentag._373))"></a>
<span class="stt">if-exp</span> &#30340;&#26041;&#31243;&#24335;&#35268;&#33539;&#26159;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (if-exp </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_3</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (if (expval-&gt;bool (value-of </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of </span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._374))"></a>
 &#23637;&#31034;&#20102;&#29992;&#36825;&#20123;&#35268;&#21017;&#36827;&#34892;&#31616;&#21333;&#36816;&#31639;&#30340;&#36807;&#31243;&#12290;</p><blockquote class="EoplFigure"><p>[!t]&#20196; <span class="texMathInline">\rho =</span> <span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">33</span><span class="texMathInline">\rceil</span><span class="stt">,y=</span><span class="texMathInline">\lceil</span><span class="stt">22</span><span class="texMathInline">\rceil</span><span class="stt">]</span>&#12290;<br/></p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(-(x,11)) then -(y,2) else -(y,4)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (if (expval-&gt;bool (value-of &lt;&lt;zero?(-(x,11))&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,2)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,4)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (if (expval-&gt;bool (bool-val #f))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,2)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,4)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (if #f</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,2)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,4)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of &lt;&lt;-(y,4)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">18</span><span class="texMathInline">\rceil</span></p></td></tr></table><blockquote class="caption"><p>&#26465;&#20214;&#34920;&#36798;&#24335;&#30340;&#31616;&#21333;&#35745;&#31639;&#36807;&#31243;<a name="(elem._fig-3..4)"></a></p></blockquote></blockquote><h5 class="heading">3.2.7<tt>&nbsp;</tt><a name="(part._s3..2..7)"></a>&#23450;&#20041; <span class="stt">let</span><span class="button-group"><a href="#(part._s3..2..7)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._375))"></a>
<a name="(idx._(gentag._376))"></a>
<a name="(idx._(gentag._377))"></a>
<a name="(idx._(gentag._378))"></a>
&#25509;&#19979;&#26469;&#25105;&#20204;&#22788;&#29702;&#29992; <span class="stt">let</span> &#34920;&#36798;&#24335;&#21019;&#24314;&#26032;&#21464;&#37327;&#32465;&#23450;&#30340;&#38382;&#39064;&#12290;&#25105;&#20204;&#32473;&#36825;&#38376;&#35299;&#37322;&#24615;&#35821;&#35328;&#28155;&#21152;&#35821;
&#27861;&#65292;&#20197;&#20851;&#38190;&#23383; <span class="stt">let</span> &#36215;&#22987;&#65292;&#28982;&#21518;&#26159;&#19968;&#20010;&#22768;&#26126;&#65292;&#20851;&#38190;&#23383; <span class="stt">in</span>&#65292;&#21450;&#20854;&#20027;&#20307;&#12290;&#20363;&#22914;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 5</span></p></td></tr><tr><td><p><span class="stt">in -(x, 3)</span></p></td></tr></table></blockquote><p>&#20687; <span class="stt">lambda</span> &#21464;&#37327;&#32465;&#23450;&#19968;&#26679;&#65288;&#35265;<a href="#%28part._s1..2..4%29" data-pltdoc="x"><span class="stt">occurs-free?</span></a>&#65289;&#65292;<span class="stt">let</span> &#21464;&#37327;&#32465;&#23450;&#20110;&#20027;&#20307;&#20043;&#20013;&#12290;</p></blockquote><p>&#22914;&#21516;&#20854;&#20027;&#20307;&#65292;&#25972;&#20010; <span class="stt">let</span> &#24418;&#24335;&#20063;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#65292;&#25152;&#20197; <span class="stt">let</span> &#34920;&#36798;&#24335;&#21487;&#20197;&#23884;&#22871;&#65292;&#20363;&#22914;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let z = 5</span></p></td></tr><tr><td><p><span class="stt">in let x = 3</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = -(x, 1)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">% &#36825;&#37324; x = 3</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let x = 4</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(z, -(x,y)) % &#36825;&#37324; x = 4</span></p></td></tr></table></blockquote><p>&#22312;&#26412;&#20363;&#20013;&#65292;&#31532;&#19968;&#20010;&#24046;&#20540;&#34920;&#36798;&#24335;&#20013;&#20351;&#29992;&#30340; <span class="stt">x</span> &#25351;&#20195;&#22806;&#23618;&#22768;&#26126;&#65292;&#21478;&#19968;&#20010;&#24046;&#20540;&#34920;&#36798;&#24335;&#20013;&#20351;&#29992;&#30340;
<span class="stt">x</span> &#25351;&#20195;&#20869;&#23618;&#22768;&#26126;&#65292;&#25152;&#20197;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#26159;3&#12290;</p></blockquote><p><span class="stt">let</span> &#22768;&#26126;&#30340;&#21491;&#36793;&#20063;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#65292;&#25152;&#20197;&#23427;&#21487;&#20197;&#20219;&#24847;&#22797;&#26434;&#12290;&#20363;&#22914;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 7</span></p></td></tr><tr><td><p><span class="stt">in let y = 2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = let x = -(x,1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(-(x,8), y)</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#31532;&#19977;&#34892;&#22768;&#26126;&#30340; <span class="stt">x</span> &#32465;&#23450;&#21040; 6&#65292;&#25152;&#20197; <span class="stt">y</span> &#30340;&#20540;&#26159; 4&#65292;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#26159;
<span class="texMathInline">((-1)-4) = -5</span>&#12290;</p></blockquote><p>&#21487;&#20197;&#23558;&#35268;&#33539;&#20889;&#25104;&#19968;&#26465;&#35268;&#21017;&#12290;</p><p><span class="texMathDisplay">\infer{\begin{alignedat}{-1}
        &amp;<span class="hspace">&nbsp;</span><span class="stt">(value-of (let-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) </span> \\
        &amp;\hphantom{xx}= <span class="stt">(value-of </span><span class="texMathInline">body</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">val_1</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">) </span>
       \end{alignedat}}
      {<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}</span></p><p>&#20687;&#20043;&#21069;&#37027;&#26679;&#65292;&#23558;&#20854;&#36716;&#20026;&#26041;&#31243;&#36890;&#24120;&#26356;&#26041;&#20415;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (let-exp </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[var=(value-of </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr></table></blockquote><p> &#23637;&#31034;&#20102;&#19968;&#20010;&#20363;&#23376;&#65292;&#20854;&#20013; <span class="texMathInline">\rho_0</span> &#34920;&#31034;&#20219;&#24847;&#29615;&#22659;&#12290;</p></blockquote><p><div class="SIntrapara"><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let x = 7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = 2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = let x = -(x,1) in -(x,y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let y = 2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = let x = -(x,1) in -(x,y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let y = let x = -(x,1) in -(x,y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=</span><span class="texMathInline">\lceil</span><span class="stt">2</span><span class="texMathInline">\rceil</span><span class="stt">][x=</span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#20196; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">= [y=</span><span class="texMathInline">\lceil</span><span class="stt">2</span><span class="texMathInline">\rceil</span><span class="stt">][x=</span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_0</span><span class="stt">&#12290;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=(value-of &lt;&lt;let x = -(x,1) in -(x,y)&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt">)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=(value-of &lt;&lt;-(x,2)&gt;&gt; [x=(value-of &lt;&lt;-(x,1)&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt">)]</span><span class="texMathInline">\rho_1</span><span class="stt">)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=(value-of &lt;&lt;-(x,2)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_1</span><span class="stt">)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=</span><span class="texMathInline">\lceil</span><span class="stt">4</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(- (- 7 8) 4)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">-5</span><span class="texMathInline">\rceil</span></p></td></tr></table><blockquote class="caption"><p><span class="stt">let</span> &#19968;&#20363;<a name="(elem._fig-3..5)"></a></p></blockquote></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._379))"></a>
<a name="(idx._(gentag._380))"></a>
<a name="(idx._(gentag._381))"></a>
<a name="(idx._(gentag._382))"></a></div></p><h5 class="heading">3.2.8<tt>&nbsp;</tt><a name="(part._s3..2..8)"></a>&#23454;&#29616; LET &#35268;&#33539;<span class="button-group"><a href="#(part._s3..2..8)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#25509;&#19979;&#26469;&#30340;&#20219;&#21153;&#26159;&#29992;&#19968;&#32452;Scheme&#36807;&#31243;&#23454;&#29616;&#36825;&#19968;&#35268;&#33539;&#12290;&#25105;&#20204;&#30340;&#23454;&#29616;&#20197; SLLGEN<span class="NoteBox"><span class="NoteContent">&#35265;
<a href="#%28elem._sllgen%29" data-pltdoc="x">&#38468;&#24405;B</a>&#12290;&#8212;&#8212;<span class="emph">&#35793;&#27880;</span></span></span> &#20026;&#21069;&#31471;&#65292;&#34920;&#36798;&#24335;&#29992;
&#20013;&#30340;&#25968;&#25454;&#31867;&#22411;&#34920;&#31034;&#12290;&#22312;&#25105;&#20204;&#30340;&#23454;&#29616;&#20013;&#65292;&#34920;&#36798;&#20540;&#30340;&#34920;&#31034;&#22914; &#25152;&#31034;&#12290;&#25968;&#25454;
&#31867;&#22411;&#22768;&#26126;&#20102;&#26500;&#36896;&#22120; <span class="stt">num-val</span> &#21644; <span class="stt">bool-val</span>&#65292;&#29992;&#26469;&#23558;&#25972;&#25968;&#20540;&#21644;&#24067;&#23572;&#20540;&#36716;&#25442;&#20026;&#34920;&#36798;&#20540;&#12290;
&#25105;&#20204;&#36824;&#23450;&#20041;&#20102;&#25552;&#21462;&#22120;&#65292;&#29992;&#26469;&#23558;&#34920;&#36798;&#20540;&#36716;&#20026;&#25972;&#25968;&#25110;&#24067;&#23572;&#20540;&#12290;&#22914;&#26524;&#34920;&#36798;&#20540;&#31867;&#22411;&#19981;&#31526;&#39044;&#26399;&#65292;&#25552;&#21462;&#22120;
&#25253;&#38169;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">program?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>LET &#35821;&#35328;&#30340;&#35821;&#27861;&#25968;&#25454;&#31867;&#22411;<a name="(elem._fig-3..6)"></a></p></blockquote></blockquote><p>&#21482;&#35201;&#28385;&#36275;<a href="#%28part._s2..2%29" data-pltdoc="x">&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;</a>&#20013;&#30340;&#23450;&#20041;&#65292;&#20219;&#24847;&#19968;&#31181;&#29615;&#22659;&#23454;&#29616;&#37117;&#21487;&#20351;&#29992;&#12290;&#36807;&#31243; <span class="stt">init-env</span> &#21019;&#24314;
&#25351;&#23450;&#30340;&#21021;&#22987;&#29615;&#22659;&#65292;&#20379; <span class="stt">value-of-program</span> &#20351;&#29992;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">init-env</span></span> : <span class="texMathInline">() \to \mathit{Env}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(init-env)</span> = <span class="stt">[i=</span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">,v=</span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">,x=</span><span class="texMathInline">\lceil</span><span class="stt">10</span><span class="texMathInline">\rceil</span><span class="stt">]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">init-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">i</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">expval</span><span class="hspace">&nbsp;</span><span class="RktSym">expval?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool</span><span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">expval-&gt;num</span></span> : <span class="texMathInline">\mathit{ExpVal} \to \mathit{Int}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">expval-&gt;num</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expval</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-expval-extractor-error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">num</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">expval-&gt;bool</span></span> : <span class="texMathInline">\mathit{ExpVal} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">expval-&gt;bool</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expval</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-expval-extractor-error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bool</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>LET &#35821;&#35328;&#30340;&#34920;&#36798;&#20540;<a name="(elem._fig-3..7)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._383))"></a></div></p></blockquote><p>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986;&#35299;&#26512;&#22120;&#65292;&#22914; &#21644;fig-3.9 &#25152;&#31034;&#12290;&#20027;&#36807;&#31243;
&#26159; <span class="stt">run</span>&#65292;&#23427;&#21462;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#35299;&#26512;&#23427;&#65292;&#25226;&#32467;&#26524;&#20256;&#32473; <span class="stt">value-of-program</span>&#12290;&#26368;&#20196;&#20154;&#24863;
&#20852;&#36259;&#30340;&#36807;&#31243;&#26159; <span class="stt">value-of</span>&#65292;&#23427;&#21462;&#19968;&#34920;&#36798;&#24335;&#21644;&#19968;&#29615;&#22659;&#65292;&#29992;&#35299;&#37322;&#22120;&#31192;&#26041;&#35745;&#31639;&#35268;&#33539;&#25152;&#35201;&#27714;&#30340;&#31572;
&#26696;&#12290;&#22312;&#20195;&#30721;&#20013;&#65292;&#25105;&#20204;&#25554;&#20837;&#20102;&#30456;&#20851;&#30340;&#25512;&#29702;&#35268;&#21017;&#23450;&#20041;&#65292;&#20197;&#20415;&#35266;&#23519; <span class="stt">value-of</span> &#30340;&#20195;&#30721;&#22914;&#20309;&#19982;
&#35268;&#33539;&#23545;&#24212;&#12290;
<a name="(idx._(gentag._384))"></a></p><blockquote class="SubFlow"><p><span class="Smaller"><br/><a name="(elem._ex-note)"></a>&#22312;&#19979;&#38754;&#30340;&#32451;&#20064;&#20197;&#21450;&#20840;&#20070;&#20043;&#20013;&#65292;&#30701;&#35821;
&#8220;&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#8230;&#8230;&#8221;&#34920;&#31034;&#21521;&#35821;&#35328;&#35268;&#33539;&#28155;&#21152;&#35268;&#21017;&#25110;&#32773;&#26041;&#31243;&#65292;
&#24182;&#22686;&#25913;&#30456;&#24212;&#30340;&#35299;&#37322;&#22120;&#65292;&#23454;&#29616;&#25351;&#23450;&#29305;&#24615;&#12290;</span></p></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">run</span></span> : <span class="texMathInline">\mathit{String} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">run</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">scan&amp;parse</span><span class="hspace">&nbsp;</span><span class="RktSym">string</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of</span></span> : <span class="texMathInline">\mathit{ExpVal} \times \mathit{Env} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{<span class="hspace">&nbsp;</span><span class="stt">(value-of (const-exp </span><span class="texMathInline">n</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) = n</span>}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{<span class="hspace">&nbsp;</span><span class="stt">(value-of (var-exp </span><span class="texMathInline">var</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="stt">(apply-env </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">var</span><span class="stt">)</span>}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\begin{math}\begin{alignedat}{-1}&amp;<span class="hspace">&nbsp;</span><span class="stt">(value-of (diff-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) =</span> \\ &amp;\hphantom{xxx}<span class="texMathInline">\lceil</span><span class="stt">(- </span><span class="texMathInline">\lfloor</span><span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt"> </span><span class="texMathInline">\lfloor</span><span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span>\end{alignedat}\end{math}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktSym">num2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\begin{comment}</td></tr><tr><td><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\end{comment}
\smallskip</td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p>LET &#35821;&#35328;&#30340;&#35299;&#37322;&#22120;<a name="(elem._fig-3..8)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._385))"></a></div></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td>\smallskip
\begin{comment}</td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">...</span></td></tr><tr><td>\end{comment}</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\infer{\begin{alignedat}{-1}&amp;<span class="stt">(value-of (zero?-exp </span><span class="texMathInline">exp_1</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span> \\ &amp;\hphantom{x}= \begin{cases} <span class="stt">(bool-val #t)</span> &amp; &#33509; <span class="stt">(expval-&gt;num </span><span class="texMathInline">val_1</span><span class="stt">)</span> = 0 \\ <span class="stt">(bool-val #f)</span> &amp; &#33509; <span class="stt">(expval-&gt;num </span><span class="texMathInline">val_1</span><span class="stt">)</span> \neq 0 \end{cases} \end{alignedat}}{<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">num1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\infer{\begin{alignedat}{-1}&amp;<span class="stt">(value-of (if-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">exp_3</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span> \\ &amp;\hphantom{x}= \begin{cases} <span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#t</span> \\ <span class="stt">(value-of </span><span class="texMathInline">exp_3</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#f</span> \end{cases} \end{alignedat}}{<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;bool</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\infer{\begin{alignedat}{-1}&amp;<span class="stt">(value-of (let-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span> \\ &amp;\hphantom{x}= <span class="stt">(value-of </span><span class="texMathInline">body</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">val_1</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span> \end{alignedat}}{<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>LET &#35821;&#35328;&#30340;&#35299;&#37322;&#22120;&#65292;&#32493;<a name="(elem._fig-3..9)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._386))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..3)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#21482;&#26377;&#19968;&#20010;&#31639;&#26415;&#25805;&#20316;&#65292;&#36873;&#20943;&#27861;&#20026;&#20160;&#20040;&#27604;&#21152;&#27861;&#22909;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..4)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._387))"></a>
<a name="(idx._(gentag._388))"></a>
&#25226; &#20013;&#30340;&#25512;&#23548;&#20889;&#25104;deriv-tree&#37027;&#26679;&#30340;&#25512;&#29702;&#26641;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..5)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25226; &#20013;&#30340;&#25512;&#23548;&#20889;&#25104;deriv-tree&#37027;&#26679;&#30340;&#25512;&#29702;&#26641;&#12290;
<a name="(idx._(gentag._389))"></a>
<a name="(idx._(gentag._390))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..6)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#26032;&#25805;&#20316;&#31526; <span class="stt">minus</span>&#65292;&#23427;&#21462;&#19968;&#21442;&#25968; <span class="texMathInline">n</span>&#65292;&#36820;&#22238; <span class="texMathInline">-n</span>&#12290;&#20363;&#22914;&#65292;
<span class="stt">minus(- (minus(5), 9))</span> &#30340;&#20540;&#24212;&#20026;14&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..7)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#21152;&#27861;&#12289;&#20056;&#27861;&#21644;&#25972;&#25968;&#38500;&#27861;&#25805;&#20316;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..8)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21521;&#35813;&#35821;&#35328;&#28155;&#21152;&#31561;&#20540;&#27604;&#36739;&#35859;&#35789; <span class="stt">equal?</span>&#65292;&#20197;&#21450;&#39034;&#24207;&#27604;&#36739;&#35859;&#35789; <span class="stt">greater?</span> &#21644;
<span class="stt">less?</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..9)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._391))"></a>
&#21521;&#35813;&#35821;&#35328;&#28155;&#21152;&#21015;&#34920;&#22788;&#29702;&#25805;&#20316;&#65292;&#21253;&#25324; <span class="stt">cons</span>&#12289;<span class="stt">car</span>&#12289;<span class="stt">cdr</span>&#12289;<span class="stt">null?</span> &#21644;
<span class="stt">emptylist</span>&#12290;&#21015;&#34920;&#21487;&#20197;&#21253;&#21547;&#20219;&#20309;&#34920;&#36798;&#20540;&#65292;&#21253;&#25324;&#20854;&#20182;&#21015;&#34920;&#12290;&#20687;<a href="#%28part._s3..2..2%29" data-pltdoc="x">&#23450;&#20041;&#20540;</a>&#37027;&#26679;&#65292;&#32473;
&#20986;&#35821;&#35328;&#34920;&#36798;&#20540;&#21644;&#25351;&#20195;&#20540;&#30340;&#23450;&#20041;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 4</span></p></td></tr><tr><td><p><span class="stt">in cons(x,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">cons(cons(-(x,1),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">emptylist),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">emptylist))</span></p></td></tr></table></blockquote><p>&#24212;&#36820;&#22238;&#19968;&#34920;&#36798;&#20540;&#65292;&#34920;&#31034;&#21015;&#34920; <span class="stt">(4 (3))</span>&#12290;
<a name="(idx._(gentag._392))"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..10)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._393))"></a>
&#21521;&#35813;&#35821;&#35328;&#28155;&#21152;&#25805;&#20316; <span class="stt">list</span>&#12290;&#35813;&#25805;&#20316;&#21462;&#20219;&#24847;&#25968;&#37327;&#30340;&#21442;&#25968;&#65292;&#36820;&#22238;&#19968;&#34920;&#36798;&#20540;&#65292;&#21253;&#21547;&#30001;&#21442;&#25968;&#20540;&#32452;
&#25104;&#30340;&#21015;&#34920;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 4</span></p></td></tr><tr><td><p><span class="stt">in list(x, -(x,1), -(x,3))</span></p></td></tr></table></blockquote><p>&#24212;&#36820;&#22238;&#19968;&#34920;&#36798;&#20540;&#65292;&#34920;&#31034;&#21015;&#34920; <span class="stt">(4 3 1)</span>&#12290;
<a name="(idx._(gentag._394))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..11)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#30495;&#27491;&#30340;&#35821;&#35328;&#21487;&#33021;&#26377;&#24456;&#22810;&#19978;&#36848;&#32451;&#20064;&#37027;&#26679;&#30340;&#25805;&#20316;&#31526;&#12290;&#35843;&#25972;&#35299;&#37322;&#22120;&#20195;&#30721;&#65292;&#20197;&#20415;&#28155;&#21152;&#26032;&#25805;&#20316;&#31526;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..12)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._395))"></a>
&#21521;&#35813;&#35821;&#35328;&#28155;&#21152; <span class="stt">cond</span> &#34920;&#36798;&#24335;&#12290;&#35821;&#27861;&#20026;&#65306;</p><p><span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">cond </span><span class="texMathInline">\{}<span class="texMathInline">\mathit{Expression}</span> <span class="hspace">&nbsp;</span><span class="stt">==&gt; </span> <span class="texMathInline">\mathit{Expression}</span><span class="texMathInline">\</span>^{*}</span><span class="stt"> end</span></span></p><p>&#22312;&#36825;&#31181;&#34920;&#36798;&#24335;&#37324;&#65292;<span class="stt">==&gt;</span> &#24038;&#36793;&#30340;&#34920;&#36798;&#24335;&#25353;&#24207;&#27714;&#20540;&#65292;&#30452;&#21040;&#20854;&#20013;&#19968;&#20010;&#36820;&#22238;&#30495;&#12290;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;
&#20540;&#26159;&#30495;&#20540;&#34920;&#36798;&#24335;&#21491;&#36793;&#23545;&#24212;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#22914;&#26524;&#27809;&#26377;&#26465;&#20214;&#20026;&#30495;&#65292;&#35813;&#34920;&#36798;&#24335;&#24212;&#25253;&#38169;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..13)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._396))"></a>
&#20462;&#25913;&#35821;&#35328;&#65292;&#25226;&#25972;&#25968;&#20316;&#20026;&#21807;&#19968;&#30340;&#34920;&#36798;&#20540;&#12290;&#20462;&#25913; <span class="stt">if</span>&#65292;&#20197; 0 &#20026;&#20551;&#65292;&#20197;&#25152;&#26377;&#20854;&#20182;&#20540;&#20026;&#30495;&#12290;&#30456;
&#24212;&#22320;&#20462;&#25913;&#35859;&#35789;&#12290;
<a name="(idx._(gentag._397))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..14)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._398))"></a>
&#21069;&#19968;&#39064;&#30340;&#21478;&#19968;&#20570;&#27861;&#26159;&#32473;&#35821;&#35328;&#28155;&#21152;&#26032;&#30340;&#38750;&#32456;&#32467;&#31526; <span class="texMathInline">\mathit{Bool\mbox{-}exp}</span>&#65292;&#20316;&#20026;&#24067;&#23572;
&#20540;&#34920;&#36798;&#24335;&#12290;&#20462;&#25913;&#26465;&#20214;&#34920;&#36798;&#24335;&#30340;&#29983;&#25104;&#24335;&#65306;</p><p><span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">if </span><span class="texMathInline">\mathit{Bool\mbox{-}exp}</span><span class="stt"> then </span><span class="texMathInline">\mathit{Expression}</span><span class="stt"> else </span><span class="texMathInline">\mathit{Expression}</span></span></p><p>&#20026; <span class="texMathInline">\mathit{Bool\mbox{-}exp}</span> &#20889;&#20986;&#36866;&#24403;&#30340;&#29983;&#25104;&#24335;&#65292;&#23454;&#29616; <span class="stt">value-of-bool-exp</span>&#12290;
&#25353;&#36825;&#31181;&#26041;&#24335;&#65292;ex3.8 &#20013;&#30340;&#35859;&#35789;&#24212;&#25918;&#22312;&#21738;&#37324;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..15)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._399))"></a>
&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#26032;&#25805;&#20316; <span class="stt">print</span>&#65292;&#23427;&#21462;&#19968;&#21442;&#25968;&#65292;&#25171;&#21360;&#20986;&#26469;&#65292;&#36820;&#22238;&#25972;&#25968;1&#12290;&#22312;&#25105;&#20204;&#30340;&#35268;&#33539;&#26694;
&#26550;&#19979;&#65292;&#20026;&#20160;&#20040;&#19981;&#33021;&#34920;&#31034;&#36825;&#19968;&#25805;&#20316;&#65311;
<a name="(idx._(gentag._400))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..16)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._401))"></a>
&#25193;&#23637;&#35821;&#35328;&#65292;&#20801;&#35768; <span class="stt">let</span> &#22768;&#26126;&#20219;&#24847;&#25968;&#37327;&#30340;&#21464;&#37327;&#65292;&#35821;&#27861;&#20026;&#65306;<br/></p><p><span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">let </span><span class="texMathInline">\{}<span class="texMathInline">\mathit{Identifier}</span> = <span class="texMathInline">\mathit{Expression}\</span>^*</span><span class="stt"> in </span><span class="texMathInline">\mathit{Expression}</span></span></p><p>&#20687; Scheme &#20013;&#30340; <span class="stt">let</span> &#37027;&#26679;&#65292;&#22768;&#26126;&#21491;&#36793;&#22312;&#24403;&#21069;&#29615;&#22659;&#20013;&#27714;&#20540;&#65292;&#27599;&#20010;&#26032;&#21464;&#37327;&#32465;&#23450;&#21040;&#23545;&#24212;&#22768;&#26126;
&#21491;&#36793;&#30340;&#20540;&#65292;&#28982;&#21518;&#27714;&#20027;&#20307;&#30340;&#20540;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 30</span></p></td></tr><tr><td><p><span class="stt">in let x = -(x,1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">y = -(x,2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#20540;&#24212;&#20026;1&#12290;
<a name="(idx._(gentag._402))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..17)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._403))"></a>
&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#34920;&#36798;&#24335; <span class="stt">let*</span>&#65292;&#20687; Scheme &#30340; <span class="stt">let*</span> &#37027;&#26679;&#12290;&#21017;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 30</span></p></td></tr><tr><td><p><span class="stt">in let* x = -(x,1) y = -(x,2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#20540;&#24212;&#20026;2&#12290;
<a name="(idx._(gentag._404))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..18)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._405))"></a>
&#21521;&#35813;&#35821;&#35328;&#28155;&#21152;&#34920;&#36798;&#24335;&#65306;</p><p><span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">unpack </span><span class="texMathInline">\{\mathit{Identifier}\}^*</span><span class="stt"> = </span><span class="texMathInline">\mathit{Expression}</span><span class="stt"> in </span><span class="texMathInline">\mathit{Expression}</span></span></p><p>&#21017;&#65306;&#22914;&#26524; <span class="stt">lst</span> &#24688;&#22909;&#26159;&#19977;&#20803;&#32032;&#30340;&#21015;&#34920;&#65292;<span class="stt">unpack x y z = lst in ...</span> &#23558; <span class="stt">x</span>&#12289;
<span class="stt">y</span> &#21644; <span class="stt">z</span> &#32465;&#23450;&#21040; <span class="stt">lst</span> &#30340;&#21508;&#20803;&#32032;&#65307;&#21542;&#21017;&#25253;&#38169;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let u = 7</span></p></td></tr><tr><td><p><span class="stt">in unpack x y = cons(u,cons(3,emptylist))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#20540;&#24212;&#20026;4&#12290;
<a name="(idx._(gentag._406))"></a></p></blockquote><h4 class="heading">3.3<tt>&nbsp;</tt><a name="(part._s3..3)"></a>PROC&#65306;&#26377;&#36807;&#31243;&#30340;&#35821;&#35328;<span class="button-group"><a href="#(part._s3..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._407))"></a>
&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#30340;&#35821;&#35328;&#21482;&#33021;&#36827;&#34892;&#23450;&#20041;&#22909;&#30340;&#25805;&#20316;&#12290;&#35201;&#24819;&#35753;&#36825;&#31181;&#35299;&#37322;&#24615;&#35821;&#35328;&#26356;&#26377;&#29992;&#65292;&#24517;&#39035;&#33021;&#21019;&#24314;
&#26032;&#36807;&#31243;&#12290;&#25105;&#20204;&#25226;&#26032;&#35821;&#35328;&#21483;&#20570; PROC&#12290;</p><p><a name="(idx._(gentag._408))"></a>
&#25353;&#29031; Scheme &#30340;&#35774;&#35745;&#65292;&#25105;&#20204;&#25226;&#36807;&#31243;&#20316;&#20026;&#35821;&#35328;&#30340;&#34920;&#36798;&#20540;&#65292;&#21017;&#65306;</p><blockquote class="SubFlow"><p><span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc} \\
\mathit{DenVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc}\end{align*}</span></p><p>&#20854;&#20013;&#65292;<span class="texMathInline">\mathit{Proc}</span> &#26159;&#19968;&#20540;&#38598;&#21512;&#65292;&#34920;&#31034;&#36807;&#31243;&#12290;&#25105;&#20204;&#25226; <span class="texMathInline">\mathit{Proc}</span> &#20316;&#20026;&#19968;&#31181;
&#25277;&#35937;&#25968;&#25454;&#31867;&#22411;&#12290;&#19979;&#38754;&#25105;&#20204;&#32771;&#34385;&#23427;&#30340;&#25509;&#21475;&#21644;&#35268;&#33539;&#12290;</p></blockquote><p><a name="(idx._(gentag._409))"></a>
<a name="(idx._(gentag._410))"></a>
<a name="(idx._(gentag._411))"></a>
<a name="(idx._(gentag._412))"></a>
&#25105;&#20204;&#36824;&#38656;&#35201;&#35821;&#27861;&#26469;&#21019;&#24314;&#21644;&#35843;&#29992;&#36807;&#31243;&#12290;&#23545;&#24212;&#30340;&#29983;&#25104;&#24335;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">proc (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">proc-exp (var body)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">letrec(</span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">call-exp (rator rand)</span>}\end{align*}</span></p><p><a name="(idx._(gentag._413))"></a>
<a name="(idx._(gentag._414))"></a>
<a name="(idx._(gentag._415))"></a>
<a name="(idx._(gentag._416))"></a>
<a name="(idx._(gentag._417))"></a>
<a name="(idx._(gentag._418))"></a>
&#22312; <span class="stt">(proc </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">)</span> &#20013;&#65292;&#21464;&#37327; <span class="texMathInline">var</span> &#26159;<span class="emph">&#32465;&#23450;
&#21464;&#37327;</span> (<span class="emph">bound variable</span>) &#25110;<span class="emph">&#24418;&#21442;</span> (<span class="emph">formal parameter</span>)&#12290;&#22312;&#36807;&#31243;&#35843;&#29992; <span class="stt">(call-exp </span><span class="texMathInline">exp_1</span><span class="stt">
</span><span class="texMathInline">exp_2</span><span class="stt">)</span> &#20013;&#65292;&#34920;&#36798;&#24335; <span class="texMathInline">exp_1</span> &#26159;<span class="emph">&#25805;&#20316;&#31526;</span> (<span class="emph">operator</span>)&#65292;&#34920;&#36798;&#24335; <span class="texMathInline">exp_2</span>
&#26159;<span class="emph">&#25805;&#20316;&#25968;</span> (<span class="emph">operand</span>) &#25110;<a name="(idx._(gentag._419))"></a><span class="emph">&#23454;&#38469;&#21442;&#25968;</span> (<span class="emph">actual
parameter</span>)&#12290;&#25105;&#20204;&#29992;<a name="(idx._(gentag._420))"></a><span class="emph">&#23454;&#21442;</span> (<span class="emph">argument</span>) &#25351;&#20195;&#23454;
&#38469;&#21442;&#25968;&#30340;&#20540;&#12290;</p><p>&#36825;&#26159;&#36825;&#31181;&#35821;&#35328;&#30340;&#20004;&#20010;&#23567;&#20363;&#23376;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let f = proc (x) -(x,11)</span></p></td></tr><tr><td><p><span class="stt">in (f (f 77))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(proc (f) (f (f 77))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">proc (x) -(x,11))</span></p></td></tr></table></blockquote><p>&#31532;&#19968;&#20010;&#31243;&#24207;&#21019;&#24314;&#36807;&#31243; <span class="stt">f</span>&#65292;&#23558;&#23454;&#21442;&#20943;11&#65292;&#28982;&#21518;&#29992; 77 &#20004;&#27425;&#35843;&#29992; <span class="stt">f</span>&#65292;&#24471;&#21040;&#30340;&#31572;&#26696;&#20026;55&#12290;
&#31532;&#20108;&#20010;&#31243;&#24207;&#21019;&#24314;&#30340;&#36807;&#31243;&#21462;&#19968;&#21442;&#25968;&#65292;&#36830;&#32493;&#20004;&#27425;&#29992; 77 &#35843;&#29992;&#35813;&#21442;&#25968;&#65307;&#28982;&#21518;&#23558;&#20943; 11 &#30340;&#36807;&#31243;&#20256;&#32473;&#21019;
&#24314;&#30340;&#36807;&#31243;&#65292;&#32467;&#26524;&#20173;&#20026; 55&#12290;</p><p>&#29616;&#22312;&#25105;&#20204;&#26469;&#30475;&#25968;&#25454;&#31867;&#22411; <span class="texMathInline">\mathit{Proc}</span>&#12290;&#23427;&#30340;&#25509;&#21475;&#21253;&#21547;&#26500;&#36896;&#22120; <span class="stt">procedure</span>&#65292;&#29992;&#20110;
&#21019;&#24314;&#36807;&#31243;&#20540;&#65307;&#35266;&#27979;&#22120; <span class="stt">apply-procedure</span>&#65292;&#29992;&#20110;&#35843;&#29992;&#36807;&#31243;&#20540;&#12290;</p><p>&#25509;&#19979;&#26469;&#30340;&#20219;&#21153;&#26159;&#65292;&#26126;&#30830;&#34920;&#31034;&#36807;&#31243;&#30340;&#20540;&#38656;&#35201;&#21253;&#21547;&#21738;&#20123;&#20449;&#24687;&#12290;&#27442;&#30693;&#27492;&#65292;&#25105;&#20204;&#32771;&#34385;&#22312;&#31243;&#24207;&#20013;&#20219;&#24847;&#20301;
&#32622;&#20889; <span class="stt">proc</span> &#34920;&#36798;&#24335;&#26102;&#21457;&#29983;&#20102;&#20160;&#20040;&#12290;</p><p>&#35789;&#27861;&#20316;&#29992;&#22495;&#35268;&#21017;&#21578;&#35785;&#25105;&#20204;&#65292;&#35843;&#29992;&#19968;&#20010;&#36807;&#31243;&#26102;&#65292;&#36807;&#31243;&#30340;&#24418;&#21442;&#32465;&#23450;&#21040;&#35843;&#29992;&#26102;&#30340;&#23454;&#21442;&#65292;&#28982;&#21518;&#22312;&#35813;&#29615;
&#22659;&#20869;&#27714;&#20540;&#36807;&#31243;&#30340;&#20027;&#20307;&#12290;&#36807;&#31243;&#20013;&#20986;&#29616;&#30340;&#33258;&#30001;&#21464;&#37327;&#20063;&#24212;&#35813;&#36981;&#23432;&#35789;&#27861;&#32465;&#23450;&#35268;&#21017;&#12290;&#32771;&#34385;&#34920;&#36798;&#24335;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 200</span></p></td></tr><tr><td><p><span class="stt">in let f = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let x = 100</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._421))"></a>
<a name="(idx._(gentag._422))"></a>
&#36825;&#37324;&#25105;&#20204;&#20004;&#27425;&#27714;&#20540;&#34920;&#36798;&#24335; <span class="stt">proc (z) -(z,x)</span>&#12290;&#31532;&#19968;&#27425;&#27714;&#20540;&#26102;&#65292;<span class="stt">x</span> &#32465;&#23450;&#21040; 200&#65292;&#25152;
&#20197;&#26681;&#25454;&#35789;&#27861;&#32465;&#23450;&#35268;&#21017;&#65292;&#24471;&#21040;&#30340;&#36807;&#31243;&#23558;&#23454;&#21442;&#20943; 200&#65292;&#25105;&#20204;&#23558;&#20854;&#21629;&#21517;&#20026; <span class="stt">f</span>&#12290;&#31532;&#20108;&#27425;&#27714;&#20540;&#26102;&#65292;
<span class="stt">x</span> &#32465;&#23450;&#21040; 100&#65292;&#24471;&#20986;&#30340;&#36807;&#31243;&#24212;&#23558;&#23454;&#21442;&#20943; 100&#65292;&#25105;&#20204;&#23558;&#35813;&#36807;&#31243;&#21629;&#21517;&#20026; <span class="stt">g</span>&#12290;</p><p><a name="(idx._(gentag._423))"></a>
&#36825;&#20004;&#20010;&#36807;&#31243;&#30001;&#21516;&#19968;&#20010;&#34920;&#36798;&#24335;&#29983;&#25104;&#65292;&#32780;&#34892;&#20026;&#19981;&#21516;&#12290;&#30001;&#27492;&#21487;&#24471;&#65292;<span class="stt">proc</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#19968;&#23450;&#20197;&#26576;
&#31181;&#26041;&#24335;&#20381;&#36182;&#27714;&#20540;&#29615;&#22659;&#12290;&#22240;&#27492;&#65292;&#26500;&#36896;&#22120; <span class="stt">procedure</span> &#24517;&#23450;&#21462;&#19977;&#20010;&#21442;&#25968;&#65306;&#32465;&#23450;&#21464;&#37327;&#12289;&#20027;&#20307;&#20197;
&#21450;&#29615;&#22659;&#12290;<span class="stt">proc</span> &#34920;&#36798;&#24335;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (proc-exp </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (proc-val (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#20687; <span class="stt">bool-val</span> &#21644; <span class="stt">num-val</span> &#19968;&#26679;&#65292;<span class="stt">proc-val</span> &#26159;&#19968;&#26500;&#36896;&#22120;&#65292;&#29983;&#25104;&#19968;&#20010;
<span class="texMathInline">\mathit{Proc}</span> &#30340;&#34920;&#36798;&#20540;&#12290;</p></blockquote><p>&#35843;&#29992;&#36807;&#31243;&#26102;&#65292;&#25105;&#20204;&#35201;&#25214;&#20986;&#25805;&#20316;&#31526;&#21644;&#25805;&#20316;&#25968;&#30340;&#20540;&#12290;&#22914;&#26524;&#25805;&#20316;&#31526;&#26159;&#19968;&#20010; <span class="stt">proc-val</span>&#65292;&#37027;&#20040;&#25105;
&#20204;&#35201;&#20197;&#25805;&#20316;&#25968;&#30340;&#20540;&#35843;&#29992;&#23427;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (call-exp </span><span class="texMathInline">rator</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">rand</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (let ((proc (expval-&gt;proc (value-of </span><span class="texMathInline">rator</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(arg (value-of </span><span class="texMathInline">rand</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure proc arg))</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;&#25105;&#20204;&#29992;&#20102;&#19968;&#20010;&#21028;&#26029;&#24335; <span class="stt">expval-&gt;proc</span>&#65292;&#20687; <span class="stt">expval-&gt;num</span>&#65292;&#23427;&#21028;&#26029;&#34920;&#36798;&#20540;
<span class="stt">(value-of </span><span class="texMathInline">rator</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &#26159;&#21542;&#30001; <span class="stt">proc-val</span> &#29983;&#25104;&#65292;&#22914;&#26524;&#26159;&#65292;&#21017;&#20174;&#20013;&#25552;&#21462;
&#20986;&#21253;&#21547;&#30340;&#36807;&#31243;&#12290;</p></blockquote><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#32771;&#34385;&#35843;&#29992; <span class="stt">apply-procedure</span> &#26102;&#21457;&#29983;&#20102;&#20160;&#20040;&#12290;&#35789;&#27861;&#20316;&#29992;&#22495;&#35268;&#21017;&#21578;&#35785;&#25105;&#20204;&#65292;&#35843;
&#29992;&#36807;&#31243;&#26102;&#65292;&#36807;&#31243;&#20027;&#20307;&#30340;&#27714;&#20540;&#29615;&#22659;&#23558;&#20854;&#24418;&#21442;&#32465;&#23450;&#21040;&#35843;&#29992;&#26102;&#30340;&#23454;&#21442;&#65307;&#32780;&#19988;&#65292;&#20219;&#20309;&#20854;&#20182;&#21464;&#37327;&#30340;&#20540;&#24517;
&#39035;&#21644;&#36807;&#31243;&#21019;&#24314;&#26102;&#30456;&#21516;&#12290;&#22240;&#27492;&#65292;&#36825;&#20123;&#36807;&#31243;&#24212;&#28385;&#36275;&#26465;&#20214;</p><blockquote class="EoplEquationInset"><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span class="texMathInline">var=val</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr></table></div><div class="SIntrapara"><a name="(idx._(gentag._424))"></a>
<a name="(idx._(gentag._425))"></a>
<a name="(idx._(gentag._426))"></a>
<a name="(idx._(gentag._427))"></a>
<a name="(idx._(gentag._428))"></a>
<a name="(idx._(gentag._429))"></a>
<a name="(idx._(gentag._430))"></a></div></p></blockquote><h5 class="heading">3.3.1<tt>&nbsp;</tt><a name="(part._s3..3..1)"></a>&#19968;&#20010;&#20363;&#23376;<span class="button-group"><a href="#(part._s3..3..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#25105;&#20204;&#29992;&#19968;&#20010;&#20363;&#23376;&#23637;&#31034;&#23450;&#20041;&#30340;&#21508;&#37096;&#20998;&#26159;&#22914;&#20309;&#37197;&#21512;&#30340;&#12290;&#30001;&#20110;&#25105;&#20204;&#36824;&#27809;&#26377;&#20889;&#20986;&#36807;&#31243;&#30340;&#23454;&#29616;&#65292;&#36825;&#20010;&#35745;
&#31639;&#36807;&#31243;&#29992;<span class="emph">&#35268;&#33539;</span>&#34920;&#31034;&#12290;&#20196; <span class="texMathInline">\rho</span> &#20026;&#20219;&#19968;&#29615;&#22659;&#12290;</p><blockquote class="Small"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let x = 200</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let f = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let x = 100</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let f = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let x = 100</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let x = 100</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[g=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;(f 1)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[g=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;(g 1)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[g=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(z,x)&gt;&gt; [z=</span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(z,x)&gt;&gt; [z=</span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">][x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(- -199 -99)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">-100</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr></table></blockquote><p>&#20854;&#20013;&#65292;&#32465;&#23450;&#21040;&#30340; <span class="stt">f</span> &#36807;&#31243;&#23558;&#23454;&#21442;&#20943; 200&#65292;&#32465;&#23450;&#21040; <span class="stt">g</span> &#30340;&#36807;&#31243;&#23558;&#23454;&#21442;&#20943; 100&#65292;&#25152;&#20197;
<span class="stt">(f 1)</span> &#30340;&#20540;&#26159; -199&#65292;<span class="stt">(g 1)</span> &#30340;&#20540;&#26159; -99&#12290;</p><h5 class="heading">3.3.2<tt>&nbsp;</tt><a name="(part._s3..3..2)"></a>&#34920;&#31034;&#36807;&#31243;<span class="button-group"><a href="#(part._s3..3..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._431))"></a>
<a name="(idx._(gentag._432))"></a>
&#26681;&#25454;<a href="#%28part._s2..2..3%29" data-pltdoc="x">&#36807;&#31243;&#34920;&#31034;&#27861;</a>&#20013;&#20171;&#32461;&#30340;&#26041;&#27861;&#65292;&#25105;&#20204;&#21487;&#20197;&#25353;&#29031;&#36807;&#31243;&#34920;&#31034;&#27861;&#65292;&#29992;&#36807;&#31243;&#22312;
<span class="stt">apply-procedure</span> &#20013;&#30340;&#21160;&#20316;&#34920;&#31034;&#23427;&#20204;&#12290;&#27442;&#22914;&#27492;&#65292;&#25105;&#20204;&#23558; <span class="stt">procedure</span> &#30340;&#20540;&#23450;&#20041;&#20026;
&#23454;&#29616;&#35821;&#35328;&#30340;&#36807;&#31243;&#65292;&#23427;&#21462;&#19968;&#23454;&#21442;&#65292;&#36820;&#22238;&#19979;&#38754;&#35268;&#33539;&#35201;&#27714;&#30340;&#20540;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#22240;&#27492;&#65292;&#23436;&#25972;&#30340;&#23454;&#29616;&#26159;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">proc?</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">proc?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure?</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">procedure</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{Exp} \times \mathit{Env} \to \mathit{Proc}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#23450;&#20041;&#30340;&#20989;&#25968; <span class="stt">proc?</span> &#19981;&#23436;&#20840;&#20934;&#30830;&#65292;&#22240;&#20026;&#19981;&#26159;&#27599;&#20010; Scheme &#36807;&#31243;&#37117;&#33021;&#20316;&#20026;&#25105;&#20204;&#35821;&#35328;&#20013;
&#30340;&#36807;&#31243;&#12290;&#25105;&#20204;&#38656;&#35201;&#23427;&#65292;&#21482;&#26159;&#20026;&#20102;&#23450;&#20041;&#25968;&#25454;&#31867;&#22411; <span class="stt">expval</span>&#12290;
<a name="(idx._(gentag._433))"></a>
<a name="(idx._(gentag._434))"></a></p></blockquote><p><a name="(idx._(gentag._435))"></a>
<a name="(idx._(gentag._436))"></a>
&#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#29992;<a href="#%28part._s2..2..2%29" data-pltdoc="x">&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</a>&#37027;&#26679;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">proc?</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">procedure</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{Exp} \times \mathit{Env} \to \mathit{Proc}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._437))"></a>
&#36825;&#20123;&#25968;&#25454;&#32467;&#26500;&#24120;&#31216;&#20026;<span class="emph">&#38381;&#21253;</span> (<span class="emph">closure</span>)&#65292;&#22240;&#20026;&#23427;&#20204;&#33258;&#32473;&#33258;&#36275;&#65292;&#21253;&#21547;&#36807;&#31243;&#35843;&#29992;&#25152;&#38656;&#35201;&#30340;
&#19968;&#20999;&#12290;&#26377;&#26102;&#65292;&#25105;&#20204;&#35828;&#36807;&#31243;<span class="emph">&#38381;&#21512;&#20110;</span> (<span class="emph">closed over</span>, <span class="emph">closed in</span>) &#21019;&#24314;&#26102;&#30340;&#29615;&#22659;&#12290;</p><p>&#26174;&#28982;&#65292;&#36825;&#20123;&#23454;&#29616;&#37117;&#28385;&#36275;&#36807;&#31243;&#25509;&#21475;&#30340;&#23450;&#20041;&#12290;</p><p>&#19981;&#35770;&#21738;&#31181;&#23454;&#29616;&#65292;&#25105;&#20204;&#37117;&#35201;&#32473;&#25968;&#25454;&#31867;&#22411; <span class="stt">expval</span> &#28155;&#21152;&#21464;&#20307;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-val</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-val?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">proc?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#21516;&#26102;&#32473; <span class="stt">value-of</span> &#28155;&#21152;&#20004;&#26465;&#26032;&#35821;&#21477;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arg</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-procedure</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#35760;&#20303;&#65306;&#19968;&#23450;&#35201;&#32473;&#35821;&#35328;&#30340;&#27599;&#20010;&#25193;&#23637;&#20889;&#20986;&#35268;&#33539;&#12290;&#21442;&#35265;ex-note&#30340;&#35828;&#26126;&#12290;
<a name="(idx._(gentag._438))"></a>
<a name="(idx._(gentag._439))"></a>
<a name="(idx._(gentag._440))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..19)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._441))"></a>
<a name="(idx._(gentag._442))"></a>
&#22312;&#24456;&#22810;&#35821;&#35328;&#20013;&#65292;&#36807;&#31243;&#21019;&#24314;&#21644;&#21629;&#21517;&#24517;&#39035;&#21516;&#26102;&#36827;&#34892;&#12290;&#20462;&#25913;&#26412;&#33410;&#30340;&#35821;&#35328;&#65292;&#29992; <span class="stt">letproc</span> &#26367;&#25442;
<span class="stt">proc</span>&#65292;&#20197;&#25903;&#25345;&#27492;&#24615;&#36136;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..20)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._443))"></a>
<a name="(idx._(gentag._444))"></a>
&#22312;PROC&#20013;&#65292;&#36807;&#31243;&#21482;&#33021;&#26377;&#19968;&#20010;&#21442;&#25968;&#65292;&#20294;&#26159;&#21487;&#20197;&#29992;&#36820;&#22238;&#20854;&#20182;&#36807;&#31243;&#30340;&#36807;&#31243;&#26469;&#27169;&#25311;&#22810;&#21442;&#25968;&#36807;&#31243;&#12290;&#20363;&#22914;&#65292;
&#21487;&#20197;&#20889;&#20986;&#36825;&#26679;&#30340;&#20195;&#30721;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let f = proc (x) proc (y) ...</span></p></td></tr><tr><td><p><span class="stt">in ((f 3) 4)</span></p></td></tr></table></blockquote><p>&#36825;&#20010;&#23567;&#25216;&#24039;&#21483;&#20570;<a name="(elem._curry)"></a><span class="emph">&#21654;&#21737;&#21270;</span> (<span class="emph">Currying</span>)&#65292;&#35813;&#36807;&#31243;&#21017;
&#31216;&#20316;<span class="emph">&#21654;&#21937;&#24335;</span> (<span class="emph">Curried</span>) &#30340;&#12290;&#20889;&#20986;&#19968;&#20010;&#21654;&#21937;&#24335;&#30340;&#36807;&#31243;&#65292;&#23427;&#21462;&#20004;&#20010;&#21442;&#25968;&#65292;&#36820;&#22238;
&#20108;&#32773;&#20043;&#21644;&#12290;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#21487;&#20197;&#25226; <span class="texMathInline">x+y</span> &#20889;&#25104; <span class="stt">-(x,-(0,y))</span>&#12290;</p><p><a name="(idx._(gentag._445))"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..21)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#26412;&#33410;&#30340;&#35821;&#35328;&#65292;&#28155;&#21152;&#22810;&#21442;&#25968;&#36807;&#31243;&#21450;&#20854;&#35843;&#29992;&#65292;&#35821;&#27861;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">proc (</span><span class="Iidentity">\{\mathit{Identifier}\}^{*(,)}</span><span class="stt">) </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
\mathit{Expression} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\mathit{\{Expression\}^{*}}</span><span class="stt">)</span>\end{align*}</span>
<a name="(idx._(gentag._446))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..22)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#26412;&#33410;&#30340;&#20869;&#32622;&#25805;&#20316;&#65288;&#22914;&#24046;&#20540;&#65289;&#21644;&#36807;&#31243;&#35843;&#29992;&#20351;&#29992;&#19981;&#21516;&#30340;&#20855;&#20307;&#35821;&#27861;&#12290;&#20462;&#25913;&#20855;&#20307;&#35821;&#27861;&#65292;&#19981;&#35201;&#35753;&#35821;&#35328;&#30340;
&#29992;&#25143;&#21306;&#20998;&#21738;&#20123;&#26159;&#20869;&#32622;&#25805;&#20316;&#65292;&#21738;&#20123;&#26159;&#33258;&#23450;&#20041;&#30340;&#36807;&#31243;&#12290;&#26681;&#25454;&#25152;&#20351;&#29992;&#30340;&#35299;&#26512;&#25216;&#26415;&#65292;&#36825;&#36947;&#32451;&#20064;&#21487;&#33021;&#24456;
&#23481;&#26131;&#65292;&#20063;&#21487;&#33021;&#38750;&#24120;&#38590;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..23)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._447))"></a>
<a name="(idx._(gentag._448))"></a>
&#19979;&#38754;&#30340;PROC&#31243;&#24207;&#20540;&#26159;&#20160;&#20040;&#65311;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let makemult = proc (maker)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -(((maker maker) -(x,1)), -4)</span></p></td></tr><tr><td><p><span class="stt">in let times4 = proc (x) ((makemult makemult) x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (times4 3)</span></p></td></tr></table></blockquote><p>&#29992;&#36825;&#20010;&#31243;&#24207;&#37324;&#30340;&#23567;&#25216;&#24039;&#20889;&#20986;PROC&#38454;&#20056;&#36807;&#31243;&#12290;&#25552;&#31034;&#65306;&#20320;&#21487;&#20197;&#20351;&#29992;<a href="#%28elem._curry%29" data-pltdoc="x">&#21654;
&#21937;&#21270;</a>&#65288;ex3.20&#65289;&#23450;&#20041;&#21452;&#21442;&#25968;&#36807;&#31243; <span class="stt">times</span>&#12290;
<a name="(idx._(gentag._449))"></a>
<a name="(idx._(gentag._450))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..24)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._451))"></a>
<a name="(idx._(gentag._452))"></a>
&#29992;&#19978;&#36848;&#31243;&#24207;&#37324;&#30340;&#23567;&#25216;&#24039;&#20889;&#20986;ex3.32 &#20013;&#30340;&#20114;&#36882;&#24402;&#31243;&#24207; <span class="stt">odd</span> &#21644; <span class="stt">even</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..25)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._453))"></a>
&#25552;&#28860;&#19978;&#36848;&#32451;&#20064;&#20013;&#30340;&#25216;&#24039;&#65292;&#29992;&#23427;&#22312; PROC &#20013;&#23450;&#20041;&#20219;&#24847;&#36882;&#24402;&#36807;&#31243;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#20195;&#30721;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let makerec = proc (f)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let d = proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (z) ((f (x x)) z)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in proc (n) ((f (d d)) n)</span></p></td></tr><tr><td><p><span class="stt">in let maketimes4 = proc (f)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((f -(x,1)), -4)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let times4 = (makerec maketimes4)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (times4 3)</span></p></td></tr></table></blockquote><p>&#35777;&#26126;&#23427;&#36820;&#22238;12&#12290;
<a name="(idx._(gentag._454))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._455))"></a>
<a name="(idx._(gentag._456))"></a>
&#25105;&#20204;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#36807;&#31243;&#26102;&#65292;&#22312;&#38381;&#21253;&#20013;&#35760;&#24405;&#20102;&#25972;&#20010;&#29615;&#22659;&#12290;&#20294;&#26159;&#26174;&#28982;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#33258;&#30001;&#21464;&#37327;&#30340;
&#32465;&#23450;&#12290;&#20462;&#25913;&#36807;&#31243;&#30340;&#34920;&#31034;&#65292;&#21482;&#20445;&#30041;&#33258;&#30001;&#21464;&#37327;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..27)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#35821;&#35328;&#28155;&#21152;&#21478;&#19968;&#31181;&#36807;&#31243; <span class="stt">traceproc</span>&#12290;<span class="stt">traceproc</span> &#31867;&#20284; <span class="stt">proc</span>&#65292;&#20294;&#20250;&#22312;&#20837;&#21475;&#21644;
&#20986;&#21475;&#22788;&#25171;&#21360;&#36319;&#36394;&#28040;&#24687;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..28)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._457))"></a>
<a name="(idx._(gentag._458))"></a>
<a name="(idx._(gentag._459))"></a>
<a name="(idx._(gentag._460))"></a>
<a name="(idx._(gentag._461))"></a>
<a name="(idx._(gentag._462))"></a>
&#35774;&#35745;&#36807;&#31243;&#30340;&#21478;&#19968;&#31181;&#26041;&#27861;&#26159;<span class="emph">&#21160;&#24577;&#32465;&#23450;</span> (<span class="emph">dynamic binding</span>)&#65288;&#25110;&#31216;<span class="emph">&#21160;&#24577;&#23450;&#30028;</span> (<span class="emph">dynamic
scoping</span>)&#65289;&#65306;&#27714;&#20540;&#36807;&#31243;&#20027;&#20307;&#30340;&#29615;&#22659;&#30001;&#35843;&#29992;&#22788;&#30340;&#29615;&#22659;&#25193;&#23637;&#32780;&#24471;&#12290;&#20363;&#22914;&#65292;&#22312;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let a = 3</span></p></td></tr><tr><td><p><span class="stt">in let p = proc (x) -(x,a)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">a = 5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(a, (p 2))</span></p></td></tr></table></blockquote><p>&#20013;&#65292;&#36807;&#31243;&#20027;&#20307;&#20869;&#30340; <span class="stt">a</span> &#32465;&#23450;&#21040; 5&#65292;&#32780;&#19981;&#26159; 3&#12290;&#20462;&#25913;&#35821;&#35328;&#65292;&#20351;&#29992;&#21160;&#24577;&#32465;&#23450;&#12290;&#20570;&#20004;&#27425;&#65292;&#19968;&#27425;
&#29992;&#36807;&#31243;&#34920;&#31034;&#27861;&#34920;&#31034;&#36807;&#31243;&#65292;&#19968;&#27425;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#12290;
<a name="(idx._(gentag._463))"></a>
<a name="(idx._(gentag._464))"></a>
<a name="(idx._(gentag._465))"></a>
<a name="(idx._(gentag._466))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..29)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#24456;&#19981;&#24184;&#30340;&#26159;&#65292;&#20351;&#29992;&#21160;&#24577;&#32465;&#23450;&#30340;&#31243;&#24207;&#24456;&#21487;&#33021;&#24322;&#24120;&#26214;&#28073;&#12290;&#20363;&#22914;&#65292;&#22312;&#35789;&#27861;&#32465;&#23450;&#20013;&#65292;&#25209;&#37327;&#26367;&#25442;&#36807;&#31243;&#30340;
&#32465;&#23450;&#21464;&#37327;&#65292;&#20915;&#19981;&#20250;&#25913;&#21464;&#31243;&#24207;&#30340;&#34892;&#20026;&#65306;&#25105;&#20204;&#29978;&#33267;&#21487;&#20197;&#20687;<a href="#%28part._s3..6%29" data-pltdoc="x">&#28040;&#38500;&#21464;&#37327;&#21517;</a>&#37027;&#26679;&#65292;&#21024;&#38500;&#25152;&#26377;&#21464;&#37327;&#65292;
&#23558;&#23427;&#20204;&#26367;&#25442;&#20026;&#35789;&#27861;&#22320;&#22336;&#12290;&#20294;&#22312;&#21160;&#24577;&#32465;&#23450;&#20013;&#65292;&#36825;&#31181;&#36716;&#25442;&#23601;&#21361;&#38505;&#20102;&#12290;</p><p>&#20363;&#22914;&#65292;&#22312;&#21160;&#24577;&#32465;&#23450;&#20013;&#65292;&#36807;&#31243; <span class="stt">proc (z) a</span> &#36820;&#22238;&#35843;&#29992;&#32773;&#29615;&#22659;&#20013;&#30340;&#21464;&#37327; <span class="stt">a</span>&#12290;&#37027;&#20040;&#31243;&#24207;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let a = 3</span></p></td></tr><tr><td><p><span class="stt">in let p = proc (z) a</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let f = proc (x) (p 0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let a = 5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (f 2)</span></p></td></tr></table></blockquote><p>&#36820;&#22238; 5&#65292;&#22240;&#20026;&#35843;&#29992;&#22788; <span class="stt">a</span> &#30340;&#20540;&#20026; 5&#12290;&#22914;&#26524; <span class="stt">f</span> &#30340;&#24418;&#21442;&#20026; <span class="stt">a</span> &#21602;&#65311;
<a name="(idx._(gentag._467))"></a>
<a name="(idx._(gentag._468))"></a></p></blockquote><h4 class="heading">3.4<tt>&nbsp;</tt><a name="(part._s3..4)"></a>LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;<span class="button-group"><a href="#(part._s3..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._469))"></a>
<a name="(idx._(gentag._470))"></a>
<a name="(idx._(gentag._471))"></a>
&#29616;&#22312;&#25105;&#20204;&#26469;&#23450;&#20041;&#25903;&#25345;&#36882;&#24402;&#30340;&#26032;&#35821;&#35328; LETREC&#12290;&#22240;&#20026;&#25105;&#20204;&#30340;&#35821;&#35328;&#21482;&#26377;&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#25152;&#20197;&#25105;&#20204;&#38477;
&#20302;&#38590;&#24230;&#65292;&#21482;&#35753; <span class="stt">letrec</span> &#34920;&#36798;&#24335;&#22768;&#26126;&#19968;&#20010;&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec double (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if zero?(x) then 0 else -((double -(x,1)), -2)</span></p></td></tr><tr><td><p><span class="stt">in (double 6)</span></p></td></tr></table></blockquote><p>&#36882;&#24402;&#22768;&#26126;&#30340;&#24038;&#36793;&#26159;&#36882;&#24402;&#36807;&#31243;&#30340;&#21517;&#23383;&#21644;&#32465;&#23450;&#21464;&#37327;&#65292;<span class="stt">=</span> &#21491;&#36793;&#26159;&#36807;&#31243;&#20027;&#20307;&#65292;&#20854;&#29983;&#25104;&#24335;&#20026;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">letrec </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) = </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> in </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">letrec-exp (p-name b-var p-body letrec-body)</span>}\end{align*}</span></p></blockquote><p><span class="stt">letrec</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#26159;&#20854;&#20027;&#20307;&#30340;&#20540;&#65292;&#22312;&#31526;&#21512;&#26399;&#26395;&#34892;&#20026;&#30340;&#29615;&#22659;&#20013;&#27714;&#20986;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(letrec-exp </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">letrec\mbox{-}body</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">letrec\mbox{-}body</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env-rec </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._472))"></a>
&#36825;&#37324;&#65292;&#25105;&#20204;&#32473;&#29615;&#22659;&#25509;&#21475;&#26032;&#22686;&#19968;&#20010;&#36807;&#31243; <span class="stt">extend-env-rec</span>&#12290;&#20294;&#25105;&#20204;&#20173;&#28982;&#24471;&#22238;&#31572;&#36825;&#20010;&#38382;&#39064;&#65306;
<span class="stt">(extend-env-rec </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"> </span><span class="texMathInline">bound\mbox{-}var</span><span class="stt">
</span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &#30340;&#26399;&#26395;&#34892;&#20026;&#26159;&#20160;&#20040;&#65311;</p></blockquote><p><a name="(idx._(gentag._473))"></a>
&#25105;&#20204;&#23450;&#20041;&#35813;&#29615;&#22659;&#30340;&#34892;&#20026;&#22914;&#19979;&#65306;&#35774; <span class="texMathInline">\rho_1</span> &#20026; <span class="stt">(extend-env-rec</span><span class="stt">
</span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"> </span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"> </span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &#20135;&#29983;&#30340;
&#29615;&#22659;&#12290;&#37027;&#20040; <span class="stt">(apply-env </span><span class="texMathInline">\rho_1</span><span class="stt"> </span><span class="texMathInline">var</span><span class="stt">)</span> &#24212;&#36820;&#22238;&#20160;&#20040;&#65311;</p><ol><li><p>&#22914;&#26524;&#21464;&#37327; <span class="texMathInline">var</span> &#19982; <span class="texMathInline">proc\mbox{-}name</span> &#30456;&#21516;&#65292;&#37027;&#20040; <span class="stt">(apply-env</span><span class="stt">
</span><span class="texMathInline">\rho_1</span><span class="stt"> </span><span class="texMathInline">var</span><span class="stt">)</span> &#24212;&#36820;&#22238;&#19968;&#20010;&#38381;&#21253;&#65292;&#20854;&#32465;&#23450;&#21464;&#37327;&#20026; <span class="texMathInline">bound\mbox{-}var</span>&#65292;&#20027;&#20307;&#20026;
<span class="texMathInline">proc\mbox{-}body</span>&#65292;&#29615;&#22659;&#20026;&#32465;&#23450; <span class="texMathInline">proc\mbox{-}name</span> &#26102;&#25152;&#22312;&#30340;&#29615;&#22659;&#12290;&#32780;&#25105;&#20204;&#24050;&#32463;
&#26377;&#36825;&#20010;&#29615;&#22659;&#20102;&#65306;&#23601;&#26159; <span class="texMathInline">\rho_1</span>&#65281;&#25152;&#20197;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-env </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}name</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (proc-val (procedure </span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_1</span><span class="stt">))</span></p></td></tr></table></blockquote></li><li><p>&#22914;&#26524; <span class="texMathInline">var</span> &#19982; <span class="texMathInline">proc\mbox{-}name</span> &#19981;&#21516;&#65292;&#37027;&#20040;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-env </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">var</span><span class="stt">) = (apply-env </span><span class="texMathInline">\rho</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">var</span><span class="stt">)</span></p></td></tr></table></blockquote></li></ol><p> &#21644; fig-3.11 &#23637;&#31034;&#20102;&#19968;&#20010;&#20363;&#23376;&#12290;
 &#30340;&#26368;&#21518;&#19968;&#34892;&#36882;&#24402;&#35843;&#29992; <span class="stt">double</span>&#65292;&#25214;&#20986;&#20102;&#21407;&#26469;&#30340; <span class="stt">double</span>&#65292;
&#27491;&#21512;&#25152;&#24895;&#12290;</p><p>&#28385;&#36275;&#36825;&#20123;&#35201;&#27714;&#30340;&#20219;&#20309;&#26041;&#27861;&#37117;&#33021;&#22815;&#29992;&#26469;&#23454;&#29616; <span class="stt">extend-env-rec</span>&#12290;&#36825;&#37324;&#25105;&#20204;&#20351;&#29992;&#23545;&#24212;&#20110;&#25277;&#35937;
&#35821;&#27861;&#34920;&#31034;&#30340;&#26041;&#27861;&#12290;&#32451;&#20064;&#35752;&#35770;&#20102;&#20854;&#20182;&#23454;&#29616;&#31574;&#30053;&#12290;</p><p>&#22914;&#65292;&#22312;&#25277;&#35937;&#35821;&#27861;&#34920;&#31034;&#20013;&#65292;&#25105;&#20204;&#20026; <span class="stt">extend-env-rec</span> &#26032;&#22686;&#19968;&#31181;&#21464;
&#20307;&#12290;<span class="stt">apply-env</span> &#20498;&#25968;&#31532;&#20108;&#34892;&#30340; <span class="stt">env</span> &#23545;&#24212;&#19978;&#36848; <span class="texMathInline">\rho_1</span>&#12290;
<a name="(idx._(gentag._474))"></a></p><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of &lt;&lt;letrec double(x) = if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((double -(x,1)), -2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (double 6)&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of &lt;&lt;(double 6)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env-rec double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;double&gt;&gt; (extend-env-rec double x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;6&gt;&gt; (extend-env-rec double x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;double&gt;&gt; (extend-env-rec double x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(x) ...&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">](extend-env-rec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;(double -(x,1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">](extend-env-rec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-2)</span></p></td></tr></table><blockquote class="caption"><p><span class="stt">extend-env-rec</span> &#35745;&#31639;&#36807;&#31243;<a name="(elem._fig-3..10)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;double&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">](extend-env-rec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;(double -(x,1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">](extend-env-rec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(procedure x &lt;&lt;if zero?(x) ...&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env-rec double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= ...</span></p></td></tr></table></div></p><blockquote class="caption"><p><span class="stt">extend-env-rec</span> &#35745;&#31639;&#36807;&#31243;&#65292;&#32493;<a name="(elem._fig-3..11)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">environment</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">expval?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">environment</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-binding-found</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-var</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-var</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">saved-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#21521;&#29615;&#22659;&#28155;&#21152; <span class="stt">extend-env-rec</span><a name="(elem._fig-3..12)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._475))"></a>
<a name="(idx._(gentag._476))"></a>
<a name="(idx._(gentag._477))"></a>
<a name="(idx._(gentag._478))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex3..30)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><span class="stt">apply-env</span> &#20498;&#25968;&#31532;&#20108;&#34892;&#35843;&#29992; <span class="stt">proc-val</span> &#30340;&#30446;&#30340;&#26159;&#20160;&#20040;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..31)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._479))"></a>
&#25193;&#23637;&#19978;&#38754;&#30340;&#35821;&#35328;&#65292;&#20801;&#35768;&#22768;&#26126;&#20219;&#24847;&#25968;&#37327;&#21442;&#25968;&#30340;&#36807;&#31243;&#65292;&#20687;ex3.21 &#37027;&#26679;&#12290;
<a name="(idx._(gentag._480))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..32)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._481))"></a>
<a name="(idx._(gentag._482))"></a>
<a name="(idx._(gentag._483))"></a>
&#25193;&#23637;&#19978;&#38754;&#30340;&#35821;&#35328;&#65292;&#20801;&#35768;&#22768;&#26126;&#20219;&#24847;&#25968;&#37327;&#30340;&#21333;&#21442;&#25968;&#20114;&#36882;&#24402;&#36807;&#31243;&#65292;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">even(x) = if zero?(x) then 1 else (odd -(x,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">odd(x)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">= if zero?(x) then 0 else (even -(x,1))</span></p></td></tr><tr><td><p><span class="stt">in (odd 13)</span></p></td></tr></table></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..33)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._484))"></a>
&#25193;&#23637;&#19978;&#38754;&#30340;&#35821;&#35328;&#65292;&#20801;&#35768;&#22768;&#26126;&#20219;&#24847;&#25968;&#37327;&#30340;&#20114;&#36882;&#24402;&#36807;&#31243;&#65292;&#27599;&#20010;&#36807;&#31243;&#30340;&#21442;&#25968;&#25968;&#37327;&#20063;&#20219;&#24847;&#65292;&#23601;
&#20687;ex3.21 &#37027;&#26679;&#12290;
<a name="(idx._(gentag._485))"></a>
<a name="(idx._(gentag._486))"></a>
<a name="(idx._(gentag._487))"></a>
<a name="(idx._(gentag._488))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..34)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._489))"></a>
<a name="(idx._(gentag._490))"></a>
&#29992;<a href="#%28part._s2..2..3%29" data-pltdoc="x">&#36807;&#31243;&#34920;&#31034;&#27861;</a>&#20013;&#29615;&#22659;&#30340;&#36807;&#31243;&#34920;&#31034;&#27861;&#23454;&#29616; <span class="stt">extend-env-rec</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..35)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._491))"></a>
<a name="(idx._(gentag._492))"></a>
&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#30475;&#21040;&#30340;&#34920;&#31034;&#27861;&#37117;&#24456;&#20302;&#25928;&#65292;&#22240;&#20026;&#27599;&#27425;&#26597;&#25214;&#36807;&#31243;&#26102;&#65292;&#23427;&#20204;&#37117;&#35201;&#26032;&#21019;&#24314;&#19968;&#20010;&#38381;&#21253;&#65292;
&#20294;&#27599;&#27425;&#30340;&#38381;&#21253;&#37117;&#30456;&#21516;&#12290;&#25105;&#20204;&#21487;&#20197;&#21482;&#21019;&#24314;&#19968;&#27425;&#38381;&#21253;&#65292;&#25226;&#20540;&#25918;&#20837;&#38271;&#24230;&#20026; 1 &#30340;&#21521;&#37327;&#65292;&#20877;&#23558;&#20854;&#25918;&#20837;
&#19968;&#20010;&#26174;&#24335;&#24490;&#29615;&#32467;&#26500;&#20013;&#65292;&#20687;&#36825;&#26679;&#65306;</p><blockquote class="SCentered"><p><img src="vector-env.svg" alt="vector环境" width="799.2pt" height="174.6pt"/></p></blockquote><p>&#36825;&#37324;&#26159;&#21019;&#24314;&#36825;&#31181;&#25968;&#25454;&#32467;&#26500;&#30340;&#20195;&#30721;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-env-rec</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-names</span><span class="hspace">&nbsp;</span><span class="RktSym">b-vars</span><span class="hspace">&nbsp;</span><span class="RktSym">bodies</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">vec</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-vector</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktSym">p-names</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">p-names</span><span class="hspace">&nbsp;</span><span class="RktSym">vec</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vector-set!</span><span class="hspace">&nbsp;</span><span class="RktSym">vec</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20462;&#25913;&#29615;&#22659;&#25968;&#25454;&#31867;&#22411;&#21644; <span class="stt">apply-env</span> &#30340;&#23450;&#20041;&#65292;&#23436;&#25104;&#36825;&#31181;&#34920;&#31034;&#30340;&#23454;&#29616;&#12290;&#30830;&#20445;
<span class="stt">apply-env</span> &#24635;&#26159;&#36820;&#22238;&#34920;&#36798;&#20540;&#12290;
<a name="(idx._(gentag._493))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..36)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._494))"></a>
<a name="(idx._(gentag._495))"></a>
<a name="(idx._(gentag._496))"></a>
&#25193;&#23637;&#36825;&#31181;&#23454;&#29616;&#65292;&#22788;&#29702;ex3.32 &#20013;&#30340;&#35821;&#35328;&#12290;
<a name="(idx._(gentag._497))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..37)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._498))"></a>
<a name="(idx._(gentag._499))"></a>
<a name="(idx._(gentag._500))"></a>
<a name="(idx._(gentag._501))"></a>
&#20351;&#29992;&#21160;&#24577;&#32465;&#23450;&#65288;ex3.28&#65289;&#65292;&#19981;&#38656;&#35201;&#20219;&#20309;&#29305;&#27530;&#26426;&#21046;&#65292;&#38752; <span class="stt">let</span> &#23601;&#33021;&#21019;&#24314;
&#36882;&#24402;&#36807;&#31243;&#12290;&#36825;&#26159;&#20986;&#20110;&#21382;&#21490;&#20852;&#36259;&#12290;&#22312;&#26089;&#24180;&#30340;&#32534;&#31243;&#35821;&#35328;&#35774;&#35745;&#20013;&#65292;<a href="#%28part._s3..4%29" data-pltdoc="x">LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</a>&#35752;&#35770;&#30340;&#37027;&#20123;&#26041;&#27861;
&#36824;&#40092;&#20026;&#20154;&#30693;&#12290;&#35201;&#39564;&#35777;&#21160;&#24577;&#32465;&#23450;&#23454;&#29616;&#30340;&#36882;&#24402;&#65292;&#35797;&#35797;&#31243;&#24207;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let fact = proc (n) add1(n)</span></p></td></tr><tr><td><p><span class="stt">in let fact = proc (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else *(n, (fact -(n,1)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (fact 5)</span></p></td></tr></table></blockquote><p>&#35797;&#35797;&#35789;&#27861;&#32465;&#23450;&#65292;&#20877;&#35797;&#35797;&#21160;&#24577;&#32465;&#23450;&#12290;&#29992;&#21160;&#24577;&#32465;&#23450;&#30340;&#34987;&#23450;&#35821;&#35328;&#20889;&#20986;<a href="#%28part._s3..4%29" data-pltdoc="x">LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</a>&#20013;&#30340;&#20114;&#36882;&#24402;&#36807;
&#31243; <span class="stt">even</span> &#21644; <span class="stt">odd</span>&#12290;
<a name="(idx._(gentag._502))"></a>
<a name="(idx._(gentag._503))"></a>
<a name="(idx._(gentag._504))"></a>
<a name="(idx._(gentag._505))"></a>
<a name="(idx._(gentag._506))"></a>
<a name="(idx._(gentag._507))"></a>
<a name="(idx._(gentag._508))"></a></p></blockquote><h4 class="heading">3.5<tt>&nbsp;</tt><a name="(part._s3..5)"></a>&#23450;&#30028;&#21644;&#21464;&#37327;&#32465;&#23450;<span class="button-group"><a href="#(part._s3..5)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._509))"></a>
<a name="(idx._(gentag._510))"></a>
<a name="(idx._(gentag._511))"></a>
<a name="(idx._(gentag._512))"></a>
<a name="(idx._(gentag._513))"></a>
&#25105;&#20204;&#24050;&#32463;&#22312;&#24456;&#22810;&#22320;&#26041;&#35265;&#21040;&#36807;&#21464;&#37327;&#30340;&#22768;&#26126;&#21644;&#20351;&#29992;&#65292;&#29616;&#22312;&#25105;&#20204;&#26469;&#31995;&#32479;&#35752;&#35770;&#36825;&#20123;&#24605;&#24819;&#12290;</p><p>&#22312;&#22823;&#22810;&#25968;&#32534;&#31243;&#35821;&#35328;&#20013;&#65292;&#21464;&#37327;&#21482;&#33021;&#20197;&#20004;&#31181;&#26041;&#24335;&#20986;&#29616;&#65306;<span class="emph">&#24341;&#29992;</span> (<span class="emph">reference</span>)
&#25110;<span class="emph">&#22768;&#26126;</span> (<span class="emph">declaration</span>)&#12290;&#21464;&#37327;&#24341;&#29992;&#23601;&#26159;&#20351;&#29992;&#21464;&#37327;&#12290;&#20363;&#22914;&#65292;&#22312; Scheme &#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20013;&#20986;&#29616;&#30340;&#21464;&#37327; <span class="stt">f</span>&#12289;<span class="stt">x</span> &#21644; <span class="stt">y</span> &#22343;&#20026;&#24341;&#29992;&#12290;&#20294;&#22312;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#25110;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20013;&#65292;&#31532;&#19968;&#20010;&#20986;&#29616;&#30340; <span class="stt">x</span> &#26159;&#22768;&#26126;&#65306;&#24341;&#20837;&#19968;&#20010;&#21464;&#37327;&#65292;&#20316;&#20026;&#26576;&#20010;&#20540;&#30340;&#21517;&#23383;&#12290;&#22312; <span class="stt">lambda</span>
&#34920;&#36798;&#24335;&#20013;&#65292;&#21464;&#37327;&#30340;&#20540;&#22312;&#36807;&#31243;&#35843;&#29992;&#26102;&#25552;&#20379;&#12290;&#22312; <span class="stt">let</span> &#34920;&#36798;&#24335;&#20013;&#65292;&#21464;&#37327;&#30340;&#20540;&#30001;&#34920;&#36798;&#24335;
<span class="stt">(+ y z)</span> &#27714;&#24471;&#12290;</p></blockquote><p>&#25105;&#20204;&#35828;&#21464;&#37327;&#24341;&#29992;&#30001;&#23545;&#24212;&#30340;&#22768;&#26126;<span class="emph">&#32465;&#23450;</span> (<span class="emph">bound</span>)&#65292;&#19988;<span class="emph">&#32465;&#23450;</span>&#21040;&#23427;&#30340;&#20540;&#12290;
&#22312;<a href="#%28part._s1..2..4%29" data-pltdoc="x"><span class="stt">occurs-free?</span></a>&#65292;&#25105;&#20204;&#24050;&#32463;&#35265;&#36807;&#29992;&#22768;&#26126;&#32465;&#23450;&#21464;&#37327;&#30340;&#20363;&#23376;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="simple-contour.svg" alt="简单等深线" width="535.5pt" height="198.0pt"/></p></blockquote></div></p><blockquote class="caption"><p>&#31616;&#21333;&#31561;&#28145;&#32447;<a name="(elem._fig-3..13)"></a></p></blockquote></blockquote><p>&#22823;&#22810;&#25968;&#32534;&#31243;&#35821;&#35328;&#20013;&#30340;&#22768;&#26126;&#37117;&#26377;&#26377;&#38480;&#30340;&#20316;&#29992;&#22495;&#65292;&#25152;&#20197;&#21516;&#19968;&#20010;&#21464;&#37327;&#21517;&#22312;&#31243;&#24207;&#30340;&#19981;&#21516;&#37096;&#20998;&#21487;&#29992;&#20110;&#19981;
&#21516;&#30340;&#30446;&#30340;&#12290;&#20363;&#22914;&#65292;&#25105;&#20204;&#21453;&#22797;&#25226; <span class="stt">lst</span> &#29992;&#20316;&#32465;&#23450;&#21464;&#37327;&#65292;&#23427;&#30340;&#20316;&#29992;&#22495;&#27599;&#27425;&#37117;&#38480;&#21046;&#22312;&#23545;&#24212;&#30340;
<span class="stt">lambda</span> &#34920;&#36798;&#24335;&#20027;&#20307;&#20869;&#12290;</p><p>&#27599;&#31181;&#32534;&#31243;&#35821;&#35328;&#37117;&#26377;&#19968;&#20123;&#35268;&#21017;&#26469;&#21028;&#26029;&#21508;&#20010;&#21464;&#37327;&#24341;&#29992;&#25351;&#20195;&#21738;&#19968;&#22768;&#26126;&#12290;&#36825;&#20123;&#35268;&#21017;&#36890;&#24120;
&#21483;&#20570;<span class="emph">&#23450;&#30028;</span> (<span class="emph">scoping</span>) &#35268;&#21017;&#12290;&#22768;&#26126;&#22312;&#31243;&#24207;&#20013;&#29983;&#25928;&#30340;&#37096;&#20998;&#21483;&#20570;&#22768;&#26126;
&#30340;<span class="emph">&#20316;&#29992;&#22495;</span> (<span class="emph">scope</span>)&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#19981;&#21152;&#25191;&#34892;&#22320;&#21028;&#26029;&#31243;&#24207;&#20013;&#30340;&#21508;&#20010;&#21464;&#37327;&#24341;&#29992;&#23545;&#24212;&#20110;&#21738;&#20010;&#22768;&#26126;&#12290;&#36825;&#26679;&#30340;&#24615;&#36136;&#19981;&#24517;&#25191;&#34892;&#31243;&#24207;
&#23601;&#33021;&#35745;&#31639;&#20986;&#26469;&#65292;&#21517;&#20026;<span class="emph">&#38745;&#24577;</span> (<span class="emph">static</span>) &#24615;&#36136;&#12290;
<a name="(idx._(gentag._514))"></a></p><p>&#35201;&#25214;&#20986;&#26576;&#20010;&#21464;&#37327;&#24341;&#29992;&#23545;&#24212;&#20110;&#21738;&#19968;&#22768;&#26126;&#65292;&#25105;&#20204;<span class="emph">&#21521;&#22806;</span> (<span class="emph">outward</span>) &#26597;&#25214;&#65292;&#30452;&#21040;&#25214;
&#20986;&#21464;&#37327;&#30340;&#22768;&#26126;&#12290;&#36825;&#37324;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340; Scheme &#31034;&#20363;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(let ((x 3)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="emph">&#31216;&#20043;&#20026; <span class="stt">x1</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(y 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(+ (let ((x</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="emph">&#31216;&#20043;&#20026; <span class="stt">x2</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(+ y 5)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(* x y))</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="emph">&#36825;&#20010; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x2</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">x))</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="emph">&#36825;&#20010; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x1</span></span></p></td></tr></table></blockquote><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#20869;&#23618;&#30340; <span class="stt">x</span> &#32465;&#23450;&#21040; 9&#65292;&#25152;&#20197;&#34920;&#36798;&#24335;&#30340;&#20540;&#20026;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(let ((x 3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(y 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(+ (let ((x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(+ y 5)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(* x y))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">x))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (+ (let ((x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(+ 4 5)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(* x 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (+ (let ((x 9))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(* x 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (+ 36</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= 39</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._515))"></a>
&#36825;&#26679;&#30340;&#23450;&#30028;&#35268;&#21017;&#21483;&#20570;<span class="emph">&#35789;&#27861;&#23450;&#30028;</span> (<span class="emph">lexical scoping</span>) &#35268;&#21017;&#65292;&#36825;&#26679;&#22768;&#26126;&#30340;&#21464;&#37327;
&#21483;&#20570;<span class="emph">&#35789;&#27861;&#21464;&#37327;</span> (<span class="emph">lexical variable</span>)&#12290;
<a name="(idx._(gentag._516))"></a>
<a name="(idx._(gentag._517))"></a></p><p>&#20351;&#29992;&#35789;&#27861;&#23450;&#30028;&#65292;&#25105;&#20204;&#21487;&#20197;&#37325;&#26032;&#22768;&#26126;&#19968;&#20010;&#21464;&#37327;&#65292;&#32473;&#20316;&#29992;&#22495;&#25139;&#20010;&#8220;&#27934;
&#8221;&#12290;&#36825;&#26679;&#30340;&#20869;&#23618;&#22768;&#26126;<span class="emph">&#36974;&#34109;</span> (<span class="emph">shadow</span>) <a name="(idx._(gentag._518))"></a>
<a name="(idx._(gentag._519))"></a>
&#22806;&#23618;&#22768;&#26126;&#12290; &#20363;&#22914;&#65292;&#22312;&#19978;&#20363;&#30340;&#20056;&#24335; <span class="stt">(* x y)</span> &#20013;&#65292;&#20869;&#23618;&#30340; <span class="stt">x</span> &#36974;&#34109;&#20102;&#22806;&#23618;&#30340;&#12290;</p><p><a name="(idx._(gentag._520))"></a>
&#35789;&#27861;&#20316;&#29992;&#22495;&#26159;&#23884;&#22871;&#24335;&#30340;&#65306;&#27599;&#20010;&#20316;&#29992;&#22495;&#23436;&#20840;&#21253;&#35065;&#22312;&#21478;&#19968;&#20010;&#37324;&#38754;&#12290;&#25105;&#20204;&#29992;<span class="emph">&#31561;&#28145;&#32447;</span> (<span class="emph">contour
diagram</span>) &#35299;&#37322;&#36825;&#28857;&#12290; &#23637;&#31034;&#20102;&#19978;&#20363;&#30340;&#31561;&#28145;&#32447;&#12290;&#27599;&#20010;&#20316;&#29992;&#22495;
&#29992;&#19968;&#20010;&#26694;&#22280;&#36215;&#26469;&#65292;&#31661;&#22836;&#36830;&#25509;&#22768;&#26126;&#19982;&#20854;&#20316;&#29992;&#22495;&#12290;</p><p> &#23637;&#31034;&#20102;&#19968;&#20010;&#26356;&#22797;&#26434;&#30340;&#31243;&#24207;&#21644;&#23427;&#30340;&#31561;&#28145;&#32447;&#12290;&#20854;&#20013;&#30340;&#31532; 5 &#34892;&#12289;&#31532; 7 &#34892;
&#21644;&#31532; 8 &#34892;&#65292;&#34920;&#36798;&#24335; <span class="stt">(+ x y z)</span> &#20986;&#29616;&#20102;&#19977;&#27425;&#12290;&#31532; 5 &#34892;&#22312; <span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;
&#22495;&#20869;&#65292;<span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#22312;
<span class="stt">x1</span> &#21644; <span class="stt">y1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#12290;&#25152;&#20197;&#65292;&#31532;5&#34892;&#30340; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x2</span>&#65292;<span class="stt">y</span> &#25351;&#20195;
<span class="stt">y1</span>&#65292;<span class="stt">z</span> &#25351;&#20195; <span class="stt">z2</span>&#12290;&#31532; 7 &#34892;&#22312; <span class="stt">x4</span> &#21644; <span class="stt">y2</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">x4</span>
&#21644;<span class="stt">y2</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;
&#22312;<span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">x1</span> &#21644; <span class="stt">y1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#12290;&#25152;&#20197;&#65292;&#31532;
7&#34892;&#30340; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x4</span>&#65292;<span class="stt">y</span> &#25351;&#20195; <span class="stt">y2</span>&#65292;<span class="stt">z</span> &#25351;&#20195; <span class="stt">z2</span>&#12290;&#26368;&#21518;&#65292;&#31532; 8
&#34892;&#22312; <span class="stt">x3</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">x3</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;
<span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">x1</span> &#21644;
<span class="stt">y1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#12290;&#25152;&#20197;&#65292;&#31532;8&#34892;&#30340; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x3</span>&#65292;<span class="stt">y</span> &#25351;&#20195; <span class="stt">y1</span>&#65292;
<span class="stt">z</span> &#25351;&#20195;<span class="stt">z2</span>&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCentered"><p><img src="complicated-contour.svg" alt="较复杂的等深线" width="598.5pt" height="213.0pt"/></p></blockquote><blockquote class="caption"><p>&#36739;&#22797;&#26434;&#30340;&#31561;&#28145;&#32447;<a name="(elem._fig-3..14)"></a></p></blockquote></blockquote><p>&#21464;&#37327;&#19982;&#20540;&#30340;&#23545;&#24212;&#20851;&#31995;&#21483;&#20570;<span class="emph">&#32465;&#23450;</span> (<span class="emph">binding</span>)&#12290;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#35268;&#33539;&#26469;&#29702;&#35299;&#22914;&#20309;&#21019;
&#24314;&#32465;&#23450;&#12290;</p><p><a name="(idx._(gentag._521))"></a>
<a name="(idx._(gentag._522))"></a>
&#30001; <span class="stt">proc</span> &#22768;&#26126;&#30340;&#21464;&#37327;&#22312;&#36807;&#31243;&#35843;&#29992;&#26102;&#32465;&#23450;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._523))"></a>
<a name="(idx._(gentag._524))"></a>
<span class="stt">let</span> &#22768;&#26126;&#30340;&#21464;&#37327;&#32465;&#23450;&#21040;&#22768;&#26126;&#21491;&#36793;&#30340;&#20540;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (let-exp </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._525))"></a>
<a name="(idx._(gentag._526))"></a>
<span class="stt">letrec</span> &#22768;&#26126;&#30340;&#21464;&#37327;&#20063;&#35201;&#32465;&#23450;&#21040;&#22768;&#26126;&#21491;&#36793;&#30340;&#20540;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(letrec-exp </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">letrec\mbox{-}body</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">letrec\mbox{-}body</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env-rec </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._527))"></a>
<a name="(idx._(gentag._528))"></a>
<a name="(idx._(gentag._529))"></a>
<a name="(idx._(gentag._530))"></a>
<a name="(idx._(gentag._531))"></a>
&#32465;&#23450;&#30340;<span class="emph">&#26399;&#38480;</span> (<span class="emph">extent</span>) &#25351;&#32465;&#23450;&#20445;&#25345;&#30340;&#26102;&#38271;&#12290;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#23601;&#20687;&#22312;
Scheme &#20013;&#19968;&#26679;&#65292;&#25152;&#26377;&#30340;&#32465;&#23450;&#37117;&#26159;<span class="emph">&#21322;&#26080;&#38480;</span> (<span class="emph">semi-infinite</span>) &#30340;&#65292;&#24847;&#24605;&#26159;&#21464;&#37327;
&#19968;&#26086;&#32465;&#23450;&#65292;&#35813;&#32465;&#23450;&#23601;&#35201;&#65288;&#33267;&#23569;&#26159;&#26377;&#21487;&#33021;&#65289;&#26080;&#38480;&#26399;&#22320;&#20445;&#30041;&#12290;&#36825;&#26159;&#22240;&#20026;&#32465;&#23450;&#21487;&#33021;&#38544;&#34255;&#22312;&#24050;&#36820;&#22238;&#30340;
&#38381;&#21253;&#20043;&#20013;&#12290;&#22312;&#21322;&#26080;&#38480;&#30340;&#35821;&#35328;&#20013;&#65292;&#22403;&#22334;&#22238;&#25910;&#22120;&#25910;&#38598;&#19981;&#33021;&#20877;&#35775;&#38382;&#30340;&#32465;&#23450;&#12290;&#36825;&#21482;&#33021;&#22312;&#36816;&#34892;&#26102;&#21028;&#23450;&#65292;
&#22240;&#27492;&#25105;&#20204;&#35828;&#36825;&#26159;&#19968;&#26465;<span class="emph">&#21160;&#24577;</span> (<span class="emph">dynamic</span>) &#24615;&#36136;&#12290;</p><p>&#24456;&#21487;&#24796;&#30340;&#26159;&#65292;&#8220;&#21160;&#24577;&#8221;&#26377;&#26102;&#34920;&#31034;&#8220;&#22312;&#34920;&#36798;&#24335;&#27714;
&#20540;&#26399;&#38388;&#8221;&#65292;&#26377;&#26102;&#21448;&#34920;&#31034;&#8220;&#26080;&#27861;&#20107;&#20808;&#35745;&#31639;&#8221;&#12290;&#22914;
&#26524;&#25105;&#20204;&#19981;&#20801;&#35768; <span class="stt">let</span> &#30340;&#20540;&#20026;&#36807;&#31243;&#65292;&#37027;&#20040; let &#32465;&#23450;&#20250;&#22312; <span class="stt">let</span> &#20027;&#20307;&#27714;&#20540;&#32467;&#26463;&#26102;&#21040;&#26399;&#12290;
&#36825;&#21483;&#20570;<span class="emph">&#21160;&#24577;</span>&#26399;&#38480;&#65292;&#32780;&#23427;&#26159;&#19968;&#26465;<span class="emph">&#38745;&#24577;</span>&#24615;&#36136;&#12290;
<a name="(idx._(gentag._532))"></a>
&#22240;&#20026;&#36825;&#31181;&#26399;&#38480;&#26159;&#19968;&#26465;&#38745;&#24577;&#24615;&#36136;&#65292;&#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#20934;&#30830;&#39044;&#27979;&#32465;&#23450;&#20309;&#26102;&#21487;&#20197;&#25243;&#24323;&#12290;
ex3.28 &#31561;&#20960;&#36947;&#32451;&#20064;&#20013;&#30340;&#21160;&#24577;&#32465;&#23450;&#34920;&#29616;&#31867;&#20284;&#12290;
<a name="(idx._(gentag._533))"></a>
<a name="(idx._(gentag._534))"></a>
<a name="(idx._(gentag._535))"></a>
<a name="(idx._(gentag._536))"></a>
<a name="(idx._(gentag._537))"></a>
<a name="(idx._(gentag._538))"></a></p><h4 class="heading">3.6<tt>&nbsp;</tt><a name="(part._s3..6)"></a>&#28040;&#38500;&#21464;&#37327;&#21517;<span class="button-group"><a href="#(part._s3..6)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._539))"></a>
<a name="(idx._(gentag._540))"></a>
<a name="(idx._(gentag._541))"></a>
<a name="(idx._(gentag._542))"></a>
<a name="(idx._(gentag._543))"></a>
&#23450;&#30028;&#31639;&#27861;&#30340;&#25191;&#34892;&#36807;&#31243;&#21487;&#20197;&#30475;&#20316;&#22987;&#33258;&#21464;&#37327;&#24341;&#29992;&#30340;&#22806;&#20986;&#26053;&#34892;&#12290;&#22312;&#26053;&#36884;&#20013;&#65292;&#21040;&#36798;&#23545;&#24212;&#30340;&#22768;&#26126;&#20043;&#21069;&#21487;
&#33021;&#20250;&#36328;&#36234;&#22810;&#26465;&#31561;&#28145;&#32447;&#12290;&#36328;&#36234;&#30340;&#31561;&#28145;&#32447;&#25968;&#30446;&#21483;&#20570;&#21464;&#37327;&#24341;&#29992;&#30340;<span class="emph">&#35789;&#28145;</span> (<span class="emph">lexical
depth</span>)&#65288;&#25110;<span class="emph">&#38745;&#28145;</span> (<span class="emph">static depth</span>)&#65289;&#12290;&#30001;&#20110;&#24815;&#29992;&#8220;&#20174;0&#24320;&#22987;&#30340;
&#32034;&#24341;&#8221;&#65292;&#25152;&#20197;&#19981;&#35745;&#26368;&#21518;&#36328;&#36807;&#30340;&#31561;&#28145;&#32447;&#12290;&#20363;&#22914;&#65292;&#22312; Scheme &#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20013;&#65292;&#26368;&#21518;&#19968;&#34892; <span class="stt">x</span> &#30340;&#24341;&#29992;&#20197;&#21450; <span class="stt">a</span> &#30340;&#24341;&#29992;&#35789;&#28145;&#22343;&#20026; 0&#65292;&#32780;&#31532;&#19977;&#34892; <span class="stt">x</span> &#30340;&#24341;&#29992;&#35789;
&#28145;&#20026; 1&#12290;</p></blockquote><p>&#22240;&#27492;&#65292;&#25105;&#20204;&#21487;&#20197;&#23436;&#20840;&#28040;&#38500;&#21464;&#37327;&#21517;&#65292;&#20889;&#25104;&#36825;&#26679;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(nameless-lambda</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((nameless-lambda</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(#1 #0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">#0))</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;&#27599;&#20010; <span class="stt">nameless-lambda</span> &#37117;&#22768;&#26126;&#20102;&#19968;&#20010;&#26032;&#30340;&#26080;&#21517;&#21464;&#37327;&#65292;&#27599;&#20010;&#21464;&#37327;&#24341;&#29992;&#30001;&#20854;&#35789;&#28145;&#26367;
&#20195;&#65307;&#36825;&#20010;&#25968;&#23383;&#20934;&#30830;&#26631;&#31034;&#20102;&#35201;&#20351;&#29992;&#30340;&#22768;&#26126;&#12290;&#36825;&#20123;&#25968;&#23383;&#21483;&#20570;<span class="emph">&#35789;&#27861;&#22320;&#22336;</span> (<span class="emph">lexical
address</span>) &#25110;<span class="emph">&#24503;&#24067;&#40065;&#37329;&#32034;&#24341;</span> (<span class="emph">de Bruijn index</span>)&#12290;&#32534;&#35793;&#22120;&#20363;&#34892;&#35745;&#31639;&#27599;&#20010;&#21464;&#37327;
&#24341;&#29992;&#30340;&#35789;&#27861;&#22320;&#22336;&#12290;&#38500;&#38750;&#29992;&#26469;&#25552;&#20379;&#35843;&#35797;&#20449;&#24687;&#65292;&#35745;&#31639;&#19968;&#26086;&#23436;&#25104;&#65292;&#21464;&#37327;&#21517;&#21363;&#21487;&#20002;&#24323;&#12290;</p></blockquote><p>&#36825;&#26679;&#35760;&#24405;&#20449;&#24687;&#26377;&#29992;&#65292;&#22240;&#20026;&#35789;&#27861;&#22320;&#22336;<span class="emph">&#39044;&#27979;</span>&#20102;&#24590;&#26679;&#20174;&#29615;&#22659;&#20013;&#25214;&#20986;&#26576;&#20010;&#21464;&#37327;&#12290;</p><p>&#32771;&#34385;&#25105;&#20204;&#35821;&#35328;&#20013;&#30340;&#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = </span><span class="texMathInline">exp_1</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">in let y = </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#22312;&#24046;&#20540;&#34920;&#36798;&#24335;&#20013;&#65292;<span class="stt">y</span> &#21644; <span class="stt">x</span> &#30340;&#35789;&#28145;&#20998;&#21035;&#20026;0&#21644;1&#12290;</p></blockquote><p>&#29616;&#22312;&#20551;&#35774;&#22312;&#26576;&#20010;&#36866;&#24403;&#29615;&#22659;&#20013;&#27714;&#24471; <span class="texMathInline">exp_1</span> &#21644; <span class="texMathInline">exp_2</span> &#30340;&#20540;&#65292;&#20998;&#21035;&#20026; <span class="texMathInline">val_1</span> &#21644;
<span class="texMathInline">val_2</span>&#65292;&#37027;&#20040;&#36825;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#20026;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let x = </span><span class="texMathInline">exp_1</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">=</span></p></td></tr><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let y = </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">val_1</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">=</span></p></td></tr><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(x,y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[y=</span><span class="texMathInline">val_2</span><span class="stt">][x=</span><span class="texMathInline">val_1</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#25152;&#20197;&#65292;&#27714;&#24046;&#20540;&#34920;&#36798;&#24335;&#30340;&#20540;&#26102;&#65292;<span class="stt">y</span> &#28145;&#24230;&#20026; 0&#65292;<span class="stt">x</span> &#28145;&#24230;&#20026; 1&#65292;&#27491;&#22914;&#35789;&#28145;&#39044;&#27979;&#30340;&#37027;&#26679;&#12290;</p></blockquote><p>&#22914;&#26524;&#29992;&#20851;&#32852;&#21015;&#34920;&#34920;&#31034;&#29615;&#22659;&#65288;&#35265;ex2.5&#65289;&#65292;&#37027;&#20040;&#29615;&#22659;&#30475;&#36215;&#26469;&#20687;&#26159;</p><blockquote class="SubFlow"><blockquote class="SCentered"><p><img src="lexical-addr-env.svg" alt="关联列表表示的词法地址环境" width="289.8pt" height="165.6pt"/></p></blockquote><p>&#25152;&#20197;&#19981;&#35770; <span class="texMathInline">val_1</span> &#21644; <span class="texMathInline">val_2</span> &#20540;&#20026;&#20309;&#65292;<span class="stt">x</span> &#21644; <span class="stt">y</span> &#30340;&#20540;&#37117;&#26159;&#21462;&#29615;&#22659;&#20013;&#31532; 1 &#20010;
&#20803;&#32032;&#30340;&#20313;&#39033;&#21644;&#31532; 0 &#20010;&#20803;&#32032;&#30340;&#20313;&#39033;&#12290;</p></blockquote><p>&#36807;&#31243;&#30340;&#20027;&#20307;&#20063;&#26159;&#36825;&#26679;&#12290;&#32771;&#34385;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let a = 5</span></p></td></tr><tr><td><p><span class="stt">in proc (x) -(x,1)</span></p></td></tr></table></blockquote><p>&#22312;&#36807;&#31243;&#30340;&#20027;&#20307;&#20013;&#65292;<span class="stt">x</span> &#30340;&#35789;&#28145;&#26159; 0&#65292;<span class="stt">a</span> &#30340;&#35789;&#28145;&#26159; 1&#12290;</p></blockquote><p>&#36825;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#20026;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let a = 5 in proc (x) -(x,a)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of &lt;&lt;proc (x) -(x,a)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env a </span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">= (proc-val (procedure x &lt;&lt;-(x,a)&gt;&gt; [a=</span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#36825;&#20010;&#36807;&#31243;&#30340;&#20027;&#20307;&#21482;&#33021;&#36890;&#36807; <span class="stt">apply-procedure</span> &#27714;&#20540;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(procedure x &lt;&lt;-(x,a)&gt;&gt; [a=</span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of &lt;&lt;-(x,a)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">][a=</span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#27599;&#20010;&#21464;&#37327;&#21448;&#19968;&#27425;&#20986;&#29616;&#22312;&#35789;&#28145;&#39044;&#27979;&#30340;&#29615;&#22659;&#20301;&#32622;&#12290;
<a name="(idx._(gentag._544))"></a>
<a name="(idx._(gentag._545))"></a></p><h4 class="heading">3.7<tt>&nbsp;</tt><a name="(part._s3..7)"></a>&#23454;&#29616;&#35789;&#27861;&#22320;&#22336;<span class="button-group"><a href="#(part._s3..7)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._546))"></a>
&#29616;&#22312;&#65292;&#25105;&#20204;&#26469;&#23454;&#29616;&#19978;&#36848;&#35789;&#27861;&#22320;&#22336;&#20998;&#26512;&#12290;&#25105;&#20204;&#20889;&#20986;&#36807;&#31243; <span class="stt">translation-of-program</span>&#65292;&#23427;&#21462;
&#19968;&#31243;&#24207;&#65292;&#20174;&#22768;&#26126;&#20013;&#31227;&#38500;&#25152;&#26377;&#21464;&#37327;&#65292;&#24182;&#23558;&#27599;&#20010;&#21464;&#37327;&#24341;&#29992;&#26367;&#25442;&#20026;&#35789;&#28145;&#12290;</p><p>&#20363;&#22914;&#65292;&#31243;&#24207;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><a name="(elem._s3..7-eg)"></a><span class="stt">let x = 37</span></p></td></tr><tr><td><p><span class="stt">in proc (y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let z = -(y,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#23558;&#32763;&#35793;&#20026;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">37</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-proc-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></blockquote><p>&#28982;&#21518;&#65292;&#25105;&#20204;&#20889;&#20986;&#26032;&#29256;&#30340; <span class="stt">value-of-program</span> &#26469;&#27714;&#26080;&#21517;&#31243;&#24207;&#30340;&#20540;&#65292;&#23427;&#19981;&#38656;&#35201;&#25226;&#21464;&#37327;&#25918;&#20837;
&#29615;&#22659;&#20013;&#12290;</p></blockquote><h5 class="heading">3.7.1<tt>&nbsp;</tt><a name="(part._s3..7..1)"></a>&#32763;&#35793;&#22120;<span class="button-group"><a href="#(part._s3..7..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#22240;&#20026;&#26159;&#20889;&#32763;&#35793;&#22120;&#65292;&#25105;&#20204;&#24471;&#30693;&#36947;&#28304;&#35821;&#35328;&#21644;&#30446;&#26631;&#35821;&#35328;&#12290;&#30446;&#26631;&#35821;&#35328;&#20013;&#30340;&#26576;&#20123;&#37096;&#20998;&#28304;&#35821;&#35328;&#20013;&#27809;&#26377;&#65292;&#20363;
&#22914; <span class="stt">nameless-var-exp</span> &#21644; <span class="stt">nameless-let-exp</span>&#65307;&#28304;&#35821;&#35328;&#20013;&#30340;&#26576;&#20123;&#37096;&#20998;&#30446;&#26631;&#35821;&#35328;&#20013;
&#27809;&#26377;&#65292;&#23427;&#20204;&#30001;&#21518;&#32773;&#20013;&#30340;&#23545;&#24212;&#32467;&#26500;&#21462;&#20195;&#65292;&#20363;&#22914; <span class="stt">var-exp</span> &#21644; <span class="stt">let-exp</span>&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#20026;&#27599;&#31181;&#35821;&#35328;&#20889;&#19968;&#20010; <span class="stt">define-datatype</span>&#65292;&#20063;&#21487;&#20197;&#35753;&#20108;&#32773;&#20849;&#29992;&#19968;&#20010;&#12290;&#22240;&#20026;&#25105;&#20204;&#20351;
&#29992;&#30340;&#21069;&#31471;&#26159; SLLGEN&#65292;&#21518;&#32773;&#26356;&#23481;&#26131;&#12290;&#25105;&#20204;&#32473; SLLGEN &#30340;&#35821;&#27861;&#28155;&#21152;&#29983;&#25104;&#24335;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">%lexref </span><span class="Iidentity">\mathit{number}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">nameless-var-exp (num)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">%let </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> in </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">nameless-let-exp (exp1 body)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">%lexproc </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">nameless-proc-exp (body)</span>}\end{align*}</span></p><p>&#26032;&#30340;&#26500;&#36896;&#22120;&#21517;&#23383;&#29992; <span class="stt">%</span> &#24320;&#22836;&#65292;&#22240;&#20026;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;<span class="stt">%</span> &#36890;&#24120;&#26159;&#27880;&#37322;&#23383;&#31526;&#12290;</p><p>&#25105;&#20204;&#30340;&#32763;&#35793;&#22120;&#23558;&#25298;&#32477;&#20219;&#20309;&#21547;&#26377;&#26080;&#21517;&#32467;&#26500;&#65288;<span class="stt">nameless-var-exp</span>&#12289;<span class="stt">nameless-let-exp</span>
&#25110; <span class="stt">nameless-proc-exp</span>&#65289;&#30340;&#31243;&#24207;&#12290;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#23558;&#25298;&#32477;&#20219;&#20309;&#21547;&#26377;&#21407;&#20808;&#20855;&#21517;&#32467;&#26500;
&#65288;<span class="stt">var-exp</span>&#12289;<span class="stt">let-exp</span> &#25110; <span class="stt">proc-exp</span>&#65289;&#30340;&#31243;&#24207;&#65292;&#22240;&#20026;&#23427;&#20204;&#29702;&#24212;&#34987;&#26367;&#25442;&#12290;</p><p>&#35201;&#35745;&#31639;&#20219;&#20309;&#21464;&#37327;&#24341;&#29992;&#30340;&#35789;&#27861;&#22320;&#22336;&#65292;&#25105;&#20204;&#38656;&#35201;&#23427;&#25152;&#22312;&#30340;&#20316;&#29992;&#22495;&#12290;&#36825;&#26159;&#19968;&#31181;<span class="emph">&#19978;&#19979;&#25991;</span> (<span class="emph">context</span>) &#20449;&#24687;&#65292;&#25152;&#20197;&#23427;&#21644;<a href="#%28part._s1..3%29" data-pltdoc="x">&#36741;&#21161;&#36807;&#31243;&#21644;&#19978;&#19979;&#25991;&#21442;&#25968;</a>&#30340;&#32487;&#25215;&#23646;&#24615;&#31867;&#20284;&#12290;</p><p><a name="(idx._(gentag._547))"></a>
<a name="(idx._(gentag._548))"></a>
&#25152;&#20197; <span class="stt">translation-of-program</span> &#23558;&#21462;&#20004;&#20010;&#21442;&#25968;&#65306;&#19968;&#20010;&#34920;&#36798;&#24335;&#21644;&#19968;&#20010;<span class="emph">&#38745;&#24577;&#29615;&#22659;</span> (<span class="emph">static
environment</span>)&#12290;&#38745;&#24577;&#29615;&#22659;&#26159;&#19968;&#20010;&#21464;&#37327;&#21015;&#34920;&#65292;&#34920;&#31034;&#24403;&#21069;&#34920;&#36798;&#24335;&#25152;&#22312;&#30340;&#20316;&#29992;&#22495;&#12290;&#26368;
&#20869;&#37096;&#20316;&#29992;&#22495;&#22768;&#26126;&#30340;&#21464;&#37327;&#25104;&#20026;&#21015;&#34920;&#30340;&#31532;&#19968;&#20010;&#20803;&#32032;&#12290;</p><p>&#20363;&#22914;&#65292;&#32763;&#35793;&#19978;&#20363;&#20013;&#30340;&#26368;&#21518;&#19968;&#34892;&#26102;&#65292;&#38745;&#24577;&#29615;&#22659;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="SCentered"><p><span class="stt">(z y x)</span></p></blockquote><p>&#25152;&#20197;&#65292;&#22312;&#38745;&#24577;&#29615;&#22659;&#20013;&#25628;&#32034;&#21464;&#37327;&#23601;&#26159;&#26597;&#25214;&#23427;&#22312;&#38745;&#24577;&#29615;&#22659;&#20013;&#30340;&#20301;&#32622;&#65292;&#20063;&#23601;&#26159;&#35789;&#27861;&#22320;&#22336;&#65306;&#26597;&#24471;
<span class="stt">x</span> &#20026; 2&#65292;<span class="stt">y</span> &#20026; 1&#65292;<span class="stt">z</span> &#20026; 0&#12290;</p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Senv}</span> = <span class="texMathInline">\mathit{Listof}</span><span class="stt">(</span><span class="texMathInline">\mathit{Sym}</span><span class="stt">)</span></td></tr><tr><td><span class="texMathInline">\mathit{Lexaddr}</span> = <span class="texMathInline">\mathit{N}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">empty-senv</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Senv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-senv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-senv</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{Senv} \to \mathit{Senv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-senv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-senv</span></span> : <span class="texMathInline">\mathit{Senv} \times \mathit{Var} \to \mathit{Lexaddr}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-senv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">senv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-binding-found</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-senv</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#23454;&#29616;&#38745;&#24577;&#29615;&#22659;<a name="(elem._fig-3..15)"></a></p></blockquote></blockquote><p>&#36827;&#20837;&#26032;&#30340;&#20316;&#29992;&#22495;&#23601;&#35201;&#32473;&#38745;&#24577;&#29615;&#22659;&#28155;&#21152;&#19968;&#20010;&#26032;&#20803;&#32032;&#12290;&#25105;&#20204;&#28155;&#21152;&#36807;&#31243; <span class="stt">extend-senv</span> &#26469;&#23436;&#25104;
&#36825;&#19968;&#27493;&#12290;</p><p>&#30001;&#20110;&#38745;&#24577;&#29615;&#22659;&#21482;&#26159;&#21464;&#37327;&#21015;&#34920;&#65292;&#36825;&#20123;&#36807;&#31243;&#24456;&#23481;&#26131;&#23454;&#29616;&#65292;&#22914; &#25152;&#31034;&#12290;</p><p>&#32763;&#35793;&#22120;&#26377;&#20004;&#20010;&#36807;&#31243;&#65306;<span class="stt">translation-of</span> &#22788;&#29702;&#34920;&#36798;&#24335;&#65292;<span class="stt">translation-of-program</span> &#22788;
&#29702;&#31243;&#24207;&#12290;</p><p><span class="stt">senv</span> &#34920;&#31034;&#19968;&#20123;&#22768;&#26126;&#65292;&#25105;&#20204;&#20174;&#20013;&#32763;&#35793;&#34920;&#36798;&#24335; <span class="stt">e</span>&#12290;&#35201;&#23436;&#25104;&#36825;&#28857;&#65292;&#25105;&#20204;&#20687;ex1.33 &#25110;
ex2.26 &#37027;&#26679;&#36882;&#24402;&#22797;&#21046;&#35821;&#27861;&#26641;&#65292;&#38500;&#20102;<br/></p><blockquote class="SubFlow"><ol><li><p>&#35843;&#29992; <span class="stt">apply-senv</span>&#65292;&#29992;&#27491;&#30830;&#30340;&#35789;&#27861;&#22320;&#22336;&#65292;&#25226;&#27599;&#20010; <span class="stt">var-exp</span> &#26367;&#25442;&#20026;
<span class="stt">nameless-var-exp</span>&#12290;</p></li><li><p>&#25226;&#27599;&#20010; <span class="stt">let-exp</span> &#26367;&#25442;&#20026;&#19968;&#20010; <span class="stt">nameless-let-exp</span>&#12290;&#26032;&#34920;&#36798;&#24335;&#30340;&#21491;&#20391;&#30001;&#26087;
&#34920;&#36798;&#24335;&#30340;&#21491;&#20391;&#35793;&#24471;&#12290;&#23427;&#19982;&#21407;&#24335;&#30340;&#20316;&#29992;&#22495;&#30456;&#21516;&#65292;&#25152;&#20197;&#25105;&#20204;&#22312;&#21516;&#26679;&#30340;&#38745;&#24577;&#29615;&#22659; <span class="stt">senv</span> &#20013;&#32763;
&#35793;&#23427;&#12290;&#26032;&#34920;&#36798;&#24335;&#30340;&#20027;&#20307;&#30001;&#26087;&#34920;&#36798;&#24335;&#30340;&#20027;&#20307;&#35793;&#24471;&#12290;&#20294;&#26159;&#20027;&#20307;&#20301;&#20110;&#26032;&#30340;&#20316;&#29992;&#22495;&#20869;&#65292;&#22810;&#20102;&#19968;&#20010;&#32465;
&#23450;&#21464;&#37327; <span class="texMathInline">var</span>&#12290;&#25152;&#20197;&#25105;&#20204;&#22312;&#38745;&#24577;&#29615;&#22659; <span class="stt">(extend-senv </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">senv</span><span class="stt">)</span> &#20013;&#32763;&#35793;&#20027;
&#20307;&#12290;</p></li><li><p>&#25226;&#27599;&#20010; <span class="stt">proc-exp</span> &#26367;&#25442;&#20026;&#19968;&#20010; <span class="stt">nameless-proc-exp</span>&#65292;&#20027;&#20307;&#22312;&#26032;&#30340;&#20316;&#29992;&#22495;
&#20869;&#35793;&#24471;&#65292;&#35813;&#20316;&#29992;&#22495;&#30001;&#38745;&#24577;&#29615;&#22659; <span class="stt">(extend-senv </span><span class="texMathInline">var</span><span class="stt"> senv)</span> &#34920;&#31034;&#12290;</p></li></ol><p><span class="stt">translation-of</span> &#20195;&#30721;&#22914; &#25152;&#31034;&#12290;</p></blockquote><p>&#36807;&#31243; <span class="stt">translation-of-program</span> &#22312;&#36866;&#24403;&#30340;&#21021;&#22987;&#38745;&#24577;&#29615;&#22659;&#20013;&#25191;&#34892; <span class="stt">translation-of</span>&#12290;
<a name="(idx._(gentag._549))"></a>
<a name="(idx._(gentag._550))"></a></p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">translation-of</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Senv} \to \mathit{Nameless\mbox{-}exp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">translation-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-var-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-senv</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-proc-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-source-expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;
<a name="(idx._(gentag._551))"></a><a name="(elem._fig-3..16)"></a></p></blockquote></blockquote><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">translation-of</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{Nameless\mbox{-}exp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">translation-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">translation-of</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Senv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">init-senv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">i</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._552))"></a></div></p></blockquote><h5 class="heading">3.7.2<tt>&nbsp;</tt><a name="(part._s3..7..2)"></a>&#26080;&#21517;&#35299;&#37322;&#22120;<span class="button-group"><a href="#(part._s3..7..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#20973;&#20511;&#35789;&#27861;&#22320;&#22336;&#20998;&#26512;&#22120;&#30340;&#39044;&#27979;&#65292;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#19981;&#24517;&#22312;&#36816;&#34892;&#26102;&#30452;&#25509;&#25628;&#32034;&#21464;&#37327;&#12290;</p><p>&#30001;&#20110;&#25105;&#20204;&#30340;&#31243;&#24207;&#20013;&#27809;&#26377;&#20219;&#20309;&#21464;&#37327;&#65292;&#25105;&#20204;&#19981;&#33021;&#25226;&#21464;&#37327;&#25918;&#20837;&#29615;&#22659;&#20013;&#65307;&#20294;&#26159;&#22240;&#20026;&#25105;&#20204;&#26126;&#30830;&#30693;&#36947;&#22914;&#20309;
&#20174;&#29615;&#22659;&#20013;&#23547;&#25214;&#23427;&#20204;&#65292;&#25105;&#20204;&#19981;&#38656;&#35201;&#65281;</p><p>&#25105;&#20204;&#30340;&#39030;&#23618;&#36807;&#31243;&#26159; <span class="stt">run</span>&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">run</span></span> : <span class="texMathInline">\mathit{String} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">run</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">scan&amp;parse</span><span class="hspace">&nbsp;</span><span class="RktSym">string</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._553))"></a>
<a name="(idx._(gentag._554))"></a>
&#25105;&#20204;&#19981;&#29992;&#20840;&#21151;&#33021;&#30340;&#29615;&#22659;&#65292;&#32780;&#26159;&#29992;&#26080;&#21517;&#29615;&#22659;&#65292;&#20854;&#25509;&#21475;&#22914;&#19979;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">nameless-environment?</span></span><span class="stt">: </span><span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">empty-nameless-env</span></span><span class="stt">: </span><span class="texMathInline">\mathit{()} \to \mathit{Nameless\mbox{-}env}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">extend-nameless-env</span></span><span class="stt">: </span><span class="texMathInline">\mathit{ExpVal} \times \mathit{Nameless\mbox{-}env} \to \mathit{Nameless\mbox{-}env}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">apply-nameless-env</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Nameless\mbox{-}env} \times \mathit{Lexaddr} \to \mathit{DenVal}</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#21487;&#20197;&#29992;&#25351;&#20195;&#20540;&#21015;&#34920;&#23454;&#29616;&#26080;&#21517;&#29615;&#22659;&#65292;&#36825;&#26679; <span class="stt">apply-nameless-env</span> &#21482;&#38656;&#35843;&#29992;
<span class="stt">list-ref</span>&#12290;&#36825;&#31181;&#23454;&#29616;&#22914; &#25152;&#31034;&#12290;</p><p>s3.7-eg&#20363;&#23376;&#20013;&#26368;&#21518;&#19968;&#34892;&#30340;&#26080;&#21517;&#29615;&#22659;&#22914;&#19979;</p><blockquote class="SCentered"><p><img src="nameless-env.svg" alt="无名环境" width="365.4pt" height="77.4pt"/></p></blockquote><p>&#30001;&#20110;&#26356;&#25913;&#20102;&#29615;&#22659;&#25509;&#21475;&#65292;&#25105;&#20204;&#38656;&#35201;&#26597;&#30475;&#20195;&#30721;&#20013;&#25152;&#26377;&#20381;&#36182;&#36825;&#22871;&#25509;&#21475;&#30340;&#22320;&#26041;&#12290;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#20013;&#20351;&#29992;
&#29615;&#22659;&#30340;&#21482;&#26377;&#20004;&#22788;&#65306;&#36807;&#31243;&#21644; <span class="stt">value-of</span>&#12290;</p><p>&#20462;&#25913;&#36807;&#31243;&#35268;&#33539;&#26102;&#65292;&#21482;&#38656;&#25226;&#26087;&#35268;&#33539;&#20013;&#30340;&#21464;&#37327;&#21517;&#31227;&#38500;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-nameless-env </span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">nameless-environment?</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-environment?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-val?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">empty-nameless-env</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Nameless\mbox{-}env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-nameless-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-nameless-env</span></span> : <span class="texMathInline">\mathit{Expval} \times \mathit{Nameless\mbox{-}env} \to \mathit{Nameless\mbox{-}env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-nameless-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-nameless-env</span></span> : <span class="texMathInline">\mathit{Nameless\mbox{-}env} \times \mathit{Lexaddr} \to \mathit{DenVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-nameless-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#26080;&#21517;&#29615;&#22659;
<a name="(idx._(gentag._555))"></a>
<a name="(idx._(gentag._556))"></a><a name="(elem._fig-3..17)"></a></p></blockquote></blockquote><p>&#36825;&#19968;&#35268;&#33539;&#30340;&#23454;&#29616;&#21487;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">procedure</span></span> : <span class="texMathInline">\mathit{Nameless\mbox{-}exp} \times \mathit{Nameless\mbox{-}env} \to \mathit{Proc}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-nameless-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._557))"></a>
&#29616;&#22312;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986; <span class="stt">value-of</span>&#12290;&#23427;&#30340;&#22823;&#37096;&#20998;&#19982;&#21069;&#19968;&#20010;&#35299;&#37322;&#22120;&#30456;&#21516;&#65292;&#21482;&#26159;&#21407;&#20808;&#20351;&#29992;
<span class="stt">env</span> &#30340;&#22320;&#26041;&#29616;&#22312;&#29992; <span class="stt">nameless-env</span>&#12290;&#20294;&#25105;&#20204;&#35201;&#22788;&#29702;&#26032;&#30340;&#37096;&#20998;&#65306;
<span class="stt">nameless-var-exp</span>&#12289;<span class="stt">nameless-let-exp</span> &#21644; <span class="stt">nameless-proc-exp</span>&#65292;&#23427;&#20204;&#20998;&#21035;
&#21462;&#20195;&#23545;&#24212;&#30340; <span class="stt">var-exp</span>&#12289;<span class="stt">let-exp</span> &#21644; <span class="stt">proc-exp</span>&#12290;&#20854;&#23454;&#29616;&#22914;
&#25152;&#31034;&#12290;<span class="stt">nameless-var-exp</span> &#29992;&#20110;&#29615;&#22659;&#26597;&#35810;&#12290;<span class="stt">nameless-let-exp</span> &#20808;&#27714;&#20986;&#24335;&#23376;&#21491;&#36793;&#30340;
<span class="texMathInline">exp_1</span>&#65292;&#28982;&#21518;&#29992;&#24335;&#23376;&#21491;&#36793;&#30340;&#20540;&#25193;&#23637;&#29615;&#22659;&#65292;&#24182;&#22312;&#26032;&#29615;&#22659;&#20869;&#27714;&#20027;&#20307;&#30340;&#20540;&#12290;&#36825;&#21644; <span class="stt">let</span> &#25152;
&#20570;&#30456;&#21516;&#65292;&#21482;&#26159;&#27809;&#26377;&#21464;&#37327;&#12290;<span class="stt">nameless-proc</span> &#29983;&#25104;&#19968;&#20010; <span class="stt">proc</span>&#65292;&#38543;&#21518;&#21487;&#20379;
<span class="stt">apply-procedure</span> &#35843;&#29992;&#12290;
<a name="(idx._(gentag._558))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of</span></span> : <span class="texMathInline">\mathit{Nameless\mbox{-}exp} \times \mathit{Nameless\mbox{-}env} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-translated-expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>&#26080;&#21517;&#35299;&#37322;&#22120;&#30340; <span class="stt">value-of</span><a name="(elem._fig-3..18)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._559))"></a></div></p></blockquote><p>&#26368;&#21518;&#26159;&#26032;&#30340; <span class="stt">value-of-program</span>&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Nameless\mbox{-}program} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._560))"></a>
<a name="(idx._(gentag._561))"></a>
<a name="(idx._(gentag._562))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..38)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._563))"></a>
&#25193;&#23637;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#22788;&#29702;ex3.12 &#20013;&#30340; <span class="stt">cond</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..39)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._564))"></a>
&#25193;&#23637;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#22788;&#29702;ex3.18 &#20013;&#30340; <span class="stt">unpack</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..40)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._565))"></a>
&#25193;&#23637;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#22788;&#29702; <span class="stt">letrec</span>&#12290;&#20462;&#25913; <span class="stt">translation-of</span> &#30340;&#19978;&#19979;&#25991;
&#21442;&#25968;&#65292;&#19981;&#20165;&#35760;&#24405;&#27599;&#20010;&#32465;&#23450;&#21464;&#37327;&#30340;&#21517;&#23383;&#65292;&#20063;&#35760;&#24405;&#21464;&#37327;&#26159;&#21542;&#30001; <span class="stt">letrec</span> &#32465;&#23450;&#12290;&#23545;
<span class="stt">letrec</span> &#32465;&#23450;&#21464;&#37327;&#30340;&#24341;&#29992;&#65292;&#29983;&#25104;&#19968;&#31181;&#26032;&#30340;&#24341;&#29992;&#65292;&#21517;&#20026; <span class="stt">nameless-letrec-var-exp</span>&#12290;
&#28982;&#21518;&#20320;&#21487;&#20197;&#32487;&#32493;&#29992;&#19978;&#38754;&#30340;&#26080;&#21517;&#29615;&#22659;&#34920;&#31034;&#65292;&#35299;&#37322;&#22120;&#21017;&#35201;&#20197;&#36866;&#24403;&#30340;&#26041;&#24335;&#22788;&#29702;<span class="Shtt">nameless-letrec-var-exp</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..41)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._566))"></a>
<a name="(idx._(gentag._567))"></a>
&#20462;&#25913;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#20687;ex3.21 &#37027;&#26679;&#22788;&#29702;&#22810;&#21442;&#25968;&#30340; <span class="stt">let</span> &#34920;
&#36798;&#24335;&#12289;&#36807;&#31243;&#21644;&#36807;&#31243;&#35843;&#29992;&#12290;&#29992;&#32907;&#25490;&#34920;&#31034;&#27861;&#65288;ex2.21&#65289;&#34920;&#31034;&#26080;&#21517;&#29615;&#22659;&#12290;&#22312;&#36825;&#31181;
&#34920;&#31034;&#27861;&#20013;&#65292;&#35789;&#27861;&#22320;&#22336;&#21253;&#21547;&#20004;&#20010;&#38750;&#36127;&#25968;&#65306;&#35789;&#28145;&#65292;&#25351;&#26126;&#36328;&#36234;&#30340;&#31561;&#28145;&#32447;&#25968;&#30446;&#65292;&#19982;&#20043;&#21069;&#30456;&#21516;&#65307;&#20301;&#32622;&#65292;
&#25351;&#26126;&#21464;&#37327;&#22312;&#22768;&#26126;&#20013;&#30340;&#20301;&#32622;&#12290;
<a name="(idx._(gentag._568))"></a>
<a name="(idx._(gentag._569))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..42)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._570))"></a>
<a name="(idx._(gentag._571))"></a>
&#20462;&#25913;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#20351;&#29992;ex3.26 &#20013;&#30340;&#30246;&#36523;&#36807;&#31243;&#34920;&#31034;&#27861;&#12290;&#35201;&#22914;&#27492;&#65292;
&#20320;&#19981;&#33021;&#22312; <span class="stt">(extend-senv </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">senv</span><span class="stt">)</span> &#20013;&#32763;&#35793;&#36807;&#31243;&#30340;&#20027;&#20307;&#65292;&#32780;&#26159;&#22312;&#19968;&#20010;&#26032;&#30340;&#38745;
&#24577;&#29615;&#22659;&#20013;&#65292;&#23427;&#25351;&#26126;&#20102;&#21508;&#20010;&#21464;&#37327;&#22312;&#30246;&#36523;&#34920;&#31034;&#20013;&#30340;&#20301;&#32622;&#12290;
<a name="(idx._(gentag._572))"></a>
<a name="(idx._(gentag._573))"></a>
<a name="(idx._(gentag._574))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..43)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._575))"></a>
<a name="(idx._(gentag._576))"></a>
<a name="(idx._(gentag._577))"></a>
&#32763;&#35793;&#22120;&#19981;&#27490;&#33021;&#35760;&#24405;&#21464;&#37327;&#30340;&#21517;&#23383;&#12290;&#20363;&#22914;&#65292;&#32771;&#34385;&#31243;&#24207;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 3</span></p></td></tr><tr><td><p><span class="stt">in let f = proc (y) -(y,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (f 13)</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;&#19981;&#24517;&#36816;&#34892;&#25105;&#20204;&#23601;&#33021;&#30475;&#20986;&#65306;&#22312;&#36807;&#31243;&#35843;&#29992;&#22788;&#65292;<span class="stt">f</span> &#32465;&#23450;&#21040;&#19968;&#20010;&#36807;&#31243;&#65292;&#20854;&#20027;&#20307;&#20026;
<span class="stt">-(y,x)</span>&#65292;<span class="stt">x</span> &#30340;&#20540;&#19982;&#36807;&#31243;&#21019;&#24314;&#22788;&#30456;&#21516;&#12290;&#22240;&#27492;&#25105;&#20204;&#23436;&#20840;&#21487;&#20197;&#36991;&#20813;&#22312;&#29615;&#22659;&#20013;&#26597;&#25214;
<span class="stt">f</span>&#12290;&#25193;&#23637;&#32763;&#35793;&#22120;&#65292;&#35760;&#24405;&#8220;&#24050;&#30693;&#36807;&#31243;&#8221;&#65292;&#29983;&#25104;&#20195;&#30721;&#65292;&#36991;&#20813;&#22312;
&#35843;&#29992;&#36825;&#26679;&#30340;&#36807;&#31243;&#26102;&#25628;&#32034;&#29615;&#22659;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..44)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;&#21069;&#19968;&#20010;&#20363;&#23376;&#20013;&#65292;<span class="stt">f</span> &#30340;&#21807;&#19968;&#29992;&#36884;&#26159;&#20316;&#20026;&#19968;&#20010;&#24050;&#30693;&#36807;&#31243;&#12290;&#22240;&#27492;&#65292;&#30001;&#34920;&#36798;&#24335; <span class="stt">proc (y)
-(y,x)</span> &#20135;&#29983;&#30340;&#36807;&#31243;&#20174;&#26410;&#20351;&#29992;&#12290;&#20462;&#25913;&#32763;&#35793;&#22120;&#65292;&#36991;&#20813;&#20135;&#29983;&#36825;&#26679;&#30340;&#36807;&#31243;&#12290;
<a name="(idx._(gentag._578))"></a>
<a name="(idx._(gentag._579))"></a>
<a name="(idx._(gentag._580))"></a></p></blockquote><h3 class="heading">4<tt>&nbsp;</tt><a name="(part._state)"></a>&#29366;&#24577;<span class="button-group"><a href="#(part._state)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><h4 class="heading">4.1<tt>&nbsp;</tt><a name="(part._s4..1)"></a>&#35745;&#31639;&#30340;&#25928;&#26524;<span class="button-group"><a href="#(part._s4..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._581))"></a>
<a name="(idx._(gentag._582))"></a>
&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#21482;&#32771;&#34385;&#20102;&#35745;&#31639;&#20135;&#29983;&#30340;<span class="emph">&#20540;</span> (<span class="emph">value</span>)&#65292;&#20294;&#26159;&#35745;&#31639;&#20063;
&#26377;<span class="emph">&#25928;&#26524;</span> (<span class="emph">effect</span>)&#65306;&#23427;&#21487;&#20197;&#35835;&#21462;&#65292;&#25171;&#21360;&#65292;&#20462;&#25913;&#20869;&#23384;&#25110;&#32773;&#25991;&#20214;&#31995;&#32479;&#30340;&#29366;&#24577;&#12290;&#22312;&#29616;&#23454;&#19990;
&#30028;&#20013;&#65292;&#25105;&#20204;<span class="emph">&#24635;&#26159;</span>&#23545;&#25928;&#26524;&#24456;&#24863;&#20852;&#36259;&#65306;&#22914;&#26524;&#19968;&#27425;&#35745;&#31639;&#19981;&#26174;&#31034;&#31572;&#26696;&#65292;&#37027;&#23545;&#25105;&#20204;&#23436;&#20840;&#27809;&#29992;&#65281;</p><p>&#20135;&#29983;&#20540;&#21644;&#20135;&#29983;&#25928;&#26524;&#26377;&#20309;&#21306;&#21035;&#65311;&#25928;&#26524;&#26159;<span class="emph">&#20840;&#23616;&#24615;</span> (<span class="emph">global</span>) &#30340;&#65292;&#25972;&#20010;&#35745;&#31639;&#37117;&#33021;&#30475;&#21040;&#12290;&#25928;
&#26524;<span class="emph">&#24863;&#26579;</span>&#25972;&#20010;&#35745;&#31639;&#65288;&#25925;&#24847;&#29992;&#21452;&#20851;&#35821;&#65289;&#12290;</p><p><a name="(idx._(gentag._583))"></a>
<a name="(idx._(gentag._584))"></a>
&#25105;&#20204;&#20027;&#35201;&#20851;&#24515;&#19968;&#31181;&#25928;&#26524;&#65306;&#32473;&#20869;&#23384;&#20013;&#30340;&#20301;&#32622;&#36171;&#20540;&#12290;&#36171;&#20540;&#19982;&#32465;&#23450;&#26377;&#20309;&#21306;&#21035;&#65311;&#25105;&#20204;&#24050;&#32463;&#30693;&#36947;&#65292;&#32465;&#23450;
&#26159;&#23616;&#37096;&#30340;&#65292;&#20294;<a name="(idx._(gentag._585))"></a>&#21464;&#37327;&#36171;&#20540;&#26377;&#21487;&#33021;&#26159;&#20840;&#23616;&#30340;&#12290;&#37027;&#26159;&#22312;&#26412;&#19981;&#30456;&#20851;&#30340;&#20960;
&#37096;&#20998;&#35745;&#31639;&#20043;&#38388;<span class="emph">&#20849;&#20139;</span> (<span class="emph">share</span>) <a name="(idx._(gentag._586))"></a>
&#20540;&#12290;&#22914;&#26524;&#20004;&#20010;&#36807;&#31243;&#30693;&#36947;&#20869;&#23384;&#20013;&#30340;&#21516;&#19968;&#20301;&#32622;&#65292;&#23427;&#20204;&#23601;&#33021;&#20849;&#20139;&#20449;&#24687;&#12290;&#22914;&#26524;&#25226;&#20449;&#24687;&#30041;&#22312;&#24050;&#30693;&#20301;&#32622;&#65292;
&#21516;&#19968;&#20010;&#36807;&#31243;&#23601;&#33021;&#22312;&#24403;&#21069;&#35843;&#29992;&#21644;&#21518;&#32493;&#35843;&#29992;&#20043;&#38388;&#20849;&#20139;&#20449;&#24687;&#12290;</p><p><a name="(idx._(gentag._587))"></a>
<a name="(idx._(gentag._588))"></a>
&#25105;&#20204;&#25226;&#20869;&#23384;&#24314;&#27169;&#20026;&#20174;<span class="emph">&#20301;&#32622;</span> (<span class="emph">location</span>) &#21040;&#20540;&#38598;&#21512;&#30340;&#30340;&#26377;&#38480;&#26144;&#23556;&#65292;&#31216;&#20540;&#38598;&#21512;
&#20026;<span class="emph">&#21487;&#23384;&#20648;&#20540;</span> (<span class="emph">storable values</span>)&#12290;&#20986;&#20110;&#21382;&#21490;&#21407;&#22240;&#65292;&#25105;&#20204;&#31216;&#20043;&#20026;<span class="emph">&#23384;
&#20648;&#22120;</span> (<span class="emph">store</span>)&#12290;&#36890;&#24120;&#65292;&#19968;&#31181;&#35821;&#35328;&#20013;&#30340;&#21487;&#23384;&#20648;&#20540;&#19982;&#34920;&#36798;&#20540;&#30456;&#21516;&#65292;&#20294;&#19981;&#24635;&#26159;&#36825;&#26679;&#12290;&#36825;&#20010;&#36873;&#25321;&#26159;&#35821;&#35328;&#35774;&#35745;
&#30340;&#19968;&#37096;&#20998;&#12290;<a name="(idx._(gentag._589))"></a></p><p>&#20195;&#34920;&#20869;&#23384;&#20301;&#32622;&#30340;&#25968;&#25454;&#32467;&#26500;&#21483;&#20570;<span class="emph">&#24341;&#29992;</span> (<span class="emph">reference</span>)&#12290;&#20301;&#32622;&#26159;&#20869;&#23384;&#20013;&#21487;&#29992;&#26469;&#23384;&#20540;&#30340;&#22320;&#26041;&#65292;
&#24341;&#29992;&#26159;&#25351;&#21521;&#37027;&#20010;&#22320;&#26041;&#30340;&#25968;&#25454;&#32467;&#26500;&#12290;&#20301;&#32622;&#21644;&#24341;&#29992;&#30340;&#21306;&#21035;&#21487;&#20197;&#36825;&#26679;&#31867;&#27604;&#65306;&#20301;&#32622;&#23601;&#20687;&#25991;&#20214;&#65292;&#24341;&#29992;&#23601;
&#20687;&#19968;&#20010;URL&#12290;URL&#25351;&#21521;&#19968;&#20010;&#25991;&#20214;&#65292;&#25991;&#20214;&#21253;&#21547;&#19968;&#20123;&#25968;&#25454;&#12290;&#31867;&#20284;&#22320;&#65292;&#24341;&#29992;&#25351;&#20195;&#19968;&#20010;&#20301;&#32622;&#65292;&#20301;&#32622;&#21253;&#21547;
&#19968;&#20123;&#25968;&#25454;&#12290;</p><p><a name="(idx._(gentag._590))"></a>
&#24341;&#29992;&#26377;&#26102;&#20505;&#21448;&#21483;<span class="emph">&#24038;&#20540;</span> (<span class="emph">L-values</span>)&#12290;&#36825;&#21517;&#23383;&#21453;&#26144;&#20102;&#36825;&#31181;&#25968;&#25454;&#32467;&#26500;&#19982;&#36171;&#20540;&#35821;&#21477;&#24038;&#36793;&#21464;
&#37327;&#30340;&#32852;&#31995;&#12290;&#31867;&#20284;&#22320;&#65292;&#34920;&#36798;&#20540;&#65292;&#27604;&#22914;&#36171;&#20540;&#35821;&#21477;&#21491;&#36793;&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#21483;&#20570;<span class="emph">&#21491;&#20540;</span> (<span class="emph">R-values</span>)&#12290;
<a name="(idx._(gentag._591))"></a></p><p>&#25105;&#20204;&#32771;&#34385;&#20004;&#31181;&#24102;&#26377;&#23384;&#20648;&#22120;&#30340;&#35821;&#35328;&#35774;&#35745;&#12290;&#36825;&#20123;&#35774;&#35745;&#21483;&#20570;<span class="emph">&#26174;&#24335;&#24341;
&#29992;</span> (<span class="emph">explicit reference</span>) &#21644;<span class="emph">&#38544;&#24335;&#24341;&#29992;</span> (<span class="emph">implicit reference</span>)&#12290;
<a name="(idx._(gentag._592))"></a></p><h4 class="heading">4.2<tt>&nbsp;</tt><a name="(part._s4..2)"></a>EXPLICIT-REFS&#65306;&#26174;&#24335;&#24341;&#29992;&#35821;&#35328;<span class="button-group"><a href="#(part._s4..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._593))"></a>
<a name="(idx._(gentag._594))"></a>
&#22312;&#36825;&#31181;&#35774;&#35745;&#20013;&#65292;&#25105;&#20204;&#28155;&#21152;&#24341;&#29992;&#65292;&#20316;&#20026;&#21478;&#19968;&#31181;&#34920;&#36798;&#20540;&#12290;&#37027;&#20040;&#65292;&#25105;&#20204;&#26377;&#65306;</p><blockquote class="SubFlow"><p><span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc} + \mathit{Ref(ExpVal)} \\
\mathit{DenVal} &amp;= \mathit{ExpVal}\end{align*}</span></p><p>&#36825;&#37324;&#65292;<span class="texMathInline">\mathit{Ref(ExpVal)}</span>&#34920;&#31034;&#21253;&#21547;&#34920;&#36798;&#20540;&#30340;&#20301;&#32622;&#24341;&#29992;&#38598;&#21512;&#12290;</p></blockquote><p>&#25105;&#20204;&#27839;&#29992;&#35821;&#35328;&#20013;&#30340;&#32465;&#23450;&#25968;&#25454;&#32467;&#26500;&#65292;&#20294;&#26159;&#28155;&#21152;&#19977;&#20010;&#26032;&#25805;&#20316;&#65292;&#29992;&#26469;&#21019;&#24314;&#21644;&#20351;&#29992;&#24341;&#29992;&#12290;</p><ul><li><p><span class="stt">newref</span>&#65292;&#20998;&#37197;&#26032;&#30340;&#20301;&#32622;&#65292;&#36820;&#22238;&#20854;&#24341;&#29992;&#12290;
<a name="(idx._(gentag._595))"></a></p></li><li><p><span class="stt">deref</span>&#65292;<span class="emph">&#35299;&#24341;&#29992;</span> (<span class="emph">deference</span>) &#65306;&#36820;&#22238;&#24341;&#29992;&#25351;&#21521;&#20301;&#32622;&#22788;&#30340;&#20869;&#23481;&#12290;
<a name="(idx._(gentag._596))"></a></p></li><li><p><span class="stt">setref</span>&#65292;&#25913;&#21464;&#24341;&#29992;&#25351;&#21521;&#20301;&#32622;&#22788;&#30340;&#20869;&#23481;&#12290;
<a name="(idx._(gentag._597))"></a></p></li></ul><p>&#25105;&#20204;&#25226;&#24471;&#21040;&#30340;&#35821;&#35328;&#31216;&#20316; EXPLICIT-REFS&#12290;&#35753;&#25105;&#20204;&#29992;&#36825;&#20123;&#32467;&#26500;&#20889;&#20960;&#20010;&#31243;&#24207;&#12290;</p><p>&#19979;&#38754;&#26159;&#20004;&#20010;&#36807;&#31243; <span class="stt">even</span> &#21644; <span class="stt">odd</span>&#12290;&#23427;&#20204;&#21462;&#19968;&#21442;&#25968;&#65292;&#20294;&#26159;&#24573;&#30053;&#23427;&#65292;&#24182;&#26681;&#25454;&#20301;&#32622;
<span class="stt">x</span> &#22788;&#30340;&#20869;&#23481;&#26159;&#20598;&#25968;&#36824;&#26159;&#22855;&#25968;&#36820;&#22238; 1 &#25110; 0&#12290;&#23427;&#20204;&#19981;&#26159;&#36890;&#36807;&#30452;&#25509;&#20256;&#36882;&#25968;&#25454;&#26469;&#36890;&#20449;&#65292;&#32780;&#26159;&#25913;
&#21464;&#20849;&#20139;&#21464;&#37327;&#30340;&#20869;&#23481;&#12290;<a name="(idx._(gentag._598))"></a><a name="(idx._(gentag._599))"></a></p><p>&#36825;&#20010;&#31243;&#24207;&#21028;&#26029; 13 &#26159;&#21542;&#20026;&#22855;&#25968;&#65292;&#24182;&#36820;&#22238; 1&#12290;&#36807;&#31243; <span class="stt">even</span> &#21644; <span class="stt">odd</span> &#19981;&#24341;&#29992;&#23427;&#20204;&#30340;&#23454;
&#21442;&#65292;&#32780;&#26159;&#26597;&#30475;&#32465;&#23450;&#21040; <span class="stt">x</span> &#30340;&#20301;&#32622;&#20013;&#30340;&#20869;&#23481;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = newref (0)</span></p></td></tr><tr><td><p><span class="stt">in letrec even(dummy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if zero? (deref(x))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">setref(x, -(deref(x), 1));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(odd 888)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">odd(dummy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if zero? (deref(x))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">setref(x, -(deref(x), 1));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(even 888)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin setref(x,13); (odd 888) end</span></p></td></tr></table></blockquote><p>&#36825;&#20010;&#31243;&#24207;&#20351;&#29992;&#22810;&#22768;&#26126;&#30340; <span class="stt">letrec</span>&#65288;ex3.32&#65289;&#21644; <span class="stt">begin</span> &#34920;&#36798;&#24335;
&#65288;ex4.4&#65289;&#12290;<span class="stt">begin</span> &#34920;&#36798;&#24335;&#25353;&#39034;&#24207;&#27714;&#27599;&#20010;&#23376;&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#24182;&#36820;
&#22238;&#26368;&#21518;&#19968;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;
<a name="(idx._(gentag._600))"></a></p></blockquote><p>&#20026;&#20102;&#21516;&#25105;&#20204;&#30340;&#21333;&#21442;&#25968;&#35821;&#35328;&#20445;&#25345;&#19968;&#33268;&#65292;&#25105;&#20204;&#32473; <span class="stt">even</span> &#21644; <span class="stt">odd</span> &#20256;&#19968;&#20010;&#26080;&#29992;&#21442;&#25968;&#65307;&#22914;
&#26524;&#25105;&#20204;&#30340;&#36807;&#31243;&#25903;&#25345;&#20219;&#24847;&#25968;&#37327;&#30340;&#21442;&#25968;&#65288;ex3.21&#65289;&#65292;&#36825;&#20123;&#36807;&#31243;&#30340;&#21442;&#25968;&#23601;&#21487;&#20197;&#21435;
&#25481;&#12290;</p><p>&#24403;&#20004;&#20010;&#36807;&#31243;&#38656;&#35201;&#20998;&#20139;&#24456;&#22810;&#37327;&#26102;&#65292;&#36825;&#31181;&#36890;&#20449;&#26041;&#24335;&#24456;&#26041;&#20415;&#65307;&#21482;&#38656;&#32473;&#26576;&#20123;&#38543;&#35843;&#29992;&#32780;&#25913;&#21464;&#30340;&#37327;&#36171;&#20540;&#12290;
&#21516;&#26679;&#22320;&#65292;&#19968;&#20010;&#36807;&#31243;&#21487;&#33021;&#36890;&#36807;&#19968;&#38271;&#20018;&#35843;&#29992;&#38388;&#25509;&#35843;&#29992;&#21478;&#19968;&#36807;&#31243;&#12290;&#20108;&#32773;&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#20849;&#20139;&#21464;&#37327;&#30452;&#25509;
&#20132;&#25442;&#25968;&#25454;&#65292;&#23621;&#38388;&#30340;&#36807;&#31243;&#19981;&#38656;&#35201;&#30693;&#36947;&#23427;&#12290;&#22240;&#27492;&#65292;&#20197;&#20849;&#20139;&#21464;&#37327;&#36890;&#20449;&#21487;&#20316;&#20026;&#19968;&#31181;&#38544;&#34255;&#20449;&#24687;&#30340;&#26041;&#24335;&#12290;</p><p><a name="(idx._(gentag._601))"></a>
<a name="(idx._(gentag._602))"></a>
&#36171;&#20540;&#30340;&#21478;&#19968;&#29992;&#36884;&#26159;&#36890;&#36807;&#31169;&#26377;&#21464;&#37327;&#21019;&#24314;&#38544;&#34255;&#29366;&#24577;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><a name="(elem._g-counter)"></a><span class="stt">let g = let counter = newref(0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in proc (dummy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">setref(counter, -(deref(counter), -1));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">deref(counter)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt">in let a = (g 11)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let b = (g 11)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(a,b)</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;&#36807;&#31243; <span class="stt">g</span> &#20445;&#30041;&#20102;&#19968;&#20010;&#31169;&#26377;&#21464;&#37327;&#65292;&#29992;&#26469;&#23384;&#20648; <span class="stt">g</span> &#34987;&#35843;&#29992;&#30340;&#27425;&#25968;&#12290;&#22240;&#27492;&#65292;&#31532;&#19968;&#27425;
&#35843;&#29992; <span class="stt">g</span> &#36820;&#22238; 1&#65292;&#31532;&#20108;&#27425;&#36820;&#22238; 2&#65292;&#25972;&#20010;&#31243;&#24207;&#30340;&#20540;&#20026; -1&#12290;</p><p><a name="(idx._(gentag._603))"></a>
&#19979;&#22270;&#26159; <span class="stt">g</span> &#32465;&#23450;&#26102;&#25152;&#22312;&#30340;&#29615;&#22659;&#12290;&#21487;&#20197;&#35748;&#20026;&#65292;&#36825;&#26159;&#22312; <span class="stt">g</span> &#30340;&#19981;&#21516;&#35843;&#29992;&#20043;&#38388;&#20849;&#20139;&#20449;&#24687;&#12290;
Scheme &#36807;&#31243; <span class="stt">gensym</span> &#29992;&#36825;&#31181;&#25216;&#26415;&#21019;&#24314;&#21807;&#19968;&#31526;&#21495;&#12290;</p><blockquote class="EoplFigure*"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="g-bound.svg" alt="g绑定时的环境" width="418.95pt" height="415.53pt"/></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._604))"></a>
<a name="(idx._(gentag._605))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#36825;&#20010;&#31243;&#24207;&#22914;&#26524;&#20889;&#25104;&#19979;&#38754;&#36825;&#26679;&#20250;&#24590;&#26679;&#65311;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let g = proc (dummy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let counter = newref(0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">setref(counter, -(deref(counter), -1));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">deref(counter)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt">in let a = (g 11)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let b = (g 11)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(a,b)</span></p></td></tr></table></blockquote></blockquote><p>&#22312;EXPLICIT-REFS&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#23384;&#20648;&#20219;&#20309;&#34920;&#36798;&#20540;&#12290;&#24341;&#29992;&#20063;&#26159;&#34920;&#36798;&#20540;&#12290;&#36825;&#24847;&#21619;&#30528;&#25105;&#20204;&#21487;&#20197;&#22312;&#19968;
&#20010;&#20301;&#32622;&#23384;&#20648;&#24341;&#29992;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#31243;&#24207;&#65306;<a name="(idx._(gentag._606))"></a></p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = newref(newref(0))</span></p></td></tr><tr><td><p><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">setref(deref(x), 11);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">deref(deref(x))</span></p></td></tr><tr><td><p><span class="stt">end</span></p></td></tr></table></blockquote><p>&#36825;&#27573;&#31243;&#24207;&#20998;&#37197;&#20102;&#19968;&#20010;&#26032;&#20301;&#32622;&#65292;&#20869;&#23481;&#20026; 0&#12290;&#28982;&#21518;&#65292;&#23427;&#23558; <span class="stt">x</span> &#32465;&#23450;&#21040;&#19968;&#20010;&#20301;&#32622;&#65292;&#20854;&#20869;&#23481;&#20026;&#25351;
&#21521;&#31532;&#19968;&#20010;&#20301;&#32622;&#30340;&#24341;&#29992;&#12290;&#22240;&#27492;&#65292;<span class="stt">deref(x)</span> &#30340;&#20540;&#26159;&#31532;&#19968;&#20010;&#20301;&#32622;&#30340;&#24341;&#29992;&#12290;&#37027;&#20040;&#31243;&#24207;&#27714;
<span class="stt">setref</span> &#30340;&#20540;&#26102;&#65292;&#20250;&#20462;&#25913;&#31532;&#19968;&#20010;&#20301;&#32622;&#65292;&#25972;&#20010;&#31243;&#24207;&#36820;&#22238; 11&#12290;</p><h5 class="heading">4.2.1<tt>&nbsp;</tt><a name="(part._s4..2..1)"></a>&#23384;&#20648;&#22120;&#20256;&#36882;&#35268;&#33539;<span class="button-group"><a href="#(part._s4..2..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._607))"></a>
&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#20219;&#20309;&#34920;&#36798;&#24335;&#37117;&#21487;&#20197;&#26377;&#25928;&#26524;&#12290;&#35201;&#23450;&#20041;&#36825;&#20123;&#25928;&#26524;&#65292;&#25105;&#20204;&#38656;&#35201;&#25551;&#36848;&#27599;&#27425;&#27714;&#20540;&#20351;&#29992;
&#20160;&#20040;&#26679;&#30340;&#23384;&#20648;&#22120;&#65292;&#20197;&#21450;&#27714;&#20540;&#22914;&#20309;&#20462;&#25913;&#23384;&#20648;&#22120;&#12290;</p><p>&#22312;&#35268;&#33539;&#20013;&#65292;&#25105;&#20204;&#29992; <span class="texMathInline">\sigma</span> &#34920;&#31034;&#20219;&#19968;&#23384;&#20648;&#22120;&#65292;&#29992; <span class="texMathInline">\text{[}l=v\text{]}\sigma</span> &#34920;
&#31034;&#21478;&#19968;&#23384;&#20648;&#22120;&#65292;&#38500;&#20102;&#23558;&#20301;&#32622; <span class="texMathInline">l</span> &#26144;&#23556;&#21040; <span class="texMathInline">v</span>&#22806;&#65292;&#23427;&#19982; <span class="texMathInline">\sigma</span> &#30456;&#21516;&#12290;&#26377;&#26102;&#65292;&#28041;&#21450;
<span class="texMathInline">\sigma</span> &#30340;&#26576;&#20010;&#20855;&#20307;&#20540;&#26102;&#65292;&#25105;&#20204;&#31216;&#20043;&#20026;&#23384;&#20648;&#22120;&#30340;<span class="emph">&#29366;&#24577;</span> (<span class="emph">state</span>)&#12290;</p><p><div class="SIntrapara">&#25105;&#20204;&#20351;&#29992;<span class="emph">&#23384;&#20648;&#22120;&#20256;&#36882;&#35268;&#33539;</span> (<span class="emph">store-passing specifications</span>)&#12290;&#22312;&#23384;&#20648;&#22120;&#20256;&#36882;&#35268;&#33539;
&#20013;&#65292;&#23384;&#20648;&#22120;&#20316;&#20026;&#26174;&#24335;&#21442;&#25968;&#20256;&#36882;&#32473; <span class="stt">value-of</span>&#65292;&#24182;&#20316;&#20026; <span class="stt">value-of</span> &#30340;&#32467;&#26524;&#36820;&#22238;&#12290;&#37027;
&#20040;&#25105;&#20204;&#21487;&#20197;&#20889;&#65306;<a name="(idx._(gentag._608))"></a>
<span class="texMathDisplay"><span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">)</span> = <span class="stt">(</span><span class="texMathInline">val_1</span><span class="stt">,</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span></span>
</div><div class="SIntrapara"><blockquote class="SubFlow"><p>&#23427;&#26029;&#35328;&#22312;&#29615;&#22659;&#20026; <span class="texMathInline">\rho</span>&#65292;&#23384;&#20648;&#22120;&#29366;&#24577;&#20026; <span class="texMathInline">\sigma_0</span> &#26102;&#65292;&#34920;&#36798;&#24335; <span class="texMathInline">exp_1</span> &#30340;&#36820;&#22238;&#20540;
&#20026; <span class="texMathInline">val_1</span>&#65292;&#24182;&#19988;&#21487;&#33021;&#25226;&#23384;&#20648;&#22120;&#20462;&#25913;&#20026;&#21478;&#19968;&#29366;&#24577; <span class="texMathInline">\sigma_1</span>&#12290;</p></blockquote></div></p><p><div class="SIntrapara">&#36825;&#26679;&#25105;&#20204;&#23601;&#33021;&#20889;&#20986; <span class="stt">const-exp</span> &#20043;&#31867;&#30340;&#26080;&#25928;&#26524;&#25805;&#20316;&#65306;
<span class="texMathDisplay"><span class="stt">(value-of (const-exp </span><span class="texMathInline">n</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma</span><span class="stt">)</span> = <span class="stt">(</span><span class="texMathInline">n</span><span class="stt">,</span><span class="texMathInline">\sigma</span><span class="stt">)</span></span>
</div><div class="SIntrapara"><blockquote class="SubFlow"><p>&#20197;&#27492;&#34920;&#26126;&#27714;&#34920;&#36798;&#24335;&#30340;&#20540;&#19981;&#20250;&#20462;&#25913;&#23384;&#20648;&#22120;&#12290;</p></blockquote></div></p><p><div class="SIntrapara"><span class="stt">diff-exp</span> &#30340;&#35268;&#33539;&#23637;&#31034;&#20102;&#22914;&#20309;&#23450;&#20041;&#26377;&#39034;&#24207;&#30340;&#34892;&#20026;&#12290;
<span class="texMathDisplay">\infer{<span class="stt">(value-of (diff-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">)</span> =
       <span class="stt">(</span><span class="texMathInline">\lceil\lfloor val_1 \rfloor - \lfloor val_2 \rfloor\rceil</span><span class="stt">,</span><span class="texMathInline">\sigma_2</span><span class="stt">)</span>}
      {\begin{alignedat}{-1}
         <span class="stt">(value-of (diff-exp </span><span class="texMathInline">exp_1</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">)</span> &amp;= <span class="stt">(</span><span class="texMathInline">val_1</span><span class="stt">,</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span> \\
         <span class="stt">(value-of (diff-exp </span><span class="texMathInline">exp_2</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_1</span><span class="stt">)</span> &amp;= <span class="stt">(</span><span class="texMathInline">val_2</span><span class="stt">,</span><span class="texMathInline">\sigma_2</span><span class="stt">)</span>
       \end{alignedat}}</span>
</div><div class="SIntrapara"><blockquote class="SubFlow"><p>&#36825;&#37324;&#65292;&#25105;&#20204;&#20174;&#29366;&#24577;&#20026; <span class="texMathInline">\sigma_0</span> &#30340;&#23384;&#20648;&#22120;&#24320;&#22987;&#65292;&#39318;&#20808;&#27714; <span class="texMathInline">exp_1</span> &#30340;&#20540;&#12290;<span class="texMathInline">exp_1</span>
&#36820;&#22238;&#20540;&#20026; <span class="texMathInline">val_1</span>&#65292;&#20294;&#23427;&#21487;&#33021;&#26377;&#25928;&#26524;&#65292;&#25226;&#23384;&#20648;&#22120;&#29366;&#24577;&#20462;&#25913;&#20026; <span class="texMathInline">\sigma_1</span>&#12290;&#28982;&#21518;&#25105;&#20204;&#20174;
<span class="texMathInline">exp_1</span> &#20462;&#25913;&#36807;&#30340;&#23384;&#20648;&#22120;&#8212;&#8212;&#20063;&#23601;&#26159; <span class="texMathInline">\sigma_1</span>&#8212;&#8212;&#24320;&#22987;&#65292;&#27714; <span class="texMathInline">exp_2</span> &#30340;&#20540;&#12290;
<span class="texMathInline">exp_2</span> &#21516;&#26679;&#36820;&#22238;&#19968;&#20010;&#20540; <span class="texMathInline">val_2</span>&#65292;&#24182;&#25226;&#23384;&#20648;&#22120;&#29366;&#24577;&#20462;&#25913;&#20026; <span class="texMathInline">\sigma_2</span>&#12290;&#20043;&#21518;&#65292;&#25972;
&#20010;&#34920;&#36798;&#24335;&#36820;&#22238; <span class="texMathInline">val_1 - val2</span>&#65292;&#23545;&#23384;&#20648;&#22120;&#19981;&#20877;&#26377;&#20219;&#20309;&#25928;&#26524;&#65292;&#25152;&#20197;&#23384;&#20648;&#22120;&#29366;&#24577;&#30041;&#22312;
<span class="texMathInline">\sigma_2</span>&#12290;</p></blockquote></div></p><p>&#20877;&#26469;&#35797;&#35797;&#26465;&#20214;&#34920;&#36798;&#24335;&#12290;
<span class="texMathDisplay">\infer{\begin{alignedat}{-1}
         &amp;<span class="hspace">&nbsp;</span><span class="stt">(value-of (if-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">exp_3</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">) </span> \\
         &amp;\hphantom{xx}= \begin{cases}
                          <span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_1</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#t</span> \\
                          <span class="stt">(value-of </span><span class="texMathInline">exp_3</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_1</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#f</span> \hphantom{x}
                        \end{cases}
       \end{alignedat}}
      {<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">)</span> = <span class="stt">(</span><span class="texMathInline">val_1</span><span class="stt">,</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span>}</span></p><p>&#19968;&#20010; <span class="stt">if-exp</span> &#20174;&#29366;&#24577; <span class="texMathInline">\sigma_0</span> &#24320;&#22987;&#65292;&#27714;&#26465;&#20214;&#34920;&#36798;&#24335; <span class="texMathInline">exp_1</span> &#30340;&#20540;&#65292;&#36820;&#22238;&#20540;
<span class="texMathInline">val_1</span>&#65292;&#23558;&#23384;&#20648;&#22120;&#29366;&#24577;&#20462;&#25913;&#20026; <span class="texMathInline">\sigma_1</span>&#12290;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#32467;&#26524;&#21487;&#33021;&#26159; <span class="texMathInline">exp_2</span> &#25110;
<span class="texMathInline">exp_3</span> &#30340;&#32467;&#26524;&#65292;&#20108;&#32773;&#37117;&#22312;&#24403;&#21069;&#29615;&#22659; <span class="texMathInline">\rho</span> &#21644; <span class="texMathInline">exp_1</span> &#30041;&#19979;&#30340;&#23384;&#20648;&#22120;&#29366;&#24577;
<span class="texMathInline">\sigma_1</span> &#20013;&#27714;&#20540;&#12290;</p><blockquote class="EoplExercise"><p><a name="(elem._ex4..2)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986; <span class="stt">zero?-exp</span> &#30340;&#35268;&#33539;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..3)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986; <span class="stt">call-exp</span> &#30340;&#35268;&#33539;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..4)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._609))"></a>
&#20889;&#20986; <span class="stt">begin</span> &#34920;&#36798;&#24335;&#30340;&#35268;&#33539;&#12290;
<span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">begin </span><span class="texMathInline">\mathit{Expression}</span><span class="stt"> </span><span class="texMathInline">\{}<span class="stt">; </span><span class="texMathInline">\mathit{Expression}</span><span class="texMathInline">\</span>^{*}</span><span class="stt"> end</span></span></p><p><span class="stt">begin</span> &#34920;&#36798;&#24335;&#21253;&#21547;&#19968;&#20010;&#25110;&#22810;&#20010;&#20998;&#21495;&#20998;&#38548;&#30340;&#23376;&#34920;&#36798;&#24335;&#65292;&#25353;&#39034;&#24207;&#27714;&#36825;&#20123;&#23376;&#34920;&#36798;&#30340;&#20540;&#65292;&#24182;&#36820;
&#22238;&#26368;&#21518;&#19968;&#20010;&#30340;&#32467;&#26524;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..5)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._610))"></a>
&#20889;&#20986; <span class="stt">list</span>&#65288;ex3.10&#65289;&#30340;&#35268;&#33539;&#12290;</p></blockquote><h5 class="heading">4.2.2<tt>&nbsp;</tt><a name="(part._s4..2..2)"></a>&#23450;&#20041;&#26174;&#24335;&#24341;&#29992;&#25805;&#20316;<span class="button-group"><a href="#(part._s4..2..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._611))"></a>
&#22312; EXPLICIT-REFS &#20013;&#65292;&#25105;&#20204;&#24517;&#39035;&#23450;&#20041;&#19977;&#20010;&#25805;&#20316;&#65306;<span class="stt">newref</span>&#12289;<span class="stt">deref</span> &#21644;
<span class="stt">setref</span>&#12290;&#23427;&#20204;&#30340;&#35821;&#27861;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">newref (</span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">newref-exp (exp1)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">deref (</span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">deref-exp (exp1)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">setref (</span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> , </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">setref-exp (exp1 exp2)</span>}\end{align*}</span></p><p>&#36825;&#20123;&#25805;&#20316;&#30340;&#34892;&#20026;&#23450;&#20041;&#22914;&#19979;&#12290;
<span class="texMathDisplay">\infer{<span class="stt">(value-of (newref-exp </span><span class="texMathInline">exp</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">) =</span><span class="stt">
</span><span class="stt">((ref-val </span><span class="texMathInline">l</span><span class="stt">),[</span><span class="texMathInline">l</span><span class="stt">=</span><span class="texMathInline">val</span><span class="stt">]</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span>}
      {<span class="stt">(value-of </span><span class="texMathInline">exp</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">)</span> = <span class="stt">(</span><span class="texMathInline">val</span><span class="stt">,</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span> \quad l \notin \text{dom}(\sigma_1)}</span></p><p>&#36825;&#26465;&#35268;&#21017;&#26159;&#35828;&#65306;<span class="stt">newref-exp</span> &#27714;&#20986;&#25805;&#20316;&#25968;&#30340;&#20540;&#65292;&#24471;&#21040;&#19968;&#20010;&#23384;&#20648;&#22120;&#65292;&#28982;&#21518;&#20998;&#37197;&#19968;&#20010;&#26032;&#20301;&#32622;
<span class="texMathInline">l</span>&#65292;&#23558;&#21442;&#25968;&#20540; <span class="texMathInline">val</span> &#25918;&#21040;&#36825;&#19968;&#20301;&#32622;&#65292;&#20197;&#27492;&#26469;&#25193;&#23637;&#37027;&#20010;&#23384;&#20648;&#22120;&#12290;&#28982;&#21518;&#23427;&#36820;&#22238;&#26032;&#20301;&#32622;
<span class="texMathInline">l</span> &#30340;&#24341;&#29992;&#12290;&#36825;&#24847;&#21619;&#30528; <span class="texMathInline">l</span> &#19981;&#22312; <span class="texMathInline">\sigma_1</span> &#30340;&#23450;&#20041;&#22495;&#20869;&#12290;
<a name="(idx._(gentag._612))"></a>
<span class="texMathDisplay">\infer{<span class="stt">(value-of (deref-exp </span><span class="texMathInline">exp</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">) =</span><span class="stt">
</span><span class="stt">(</span><span class="texMathInline">\sigma_1(l)</span><span class="stt">,</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span>}
      {<span class="stt">(value-of </span><span class="texMathInline">exp</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">)</span> = <span class="stt">(</span><span class="texMathInline">val</span><span class="stt">,</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span>}</span></p><p>&#36825;&#26465;&#35268;&#21017;&#26159;&#35828;&#65306;<span class="stt">deref-exp</span> &#27714;&#20986;&#25805;&#20316;&#25968;&#30340;&#20540;&#65292;&#28982;&#21518;&#25226;&#23384;&#20648;&#22120;&#29366;&#24577;&#25913;&#20026; <span class="texMathInline">\sigma_1</span>&#12290;
&#21442;&#25968;&#30340;&#20540;&#24212;&#26159;&#20301;&#32622; <span class="texMathInline">l</span> &#30340;&#24341;&#29992;&#12290;&#28982;&#21518; <span class="stt">deref-exp</span> &#36820;&#22238; <span class="texMathInline">\sigma_1</span> &#20013; <span class="texMathInline">l</span> &#22788;
&#30340;&#20869;&#23481;&#65292;&#19981;&#20877;&#26356;&#25913;&#23384;&#20648;&#22120;&#12290;
<span class="texMathDisplay">\infer{<span class="stt">(value-of (setref-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">) =</span><span class="stt">
</span><span class="stt">(</span><span class="texMathInline">\lceil 23 \rceil</span><span class="stt">,[</span><span class="texMathInline">l</span><span class="stt">=</span><span class="texMathInline">val</span><span class="stt">]</span><span class="texMathInline">\sigma_2</span><span class="stt">)</span>}
      {\begin{gathered}
        <span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">)</span> = <span class="stt">(</span><span class="texMathInline">l</span><span class="stt">,</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span> \\
        <span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_1</span><span class="stt">)</span> = <span class="stt">(</span><span class="texMathInline">val</span><span class="stt">,</span><span class="texMathInline">\sigma_2</span><span class="stt">)</span>
       \end{gathered}}</span></p><p><a name="(idx._(gentag._613))"></a>
&#36825;&#26465;&#35268;&#21017;&#26159;&#35828;&#65306;<span class="stt">setref-exp</span> &#20174;&#24038;&#21040;&#21491;&#27714;&#25805;&#20316;&#25968;&#30340;&#20540;&#12290;&#31532;&#19968;&#20010;&#25805;&#20316;&#25968;&#30340;&#20540;&#24517;&#39035;&#26159;&#26576;&#20010;&#20301;
&#32622; <span class="texMathInline">l</span> &#30340;&#24341;&#29992;&#65307;&#28982;&#21518; <span class="stt">setref-exp</span> &#25226;&#31532;&#20108;&#20010;&#21442;&#25968;&#30340;&#20540; <span class="texMathInline">val</span> &#25918;&#21040;&#20301;&#32622; <span class="texMathInline">l</span> &#22788;&#65292;
&#20197;&#27492;&#26356;&#26032;&#23384;&#20648;&#22120;&#12290;<span class="stt">setref-exp</span> &#24212;&#35813;&#36820;&#22238;&#20160;&#20040;&#21602;&#65311;&#23427;&#21487;&#20197;&#36820;&#22238;&#20219;&#20309;&#20540;&#12290;&#20026;&#20102;&#24378;&#35843;&#36825;&#19968;&#36873;
&#25321;&#30340;&#38543;&#24847;&#24615;&#65292;&#25105;&#20204;&#35753;&#23427;&#36820;&#22238; 23&#12290;&#22240;&#20026;&#25105;&#20204;&#23545; <span class="stt">setref-exp</span> &#30340;&#36820;&#22238;&#20540;&#19981;&#24863;&#20852;&#36259;&#65292;&#25105;&#20204;&#35828;
&#36825;&#20010;&#34920;&#36798;&#24335;&#30340;&#25191;&#34892;<span class="emph">&#27714;&#25928;&#26524;</span> (<span class="emph">for effect</span>) &#32780;&#19981;&#27714;&#20540;&#12290;
<a name="(idx._(gentag._614))"></a>
<a name="(idx._(gentag._615))"></a>
<a name="(idx._(gentag._616))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex4..6)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#19978;&#38754;&#30340;&#35268;&#21017;&#65292;&#35753; <span class="stt">setref-exp</span> &#36820;&#22238;&#21491;&#36793;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..7)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#19978;&#38754;&#30340;&#35268;&#21017;&#65292;&#35753; <span class="stt">setref-exp</span> &#36820;&#22238;&#20301;&#32622;&#30340;&#21407;&#20869;&#23481;&#12290;
<a name="(idx._(gentag._617))"></a></p></blockquote><h5 class="heading">4.2.3<tt>&nbsp;</tt><a name="(part._s4..2..3)"></a>&#23454;&#29616;<span class="button-group"><a href="#(part._s4..2..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._618))"></a>
&#36804;&#20170;&#20026;&#27490;&#65292;&#25105;&#20204;&#20351;&#29992;&#30340;&#35268;&#33539;&#35821;&#35328;&#21487;&#20197;&#36731;&#26494;&#25551;&#36848;&#26377;&#25928;&#26524;&#35745;&#31639;&#30340;&#26399;&#26395;&#34892;&#20026;&#65292;&#20294;&#26159;&#23427;&#27809;&#26377;&#20307;&#29616;&#23384;&#20648;
&#22120;&#30340;&#19968;&#20010;&#35201;&#28857;&#65306;&#24341;&#29992;&#26368;&#32456;&#25351;&#21521;&#29616;&#23454;&#19990;&#30028;&#30340;&#20869;&#23384;&#20013;&#26576;&#19968;&#30495;&#23454;&#30340;&#20301;&#32622;&#12290;&#22240;&#20026;&#25105;&#20204;&#21482;&#26377;&#19968;&#20010;&#29616;&#23454;&#19990;
&#30028;&#65292;&#25105;&#20204;&#30340;&#31243;&#24207;&#21482;&#33021;&#35760;&#24405;&#23384;&#20648;&#22120;&#30340;&#19968;&#20010;&#29366;&#24577; <span class="texMathInline">\sigma</span>&#12290;</p><p>&#22312;&#25105;&#20204;&#30340;&#23454;&#29616;&#20013;&#65292;&#25105;&#20204;&#21033;&#29992;&#36825;&#19968;&#20107;&#23454;&#65292;&#29992; Scheme &#20013;&#30340;&#23384;&#20648;&#22120;&#24314;&#27169;&#23384;&#20648;&#22120;&#12290;&#36825;&#26679;&#65292;&#25105;&#20204;&#23601;&#33021;
&#29992; Scheme &#20013;&#30340;&#25928;&#26524;&#24314;&#27169;&#25928;&#26524;&#12290;</p><p>&#25105;&#20204;&#29992;&#19968;&#20010; Scheme &#20540;&#34920;&#31034;&#23384;&#20648;&#22120;&#29366;&#24577;&#65292;&#20294;&#26159;&#25105;&#20204;&#19981;&#20687;&#35268;&#33539;&#24314;&#35758;&#30340;&#37027;&#26679;&#30452;&#25509;&#20256;&#36882;&#21644;&#36820;&#22238;&#23427;&#65292;
&#30456;&#21453;&#65292;&#25105;&#20204;&#22312;&#19968;&#20010;&#20840;&#23616;&#21464;&#37327;&#20013;&#35760;&#24405;&#29366;&#24577;&#65292;&#23454;&#29616;&#20195;&#30721;&#20013;&#30340;&#25152;&#26377;&#36807;&#31243;&#37117;&#33021;&#35775;&#38382;&#23427;&#12290;&#36825;&#24456;&#20687;&#31034;&#20363;&#31243;
&#24207; <span class="stt">even/odd</span> &#20351;&#29992;&#20849;&#20139;&#20301;&#32622;&#65292;&#32780;&#19981;&#26159;&#30452;&#25509;&#20256;&#36882;&#21442;&#25968;&#12290;&#20351;&#29992;&#21333;&#19968;&#20840;&#23616;&#21464;&#37327;&#26102;&#65292;&#25105;&#20204;&#20063;&#20960;
&#20046;&#19981;&#38656;&#35201;&#29702;&#35299; Scheme &#20013;&#30340;&#25928;&#26524;&#12290;</p><p>&#25105;&#20204;&#36824;&#26159;&#35201;&#36873;&#25321;&#22914;&#20309;&#29992; Scheme &#20540;&#24314;&#27169;&#23384;&#20648;&#22120;&#12290;&#25105;&#20204;&#36873;&#25321;&#30340;&#21487;&#33021;&#26159;&#26368;&#31616;&#21333;&#30340;&#27169;&#22411;&#65306;&#20197;&#34920;&#36798;&#20540;
&#21015;&#34920;&#20316;&#20026;&#23384;&#20648;&#22120;&#65292;&#20197;&#20195;&#34920;&#21015;&#34920;&#20301;&#32622;&#30340;&#25968;&#23383;&#34920;&#31034;&#24341;&#29992;&#12290;&#20998;&#37197;&#26032;&#24341;&#29992;&#23601;&#26159;&#32473;&#21015;&#34920;&#26411;&#23614;&#28155;&#21152;&#26032;&#20540;&#65307;
&#26356;&#26032;&#23384;&#20648;&#22120;&#21017;&#24314;&#27169;&#20026;&#25353;&#38656;&#22797;&#21046;&#21015;&#34920;&#30340;&#19968;&#22823;&#37096;&#20998;&#12290;&#20195;&#30721;&#22914; &#21644;
fig-4.2 &#25152;&#31034;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">empty-store</span></span> : <span class="texMathInline">() \to \mathit{Sto}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-store</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="emph"><span style="font-weight: bold">&#29992;&#27861;</span> : Scheme &#21464;&#37327;&#65292;&#21253;&#21547;&#23384;&#20648;&#22120;&#24403;&#21069;&#30340;&#29366;&#24577;&#12290;&#21021;&#22987;&#20540;&#26080;&#24847;&#20041;&#12290;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">get-store</span></span> : <span class="texMathInline">() \to \mathit{Sto}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">get-store</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">initialize-store!</span></span> : <span class="texMathInline">() \to \mathit{Unspecified}</span></td></tr><tr><td><span class="emph"><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(initialize-store!)</span> &#23558;&#23384;&#20648;&#22120;&#35774;&#20026;&#31354;&#12290;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">initialize-store!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-store</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">reference?</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">reference?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">integer?</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">newref</span></span> : <span class="texMathInline">\mathit{ExpVal} \to \mathit{Ref}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">newref</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">next-ref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">next-ref</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">deref</span></span> : <span class="texMathInline">\mathit{Ref} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">deref</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ref</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span><span class="hspace">&nbsp;</span><span class="RktSym">ref</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#25305;&#21155;&#30340;&#23384;&#20648;&#22120;&#27169;&#22411;<a name="(elem._fig-4..1)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">setref!</span></span> : <span class="texMathInline">\mathit{Ref} \times \mathit{ExpVal} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="emph"><span style="font-weight: bold">&#29992;&#27861;</span> : &#38500;&#20102;&#25226;&#20301;&#32622; <span class="stt">ref</span> &#30340;&#20540;&#35774;&#20026; <span class="stt">val</span>&#65292;<span class="stt">the-store</span> &#19982;&#21407;&#29366;&#24577;&#30456;&#21516;&#12290;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">setref!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ref</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letrec</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">setref-inner</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="emph"><span style="font-weight: bold">&#29992;&#27861;</span> : &#36820;&#22238;&#19968;&#21015;&#34920;&#65292;&#38500;&#20102;&#20301;&#32622; ref1 &#22788;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="emph">&#20540;&#20026; val&#65292;&#19982; store1 &#30456;&#21516;&#12290;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">store1</span><span class="hspace">&nbsp;</span><span class="RktSym">ref1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">store1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-reference</span><span class="hspace">&nbsp;</span><span class="RktSym">ref</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">ref1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">store1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">store1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref-inner</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">store1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">ref1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref-inner</span><span class="hspace">&nbsp;</span><span class="RktSym">the-store</span><span class="hspace">&nbsp;</span><span class="RktSym">ref</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#25305;&#21155;&#30340;&#23384;&#20648;&#22120;&#27169;&#22411;&#65292;&#32493;<a name="(elem._fig-4..2)"></a></p></blockquote></blockquote><p>&#36825;&#31181;&#34920;&#31034;&#26497;&#20854;&#20302;&#25928;&#12290;&#19968;&#33324;&#30340;&#20869;&#23384;&#25805;&#20316;&#22823;&#33268;&#22312;&#24120;&#25968;&#26102;&#38388;&#20869;&#23436;&#25104;&#65292;&#20294;&#26159;&#37319;&#29992;&#25105;&#20204;&#30340;&#34920;&#31034;&#65292;&#36825;&#20123;&#25805;
&#20316;&#25152;&#38656;&#30340;&#26102;&#38388;&#19982;&#23384;&#20648;&#22120;&#22823;&#23567;&#25104;&#27491;&#27604;&#12290;&#24403;&#28982;&#65292;&#30495;&#27491;&#23454;&#29616;&#36215;&#26469;&#19981;&#20250;&#36825;&#20040;&#20570;&#65292;&#20294;&#36825;&#36275;&#20197;&#36798;&#21040;&#25105;&#20204;&#30340;
&#30446;&#30340;&#12290;</p><p>&#25105;&#20204;&#32473;&#34920;&#36798;&#20540;&#25968;&#25454;&#31867;&#22411;&#26032;&#22686;&#19968;&#31181;&#21464;&#20307; <span class="stt">ref-val</span>&#65292;&#28982;&#21518;&#20462;&#25913; <span class="stt">value-of-program</span>&#65292;
&#22312;&#27599;&#27425;&#27714;&#20540;&#20043;&#21069;&#21021;&#22987;&#21270;&#23384;&#20648;&#22120;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{SchemeVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-store!</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986; <span class="stt">value-of</span> &#20013;&#19982; <span class="stt">newref</span>&#12289;<span class="stt">deref</span> &#21644; <span class="stt">setref</span> &#30456;
&#20851;&#30340;&#35821;&#21477;&#12290;&#36825;&#20123;&#35821;&#21477;&#22914; &#25152;&#31034;&#12290;</p></blockquote><p>&#25105;&#20204;&#21487;&#20197;&#32473;&#35813;&#31995;&#32479;&#28155;&#21152;&#19968;&#20123;<a name="(elem._trace-instrument)"></a>&#36741;&#21161;&#36807;&#31243;&#65292;&#25226;&#29615;&#22659;&#12289;&#36807;&#31243;&#21644;&#23384;
&#20648;&#22120;&#36716;&#25442;&#20026;&#26356;&#26131;&#35835;&#30340;&#24418;&#24335;&#65292;&#20063;&#21487;&#20197;&#25913;&#21892;&#31995;&#32479;&#65292;&#22312;&#20195;&#30721;&#20013;&#30340;&#20851;&#38190;&#20301;&#32622;&#25171;&#21360;&#28040;&#24687;&#12290;&#25105;&#20204;&#36824;&#20351;&#29992;&#36807;
&#31243;&#25226;&#29615;&#22659;&#12289;&#36807;&#31243;&#21644;&#23384;&#20648;&#22120;&#36716;&#25442;&#20026;&#26356;&#26131;&#35835;&#30340;&#24418;&#24335;&#12290;&#24471;&#20986;&#30340;&#26085;&#24535;&#35814;&#32454;&#25551;&#36848;&#20102;&#31995;&#32479;&#30340;&#21160;&#20316;&#12290;&#20856;&#22411;&#20363;
&#23376;&#22914; &#21644; fig-4.5 &#25152;&#31034;&#12290;&#27492;&#22806;&#65292;&#36825;&#19968;&#36319;&#36394;&#26085;&#24535;&#36824;&#34920;&#26126;&#65292;
&#24046;&#20540;&#34920;&#36798;&#24335;&#30340;&#21442;&#25968;&#25353;&#20174;&#24038;&#21040;&#21491;&#30340;&#39034;&#24207;&#27714;&#20540;&#12290;
<a name="(idx._(gentag._619))"></a>
<a name="(idx._(gentag._620))"></a>
<a name="(idx._(gentag._621))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex4..8)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25351;&#20986;&#25105;&#20204;&#23454;&#29616;&#30340;&#23384;&#20648;&#22120;&#20013;&#65292;&#21040;&#24213;&#26159;&#21738;&#20123;&#25805;&#20316;&#33457;&#36153;&#20102;&#32447;&#24615;&#26102;&#38388;&#32780;&#38750;&#24120;&#25968;&#26102;&#38388;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..9)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#29992; Scheme &#21521;&#37327;&#34920;&#31034;&#23384;&#20648;&#22120;&#65292;&#20174;&#32780;&#23454;&#29616;&#24120;&#25968;&#26102;&#38388;&#25805;&#20316;&#12290;&#29992;&#36825;&#31181;&#34920;&#31034;&#20250;&#22833;&#21435;&#20160;&#20040;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..10)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._622))"></a>
&#23454;&#29616;{ex4.4} &#20013;&#23450;&#20041;&#30340; <span class="stt">begin</span> &#34920;&#36798;&#24335;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..11)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._623))"></a>
&#23454;&#29616;ex4.5 &#20013;&#30340; <span class="stt">list</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..12)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._624))"></a>
&#20687;&#35299;&#37322;&#22120;&#20013;&#23637;&#31034;&#30340;&#65292;&#25105;&#20204;&#23545;&#23384;&#20648;&#22120;&#30340;&#29702;&#35299;&#22522;&#20110; Scheme &#25928;&#26524;&#30340;&#21547;&#20041;&#12290;&#20855;&#20307;&#22320;&#35828;&#65292;&#25105;&#20204;&#24471;&#30693;&#36947;
&#22312; Scheme &#31243;&#24207;&#20013;&#36825;&#20123;&#25928;&#26524;<span class="emph">&#20309;&#26102;</span>&#20135;&#29983;&#12290;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986;&#26356;&#36148;&#21512;&#35268;&#33539;&#30340;&#35299;&#37322;&#22120;&#65292;&#20174;&#32780;&#36991;
&#20813;&#36825;&#31181;&#20381;&#36182;&#12290;&#22312;&#36825;&#19968;&#35299;&#37322;&#22120;&#20013;&#65292;<span class="stt">value-of</span> &#21516;&#26102;&#36820;&#22238;&#20540;&#21644;&#23384;&#20648;&#22120;&#65292;&#23601;&#20687;&#35268;&#33539;&#20013;&#37027;&#26679;&#12290;&#36825;
&#19968;&#35299;&#37322;&#22120;&#30340;&#29255;&#27573;&#22914; &#25152;&#31034;&#12290;&#25105;&#20204;&#31216;&#20043;&#20026;<span class="emph">&#20256;&#36882;&#23384;&#20648;&#22120;&#30340;&#35299;&#37322;&#22120;</span> (<span class="emph">store-passing
interpreter</span>)&#12290;&#34917;&#20840;&#36825;&#20010;&#35299;&#37322;&#22120;&#65292;&#22788;&#29702;&#25972;&#20010; EXPLICIT-REFS &#35821;&#35328;&#12290;</p><p>&#36807;&#31243;&#21487;&#33021;&#20462;&#25913;&#23384;&#20648;&#22120;&#26102;&#65292;&#19981;&#20165;&#36820;&#22238;&#36890;&#24120;&#30340;&#20540;&#65292;&#36824;&#35201;&#36820;&#22238;&#19968;&#20010;&#26032;&#23384;&#20648;&#22120;&#12290;&#23427;&#20204;&#21253;&#21547;&#22312;&#21517;&#20026;
<span class="stt">answer</span> &#30340;&#25968;&#25454;&#31867;&#22411;&#20043;&#20013;&#12290;&#23436;&#25104;&#36825;&#20010; <span class="stt">value-of</span> &#30340;&#23450;&#20041;&#12290;
<a name="(idx._(gentag._625))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..13)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._626))"></a>
&#25193;&#23637;&#21069;&#19968;&#36947;&#32451;&#20064;&#20013;&#30340;&#35299;&#37322;&#22120;&#65292;&#25903;&#25345;&#22810;&#21442;&#25968;&#36807;&#31243;&#12290;
<a name="(idx._(gentag._627))"></a></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref-exp</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">ref-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">v1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">deref-exp</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ref1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">v1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ref1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">setref-exp</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">begin</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">23</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p><blockquote class="caption"><p><span class="stt">value-of</span> &#30340;&#26174;&#24335;&#24341;&#29992;&#25805;&#20316;&#35821;&#21477;
<a name="(idx._(gentag._628))"></a><a name="(elem._fig-4..3)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&gt; (run "</span></p></td></tr><tr><td><p><span class="stt">let x = newref(22)</span></p></td></tr><tr><td><p><span class="stt">in let f = proc (z) let zz = newref(-(z,deref(x)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in deref(zz)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 66), (f 55))")</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let x</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 0</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let x &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((x #(struct:ref-val 0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(i #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(v #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:num-val 10)))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 22)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let f</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let f &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((f</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">z</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">((x #(struct:ref-val 0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(i #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(v #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(x #(struct:num-val 10)))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:ref-val 0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(i #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(v #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:num-val 10)))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 22)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; proc z &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((z #(struct:num-val 66))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:ref-val 0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(i #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(v #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:num-val 10)))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 22)))</span></p></td></tr></table><blockquote class="caption"><p>EXPLICIT-REFS&#30340;&#27714;&#20540;&#36319;&#36394;&#26085;&#24535;<a name="(elem._fig-4..4)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let zz</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 1</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let zz &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((zz #(struct:ref-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(z #(struct:num-val 66))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:ref-val 0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(i #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(v #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:num-val 10)))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 22)) (1 #(struct:num-val 44)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; proc z &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((z #(struct:num-val 55))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:ref-val 0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(i #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(v #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:num-val 10)))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 22)) (1 #(struct:num-val 44)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let zz</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 2</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let zz &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((zz #(struct:ref-val 2))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(z #(struct:num-val 55))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:ref-val 0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(i #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(v #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(x #(struct:num-val 10)))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 22))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 44))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 33)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">#(struct:num-val 11)</span></p></td></tr><tr><td><p><span class="stt">&gt;</span></p></td></tr></table><blockquote class="caption"><p>EXPLICIT-REFS&#30340;&#27714;&#20540;&#36319;&#36394;&#26085;&#24535;&#65292;&#32493;<a name="(elem._fig-4..5)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktSym">answer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-val?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">store</span><span class="hspace">&nbsp;</span><span class="RktSym">store?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Env} \times \mathit{Sto} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">store</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">store</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-store</span><span class="hspace">&nbsp;</span><span class="RktSym">store</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">store</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">store</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">new-store</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;bool</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">new-store</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">new-store</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">store</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">new-store</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ref1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;ref</span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="hspace">&nbsp;</span><span class="RktSym">ref1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-store</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>ex4.12&#65292;&#20256;&#36882;&#23384;&#20648;&#22120;&#30340;&#35299;&#37322;&#22120;<a name="(elem._fig-4..6)"></a></p></blockquote></blockquote><h4 class="heading">4.3<tt>&nbsp;</tt><a name="(part._s4..3)"></a>IMPLICIT-REFS&#65306;&#38544;&#24335;&#24341;&#29992;&#35821;&#35328;<span class="button-group"><a href="#(part._s4..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._629))"></a>
<a name="(idx._(gentag._630))"></a>
<a name="(idx._(gentag._631))"></a>
&#26174;&#24335;&#24341;&#29992;&#35774;&#35745;&#28165;&#26224;&#25551;&#36848;&#20102;&#20869;&#23384;&#30340;&#20998;&#37197;&#12289;&#35299;&#24341;&#29992;&#21644;&#21464;&#26356;&#65292;&#22240;&#20026;&#26174;&#32780;&#26131;&#35265;&#65292;&#36825;&#20123;&#25805;&#20316;&#37117;&#22312;&#31243;&#24207;&#21592;
&#30340;&#20195;&#30721;&#20043;&#20013;&#12290;</p><p>&#22823;&#22810;&#25968;&#32534;&#31243;&#35821;&#35328;&#37117;&#29992;&#20849;&#21516;&#30340;&#26041;&#24335;&#22788;&#29702;&#20998;&#37197;&#12289;&#35299;&#24341;&#29992;&#21644;&#21464;&#26356;&#65292;&#24182;&#25226;&#23427;&#20204;&#25171;&#21253;&#20026;&#35821;&#35328;&#30340;&#19968;&#37096;&#20998;&#12290;
&#36825;&#26679;&#65292;&#30001;&#20110;&#36825;&#20123;&#25805;&#20316;&#23384;&#22312;&#20110;&#35821;&#35328;&#20869;&#37096;&#65292;&#31243;&#24207;&#21592;&#19981;&#38656;&#35201;&#25285;&#24515;&#20309;&#26102;&#25191;&#34892;&#23427;&#20204;&#12290;
<a name="(idx._(gentag._632))"></a></p><p>&#22312;&#36825;&#31181;&#35774;&#35745;&#20013;&#65292;&#27599;&#20010;&#21464;&#37327;&#37117;&#34920;&#31034;&#19968;&#20010;&#24341;&#29992;&#12290;&#25351;&#20195;&#20540;&#26159;&#21253;&#21547;&#34920;&#36798;&#20540;&#30340;&#20301;&#32622;&#30340;&#24341;&#29992;&#12290;&#24341;&#29992;&#19981;&#20877;&#26159;
&#34920;&#36798;&#20540;&#65292;&#21482;&#33021;&#20316;&#20026;&#21464;&#37327;&#32465;&#23450;&#12290;<a name="(idx._(gentag._633))"></a></p><blockquote class="SubFlow"><p><span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc} \\
\mathit{DenVal} &amp;= \mathit{Ref(ExpVal)}\end{align*}</span></p><p>&#27599;&#27425;&#32465;&#23450;&#25805;&#20316;&#37117;&#20250;&#20998;&#37197;&#19968;&#20010;&#20301;&#32622;&#65306;&#22312;&#27599;&#20010;&#36807;&#31243;&#35843;&#29992;&#22788;&#65292;&#22312; <span class="stt">let</span> &#21644; <span class="stt">letrec</span> &#20013;&#12290;</p></blockquote><p>&#24403;&#21464;&#37327;&#20986;&#29616;&#22312;&#34920;&#36798;&#24335;&#20013;&#65292;&#25105;&#20204;&#39318;&#20808;&#22312;&#29615;&#22659;&#20013;&#26597;&#25214;&#26631;&#35782;&#31526;&#65292;&#25214;&#21040;&#32465;&#23450;&#30340;&#20301;&#32622;&#65292;&#28982;&#21518;&#22312;&#23384;&#20648;&#22120;&#20013;
&#25214;&#20986;&#37027;&#20010;&#20301;&#32622;&#30340;&#20540;&#12290;&#22240;&#27492;&#23545; <span class="stt">var-exp</span>&#65292;&#25105;&#20204;&#26377;&#20010;&#8220;&#20108;&#32423;&#8221;&#31995;&#32479;&#12290;</p><p>&#19968;&#20010;&#20301;&#32622;&#30340;&#20869;&#23481;&#21487;&#29992; <span class="stt">set</span> &#34920;&#36798;&#24335;&#20462;&#25913;&#65292;&#35821;&#27861;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">set </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">assign-exp (var exp1)</span>}\end{align*}</span></p><p>&#36825;&#37324;&#30340; <span class="texMathInline">\mathit{Identifier}</span> &#19981;&#26159;&#34920;&#36798;&#24335;&#30340;&#19968;&#37096;&#20998;&#65292;&#25152;&#20197;&#26080;&#27861;&#35299;&#24341;&#29992;&#12290;&#22312;&#36825;&#31181;&#35774;&#35745;&#20013;&#65292;
&#25105;&#20204;&#35828;&#21464;&#37327;&#26159;<span class="emph">&#21487;&#21464;&#30340;</span> (<span class="emph">mutable</span>)&#65292;&#24847;&#20026;&#21487;&#20197;&#20462;&#25913;&#12290;<a name="(idx._(gentag._634))"></a></p><p><a name="(idx._(gentag._635))"></a>
&#36825;&#31181;&#35774;&#35745;&#21483;&#20570;<span class="emph">&#25353;&#20540;&#35843;&#29992;</span> (<span class="emph">call-by-value</span>)&#65292;&#25110;<span class="emph">&#38544;&#24335;
&#24341;&#29992;</span> (<span class="emph">implicit reference</span>)&#12290;&#22823;&#22810;&#25968;&#32534;&#31243;&#35821;&#35328;&#65292;&#21253;&#25324; Scheme&#65292;&#37117;&#37319;&#32435;&#36825;&#19968;&#35774;&#35745;&#30340;&#26576;&#31181;&#21464;&#20307;&#12290;</p><p> &#26159;&#36825;&#31181;&#35774;&#35745;&#30340;&#20004;&#20010;&#31034;&#20363;&#31243;&#24207;&#12290;&#22240;&#20026;&#24341;&#29992;&#19981;&#20877;&#26159;&#34920;&#36798;&#20540;&#65292;&#25105;&#20204;&#19981;&#33021;
&#20687;<a href="#%28part._s4..2%29" data-pltdoc="x">EXPLICIT-REFS&#65306;&#26174;&#24335;&#24341;&#29992;&#35821;&#35328;</a>&#20013;&#30340;&#20363;&#23376;&#37027;&#26679;&#20570;&#38142;&#24335;&#24341;&#29992;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 0</span></p></td></tr><tr><td><p><span class="stt">in letrec even(dummy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = -(x,1);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(odd 888)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">odd(dummy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = -(x,1);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(even 888)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin set x = 13; (odd -888) end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let g = let count = 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in proc (dummy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set count = -(count,-1);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">count</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt">in let a = (g 11)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let b = (g 11)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(a,b)</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>IMPLICIT-REFS&#20013;&#30340; <span class="stt">odd</span> &#21644; <span class="stt">even</span><a name="(elem._fig-4..7)"></a></p></blockquote></blockquote><h5 class="heading">4.3.1<tt>&nbsp;</tt><a name="(part._s4..3..1)"></a>&#35268;&#33539;<span class="button-group"><a href="#(part._s4..3..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._636))"></a>
&#25105;&#20204;&#21487;&#20197;&#36731;&#26494;&#20889;&#20986;&#35299;&#24341;&#29992;&#21644; <span class="stt">set</span> &#30340;&#35268;&#21017;&#12290;&#29616;&#22312;&#65292;&#29615;&#22659;&#24635;&#26159;&#25226;&#21464;&#37327;&#32465;&#23450;&#21040;&#20301;&#32622;&#65292;&#25152;&#20197;&#24403;
&#21464;&#37327;&#20316;&#20026;&#34920;&#36798;&#24335;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#23558;&#20854;&#35299;&#24341;&#29992;&#65306;
<span class="texMathDisplay"><span class="stt">(value-of (var-exp </span><span class="texMathInline">var</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma</span><span class="stt">)</span> = <span class="stt">(</span><span class="texMathInline">\sigma(\rho(var))</span><span class="stt">,</span><span class="texMathInline">\sigma</span><span class="stt">)</span></span></p><p>&#36171;&#20540;&#23601;&#20687;&#25105;&#20204;&#39044;&#24819;&#30340;&#37027;&#26679;&#65306;&#25105;&#20204;&#22312;&#29615;&#22659;&#20013;&#26597;&#25214;&#24335;&#23376;&#24038;&#20391;&#30340;&#26631;&#35782;&#31526;&#65292;&#33719;&#21462;&#19968;&#20010;&#20301;&#32622;&#65292;&#22312;&#29615;&#22659;&#20013;
&#27714;&#21491;&#36793;&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#20462;&#25913;&#25351;&#23450;&#20301;&#32622;&#30340;&#20869;&#23481;&#12290;&#23601;&#20687; <span class="stt">setref</span>&#65292;<span class="stt">set</span> &#34920;&#36798;&#24335;&#30340;&#36820;&#22238;&#20540;
&#20219;&#24847;&#12290;&#25105;&#20204;&#35753;&#23427;&#36820;&#22238;&#34920;&#36798;&#20540; 27&#12290;
<span class="texMathDisplay">\infer{<span class="stt">(value-of (assign-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">exp_1</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">) =</span><span class="stt">
</span><span class="stt">(</span><span class="texMathInline">\lceil 27 \rceil</span><span class="stt">,[</span><span class="texMathInline">\rho(var)</span><span class="stt">=</span><span class="texMathInline">val_1</span><span class="stt">]</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span>}
      {<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">)</span> = <span class="stt">(</span><span class="texMathInline">val_1</span><span class="stt">,</span><span class="texMathInline">\sigma_1</span><span class="stt">)</span>}</span></p><p><a name="(idx._(gentag._637))"></a>
&#25105;&#20204;&#36824;&#35201;&#37325;&#20889;&#36807;&#31243;&#35843;&#29992;&#21644; <span class="stt">let</span> &#35268;&#21017;&#65292;&#20307;&#29616;&#20986;&#23545;&#23384;&#20648;&#22120;&#30340;&#20462;&#25913;&#12290;&#23545;&#36807;&#31243;&#35843;&#29992;&#65292;&#35268;&#21017;&#21464;&#25104;&#65306;
<a name="(idx._(gentag._638))"></a>
<a name="(idx._(gentag._639))"></a></p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\sigma</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span class="texMathInline">var=l</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span class="texMathInline">l=val</span><span class="stt">]</span><span class="texMathInline">\sigma</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#20854;&#20013;&#65292;<span class="texMathInline">l</span> &#26159;&#19981;&#22312; <span class="texMathInline">\sigma</span> &#23450;&#20041;&#22495;&#20013;&#30340;&#26576;&#19968;&#20301;&#32622;&#12290;
<a name="(idx._(gentag._640))"></a></p></blockquote><p><a name="(idx._(gentag._641))"></a>
<a name="(idx._(gentag._642))"></a>
<span class="stt">(let-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">)</span> &#30340;&#35268;&#21017;&#31867;&#20284;&#12290;&#25105;&#20204;&#39318;&#20808;&#27714;&#21491;&#36793; <span class="texMathInline">exp_1</span>
&#30340;&#20540;&#65292;&#28982;&#21518;&#23558;&#35813;&#20540;&#25918;&#20837;&#19968;&#20010;&#26032;&#20301;&#32622;&#65292;&#23558;&#21464;&#37327; <span class="texMathInline">var</span> &#32465;&#23450;&#21040;&#36825;&#20010;&#20301;&#32622;&#65292;&#22312;&#24471;&#21040;&#30340;&#29615;&#22659;&#20013;&#27714;
<span class="stt">let</span> &#20027;&#20307;&#30340;&#20540;&#65292;&#20316;&#20026;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;
<a name="(idx._(gentag._643))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex4..14)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986; <span class="stt">let</span> &#30340;&#35268;&#21017;&#12290;</p></blockquote><h5 class="heading">4.3.2<tt>&nbsp;</tt><a name="(part._s4..3..2)"></a>&#23454;&#29616;<span class="button-group"><a href="#(part._s4..3..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#29616;&#22312;&#25105;&#20204;&#30528;&#25163;&#20462;&#25913;&#35299;&#37322;&#22120;&#12290;&#22312; <span class="stt">value-of</span> &#20013;&#65292;&#25105;&#20204;&#21462;&#20986;&#27599;&#20010; <span class="stt">var-exp</span> &#30340;&#20540;&#65292;&#23601;&#20687;
&#35268;&#21017;&#25551;&#36848;&#30340;&#37027;&#26679;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p><span class="stt">assign-exp</span> &#30340;&#20195;&#30721;&#20063;&#26174;&#32780;&#26131;&#35265;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assign-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">begin</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">27</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote></blockquote><p>&#21019;&#24314;&#24341;&#29992;&#21602;&#65311;&#26032;&#30340;&#20301;&#32622;&#24212;&#22312;&#27599;&#19968;&#26032;&#32465;&#23450;&#22788;&#21019;&#24314;&#12290;&#36825;&#38376;&#35821;&#35328;&#20013;&#21482;&#26377;&#22235;&#20010;&#22320;&#26041;&#21019;&#24314;&#26032;&#32465;&#23450;&#65306;&#21021;&#22987;
&#29615;&#22659;&#20013;&#12289;<span class="stt">let</span> &#20013;&#12289;&#36807;&#31243;&#35843;&#29992;&#20197;&#21450; <span class="stt">letrec</span> &#20013;&#12290;</p><p>&#22312;&#21021;&#22987;&#29615;&#22659;&#20013;&#65292;&#25105;&#20204;&#30452;&#25509;&#20998;&#37197;&#26032;&#20301;&#32622;&#12290;</p><p><a name="(idx._(gentag._644))"></a>
<a name="(idx._(gentag._645))"></a>
&#23545; <span class="stt">let</span>&#65292;&#25105;&#20204;&#20462;&#25913; <span class="stt">value-of</span> &#20013;&#30456;&#24212;&#30340;&#34892;&#65292;&#20998;&#37197;&#21253;&#21547;&#20540;&#30340;&#26032;&#20301;&#32622;&#65292;&#24182;&#25226;&#21464;&#37327;&#32465;&#23450;
&#21040;&#25351;&#21521;&#35813;&#20301;&#32622;&#30340;&#24341;&#29992;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._646))"></a>
<a name="(idx._(gentag._647))"></a>
<a name="(idx._(gentag._648))"></a>
&#23545;&#36807;&#31243;&#35843;&#29992;&#65292;&#25105;&#20204;&#21516;&#26679;&#20462;&#25913; <span class="stt">apply-procedure</span>&#65292;&#35843;&#29992; <span class="stt">newref</span>&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._649))"></a>
<a name="(idx._(gentag._650))"></a>
<a name="(idx._(gentag._651))"></a></div></p></blockquote><p><a name="(idx._(gentag._652))"></a>
<a name="(idx._(gentag._653))"></a>
&#26368;&#21518;&#65292;&#35201;&#22788;&#29702; <span class="stt">letrec</span>&#65292;&#25105;&#20204;&#26367;&#25442; <span class="stt">apply-env</span> &#20013;&#30340; <span class="stt">extend-env-rec</span> &#20174;&#21477;&#65292;
&#20196;&#20854;&#36820;&#22238;&#19968;&#20010;&#24341;&#29992;&#65292;&#25351;&#21521;&#21253;&#21547;&#36866;&#24403;&#38381;&#21253;&#30340;&#20301;&#32622;&#12290;&#30001;&#20110;&#25105;&#20204;&#20351;&#29992;&#22810;&#22768;&#26126;&#30340;
<span class="stt">letrec</span>&#65288;ex3.32&#65289;&#65292;<span class="stt">extend-env-rec</span> &#21462;&#19968;&#20010;&#36807;&#31243;&#21517;&#21015;&#34920;&#65292;&#19968;&#20010;
&#32465;&#23450;&#21464;&#37327;&#21015;&#34920;&#65292;&#19968;&#20010;&#36807;&#31243;&#20027;&#20307;&#21015;&#34920;&#65292;&#20197;&#21450;&#24050;&#20445;&#23384;&#30340;&#29615;&#22659;&#12290;&#36807;&#31243; <span class="stt">location</span> &#21462;&#19968;&#21464;&#37327;&#65292;
&#19968;&#20010;&#21464;&#37327;&#21015;&#34920;&#12290;&#33509;&#21464;&#37327;&#23384;&#22312;&#20110;&#21015;&#34920;&#20013;&#65292;<span class="stt">location</span> &#36820;&#22238;&#21464;&#37327;&#22312;&#21015;&#34920;&#20013;&#30340;&#20301;&#32622;&#65307;&#33509;&#19981;&#23384;&#22312;&#65292;
&#36820;&#22238; <span class="stt">#f</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">p-names</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b-vars</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-bodies</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">location</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-names</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">list-ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">b-vars</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">list-ref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-bodies</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">saved-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p> &#29992;<a href="#%28elem._trace-instrument%29" data-pltdoc="x">&#21069;&#38754;</a>&#20171;&#32461;&#30340;&#36741;&#21161;&#32452;&#20214;&#65292;&#23637;&#31034;&#20102;
IMPLICIT-REFS &#27714;&#20540;&#30340;&#31616;&#21333;&#20363;&#23376;&#12290;
<a name="(idx._(gentag._654))"></a>
<a name="(idx._(gentag._655))"></a></p><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&gt; (run "</span></p></td></tr><tr><td><p><span class="stt">let f = proc (x) proc (y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = -(x,-1);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-(x,y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt">in ((f 44) 33)")</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 0</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 1</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 2</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let f</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 3</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let f &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((f 3) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 (procedure x ... ((i 0) (v 1) (x 2)))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 4</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; proc x &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((x 4) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 (procedure x ... ((i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(4 #(struct:num-val 44)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 5</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; proc y &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((y 5) (x 4) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 (procedure x ... ((i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(4 #(struct:num-val 44))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(5 #(struct:num-val 33)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">#(struct:num-val 12)</span></p></td></tr><tr><td><p><span class="stt">&gt;</span></p></td></tr></table><blockquote class="caption"><p>IMPLICIT-REFS&#30340;&#31616;&#21333;&#27714;&#20540;<a name="(elem._fig-4..8)"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..15)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312; &#20013;&#65292;&#29615;&#22659;&#20013;&#30340;&#21464;&#37327;&#20026;&#20160;&#20040;&#32465;&#23450;&#21040;&#19968;&#33324;&#30340;&#25972;&#25968;&#65292;&#32780;&#19981;
&#26159; &#20013;&#37027;&#26679;&#30340;&#34920;&#36798;&#20540;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..16)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._656))"></a>
<a name="(idx._(gentag._657))"></a>
&#26082;&#28982;&#21464;&#37327;&#26159;&#21487;&#21464;&#30340;&#65292;&#25105;&#20204;&#21487;&#20197;&#38752;&#36171;&#20540;&#20135;&#29983;&#36882;&#24402;&#36807;&#31243;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec times4(x) = if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((times4 -(x,1)), -4)</span></p></td></tr><tr><td><p><span class="stt">in (times4 3)</span></p></td></tr></table></blockquote><p>&#21487;&#20197;&#26367;&#25442;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let times4 = 0</span></p></td></tr><tr><td><p><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set times4 = proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((times4 -(x,1)), -4);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(times4 3);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></blockquote><p>&#25163;&#21160;&#36319;&#36394;&#36825;&#20010;&#31243;&#24207;&#65292;&#39564;&#35777;&#36825;&#31181;&#32763;&#35793;&#21487;&#34892;&#12290;
<a name="(idx._(gentag._658))"></a>
<a name="(idx._(gentag._659))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..17)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._660))"></a>
&#20889;&#20986;&#35268;&#21017;&#24182;&#23454;&#29616;&#22810;&#21442;&#25968;&#36807;&#31243;&#21644;&#22768;&#26126;&#22810;&#21464;&#37327;&#30340; <span class="stt">let</span>&#12290;
<a name="(idx._(gentag._661))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..18)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._662))"></a>
&#20889;&#20986;&#35268;&#21017;&#24182;&#23454;&#29616;&#22768;&#26126;&#22810;&#36807;&#31243;&#30340; <span class="stt">letrec</span> &#34920;&#36798;&#24335;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..19)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._663))"></a>
&#20462;&#25913;&#22768;&#26126;&#22810;&#36807;&#31243;&#30340; <span class="stt">letrec</span> &#23454;&#29616;&#65292;&#35753;&#27599;&#20010;&#38381;&#21253;&#21482;&#29983;&#25104;&#19968;&#27425;&#65292;&#24182;&#19988;&#21482;&#20998;&#37197;&#19968;&#20010;&#20301;&#32622;&#12290;&#26412;
&#39064;&#31867;&#20284;ex3.35&#12290;
<a name="(idx._(gentag._664))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..20)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._665))"></a>
&#22312;&#26412;&#33410;&#30340;&#35821;&#35328;&#20013;&#65292;&#23601;&#20687;&#22312; Scheme &#20013;&#19968;&#26679;&#65292;&#25152;&#26377;&#21464;&#37327;&#37117;&#26159;&#21487;&#21464;&#30340;&#12290;&#21478;&#19968;&#31181;&#35774;&#35745;&#26159;&#21516;&#26102;&#20801;&#35768;&#21487;
&#21464;&#21644;&#19981;&#21487;&#21464;&#30340;&#21464;&#37327;&#32465;&#23450;&#65306;
<span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc} \\
\mathit{DenVal} &amp;= \mathit{Ref(ExpVal)} + \mathit{ExpVal}\end{align*}</span>
&#21482;&#26377;&#21464;&#37327;&#32465;&#23450;&#21487;&#21464;&#26102;&#65292;&#25165;&#33021;&#36171;&#20540;&#12290;&#24403;&#25351;&#20195;&#20540;&#26159;&#24341;&#29992;&#26102;&#65292;&#35299;&#24341;&#29992;&#33258;&#21160;&#36827;&#34892;&#12290;</p><p>&#20462;&#25913;&#26412;&#33410;&#30340;&#35821;&#35328;&#65292;&#35753; <span class="stt">let</span> &#20687;&#20043;&#21069;&#37027;&#26679;&#24341;&#20837;&#19981;&#21487;&#21464;&#21464;&#37327;&#65292;&#21487;&#21464;&#21464;&#37327;&#21017;&#30001;
<span class="stt">letmutable</span> &#34920;&#36798;&#24335;&#24341;&#20837;&#65292;&#35821;&#27861;&#20026;&#65306;
<span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">letmutable </span><span class="texMathInline">\mathit{Identifier}</span><span class="stt"> = </span><span class="texMathInline">\mathit{Expression}</span><span class="stt"> in </span><span class="texMathInline">\mathit{Expression}</span></span>
<a name="(idx._(gentag._666))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..21)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._667))"></a>
<a name="(idx._(gentag._668))"></a>
<a name="(idx._(gentag._669))"></a>
<a name="(idx._(gentag._670))"></a>
<a name="(idx._(gentag._671))"></a>
<a name="(idx._(gentag._672))"></a>
&#20043;&#21069;&#65292;&#25105;&#20204;&#24314;&#35758;&#20004;&#20010;&#30456;&#21435;&#24456;&#36828;&#30340;&#36807;&#31243;&#36890;&#36807;&#36171;&#20540;&#20132;&#25442;&#20449;&#24687;&#65292;&#36991;&#20813;&#23621;&#38388;&#30340;&#36807;&#31243;&#30693;&#26195;&#65292;&#20174;&#32780;&#20351;&#31243;&#24207;
&#26356;&#21152;&#27169;&#22359;&#21270;&#12290;&#36825;&#26679;&#30340;&#36171;&#20540;&#24120;&#24120;&#24212;&#35813;&#26159;&#20020;&#26102;&#30340;&#65292;&#21482;&#22312;&#25191;&#34892;&#20989;&#25968;&#35843;&#29992;&#26102;&#29983;&#25928;&#12290;&#21521;&#35821;&#35328;
&#28155;&#21152;<span class="emph">&#21160;&#24577;&#36171;&#20540;</span> (<span class="emph">dynamic assignment</span>)&#65288;&#21448;&#31216;<span class="emph">&#27969;&#24335;&#32465;&#23450;</span> (<span class="emph">fluid binding</span>)&#65289;
&#32452;&#20214;&#65292;&#23436;&#25104;&#36825;&#19968;&#25805;&#20316;&#12290;&#29983;&#25104;&#24335;&#20026;&#65306;
<a name="(idx._(gentag._673))"></a></p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">setdynamic </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> during </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">setdynamic-exp (var exp1 body)</span>}\end{align*}</span></p><p><span class="stt">setdynamic</span> &#34920;&#36798;&#24335;&#30340;&#25928;&#26524;&#26159;&#25226;<span class="texMathInline">exp_1</span> &#30340;&#20540;&#20020;&#26102;&#36171;&#32473; <span class="texMathInline">var</span>&#65292;&#27714; <span class="texMathInline">body</span> &#30340;&#20540;&#65292;
&#37325;&#26032;&#32473; <span class="texMathInline">var</span> &#36171;&#20854;&#21407;&#20540;&#65292;&#28982;&#21518;&#36820;&#22238; <span class="texMathInline">body</span> &#30340;&#20540;&#12290;&#21464;&#37327; <span class="texMathInline">var</span> &#24517;&#38656;&#24050;&#32465;&#23450;&#12290;&#20363;&#22914;&#65292;
&#22312;&#19979;&#21015;&#34920;&#36798;&#24335;&#20013;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 11</span></p></td></tr><tr><td><p><span class="stt">in let p = proc (y) -(y,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(setdynamic x = 17 during (p 22),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(p 13))</span></p></td></tr></table></blockquote><p><span class="texMathInline">x</span> &#26159;&#36807;&#31243; <span class="stt">p</span> &#20013;&#30340;&#33258;&#30001;&#21464;&#37327;&#65292;&#22312;&#35843;&#29992; <span class="stt">(p 22)</span> &#20013;&#20540;&#20026; 17&#65292;&#22312;&#35843;&#29992; <span class="stt">(p
13)</span> &#20013;&#37325;&#35774;&#20026; 11&#65292;&#25152;&#20197;&#34920;&#36798;&#24335;&#30340;&#20540;&#20026; <span class="texMathInline">5-2=3</span>&#12290;
<a name="(idx._(gentag._674))"></a>
<a name="(idx._(gentag._675))"></a>
<a name="(idx._(gentag._676))"></a>
<a name="(idx._(gentag._677))"></a>
<a name="(idx._(gentag._678))"></a>
<a name="(idx._(gentag._679))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..22)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._680))"></a>
&#36804;&#20170;&#20026;&#27490;&#65292;&#25105;&#20204;&#30340;&#35821;&#35328;&#37117;&#26159;<span class="emph">&#38754;&#21521;&#34920;&#36798;&#24335;</span> (<span class="emph">expression-oriented</span>)&#30340;&#65306;&#25105;&#20204;&#24863;&#20852;&#36259;&#30340;
&#20027;&#35201;&#26159;&#34920;&#36798;&#24335;&#36825;&#31181;&#21477;&#27861;&#31867;&#21035;&#21644;&#23427;&#20204;&#30340;&#20540;&#12290;&#25193;&#23637;&#35821;&#35328;&#65292;&#24314;&#27169;&#31616;&#21333;
&#30340;<span class="emph">&#38754;&#21521;&#35821;&#21477;</span> (<span class="emph">statement-oriented</span>) &#30340;&#35821;&#35328;&#65292;&#20854;&#35268;&#33539;&#27010;&#36848;&#22914;&#19979;&#12290;&#19968;&#23450;&#35201;<span class="emph">&#36981;&#24490;
&#35821;&#27861;</span>&#65292;&#20998;&#21035;&#20889;&#20986;&#36807;&#31243;&#26469;&#22788;&#29702;&#31243;&#24207;&#12289;&#35821;&#21477;&#21644;&#34920;&#36798;&#24335;&#12290;</p><blockquote class="Hangindent"><p><span style="font-weight: bold">&#20540;</span><span class="hspace">&nbsp;</span>&#21516; IMPLICIT-REFS&#12290;</p></blockquote><blockquote class="Hangindent"><p><span style="font-weight: bold">&#35821;&#27861;</span><span class="hspace">&nbsp;</span>&#20351;&#29992;&#19979;&#21015;&#35821;&#27861;&#65306;</p><blockquote class="SubFlow"><p><span class="Iidentity">\begin{align*}  \mathit{Program} &amp;::= \mathit{Statement} \\[-3pt]
\mathit{Statement} &amp;::= <span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
                   &amp;::= <span class="stt">print </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
                   &amp;::= \{\{\mathit{Statement}^{*(;)}\}\} \\[-3pt]
                   &amp;::= <span class="stt">if </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\mathit{Statement}</span><span class="stt"> </span><span class="Iidentity">\mathit{Statement}</span> \\[-3pt]
                   &amp;::= <span class="stt">while </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\mathit{Statement}</span> \\[-3pt]
                   &amp;::= <span class="stt">var </span><span class="Iidentity">\{\mathit{Identifier}\}^{*(;)}</span><span class="stt"> ; </span><span class="Iidentity">\mathit{Statement}</span> \\[-3pt]\end{align*}</span></p></blockquote><p>&#38750;&#32456;&#32467;&#31526; <span class="texMathInline">\mathit{Expression}</span> &#25351;&#30340;&#26159; IMPLICIT-REFS &#35821;&#35328;&#20013;&#30340;&#34920;&#36798;&#24335;&#65292;&#21487;&#33021;&#31245;&#26377;&#25193;
&#23637;&#12290;</p></blockquote><blockquote class="Hangindent"><p><span style="font-weight: bold">&#35821;&#20041;</span><span class="hspace">&nbsp;</span>&#31243;&#24207;&#26159;&#19968;&#20010;&#35821;&#21477;&#12290;&#35821;&#21477;&#19981;&#36820;&#22238;&#20540;&#65292;&#32780;&#26159;&#20462;&#25913;&#21644;&#25171;&#21360;&#23384;&#20648;&#22120;&#12290;</p><p>&#36171;&#20540;&#35821;&#21477;&#20173;&#25353;&#36890;&#24120;&#30340;&#26041;&#24335;&#25191;&#34892;&#12290;&#25171;&#21360;&#35821;&#21477;&#27714;&#20986;&#23454;&#21442;&#30340;&#20540;&#65292;&#25171;&#21360;&#32467;&#26524;&#12290;<span class="stt">if</span> &#35821;&#21477;&#20173;&#25353;&#36890;&#24120;
&#30340;&#26041;&#24335;&#25191;&#34892;&#12290;&#22359;&#35821;&#21477;&#23450;&#20041;&#35265; <span class="texMathInline">\mathit{Statement}</span> &#20013;&#30340;&#26368;&#21518;&#19968;&#20010;&#29983;&#25104;&#24335;&#12290;&#23427;&#25226;&#27599;&#20010;&#22768;&#26126;
&#21464;&#37327;&#32465;&#23450;&#21040;&#19968;&#20010;&#26410;&#21021;&#22987;&#21270;&#30340;&#24341;&#29992;&#65292;&#28982;&#21518;&#25191;&#34892;&#22359;&#20027;&#20307;&#12290;&#36825;&#20123;&#32465;&#23450;&#30340;&#20316;&#29992;&#22495;&#26159;&#22359;&#20027;&#20307;&#12290;</p><p>&#29992;&#22914;&#19979;&#26029;&#35328;&#20889;&#20986;&#35821;&#21477;&#30340;&#35268;&#33539;&#65306;
<span class="texMathDisplay"><span class="stt">(result-of </span><span class="texMathInline">stmt</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">\sigma_0</span><span class="stt">)</span> = \sigma_0</span></p></blockquote><blockquote class="Hangindent"><p><span style="font-weight: bold">&#20363;&#23376;</span><span class="hspace">&nbsp;</span>&#36825;&#37324;&#26159;&#19968;&#20123;&#20363;&#23376;&#12290;</p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(run "var x,y; {x = 3; y = 4; print +(x,y)}") % &#20363;1</span></p></td></tr><tr><td><p><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt">(run "var x,y,z; {x = 3;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">% &#20363;2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">y = 4;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">z = 0;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">while not(zero?(x))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">{z = +(z,y); x = -(x,1)};</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">print z}")</span></p></td></tr><tr><td><p><span class="stt">12</span></p></td></tr><tr><td><p><span class="stt">(run "var x; {x = 3;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">% &#20363;3</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">print x;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">var x; {x = 4; print x};</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">print x}")</span></p></td></tr><tr><td><p><span class="stt">3</span></p></td></tr><tr><td><p><span class="stt">4</span></p></td></tr><tr><td><p><span class="stt">3</span></p></td></tr><tr><td><p><span class="stt">(run "var f,x; {f = proc(x,y) *(x,y);</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">% &#20363;4</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">x = 3;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">print (f 4 x)}")</span></p></td></tr><tr><td><p><span class="stt">12</span></p></td></tr></table><p>&#20363; 3 &#35299;&#37322;&#20102;&#22359;&#35821;&#21477;&#30340;&#20316;&#29992;&#22495;&#12290;</p><p>&#20363; 4 &#35299;&#37322;&#20102;&#35821;&#21477;&#21644;&#34920;&#36798;&#24335;&#30340;&#20132;&#20114;&#12290;&#36807;&#31243;&#20540;&#21019;&#24314;&#24182;&#23384;&#20648;&#20110;&#21464;&#37327; <span class="stt">f</span>&#12290;&#26368;&#21518;&#19968;&#34892;&#29992;&#23454;&#21442; 4
&#21644; <span class="stt">x</span> &#35843;&#29992;&#36825;&#20010;&#36807;&#31243;&#65307;&#22240;&#20026; <span class="stt">x</span> &#32465;&#23450;&#21040;&#19968;&#20010;&#24341;&#29992;&#65292;&#35299;&#24341;&#29992;&#24471; 3&#12290;</p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..23)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._681))"></a>
&#32473;ex4.22 &#20013;&#30340;&#35821;&#35328;&#28155;&#21152; <span class="stt">read</span> &#35821;&#21477;&#65292;&#24418;&#22914; <span class="stt">read </span><span class="texMathInline">var</span>&#12290;&#36825;
&#19968;&#35821;&#21477;&#20174;&#36755;&#20837;&#35835;&#21462;&#19968;&#20010;&#38750;&#36127;&#25968;&#65292;&#23384;&#20837;&#25351;&#23450;&#30340;&#21464;&#37327;&#20013;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..24)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._682))"></a>
<span class="stt">do-while</span> &#35821;&#21477;&#31867;&#20284; <span class="stt">while</span>&#65292;&#20294;&#26159;&#26465;&#20214;&#21028;&#26029;&#22312;&#20854;&#20027;&#20307;<span class="emph">&#20043;&#21518;</span>&#25191;&#34892;&#12290;
&#32473;ex4.22 &#20013;&#30340;&#35821;&#35328;&#28155;&#21152; <span class="stt">do-while</span> &#35821;&#21477;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..25)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;ex4.22 &#35821;&#35328;&#20013;&#30340;&#22359;&#35821;&#21477;&#65292;&#20801;&#35768;&#21021;&#22987;&#21270;&#21464;&#37327;&#12290;&#22312;&#20320;&#30340;&#35299;&#31572;&#20013;&#65292;&#21464;&#37327;&#30340;&#20316;
&#29992;&#22495;&#26159;&#21542;&#21253;&#21547;&#21516;&#19968;&#20010;&#22359;&#35821;&#21477;&#20013;&#21518;&#32493;&#22768;&#26126;&#30340;&#21464;&#37327;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._683))"></a>
<a name="(idx._(gentag._684))"></a>
&#25193;&#23637;&#21069;&#19968;&#36947;&#32451;&#20064;&#20013;&#30340;&#35299;&#31572;&#65292;&#20801;&#35768;&#21516;&#19968;&#22359;&#35821;&#21477;&#20013;&#22768;&#26126;&#30340;&#36807;&#31243;&#20114;&#36882;&#24402;&#12290;&#32771;&#34385;&#32473;&#35821;&#35328;&#22686;&#21152;&#38480;&#21046;&#65292;&#22359;
&#20013;&#30340;&#36807;&#31243;&#22768;&#26126;&#35201;&#22312;&#21464;&#37327;&#22768;&#26126;&#20043;&#21518;&#12290;
<a name="(idx._(gentag._685))"></a>
<a name="(idx._(gentag._686))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..27)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._687))"></a>
&#25193;&#23637;&#21069;&#19968;&#36947;&#32451;&#20064;&#20013;&#30340;&#35299;&#31572;&#65292;&#22686;&#21152;<span class="emph">&#23376;&#31243;&#24207;</span> (<span class="emph">subroutine</span>)&#12290;&#25105;&#20204;&#25226;&#23376;&#31243;&#24207;&#24403;&#36807;&#31243;&#29992;&#65292;
&#20294;&#26159;&#23427;&#19981;&#36820;&#22238;&#20540;&#65292;&#19988;&#20854;&#20027;&#20307;&#20026;&#35821;&#21477;&#32780;&#38750;&#34920;&#36798;&#24335;&#12290;&#28982;&#21518;&#22686;&#21152;&#23376;&#31243;&#24207;&#35843;&#29992;&#65292;&#20316;&#20026;&#19968;&#31181;&#26032;&#35821;&#21477;&#12290;&#25193;
&#23637;&#22359;&#30340;&#35821;&#27861;&#65292;&#20801;&#35768;&#21516;&#26102;&#22768;&#26126;&#36807;&#31243;&#21644;&#23376;&#31243;&#24207;&#12290;&#36825;&#23558;&#22914;&#20309;&#24433;&#21709;&#25351;&#20195;&#20540;&#21644;&#34920;&#36798;&#20540;&#65311;&#22914;&#26524;&#22312;&#23376;&#31243;&#24207;&#35843;
&#29992;&#20013;&#20351;&#29992;&#36807;&#31243;&#20250;&#24590;&#26679;&#65311;&#21453;&#36807;&#26469;&#21602;&#65311;
<a name="(idx._(gentag._688))"></a></p></blockquote><h4 class="heading">4.4<tt>&nbsp;</tt><a name="(part._s4..4)"></a>MUTABLE-PAIRS&#65306;&#21487;&#21464;&#24207;&#23545;&#35821;&#35328;<span class="button-group"><a href="#(part._s4..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._689))"></a>
&#22312;ex3.9 &#20013;&#65292;&#25105;&#20204;&#32473;&#35821;&#35328;&#28155;&#21152;&#20102;&#21015;&#34920;&#65292;&#20294;&#23427;&#20204;&#26159;&#19981;&#21487;&#21464;&#30340;&#65306;&#19981;&#20687; Scheme
&#20013;&#65292;&#26377; <span class="stt">set-car!</span> &#21644; <span class="stt">set-cdr!</span> &#22788;&#29702;&#23427;&#20204;&#12290;</p><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#32473; IMPLICIT-REFS &#28155;&#21152;&#21487;&#21464;&#24207;&#23545;&#12290;&#24207;&#23545;&#26159;&#34920;&#36798;&#20540;&#65292;&#20855;&#26377;&#22914;&#19979;&#25805;&#20316;&#65306;</p><p><span class="Iidentity">\begin{align*}<span style="font-weight: bold"><span class="stt">make-pair</span></span>  &amp;: \mathit{Expval} \times \mathit{Expval} \to \mathit{MutPair} \\
<span style="font-weight: bold"><span class="stt">left</span></span> &amp;: \mathit{MutPair} \to \mathit{Expval} \\
<span style="font-weight: bold"><span class="stt">right</span></span>   &amp;: \mathit{MutPair} \to \mathit{Expval} \\
<span style="font-weight: bold"><span class="stt">setleft</span></span>  &amp;: \mathit{MutPair} \times \mathit{Expval} \to \mathit{Unspecified} \\
<span style="font-weight: bold"><span class="stt">setright</span></span>  &amp;: \mathit{MutPair} \times \mathit{Expval} \to \mathit{Unspecified}\end{align*}</span></p><p>&#24207;&#23545;&#21253;&#21547;&#20004;&#20010;&#20301;&#32622;&#65292;&#20108;&#32773;&#21487;&#20197;&#20998;&#21035;&#36171;&#20540;&#12290;&#30001;&#27492;&#24471;&#20986;&#35821;&#35328;&#20540;&#30340;<span class="emph">&#23450;
&#20041;&#22495;&#26041;&#31243;</span> (<span class="emph">domain equations</span>)&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc} + \mathit{MutPair} \\
\mathit{DenVal} &amp;= \mathit{Ref(ExpVal)} \\
\mathit{MutPair} &amp;= \mathit{Ref(ExpVal)} \times \mathit{Ref(ExpVal)}\end{align*}</span></p><p>&#25105;&#20204;&#25226;&#36825;&#31181;&#35821;&#35328;&#21483;&#20570; MUTABLE-PAIRS&#12290;
<a name="(idx._(gentag._690))"></a></p><h5 class="heading">4.4.1<tt>&nbsp;</tt><a name="(part._s4..4..1)"></a>&#23454;&#29616;<span class="button-group"><a href="#(part._s4..4..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._691))"></a>
&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#29992;&#21069;&#20363;&#20013;&#30340; <span class="stt">reference</span> &#25968;&#25454;&#31867;&#22411;&#23454;&#29616;&#21487;&#21464;&#24207;&#23545;&#12290;
&#20195;&#30721;&#22914; &#25152;&#31034;&#12290;</p><p>&#23436;&#25104;&#22270;&#20013;&#30340;&#20195;&#30721;&#65292;&#32473;&#35821;&#35328;&#28155;&#21152;&#36825;&#20123;&#23601;&#24456;&#30452;&#25509;&#20102;&#12290;&#22914; &#25152;&#31034;&#65292;&#25105;&#20204;&#32473;&#34920;
&#36798;&#20540;&#25968;&#25454;&#31867;&#22411;&#26032;&#22686;&#19968;&#31181;&#21464;&#20307; <span class="stt">mutpair-val</span>&#65292;&#32473; <span class="stt">value-of</span> &#26032;&#22686; 5 &#34892;&#20195;&#30721;&#12290;&#25105;&#20204;
&#35753; <span class="stt">setleft</span> &#36820;&#22238;&#20219;&#24847;&#20540; 82&#65292;&#35753; <span class="stt">setright</span> &#36820;&#22238; 83&#12290;
&#29992;<a href="#%28elem._trace-instrument%29" data-pltdoc="x">&#21069;&#36848;</a>&#36741;&#21161;&#32452;&#20214;&#24471;&#21040;&#30340;&#31034;&#20363;&#36319;&#36394;&#26085;&#24535;
&#22914; &#25152;&#31034;&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">mutpair</span><span class="hspace">&nbsp;</span><span class="RktSym">mutpair?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-pair</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">left-loc</span><span class="hspace">&nbsp;</span><span class="RktSym">reference?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">right-loc</span><span class="hspace">&nbsp;</span><span class="RktSym">reference?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">make-pair</span></span> : <span class="texMathInline">\mathit{ExpVal} \times \mathit{ExpVal} \to \mathit{MutPair}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">make-pair</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-pair</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">left</span></span> : <span class="texMathInline">\mathit{MutPair} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">mutpair</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-pair</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">left-loc</span><span class="hspace">&nbsp;</span><span class="RktSym">right-loc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="hspace">&nbsp;</span><span class="RktSym">left-loc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">right</span></span> : <span class="texMathInline">\mathit{MutPair} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">mutpair</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-pair</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">left-loc</span><span class="hspace">&nbsp;</span><span class="RktSym">right-loc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="hspace">&nbsp;</span><span class="RktSym">right-loc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">setleft</span></span> : <span class="texMathInline">\mathit{MutPair} \times \mathit{ExpVal} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">setleft</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">mutpair</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-pair</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">left-loc</span><span class="hspace">&nbsp;</span><span class="RktSym">right-loc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="hspace">&nbsp;</span><span class="RktSym">left-loc</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">setright</span></span> : <span class="texMathInline">\mathit{MutPair} \times \mathit{ExpVal} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">setright</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">mutpair</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-pair</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">left-loc</span><span class="hspace">&nbsp;</span><span class="RktSym">right-loc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="hspace">&nbsp;</span><span class="RktSym">right-loc</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#21487;&#21464;&#24207;&#23545;&#30340;&#25305;&#21155;&#23454;&#29616;<a name="(elem._fig-4..9)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newpair-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">mutpair-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">make-pair</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">left-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">p1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;mutpair</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">left</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">right-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">p1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;mutpair</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">right</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">setleft-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;mutpair</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">begin</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">setleft</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">82</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">setright-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;mutpair</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">begin</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">setright</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">83</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>&#32473;&#35299;&#37322;&#22120;&#28155;&#21152;&#21487;&#21464;&#24207;&#23545;&#27169;&#22359;<a name="(elem._fig-4..10)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._692))"></a></div></p></blockquote><h5 class="heading">4.4.2<tt>&nbsp;</tt><a name="(part._s4..4..2)"></a>&#21487;&#21464;&#24207;&#23545;&#30340;&#21478;&#19968;&#31181;&#34920;&#31034;<span class="button-group"><a href="#(part._s4..4..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#25226;&#21487;&#21464;&#24207;&#23545;&#34920;&#31034;&#20026;&#20004;&#20010;&#24341;&#29992;&#27809;&#26377;&#21033;&#29992;&#19982; <span class="stt">MutPair</span> &#30456;&#20851;&#30340;&#24050;&#30693;&#20449;&#24687;&#12290;&#24207;&#23545;&#20013;&#30340;&#20004;&#20010;&#20301;&#32622;
&#34429;&#28982;&#33021;&#22815;&#21508;&#33258;&#36171;&#20540;&#65292;&#20294;&#23427;&#20204;&#19981;&#26159;&#29420;&#31435;&#20998;&#37197;&#30340;&#12290;&#25105;&#20204;&#30693;&#36947;&#23427;&#20204;&#20250;&#19968;&#36215;&#20998;&#37197;&#65306;&#22914;&#26524;&#24207;&#23545;&#30340;&#24038;&#20391;&#26159;
&#19968;&#20010;&#20301;&#32622;&#65292;&#37027;&#20040;&#21491;&#20391;&#26159;&#19979;&#19968;&#20010;&#20301;&#32622;&#12290;&#25152;&#20197;&#25105;&#20204;&#36824;&#21487;&#20197;&#29992;&#24038;&#20391;&#30340;&#24341;&#29992;&#34920;&#31034;&#24207;&#23545;&#12290;
&#20195;&#30721;&#22914; &#25152;&#31034;&#65292;&#19981;&#38656;&#20877;&#20570;&#20854;&#20182;&#20462;&#25913;&#12290;</p><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&gt; (run "let glo = pair(11,22)</span></p></td></tr><tr><td><p><span class="stt">in let f = proc (loc)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let d1 = setright(loc, left(loc))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let d2 = setleft(glo, 99)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(left(loc),right(loc))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (f glo)")</span></p></td></tr><tr><td><p><span class="stt">;; &#20026; init-env &#20998;&#37197;&#21333;&#20803;</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 0</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 1</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 2</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let glo</span></p></td></tr><tr><td><p><span class="stt">;; &#20026;&#24207;&#23545;&#20998;&#37197;&#21333;&#20803;</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 3</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 4</span></p></td></tr><tr><td><p><span class="stt">;; &#20026; glo &#20998;&#37197;&#21333;&#20803;</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 5</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let glo &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((glo 5) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 #(struct:num-val 11))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(4 #(struct:num-val 22))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(5 #(struct:mutpair-val #(struct:a-pair 3 4))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let f</span></p></td></tr><tr><td><p><span class="stt">;; &#20026; f &#20998;&#37197;&#21333;&#20803;</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 6</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let f &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((f 6) (glo 5) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 #(struct:num-val 11))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(4 #(struct:num-val 22))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(5 #(struct:mutpair-val #(struct:a-pair 3 4)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(6 (procedure loc ... ((glo 5) (i 0) (v 1) (x 2)))))</span></p></td></tr></table><blockquote class="caption"><p>MUTABLE-PAIRS&#27714;&#20540;&#30340;&#36319;&#36394;&#26085;&#24535;<a name="(elem._fig-4..11)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">;; &#20026; loc &#20998;&#37197;&#21333;&#20803;</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 7</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; proc loc &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((loc 7) (glo 5) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 #(struct:num-val 11))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(4 #(struct:num-val 22))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(5 #(struct:mutpair-val #(struct:a-pair 3 4)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(6 (procedure loc ... ((glo 5) (i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(7 #(struct:mutpair-val #(struct:a-pair 3 4))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">#(struct:num-val 88)</span></p></td></tr><tr><td><p><span class="stt">&gt;</span></p></td></tr></table><blockquote class="caption"><p>MUTABLE-PAIRS&#27714;&#20540;&#30340;&#36319;&#36394;&#26085;&#24535;&#65292;&#32493;<a name="(elem._fig-4..12)"></a></p></blockquote></blockquote><p>&#19982;&#20043;&#31867;&#20284;&#65292;&#22534;&#20013;&#30340;&#20219;&#20309;&#32858;&#21512;&#23545;&#35937;&#37117;&#21487;&#20197;&#29992;&#20854;&#31532;&#19968;&#20010;&#20301;&#32622;&#30340;&#25351;&#38024;&#34920;&#31034;&#12290;&#20294;&#26159;&#65292;&#22914;&#26524;&#19981;&#25552;&#20379;&#21306;&#22495;
&#30340;&#38271;&#24230;&#20449;&#24687;&#65292;&#25351;&#38024;&#26412;&#36523;&#26080;&#27861;&#25351;&#26126;&#19968;&#29255;&#20869;&#23384;&#21306;&#22495;&#65288;&#35265;ex4.30&#65289;&#12290;&#32570;&#20047;&#38271;&#24230;&#20449;
&#24687;&#26159;&#32463;&#20856;&#23433;&#20840;&#38382;&#39064;&#30340;&#19968;&#22823;&#26469;&#28304;&#65292;&#27604;&#22914;&#20889;&#25968;&#32452;&#36234;&#30028;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">mutpair?</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">mutpair?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">reference?</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">make-pair</span></span> : <span class="texMathInline">\mathit{ExpVal} \times \mathit{ExpVal} \to \mathit{MutPair}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">make-pair</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ref1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ref2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">ref1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">left</span></span> : <span class="texMathInline">\mathit{MutPair} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">right</span></span> : <span class="texMathInline">\mathit{MutPair} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">setleft</span></span> : <span class="texMathInline">\mathit{MutPair} \times \mathit{ExpVal} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">setright</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">setright</span></span> : <span class="texMathInline">\mathit{MutPair} \times \mathit{ExpVal} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">setright</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#21487;&#21464;&#24207;&#23545;&#30340;&#21478;&#19968;&#31181;&#34920;&#31034;
<a name="(idx._(gentag._693))"></a><a name="(elem._fig-4..13)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._694))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex4..28)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986;&#20116;&#20010;&#21487;&#21464;&#24207;&#23545;&#25805;&#20316;&#30340;&#25512;&#29702;&#35268;&#21017;&#35268;&#33539;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..29)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._695))"></a>
&#32473;&#35821;&#35328;&#28155;&#21152;&#25968;&#32452;&#12290;&#28155;&#21152;&#26032;&#25805;&#20316;&#31526; <span class="stt">newarray</span>&#12289;<span class="stt">arrayref</span> &#21644; <span class="stt">arrayset</span>&#65292;&#29992;&#23427;
&#20204;&#26469;&#21019;&#24314;&#12289;&#35299;&#24341;&#29992;&#21644;&#26356;&#26032;&#25968;&#32452;&#12290;&#36825;&#38656;&#35201;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{ArrVal} &amp;= \mathit{(Ref(ExpVal))} \\
\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc} + \mathit{ArrVal} \\
\mathit{DenVal} &amp;= \mathit{Ref(ExpVal)}\end{align*}</span></p><p>&#30001;&#20110;&#25968;&#32452;&#20013;&#30340;&#20301;&#32622;&#26159;&#36830;&#32493;&#30340;&#65292;&#29992;&#19978;&#36848;&#31532;&#20108;&#31181;&#34920;&#31034;&#12290;&#19979;&#38754;&#31243;&#24207;&#30340;&#32467;&#26524;&#26159;&#20160;&#20040;&#65311;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let a = newarray(2,-99)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">p = proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let v = arrayref(x,1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in arrayset(x,1,-(v,-1))</span></p></td></tr><tr><td><p><span class="stt">in begin arrayset(a,1,0); (p a); (p a); arrayref(a,1) end</span></p></td></tr></table></blockquote><p>&#36825;&#37324; <span class="stt">newarray(2,-99)</span> &#35201;&#21019;&#24314;&#38271;&#24230;&#20026; 2 &#30340;&#25968;&#32452;&#65292;&#25968;&#32452;&#20013;&#30340;&#27599;&#20010;&#20301;&#32622;&#37117;&#21253;&#21547; -99&#12290;
<span class="stt">begin</span> &#34920;&#36798;&#24335;&#23450;&#20041;&#21516;ex4.4&#12290;&#20196;&#25968;&#32452;&#32034;&#24341;&#20174; 0 &#24320;&#22987;&#65292;&#25152;&#20197;&#38271;&#24230;&#20026; 2
&#30340;&#25968;&#32452;&#32034;&#24341;&#20026; 0 &#21644; 1&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..30)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._696))"></a>
&#32473;ex4.29 &#30340;&#35821;&#35328;&#28155;&#21152;&#36807;&#31243; <span class="stt">arraylength</span>&#65292;&#36820;&#22238;&#25968;&#32452;&#30340;&#38271;&#24230;&#12290;&#20320;&#30340;&#36807;
&#31243;&#36816;&#34892;&#26102;&#38388;&#24212;&#20026;&#24120;&#25968;&#12290;<span class="stt">arrayref</span> &#21644; <span class="stt">arrayset</span> &#19968;&#23450;&#35201;&#26597;&#39564;&#32034;&#24341;&#65292;&#30830;&#20445;&#32034;&#24341;&#20540;&#22312;
&#25968;&#32452;&#38271;&#24230;&#20043;&#20869;&#12290;</p></blockquote><h4 class="heading">4.5<tt>&nbsp;</tt><a name="(part._s4..5)"></a>&#20256;&#21442;&#21464;&#20307;<span class="button-group"><a href="#(part._s4..5)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>&#24403;&#36807;&#31243;&#20027;&#20307;&#25191;&#34892;&#26102;&#65292;&#20854;&#24418;&#21442;&#32465;&#23450;&#21040;&#19968;&#20010;&#25351;&#20195;&#20540;&#12290;&#37027;&#20010;&#20540;&#20174;&#21738;&#20799;&#26469;&#65311;&#23427;&#19968;&#23450;&#26159;&#36807;&#31243;&#35843;&#29992;&#20256;&#20837;&#23454;
&#21442;&#30340;&#20540;&#12290;&#25105;&#20204;&#24050;&#35265;&#36807;&#20004;&#31181;&#20256;&#21442;&#26041;&#24335;&#65306;</p><ul><li><p>&#33258;&#28982;&#20256;&#21442;&#65292;&#25351;&#20195;&#20540;&#19982;&#23454;&#21442;&#30340;&#34920;&#36798;&#20540;&#30456;&#21516;&#65288;pass-by-value&#65289;&#12290;</p></li><li><p>&#25353;&#20540;&#35843;&#29992;&#65292;&#25351;&#20195;&#20540;&#26159;&#19968;&#20010;&#24341;&#29992;&#65292;&#25351;&#21521;&#19968;&#20010;&#20301;&#32622;&#65292;&#35813;&#20301;&#32622;&#21253;&#21547;&#23454;&#21442;&#30340;&#34920;&#36798;&#20540;
&#65288;<a href="#%28part._s4..3%29" data-pltdoc="x">IMPLICIT-REFS&#65306;&#38544;&#24335;&#24341;&#29992;&#35821;&#35328;</a>&#65289;&#12290;&#36825;&#26159;&#26368;&#24120;&#29992;&#30340;&#20256;&#21442;&#26041;&#24335;&#12290;
<a name="(idx._(gentag._697))"></a></p></li></ul><p>&#26412;&#33410;&#25506;&#35752;&#20854;&#20182;&#19968;&#20123;&#20256;&#21442;&#26426;&#21046;&#12290;</p><h5 class="heading">4.5.1<tt>&nbsp;</tt><a name="(part._s4..5..1)"></a>&#25353;&#25351;&#35843;&#29992;<span class="button-group"><a href="#(part._s4..5..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._698))"></a>
<a name="(idx._(gentag._699))"></a>
&#32771;&#34385;&#19979;&#38754;&#30340;&#34920;&#36798;&#24335;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let p = proc (x) set x = 4</span></p></td></tr><tr><td><p><span class="stt">in let a = 3</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin (p a); a end</span></p></td></tr></table></blockquote><p>&#25353;&#20540;&#35843;&#29992;&#26102;&#65292;&#32465;&#23450;&#21040; <span class="stt">x</span> &#30340;&#25351;&#20195;&#20540;&#26159;&#19968;&#20010;&#24341;&#29992;&#65292;&#23427;&#21253;&#21547;&#30340;&#21021;&#22987;&#20540;&#19982;&#32465;&#23450;&#21040; <span class="stt">a</span> &#30340;&#24341;
&#29992;&#30456;&#21516;&#65292;&#20294;&#36825;&#20123;&#24341;&#29992;&#20114;&#19981;&#30456;&#24178;&#12290;&#25152;&#20197;&#36171;&#20540;&#32473; <span class="stt">x</span> &#19981;&#20250;&#24433;&#21709;&#24341;&#29992; <span class="stt">a</span> &#30340;&#20869;&#23481;&#65292;&#25972;&#20010;&#34920;
&#36798;&#24335;&#30340;&#20540;&#26159; 3&#12290;</p></blockquote><p>&#25353;&#20540;&#35843;&#29992;&#26102;&#65292;&#24403;&#36807;&#31243;&#32473;&#26576;&#20010;&#21442;&#25968;&#36171;&#26032;&#20540;&#65292;&#35843;&#29992;&#32773;&#26080;&#27861;&#33719;&#24713;&#12290;&#24403;&#28982;&#65292;&#22914;&#26524;&#20256;&#32473;&#35843;&#29992;&#32773;&#30340;&#21442;&#25968;&#20687;
<a href="#%28part._s4..4%29" data-pltdoc="x">MUTABLE-PAIRS&#65306;&#21487;&#21464;&#24207;&#23545;&#35821;&#35328;</a>&#37027;&#26679;&#21253;&#21547;&#21487;&#21464;&#24207;&#23545;&#65292;&#37027;&#20040;&#35843;&#29992;&#32773;&#33021;&#30475;&#21040; <span class="stt">setleft</span> &#21644; <span class="stt">setright</span> &#30340;
&#25928;&#26524;&#65292;&#20294;&#30475;&#19981;&#21040; <span class="stt">set</span> &#30340;&#25928;&#26524;&#12290;</p><p>&#34429;&#28982;&#36825;&#26679;&#38548;&#31163;&#35843;&#29992;&#32773;&#21644;&#34987;&#35843;&#32773;&#24120;&#21512;&#25152;&#24895;&#65292;&#20294;&#26377;&#20123;&#26102;&#20505;&#65292;&#32473;&#36807;&#31243;&#20256;&#36882;&#19968;&#20010;&#20301;&#32622;&#65292;&#24182;&#35753;&#36807;&#31243;&#32473;&#36825;
&#20010;&#20301;&#32622;&#36171;&#20540;&#20063;&#19981;&#26080;&#22909;&#22788;&#12290;&#35201;&#36825;&#26679;&#20570;&#65292;&#21487;&#20197;&#32473;&#36807;&#31243;&#20256;&#36882;&#19968;&#20010;&#24341;&#29992;&#65292;&#35813;&#24341;&#29992;&#25351;&#21521;&#35843;&#29992;&#32773;&#21464;&#37327;&#30340;&#20301;
&#32622;&#65292;&#32780;&#19981;&#26159;&#21464;&#37327;&#30340;&#20869;&#23481;&#12290;&#36825;&#31181;&#20256;&#21442;&#26426;&#21046;&#21483;&#20570;<span class="emph">&#25353;&#25351;&#35843;&#29992;</span> (<span class="emph">call-by-reference</span>)&#12290;&#22914;&#26524;
&#25805;&#20316;&#25968;&#27491;&#26159;&#21464;&#37327;&#24341;&#29992;&#65292;&#37027;&#23601;&#20256;&#36882;&#21464;&#37327;&#20301;&#32622;&#30340;&#24341;&#29992;&#12290;&#28982;&#21518;&#65292;&#36807;&#31243;&#30340;&#24418;&#21442;&#32465;&#23450;&#21040;&#36825;&#20010;&#20301;&#32622;&#12290;&#22914;&#26524;
&#25805;&#20316;&#25968;&#26159;&#20854;&#20182;&#31867;&#22411;&#30340;&#34920;&#36798;&#24335;&#65292;&#37027;&#20040;&#24418;&#21442;&#32465;&#23450;&#21040;&#19968;&#20010;&#26032;&#20301;&#32622;&#65292;&#35813;&#20301;&#32622;&#21253;&#21547;&#25805;&#20316;&#25968;&#30340;&#20540;&#65292;&#23601;&#20687;&#25353;
&#20540;&#35843;&#29992;&#19968;&#26679;&#12290;&#22312;&#19978;&#20363;&#20013;&#20351;&#29992;&#25353;&#25351;&#35843;&#29992;&#65292;&#25226; 4 &#36171;&#32473; <span class="stt">x</span> &#31561;&#25928;&#20110;&#25226; 4 &#36171;&#32473; <span class="stt">a</span>&#65292;&#25152;&#20197;
&#25972;&#20010;&#34920;&#36798;&#24335;&#36820;&#22238; 4&#65292;&#32780;&#19981;&#26159; 3&#12290;</p><p>&#25353;&#25351;&#35843;&#29992;&#36807;&#31243;&#65292;&#19988;&#23454;&#21442;&#20026;&#21464;&#37327;&#26102;&#65292;&#20256;&#36882;&#30340;&#19981;&#26159;&#25353;&#20540;&#35843;&#29992;&#20013;&#21464;&#37327;&#25152;&#22312;&#20301;&#32622;&#30340;&#20869;&#23481;&#65292;&#32780;&#26159;&#37027;&#20010;&#21464;
&#37327;&#30340;<span class="emph">&#20301;&#32622;</span>&#12290;&#20363;&#22914;&#65292;&#32771;&#34385;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let p = proc (x) set x = 44</span></p></td></tr><tr><td><p><span class="stt">in let g = proc (y) (f y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let z = 55</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin (g z); z end</span></p></td></tr></table></blockquote><p>&#35843;&#29992;&#36807;&#31243; <span class="stt">g</span> &#26102;&#65292;<span class="stt">y</span> &#32465;&#23450;&#21040; <span class="stt">z</span> &#30340;&#20301;&#32622;&#65292;&#32780;&#19981;&#26159;&#37027;&#20010;&#20301;&#32622;&#30340;&#20869;&#23481;&#12290;&#31867;&#20284;&#22320;&#65292;
&#35843;&#29992; <span class="stt">f</span> &#26102;&#65292;<span class="stt">x</span> &#32465;&#23450;&#21040;&#21516;&#19968;&#20010;&#20301;&#32622;&#12290;&#25152;&#20197;&#65292;<span class="stt">x</span>&#12289;<span class="stt">y</span> &#21644; <span class="stt">z</span> &#37117;&#32465;&#23450;&#21040;
&#21516;&#19968;&#20301;&#32622;&#65292;<span class="stt">set x = 44</span> &#30340;&#25928;&#26524;&#26159;&#25226;&#37027;&#20010;&#20301;&#32622;&#30340;&#20869;&#23481;&#35774;&#20026; 44&#12290;&#22240;&#27492;&#65292;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;
&#26159; 44&#12290;&#25191;&#34892;&#36825;&#20010;&#34920;&#36798;&#24335;&#30340;&#36319;&#36394;&#26085;&#24535;&#22914; &#21644; fig-4.15 &#25152;
&#31034;&#12290;&#22312;&#26412;&#20363;&#20013;&#65292;<span class="stt">x</span>&#12289;<span class="stt">y</span> &#21644; <span class="stt">z</span> &#26368;&#32456;&#37117;&#32465;&#23450;&#21040;&#20301;&#32622; 5&#12290;</p></blockquote><p>&#25353;&#25351;&#35843;&#29992;&#30340;&#24120;&#35265;&#29992;&#27861;&#26159;&#36820;&#22238;&#22810;&#20010;&#20540;&#12290;&#36807;&#31243;&#20197;&#36890;&#24120;&#26041;&#24335;&#36820;&#22238;&#19968;&#20010;&#20540;&#65292;&#24182;&#32473;&#25353;&#25351;&#20256;&#36882;&#30340;&#21442;&#25968;&#36171;&#20854;
&#20182;&#20540;&#12290;&#21478;&#19968;&#31181;&#20363;&#23376;&#65292;&#23545;&#25442;&#21464;&#37327;&#30340;&#20540;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let swap = proc (x) proc (y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let temp = x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = y;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set y = temp</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt">in let a = 33</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let b = 44</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">((swap a) b);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-(a,b)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></blockquote><p>&#37319;&#29992;&#25353;&#25351;&#35843;&#29992;&#65292;&#36825;&#20250;&#23545;&#25442; <span class="stt">a</span> &#21644; <span class="stt">b</span> &#30340;&#20540;&#65292;&#25152;&#20197;&#23427;&#36820;&#22238; 11&#12290;&#20294;&#22914;&#26524;&#29992;&#24050;&#26377;&#30340;&#25353;&#20540;
&#35843;&#29992;&#35299;&#37322;&#22120;&#25191;&#34892;&#36825;&#20010;&#31243;&#24207;&#65292;&#23427;&#20250;&#36820;&#22238; -11&#65292;&#22240;&#20026;&#22312;&#23545;&#25442;&#36807;&#31243;&#30340;&#20869;&#37096;&#36171;&#20540;&#23545;&#21464;&#37327; <span class="stt">a</span> &#21644;
<span class="stt">b</span> &#27627;&#26080;&#24433;&#21709;&#12290;</p></blockquote><p>&#23601;&#20687;&#22312;&#25353;&#20540;&#35843;&#29992;&#20013;&#19968;&#26679;&#65292;&#22312;&#25353;&#25351;&#35843;&#29992;&#20013;&#65292;&#21464;&#37327;&#20173;&#28982;&#25351;&#20195;&#34920;&#36798;&#20540;&#30340;&#24341;&#29992;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc} \\
\mathit{DenVal} &amp;= \mathit{Ref(ExpVal)}\end{align*}</span></p><p>&#21807;&#19968;&#38656;&#35201;&#25913;&#21464;&#30340;&#26159;&#26032;&#20301;&#32622;&#30340;&#20998;&#37197;&#12290;&#25353;&#20540;&#35843;&#29992;&#20013;&#65292;&#27714;&#27599;&#20010;&#25805;&#20316;&#25968;&#30340;&#20540;&#37117;&#35201;&#20998;&#37197;&#26032;&#20301;&#32622;&#65307;&#25353;&#25351;&#35843;
&#29992;&#20013;&#65292;&#21482;&#22312;&#27714;<span class="emph">&#38750;&#21464;&#37327;</span>&#25805;&#20316;&#25968;&#30340;&#20540;&#26102;&#25165;&#20998;&#37197;&#26032;&#20301;&#32622;&#12290;</p><p>&#36825;&#24456;&#23481;&#26131;&#23454;&#29616;&#12290;&#20989;&#25968; <span class="stt">apply-procedure</span> &#24517;&#38656;&#20462;&#25913;&#65292;&#22240;&#20026;&#19981;&#26159;&#27599;&#20010;&#36807;&#31243;&#35843;&#29992;&#37117;&#35201;&#20998;&#37197;&#26032;
&#20301;&#32622;&#12290;&#37027;&#20221;&#36131;&#20219;&#24517;&#39035;&#19978;&#31227;&#33267; <span class="stt">value-of</span> &#20013;&#30340; <span class="stt">call-exp</span> &#65292;&#22240;&#20026;&#23427;&#25165;&#20855;&#26377;&#20570;&#20986;&#21028;&#26029;
&#25152;&#38656;&#30340;&#20449;&#24687;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#28982;&#21518;&#25105;&#20204;&#20462;&#25913; <span class="stt">value-of</span> &#20013;&#30340; <span class="stt">call-exp</span>&#65292;&#24341;&#20837;&#26032;&#20989;&#25968; <span class="stt">value-of-operand</span>
&#26469;&#20570;&#24517;&#35201;&#30340;&#21028;&#26029;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arg</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of-operand</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-procedure</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#36807;&#31243; <span class="stt">value-of-operand</span> &#26816;&#26597;&#25805;&#20316;&#25968;&#26159;&#21542;&#20026;&#21464;&#37327;&#12290;&#22914;&#26524;&#26159;&#65292;&#21017;&#36820;&#22238;&#37027;&#20010;&#21464;&#37327;&#25351;&#20195;&#30340;&#24341;
&#29992;&#65292;&#28982;&#21518;&#20256;&#32473;&#36807;&#31243; <span class="stt">apply-procedure</span>&#65307;&#21542;&#21017;&#65292;&#23427;&#27714;&#20986;&#25805;&#20316;&#25968;&#30340;&#20540;&#65292;&#22312;&#26032;&#20301;&#32622;&#25918;&#20837;&#37027;&#20010;
&#20540;&#65292;&#24182;&#36820;&#22238;&#25351;&#21521;&#35813;&#20301;&#32622;&#30340;&#24341;&#29992;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-operand</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Env} \to \mathit{Ref}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-operand</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#20063;&#21487;&#20197;&#25353;&#29031;&#21516;&#26679;&#30340;&#26041;&#24335;&#20462;&#25913; <span class="stt">let</span>&#65292;&#20294;&#25105;&#20204;&#19981;&#36825;&#26679;&#20570;&#65292;&#22240;&#27492;&#35821;&#35328;&#20013;&#20173;&#28982;&#20445;&#30041;&#25353;&#20540;&#35843;
&#29992;&#30340;&#21151;&#33021;&#12290;</p><p>&#22810;&#20010;&#25353;&#25351;&#35843;&#29992;&#21442;&#25968;&#21487;&#20197;&#25351;&#21521;&#21516;&#19968;&#20010;&#20301;&#32622;&#65292;&#22914;&#19979;&#38754;&#30340;&#31243;&#24207;&#25152;&#31034;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let b = 3</span></p></td></tr><tr><td><p><span class="stt">in let p = proc (x) proc(y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = 4;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in ((p b) b)</span></p></td></tr></table></blockquote><p>&#23427;&#30340;&#20540;&#20026; 4&#65292;&#22240;&#20026; <span class="stt">x</span> &#21644; <span class="stt">y</span> &#25351;&#21521;&#21516;&#19968;&#20010;&#20301;&#32622;&#65292;&#21363; <span class="stt">b</span> &#30340;&#32465;&#23450;&#12290;&#36825;&#31181;&#29616;&#35937;&#21483;
&#20570;<a name="(idx._(gentag._700))"></a><span class="emph">&#21464;&#37327;&#21035;&#21517;</span> (<span class="emph">variable aliasing</span>)&#12290;&#36825;&#37324;&#30340; <span class="stt">x</span> &#21644;
<a name="(idx._(gentag._701))"></a>
<span class="stt">y</span> &#26159;&#21516;&#19968;&#20010;&#20301;&#32622;&#30340;&#21035;&#21517;&#65288;&#21517;&#23383;&#65289;&#12290;&#36890;&#24120;&#65292;&#25105;&#20204;&#22312;&#32473;&#19968;&#20010;&#21464;&#37327;&#36171;&#20540;&#26102;&#24182;&#19981;&#24819;&#25913;&#21464;&#21478;&#19968;&#20010;
&#21464;&#37327;&#30340;&#20540;&#65292;&#25152;&#20197;&#21035;&#21517;&#20250;&#23548;&#33268;&#31243;&#24207;&#38590;&#20197;&#29702;&#35299;&#12290;</p></blockquote><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&gt; (run "</span></p></td></tr><tr><td><p><span class="stt">let f = proc (x) set x = 44</span></p></td></tr><tr><td><p><span class="stt">in let g = proc (y) (f y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let z = 55</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(g z);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">z</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end")</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 0</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 1</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 2</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let f</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 3</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let f &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((f 3) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 (procedure x ... ((i 0) (v 1) (x 2)))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let g</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 4</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let g &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((g 4) (f 3) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt">(3 (procedure x ... ((i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt">(4 (procedure y ... ((f 3) (i 0) (v 1) (x 2)))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let z</span></p></td></tr><tr><td><p><span class="stt">newref: &#20998;&#37197;&#20301;&#32622; 5</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; let z &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((z 5) (g 4) (f 3) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 (procedure x ... ((i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(4 (procedure y ... ((f 3) (i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(5 #(struct:num-val 55)))</span></p></td></tr></table><blockquote class="caption"><p>CALL-BY-REFERENCE &#30340;&#31616;&#21333;&#27714;&#20540;<a name="(elem._fig-4..14)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; proc y &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((y 5) (f 3) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 (procedure x ... ((i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(4 (procedure y ... ((f 3) (i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(5 #(struct:num-val 55)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#36827;&#20837; proc x &#20027;&#20307;&#65292;&#29615;&#22659; =</span></p></td></tr><tr><td><p><span class="stt">((x 5) (i 0) (v 1) (x 2))</span></p></td></tr><tr><td><p><span class="stt">&#23384;&#20648;&#22120; =</span></p></td></tr><tr><td><p><span class="stt">((0 #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(1 #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(2 #(struct:num-val 10))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(3 (procedure x ... ((i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(4 (procedure y ... ((f 3) (i 0) (v 1) (x 2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(5 #(struct:num-val 55)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">#(struct:num-val 44)</span></p></td></tr><tr><td><p><span class="stt">&gt;</span></p></td></tr></table></div></p><blockquote class="caption"><p>CALL-BY-REFERENCE &#30340;&#31616;&#21333;&#27714;&#20540;&#65292;&#32493;<a name="(elem._fig-4..15)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._702))"></a>
<a name="(idx._(gentag._703))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex4..31)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986; CALL-BY-REFERENCE &#30340;&#25512;&#29702;&#35268;&#21017;&#35268;&#33539;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..32)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#35821;&#35328; CALL-BY-REFERENCE&#65292;&#25903;&#25345;&#22810;&#21442;&#25968;&#36807;&#31243;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..33)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#35821;&#35328; CALL-BY-REFERENCE&#65292;&#20063;&#20196;&#20854;&#25903;&#25345;&#25353;&#20540;&#35843;&#29992;&#30340;&#36807;&#31243;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..34)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#35821;&#35328;&#28155;&#21152;&#25353;&#25351;&#35843;&#29992;&#30340; <span class="stt">let</span>&#65292;&#21517;&#20026; <span class="stt">letref</span>&#12290;&#20889;&#20986;&#35268;&#33539;&#24182;&#23454;&#29616;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..35)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;&#25353;&#20540;&#35843;&#29992;&#26694;&#26550;&#19979;&#65292;&#25105;&#20204;&#20173;&#33021;&#20139;&#21463;&#25353;&#25351;&#35843;&#29992;&#30340;&#20415;&#21033;&#12290;&#25193;&#23637;&#35821;&#35328; IMPLICIT-REF&#65292;&#28155;&#21152;&#26032;&#34920;&#36798;
&#24335;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">ref </span><span class="Iidentity">\mathit{Identifier}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">ref-exp (var)</span>}\end{align*}</span></p><p>&#36825;&#19982;&#35821;&#35328; EXPLICIT-REF &#19981;&#21516;&#12290;&#22240;&#20026;&#24341;&#29992;&#21482;&#33021;&#20174;&#21464;&#37327;&#33719;&#24471;&#12290;&#36825;&#23601;&#20351;&#25105;&#20204;&#33021;&#29992;&#25353;&#20540;&#35843;&#29992;&#35821;&#35328;&#20889;
&#20986;&#31867;&#20284; <span class="stt">swap</span> &#30340;&#31243;&#24207;&#12290;&#19979;&#38754;&#34920;&#36798;&#24335;&#30340;&#20540;&#26159;&#20160;&#20040;&#65311;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let a = 3</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">b = 4</span></p></td></tr><tr><td><p><span class="stt">in let swap = proc (x) proc (y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let temp = deref(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">setref(x,deref(y));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">setref(y,temp)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin ((swap ref a) ref b); -(a,b) end</span></p></td></tr></table></blockquote><p>&#27492;&#22788;&#20351;&#29992;&#25903;&#25345;&#22810;&#22768;&#26126;&#30340; <span class="stt">let</span>&#65288;ex3.16&#65289;&#12290;&#36825;&#31181;&#35821;&#35328;&#30340;&#34920;&#36798;&#20540;&#21644;&#25351;&#20195;&#20540;
&#26159;&#20160;&#20040;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..36)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._704))"></a>
&#22823;&#22810;&#25968;&#35821;&#35328;&#25903;&#25345;&#25968;&#32452;&#65292;&#22312;&#25353;&#25351;&#35843;&#29992;&#20013;&#65292;&#25968;&#32452;&#24341;&#29992;&#36890;&#24120;&#20197;&#31867;&#20284;&#21464;&#37327;&#24341;&#29992;&#30340;&#26041;&#24335;&#22788;&#29702;&#12290;&#22914;&#26524;&#25805;&#20316;
&#25968;&#26159;&#25968;&#32452;&#24341;&#29992;&#65292;&#37027;&#23601;&#19981;&#32473;&#34987;&#35843;&#36807;&#31243;&#20256;&#36882;&#23427;&#30340;&#20869;&#23481;&#65292;&#32780;&#26159;&#20256;&#36882;&#24341;&#29992;&#25351;&#21521;&#30340;&#20301;&#32622;&#12290;&#27604;&#22914;&#65292;&#38656;&#35201;&#35843;
&#29992;&#23545;&#25442;&#36807;&#31243;&#30340;&#24120;&#35265;&#24773;&#24418;&#26159;&#20132;&#25442;&#25968;&#32452;&#20803;&#32032;&#65292;&#20256;&#36882;&#25968;&#32452;&#24341;&#29992;&#23601;&#33021;&#29992;&#19978;&#23545;&#25442;&#36807;&#31243;&#12290;&#32473;&#25353;&#25351;&#35843;&#29992;&#35821;&#35328;
&#28155;&#21152;ex4.29 &#20013;&#30340;&#25968;&#32452;&#25805;&#20316;&#31526;&#65292;&#25193;&#23637; <span class="stt">value-of-operand</span>&#65292;&#22788;&#29702;&#36825;&#31181;&#24773;
&#20917;&#65292;&#20351;&#19979;&#20363;&#20013;&#30340;&#36807;&#31243;&#35843;&#29992;&#33021;&#22815;&#22914;&#24895;&#25191;&#34892;&#65306;</p><blockquote class="SCentered"><p><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">swap</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arrayref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">i</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arrayref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">j</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></p></blockquote><p>&#35201;&#26159;&#19979;&#38754;&#36825;&#26679;&#21602;&#65311;</p><blockquote class="SCentered"><p><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">swap</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arrayref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arrayref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">i</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arrayref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">a</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">j</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..37)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._705))"></a>
<span class="emph">&#25353;&#20540;&#21644;&#32467;&#26524;&#35843;&#29992;</span> (<span class="emph">call-by-value-result</span>) &#26159;&#25353;&#25351;&#35843;&#29992;&#30340;&#19968;&#31181;&#21464;&#20307;&#12290;&#22312;&#25353;&#20540;&#21644;&#32467;&#26524;
&#35843;&#29992;&#20013;&#65292;&#23454;&#21442;&#24517;&#38656;&#26159;&#21464;&#37327;&#12290;&#20256;&#36882;&#21442;&#25968;&#26102;&#65292;&#24418;&#21442;&#32465;&#23450;&#21040;&#26032;&#30340;&#24341;&#29992;&#65292;&#21021;&#20540;&#20026;&#23454;&#21442;&#30340;&#20540;&#65292;&#23601;&#20687;&#25353;&#20540;
&#35843;&#29992;&#19968;&#26679;&#12290;&#28982;&#21518;&#36807;&#31243;&#20027;&#20307;&#29031;&#24120;&#25191;&#34892;&#12290;&#20294;&#36807;&#31243;&#20027;&#20307;&#36820;&#22238;&#26102;&#65292;&#26032;&#24341;&#29992;&#22788;&#30340;&#20540;&#22797;&#21046;&#21040;&#23454;&#21442;&#25351;&#20195;&#30340;&#24341;
&#29992;&#20013;&#12290;&#22240;&#20026;&#36825;&#26679;&#21487;&#20197;&#25913;&#36827;&#20869;&#23384;&#20998;&#37197;&#65292;&#25152;&#20197;&#21487;&#33021;&#27604;&#25353;&#25351;&#35843;&#29992;&#26356;&#39640;&#25928;&#12290;&#23454;&#29616;&#25353;&#20540;&#21644;&#32467;&#26524;&#35843;&#29992;&#65292;&#20889;
&#20986;&#19968;&#20010;&#36807;&#31243;&#65292;&#20351;&#20043;&#22312;&#25353;&#25351;&#35843;&#29992;&#19982;&#25353;&#20540;&#21644;&#32467;&#26524;&#35843;&#29992;&#20013;&#20135;&#29983;&#19981;&#21516;&#30340;&#31572;&#26696;&#12290;
<a name="(idx._(gentag._706))"></a></p></blockquote><h5 class="heading">4.5.2<tt>&nbsp;</tt><a name="(part._s4..5..2)"></a>&#25042;&#27714;&#20540;&#65306;&#25353;&#21517;&#35843;&#29992;&#21644;&#25353;&#38656;&#35843;&#29992;<span class="button-group"><a href="#(part._s4..5..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._707))"></a>
<a name="(idx._(gentag._708))"></a>
<a name="(idx._(gentag._709))"></a>
&#36804;&#20170;&#20026;&#27490;&#65292;&#25105;&#20204;&#35752;&#35770;&#30340;&#25152;&#26377;&#21442;&#25968;&#20256;&#36882;&#26426;&#21046;&#37117;&#26159;<span class="emph">&#21363;&#26102;</span> (<span class="emph">eager</span>)&#30340;&#65306;&#23427;&#20204;&#24635;&#26159;&#25214;&#20986;&#27599;&#20010;
&#25805;&#20316;&#25968;&#30340;&#20540;&#12290;&#29616;&#22312;&#25105;&#20204;&#26469;&#30475;&#21478;&#19968;&#31181;&#25130;&#28982;&#19981;&#21516;&#30340;&#20256;&#21442;&#26426;&#21046;&#65292;&#21517;&#21483;<span class="emph">&#25042;&#27714;&#20540;</span> (<span class="emph">lazy
evaluation</span>)&#12290;&#22312;&#25042;&#27714;&#20540;&#20013;&#65292;&#25805;&#20316;&#25968;&#30340;&#20540;&#30452;&#21040;&#36807;&#31243;&#20027;&#20307;&#38656;&#35201;&#26102;&#25165;&#20250;&#27714;&#21462;&#12290;&#22914;&#26524;&#36807;&#31243;
&#20027;&#20307;&#20174;&#26410;&#24341;&#29992;&#30456;&#20851;&#21442;&#25968;&#65292;&#23601;&#19981;&#38656;&#27714;&#25805;&#20316;&#25968;&#30340;&#20540;&#12290;</p><p>&#36825;&#21487;&#33021;&#20351;&#31243;&#24207;&#20813;&#20110;&#27704;&#19981;&#32456;&#27490;&#12290;&#20363;&#22914;&#65292;&#32771;&#34385;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec infinite-loop (x) = infinite-loop(-(x,-1))</span></p></td></tr><tr><td><p><span class="stt">in let f = proc (z) 11</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (f (infinite-loop 0))</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#30340; <span class="stt">infinite-loop</span> &#26159;&#19968;&#20010;&#36807;&#31243;&#65292;&#35843;&#29992;&#26102;&#27704;&#19981;&#32456;&#27490;&#12290;<span class="stt">f</span> &#26159;&#19968;&#20010;&#36807;&#31243;&#65292;&#35843;&#29992;&#26102;
&#19981;&#24341;&#29992;&#23427;&#30340;&#21442;&#25968;&#65292;&#24635;&#36820;&#22238; 11&#12290;&#25105;&#20204;&#32771;&#34385;&#36807;&#30340;&#20219;&#20309;&#19968;&#31181;&#20256;&#21442;&#26426;&#21046;&#37117;&#26080;&#27861;&#20351;&#36825;&#20010;&#31243;&#24207;&#32456;&#27490;&#12290;&#20294;
&#22312;&#25042;&#27714;&#20540;&#20013;&#65292;&#36825;&#20010;&#31243;&#24207;&#23558;&#36820;&#22238; 11&#65292;&#22240;&#20026;&#25805;&#20316;&#25968; <span class="stt">(infinite-loop 0)</span> &#27809;&#26377;&#27714;&#20540;&#12290;</p></blockquote><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#20351;&#29992;&#25042;&#27714;&#20540;&#20462;&#25913;&#25105;&#20204;&#30340;&#35821;&#35328;&#12290;&#22312;&#25042;&#27714;&#20540;&#20013;&#65292;&#22914;&#26080;&#24517;&#35201;&#65292;&#25105;&#20204;&#19981;&#27714;&#25805;&#20316;&#25968;&#34920;&#36798;&#24335;&#30340;
&#20540;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#23558;&#36807;&#31243;&#30340;&#32465;&#23450;&#21464;&#37327;&#19982;&#26410;&#27714;&#20540;&#30340;&#25805;&#20316;&#25968;&#20851;&#32852;&#36215;&#26469;&#12290;&#24403;&#36807;&#31243;&#20027;&#20307;&#38656;&#35201;&#32465;&#23450;&#21464;&#37327;&#30340;
&#20540;&#26102;&#65292;&#25105;&#20204;&#20808;&#27714;&#23545;&#24212;&#25805;&#20316;&#25968;&#30340;&#20540;&#12290;&#26377;&#26102;&#65292;&#25105;&#20204;&#25226;&#19981;&#27714;&#25805;&#20316;&#25968;&#30340;&#20540;&#32780;&#20256;&#32473;&#36807;&#31243;
&#21483;&#20570;<span class="emph">&#20923;&#32467;</span> (<span class="emph">frozen</span>)&#65292;&#25226;&#36807;&#31243;&#27714;&#25805;&#20316;&#25968;&#30340;&#20540;&#21483;&#20570;<span class="emph">&#35299;&#20923;</span> (<span class="emph">thawed</span>)&#12290;
<a name="(idx._(gentag._710))"></a>
<a name="(idx._(gentag._711))"></a></p><p><a name="(idx._(gentag._712))"></a>
&#24403;&#28982;&#65292;&#25105;&#20204;&#36824;&#35201;&#21152;&#20837;&#36807;&#31243;&#27714;&#20540;&#26102;&#30340;&#29615;&#22659;&#12290;&#35201;&#36825;&#26679;&#65292;&#25105;&#20204;&#24341;&#20837;&#19968;&#31181;&#26032;&#30340;&#25968;&#25454;&#31867;&#22411;&#65292;
<span class="emph">&#20540;&#31665;</span> (<span class="emph">thunk</span>)&#12290;&#20540;&#31665;&#21253;&#21547;&#19968;&#20010;&#34920;&#36798;&#24335;&#12289;&#19968;&#20010;&#29615;&#22659;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">thunk</span><span class="hspace">&nbsp;</span><span class="RktSym">thunk?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-thunk</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#24403;&#36807;&#31243;&#38656;&#35201;&#20351;&#29992;&#32465;&#23450;&#21464;&#37327;&#30340;&#20540;&#26102;&#65292;&#20250;&#27714;&#30456;&#24212;&#20540;&#31665;&#30340;&#20540;&#12290;</p></blockquote><p>&#25105;&#20204;&#38754;&#23545;&#30340;&#24773;&#20917;&#31245;&#31245;&#22797;&#26434;&#19968;&#20123;&#65292;&#22240;&#20026;&#25105;&#20204;&#38656;&#35201;&#21516;&#26102;&#23481;&#32435;&#25042;&#27714;&#20540;&#12289;&#35745;&#31639;&#25928;&#26524;&#21644;&#21363;&#26102;&#27714;&#20540;
&#65288;<span class="stt">let</span> &#38656;&#35201;&#65289;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#25226;&#25351;&#20195;&#20540;&#23450;&#20026;&#20869;&#23384;&#20301;&#32622;&#30340;&#24341;&#29992;&#65292;&#20301;&#32622;&#21253;&#21547;&#34920;&#36798;&#20540;&#25110;&#32773;&#20540;&#31665;&#12290;</p><p><span class="Iidentity">\begin{align*}\mathit{DenVal} &amp;= \mathit{Ref(ExpVal + Thunk)} \\
\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc}\end{align*}</span></p><p>&#25105;&#20204;&#30340;&#20301;&#32622;&#20998;&#37197;&#31574;&#30053;&#19982;&#25353;&#25351;&#35843;&#29992;&#31867;&#20284;&#65306;&#22914;&#26524;&#25805;&#20316;&#25968;&#26159;&#21464;&#37327;&#65292;&#37027;&#20040;&#25105;&#20204;&#20256;&#36882;&#25351;&#20195;&#30340;&#24341;&#29992;&#65307;&#21542;&#21017;&#65292;
&#25105;&#20204;&#32473;&#26410;&#27714;&#20540;&#30340;&#21442;&#25968;&#22312;&#26032;&#20301;&#32622;&#25918;&#19968;&#20010;&#20540;&#31665;&#65292;&#20256;&#36882;&#35813;&#20301;&#32622;&#30340;&#24341;&#29992;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-operand</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Env} \to \mathit{Ref}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-operand</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-thunk</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#27714; <span class="stt">var-exp</span> &#30340;&#20540;&#26102;&#65292;&#25105;&#20204;&#39318;&#20808;&#25214;&#21040;&#21464;&#37327;&#32465;&#23450;&#30340;&#20301;&#32622;&#12290;&#22914;&#26524;&#35813;&#20301;&#32622;&#26159;&#19968;&#20010;&#34920;&#36798;&#20540;&#65292;&#37027;&#20040;
&#36820;&#22238;&#36825;&#20010;&#20540;&#65292;&#20316;&#20026; <span class="stt">var-exp</span> &#30340;&#20540;&#12290;&#22914;&#26524;&#23427;&#21253;&#21547;&#19968;&#20010;&#20540;&#31665;&#65292;&#37027;&#20040;&#25105;&#20204;&#27714;&#21462;&#24182;&#36820;&#22238;&#20540;&#31665;&#30340;
&#20540;&#12290;&#36825;&#21483;&#20570;<span class="emph">&#25353;&#21517;&#35843;&#29992;</span> (<span class="emph">call by name</span>)&#12290;
<a name="(idx._(gentag._713))"></a>
<a name="(idx._(gentag._714))"></a></p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ref1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">w</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ref1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of-thunk</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#36807;&#31243; <span class="stt">value-of-thunk</span> &#23450;&#20041;&#22914;&#19979;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-thunk</span></span> : <span class="texMathInline">\mathit{Thunk} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-thunk</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">th</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">thunk</span><span class="hspace">&nbsp;</span><span class="RktSym">th</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-thunk</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._715))"></a></div></p></blockquote><p>&#25110;&#32773;&#65292;&#19968;&#26086;&#21457;&#29616;&#20540;&#31665;&#30340;&#20540;&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#34920;&#36798;&#20540;&#25918;&#21040;&#21516;&#19968;&#20010;&#20301;&#32622;&#65292;&#36825;&#26679;&#23601;&#19981;&#38656;&#35201;&#20877;&#27425;&#27714;&#20540;&#31665;&#30340;
&#20540;&#12290;&#36825;&#31181;&#26041;&#24335;&#21483;&#20570;<span class="emph">&#25353;&#38656;&#35843;&#29992;</span> (<span class="emph">call by need</span>)&#12290;
<a name="(idx._(gentag._716))"></a>
<a name="(idx._(gentag._717))"></a></p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ref1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">w</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ref1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">w</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of-thunk</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">begin</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">ref1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#29992;&#21040;&#20102;&#21517;&#20026;<span class="emph">&#21161;&#35760;&#27861;</span> (<span class="emph">memoization</span>) &#30340;&#36890;&#29992;&#31574;&#30053;&#12290;
<a name="(idx._(gentag._718))"></a>
<a name="(idx._(gentag._719))"></a></p></blockquote><p>&#21508;&#31181;&#24418;&#24335;&#30340;&#25042;&#27714;&#20540;&#24341;&#20154;&#20043;&#22788;&#22312;&#20110;&#65292;&#21363;&#20351;&#27809;&#26377;&#25928;&#26524;&#65292;&#36890;&#36807;&#23427;&#20063;&#33021;&#20197;&#30456;&#24403;&#31616;&#21333;&#30340;&#26041;&#24335;&#24605;&#32771;&#31243;&#24207;&#12290;
&#25226;&#36807;&#31243;&#35843;&#29992;&#26367;&#25442;&#20026;&#36807;&#31243;&#30340;&#20027;&#20307;&#65292;&#25226;&#36807;&#31243;&#20027;&#20307;&#20869;&#23545;&#27599;&#20010;&#24418;&#21442;&#30340;&#24341;&#29992;&#26367;&#25442;&#20026;&#23545;&#24212;&#30340;&#25805;&#20316;&#25968;&#65292;&#23601;&#33021;
&#24314;&#27169;&#36807;&#31243;&#35843;&#29992;&#12290;&#36825;&#31181;&#27714;&#20540;&#31574;&#30053;&#26159; lambda &#28436;&#31639;&#30340;&#22522;&#30784;&#65292;&#22312; lambda &#28436;&#31639;&#20013;&#65292;&#23427;&#21483;&#20570;
<span class="emph"><span class="texMathInline">\beta</span>-&#25512;&#23548;</span> (<span class="emph"><span class="texMathInline">\beta</span>-reduction</span>)&#12290;
<a name="(idx._(gentag._720))"></a>
<a name="(idx._(gentag._721))"></a></p><p>&#19981;&#24184;&#30340;&#26159;&#65292;&#25353;&#21517;&#35843;&#29992;&#21644;&#25353;&#38656;&#35843;&#29992;&#20351;&#27714;&#20540;&#39034;&#24207;&#38590;&#20197;&#30830;&#23450;&#65292;&#32780;&#36825;&#23545;&#29702;&#35299;&#26377;&#25928;&#26524;&#30340;&#31243;&#24207;&#33267;&#20851;&#37325;&#35201;&#12290;
&#20294;&#27809;&#26377;&#25928;&#26524;&#26102;&#65292;&#36825;&#19981;&#25104;&#38382;&#39064;&#12290;&#25152;&#20197;&#25042;&#27714;&#20540;&#30427;&#34892;&#20110;&#20989;&#25968;&#24335;&#32534;&#31243;&#35821;&#35328;&#65288;&#27809;&#26377;&#35745;&#31639;&#25928;&#26524;&#30340;&#37027;&#20123;&#65289;&#65292;
&#22312;&#21035;&#22788;&#21364;&#26483;&#26080;&#36394;&#24433;&#12290;
<a name="(idx._(gentag._722))"></a>
<a name="(idx._(gentag._723))"></a>
<a name="(idx._(gentag._724))"></a>
<a name="(idx._(gentag._725))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex4..38)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;ex3.25 &#22312;&#25353;&#38656;&#35843;&#29992;&#20013;&#30340;&#21464;&#20307;&#12290;ex3.25
&#20013;&#30340;&#21407;&#22987;&#31243;&#24207;&#22312;&#25353;&#38656;&#35843;&#29992;&#20013;&#21487;&#34892;&#21527;&#65311;&#22914;&#26524;&#19979;&#38754;&#30340;&#31243;&#24207;&#22312;&#25353;&#20540;&#35843;&#29992;&#20013;&#36816;&#34892;&#21602;&#65311;&#20026;&#20160;&#20040;&#65311;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let makerec = proc (f)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let d = proc (x) (f (x x))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (f (d d))</span></p></td></tr><tr><td><p><span class="stt">in let maketimes4 = proc (f)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((f -(x,1)), -4)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let times4 = (makerec maketimes4)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (times4 3)</span></p></td></tr></table></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..39)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#27809;&#26377;&#35745;&#31639;&#25928;&#26524;&#30340;&#35805;&#65292;&#25353;&#21517;&#35843;&#29992;&#21644;&#25353;&#38656;&#35843;&#29992;&#24635;&#26159;&#32473;&#20986;&#21516;&#26679;&#30340;&#31572;&#26696;&#12290;&#35774;&#35745;&#19968;&#20010;&#20363;&#23376;&#65292;&#35753;&#25353;&#21517;&#35843;&#29992;
&#21644;&#25353;&#38656;&#35843;&#29992;&#32473;&#20986;&#19981;&#21516;&#30340;&#31572;&#26696;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..40)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913; <span class="stt">value-of-operand</span>&#65292;&#36991;&#20813;&#20026;&#24120;&#37327;&#21644;&#36807;&#31243;&#29983;&#25104;&#20540;&#31665;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..41)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986;&#25353;&#21517;&#35843;&#29992;&#21644;&#25353;&#38656;&#35843;&#29992;&#30340;&#25512;&#29702;&#35268;&#21017;&#35268;&#33539;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex4..42)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#25353;&#38656;&#35843;&#29992;&#35299;&#37322;&#22120;&#28155;&#21152;&#25042;&#27714;&#20540;&#30340; <span class="stt">let</span>&#12290;</p></blockquote><h3 class="heading">5<tt>&nbsp;</tt><a name="(part._cpi)"></a>&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;<span class="button-group"><a href="#(part._cpi)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(idx._(gentag._726))"></a>
<a name="(idx._(gentag._727))"></a>
&#22312;<a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a>&#65292;&#25105;&#20204;&#29992;&#29615;&#22659;&#30340;&#27010;&#24565;&#25506;&#35752;&#32465;&#23450;&#34892;&#20026;&#65292;&#24314;&#31435;&#27599;&#37096;&#20998;&#31243;&#24207;&#25191;&#34892;&#30340;&#25968;&#25454;&#19978;&#19979;&#25991;&#12290;
&#36825;&#37324;&#65292;&#25105;&#20204;&#23558;&#29992;&#31867;&#20284;&#26041;&#24335;&#25506;&#35752;&#27599;&#37096;&#20998;&#31243;&#24207;&#25191;&#34892;&#30340;<span class="emph">&#25511;&#21046;&#19978;&#19979;&#25991;</span> (<span class="emph">control context</span>)&#12290;
&#25105;&#20204;&#23558;&#20171;&#32461;<span class="emph">&#32493;&#25991;</span> (<span class="emph">continuation</span>) &#30340;&#27010;&#24565;&#65292;&#29992;&#26469;&#25277;&#35937;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;&#25105;&#20204;&#23558;&#35201;&#32534;&#20889;&#30340;
&#35299;&#37322;&#22120;&#20250;&#21462;&#19968;&#32493;&#25991;&#21442;&#25968;&#65292;&#20174;&#32780;&#24432;&#26174;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;</p><p>&#32771;&#34385;&#19979;&#38754;&#30340;Scheme&#38454;&#20056;&#20989;&#25968;&#23450;&#20041;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#21487;&#20197;&#29992;&#25512;&#23548;&#24314;&#27169; <span class="stt">fact</span> &#30340;&#35745;&#31639;&#36807;&#31243;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(fact 4)</span></p></td></tr><tr><td><p><span class="stt">= (* 4 (fact 3))</span></p></td></tr><tr><td><p><span class="stt">= (* 4 (* 3 (fact 2)))</span></p></td></tr><tr><td><p><span class="stt">= (* 4 (* 3 (* 2 (fact 1))))</span></p></td></tr><tr><td><p><span class="stt">= (* 4 (* 3 (* 2 (* 1 (fact 0)))))</span></p></td></tr><tr><td><p><span class="stt">= (* 4 (* 3 (* 2 (* 1 1))))</span></p></td></tr><tr><td><p><span class="stt">= (* 4 (* 3 (* 2 1)))</span></p></td></tr><tr><td><p><span class="stt">= (* 4 (* 3 2))</span></p></td></tr><tr><td><p><span class="stt">= (* 4 6)</span></p></td></tr><tr><td><p><span class="stt">= 24</span></p></td></tr></table></blockquote><p>&#36825;&#26159;&#38454;&#20056;&#30340;&#33258;&#28982;&#36882;&#24402;&#23450;&#20041;&#12290;&#27599;&#27425;&#35843;&#29992; <span class="stt">fact</span> &#37117;&#20445;&#35777;&#36820;&#22238;&#20540;&#19982;&#35843;&#29992;&#22788;&#30340; <span class="stt">n</span> &#30456;&#20056;&#12290;
&#36825;&#26679;&#65292;&#38543;&#30528;&#35745;&#31639;&#36827;&#34892;&#65292;<span class="stt">fact</span> &#22312;&#36234;&#26469;&#36234;&#22823;&#30340;<span class="emph">&#25511;&#21046;&#19978;&#19979;&#25991;</span> &#20013;&#35843;&#29992;&#12290;&#27604;&#36739;&#36825;&#19968;&#34892;&#20026;
&#19982;&#19979;&#21015;&#36807;&#31243;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact-iter</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact-iter-acc</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact-iter-acc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact-iter-acc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#29992;&#36825;&#20010;&#23450;&#20041;&#65292;&#25105;&#20204;&#35745;&#31639;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(</span><a name="(elem._fact-iter)"></a><span class="stt">fact-iter 4)</span></p></td></tr><tr><td><p><span class="stt">= (fact-iter-acc 4 1)</span></p></td></tr><tr><td><p><span class="stt">= (fact-iter-acc 3 4)</span></p></td></tr><tr><td><p><span class="stt">= (fact-iter-acc 2 12)</span></p></td></tr><tr><td><p><span class="stt">= (fact-iter-acc 1 24)</span></p></td></tr><tr><td><p><span class="stt">= (fact-iter-acc 0 24)</span></p></td></tr><tr><td><p><span class="stt">= 24</span></p></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#65292;<span class="stt">fact-iter-acc</span> &#24635;&#26159;&#22312;&#21516;&#26679;&#30340;&#25511;&#21046;&#19978;&#19979;&#25991;&#20869;&#35843;&#29992;&#65306;&#22312;&#26412;&#20363;&#20013;&#65292;&#26159;&#27809;&#26377;&#20219;&#20309;&#19978;&#19979;
&#25991;&#12290;&#24403; <span class="stt">fact-iter-acc</span> &#35843;&#29992;&#33258;&#36523;&#26102;&#65292;&#23427;&#22312; <span class="stt">fact-iter-acc</span> &#25191;&#34892;&#30340;
&#8220;&#23614;&#31471;&#8221;&#65292;&#38500;&#20102;&#25226;&#36820;&#22238;&#20540;&#20316;&#20026; <span class="stt">fact-iter-acc</span> &#35843;&#29992;&#30340;&#32467;
&#26524;&#65292;&#19981;&#38656;&#20877;&#20570;&#20219;&#20309;&#20445;&#35777;&#12290;&#25105;&#20204;&#31216;&#20043;&#20026;<span class="emph">&#23614;&#35843;&#29992;</span> (<span class="emph">tail call</span>)&#12290;&#36825;&#26679;&#65292;&#19978;&#36848;&#25512;&#23548;&#20013;&#30340;&#27599;
&#19968;&#27493;&#37117;&#24418;&#22914; <span class="stt">(fact-iter-acc </span><span class="texMathInline">n</span><span class="stt"> </span><span class="texMathInline">a</span><span class="stt">)</span>&#12290;<a name="(idx._(gentag._728))"></a></p><p>&#24403; <span class="stt">fact</span> &#36825;&#26679;&#30340;&#36807;&#31243;&#25191;&#34892;&#26102;&#65292;&#27599;&#27425;&#36882;&#24402;&#35843;&#29992;&#37117;&#35201;&#35760;&#24405;&#39069;&#22806;&#30340;&#25511;&#21046;&#20449;&#24687;&#65292;&#27492;&#20449;&#24687;&#20445;&#30041;&#21040;
&#35843;&#29992;&#36820;&#22238;&#20026;&#27490;&#12290;&#22312;&#19978;&#38754;&#30340;&#31532;&#19968;&#20010;&#25512;&#23548;&#20013;&#65292;&#36825;&#21453;&#26144;&#20102;&#25511;&#21046;&#19978;&#19979;&#25991;&#30340;&#22686;&#38271;&#12290;&#36825;&#26679;&#30340;&#36807;&#31243;&#21576;&#29616;
&#20986;<span class="emph">&#36882;&#24402;&#24615;&#25511;&#21046;&#34892;&#20026;</span> (<span class="emph">recursive control behavior</span>)&#12290;
<a name="(idx._(gentag._729))"></a></p><p>&#19982;&#20043;&#30456;&#23545;&#65292;<span class="stt">fact-iter-acc</span> &#35843;&#29992;&#33258;&#36523;&#26102;&#65292;&#19981;&#38656;&#35760;&#24405;&#39069;&#22806;&#30340;&#25511;&#21046;&#20449;&#24687;&#12290;&#36882;&#24402;&#35843;&#29992;&#21457;&#29983;&#22312;
&#34920;&#36798;&#24335;&#30340;&#21516;&#19968;&#23618;&#65288;&#19978;&#36848;&#25512;&#23548;&#30340;&#26368;&#22806;&#23618;&#65289;&#21453;&#26144;&#20102;&#36825;&#19968;&#28857;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#24403;&#36882;&#24402;&#28145;&#24230;&#65288;&#27809;&#26377;&#23545;
&#24212;&#36820;&#22238;&#30340;&#36882;&#24402;&#35843;&#29992;&#25968;&#30446;&#65289;&#22686;&#21152;&#26102;&#65292;&#31995;&#32479;&#19981;&#38656;&#35201;&#19981;&#26029;&#22686;&#38271;&#30340;&#20869;&#23384;&#23384;&#25918;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;&#21482;&#38656;&#20351;&#29992;&#26377;
&#38480;&#20869;&#23384;&#23384;&#25918;&#25511;&#21046;&#20449;&#24687;&#30340;&#36807;&#31243;&#21576;&#29616;&#20986;<span class="emph">&#36845;&#20195;&#24615;&#25511;&#21046;&#34892;&#20026;</span> (<span class="emph">iterative control behavior</span>)&#12290;
<a name="(idx._(gentag._730))"></a>
<a name="(idx._(gentag._731))"></a></p><p><a name="(idx._(gentag._732))"></a>
&#20026;&#20160;&#20040;&#36825;&#20123;&#31243;&#24207;&#21576;&#29616;&#20986;&#19981;&#21516;&#30340;&#25511;&#21046;&#34892;&#20026;&#21602;&#65311;&#22312;&#38454;&#20056;&#30340;&#36882;&#24402;&#23450;&#20041;&#20013;&#65292;&#36807;&#31243; <span class="stt">fact</span>
&#22312;<span class="emph">&#25805;&#20316;&#25968;&#20301;&#32622;</span> (<span class="emph">operand position</span>) &#35843;&#29992;&#12290;&#25105;&#20204;&#38656;&#35201;&#20445;&#23384;&#36825;&#20010;&#35843;&#29992;&#30340;&#19978;&#19979;&#25991;&#65292;
&#22240;&#20026;&#25105;&#20204;&#38656;&#35201;&#35760;&#20303;&#65292;&#36807;&#31243;&#35843;&#29992;&#25191;&#34892;&#23436;&#27605;&#20043;&#21518;&#65292;&#20173;&#38656;&#27714;&#20986;&#25805;&#20316;&#25968;&#30340;&#20540;&#65292;&#24182;&#25191;&#34892;&#22806;&#23618;&#35843;&#29992;&#65292;&#22312;&#26412;
&#20363;&#20013;&#65292;&#26159;&#23436;&#25104;&#24453;&#20570;&#30340;&#20056;&#27861;&#12290;&#36825;&#32473;&#20986;&#19968;&#26465;&#37325;&#35201;&#21407;&#21017;&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#19981;&#26159;&#36807;&#31243;&#35843;&#29992;&#65292;&#32780;&#26159;&#25805;&#20316;&#25968;&#30340;&#27714;&#20540;&#23548;&#33268;&#25511;&#21046;&#19978;&#19979;&#25991;&#25193;&#22823;&#12290;</span>
<a name="(idx._(gentag._733))"></a></p></blockquote></blockquote><p>&#26412;&#31456;&#65292;&#25105;&#20204;&#23398;&#20064;&#22914;&#20309;&#36319;&#36394;&#21644;&#25805;&#20316;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;&#25105;&#20204;&#30340;&#26680;&#24515;&#24037;&#20855;&#26159;
&#21517;&#20026;<span class="emph">&#32493;&#25991;</span> (<span class="emph">continuation</span>) &#30340;&#25968;&#25454;&#31867;&#22411;&#12290;&#23601;&#20687;&#29615;&#22659;&#26159;&#25968;&#25454;&#19978;&#19979;&#25991;&#30340;&#25277;&#35937;&#34920;&#31034;&#65292;&#32493;&#25991;
&#26159;&#25511;&#21046;&#19978;&#19979;&#25991;&#30340;&#25277;&#35937;&#34920;&#31034;&#12290;&#25105;&#20204;&#23558;&#25506;&#32034;&#32493;&#25991;&#65292;&#32534;&#20889;&#30452;&#25509;&#20256;&#36882;&#32493;&#25991;&#21442;&#25968;&#30340;&#35299;&#37322;&#22120;&#65292;&#23601;&#20687;&#20043;&#21069;&#30452;
&#25509;&#20256;&#36882;&#29615;&#22659;&#21442;&#25968;&#30340;&#35299;&#37322;&#22120;&#12290;&#19968;&#26086;&#22788;&#29702;&#20102;&#31616;&#21333;&#24773;&#20917;&#65292;&#25105;&#20204;&#23601;&#33021;&#26126;&#30333;&#22914;&#20309;&#32473;&#35821;&#35328;&#28155;&#21152;&#32452;&#20214;&#65292;&#20197;&#26356;
&#21152;&#22797;&#26434;&#30340;&#26041;&#24335;&#22788;&#29702;&#25511;&#21046;&#19978;&#19979;&#25991;&#65292;&#35692;&#22914;&#24322;&#24120;&#21644;&#32447;&#31243;&#12290;</p><p>&#22312;<a href="#%28part._cps%29" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a>&#65292;&#25105;&#20204;&#23637;&#31034;&#22914;&#20309;&#29992;&#36716;&#25442;&#35299;&#37322;&#22120;&#30340;&#25216;&#26415;&#36716;&#25442;&#25152;&#26377;&#31243;&#24207;&#12290;&#25105;&#20204;&#35828;&#20197;&#36825;&#31181;&#26041;&#24335;&#36716;&#25442;
&#32780;&#24471;&#30340;&#31243;&#24207;&#20855;&#26377;<span class="emph">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</span> (<span class="emph">continuation-passing style</span>)&#12290;<a href="#%28part._cps%29" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a>&#36824;
&#23637;&#31034;&#20102;&#32493;&#25991;&#30340;&#20854;&#20182;&#19968;&#20123;&#37325;&#35201;&#24212;&#29992;&#12290;
<a name="(idx._(gentag._734))"></a>
<a name="(idx._(gentag._735))"></a></p><h4 class="heading">5.1<tt>&nbsp;</tt><a name="(part._s5..1)"></a>&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;<span class="button-group"><a href="#(part._s5..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._736))"></a>
<a name="(idx._(gentag._737))"></a>
<a name="(idx._(gentag._738))"></a>
<a name="(idx._(gentag._739))"></a>
&#22312;&#25105;&#20204;&#30340;&#26032;&#35299;&#37322;&#22120;&#20013;&#65292;<span class="stt">value-of</span> &#31561;&#20027;&#35201;&#36807;&#31243;&#23558;&#21462;&#31532;&#19977;&#20010;&#21442;&#25968;&#12290;&#36825;&#19968;&#21442;&#25968;&#8212;&#8212;<span class="emph">&#32493;
&#25991;</span>&#8212;&#8212;&#29992;&#26469;&#25277;&#35937;&#27599;&#20010;&#34920;&#36798;&#24335;&#27714;&#20540;&#26102;&#30340;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;</p><p>&#25105;&#20204;&#20174;&#65292;&#21363;<a href="#%28part._s3..4%29" data-pltdoc="x">LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</a>&#20013;&#30340; LETREC &#35821;&#35328;&#35299;&#37322;&#22120;&#20837;&#25163;&#12290;&#25105;&#20204;&#25226;
<span class="stt">value-of-program</span> &#30340;&#32467;&#26524;&#21483;&#20570; <span class="texMathInline">\mathit{FinalAnswer}</span>&#65292;&#20197;&#24378;&#35843;&#36825;&#20010;&#34920;&#36798;&#20540;&#26159;&#31243;
&#24207;&#30340;&#26368;&#32456;&#20540;&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{FinalAnswer}</span> = <span class="texMathInline">\mathit{ExpVal}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Env} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktSym">num2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">num1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;bool</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letrec-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span><span class="hspace">&nbsp;</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p>&#20256;&#36882;&#29615;&#22659;&#30340;&#35299;&#37322;&#22120;<a name="(elem._fig-5..1)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._740))"></a></div></p></blockquote><p>&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#37325;&#20889;&#35299;&#37322;&#22120;&#65292;&#36991;&#20813;&#22312;&#35843;&#29992; <span class="stt">value-of</span> &#26102;&#20135;&#29983;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;&#24403;&#25511;&#21046;&#19978;&#19979;&#25991;
&#38656;&#35201;&#22686;&#21152;&#26102;&#65292;&#25105;&#20204;&#25193;&#23637;&#32493;&#25991;&#21442;&#25968;&#65292;&#23601;&#20687;&#22312;<a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a>&#20013;&#65292;&#31243;&#24207;&#20135;&#29983;&#25968;&#25454;&#19978;&#19979;&#25991;&#26102;&#65292;&#25193;&#23637;
&#35299;&#37322;&#22120;&#30340;&#29615;&#22659;&#19968;&#26679;&#12290;&#24432;&#26174;&#25511;&#21046;&#19978;&#19979;&#25991;&#65292;&#25105;&#20204;&#23601;&#33021;&#30475;&#21040;&#23427;&#22914;&#20309;&#28040;&#38271;&#12290;&#20043;&#21518;&#65292;
&#20174;<a href="#%28part._s5..4%29" data-pltdoc="x">&#24322;&#24120;</a>&#21040;<a href="#%28part._s5..5%29" data-pltdoc="x">&#32447;&#31243;</a>&#65292;&#25105;&#20204;&#23558;&#29992;&#23427;&#32473;&#25105;&#20204;&#30340;&#35821;&#35328;&#28155;&#21152;&#26032;&#30340;&#25511;&#21046;&#34892;&#20026;&#12290;</p><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#30693;&#36947;&#29615;&#22659;&#34920;&#31034;&#19968;&#20010;&#20174;&#31526;&#21495;&#21040;&#25351;&#20195;&#20540;&#30340;&#20989;&#25968;&#12290;&#32493;&#25991;&#34920;&#31034;&#20160;&#20040;&#21602;&#65311;&#34920;&#36798;&#24335;&#30340;&#32493;&#25991;&#34920;&#31034;
&#19968;&#20010;&#36807;&#31243;&#65292;&#23427;&#21462;&#34920;&#36798;&#24335;&#30340;&#32467;&#26524;&#65292;&#23436;&#25104;&#35745;&#31639;&#12290;&#25152;&#20197;&#25105;&#20204;&#30340;&#25509;&#21475;&#24517;&#39035;&#21253;&#21547;&#19968;&#20010;&#36807;&#31243;
<span class="stt">apply-cont</span>&#65292;&#23427;&#21462;&#19968;&#32493;&#25991; <span class="stt">cont</span>&#65292;&#19968;&#20010;&#34920;&#36798;&#20540; <span class="stt">val</span>&#65292;&#23436;&#25104;&#30001; <span class="stt">cont</span> &#25351;
&#23450;&#30340;&#35745;&#31639;&#12290;<span class="stt">apply-cont</span> &#30340;&#21512;&#32422;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{FinalAnswer}</span> = <span class="texMathInline">\mathit{ExpVal}</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-cont</span></span> : <span class="texMathInline">\mathit{Cont} \times \mathit{ExpVal} \to \mathit{FinalAnswer}</span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#25226; <span class="stt">apply-cont</span> &#30340;&#32467;&#26524;&#21483;&#20570; <span class="texMathInline">\mathit{FinalAnswer}</span> &#26159;&#20026;&#20102;&#25552;&#37266;&#33258;&#24049;&#65292;&#23427;&#26159;
&#35745;&#31639;&#26368;&#32456;&#30340;&#20540;&#65306;&#31243;&#24207;&#30340;&#20854;&#20182;&#37096;&#20998;&#37117;&#19981;&#29992;&#23427;&#12290;</p></blockquote><p>&#25509;&#21475;&#24212;&#35813;&#21253;&#21547;&#20160;&#20040;&#26679;&#30340;&#32493;&#25991;&#26500;&#36896;&#22120;&#65311;&#38543;&#30528;&#25105;&#20204;&#20998;&#26512;&#35299;&#37322;&#22120;&#65292;&#36825;&#20123;&#32493;&#25991;&#26500;&#36896;&#22120;&#33258;&#20250;&#26174;&#29616;&#12290;&#39318;&#20808;&#65292;
&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#32493;&#25991;&#26500;&#36896;&#22120;&#65292;&#22312;&#19981;&#38656;&#20877;&#23545;&#35745;&#31639;&#20540;&#36827;&#34892;&#25805;&#20316;&#26102;&#29983;&#25104;&#19978;&#19979;&#25991;&#12290;&#25105;&#20204;&#25226;&#36825;&#20010;&#32493;&#25991;&#21483;&#20570;
<span class="stt">(end-cont)</span>&#65292;&#20854;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (end-cont) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(eopl:printf "&#35745;&#31639;&#32467;&#26463;.~%")</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#35843;&#29992; <span class="stt">(end-cont)</span> &#25171;&#21360;&#20986;&#19968;&#26465;&#35745;&#31639;&#32467;&#26463;&#28040;&#24687;&#65292;&#24182;&#36820;&#22238;&#31243;&#24207;&#30340;&#20540;&#12290;&#22240;&#20026;
<span class="stt">(end-cont)</span> &#25171;&#21360;&#20986;&#19968;&#26465;&#28040;&#24687;&#65292;&#25105;&#20204;&#21487;&#20197;&#30475;&#20986;&#23427;&#35843;&#29992;&#20102;&#22810;&#23569;&#27425;&#12290;&#22312;&#27491;&#30830;&#30340;&#35745;&#31639;&#20013;&#65292;&#23427;&#21482;
&#24212;&#35843;&#29992;&#19968;&#27425;&#12290;</p></blockquote><p>&#25105;&#20204;&#25226; <span class="stt">value-of-program</span> &#37325;&#20889;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986; <span class="stt">value-of/k</span>&#12290;&#25105;&#20204;&#20381;&#27425;&#32771;&#34385; <span class="stt">value-of</span> &#30340;&#21508;&#20010;&#20998;&#25903;&#12290;
<span class="stt">value-of</span> &#30340;&#21069;&#20960;&#34892;&#21482;&#26159;&#31639;&#20986;&#19968;&#20010;&#20540;&#65292;&#28982;&#21518;&#36820;&#22238;&#65292;&#19981;&#20250;&#20877;&#27425;&#35843;&#29992; <span class="stt">value-of</span>&#12290;&#22312;&#20256;
&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#20013;&#65292;&#36825;&#20123;&#34892;&#35843;&#29992; <span class="stt">apply-cont</span>&#65292;&#25226;&#23545;&#24212;&#30340;&#20540;&#20256;&#32473;&#32493;&#25991;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of/k</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Env} \times \mathit{Cont} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#30446;&#21069;&#65292;<span class="stt">cont</span> &#21807;&#19968;&#21487;&#33021;&#30340;&#20540;&#26159;&#32456;&#27490;&#32493;&#25991;&#65292;&#20294;&#36825;&#39532;&#19978;&#23601;&#20250;&#25913;&#21464;&#12290;&#24456;&#23481;&#26131;&#30475;&#20986;&#65292;&#22914;&#26524;&#31243;&#24207;&#20026;
&#19978;&#36848;&#34920;&#36798;&#24335;&#20043;&#19968;&#65292;&#34920;&#36798;&#24335;&#30340;&#20540;&#23558;&#20256;&#32473; <span class="stt">end-cont</span>&#65288;&#36890;&#36807; <span class="stt">apply-cont</span>&#65289;&#12290;</p><p><span class="stt">letrec</span> &#30340;&#34892;&#20026;&#20063;&#19981;&#22797;&#26434;&#65306;&#23427;&#19981;&#35843;&#29992; <span class="stt">value-of</span>&#65292;&#32780;&#26159;&#21019;&#24314;&#19968;&#20010;&#26032;&#29615;&#22659;&#65292;&#28982;&#21518;&#22312;&#26032;
&#29615;&#22659;&#20013;&#27714;&#20027;&#20307;&#30340;&#20540;&#65292;&#20027;&#20307;&#30340;&#20540;&#23601;&#26159;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#36825;&#34920;&#26126;&#20027;&#20307;&#21644;&#25972;&#20010;&#34920;&#36798;&#24335;&#22312;&#21516;&#26679;&#30340;&#25511;&#21046;
&#19978;&#19979;&#25991;&#20013;&#25191;&#34892;&#12290;&#22240;&#27492;&#65292;&#20027;&#20307;&#30340;&#20540;&#24212;&#36820;&#22238;&#32473;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#32493;&#25991;&#12290;&#25152;&#20197;&#25105;&#20204;&#20889;&#65306;
<a name="(idx._(gentag._741))"></a></p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letrec-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">p-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">letrec-body</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">letrec-body</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#36825;&#35299;&#37322;&#20102;&#19968;&#26465;&#36890;&#29992;&#21407;&#21017;&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#23614;&#35843;&#29992;&#19981;&#25193;&#22823;&#32493;&#25991;
<a name="(idx._(gentag._742))"></a>
<a name="(idx._(gentag._743))"></a></span></p></blockquote><p class="TipContent">&#33509; <span class="texMathInline">exp_1</span> &#30340;&#20540;&#20316;&#20026; <span class="texMathInline">exp_2</span> &#30340;&#20540;&#36820;&#22238;&#65292;&#21017;
<span class="texMathInline">exp_1</span> &#21644;<span class="texMathInline">exp_2</span> &#24212;&#22312;&#21516;&#26679;&#30340;&#32493;&#25991;&#20013;&#25191;&#34892;&#12290;</p></blockquote><p>&#20889;&#25104;&#36825;&#26679;&#26159;&#19981;&#23545;&#30340;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letrec-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">p-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">letrec-body</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">letrec-body</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">p-body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#22240;&#20026;&#35843;&#29992; <span class="stt">value-of/k</span> &#26159;&#22312;&#25805;&#20316;&#25968;&#20301;&#32622;&#65306;&#23427;&#35201;&#20316;&#20026; <span class="stt">apply-cont</span> &#30340;&#25805;&#20316;&#25968;&#12290;&#21478;&#22806;&#65292;
&#30001;&#20110;&#20351;&#29992;&#32493;&#25991; <span class="stt">(end-cont)</span> &#20250;&#22312;&#35745;&#31639;&#23436;&#25104;&#20043;&#21069;&#25171;&#21360;&#20986;&#35745;&#31639;&#32467;&#26463;&#28040;&#24687;&#65292;&#36825;&#31181;&#38169;&#35823;&#24456;&#23481;&#26131;
&#25490;&#26597;&#12290;</p></blockquote><p>&#25509;&#19979;&#26469;&#25105;&#20204;&#32771;&#34385; <span class="stt">zero?</span> &#34920;&#36798;&#24335;&#12290;&#22312; <span class="stt">zero?</span> &#34920;&#36798;&#24335;&#20013;&#65292;&#25105;&#20204;&#24471;&#27714;&#20986;&#23454;&#21442;&#30340;&#20540;&#65292;&#28982;
&#21518;&#36820;&#22238;&#32473;&#20381;&#36182;&#35813;&#20540;&#30340;&#32493;&#25991;&#12290;&#25152;&#20197;&#25105;&#20204;&#35201;&#22312;&#26032;&#30340;&#32493;&#25991;&#20013;&#27714;&#23454;&#21442;&#30340;&#20540;&#65292;&#36825;&#20010;&#32493;&#25991;&#20250;&#21462;&#24471;&#36820;&#22238;&#20540;&#65292;
&#28982;&#21518;&#20570;&#36866;&#24403;&#22788;&#29702;&#12290;</p><p>&#37027;&#20040;&#65292;&#22312; <span class="stt">value-of/k</span> &#20013;&#65292;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">zero1-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20854;&#20013;&#65292;<span class="stt">(zero1-cont cont)</span> &#26159;&#19968;&#32493;&#25991;&#65292;&#20855;&#26377;&#22914;&#19979;&#24615;&#36136;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (zero1-cont </span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (apply-cont </span><span class="texMathInline">cont</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(bool-val</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(zero? (expval-&gt;num </span><span class="texMathInline">val</span><span class="stt">))))</span></p></td></tr></table></blockquote></blockquote><p>&#23601;&#20687; <span class="stt">letrec</span>&#65292;&#25105;&#20204;&#19981;&#33021;&#25226; <span class="stt">value-of/k</span> &#20889;&#25104;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#22240;&#20026;&#35843;&#29992; <span class="stt">value-of/k</span> &#26159;&#22312;&#25805;&#20316;&#25968;&#20301;&#32622;&#12290;<span class="stt">let</span> &#22768;&#26126;&#30340;&#21491;&#36793;&#26159;&#22312;&#25805;&#20316;&#25968;&#20301;&#32622;&#65292;&#22240;&#20026;
<span class="stt">(let ((</span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">exp_1</span><span class="stt">)) </span><span class="texMathInline">exp_2</span><span class="stt">)</span> &#31561;&#25928;&#20110; <span class="stt">((lambda (</span><span class="texMathInline">var</span><span class="stt">)</span><span class="stt">
</span><span class="texMathInline">exp_2</span><span class="stt">) </span><span class="texMathInline">exp_1</span><span class="stt">)</span>&#12290;<span class="stt">value-of/k</span> &#35843;&#29992;&#30340;&#20540;&#26368;&#32456;&#25104;&#20026; <span class="stt">expval-&gt;num</span> &#30340;&#25805;&#20316;
&#25968;&#12290;&#20687;&#20043;&#21069;&#37027;&#26679;&#65292;&#22914;&#26524;&#25105;&#20204;&#36816;&#34892;&#36825;&#27573;&#20195;&#30721;&#65292;&#35745;&#31639;&#32467;&#26463;&#28040;&#24687;&#20250;&#20986;&#29616;&#20004;&#27425;&#65306;&#19968;&#27425;&#22312;&#35745;&#31639;&#20013;&#38388;&#65292;&#19968;
&#27425;&#22312;&#30495;&#27491;&#32467;&#26463;&#26102;&#12290;</p></blockquote><p><span class="stt">let</span> &#34920;&#36798;&#24335;&#21482;&#27604; <span class="stt">zero?</span> &#34920;&#36798;&#24335;&#31245;&#24494;&#22797;&#26434;&#19968;&#28857;&#65306;&#27714;&#20986;&#22768;&#26126;&#21491;&#20391;&#30340;&#20540;&#20043;&#21518;&#65292;&#25105;&#20204;&#22312;
&#36866;&#24403;&#30340;&#25193;&#23637;&#29615;&#22659;&#20869;&#27714;&#20027;&#20307;&#30340;&#20540;&#12290;&#21407;&#26469;&#30340; <span class="stt">let</span> &#20195;&#30721;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#22312;&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#20013;&#65292;&#25105;&#20204;&#22312;&#23436;&#25104;&#21097;&#20313;&#35745;&#31639;&#30340;&#19978;&#19979;&#25991;&#20013;&#27714; <span class="texMathInline">exp_1</span> &#30340;&#20540;&#12290;&#25152;&#20197;&#65292;&#22312;
<span class="stt">value-of/k</span> &#20013;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let-exp-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#28982;&#21518;&#25105;&#20204;&#32473;&#32493;&#25991;&#30340;&#25509;&#21475;&#28155;&#21152;&#35268;&#33539;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (let-exp-cont </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of/k </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt">) </span><span class="texMathInline">cont</span><span class="stt">)</span></p></td></tr></table></blockquote></blockquote><p><span class="stt">let</span> &#34920;&#36798;&#24335;&#20027;&#20307;&#30340;&#20540;&#25104;&#20026; <span class="stt">let</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#25152;&#20197;&#27714; <span class="stt">let</span> &#34920;&#36798;&#24335;&#20027;&#20307;&#26102;&#30340;
&#32493;&#25991;&#19982;&#27714;&#25972;&#20010; <span class="stt">let</span> &#34920;&#36798;&#24335;&#30340;&#30456;&#21516;&#12290;&#36825;&#26159;<span style="font-weight: bold">&#23614;&#35843;&#29992;&#19981;&#25193;&#22823;&#32493;&#25991;</span>&#30340;&#21448;&#19968;&#20363;&#23376;&#12290;
<a name="(idx._(gentag._744))"></a></p><p><a name="(idx._(gentag._745))"></a>
&#19979;&#38754;&#25105;&#20204;&#22788;&#29702; <span class="stt">if</span> &#34920;&#36798;&#24335;&#12290;&#22312; <span class="stt">if</span> &#34920;&#36798;&#24335;&#20013;&#65292;&#25105;&#20204;&#39318;&#20808;&#27714;&#26465;&#20214;&#30340;&#20540;&#65292;&#20294;&#26465;&#20214;&#30340;&#32467;
&#26524;&#19981;&#26159;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#25105;&#20204;&#35201;&#26032;&#29983;&#25104;&#19968;&#20010;&#32493;&#25991;&#65292;&#26597;&#30475;&#26465;&#20214;&#34920;&#36798;&#24335;&#30340;&#32467;&#26524;&#26159;&#21542;&#20026;&#30495;&#65292;&#28982;&#21518;&#27714;
&#30495;&#20540;&#34920;&#36798;&#24335;&#25110;&#20551;&#20540;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#25152;&#20197;&#22312; <span class="stt">value-of/k</span> &#20013;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp3</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">if-test-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp3</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20854;&#20013;&#65292;<span class="stt">if-test-cont</span> &#26159;&#21478;&#19968;&#20010;&#32493;&#25991;&#26500;&#36896;&#22120;&#65292;&#28385;&#36275;&#22914;&#19979;&#35268;&#33539;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (if-test-cont </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (if (expval-&gt;bool </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of/k </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of/k </span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">))</span></p></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._746))"></a>
&#29616;&#22312;&#65292;&#25105;&#20204;&#26377;&#20102;&#22235;&#20010;&#32493;&#25991;&#26500;&#36896;&#22120;&#12290;&#25105;&#20204;&#21487;&#20197;&#29992;&#36807;&#31243;&#34920;&#31034;&#27861;&#25110;&#32773;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#23454;&#29616;&#23427;&#20204;&#12290;&#36807;
&#31243;&#34920;&#31034;&#27861;&#22914; &#25152;&#31034;&#65292;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#20351;&#29992; <span class="stt">define-datatype</span>&#65292;
&#22914; &#25152;&#31034;&#12290;
<a name="(idx._(gentag._747))"></a>
<a name="(idx._(gentag._748))"></a>
<a name="(idx._(gentag._749))"></a></p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Cont}</span> = <span class="texMathInline">\mathit{ExpVal}</span> -&gt; <span class="texMathInline">\mathit{FinalAnswer}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">end-cont</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Cont}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">end-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:printf</span><span class="hspace">&nbsp;</span><span class="RktVal">"&#35745;&#31639;&#32467;&#26463;.~%"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">zero1-cont</span></span> : <span class="texMathInline">\mathit{Cont} \to \mathit{Cont}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">zero1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">let-exp-cont</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{Exp} \times \mathit{Env} \times \mathit{Cont} \to \mathit{Cont}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">let-exp-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">if-test-cont</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Exp} \times \mathit{Env} \times \mathit{Cont} \to \mathit{Cont}</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">Exp</span><span class="hspace">&nbsp;</span><span class="RktSym">&#215;</span><span class="hspace">&nbsp;</span><span class="RktSym">Exp</span><span class="hspace">&nbsp;</span><span class="RktSym">&#215;</span><span class="hspace">&nbsp;</span><span class="RktSym">Env</span><span class="hspace">&nbsp;</span><span class="RktSym">&#215;</span><span class="hspace">&nbsp;</span><span class="RktSym">Cont</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">Cont</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">if-test-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;bool</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-cont</span></span> : <span class="texMathInline">\mathit{Cont} \times \mathit{ExpVal} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#29992;&#36807;&#31243;&#34920;&#31034;&#32493;&#25991;
<a name="(idx._(gentag._750))"></a>
<a name="(idx._(gentag._751))"></a><a name="(elem._fig-5..2)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-test-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-cont</span></span> : <span class="texMathInline">\mathit{Cont} \times \mathit{ExpVal} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:printf</span><span class="hspace">&nbsp;</span><span class="RktVal">"&#35745;&#31639;&#32467;&#26463;.~%"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero1-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-test-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;bool</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#32493;&#25991;
<a name="(idx._(gentag._752))"></a>
<a name="(idx._(gentag._753))"></a><a name="(elem._fig-5..3)"></a></p></blockquote></blockquote><p>&#19979;&#38754;&#36825;&#20010;&#31616;&#21333;&#31639;&#20363;&#23637;&#31034;&#20102;&#21508;&#37096;&#20998;&#22914;&#20309;&#37197;&#21512;&#12290;&#20687; <a href="#%28part._s3..3%29" data-pltdoc="x">PROC&#65306;&#26377;&#36807;&#31243;&#30340;&#35821;&#35328;</a>&#37027;&#26679;&#65292;&#25105;&#20204;&#29992;
<span class="texMathInline">\textnormal{\guillemotleft} exp \textnormal{\guillemotright}</span> &#25351;&#20195;&#34920;&#36798;&#24335;
<span class="texMathInline">exp</span> &#30340;&#25277;&#35937;&#35821;&#27861;&#26641;&#12290;&#35774; <span class="texMathInline">\rho_0</span> &#26159;&#19968;&#29615;&#22659;&#65292;<span class="stt">b</span> &#22312;&#20854;&#20013;&#32465;&#23450;&#21040; <span class="stt">(bool-val
#t)</span>&#65307;<span class="texMathInline">cont_0</span> &#26159;&#21021;&#22987;&#32493;&#25991;&#65292;&#21363; <span class="stt">(end-cont)</span> &#30340;&#20540;&#12290;&#27880;&#37322;&#35828;&#26126;&#19981;&#26159;&#27491;&#24335;&#30340;&#65292;&#24212;&#19982;
<span class="stt">value-of/k</span> &#30340;&#23450;&#20041;&#21644; <span class="stt">apply-cont</span> &#30340;&#35268;&#33539;&#23545;&#29031;&#38405;&#35835;&#12290;&#36825;&#20010;&#20363;&#23376;&#26159;&#39044;&#27979;&#24615;&#30340;&#65292;&#22240;
&#20026;&#25105;&#20204;&#35753; <span class="stt">letrec</span> &#24341;&#20837;&#20102;&#36807;&#31243;&#65292;&#20294;&#36824;&#19981;&#30693;&#36947;&#22914;&#20309;&#35843;&#29992;&#23427;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of/k &lt;&lt;letrec p(x) = x in if b then 3 else 4&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#20196;<span class="texMathInline">\rho_0</span>&#20026;</span><span class="stt">(extend-env-rec ... </span><span class="texMathInline">\rho_0</span><span class="stt">)</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k &lt;&lt;if b then 3 else 4&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#28982;&#21518;&#65292;&#27714;&#26465;&#20214;&#34920;&#36798;&#24335;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k &lt;&lt;b&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(test-cont &lt;&lt;3&gt;&gt; &lt;&lt;4&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#25226;</span><span class="stt">b</span><span class="emph">&#30340;&#20540;&#20256;&#32473;&#32493;&#25991;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-cont (test-cont &lt;&lt;3&gt;&gt; &lt;&lt;4&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(bool-val #f))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#27714;&#30495;&#20540;&#34920;&#36798;&#24335;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#25226;&#34920;&#36798;&#24335;&#30340;&#20540;&#20256;&#32473;&#32493;&#25991;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-cont </span><span class="texMathInline">cont_0</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(num-val 3))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#22312;&#26368;&#21518;&#30340;&#32493;&#25991;&#20013;&#22788;&#29702;&#26368;&#32456;&#31572;&#26696;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(begin (eopl:printf ...) (num-val 3))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._754))"></a>
&#24046;&#20540;&#34920;&#36798;&#24335;&#32473;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#24102;&#26469;&#20102;&#26032;&#22256;&#38590;&#65292;&#22240;&#20026;&#23427;&#24471;&#27714;&#20004;&#20010;&#25805;&#20316;&#25968;&#30340;&#20540;&#12290;&#25105;&#20204;&#36824;&#20687; <span class="stt">if</span>
&#37027;&#26679;&#24320;&#22987;&#65292;&#20808;&#27714;&#31532;&#19968;&#20010;&#23454;&#21442;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">diff1-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#24403; <span class="stt">(diff1-cont exp2 env cont)</span> &#25910;&#21040;&#19968;&#20010;&#20540;&#65292;&#23427;&#24212;&#27714; <span class="stt">exp2</span> &#30340;&#20540;&#65292;&#27714;&#20540;&#26102;&#30340;&#19978;
&#19979;&#25991;&#24212;&#20445;&#23384; <span class="stt">exp1</span> &#30340;&#20540;&#12290;&#25105;&#20204;&#23558;&#20854;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (diff1-cont </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of/k </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(diff2-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#24403; <span class="stt">(diff2-cont val1 cont)</span> &#25910;&#21040;&#19968;&#20010;&#20540;&#65292;&#25105;&#20204;&#24471;&#21040;&#20102;&#20004;&#20010;&#25805;&#20316;&#25968;&#30340;&#20540;&#65292;&#25152;&#20197;&#65292;&#25105;&#20204;
&#21487;&#20197;&#25226;&#20108;&#32773;&#30340;&#24046;&#32487;&#32493;&#20256;&#32473;&#31561;&#24453;&#20013;&#30340; <span class="stt">cont</span>&#12290;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (diff2-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val2</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (let ((num1 (expval-&gt;num </span><span class="texMathInline">val1</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(num2 (expval-&gt;num </span><span class="texMathInline">val2</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-cont </span><span class="texMathInline">cont</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(num-val (- num1 num2))))</span></p></td></tr></table></blockquote><p>&#35753;&#25105;&#20204;&#30475;&#30475;&#35813;&#31995;&#32479;&#30340;&#20363;&#23376;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplComputationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><a name="(elem._cps-computation)"></a><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(44,11),3)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#24320;&#22987;&#22788;&#29702;&#31532;&#19968;&#20010;&#25805;&#20316;&#25968;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(44,11)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#24320;&#22987;&#22788;&#29702;&#31532;&#19968;&#20010;&#25805;&#20316;&#25968;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;44&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;11&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#25226;</span><span class="stt">&lt;&lt;44&gt;&gt;</span>&#30340;&#20540;&#20256;&#32473;&#32493;&#25991;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-cont</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;11&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(num-val 44))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#29616;&#22312;&#65292;&#24320;&#22987;&#22788;&#29702;&#31532;&#20108;&#20010;&#25805;&#20316;&#25968;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;11&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff2-cont (num-val 44)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#25226;&#20540;&#20256;&#32473;&#32493;&#25991;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-cont</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff2-cont (num-val 44)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(num-val 11))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph"><span class="texMathInline">44-11</span>&#31561;&#20110;<span class="texMathInline">33</span>&#65292;&#20256;&#32473;&#32493;&#25991;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-cont</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(num-val 33))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#24320;&#22987;&#22788;&#29702;&#31532;&#20108;&#20010;&#25805;&#20316;&#25968;</span><span class="stt">&lt;&lt;3&gt;&gt;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;3&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff2-cont (num-val 33)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#25226;&#20540;&#20256;&#32473;&#32493;&#25991;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-cont</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff2-cont (num-val 33)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(num-val 3))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph"><span class="texMathInline">33-3</span>&#31561;&#20110;<span class="texMathInline">30</span>&#65292;&#20256;&#32473;&#32493;&#25991;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-cont</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(num-val 30))</span></p></td></tr></table></blockquote><p><span class="stt">apply-cont</span> &#25171;&#21360;&#20986;&#28040;&#24687;&#8220;&#35745;&#31639;&#32467;&#26463;&#8221;&#65292;&#36820;&#22238;&#35745;&#31639;&#30340;&#26368;&#32456;
&#32467;&#26524; <span class="stt">(num-val 30)</span>&#12290;</p></blockquote><p><a name="(idx._(gentag._755))"></a>
&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#26368;&#21518;&#35201;&#22788;&#29702;&#30340;&#26159;&#36807;&#31243;&#35843;&#29992;&#12290;&#22312;&#20256;&#36882;&#29615;&#22659;&#30340;&#35299;&#37322;&#22120;&#20013;&#65292;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arg</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-procedure</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">proc1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#23601;&#20687;&#22312; <span class="stt">diff-exp</span> &#20013;&#19968;&#26679;&#65292;&#36825;&#37324;&#35201;&#22788;&#29702;&#20004;&#20010;&#35843;&#29992;&#12290;&#25152;&#20197;&#25105;&#20204;&#24517;&#39035;&#20808;&#25321;&#20854;&#19968;&#65292;&#28982;&#21518;&#36716;&#25442;
&#20313;&#19979;&#37096;&#20998;&#26469;&#22788;&#29702;&#31532;&#20108;&#20010;&#12290;&#27492;&#22806;&#65292;&#25105;&#20204;&#24517;&#39035;&#25226;&#32493;&#25991;&#20256;&#32473; <span class="stt">apply-procedure</span>&#65292;&#22240;&#20026;
<span class="stt">apply-procedure</span> &#35201;&#35843;&#29992; <span class="stt">value-of/k</span>&#12290;</p><p>&#25105;&#20204;&#36873;&#25321;&#20808;&#27714;&#25805;&#20316;&#31526;&#30340;&#20540;&#65292;&#25152;&#20197;&#22312; <span class="stt">value-of/k</span> &#20013;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rator</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rator-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#23601;&#20687; <span class="stt">diff-exp</span>&#65292;<span class="stt">rator-cont</span> &#22312;&#36866;&#24403;&#30340;&#29615;&#22659;&#20013;&#27714;&#25805;&#20316;&#25968;&#30340;&#20540;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (rator-cont </span><span class="texMathInline">rand</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of/k </span><span class="texMathInline">rand</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(rand-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._756))"></a>
&#24403; <span class="stt">rand-cont</span> &#25910;&#21040;&#19968;&#20010;&#20540;&#65292;&#23427;&#23601;&#21487;&#20197;&#35843;&#29992;&#36807;&#31243;&#20102;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (rand-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val2</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (let ((proc1 (expval-&gt;proc </span><span class="texMathInline">val1</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure/k proc1 </span><span class="texMathInline">val2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#36824;&#35201;&#20462;&#25913; <span class="stt">apply-procedure</span>&#65292;&#20197;&#31526;&#21512;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure/k</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \times \mathit{Cont} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._757))"></a></div></p></blockquote></blockquote><p>&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#23637;&#31034;&#23436;&#27605;&#12290;&#23436;&#25972;&#30340;&#35299;&#37322;&#22120;&#22914; &#21644;
fig-5.5 &#25152;&#31034;&#12290;&#32493;&#25991;&#30340;&#23436;&#25972;&#35268;&#33539;&#22914; &#25152;&#31034;&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of/k</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Env} \times \mathit{Cont} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letrec-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span><span class="hspace">&nbsp;</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-test-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p>&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#65288;&#31532;1&#37096;&#20998;&#65289;
<a name="(idx._(gentag._758))"></a>
<a name="(idx._(gentag._759))"></a><a name="(elem._fig-5..4)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._760))"></a></div></p></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \times \mathit{FinalAnswer} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p>&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#65288;&#31532;2&#37096;&#20998;&#65289;
<a name="(idx._(gentag._761))"></a>
<a name="(idx._(gentag._762))"></a><a name="(elem._fig-5..5)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._763))"></a></div></p></blockquote><p><a name="(elem._tail-call-explain)"></a>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#39564;&#35777;&#26029;&#35328;&#65306;&#19981;&#26159;&#36807;&#31243;&#35843;&#29992;&#65292;&#32780;&#26159;&#23454;&#21442;&#30340;&#27714;
&#20540;&#25193;&#22823;&#20102;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;&#20855;&#20307;&#26469;&#35828;&#65292;&#22914;&#26524;&#25105;&#20204;&#22312;&#26576;&#20010;&#32493;&#25991; <span class="texMathInline">cont_1</span> &#20013;&#27714;&#36807;&#31243;&#35843;&#29992;
<span class="stt">(</span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">)</span> &#30340;&#20540;&#65292;&#27714; <span class="texMathInline">exp_1</span> &#24471;&#21040;&#30340;&#36807;&#31243;&#20027;&#20307;&#20063;&#23558;&#22312; <span class="texMathInline">cont_1</span> &#20013;
&#27714;&#20540;&#12290;</p><p>&#20294;&#36807;&#31243;&#35843;&#29992;&#26412;&#36523;&#19981;&#20250;&#22686;&#22823;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;&#32771;&#34385; <span class="stt">(</span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">)</span> &#30340;&#27714;&#20540;&#65292;&#20854;&#20013;
<span class="texMathInline">exp_1</span> &#30340;&#20540;&#26159;&#19968;&#20010;&#36807;&#31243; <span class="texMathInline">proc_1</span>&#65292;<span class="texMathInline">exp_2</span> &#30340;&#20540;&#26159;&#26576;&#20010;&#34920;&#36798;&#20540; <span class="texMathInline">val_2</span>&#12290;</p><blockquote class="EoplComputationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of/k &lt;&lt;(</span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_2</span><span class="stt">)&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#27714;&#25805;&#20316;&#31526;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k &lt;&lt;</span><span class="texMathInline">exp_1</span><span class="stt">&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(rator-cont &lt;&lt;</span><span class="texMathInline">exp_2</span><span class="stt">&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_1</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#25226;&#36807;&#31243;&#20540;&#20256;&#32473;&#32493;&#25991;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-cont</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(rator-cont &lt;&lt;</span><span class="texMathInline">exp_2</span><span class="stt">&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">proc_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#27714;&#25805;&#20316;&#31526;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k &lt;&lt;</span><span class="texMathInline">exp_2</span><span class="stt">&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(rand-cont &lt;&lt;</span><span class="texMathInline">proc_1</span><span class="stt">&gt;&gt; </span><span class="texMathInline">cont_1</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#25226;&#21442;&#25968;&#20540;&#20256;&#32473;&#32493;&#25991;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-cont</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(rand-cont &lt;&lt;</span><span class="texMathInline">proc_1</span><span class="stt">&gt;&gt; </span><span class="texMathInline">cont_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">val_2</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#35843;&#29992;&#36807;&#31243;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-procedure/k </span><span class="texMathInline">proc_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_1</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#25152;&#20197;&#65292;&#36807;&#31243;&#35843;&#29992;&#26102;&#65292;&#36807;&#31243;&#20027;&#20307;&#22312;&#36807;&#31243;&#35843;&#29992;&#25152;&#22312;&#30340;&#32493;&#25991;&#20013;&#27714;&#20540;&#12290;&#25805;&#20316;&#25968;&#30340;&#27714;&#20540;&#38656;&#35201;&#25511;&#21046;&#19978;&#19979;&#25991;&#65292;
&#36827;&#20837;&#36807;&#31243;&#20027;&#20307;&#21017;&#19981;&#38656;&#35201;&#12290;
<a name="(idx._(gentag._764))"></a>
<a name="(idx._(gentag._765))"></a>
<a name="(idx._(gentag._766))"></a>
<a name="(idx._(gentag._767))"></a>
<a name="(idx._(gentag._768))"></a></p><blockquote class="EoplFigure"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (end-cont) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(eopl:printf</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"&#35745;&#31639;&#32467;&#26463;.~%")</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (diff1-cont </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of/k </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(diff2-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (diff2-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val2</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (let ((num1 (expval-&gt;num </span><span class="texMathInline">val1</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(num2 (expval-&gt;num </span><span class="texMathInline">val2</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-cont </span><span class="texMathInline">cont</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(num-val (- num1 num2))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (rator-cont </span><span class="texMathInline">rand</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of/k </span><span class="texMathInline">rand</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(rand-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (rand-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val2</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (let ((proc1 (expval-&gt;proc </span><span class="texMathInline">val1</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure/k proc1 </span><span class="texMathInline">val2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (zero1-cont </span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (apply-cont </span><span class="texMathInline">cont</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(bool-val (zero? (expval-&gt;num </span><span class="texMathInline">val</span><span class="stt">))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (if-test-cont </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (if (expval-&gt;bool </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of/k </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of/k </span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (let-exp-cont </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of/k </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt">) </span><span class="texMathInline">cont</span><span class="stt">)</span></p></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p> &#20013;&#32493;&#25991;&#30340;&#35268;&#33539;
<a name="(idx._(gentag._769))"></a>
<a name="(idx._(gentag._770))"></a><a name="(elem._fig-5..6)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._771))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._772))"></a>
<a name="(idx._(gentag._773))"></a>
&#29992;&#36807;&#31243;&#34920;&#31034;&#27861;&#23454;&#29616;&#32493;&#25991;&#25968;&#25454;&#31867;&#22411;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..2)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._774))"></a>
<a name="(idx._(gentag._775))"></a>
&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#23454;&#29616;&#32493;&#25991;&#25968;&#25454;&#31867;&#22411;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..3)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#35299;&#37322;&#22120;&#28155;&#21152; <span class="stt">let2</span>&#12290;<span class="stt">let2</span> &#34920;&#36798;&#24335;&#23601;&#20687; <span class="stt">let</span> &#34920;&#36798;&#24335;&#65292;&#20294;&#35201;&#25351;&#23450;&#20004;&#20010;&#21464;&#37327;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..4)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#35299;&#37322;&#22120;&#28155;&#21152; <span class="stt">let3</span>&#12290;<span class="stt">let3</span> &#34920;&#36798;&#24335;&#23601;&#20687; <span class="stt">let</span> &#34920;&#36798;&#24335;&#65292;&#20294;&#35201;&#25351;&#23450;&#19977;&#20010;&#21464;&#37327;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..5)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._776))"></a>
&#32473;&#35821;&#35328;&#28155;&#21152;ex3.9 &#20013;&#30340;&#21015;&#34920;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..6)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._777))"></a>
&#32473;&#35821;&#35328;&#28155;&#21152;ex3.10 &#20013;&#30340; <span class="stt">list</span> &#34920;&#36798;&#24335;&#12290;&#25552;&#31034;&#65306;&#28155;&#21152;&#20004;&#20010;&#32493;&#25991;&#26500;&#36896;&#22120;&#65292;
&#19968;&#20010;&#29992;&#26469;&#27714;&#21015;&#34920;&#39318;&#20803;&#32032;&#30340;&#20540;&#65292;&#19968;&#20010;&#29992;&#26469;&#27714;&#21015;&#34920;&#21097;&#20313;&#20803;&#32032;&#30340;&#20540;&#12290;
<a name="(idx._(gentag._778))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..7)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._779))"></a>
&#32473;&#35299;&#37322;&#22120;&#28155;&#21152;&#22810;&#22768;&#26126;&#30340; <span class="stt">let</span>&#65288;ex3.16&#65289;&#12290;
<a name="(idx._(gentag._780))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..8)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._781))"></a>
&#32473;&#35299;&#37322;&#22120;&#28155;&#21152;&#22810;&#21442;&#25968;&#36807;&#31243;&#65288;ex3.21&#65289;&#12290;
<a name="(idx._(gentag._782))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..9)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._783))"></a>
&#20462;&#25913;&#36825;&#20010;&#35299;&#37322;&#22120;&#65292;&#23454;&#29616; IMPLICIT-REFS &#35821;&#35328;&#12290;&#25552;&#31034;&#65306;&#28155;&#21152;&#26032;&#30340;&#32493;&#25991;&#26500;&#36896;&#22120;
<span class="stt">(set-rhs-cont env var cont)</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..10)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#21069;&#19968;&#39064;&#30340;&#35299;&#31572;&#65292;&#19981;&#35201;&#22312;&#32493;&#25991;&#20013;&#20445;&#23384;&#29615;&#22659;&#12290;
<a name="(idx._(gentag._784))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..11)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._785))"></a>
&#32473;&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#28155;&#21152;ex4.4 &#20013;&#30340; <span class="stt">begin</span> &#34920;&#36798;&#24335;&#12290;&#30830;&#20445;&#35843;&#29992;
<span class="stt">value-of</span> &#21644; <span class="stt">value-of-rands</span> &#26102;&#19981;&#38656;&#35201;&#29983;&#25104;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;
<a name="(idx._(gentag._786))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..12)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&ndash;fig-5.6 &#30340;&#35299;&#37322;&#22120;&#28155;&#21152;&#36741;&#21161;&#36807;&#31243;&#65292;&#29983;&#25104;&#31867;&#20284;
cps-computation &#35745;&#31639;&#30340;&#36755;&#20986;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..13)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._787))"></a>
&#25226; <span class="stt">fact</span> &#21644; <span class="stt">fact-iter</span> &#32763;&#35793;&#20026; LETREC &#35821;&#35328;&#12290;&#20320;&#21487;&#20197;&#32473;&#35821;&#35328;&#28155;&#21152;&#20056;&#27861;&#25805;&#20316;&#31526;&#12290;
&#28982;&#21518;&#65292;&#29992;&#21069;&#19968;&#36947;&#32451;&#20064;&#20013;&#24102;&#26377;&#36741;&#21161;&#32452;&#20214;&#30340;&#35299;&#37322;&#22120;&#35745;&#31639; <span class="stt">(fact 4)</span> &#21644; <span class="stt">(fact-iter 4)</span>&#12290;
&#23558;&#23427;&#20204;&#21644;&#26412;&#31456;&#24320;&#22836;&#30340;&#35745;&#31639;&#27604;&#36739;&#12290;&#22312; <span class="stt">(fact 4)</span> &#30340;&#36319;&#36394;&#26085;&#24535;&#20013;&#25214;&#20986; <span class="stt">(* 4 (* 3 (* 2
(fact 1))))</span>&#12290;&#35843;&#29992; <span class="stt">(fact 1)</span> &#26102;&#65292;<span class="stt">apply-procedure/k</span> &#30340;&#32493;&#25991;&#26159;&#20160;&#20040;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..14)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._788))"></a>
<a name="(idx._(gentag._789))"></a>
&#21069;&#38754;&#32451;&#20064;&#20013;&#30340;&#36741;&#21161;&#32452;&#20214;&#20135;&#29983;&#22823;&#37327;&#36755;&#20986;&#12290;&#20462;&#25913;&#36741;&#21161;&#32452;&#20214;&#65292;&#21482;&#36319;&#36394;&#35745;&#31639;&#36807;&#31243;&#20013;&#26368;&#22823;&#32493;&#25991;
&#30340;<span class="emph">&#23610;&#23544;</span>&#12290;&#25105;&#20204;&#29992;&#32493;&#25991;&#26500;&#36896;&#22120;&#30340;&#20351;&#29992;&#27425;&#25968;&#34913;&#37327;&#32493;&#25991;&#30340;&#22823;&#23567;&#65292;&#25152;
&#20197;cps-computation&#30340;&#35745;&#31639;&#20013;&#65292;&#32493;&#25991;&#26368;&#22823;&#23610;&#23544;&#26159; 3&#12290;&#28982;&#21518;&#65292;&#29992; <span class="stt">fact</span> &#21644;
<span class="stt">fact-iter</span> &#35745;&#31639;&#20960;&#20010;&#25805;&#20316;&#25968;&#30340;&#20540;&#12290;&#39564;&#35777; <span class="stt">fact</span> &#20351;&#29992;&#30340;&#32493;&#25991;&#26368;&#22823;&#23610;&#23544;&#38543;&#20854;&#21442;&#25968;&#36882;&#22686;&#65292;
&#20294; <span class="stt">fact-iter</span> &#20351;&#29992;&#30340;&#32493;&#25991;&#26368;&#22823;&#23610;&#23544;&#26159;&#24120;&#25968;&#12290;
<a name="(idx._(gentag._790))"></a>
<a name="(idx._(gentag._791))"></a>
<a name="(idx._(gentag._792))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..15)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._793))"></a>
<a name="(idx._(gentag._794))"></a>
&#25105;&#20204;&#30340;&#32493;&#25991;&#25968;&#25454;&#31867;&#22411;&#21482;&#26377;&#19968;&#20010;&#24120;&#37327; <span class="stt">end-cont</span>&#65292;&#25152;&#26377;&#20854;&#20182;&#32493;&#25991;&#26500;&#36896;&#22120;&#37117;&#26377;&#19968;&#20010;&#32493;&#25991;&#21442;&#25968;&#12290;
&#29992;&#21015;&#34920;&#34920;&#31034;&#21644;&#23454;&#29616;&#32493;&#25991;&#12290;&#29992;&#31354;&#21015;&#34920;&#34920;&#31034; <span class="stt">end-cont</span>&#65292;&#29992;&#39318;&#39033;&#20026;&#20854;&#20182;&#25968;&#25454;&#32467;&#26500;
&#65288;&#21517;&#20026;<span class="emph">&#24103;</span> (<span class="emph">frame</span>) &#25110;<span class="emph">&#27963;&#36291;&#35760;&#24405;&#34920;</span> (<span class="emph">activation record</span>)&#65289;&#65292;&#20313;&#39033;&#20026;&#24050;&#20445;
&#23384;&#32493;&#25991;&#30340;&#38750;&#31354;&#21015;&#34920;&#34920;&#31034;&#20854;&#20182;&#32493;&#25991;&#12290;&#35266;&#23519;&#21487;&#30693;&#65292;&#35299;&#37322;&#22120;&#25226;&#36825;&#20123;&#21015;&#34920;&#24403;&#25104;&#65288;&#24103;&#30340;&#65289;&#22534;&#26632;&#12290;
<a name="(idx._(gentag._795))"></a>
<a name="(idx._(gentag._796))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..16)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._797))"></a>
<a name="(idx._(gentag._798))"></a>
<a name="(idx._(gentag._799))"></a>
&#25193;&#23637;&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#65292;&#22788;&#29702;ex4.22 &#20013;&#30340;&#35821;&#35328;&#12290;&#32473; <span class="stt">result-of</span> &#20256;&#36882;
&#19968;&#20010;&#32493;&#25991;&#21442;&#25968;&#65292;&#30830;&#20445; <span class="stt">result-of</span> &#19981;&#22312;&#25193;&#22823;&#25511;&#21046;&#19978;&#19979;&#25991;&#30340;&#20301;&#32622;&#35843;&#29992;&#12290;&#22240;&#20026;&#35821;&#21477;&#19981;&#36820;&#22238;&#20540;&#65292;
&#38656;&#35201;&#21306;&#20998;&#26222;&#36890;&#32493;&#25991;&#21644;&#35821;&#21477;&#32493;&#25991;&#65307;&#21518;&#32773;&#36890;&#24120;&#21483;<span class="emph">&#21629;&#20196;&#32493;&#25991;</span> (<span class="emph">command continuation</span>)&#12290;
&#32493;&#25991;&#25509;&#21475;&#24212;&#21253;&#21547;&#36807;&#31243; <span class="stt">apply-command-cont</span>&#65292;&#23427;&#21462;&#19968;&#21629;&#20196;&#32493;&#25991;&#24182;&#20351;&#29992;&#23427;&#12290;&#29992;&#25968;&#25454;&#32467;&#26500;&#21644;
&#26080;&#21442;&#25968;&#36807;&#31243;&#20004;&#31181;&#26041;&#24335;&#23454;&#29616;&#21629;&#20196;&#32493;&#25991;&#12290;
<a name="(idx._(gentag._800))"></a>
<a name="(idx._(gentag._801))"></a>
<a name="(idx._(gentag._802))"></a></p></blockquote><h4 class="heading">5.2<tt>&nbsp;</tt><a name="(part._s5..2)"></a>&#36339;&#36291;&#24335;&#35299;&#37322;&#22120;<span class="button-group"><a href="#(part._s5..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._803))"></a>
<a name="(idx._(gentag._804))"></a>
&#26377;&#20154;&#21487;&#33021;&#24819;&#29992;&#26222;&#36890;&#30340;&#36807;&#31243;&#24335;&#35821;&#35328;&#36716;&#35793;&#35299;&#37322;&#22120;&#65292;&#20351;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#32493;&#25991;&#65292;&#20174;&#32780;&#36991;&#20813;&#39640;&#38454;&#20989;&#25968;&#12290;
&#20294;&#26159;&#65292;&#29992;&#22823;&#22810;&#25968;&#36807;&#31243;&#24335;&#35821;&#35328;&#20570;&#36825;&#31181;&#32763;&#35793;&#37117;&#24456;&#22256;&#38590;&#65306;<a name="(elem._imper-reason)"></a>&#23427;&#20204;&#19981;&#21482;&#22312;
&#24517;&#35201;&#26102;&#25165;&#25193;&#22823;&#25511;&#21046;&#19978;&#19979;&#25991;&#65292;&#32780;&#19988;&#22312;&#27599;&#20010;&#20989;&#25968;&#35843;&#29992;&#22788;&#25193;&#22823;&#25511;&#21046;&#19978;&#19979;&#25991;&#65288;&#21363;&#22534;&#26632;&#65281;&#65289;&#12290;&#22312;&#25105;&#20204;&#30340;
&#31995;&#32479;&#20013;&#65292;&#30001;&#20110;&#36807;&#31243;&#35843;&#29992;&#22312;&#35745;&#31639;&#32467;&#26463;&#20043;&#21069;&#19981;&#36820;&#22238;&#65292;&#22312;&#37027;&#20043;&#21069;&#65292;&#31995;&#32479;&#30340;&#22534;&#26632;&#23558;&#19968;&#30452;&#22686;&#39640;&#12290;</p><p><a name="(idx._(gentag._805))"></a>
<a name="(elem._imperative-lang)"></a>&#36825;&#31181;&#34892;&#20026;&#19981;&#26080;&#36947;&#29702;&#65306;&#22312;&#36825;&#31181;&#35821;&#35328;&#20013;&#65292;&#20960;&#20046;&#25152;&#26377;&#30340;&#36807;&#31243;&#35843;&#29992;
&#37117;&#20986;&#29616;&#22312;&#36171;&#20540;&#35821;&#21477;&#30340;&#21491;&#36793;&#65292;&#25152;&#20197;&#20960;&#20046;&#25152;&#26377;&#36807;&#31243;&#35843;&#29992;&#37117;&#35201;&#25193;&#22823;&#25511;&#21046;&#19978;&#19979;&#25991;&#65292;&#20197;&#20415;&#35760;&#24405;&#24453;&#23436;&#25104;&#30340;
&#36171;&#20540;&#12290;&#22240;&#27492;&#65292;&#20307;&#31995;&#32467;&#26500;&#20026;&#36825;&#31181;&#26368;&#24120;&#35265;&#30340;&#24773;&#24418;&#20570;&#20102;&#20248;&#21270;&#12290;&#32780;&#19988;&#65292;&#30001;&#20110;&#22823;&#22810;&#25968;&#35821;&#35328;&#22312;&#22534;&#26632;&#20013;&#23384;&#20648;
&#29615;&#22659;&#20449;&#24687;&#65292;&#25152;&#26377;&#36807;&#31243;&#35843;&#29992;&#29983;&#25104;&#30340;&#25511;&#21046;&#19978;&#19979;&#25991;&#37117;&#19981;&#33021;&#24536;&#20102;&#31227;&#38500;&#36825;&#19968;&#20449;&#24687;&#12290;</p><p><a name="(idx._(gentag._806))"></a>
&#22312;&#36825;&#31181;&#35821;&#35328;&#20013;&#65292;&#19968;&#31181;&#35299;&#20915;&#26041;&#26696;&#26159;&#20351;&#29992;<span class="emph">&#36339;&#36291;</span> (<span class="emph">trampolining</span>) &#25216;&#26415;&#12290;&#20026;&#20102;&#36991;&#20813;&#20135;&#29983;&#26080;
&#38480;&#38271;&#30340;&#35843;&#29992;&#38142;&#65292;&#25105;&#20204;&#25226;&#35843;&#29992;&#38142;&#25171;&#26029;&#65292;&#35753;&#35299;&#37322;&#22120;&#20013;&#30340;&#26576;&#20010;&#36807;&#31243;&#36820;&#22238;&#19968;&#20010;&#26080;&#21442;&#25968;&#36807;&#31243;&#12290;&#36825;&#20010;&#36807;&#31243;
&#22312;&#35843;&#29992;&#26102;&#32487;&#32493;&#35745;&#31639;&#12290;&#25972;&#20010;&#35745;&#31639;&#30001;&#19968;&#20010;&#21517;&#21483;<span class="emph">&#36339;&#24202;</span> (<span class="emph">trampoline</span>) &#30340;&#36807;&#31243;&#39537;&#21160;&#65292;&#23427;&#20174;&#19968;
&#20010;&#36807;&#31243;&#35843;&#29992;&#24377;&#23556;&#21040;&#21478;&#19968;&#20010;&#12290;&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312; <span class="stt">apply-procedure/k</span>&#30340;&#20027;&#20307;&#21608;&#22260;&#25554;&#20837;&#19968;
&#20010; <span class="stt">(lambda () ...)</span>&#65292;&#22240;&#20026;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#21482;&#35201;&#19981;&#25191;&#34892;&#36807;&#31243;&#35843;&#29992;&#65292;&#34920;&#36798;&#24335;&#30340;&#36816;&#34892;&#26102;
&#38388;&#23601;&#26159;&#26377;&#38480;&#30340;&#12290;</p><p>&#24471;&#20986;&#30340;&#20195;&#30721;&#22914; &#25152;&#31034;&#65292;&#23427;&#20063;&#23637;&#31034;&#20102;&#35299;&#37322;&#22120;&#20013;&#25152;&#26377;&#30340;&#23614;&#35843;&#29992;&#12290;&#22240;&#20026;&#25105;&#20204;
&#20462;&#25913;&#20102; <span class="stt">apply-procedure/k</span>&#65292;&#19981;&#20877;&#35753;&#23427;&#36820;&#22238;&#19968;&#20010; <span class="texMathInline">\mathit{ExpVal}</span>&#65292;&#32780;&#26159;&#36820;&#22238;&#19968;
&#20010;&#36807;&#31243;&#65292;&#25105;&#20204;&#24471;&#37325;&#20889;&#23427;&#21644;&#23427;&#25152;&#35843;&#29992;&#25152;&#26377;&#36807;&#31243;&#30340;&#21512;&#32422;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#24517;&#39035;&#26816;&#26597;&#35299;&#37322;&#22120;&#20013;&#25152;&#26377;&#36807;&#31243;
&#30340;&#21512;&#32422;&#12290;</p><p><a name="(idx._(gentag._807))"></a>
&#25105;&#20204;&#20174; <span class="stt">value-of-program</span> &#24320;&#22987;&#12290;&#30001;&#20110;&#36825;&#26159;&#35843;&#29992;&#35299;&#37322;&#22120;&#30340;&#36807;&#31243;&#65292;&#23427;&#30340;&#21512;&#32422;&#20445;&#25345;&#19981;&#21464;&#12290;
&#23427;&#35843;&#29992; <span class="stt">value-of/k</span>&#65292;&#25226;&#32467;&#26524;&#20256;&#32473; <span class="stt">trampoline</span>&#12290;&#22240;&#20026;&#25105;&#20204;&#35201;&#25805;&#20316;
<span class="stt">value-of/k</span> &#30340;&#32467;&#26524;&#65292;&#25152;&#20197;&#23427;&#19981;&#26159; <span class="texMathInline">\mathit{FinalAnswer}</span>&#12290;&#25105;&#20204;&#26126;&#26126;&#27809;&#26377;&#20462;&#25913;
<span class="stt">value-of/k</span> &#30340;&#20195;&#30721;&#65292;&#24590;&#20040;&#20250;&#36825;&#26679;&#21602;&#65311;&#36807;&#31243; <span class="stt">value-of/k</span> &#22312;&#23614;&#37096;&#36882;&#24402;&#35843;&#29992;
<span class="stt">apply-cont</span>&#65292;<span class="stt">apply-cont</span> &#22312;&#23614;&#37096;&#36882;&#24402;&#35843;&#29992; <span class="stt">apply-procedure/k</span>&#65292;&#25152;&#20197;
<span class="stt">apply-procedure/k</span> &#30340;&#20219;&#20309;&#32467;&#26524;&#37117;&#21487;&#33021;&#25104;&#20026; <span class="stt">value-of/k</span> &#30340;&#32467;&#26524;&#12290;&#32780;&#25105;&#20204;&#20462;&#25913;&#20102;
<span class="stt">apply-procedure/k</span>&#65292;&#23427;&#30340;&#36820;&#22238;&#20540;&#19982;&#20043;&#21069;&#19981;&#21516;&#12290;</p><p>&#25105;&#20204;&#24341;&#20837;<span class="emph">&#24377;&#29699;</span> (<span class="emph"><span class="texMathInline">\mathit{Bounce}</span></span>)&#65292;&#20316;&#20026; <span class="stt">value-of/k</span> &#30340;&#21487;&#33021;&#32467;&#26524;&#65288;&#25105;&#20204;
&#21483;&#23427;&#24377;&#29699;&#65292;&#22240;&#20026;&#23427;&#26159;&#36339;&#24202;&#30340;&#36755;&#20837;&#65289;&#12290;&#36825;&#19968;&#38598;&#21512;&#30340;&#20540;&#26159;&#20160;&#20040;&#21602;&#65311;<span class="stt">value-of/k</span> &#22312;&#23614;&#37096;&#36882;&#24402;
&#35843;&#29992;&#33258;&#36523;&#21644; <span class="stt">apply-cont</span>&#65292;&#36825;&#20123;&#26159;&#23427;&#37324;&#38754;&#25152;&#26377;&#30340;&#23614;&#36882;&#24402;&#12290;&#25152;&#20197;&#33021;&#25104;&#20026; <span class="stt">value-of/k</span>
&#32467;&#26524;&#30340;&#20540;&#21482;&#33021;&#26159; <span class="stt">apply-cont</span> &#30340;&#32467;&#26524;&#12290;&#32780;&#19988;&#65292;<span class="stt">apply-procedure/k</span> &#22312;&#23614;&#37096;&#36882;&#24402;&#35843;
&#29992; <span class="stt">value-of/k</span>&#65292;&#25152;&#20197;&#19981;&#35770; <span class="texMathInline">\mathit{Bounce}</span> &#26159;&#20160;&#20040;&#65292;&#23427;&#26159; <span class="stt">value-of/k</span>&#12289;
<span class="stt">apply-cont</span> &#21644; <span class="stt">apply-procedure/k</span> &#32467;&#26524;&#30340;&#38598;&#21512;&#12290;</p><p>&#36807;&#31243; <span class="stt">value-of/k</span> &#21644; <span class="stt">apply-cont</span> &#21482;&#26159;&#22312;&#23614;&#37096;&#35843;&#29992;&#20854;&#20182;&#36807;&#31243;&#12290;&#30495;&#27491;&#25226;&#20540;&#25918;&#20837;
<span class="texMathInline">\mathit{Bounce}</span> &#20013;&#30340;&#26159; <span class="stt">apply-procedure/k</span>&#12290;&#36825;&#20123;&#26159;&#20160;&#20040;&#26679;&#30340;&#20540;&#21602;&#65311;&#25105;&#20204;&#26469;&#30475;
&#20195;&#30721;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><div class="SIntrapara">&#24050;&#30693; <span class="stt">apply-procedure/k</span> &#36820;&#22238;&#26080;&#21442;&#25968;&#30340;&#36807;&#31243;&#65292;&#35813;&#36807;&#31243;&#22312;&#35843;&#29992;&#26102;&#36820;&#22238;&#19968;&#20010;
<span class="texMathInline">\mathit{ExpVal}</span>&#65292;&#25110;&#35843;&#29992; <span class="stt">value-of/k</span>&#12289;<span class="stt">apply-cont</span> &#25110;
<span class="stt">apply-procedure/k</span> &#20043;&#19968;&#30340;&#32467;&#26524;&#65292;&#20063;&#23601;&#26159; <span class="texMathInline">\mathit{Bounce}</span>&#12290;&#25152;&#20197;&#65292;
<span class="stt">apply-procedure/k</span> &#21487;&#33021;&#30340;&#21462;&#20540;&#30001;&#22914;&#19979;&#38598;&#21512;&#25551;&#36848;&#65306;
<span class="texMathDisplay">\mathit{ExpVal} \cup (() \to \mathit{Bounce})</span>
</div><div class="SIntrapara"><blockquote class="SubFlow"><p>&#36825;&#21644; <span class="stt">value-of/k</span> &#30340;&#21487;&#33021;&#32467;&#26524;&#30456;&#21516;&#65292;&#25152;&#20197;&#25105;&#20204;&#24471;&#20986;&#32467;&#35770;&#65306;
<span class="texMathDisplay">\mathit{Bounce} = \mathit{ExpVal} \cup (() \to \mathit{Bounce})</span>
&#21512;&#32422;&#20026;&#65306;
<span class="texMathDisplay">\begin{alignedat}{-1}
&amp;<span style="font-weight: bold">value-of-program</span> : \mathit{Program} \to \mathit{FinalAnswer} \\
&amp;<span style="font-weight: bold">trampoline</span> : \mathit{Bounce} \to \mathit{FinalAnswer} \\
&amp;<span style="font-weight: bold">value-of/k</span> : \mathit{Exp} \times \mathit{Env} \times \mathit{Cont} \to \mathit{Bounce} \\
&amp;<span style="font-weight: bold">apply-cont</span> : \mathit{Cont} \times \mathit{ExpVal} \to \mathit{Bounce} \\
&amp;<span style="font-weight: bold">apply-procedure/k</span> : \mathit{Proc} \times \mathit{ExpVal} \times \mathit{FinalAnswer} \to \mathit{Bounce}
\end{alignedat}</span>
<a name="(idx._(gentag._808))"></a></p></blockquote></div></p><p>&#36807;&#31243; <span class="stt">trampoline</span> &#28385;&#36275;&#20854;&#21512;&#32422;&#65306;&#39318;&#20808;&#32473;&#23427;&#20256;&#20837;&#19968;&#20010; <span class="texMathInline">\mathit{Bounce}</span>&#12290;&#22914;&#26524;&#20854;&#21442;
&#25968;&#26159;&#19968;&#20010;<span class="texMathInline">\mathit{ExpVal}</span>&#65288;&#20063;&#26159; <span class="texMathInline">\mathit{FinalAnswer}</span>&#65289;&#65292;&#37027;&#20040;&#36820;&#22238;&#65307;&#21542;&#21017;&#65292;&#21442;
&#25968;&#19968;&#23450;&#26159;&#19968;&#20010;&#36820;&#22238;&#20540;&#20026; <span class="texMathInline">\mathit{Bounce}</span> &#30340;&#36807;&#31243;&#12290;&#25152;&#20197;&#65292;&#23427;&#35843;&#29992;&#36825;&#20010;&#26080;&#21442;&#25968;&#36807;&#31243;&#65292;&#28982;
&#21518;&#35843;&#29992;&#33258;&#36523;&#22788;&#29702;&#20854;&#32467;&#26524;&#65292;&#36820;&#22238;&#20540;&#24635;&#26159;&#19968;&#20010; <span class="texMathInline">\mathit{Bounce}</span>&#65288;&#22312; <a href="#%28part._s7..4%29" data-pltdoc="x">INFERRED&#65306;&#24102;&#26377;&#31867;&#22411;&#25512;&#23548;&#30340;&#35821;&#35328;</a>&#25105;&#20204;&#23558;
&#30475;&#21040;&#22914;&#20309;&#33258;&#21160;&#23436;&#25104;&#36825;&#20010;&#25512;&#29702;&#36807;&#31243;&#65289;&#12290;</p><p><span class="stt">apply-procedure/k</span> &#36820;&#22238;&#30340;&#27599;&#20010;&#26080;&#21442;&#25968;&#36807;&#31243;&#37117;&#34920;&#31034;&#35745;&#31639;&#27969;&#31243;&#20013;&#30340;&#19968;&#20010;&#24555;&#29031;&#12290;&#25105;&#20204;&#21487;&#20197;
&#22312;&#35745;&#31639;&#20013;&#30340;&#19981;&#21516;&#20301;&#32622;&#36820;&#22238;&#36825;&#26679;&#30340;&#24555;&#29031;&#12290;&#22312; <a href="#%28part._s5..5%29" data-pltdoc="x">&#32447;&#31243;</a>&#65292;&#25105;&#20204;&#23558;&#30475;&#21040;&#22914;&#20309;&#29992;&#36825;&#19968;&#24605;&#24819;&#27169;&#25311;
&#22810;&#32447;&#31243;&#31243;&#24207;&#20013;&#30340;&#21407;&#23376;&#25805;&#20316;&#12290;</p><p><div class="SIntrapara"><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Bounce}</span> = <span class="texMathInline">\mathit{ExpVal} \cup (() \to \mathit{Bounce})</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">trampoline</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">trampoline</span></span> : <span class="texMathInline">\mathit{Bounce} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">trampoline</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval?</span><span class="hspace">&nbsp;</span><span class="RktSym">bounce</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">trampoline</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of/k</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Env} \times \mathit{Cont} \to \mathit{Bounce}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-cont</span></span> : <span class="texMathInline">\mathit{Cont} \times \mathit{ExpVal} \to \mathit{Bounce}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-procedure/k</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure/k</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \times \mathit{Cont} \to \mathit{Bounce}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p>&#29992;&#36807;&#31243;&#34920;&#31034;&#36339;&#24202;
<a name="(idx._(gentag._809))"></a>
<a name="(idx._(gentag._810))"></a><a name="(elem._fig-5..7)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._811))"></a></div></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._812))"></a>
<a name="(idx._(gentag._813))"></a>
<a name="(idx._(gentag._814))"></a></div></p><blockquote class="EoplExercise"><p><a name="(elem._ex5..17)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#36339;&#36291;&#24335;&#35299;&#37322;&#22120;&#65292;&#25226;&#25152;&#26377;&#35843;&#29992; <span class="stt">apply-procedure/k</span> &#30340;&#22320;&#26041;&#65288;&#21482;&#26377;&#19968;&#22788;&#65289;&#25918;&#20837;
<span class="stt">(lambda () ...)</span> &#20013;&#12290;&#36825;&#19968;&#20462;&#25913;&#38656;&#35201;&#26356;&#25913;&#21512;&#32422;&#21527;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..18)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._815))"></a>
<a name="(idx._(gentag._816))"></a>
 &#20013;&#30340;&#36339;&#24202;&#31995;&#32479;&#20351;&#29992;&#36807;&#31243;&#34920;&#31034; <span class="texMathInline">\mathit{Bounce}</span>&#12290;&#25913;&#29992;&#25968;&#25454;&#32467;&#26500;
&#34920;&#31034;&#27861;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..19)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19981;&#35201;&#22312; <span class="stt">apply-procedure/k</span> &#20027;&#20307;&#21608;&#22260;&#25554;&#20837; <span class="stt">(lambda () ...)</span>&#65292;&#25913;&#20026;&#22312;
<span class="stt">apply-cont</span> &#30340;&#20027;&#20307;&#21608;&#22260;&#25554;&#20837;&#12290;&#20462;&#25913;&#21512;&#32422;&#65292;&#20351;&#20043;&#31526;&#21512;&#36825;&#19968;&#26356;&#25913;&#12290;<span class="texMathInline">\mathit{Bounce}</span>
&#30340;&#23450;&#20041;&#38656;&#35201;&#20462;&#25913;&#21527;&#65311;&#28982;&#21518;&#65292;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#26367;&#25442;&#36807;&#31243;&#34920;&#31034;&#27861;&#34920;&#31034; <span class="texMathInline">\mathit{Bounce}</span>&#65292;
&#20687;ex5.18 &#37027;&#26679;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..20)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;ex5.18 &#20013;&#65292;<span class="stt">trampoline</span> &#36820;&#22238; <span class="texMathInline">\mathit{FinalAnswer}</span> &#20043;&#21069;&#30340;
&#26368;&#21518;&#19968;&#39063;&#24377;&#29699;&#24418;&#22914; <span class="stt">(apply-cont (end-cont) </span><span class="texMathInline">val</span><span class="stt">)</span>&#65292;&#20854;&#20013;&#65292;<span class="texMathInline">val</span> &#26159;
<span class="texMathInline">\mathit{ExpVal}</span>&#12290;&#21033;&#29992;&#36825;&#19968;&#28857;&#20248;&#21270;ex5.19 &#20013;&#24377;&#29699;&#30340;&#34920;&#31034;&#12290;
<a name="(idx._(gentag._817))"></a>
<a name="(idx._(gentag._818))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..21)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#29992;&#26222;&#36890;&#30340;&#36807;&#31243;&#24335;&#35821;&#35328;&#23454;&#29616;&#36339;&#36291;&#24335;&#35299;&#37322;&#22120;&#12290;&#29992;ex5.18 &#20013;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#24555;&#29031;&#65292;
&#25226; <span class="stt">trampoline</span> &#20013;&#23545;&#33258;&#36523;&#30340;&#36882;&#24402;&#35843;&#29992;&#26367;&#25442;&#20026;&#26222;&#36890;&#30340; <span class="stt">while</span> &#25110;&#20854;&#23427;&#24490;&#29615;&#32467;&#26500;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..22)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._819))"></a>
&#26377;&#20154;&#21487;&#33021;&#24819;&#29992;&#26222;&#36890;&#30340;&#36807;&#31243;&#24335;&#35821;&#35328;&#36716;&#35793;<a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a>&#20013;&#20256;&#36882;&#29615;&#22659;&#30340;&#35299;&#37322;&#22120;&#12290;&#21516;&#26679;&#26159;&#22240;
&#20026;<a href="#%28elem._imper-reason%29" data-pltdoc="x">&#19978;&#36848;</a>&#21407;&#22240;&#65292;&#38500;&#20102;&#26368;&#31616;&#21333;&#30340;&#24773;&#20917;&#65292;&#36825;&#31181;&#36716;&#25442;&#37117;&#20250;&#22833;&#36133;&#12290;&#36339;&#36291;&#25216;
&#26415;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#20063;&#26377;&#25928;&#21527;&#65311;</p></blockquote><h4 class="heading">5.3<tt>&nbsp;</tt><a name="(part._s5..3)"></a>&#25351;&#20196;&#24335;&#35299;&#37322;&#22120;<span class="button-group"><a href="#(part._s5..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._820))"></a>
<a name="(idx._(gentag._821))"></a>
&#22312;<a href="#%28part._state%29" data-pltdoc="x">&#29366;&#24577;</a>&#20013;&#25105;&#20204;&#30475;&#21040;&#65292;&#32473;&#20849;&#20139;&#21464;&#37327;&#36171;&#20540;&#26377;&#26102;&#21487;&#20197;&#26367;&#20195;&#32465;&#23450;&#12290;
&#32771;&#34385; &#39030;&#37096;&#30340;&#32769;&#20363;&#23376; <span class="stt">even</span> &#21644; <span class="stt">odd</span>&#12290;
<a name="(idx._(gentag._822))"></a><a name="(idx._(gentag._823))"></a></p><p>&#21487;&#20197;&#29992; &#20013;&#38388;&#30340;&#31243;&#24207;&#26367;&#20195;&#23427;&#20204;&#12290;&#20854;&#20013;&#65292;&#20849;&#20139;&#21464;&#37327; <span class="stt">x</span> &#20379;&#20004;&#20010;&#36807;&#31243;
&#20132;&#25442;&#20449;&#24687;&#12290;&#22312;&#39030;&#37096;&#30340;&#20363;&#23376;&#20013;&#65292;&#36807;&#31243;&#20027;&#20307;&#22312;&#29615;&#22659;&#20013;&#26597;&#25214;&#30456;&#20851;&#25968;&#25454;&#65307;&#22312;&#21478;&#19968;&#20010;&#31243;&#24207;&#20013;&#65292;&#23427;&#20204;&#20174;&#23384;
&#20648;&#22120;&#20013;&#26597;&#25214;&#30456;&#20851;&#25968;&#25454;&#12290;</p><p>&#32771;&#34385; &#24213;&#37096;&#30340;&#35745;&#31639;&#36319;&#36394;&#26085;&#24535;&#12290;&#23427;&#21487;&#33021;&#26159;&#20108;&#32773;&#20013;&#20219;&#19968;&#35745;&#31639;&#36319;&#36394;&#26085;&#24535;&#12290;&#24403;
&#25105;&#20204;&#35760;&#24405;&#35843;&#29992;&#30340;&#36807;&#31243;&#21644;&#23454;&#21442;&#26102;&#65292;&#23427;&#26159;&#31532;&#19968;&#20010;&#35745;&#31639;&#30340;&#36319;&#36394;&#26085;&#24535;&#65307;&#24403;&#25105;&#20204;&#35760;&#24405;&#35843;&#29992;&#30340;&#36807;&#31243;&#21644;&#23492;&#23384;
&#22120; <span class="stt">x</span> &#30340;&#20540;&#26102;&#65292;&#23427;&#26159;&#31532;&#20108;&#20010;&#35745;&#31639;&#30340;&#36319;&#36394;&#26085;&#24535;&#12290;</p><p>&#32780;&#24403;&#25105;&#20204;&#35760;&#24405;&#31243;&#24207;&#35745;&#25968;&#22120;&#30340;&#20301;&#32622;&#21644;&#23492;&#23384;&#22120; <span class="stt">x</span> &#30340;&#20869;&#23481;&#26102;&#65292;&#36825;&#21448;&#21487;&#20197;&#35299;&#37322;&#20026;
<a name="(idx._(gentag._824))"></a>
<span class="emph">goto</span>&#65288;&#21517;&#20026;<span class="emph">&#27969;&#31243;&#22270;&#31243;&#24207;</span> (<span class="emph">flowchart program</span>)&#65289;&#30340;&#36319;&#36394;&#26085;&#24535;&#12290;</p><blockquote class="EoplFigure"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">even(x) = if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else (odd sub1(x))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">odd(x) = if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else (even sub1(x))</span></p></td></tr><tr><td><p><span class="stt">in (odd 13)</span></p></td></tr></table></blockquote><p><span class="texMathInline">\rule{\linewidth}{1pt}</span></p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 0</span></p></td></tr><tr><td><p><span class="stt">in letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">even() = if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else let d = set x = sub1(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (odd)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">odd() = if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else let d = set x = sub1(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (even)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let d = set x = 13</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (odd)</span></p></td></tr></table></blockquote><p><span class="texMathInline">\rule{\linewidth}{0.5pt}</span></p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">x = 13;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">goto odd;</span></p></td></tr><tr><td><p><span class="stt">even: if (x=0) then return(1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else {x = x-1;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">goto odd;}</span></p></td></tr><tr><td><p><span class="stt">odd:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if (x=0) then return(0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else {x = x-1;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">goto even;}</span></p></td></tr></table></blockquote><p><span class="texMathInline">\rule{\linewidth}{0.5pt}</span></p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(odd 13)</span></p></td></tr><tr><td><p><span class="stt">= (even 12)</span></p></td></tr><tr><td><p><span class="stt">= (odd 11)</span></p></td></tr><tr><td><p><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt">= (odd 1)</span></p></td></tr><tr><td><p><span class="stt">= (even 0)</span></p></td></tr><tr><td><p><span class="stt">= 1</span></p></td></tr></table></blockquote><blockquote class="caption"><p>&#36319;&#36394;&#26085;&#24535;&#30456;&#21516;&#30340;&#19977;&#20010;&#31243;&#24207;<a name="(elem._fig-5..8)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._825))"></a>
<a name="(idx._(gentag._826))"></a>
&#33021;&#22914;&#27492;&#65292;&#21482;&#26159;&#22240;&#20026;&#21407;&#20195;&#30721;&#20013; <span class="stt">even</span> &#21644; <span class="stt">odd</span> &#30340;&#35843;&#29992;&#19981;&#25193;&#22823;&#25511;&#21046;&#19978;&#19979;&#25991;&#65306;&#23427;&#20204;&#26159;&#23614;
&#35843;&#29992;&#12290;&#25105;&#20204;&#19981;&#33021;&#36825;&#26679;&#36716;&#25442; <span class="stt">fact</span>&#65292;&#22240;&#20026; <span class="stt">fact</span> &#30340;&#36319;&#36394;&#26085;&#24535;&#26080;&#38480;&#22686;&#38271;&#65306;
&#8220;&#31243;&#24207;&#35745;&#25968;&#22120;&#8221;&#19981;&#26159;&#20687;&#36825;&#37324;&#19968;&#26679;&#20986;&#29616;&#22312;&#36319;&#36394;&#26085;&#24535;&#30340;&#26368;&#22806;&#23618;&#65292;&#32780;
&#26159;&#20986;&#29616;&#22312;&#25511;&#21046;&#19978;&#19979;&#25991;&#20013;&#12290;</p><p>&#20219;&#20309;&#19981;&#38656;&#35201;&#25511;&#21046;&#19978;&#19979;&#25991;&#30340;&#31243;&#24207;&#37117;&#21487;&#20197;&#36825;&#26679;&#36716;&#25442;&#12290;&#36825;&#32473;&#20102;&#25105;&#20204;&#19968;&#26465;&#37325;&#35201;&#21407;&#29702;&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#26080;&#21442;&#25968;&#30340;&#23614;&#35843;&#29992;&#31561;&#21516;&#20110;&#36339;&#36716;&#12290;
<a name="(idx._(gentag._827))"></a></span></p></blockquote></blockquote><p>&#22914;&#26524;&#19968;&#32452;&#36807;&#31243;&#21482;&#36890;&#36807;&#23614;&#35843;&#29992;&#20114;&#30456;&#35843;&#29992;&#65292;&#37027;&#20040;&#25105;&#20204;&#21487;&#20197;&#20687;&#20687; &#37027;&#26679;&#65292;&#32763;
&#35793;&#31243;&#24207;&#65292;&#29992;&#36171;&#20540;&#20195;&#26367;&#32465;&#23450;&#65292;&#28982;&#21518;&#25226;&#36171;&#20540;&#31243;&#24207;&#36716;&#35793;&#20026;&#27969;&#31243;&#22270;&#31243;&#24207;&#12290;</p><p>&#26412;&#33410;&#65292;&#25105;&#20204;&#29992;&#36825;&#19968;&#21407;&#29702;&#32763;&#35793;&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#65292;&#23558;&#20854;&#36716;&#25442;&#20026;&#36866;&#21512;&#26080;&#39640;&#38454;&#36807;&#31243;&#35821;&#35328;&#30340;&#24418;&#24335;&#12290;</p><p>&#25105;&#20204;&#39318;&#20808;&#20174; &#21644; fig-5.5 &#20013;&#30340;&#35299;&#37322;&#22120;&#24320;&#22987;&#65292;&#29992;&#25968;&#25454;&#32467;&#26500;
&#34920;&#31034;&#32493;&#25991;&#12290;&#32493;&#25991;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#22914; &#21644; fig-5.10 &#25152;&#31034;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-test-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff2-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">expval?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">expval?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#29992;&#25968;&#25454;&#32467;&#26500;&#23454;&#29616;&#30340;&#32493;&#25991;&#65288;&#31532;1&#37096;&#20998;&#65289;
<a name="(idx._(gentag._828))"></a>
<a name="(idx._(gentag._829))"></a><a name="(elem._fig-5..9)"></a></p></blockquote></blockquote><p>&#25105;&#20204;&#30340;&#31532;&#19968;&#20010;&#20219;&#21153;&#26159;&#21015;&#20986;&#38656;&#35201;&#36890;&#36807;&#20849;&#20139;&#23492;&#23384;&#22120;&#36890;&#20449;&#30340;&#36807;&#31243;&#12290;&#36825;&#20123;&#36807;&#31243;&#21450;&#20854;&#24418;&#21442;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-procedure/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">proc1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote></blockquote><p>&#25152;&#20197;&#25105;&#20204;&#38656;&#35201;&#20116;&#20010;&#23492;&#23384;&#22120;&#65306;<span class="stt">exp</span>&#12289;<span class="stt">env</span>&#12289;<span class="stt">cont</span>&#12289;<span class="stt">val</span> &#21644; <span class="stt">proc1</span>&#12290;
&#19978;&#38754;&#30340;&#19977;&#20010;&#36807;&#31243;&#21508;&#25913;&#20026;&#19968;&#20010;&#26080;&#21442;&#25968;&#36807;&#31243;&#65292;&#27599;&#20010;&#23454;&#21442;&#30340;&#20540;&#23384;&#20837;&#23545;&#24212;&#30340;&#23492;&#23384;&#22120;&#65292;&#35843;&#29992;&#26080;&#21442;&#25968;&#36807;&#31243;&#65292;
&#25442;&#25481;&#19978;&#36848;&#36807;&#31243;&#30340;&#35843;&#29992;&#12290;&#25152;&#20197;&#65292;&#36825;&#27573;&#20195;&#30721;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#21487;&#20197;&#26367;&#25442;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-cont</span></span> : <span class="texMathInline">\mathit{Cont} \times \mathit{ExpVal} \to \mathit{Bounce}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:printf</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"&#35745;&#31639;&#32467;&#26463;.~%"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero1-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-test-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;bool</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff1-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff2-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff2-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktSym">num2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-procedure/k</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#29992;&#25968;&#25454;&#32467;&#26500;&#23454;&#29616;&#30340;&#32493;&#25991;&#65288;&#31532;2&#37096;&#20998;&#65289;
<a name="(idx._(gentag._830))"></a>
<a name="(idx._(gentag._831))"></a><a name="(elem._fig-5..10)"></a></p></blockquote></blockquote><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#20381;&#27425;&#36716;&#25442;&#22235;&#20010;&#36807;&#31243;&#12290;&#25105;&#20204;&#36824;&#35201;&#20462;&#25913; <span class="stt">value-of-program</span> &#30340;&#20027;&#20307;&#65292;&#22240;&#20026;&#37027;&#26159;
&#26368;&#21021;&#35843;&#29992; <span class="stt">value-of/k</span>&#30340;&#22320;&#26041;&#12290;&#21482;&#26377;&#19977;&#28857;&#23567;&#40635;&#28902;&#65306;</p><ol><li><p>&#23384;&#20648;&#22120;&#22312;&#36807;&#31243;&#35843;&#29992;&#20043;&#38388;&#24448;&#24448;&#20445;&#25345;&#19981;&#21464;&#12290;&#36825;&#23545;&#24212;&#19978;&#20363;&#20013;&#30340;&#36171;&#20540; <span class="stt">(set! cont
cont)</span>&#12290;&#25105;&#20204;&#22823;&#21487;&#31227;&#38500;&#36825;&#26679;&#30340;&#36171;&#20540;&#12290;</p></li><li><p>&#25105;&#20204;&#24517;&#39035;&#30830;&#20445; <span class="stt">cases</span> &#34920;&#36798;&#24335;&#20013;&#30340;&#23383;&#27573;&#19981;&#19982;&#23492;&#23384;&#22120;&#37325;&#21517;&#12290;&#21542;&#21017;&#23383;&#27573;&#20250;&#36974;&#34109;&#23492;&#23384;
&#22120;&#65292;&#23492;&#23384;&#22120;&#23601;&#26080;&#27861;&#35775;&#38382;&#20102;&#12290;&#20363;&#22914;&#65292;&#22312; <span class="stt">value-of-program</span> &#20013;&#65292;&#22914;&#26524;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">program</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pgn</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#37027;&#20040; <span class="stt">exp</span> &#32465;&#23450;&#21040;&#23616;&#37096;&#21464;&#37327;&#65292;&#25105;&#20204;&#26080;&#27861;&#32473;&#20840;&#23616;&#23492;&#23384;&#22120; <span class="stt">exp</span> &#36171;&#20540;&#12290;&#35299;&#20915;&#26041;&#27861;&#26159;&#37325;
&#21629;&#21517;&#23616;&#37096;&#21464;&#37327;&#65292;&#36991;&#20813;&#20914;&#31361;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">program</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pgn</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#28982;&#21518;&#65292;&#21487;&#20197;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">program</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">pgn</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#24050;&#20180;&#32454;&#25361;&#36873;&#25968;&#25454;&#31867;&#22411;&#20013;&#30340;&#23383;&#27573;&#21517;&#65292;&#36991;&#20813;&#36825;&#31181;&#20914;&#31361;&#12290;</p></li><li><p>&#19968;&#27425;&#35843;&#29992;&#20013;&#22914;&#26524;&#20004;&#27425;&#20351;&#29992;&#21516;&#19968;&#23492;&#23384;&#22120;&#65292;&#21448;&#20250;&#36896;&#25104;&#19968;&#28857;&#40635;&#28902;&#12290;&#32771;&#34385;&#36716;&#25442; <span class="stt">(cons (f
(car x)) (f (cdr x)))</span> &#20013;&#30340;&#31532;&#19968;&#20010;&#35843;&#29992;&#65292;&#20854;&#20013;&#65292;<span class="stt">x</span> &#26159; <span class="stt">f</span> &#30340;&#24418;&#21442;&#12290;&#19981;&#20570;&#36807;&#22810;
&#32771;&#34385;&#30340;&#35805;&#65292;&#36825;&#20010;&#35843;&#29992;&#21487;&#20197;&#36716;&#25442;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20294;&#36825;&#26159;&#19981;&#23545;&#30340;&#65292;&#22240;&#20026;&#23427;&#32473;&#23492;&#23384;&#22120; <span class="stt">x</span> &#36171;&#20102;&#26032;&#20540;&#65292;&#20294; <span class="stt">x</span> &#21407;&#20808;&#30340;&#20540;&#36824;&#26377;&#29992;&#12290;&#35299;&#20915;&#26041;
&#27861;&#26159;&#35843;&#25972;&#36171;&#20540;&#39034;&#24207;&#65292;&#25226;&#27491;&#30830;&#30340;&#20540;&#25918;&#20837;&#23492;&#23384;&#22120;&#20013;&#65292;&#25110;&#32773;&#20351;&#29992;&#20020;&#26102;&#21464;&#37327;&#12290;&#22823;&#22810;&#24773;&#20917;&#19979;&#65292;&#35201;&#36991;&#20813;
&#36825;&#31181;&#38382;&#39064;&#65292;&#21487;&#20197;&#20808;&#32473;&#32493;&#25991;&#21464;&#37327;&#36171;&#20540;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#26377;&#26102;&#20020;&#26102;&#21464;&#37327;&#26080;&#27861;&#36991;&#20813;&#65307;&#32771;&#34385; <span class="stt">(f y x)</span>&#65292;&#20854;&#20013; <span class="stt">x</span> &#21644; <span class="stt">y</span> &#26159; <span class="stt">f</span> &#30340;&#24418;&#21442;&#12290;
&#25105;&#20204;&#30340;&#20363;&#23376;&#20013;&#36824;&#26410;&#36935;&#21040;&#36825;&#31181;&#40635;&#28902;&#12290;</p></li></ol><p>&#32763;&#35793;&#23436;&#30340;&#35299;&#37322;&#22120;&#22914;&ndash;fig-5.14 &#25152;&#31034;&#12290;&#36825;&#20010;&#36807;&#31243;
&#21483;&#20570;<span class="emph">&#23492;&#23384;</span> (<span class="emph">registerization</span>)&#12290;&#24456;&#23481;&#26131;&#29992;&#25903;&#25345;&#36339;&#36716;&#30340;&#25351;&#20196;&#24335;&#35821;&#35328;&#32763;&#35793;&#23427;&#12290;
<a name="(idx._(gentag._832))"></a>
<a name="(idx._(gentag._833))"></a></p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of/k</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : &#20381;&#36182;&#23492;&#23384;&#22120;</td></tr><tr><td><span class="stt">exp</span> : <span class="texMathInline">\mathit{Exp}</span></td></tr><tr><td><span class="stt">env</span> : <span class="texMathInline">\mathit{Env}</span></td></tr><tr><td><span class="stt">cont</span> : <span class="texMathInline">\mathit{Cont}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letrec-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span><span class="hspace">&nbsp;</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\begin{comment}<span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td>\end{comment}
\smallskip</td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p>&#25351;&#20196;&#24335;&#35299;&#37322;&#22120;&#65288;&#31532;1&#37096;&#20998;&#65289;
<a name="(idx._(gentag._834))"></a><a name="(elem._fig-5..11)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._835))"></a></div></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td>\smallskip
\begin{comment}</td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span></td></tr><tr><td>\end{comment}</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-test-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>&#25351;&#20196;&#24335;&#35299;&#37322;&#22120;&#65288;&#31532;2&#37096;&#20998;&#65289;
<a name="(idx._(gentag._836))"></a><a name="(elem._fig-5..12)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._837))"></a></div></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-cont</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : &#35835;&#21462;&#23492;&#23384;&#22120;</td></tr><tr><td><span class="stt">cont</span> : <span class="texMathInline">\mathit{Cont}</span></td></tr><tr><td><span class="stt">val</span> : <span class="texMathInline">\mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:printf</span><span class="hspace">&nbsp;</span><span class="RktVal">"&#35745;&#31639;&#32467;&#26463;.~%"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero1-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-test-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;bool</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\begin{comment}<span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td>\end{comment}
\smallskip</td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>&#25351;&#20196;&#24335;&#35299;&#37322;&#22120;&#65288;&#31532;3&#37096;&#20998;&#65289;
<a name="(idx._(gentag._838))"></a><a name="(elem._fig-5..13)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._839))"></a></div></p></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td>\smallskip
\begin{comment}</td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span></td></tr><tr><td>\end{comment}</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff1-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff2-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff2-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktSym">num2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator-val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">rator-proc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-proc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-procedure/k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure/k</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : &#20381;&#36182;&#23492;&#23384;&#22120;</td></tr><tr><td><span class="stt">proc1</span> : <span class="texMathInline">\mathit{Proc}</span></td></tr><tr><td><span class="stt">val</span> : <span class="texMathInline">\mathit{ExpVal}</span></td></tr><tr><td><span class="stt">cont</span> : <span class="texMathInline">\mathit{Cont}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p>&#25351;&#20196;&#24335;&#35299;&#37322;&#22120;&#65288;&#31532;4&#37096;&#20998;&#65289;
<a name="(idx._(gentag._840))"></a><a name="(elem._fig-5..14)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._841))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..23)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22914;&#26524;&#21024;&#21435;&#35299;&#37322;&#22120;&#26576;&#19968;&#20998;&#25903;&#20013;&#30340;&#8220;goto&#8221;&#20250;&#24590;&#26679;&#65311;&#35299;&#37322;&#22120;&#20250;&#20986;&#20160;
&#20040;&#38169;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..24)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#35774;&#35745;&#19968;&#20123;&#20363;&#23376;&#65292;&#35299;&#37322;&#19978;&#25991;&#25552;&#21040;&#30340;&#27599;&#20010;&#40635;&#28902;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..25)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._842))"></a>
&#23492;&#23384;&#25903;&#25345;&#22810;&#21442;&#25968;&#36807;&#31243;&#30340;&#35299;&#37322;&#22120;&#65288;ex3.21&#65289;&#12290;
<a name="(idx._(gentag._843))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..26)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._844))"></a>
&#29992;&#36339;&#24202;&#36716;&#25442;&#36825;&#20010;&#35299;&#37322;&#22120;&#65292;&#29992; <span class="stt">(set! pc apply-procedure/k)</span> &#26367;&#25442;
<span class="stt">apply-procedure/k</span> &#30340;&#35843;&#29992;&#65292;&#24182;&#20351;&#29992;&#19979;&#38754;&#36825;&#26679;&#30340;&#39537;&#21160;&#22120;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">trampoline</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">pc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">trampoline</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._845))"></a></div></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..27)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#35774;&#35745;&#19968;&#20010;&#35821;&#35328;&#29305;&#24615;&#65292;&#23548;&#33268;&#26368;&#21518;&#32473; <span class="stt">cont</span> &#36171;&#20540;&#26102;&#65292;&#24517;&#39035;&#29992;&#20020;&#26102;&#21464;&#37327;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..28)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#26412;&#33410;&#30340;&#35299;&#37322;&#22120;&#28155;&#21152;ex5.12 &#20013;&#30340;&#36741;&#21161;&#32452;&#20214;&#12290;&#30001;&#20110;&#32493;&#25991;&#34920;&#31034;&#26041;&#24335;&#30456;&#21516;&#65292;&#21487;&#20197;
&#22797;&#29992;&#37027;&#37324;&#30340;&#20195;&#30721;&#12290;&#39564;&#35777;&#26412;&#33410;&#30340;&#25351;&#20196;&#24335;&#35299;&#37322;&#22120;&#29983;&#25104;&#30340;&#36319;&#36394;&#26085;&#24535;&#19982;ex5.12 &#20013;&#30340;
&#35299;&#37322;&#22120;<span class="emph">&#23436;&#20840;</span>&#30456;&#21516;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..29)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._846))"></a>
&#36716;&#25442;&#26412;&#33410;&#30340; <span class="stt">fact-iter</span>&#65288;fact-iter&#65289;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..30)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._847))"></a>
<a name="(idx._(gentag._848))"></a>
<a name="(idx._(gentag._849))"></a>
<a name="(idx._(gentag._850))"></a>
<a name="(idx._(gentag._851))"></a>
<a name="(idx._(gentag._852))"></a>
<a name="(idx._(gentag._853))"></a>
&#20462;&#25913;&#26412;&#33410;&#30340;&#35299;&#37322;&#22120;&#65292;&#35753;&#36807;&#31243;&#20351;&#29992;ex3.28 &#20013;&#30340;&#21160;&#24577;&#32465;&#23450;&#12290;&#25552;&#31034;&#65306;&#20687;&#26412;&#31456;&#36825;&#26679;
&#36716;&#25442;ex3.28 &#20013;&#30340;&#35299;&#37322;&#22120;&#65307;&#20108;&#32773;&#19981;&#21516;&#30340;&#37096;&#20998;&#36716;&#25442;&#21518;&#25165;&#20250;&#19981;&#21516;&#12290;
&#20687;ex5.28 &#37027;&#26679;&#32473;&#35299;&#37322;&#22120;&#28155;&#21152;&#36741;&#21161;&#32452;&#20214;&#12290;&#35266;&#23519;&#21487;&#30693;&#65292;&#23601;&#20687;&#24403;&#21069;&#29366;&#24577;&#20013;&#21482;&#26377;&#19968;
&#20010;&#32493;&#25991;&#65292;&#24403;&#21069;&#29366;&#24577;&#21482;&#20250;&#21387;&#20837;&#25110;&#24377;&#20986;&#19968;&#20010;&#29615;&#22659;&#65292;&#32780;&#19988;&#29615;&#22659;&#19982;&#32493;&#25991;&#21516;&#26102;&#21387;&#20837;&#25110;&#24377;&#20986;&#12290;&#30001;&#27492;&#25105;&#20204;&#24471;
&#20986;&#32467;&#35770;&#65292;&#21160;&#24577;&#32465;&#23450;&#20855;&#26377;<span class="emph">&#21160;&#24577;&#26399;&#38480;</span> (<span class="emph">dynamic extent</span>)&#65306;&#21363;&#65292;&#24418;&#21442;&#30340;&#32465;&#23450;&#20445;&#30041;
&#21040;&#36807;&#31243;&#36820;&#22238;&#20026;&#27490;&#12290;&#35789;&#27861;&#32465;&#23450;&#21017;&#19982;&#20043;&#19981;&#21516;&#65292;&#32465;&#23450;&#21253;&#35065;&#22312;&#38381;&#21253;&#20869;&#26102;&#21487;&#20197;&#26080;&#38480;&#26399;&#22320;&#20445;&#30041;&#12290;
<a name="(idx._(gentag._854))"></a>
<a name="(idx._(gentag._855))"></a>
<a name="(idx._(gentag._856))"></a>
<a name="(idx._(gentag._857))"></a>
<a name="(idx._(gentag._858))"></a>
<a name="(idx._(gentag._859))"></a>
<a name="(idx._(gentag._860))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..31)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#28155;&#21152;&#20840;&#23616;&#23492;&#23384;&#22120;&#65292;&#25490;&#38500;&#26412;&#33410;&#20195;&#30721;&#20013;&#21097;&#20313;&#30340; <span class="stt">let</span> &#34920;&#36798;&#24335;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..32)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25913;&#36827;&#21069;&#19968;&#39064;&#30340;&#35299;&#31572;&#65292;&#23613;&#21487;&#33021;&#20943;&#23569;&#20840;&#23616;&#23492;&#23384;&#22120;&#30340;&#25968;&#37327;&#12290;&#19981;&#21040; 5 &#20010;&#23601;&#21487;&#20197;&#12290;&#38500;&#20102;&#26412;&#33410;&#35299;&#37322;&#22120;&#20013;
&#24050;&#32463;&#29992;&#21040;&#30340;&#65292;&#19981;&#35201;&#20351;&#29992;&#20854;&#20182;&#25968;&#25454;&#32467;&#26500;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..33)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._861))"></a>
&#25226;&#26412;&#33410;&#30340;&#35299;&#37322;&#22120;&#32763;&#35793;&#20026;&#25351;&#20196;&#24335;&#35821;&#35328;&#12290;&#20570;&#20004;&#27425;&#65292;&#19968;&#27425;&#20351;&#29992;&#23487;&#20027;&#35821;&#35328;&#20013;&#30340;&#26080;&#21442;&#25968;&#36807;&#31243;&#35843;&#29992;&#65292;&#19968;&#27425;
&#20351;&#29992; <span class="stt">goto</span>&#12290;&#35745;&#31639;&#37327;&#22686;&#21152;&#26102;&#65292;&#36825;&#20108;&#32773;&#24615;&#33021;&#22914;&#20309;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..34)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22914;imperative-lang&#25152;&#36848;&#65292;&#29992;&#22823;&#22810;&#25968;&#25351;&#20196;&#24335;&#35821;&#35328;&#37117;&#38590;&#20197;&#23436;&#25104;&#36825;&#31181;&#32763;&#35793;&#65292;&#22240;&#20026;&#23427;&#20204;
&#22312;&#25152;&#26377;&#36807;&#31243;&#35843;&#29992;&#20013;&#20351;&#29992;&#22534;&#26632;&#65292;&#21363;&#20351;&#26159;&#23614;&#35843;&#29992;&#12290;&#32780;&#19988;&#65292;&#23545;&#22823;&#22411;&#35299;&#37322;&#22120;&#65292;&#30001; <span class="stt">goto</span> &#38142;&#25509;&#30340;
&#20195;&#30721;&#21487;&#33021;&#22826;&#36807;&#24222;&#22823;&#65292;&#20197;&#33268;&#26576;&#20123;&#32534;&#35793;&#22120;&#26080;&#27861;&#22788;&#29702;&#12290;&#25226;&#26412;&#33410;&#30340;&#35299;&#37322;&#22120;&#32763;&#35793;&#20026;&#25351;&#20196;&#24335;&#35821;&#35328;&#65292;
&#29992;ex5.26 &#20013;&#30340;&#36339;&#36291;&#25216;&#26415;&#35268;&#36991;&#36825;&#19968;&#38590;&#39064;&#12290;</p></blockquote><h4 class="heading">5.4<tt>&nbsp;</tt><a name="(part._s5..4)"></a>&#24322;&#24120;<span class="button-group"><a href="#(part._s5..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._862))"></a>
<a name="(idx._(gentag._863))"></a>
&#36804;&#20170;&#20026;&#27490;&#65292;&#25105;&#20204;&#21482;&#29992;&#32493;&#25991;&#31649;&#29702;&#35821;&#35328;&#20013;&#30340;&#26222;&#36890;&#25511;&#21046;&#27969;&#12290;&#20294;&#26159;&#32493;&#25991;&#36824;&#33021;&#35753;&#25105;&#20204;&#20462;&#25913;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;&#35753;
&#25105;&#20204;&#26469;&#32473;&#25105;&#20204;&#30340;&#35821;&#35328;&#28155;&#21152;<span class="emph">&#24322;&#24120;&#22788;&#29702;</span> (<span class="emph">exception handling</span>)&#12290;&#25105;&#20204;&#32473;&#35821;&#35328;&#26032;
&#22686;&#20004;&#20010;&#29983;&#25104;&#24335;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">try </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> catch (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">try-exp (exp1 var handler-exp)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">raise </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">raise-exp (exp)</span>}\end{align*}</span></p></blockquote><p><span class="stt">try</span> &#34920;&#36798;&#24335;&#22312; <span class="stt">catch</span> &#20174;&#21477;&#25551;&#36848;&#30340;&#24322;&#24120;&#22788;&#29702;&#19978;&#19979;&#25991;&#20013;&#27714;&#31532;&#19968;&#20010;&#21442;&#25968;&#30340;&#20540;&#12290;&#22914;&#26524;&#35813;
&#34920;&#36798;&#24335;&#27491;&#24120;&#36820;&#22238;&#65292;&#23427;&#30340;&#20540;&#23601;&#26159;&#25972;&#20010; <span class="stt">try</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#24322;&#24120;&#22788;&#29702;&#22120;&#65288;&#21363;
<span class="stt">handler-exp</span>&#65289;&#21017;&#34987;&#31227;&#38500;&#12290;</p><p><span class="stt">raise</span> &#34920;&#36798;&#24335;&#27714;&#20986;&#21442;&#25968;&#30340;&#20540;&#65292;&#20197;&#35813;&#20540;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;&#36825;&#20010;&#20540;&#20250;&#20256;&#32473;&#26368;&#25509;&#36817;&#30340;&#24322;&#24120;&#22788;&#29702;
&#22120;&#65292;&#24182;&#32465;&#23450;&#21040;&#36825;&#20010;&#22788;&#29702;&#22120;&#30340;&#21464;&#37327;&#12290;&#28982;&#21518;&#65292;&#22788;&#29702;&#22120;&#20027;&#20307;&#23558;&#34987;&#27714;&#20540;&#12290;&#22788;&#29702;&#22120;&#20027;&#20307;&#21487;&#20197;&#36820;&#22238;&#19968;&#20010;&#20540;&#65292;
&#36825;&#20010;&#20540;&#31216;&#20026;&#23545;&#24212; <span class="stt">try</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#65307;&#25110;&#32773;&#65292;&#23427;&#21487;&#20197;&#25243;&#20986;&#21478;&#19968;&#20010;&#24322;&#24120;&#65292;
&#23558;&#24322;&#24120;<span class="emph">&#20256;&#25773;</span> (<span class="emph">propagate</span>) &#20986;&#21435;&#65307;&#36825;&#26102;&#65292;&#35813;&#24322;&#24120;&#20250;&#20256;&#32473;&#31532;&#20108;&#25509;&#36817;&#30340;&#24322;&#24120;&#22788;&#29702;&#22120;&#12290;</p><p>&#36825;&#37324;&#26159;&#19968;&#20010;&#20363;&#23376;&#65288;&#26242;&#26102;&#20551;&#35774;&#25105;&#20204;&#32473;&#35821;&#35328;&#28155;&#21152;&#20102;&#23383;&#31526;&#20018;&#65289;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let list-index =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (str)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">letrec inner (lst)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if null?(lst)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then raise("ListIndexFailed")</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if string-equal?(car(lst), str)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((inner cdr(lst)), -1)</span></p></td></tr></table></blockquote><p>&#36807;&#31243; <span class="stt">list-index</span> &#26159;&#20010;&#21654;&#21937;&#24335;&#36807;&#31243;&#65292;&#23427;&#21462;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#19968;&#20010;&#23383;&#31526;&#20018;&#21015;&#34920;&#65292;&#36820;&#22238;&#23383;&#31526;&#20018;
&#22312;&#21015;&#34920;&#20013;&#30340;&#20301;&#32622;&#12290;&#22914;&#26524;&#25214;&#19981;&#21040;&#26399;&#26395;&#30340;&#21015;&#34920;&#20803;&#32032;&#65292;<span class="stt">inner</span> &#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#65292;&#36339;&#36807;&#25152;&#26377;&#24453;&#20570;
&#30340;&#20943;&#27861;&#65292;&#25226; <span class="stt">"ListIndexFailed"</span> &#20256;&#32473;&#26368;&#25509;&#36817;&#30340;&#24322;&#24120;&#22788;&#29702;&#22120;&#12290;</p></blockquote><p>&#36825;&#20010;&#24322;&#24120;&#22788;&#29702;&#22120;&#21487;&#20197;&#21033;&#29992;&#35843;&#29992;&#22788;&#30340;&#20449;&#24687;&#23545;&#24322;&#24120;&#20570;&#36866;&#24403;&#22788;&#29702;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let find-member-number =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (member-name)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">... try ((list-index member-name) member-list)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">catch (exn)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">raise("CantFindMemberNumber")</span></p></td></tr></table></blockquote><p>&#36807;&#31243; <span class="stt">find-member-number</span> &#21462;&#19968;&#23383;&#31526;&#20018;&#65292;&#29992; <span class="stt">list-index</span> &#25214;&#20986;&#23383;&#31526;&#20018;&#22312;&#21015;&#34920;
<span class="stt">member-name</span> &#20013;&#30340;&#20301;&#32622;&#12290;<span class="stt">find-member-number</span> &#30340;&#35843;&#29992;&#32773;&#27809;&#21150;&#27861;&#30693;&#36947;
<span class="stt">list-index</span>&#65292;&#25152;&#20197; <span class="stt">find-member-number</span> &#25226;&#38169;&#35823;&#28040;&#24687;&#32763;&#35793;&#25104;&#35843;&#29992;&#32773;&#33021;&#22815;&#29702;&#35299;&#30340;&#24322;
&#24120;&#12290;</p></blockquote><p>&#26681;&#25454;&#31243;&#24207;&#30340;&#29992;&#36884;&#65292;&#36824;&#26377;&#19968;&#31181;&#21487;&#33021;&#26159;&#65292;&#20803;&#32032;&#21517;&#19981;&#22312;&#21015;&#34920;&#20013;&#26102;&#65292;<span class="stt">find-member-number</span> &#36820;&#22238;
&#19968;&#20010;&#40664;&#35748;&#20540;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let find-member-number =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (member-name)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">... try ((list-index member-name) member-list)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">catch (exn)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">the-default-member-number</span></p></td></tr></table></blockquote><p>&#22312;&#36825;&#20123;&#31243;&#24207;&#20013;&#65292;&#25105;&#20204;&#24573;&#30053;&#20102;&#24322;&#24120;&#30340;&#20540;&#12290;&#22312;&#20854;&#20182;&#24773;&#20917;&#19979;&#65292;<span class="stt">raise</span> &#20256;&#20986;&#30340;&#20540;&#21487;&#33021;&#21253;&#21547;&#19968;&#37096;
&#20998;&#21487;&#20379;&#35843;&#29992;&#32773;&#21033;&#29992;&#30340;&#20449;&#24687;&#12290;</p></blockquote><p>&#29992;&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#23454;&#29616;&#36825;&#31181;&#24322;&#24120;&#22788;&#29702;&#26426;&#21046;&#30452;&#25130;&#20102;&#24403;&#12290;&#25105;&#20204;&#20174; <span class="stt">try</span> &#34920;&#36798;&#24335;&#24320;&#22987;&#12290;&#22312;&#32493;
&#25991;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#20013;&#65292;&#25105;&#20204;&#28155;&#21152;&#20004;&#20010;&#26500;&#36896;&#22120;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">try-cont</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">handler-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">raise1-cont</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#22312; <span class="stt">value-of/k</span> &#20013;&#65292;&#25105;&#20204;&#32473; <span class="stt">try</span> &#28155;&#21152;&#19979;&#38754;&#30340;&#20174;&#21477;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">try-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">handler-exp</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">try-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">handler-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote></blockquote><p>&#27714; <span class="stt">try</span> &#34920;&#36798;&#24335;&#20027;&#20307;&#30340;&#20540;&#26102;&#20250;&#21457;&#29983;&#20160;&#20040;&#21602;&#65311;&#22914;&#26524;&#20027;&#20307;&#27491;&#24120;&#36820;&#22238;&#65292;&#37027;&#20040;&#36825;&#20010;&#20540;&#24212;&#35813;&#20256;&#32473;
<span class="stt">try</span> &#34920;&#36798;&#24335;&#30340;&#32493;&#25991;&#65292;&#20063;&#23601;&#26159;&#27492;&#22788;&#30340; <span class="stt">cont</span>&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (try-cont </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">handler\mbox{-}exp</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">env</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (apply-cont </span><span class="texMathInline">cont</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#22914;&#26524;&#19968;&#20010;&#24322;&#24120;&#25243;&#20986;&#20102;&#21602;&#65311;&#39318;&#20808;&#65292;&#25105;&#20204;&#24403;&#28982;&#24471;&#27714;&#20986; <span class="stt">raise</span> &#21442;&#25968;&#30340;&#20540;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">raise-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">raise1-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#24403; <span class="stt">exp1</span> &#30340;&#20540;&#36820;&#22238;&#32473; <span class="stt">raise1-cont</span> &#26102;&#65292;&#25105;&#20204;&#35201;&#26597;&#25214;&#32493;&#25991;&#20013;&#26368;&#25509;&#36817;&#30340;&#24322;&#24120;&#22788;&#29702;&#22120;&#65292;
&#21363;&#26368;&#19978;&#23618;&#30340; <span class="stt">try-cont</span> &#32493;&#25991;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#25226;&#32493;&#25991;&#35268;&#33539;&#20889;&#25104;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (raise1-cont </span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (apply-handler </span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#20854;&#20013;&#65292;<span class="stt">apply-handler</span> &#26159;&#19968;&#36807;&#31243;&#65292;&#23427;&#25214;&#20986;&#26368;&#25509;&#36817;&#30340;&#24322;&#24120;&#22788;&#29702;&#22120;&#65292;&#28982;&#21518;&#35843;&#29992;&#23427;
&#65288;&#65289;&#12290;</p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-handler</span></span> : <span class="texMathInline">\mathit{ExpVal} \times \mathit{Cont} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-handler</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">try-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">handler-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">handler-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-uncaught-exception</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff1-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff2-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-handler</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#36807;&#31243; <span class="stt">apply-handler</span><a name="(elem._fig-5..15)"></a></p></blockquote></blockquote><p>&#35201;&#26126;&#30333;&#24590;&#26679;&#23558;&#36825;&#20123;&#32467;&#21512;&#21040;&#19968;&#36215;&#65292;&#25105;&#20204;&#32771;&#34385;&#29992;&#34987;&#23450;&#35821;&#35328;&#23454;&#29616;&#30340; <span class="stt">index</span>&#12290;&#20196; <span class="texMathInline">exp_0</span> &#25351;
&#20195;&#34920;&#36798;&#24335;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let index</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= proc (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">letrec inner (lst)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if null? (lst)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then raise 99</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if zero?(-(car(lst), n))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((inner cdr(lst)), -1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in proc (lst)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">try (inner lst)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">catch (x) -1</span></p></td></tr><tr><td><p><span class="stt">in ((index 5) list(2, 3))</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#20174;&#20219;&#24847;&#29615;&#22659; <span class="texMathInline">\rho_0</span> &#21644;&#32493;&#25991; <span class="texMathInline">cont_0</span> &#24320;&#22987;&#27714; <span class="texMathInline">exp_0</span> &#30340;&#20540;&#65292;&#21482;&#23637;&#31034;&#35745;&#31639;&#30340;
&#20851;&#38190;&#37096;&#20998;&#65292;&#24182;&#25554;&#20837;&#27880;&#37322;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplComputationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let index = ... in ((index 5) list(2, 3))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">cont_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#25191;&#34892;</span><span class="stt">let</span><span class="emph">&#20027;&#20307;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;((index 5) list(2, 3))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((index</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller"><span class="emph">&#31216;&#20043;&#20026;</span><span class="texMathInline">\rho_1</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:proc-val</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:procedure n &lt;&lt;letrec ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(i #(struct:num-val 1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(v #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(x #(struct:num-val 10)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#26368;&#21518;&#27714;</span><span class="stt">try</span><span class="emph">&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;try (inner lst) catch (x) -1&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((lst</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller"><span class="emph">&#31216;&#20043;&#20026;</span><span class="texMathInline">\rho_{lst=(2 \  3)}</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:list-val</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(#(struct:num-val 2) #(struct:num-val 3))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(inner ...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(n #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#22312;</span><span class="stt">try-cont</span><span class="emph">&#32493;&#25991;&#20013;&#27714;</span><span class="stt">try</span><span class="emph">&#20027;&#20307;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;(inner lst)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="stt">lst</span><span class="emph">&#32465;&#23450;&#21040;</span><span class="texMathInline">(2 \  3)</span>&#65292;<span class="emph">&#27714;</span><span class="stt">inner</span><span class="emph">&#20027;&#20307;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if null?(lst) ...&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#27714;&#26465;&#20214;&#30340;&#20540;&#65292;&#36827;&#20837;&#36882;&#24402;&#25152;&#22312;&#30340;&#34892;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-((inner cdr(lst)), -1)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#27714;</span><span class="stt">diff-exp</span><span class="emph">&#31532;&#19968;&#20010;&#21442;&#25968;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;(inner cdr(lst))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="stt">lst</span><span class="emph">&#32465;&#23450;&#21040;</span><span class="texMathInline">(3)</span>&#65292;<span class="emph">&#27714;</span><span class="stt">inner</span><span class="emph">&#20027;&#20307;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if null?(lst) ...&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((lst #(struct:list-val (#(struct:num-val 3)))) </span><span class="Smaller"><span class="emph">&#31216;&#20043;&#20026;</span><span class="texMathInline">\rho_{lst=(3)}</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(inner ...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#27714;&#26465;&#20214;&#30340;&#20540;&#65292;&#36827;&#20837;&#36882;&#24402;&#25152;&#22312;&#30340;&#34892;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-((inner cdr(lst)), -1)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_{lst=(3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#27714;</span><span class="stt">diff-exp</span><span class="emph">&#31532;&#19968;&#20010;&#21442;&#25968;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;(inner cdr(lst))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_{lst=(3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="stt">lst</span><span class="emph">&#32465;&#23450;&#21040;</span><span class="texMathInline">()</span>&#65292;<span class="emph">&#27714;</span><span class="stt">inner</span><span class="emph">&#20027;&#20307;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if null?(lst) ... &gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((lst #(struct:list-val ()))</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller"><span class="emph">&#31216;&#20043;&#20026;</span><span class="texMathInline">\rho_{lst=()}</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(inner ...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(n #(struct:num-val 5))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#27714;</span><span class="stt">raise</span><span class="emph">&#34920;&#36798;&#24335;&#21442;&#25968;&#30340;&#20540;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;99&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_{lst=()}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:raise1-cont</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#29992;</span><span class="stt">apply-handler</span><span class="emph">&#23637;&#24320;&#32493;&#25991;&#65292;&#30452;&#21040;&#25214;&#20986;&#19968;&#20010;&#24322;&#24120;&#22788;&#29702;&#22120;</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(apply-handler</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:num-val 99)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))))</span></p></td></tr><tr><td><p><span class="stt">=</span></p></td></tr><tr><td><p><span class="stt">(apply-handler</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:num-val 99)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:diff1-cont &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))))</span></p></td></tr><tr><td><p><span class="stt">=</span></p></td></tr><tr><td><p><span class="stt">(apply-handler</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:num-val 99)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:try-cont x &lt;&lt;-1&gt;&gt; </span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont)))</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="Smaller"><span class="emph">&#25214;&#21040;&#24322;&#24120;&#22788;&#29702;&#22120;&#65307;&#25226;&#24322;&#24120;&#20540;&#32465;&#23450;&#21040;</span><span class="stt">x</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(value-of/k</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:const-exp -1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((x #(struct:num-val 99))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_{lst=(2 \  3)}</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">#(struct:end-cont))</span></p></td></tr><tr><td><p><span class="stt">=</span></p></td></tr><tr><td><p><span class="stt">(apply-cont #(struct:end-cont) #(struct:const-exp -1))</span></p></td></tr><tr><td><p><span class="stt">=</span></p></td></tr><tr><td><p><span class="stt">#(struct:const-exp -1)</span></p></td></tr></table></blockquote></blockquote><p>&#22914;&#26524;&#21015;&#34920;&#21253;&#21547;&#26399;&#26395;&#20540;&#65292;&#37027;&#20040;&#25105;&#20204;&#19981;&#38656;&#35843;&#29992; <span class="stt">apply-handler</span>&#65292;&#32780;&#26159;&#35843;&#29992;
<span class="stt">apply-cont</span>&#65292;&#24182;&#25191;&#34892;&#32493;&#25991;&#20013;&#25152;&#26377;&#24453;&#23436;&#25104;&#30340; <span class="stt">diff</span>&#12290;
<a name="(idx._(gentag._864))"></a>
<a name="(idx._(gentag._865))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex5..35)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#36825;&#31181;&#23454;&#29616;&#24456;&#20302;&#25928;&#65292;&#22240;&#20026;&#24322;&#24120;&#25243;&#20986;&#26102;&#65292;<span class="stt">apply-handler</span> &#24517;&#39035;&#22312;&#32493;&#25991;&#20013;&#32447;&#24615;&#26597;&#25214;&#22788;&#29702;&#22120;&#12290;
&#35753;&#25152;&#26377;&#32493;&#25991;&#37117;&#33021;&#30452;&#25509;&#20351;&#29992; <span class="stt">try-cont</span> &#32493;&#25991;&#65292;&#20174;&#32780;&#36991;&#20813;&#36825;&#31181;&#26597;&#25214;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..36)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21478;&#19968;&#31181;&#36991;&#20813; <span class="stt">apply-handler</span> &#32447;&#24615;&#26597;&#25214;&#30340;&#35774;&#35745;&#26159;&#20351;&#29992;&#20004;&#20010;&#32493;&#25991;&#65292;&#19968;&#20010;&#27491;&#24120;&#32493;&#25991;&#65292;&#19968;&#20010;&#24322;
&#24120;&#32493;&#25991;&#12290;&#20462;&#25913;&#26412;&#33410;&#30340;&#35299;&#37322;&#22120;&#65292;&#25913;&#29992;&#20004;&#20010;&#32493;&#25991;&#65292;&#23454;&#29616;&#36825;&#19968;&#30446;&#26631;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..37)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#34987;&#23450;&#35821;&#35328;&#65292;&#22312;&#36807;&#31243;&#35843;&#29992;&#30340;&#23454;&#21442;&#25968;&#30446;&#38169;&#35823;&#26102;&#25243;&#20986;&#24322;&#24120;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..38)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#34987;&#23450;&#35821;&#35328;&#65292;&#28155;&#21152;&#38500;&#27861;&#34920;&#36798;&#24335;&#65292;&#24182;&#22312;&#34987;&#38646;&#38500;&#26102;&#25243;&#20986;&#24322;&#24120;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..39)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#30446;&#21069;&#65292;&#24322;&#24120;&#22788;&#29702;&#22120;&#21487;&#20197;&#37325;&#26032;&#25243;&#20986;&#24322;&#24120;&#65292;&#25226;&#23427;&#20256;&#25773;&#20986;&#21435;&#65307;&#25110;&#32773;&#36820;&#22238;&#19968;&#20010;&#20540;&#65292;&#20316;&#20026; <span class="stt">try</span> &#34920;
&#36798;&#24335;&#30340;&#20540;&#12290;&#36824;&#21487;&#20197;&#36825;&#26679;&#35774;&#35745;&#35821;&#35328;&#65306;&#20801;&#35768;&#35745;&#31639;&#20174;&#24322;&#24120;&#25243;&#20986;&#30340;&#20301;&#32622;&#32487;&#32493;&#12290;&#20462;&#25913;&#26412;&#33410;&#30340;&#35299;&#37322;&#22120;&#65292;&#22312;
<span class="stt">raise</span> &#35843;&#29992;&#22788;&#30340;&#32493;&#25991;&#20013;&#36816;&#34892;&#24322;&#24120;&#22788;&#29702;&#22120;&#30340;&#20027;&#20307;&#65292;&#23436;&#25104;&#36825;&#31181;&#35774;&#35745;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..40)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25226; <span class="stt">raise</span> &#24322;&#24120;&#22788;&#30340;&#32493;&#25991;&#20316;&#20026;&#31532;&#20108;&#20010;&#21442;&#25968;&#20256;&#36882;&#65292;&#20351;&#34987;&#23450;&#35821;&#35328;&#20013;&#30340;&#24322;&#24120;&#22788;&#29702;&#22120;&#26082;&#33021;&#36820;&#22238;&#20063;
&#33021;&#32487;&#32493;&#12290;&#36825;&#21487;&#33021;&#38656;&#35201;&#25226;&#32493;&#25991;&#20316;&#20026;&#19968;&#31181;&#26032;&#30340;&#34920;&#36798;&#20540;&#12290;&#20026;&#29992;&#20540;&#35843;&#29992;&#32493;&#25991;&#35774;&#35745;&#24688;&#24403;&#30340;&#35821;&#27861;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..41)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._866))"></a>
<a name="(idx._(gentag._867))"></a>
&#25105;&#20204;&#23637;&#31034;&#20102;&#22914;&#20309;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#30340;&#32493;&#25991;&#23454;&#29616;&#24322;&#24120;&#12290;&#25105;&#20204;&#27809;&#21150;&#27861;&#39532;&#19978;&#29992;<a href="#%28part._s2..2..3%29" data-pltdoc="x">&#36807;&#31243;&#34920;&#31034;&#27861;</a>&#20013;&#30340;
&#27493;&#39588;&#24471;&#21040;&#36807;&#31243;&#34920;&#31034;&#27861;&#65292;&#22240;&#20026;&#25105;&#20204;&#29616;&#22312;&#26377;&#20004;&#20010;&#35266;&#27979;&#22120;&#65306;<span class="stt">apply-handler</span> &#21644;
<span class="stt">apply-cont</span>&#12290;&#29992;&#19968;&#23545;&#36807;&#31243;&#23454;&#29616;&#26412;&#33410;&#30340;&#32493;&#25991;&#65306;&#19968;&#20010;&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#34920;&#31034; <span class="stt">apply-cont</span>
&#20013;&#32493;&#25991;&#30340;&#21160;&#20316;&#65307;&#19968;&#20010;&#26080;&#21442;&#25968;&#36807;&#31243;&#65292;&#34920;&#31034; <span class="stt">apply-handler</span> &#20013;&#32493;&#25991;&#30340;&#21160;&#20316;&#12290;
<a name="(idx._(gentag._868))"></a>
<a name="(idx._(gentag._869))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..42)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._870))"></a>
<a name="(idx._(gentag._871))"></a>
<a name="(idx._(gentag._872))"></a>
&#21069;&#19968;&#36947;&#32451;&#20064;&#21482;&#22312;&#25243;&#20986;&#24322;&#24120;&#26102;&#25429;&#33719;&#32493;&#25991;&#12290;&#28155;&#21152;&#24418;&#24335; <span class="stt">letcc </span><span class="texMathInline">\mathit{Identifier}</span><span class="stt"> in</span><span class="stt">
</span><span class="texMathInline">\mathit{Expression}</span>&#65292;&#20801;&#35768;&#22312;&#35821;&#35328;&#20013;&#30340;&#20219;&#24847;&#20301;&#32622;&#25429;&#33719;&#32493;&#25991;&#65292;&#20854;&#35268;&#33539;&#20026;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of/k (letcc </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of/k </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">cont</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#36825;&#26679;&#25429;&#33719;&#30340;&#32493;&#25991;&#21487;&#29992; <span class="stt">throw</span> &#35843;&#29992;&#65306;&#34920;&#36798;&#24335; <span class="stt">throw </span><span class="texMathInline">\mathit{Expression}</span><span class="stt"> to</span><span class="stt">
</span><span class="texMathInline">\mathit{Expression}</span> &#27714;&#20986;&#20004;&#20010;&#23376;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#31532;&#20108;&#20010;&#34920;&#36798;&#24335;&#24212;&#36820;&#22238;&#19968;&#32493;&#25991;&#65292;&#24212;&#29992;&#20110;
&#31532;&#19968;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;<span class="stt">throw</span> &#34920;&#36798;&#24335;&#24403;&#21069;&#30340;&#32493;&#25991;&#21017;&#34987;&#24573;&#30053;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..43)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#21069;&#19968;&#36947;&#32451;&#20064;&#34987;&#23450;&#35821;&#35328;&#20013;&#30340; <span class="stt">letcc</span>&#65292;&#25226;&#25429;&#33719;&#30340;&#32493;&#25991;&#20316;&#20026;&#19968;&#31181;&#26032;&#30340;&#36807;&#31243;&#65292;&#36825;&#26679;&#23601;&#33021;&#20889;
<span class="stt">(</span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">)</span>&#65292;&#32780;&#19981;&#24517;&#20889; <span class="stt">throw </span><span class="texMathInline">\mathit{Expression}</span><span class="stt"> to</span><span class="stt">
</span><span class="texMathInline">\mathit{Expression}</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..44)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21069;&#38754;&#32451;&#20064;&#37324;&#30340; <span class="stt">letcc</span> &#21644; <span class="stt">throw</span> &#36824;&#26377;&#19968;&#31181;&#35774;&#35745;&#26041;&#24335;&#65292;&#21482;&#38656;&#32473;&#35821;&#35328;&#28155;&#21152;&#19968;&#20010;&#36807;&#31243;&#12290;
&#36825;&#20010;&#36807;&#31243;&#22312; Scheme &#20013;&#21483;&#20570; <span class="stt">call-with-current-continuation</span>&#65292;&#23427;&#21462;&#19968;&#20010;&#21333;&#21442;&#25968;&#36807;&#31243;
<span class="stt">p</span>&#65292;&#24182;&#32473; <span class="stt">p</span> &#20256;&#36882;&#19968;&#20010;&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#36825;&#20010;&#36807;&#31243;&#22312;&#35843;&#29992;&#26102;&#65292;&#23558;&#20854;&#21442;&#25968;&#20256;&#36882;&#32473;&#24403;&#21069;&#30340;&#32493;
&#25991;<span class="stt">cont</span>&#12290;<span class="stt">call-with-current-continuation</span> &#21487;&#29992; <span class="stt">letcc</span> &#21644; <span class="stt">throw</span>
&#23450;&#20041;&#22914;&#19979;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let call-with-current-continuation</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= proc (p)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">letcc cont</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (p proc (v) throw v to cont)</span></p></td></tr><tr><td><p><span class="stt">in ...</span></p></td></tr></table></blockquote><p>&#32473;&#35821;&#35328;&#28155;&#21152; <span class="stt">call-with-current-continuation</span>&#12290;&#28982;&#21518;&#20889;&#19968;&#20010;&#32763;&#35793;&#22120;&#65292;&#29992;&#21482;&#26377;
<span class="stt">call-with-current-continuation</span> &#30340;&#35821;&#35328;&#32763;&#35793;&#20855;&#26377; <span class="stt">letcc</span> &#21644; <span class="stt">throw</span> &#30340;&#35821;
&#35328;&#12290;
<a name="(idx._(gentag._873))"></a>
<a name="(idx._(gentag._874))"></a>
<a name="(idx._(gentag._875))"></a></p></blockquote><h4 class="heading">5.5<tt>&nbsp;</tt><a name="(part._s5..5)"></a>&#32447;&#31243;<span class="button-group"><a href="#(part._s5..5)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._876))"></a>
<a name="(idx._(gentag._877))"></a>
&#35768;&#22810;&#32534;&#31243;&#20219;&#21153;&#20013;&#65292;&#21487;&#33021;&#38656;&#35201;&#19968;&#27425;&#36827;&#34892;&#22810;&#39033;&#35745;&#31639;&#12290;&#24403;&#36825;&#20123;&#35745;&#31639;&#20316;&#20026;&#21516;&#19968;&#36827;&#31243;&#30340;&#19968;&#37096;&#20998;&#65292;&#36816;&#34892;&#22312;
&#21516;&#19968;&#22320;&#22336;&#31354;&#38388;&#65292;&#36890;&#24120;&#31216;&#23427;&#20204;&#20026;<span class="emph">&#32447;&#31243;</span> (<span class="emph">thread</span>)&#12290;&#26412;&#33410;&#65292;&#25105;&#20204;&#23558;&#30475;&#21040;&#22914;&#20309;&#20462;&#25913;&#35299;&#37322;&#22120;&#65292;
&#27169;&#25311;&#22810;&#32447;&#31243;&#31243;&#24207;&#30340;&#25191;&#34892;&#12290;</p><p>&#25105;&#20204;&#30340;&#22810;&#32447;&#31243;&#35299;&#37322;&#22120;&#19981;&#20570;&#21333;&#32447;&#31243;&#35745;&#31639;&#65292;&#32780;&#19988;&#32500;&#25252;&#22810;&#20010;&#32447;&#31243;&#12290;&#23601;&#20687;&#26412;&#31456;&#20043;&#21069;&#23637;&#31034;&#30340;&#37027;&#26679;&#65292;&#27599;
&#20010;&#32447;&#31243;&#21253;&#21547;&#19968;&#39033;&#27491;&#22312;&#36827;&#34892;&#30340;&#35745;&#31639;&#12290;&#32447;&#31243;&#20351;&#29992;<a href="#%28part._state%29" data-pltdoc="x">&#29366;&#24577;</a>&#20013;&#30340;&#36171;&#20540;&#65292;&#36890;&#36807;&#20849;&#20139;&#20869;&#23384;&#36890;&#20449;&#12290;
<a name="(idx._(gentag._878))"></a><a name="(idx._(gentag._879))"></a></p><p>&#22312;&#25105;&#20204;&#30340;&#31995;&#32479;&#20013;&#65292;&#25972;&#20010;&#35745;&#31639;&#21253;&#21547;&#19968;&#20010;&#32447;&#31243;<span class="emph">&#27744;</span> (<span class="emph">pool</span>)&#12290;&#27599;&#20010;
&#32447;&#31243;<span class="emph">&#22312;&#36816;&#34892;</span> (<span class="emph">running</span>)&#12289;<span class="emph">&#21487;&#36816;&#34892;</span> (<span class="emph">runnable</span>) &#25110;&#32773;<span class="emph">&#21463;
&#38459;&#22622;</span> (<span class="emph">blocked</span>)&#12290;&#22312;&#25105;&#20204;&#30340;&#31995;&#32479;&#20013;&#65292;&#19968;&#27425;&#21482;&#33021;&#26377;&#19968;&#20010;&#32447;&#31243;&#22312;&#36816;&#34892;&#12290;&#22312;&#22810; CPU &#31995;&#32479;&#20013;&#65292;&#21487;&#20197;&#26377;&#33509;&#24178;&#32447;&#31243;
&#21516;&#26102;&#36816;&#34892;&#12290;&#21487;&#36816;&#34892;&#30340;&#32447;&#31243;&#35760;&#24405;&#22312;&#21517;&#20026;<span class="emph">&#23601;&#32490;&#38431;&#21015;</span> (<span class="emph">ready queue</span>)&#30340;&#38431;&#21015;&#20013;&#12290;&#36824;&#26377;&#20123;&#32447;
&#31243;&#22240;&#20026;&#31181;&#31181;&#21407;&#22240;&#26410;&#33021;&#23601;&#32490;&#65292;&#25105;&#20204;&#35828;&#36825;&#20123;&#32447;&#31243;<span class="emph">&#21463;&#38459;&#22622;</span>&#12290;&#26412;&#33410;&#31245;&#21518;&#20171;&#32461;&#21463;&#38459;&#22622;&#32447;&#31243;&#12290;</p><p>&#32447;&#31243;&#35843;&#24230;&#30001;<span class="emph">&#35843;&#24230;&#22120;</span> (<span class="emph">scheduler</span>) &#25191;&#34892;&#65292;&#23601;&#32490;&#38431;&#21015;&#20026;&#20854;&#29366;&#24577;&#30340;&#19968;&#37096;&#20998;&#12290;
<a name="(idx._(gentag._880))"></a>
&#27492;&#22806;&#65292;&#23427;&#20445;&#23384;&#19968;&#20010;&#35745;&#26102;&#22120;&#65292;&#24403;&#19968;&#20010;&#32447;&#31243;&#25191;&#34892;&#33509;&#24178;&#27493;&#39588;&#65288;&#21363;&#32447;&#31243;&#30340;<span class="emph">&#26102;&#38388;&#29255;</span> (<span class="emph">time slice</span>)
<a name="(idx._(gentag._881))"></a>
&#25110;<span class="emph">&#37327;&#23376;</span> (<span class="emph">quantum</span>)&#65289;&#26102;&#65292;&#23427;&#20013;&#26029;&#32447;&#31243;&#65292;&#23558;&#20854;&#25918;&#22238;&#23601;&#32490;&#38431;&#21015;&#65292;&#24182;&#20174;&#23601;&#32490;&#38431;&#21015;&#20013;&#36873;&#20986;&#19968;
&#20010;&#26032;&#30340;&#32447;&#31243;&#26469;&#36816;&#34892;&#12290;&#36825;&#21483;&#20570;<span class="emph">&#25250;&#21344;&#24335;&#35843;&#24230;</span> (<span class="emph">pre-emptive scheduling</span>)&#12290;</p><p><a name="(idx._(gentag._882))"></a>
<a name="(idx._(gentag._883))"></a></p><p>&#25105;&#20204;&#30340;&#26032;&#35821;&#35328;&#22522;&#20110; IMPLICIT-REFS&#65292;&#21517;&#21483; THREADS&#12290;&#22312; THREADS &#20013;&#65292;&#26032;&#32447;&#31243;&#30001;&#21517;&#20026;
<span class="stt">spawn</span> &#30340;&#32467;&#26500;&#21019;&#24314;&#12290;<span class="stt">spawn</span> &#21462;&#19968;&#21442;&#25968;&#65292;&#35813;&#21442;&#25968;&#30340;&#20540;&#24212;&#20026;&#19968;&#20010;&#36807;&#31243;&#12290;&#26032;&#21019;&#24314;&#30340;&#32447;&#31243;
&#36816;&#34892;&#26102;&#65292;&#32473;&#37027;&#20010;&#36807;&#31243;&#20256;&#36882;&#19968;&#20010;&#20219;&#24847;&#21442;&#25968;&#12290;&#35813;&#32447;&#31243;&#19981;&#26159;&#31435;&#21051;&#36816;&#34892;&#65292;&#32780;&#26159;&#25918;&#20837;&#23601;&#32490;&#38431;&#21015;&#20013;&#65292;&#36718;&#21040;
&#23427;&#26102;&#25165;&#36816;&#34892;&#12290;<span class="stt">spawn</span> &#30340;&#25191;&#34892;&#21482;&#27714;&#25928;&#26524;&#65307;&#22312;&#25105;&#20204;&#30340;&#31995;&#32479;&#20013;&#65292;&#25105;&#20204;&#20026;&#23427;&#20219;&#36873;&#19968;&#20010;&#36820;&#22238;&#20540; 73&#12290;</p><p>&#25105;&#20204;&#26469;&#30475;&#36825;&#31181;&#35821;&#35328;&#30340;&#20004;&#20010;&#31034;&#20363;&#31243;&#24207;&#12290; &#23450;&#20041;&#20102;&#19968;&#20010;&#36807;&#31243; <span class="stt">noisy</span>&#65292;
&#23427;&#21462;&#19968;&#20010;&#21015;&#34920;&#65292;&#25171;&#21360;&#20986;&#21015;&#34920;&#30340;&#31532;&#19968;&#20010;&#20803;&#32032;&#65292;&#28982;&#21518;&#36882;&#24402;&#22788;&#29702;&#21015;&#34920;&#30340;&#21097;&#20313;&#37096;&#20998;&#12290;&#36825;&#37324;&#65292;&#20027;&#20307;&#20013;&#30340;
&#34920;&#36798;&#24335;&#21019;&#24314;&#20004;&#20010;&#32447;&#31243;&#65292;&#20998;&#21035;&#25171;&#21360;&#21015;&#34920; <span class="stt">[1,2,3,4,5]</span> &#21644; <span class="stt">[6,7,8,9,10]</span>&#12290;&#20004;&#20010;&#21015;&#34920;
&#31350;&#31455;&#22914;&#20309;&#31359;&#25554;&#21462;&#20915;&#20110;&#35843;&#24230;&#22120;&#65307;&#22312;&#26412;&#20363;&#20013;&#65292;&#22312;&#34987;&#35843;&#24230;&#22120;&#25171;&#26029;&#20043;&#21069;&#65292;&#27599;&#20010;&#32447;&#31243;&#25171;&#21360;&#20986;&#21015;&#34920;&#20013;&#30340;&#20004;
&#20010;&#20803;&#32032;&#65292;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">test: two-non-cooperating-threads</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">noisy (l) = if null?(l)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else begin print(car(l)); (noisy cdr(l)) end</span></p></td></tr><tr><td><p><span class="stt">in</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">spawn(proc (d) (noisy [1,2,3,4,5]));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">spawn(proc (d) (noisy [6,7,8,9,10]));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">print(100);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">33</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">100</span></p></td></tr><tr><td><p><span class="stt">1</span></p></td></tr><tr><td><p><span class="stt">2</span></p></td></tr><tr><td><p><span class="stt">6</span></p></td></tr><tr><td><p><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt">3</span></p></td></tr><tr><td><p><span class="stt">4</span></p></td></tr><tr><td><p><span class="stt">8</span></p></td></tr><tr><td><p><span class="stt">9</span></p></td></tr><tr><td><p><span class="stt">5</span></p></td></tr><tr><td><p><span class="stt">10</span></p></td></tr><tr><td><p><span class="stt">&#27491;&#30830;&#32467;&#26524;: 33</span></p></td></tr><tr><td><p><span class="stt">&#23454;&#38469;&#32467;&#26524;: #(struct:num-val 33)</span></p></td></tr><tr><td><p><span class="stt">&#27491;&#30830;</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#20004;&#20010;&#20132;&#38169;&#36816;&#34892;&#30340;&#32447;&#31243;<a name="(elem._fig-5..16)"></a></p></blockquote></blockquote><p> &#23637;&#31034;&#20102;&#19968;&#20010;&#29983;&#20135;&#32773;&#21644;&#19968;&#20010;&#28040;&#36153;&#32773;&#65292;&#30001;&#21021;&#22987;&#20540;&#20026; 0 &#30340;&#32531;&#23384;&#30456;&#32852;&#31995;&#12290;
&#29983;&#20135;&#32773;&#21462;&#19968;&#21442;&#25968; <span class="stt">n</span>&#65292;&#36827;&#20837; <span class="stt">wait</span>&#65292;&#24490;&#29615; 5 &#27425;&#65292;&#28982;&#21518;&#25226; <span class="stt">n</span> &#25918;&#20837;&#32531;&#23384;&#12290;&#27599;&#27425;&#36827;
&#20837; <span class="stt">wait</span> &#24490;&#29615;&#65292;&#23427;&#25171;&#21360;&#19968;&#20010;&#20498;&#25968;&#35745;&#26102;&#22120;&#65288;&#20197; 200s &#20026;&#21333;&#20301;&#65289;&#30340;&#20540;&#12290;&#28040;&#36153;&#32773;&#21462;&#19968;&#21442;&#25968;
&#65288;&#20294;&#24573;&#30053;&#23427;&#65289;&#65292;&#36827;&#20837;&#19968;&#24490;&#29615;&#65292;&#31561;&#24453;&#32531;&#23384;&#21464;&#25104;&#38750;&#38646;&#20540;&#12290;&#27599;&#27425;&#36827;&#20837;&#24490;&#29615;&#26102;&#65292;&#23427;&#25171;&#21360;&#19968;&#20010;&#35745;&#25968;&#22120;
&#65288;&#20197; 100s &#20026;&#21333;&#20301;&#65289;&#30340;&#20540;&#65292;&#20197;&#23637;&#31034;&#23427;&#31561;&#32467;&#26524;&#31561;&#20102;&#22810;&#20037;&#12290;&#20027;&#32447;&#31243;&#23558;&#29983;&#20135;&#32773;&#25918;&#20837;&#23601;&#32490;&#38431;&#21015;&#65292;&#25171;&#21360;
&#20986; 300&#65292;&#24182;&#22312;&#33258;&#36523;&#20013;&#21551;&#21160;&#28040;&#36153;&#32773;&#12290;&#25152;&#20197;&#65292;&#21069;&#20004;&#39033;&#65292;300 &#21644; 205&#65292;&#20998;&#21035;&#30001;&#20027;&#32447;&#31243;&#21644;&#29983;&#20135;&#32773;&#32447;&#31243;
&#25171;&#21360;&#12290;<span class="NoteBox"><span class="NoteContent">&#21407;&#25991;&#20026;So the first two items, 300 and 205, are printed by the main
thread. &#23454;&#21017;205&#26159;&#29983;&#20135;&#32773;&#25152;&#22312;&#32447;&#31243;&#25171;&#21360;&#12290;</span></span>&#23601;&#20687;&#21069;&#19968;&#20010;&#20363;&#23376;&#37027;&#26679;&#65292;&#22312;&#34987;&#25171;&#26029;&#20043;&#21069;&#65292;&#28040;&#36153;&#32773;&#32447;
&#31243;&#21644;&#29983;&#20135;&#32773;&#32447;&#31243;&#21508;&#33258;&#24490;&#29615;&#22823;&#32422;&#20004;&#27425;&#12290;</p><blockquote class="EoplFigure"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let buffer = 0</span></p></td></tr><tr><td><p><span class="stt">in let producer = proc (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">wait(k) = if zero?(k)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then set buffer = n</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">print(-(k,-200));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(wait -(k,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (wait 5)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let consumer = proc (d)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">letrec busywait (k) = if zero?(buffer)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">print(-(k,-100));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(busywait -(k,-1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else buffer</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (busywait 0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">spawn(proc (d) (producer 44));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">print(300);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(consumer 86)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">300</span></p></td></tr><tr><td><p><span class="stt">205</span></p></td></tr><tr><td><p><span class="stt">100</span></p></td></tr><tr><td><p><span class="stt">101</span></p></td></tr><tr><td><p><span class="stt">204</span></p></td></tr><tr><td><p><span class="stt">203</span></p></td></tr><tr><td><p><span class="stt">102</span></p></td></tr><tr><td><p><span class="stt">103</span></p></td></tr><tr><td><p><span class="stt">202</span></p></td></tr><tr><td><p><span class="stt">201</span></p></td></tr><tr><td><p><span class="stt">104</span></p></td></tr><tr><td><p><span class="stt">105</span></p></td></tr><tr><td><p><span class="stt">&#27491;&#30830;&#32467;&#26524;: 44</span></p></td></tr><tr><td><p><span class="stt">&#23454;&#38469;&#32467;&#26524;: #(struct:num-val 44)</span></p></td></tr><tr><td><p><span class="stt">&#27491;&#30830;</span></p></td></tr></table></blockquote><blockquote class="caption"><p>&#30001;&#32531;&#23384;&#36830;&#25509;&#30340;&#29983;&#20135;&#32773;&#21644;&#28040;&#36153;&#32773;<a name="(elem._fig-5..17)"></a></p></blockquote></blockquote><p>&#23454;&#29616;&#20174; IMPLICIT-REFS &#35821;&#35328;&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#24320;&#22987;&#12290;&#36825;&#19982;<a href="#%28part._s5..1%29" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a>&#20013;&#30340;&#31867;&#20284;&#65292;&#21482;&#26159;&#22810;
&#20102; IMPLICIT-REFS &#20013;&#30340;&#23384;&#20648;&#22120;&#65288;&#24403;&#28982;&#65281;&#65289;&#65292;&#20197;&#21450;ex5.9 &#20013;&#30340;&#32493;&#25991;&#26500;&#36896;&#22120;
<span class="stt">set-rhs-cont</span>&#12290;</p><p>&#25105;&#20204;&#32473;&#36825;&#20010;&#35299;&#37322;&#22120;&#28155;&#21152;&#19968;&#20010;&#35843;&#24230;&#22120;&#12290;&#35843;&#24230;&#22120;&#29366;&#24577;&#30001;&#22235;&#20010;&#20540;&#32452;&#25104;&#65292;&#25509;&#21475;&#25552;&#20379;&#20845;&#20010;&#36807;&#31243;&#26469;&#25805;&#20316;&#36825;
&#20123;&#20540;&#65292;&#22914; &#25152;&#31034;&#12290;</p><p> &#23637;&#31034;&#20102;&#26412;&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;&#36825;&#37324; <span class="stt">(enqueue </span><span class="texMathInline">q</span><span class="stt"> </span><span class="texMathInline">val</span><span class="stt">)</span> &#36820;&#22238;
&#19968;&#38431;&#21015;&#65292;&#38500;&#20102;&#25226; <span class="texMathInline">val</span> &#25918;&#22312;&#26411;&#23614;&#20043;&#22806;&#65292;&#19982; <span class="texMathInline">q</span> &#30456;&#21516;&#12290;<span class="stt">(dequeue </span><span class="texMathInline">q</span><span class="stt"> </span><span class="texMathInline">f</span><span class="stt">)</span>
&#21462;&#20986;&#38431;&#22836;&#21450;&#21097;&#20313;&#37096;&#20998;&#65292;&#23558;&#23427;&#20204;&#20316;&#20026;&#21442;&#25968;&#20256;&#36882;&#32473; <span class="texMathInline">f</span>&#12290;</p><p>&#25105;&#20204;&#29992;&#26080;&#21442;&#25968;&#19988;&#36820;&#22238;&#34920;&#36798;&#20540;&#30340; Scheme &#36807;&#31243;&#34920;&#31034;&#32447;&#31243;&#65306;</p><blockquote class="Small"><blockquote><p><span class="texMathInline">\mathit{Thread} = () \to \mathit{ExpVal}</span></p></blockquote></blockquote><p>&#22914;&#26524;&#23601;&#32490;&#38431;&#21015;&#38750;&#31354;&#65292;&#37027;&#20040;&#36807;&#31243; <span class="stt">run-next-thread</span> &#20174;&#23601;&#32490;&#38431;&#21015;&#21462;&#20986;&#31532;&#19968;&#20010;&#32447;&#31243;&#24182;&#36816;&#34892;&#65292;
&#36171;&#20104;&#23427;&#19968;&#20010;&#22823;&#23567;&#20026; <span class="stt">the-max-time-slice</span> &#30340;&#26032;&#26102;&#38388;&#29255;&#12290;&#22914;&#26524;&#36824;&#26377;&#23601;&#32490;&#32447;&#31243;&#65292;&#23427;&#36824;&#25226;
<span class="stt">the-ready-queue</span> &#35774;&#32622;&#20026;&#21097;&#20313;&#32447;&#31243;&#38431;&#21015;&#12290;&#22914;&#26524;&#23601;&#32490;&#38431;&#21015;&#20026;&#31354;&#65292;<span class="stt">run-next-thread</span>
&#36820;&#22238; <span class="stt">the-final-answer</span>&#65292;&#35745;&#31639;&#33267;&#27492;&#20840;&#37096;&#32456;&#27490;&#12290;</p><p><a name="(idx._(gentag._884))"></a>
&#28982;&#21518;&#25105;&#20204;&#26469;&#30475;&#35299;&#37322;&#22120;&#12290;<span class="stt">spawn</span> &#34920;&#36798;&#24335;&#22312;&#26576;&#20010;&#32493;&#25991;&#20013;&#27714;&#21442;&#25968;&#30340;&#20540;&#65292;&#36825;&#20010;&#32493;&#25991;&#25191;&#34892;&#26102;&#65292;&#23558;
&#19968;&#20010;&#26032;&#32447;&#31243;&#25918;&#20837;&#23601;&#32490;&#38431;&#21015;&#65292;&#24182;&#23558; 73 &#36820;&#22238;&#32473; <span class="stt">spawn</span> &#30340;&#35843;&#29992;&#32773;&#12290;&#26032;&#30340;&#32447;&#31243;&#25191;&#34892;&#26102;&#65292;&#23558;&#19968;
&#20010;&#20219;&#24847;&#20540;&#65288;&#36825;&#37324;&#36873; 28&#65289;&#20256;&#32473; <span class="stt">spawn</span> &#21442;&#25968;&#27714;&#20540;&#24471;&#21040;&#30340;&#36807;&#31243;&#12290;&#35201;&#23436;&#25104;&#36825;&#20123;&#65292;&#25105;&#20204;&#32473;
<span class="stt">value-of/k</span> &#26032;&#22686;&#20174;&#21477;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">spawn-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">spawn-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#32473; <span class="stt">apply-cont</span> &#26032;&#22686;&#20174;&#21477;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">spawn-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">place-on-ready-queue!</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-procedure/k</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">proc1</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">28</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">end-subthread-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">saved-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">73</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._885))"></a></div></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]
</div><div class="SIntrapara"><blockquote class="SubFlow"><p><div class="SIntrapara">\begin{cornerbox}[title=&#35843;&#24230;&#22120;&#30340;&#20869;&#37096;&#29366;&#24577;]
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">the-ready-queue</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#23601;&#32490;&#38431;&#21015;</p></td></tr><tr><td><p><span class="stt">the-final-answer</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#20027;&#32447;&#31243;&#32467;&#26463;&#26102;&#30340;&#20540;</p></td></tr><tr><td><p><span class="stt">the-max-time-slice</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#27599;&#20010;&#32447;&#31243;&#36816;&#34892;&#30340;&#27493;&#25968;</p></td></tr><tr><td><p><span class="stt">the-time-remaining</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#24403;&#21069;&#36816;&#34892;&#32447;&#31243;&#21097;&#20313;&#30340;&#27493;&#25968;</p></td></tr></table></div><div class="SIntrapara">
\end{cornerbox}</div></p></blockquote></div></p><blockquote class="SubFlow"><p><div class="SIntrapara">\begin{cornerbox}[title=&#35843;&#24230;&#22120;&#30340;&#25509;&#21475;]
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span style="font-weight: bold">initialize-scheduler!</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="texMathInline">: \mathit{Int} \to \mathit{Unspecified}</span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#21021;&#22987;&#21270;&#35843;&#24230;&#22120;&#29366;&#24577;</p></td></tr><tr><td><p><span style="font-weight: bold">place-on-ready-queue!</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="texMathInline">: \mathit{Thread} \to \mathit{Unspecified}</span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#25226;&#32447;&#31243;&#25918;&#20837;&#23601;&#32490;&#38431;&#21015;</p></td></tr><tr><td><p><span style="font-weight: bold">run-next-thread</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="texMathInline">: \mathit{()} \to \mathit{FinalAnswer}</span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#36816;&#34892;&#19979;&#19968;&#20010;&#32447;&#31243;&#12290;&#22914;&#26524;&#27809;&#26377;&#23601;&#32490;&#32447;&#31243;&#65292;&#36820;&#22238;&#26368;&#32456;&#31572;&#26696;&#12290;</p></td></tr><tr><td><p><span style="font-weight: bold">set-final-answer!</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="texMathInline">: \mathit{ExpVal} \to \mathit{Unspecified}</span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#35774;&#32622;&#26368;&#32456;&#31572;&#26696;</p></td></tr><tr><td><p><span style="font-weight: bold">time-expired?</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="texMathInline">: \mathit{()} \to \mathit{Bool}</span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#21028;&#26029;&#35745;&#26102;&#22120;&#26159;&#21542;&#20026;0</p></td></tr><tr><td><p><span style="font-weight: bold">decrement-timer!</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="texMathInline">: \mathit{()} \to \mathit{Unspecified}</span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#36882;&#20943;<span class="stt">the-time-remaining</span></p></td></tr></table></div><div class="SIntrapara">
\end{cornerbox}</div></p></blockquote><blockquote class="caption"><p>&#35843;&#24230;&#22120;&#30340;&#29366;&#24577;&#21644;&#25509;&#21475;
<a name="(idx._(gentag._886))"></a><a name="(elem._fig-5..18)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">initialize-scheduler!</span></span> : <span class="texMathInline">\mathit{Int} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">initialize-scheduler!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ticks</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-ready-queue</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-queue</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-final-answer</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-max-time-slice</span><span class="hspace">&nbsp;</span><span class="RktSym">ticks</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-time-remaining</span><span class="hspace">&nbsp;</span><span class="RktSym">the-max-time-slice</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">place-on-ready-queue!</span></span> : <span class="texMathInline">\mathit{Thread} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">place-on-ready-queue!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">th</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-ready-queue</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">enqueue</span><span class="hspace">&nbsp;</span><span class="RktSym">the-ready-queue</span><span class="hspace">&nbsp;</span><span class="RktSym">th</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">run-next-thread</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">run-next-thread</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty?</span><span class="hspace">&nbsp;</span><span class="RktSym">the-ready-queue</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">when</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">debug-mode?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:printf</span><span class="hspace">&nbsp;</span><span class="RktVal">"&#35745;&#31639;&#32467;&#26463;.~%"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">the-final-answer</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">when</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">debug-mode?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:printf</span><span class="hspace">&nbsp;</span><span class="RktVal">"&#20999;&#25442;&#21040;&#21478;&#19968;&#32447;&#31243;.~%"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dequeue</span><span class="hspace">&nbsp;</span><span class="RktSym">the-ready-queue</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first-ready-thread</span><span class="hspace">&nbsp;</span><span class="RktSym">other-ready-thread</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-ready-queue</span><span class="hspace">&nbsp;</span><span class="RktSym">other-ready-thread</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-time-remaining</span><span class="hspace">&nbsp;</span><span class="RktSym">the-max-time-slice</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first-ready-thread</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">set-final-answer!</span></span> : <span class="texMathInline">\mathit{ExpVal} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">set-final-answer!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-final-answer</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">time-expired?</span></span> : <span class="texMathInline">\mathit{ExpVal} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">time-expired?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">the-time-remaining</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">decrease-timer!</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">decrease-timer!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-time-remaining</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">the-time-remaining</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#35843;&#24230;&#22120;
<a name="(idx._(gentag._887))"></a><a name="(elem._fig-5..19)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 0</span></p></td></tr><tr><td><p><span class="stt">in let mut = mutex()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let incr_x = proc (id)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (dummy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = -(x,-1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">spawn((incr_x 100));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">spawn((incr_x 200));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">spawn((incr_x 300))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></blockquote><blockquote class="caption"><p>&#19981;&#23433;&#20840;&#30340;&#35745;&#25968;&#22120;<a name="(elem._fig-5..20)"></a></p></blockquote></blockquote><p>&#36339;&#36291;&#24335;&#35299;&#37322;&#22120;&#29983;&#25104;&#24555;&#29031;&#26102;&#20063;&#35201;&#20570;&#36825;&#26679;&#65306;&#23427;&#23558;&#35745;&#31639;&#25171;&#21253;&#65288;&#36825;&#37324;&#30340; <span class="stt">(lambda ()
(apply-procedure/k ...))</span>&#65289;&#65292;&#28982;&#21518;&#25226;&#23427;&#20256;&#32473;&#21478;&#19968;&#20010;&#36807;&#31243;&#22788;&#29702;&#12290;&#22312;&#36339;&#24202;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#25226;
&#32447;&#31243;&#20256;&#32473;&#36339;&#24202;&#65292;&#21518;&#32773;&#30452;&#25509;&#25191;&#34892;&#21069;&#32773;&#12290;&#36825;&#37324;&#65292;&#25105;&#20204;&#25226;&#26032;&#32447;&#31243;&#25918;&#20837;&#23601;&#32490;&#38431;&#21015;&#65292;&#32487;&#32493;&#25105;&#20204;&#30340;&#29616;&#26377;&#35745;
&#31639;&#12290;</p></blockquote><p>&#36825;&#24102;&#26469;&#19968;&#20010;&#20851;&#38190;&#38382;&#39064;&#65306;&#27599;&#20010;&#32447;&#31243;&#24212;&#22312;&#20160;&#20040;&#32493;&#25991;&#20013;&#36816;&#34892;&#65311;</p><ul><li><p>&#36816;&#34892;&#20027;&#32447;&#31243;&#30340;&#32493;&#25991;&#24212;&#35760;&#24405;&#20027;&#32447;&#31243;&#30340;&#20540;&#65292;&#20316;&#20026;&#26368;&#32456;&#31572;&#26696;&#65292;&#28982;&#21518;&#36816;&#34892;&#21097;&#20313;&#32447;&#31243;&#12290;</p></li><li><p>&#23376;&#32447;&#31243;&#32467;&#26463;&#26102;&#26080;&#27861;&#25253;&#21578;&#23427;&#30340;&#20540;&#65292;&#25152;&#20197;&#36816;&#34892;&#23376;&#32447;&#31243;&#30340;&#32493;&#25991;&#24212;&#24573;&#30053;&#20854;&#20540;&#65292;&#28982;&#21518;&#30452;&#25509;&#36816;&#34892;
&#21097;&#20313;&#32447;&#31243;&#12290;</p></li></ul><p><a name="(idx._(gentag._888))"></a>
&#30001;&#27492;&#25105;&#20204;&#24471;&#20986;&#20004;&#31181;&#26032;&#32493;&#25991;&#65292;&#20854;&#34892;&#20026;&#30001; <span class="stt">apply-cont</span> &#20013;&#30340;&#20197;&#19979;&#20960;&#34892;&#23454;&#29616;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-main-thread-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">set-final-answer!</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">run-next-thread</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">end-subthread-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">run-next-thread</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#20174; <span class="stt">value-of-program</span> &#20837;&#25163;&#25972;&#20010;&#31995;&#32479;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Int} \times \mathit{Program} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">timeslice</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-store!</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-scheduler!</span><span class="hspace">&nbsp;</span><span class="RktSym">timeslice</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">exp1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-main-thread-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#20462;&#25913; <span class="stt">apply-cont</span>&#65292;&#35753;&#23427;&#22312;&#27599;&#27425;&#35843;&#29992;&#26102;&#36882;&#20943;&#35745;&#26102;&#22120;&#12290;&#22914;&#26524;&#35745;&#26102;&#22120;&#21040;&#26399;&#65292;&#37027;&#23601;
&#20013;&#27490;&#24403;&#21069;&#35745;&#31639;&#12290;&#22312;&#23454;&#29616;&#26102;&#65292;&#25105;&#20204;&#20808;&#25226;&#19968;&#20010;&#32447;&#31243;&#25918;&#20837;&#23601;&#32490;&#38431;&#21015;&#65292;&#23427;&#29992;&#35843;&#29992;
<span class="stt">run-next-thread</span> &#26102;&#24674;&#22797;&#30340;&#35745;&#26102;&#22120;&#20877;&#27425;&#35843;&#29992; <span class="stt">apply-cont</span>&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-cont</span></span> : <span class="texMathInline">\mathit{Cont} \times \mathit{ExpVal} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">time-expired?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-on-ready-queue!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">run-next-thread</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decrement-timer!</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._889))"></a></div></p></blockquote><p><a name="(idx._(gentag._890))"></a>
<a name="(idx._(gentag._891))"></a>
<a name="(idx._(gentag._892))"></a>
&#20849;&#20139;&#21464;&#37327;&#19981;&#26159;&#21487;&#38752;&#30340;&#36890;&#20449;&#26041;&#24335;&#65292;&#22240;&#20026;&#22810;&#20010;&#32447;&#31243;&#21487;&#33021;&#35797;&#22270;&#20889;&#21516;&#19968;&#21464;&#37327;&#12290;&#20363;&#22914;&#65292;
&#32771;&#34385; &#20013;&#30340;&#31243;&#24207;&#12290;&#36825;&#37324;&#65292;&#25105;&#20204;&#21019;&#24314;&#20102;&#19977;&#20010;&#32447;&#31243;&#65292;&#35797;&#22270;&#32047;&#21152;&#21516;&#19968;&#20010;&#35745;&#25968;
&#22120; <span class="stt">x</span>&#12290;&#22914;&#26524;&#19968;&#20010;&#32447;&#31243;&#35835;&#21462;&#20102;&#35745;&#25968;&#22120;&#65292;&#20294;&#22312;&#26356;&#26032;&#35745;&#25968;&#22120;&#20043;&#21069;&#34987;&#25171;&#26029;&#65292;&#37027;&#20040;&#20004;&#20010;&#32447;&#31243;&#23558;&#25226;
&#35745;&#25968;&#22120;&#35774;&#32622;&#25104;&#21516;&#26679;&#30340;&#20540;&#12290;&#22240;&#27492;&#65292;&#35745;&#25968;&#22120;&#21487;&#33021;&#21464;&#25104; 2&#65292;&#29978;&#33267;&#26159; 1&#65292;&#32780;&#19981;&#26159; 3&#12290;
<a name="(idx._(gentag._893))"></a></p><p>&#25105;&#20204;&#24819;&#35201;&#30830;&#20445;&#19981;&#20250;&#21457;&#29983;&#36825;&#31181;&#28151;&#20081;&#12290;&#21516;&#26679;&#22320;&#65292;&#25105;&#20204;&#24819;&#35201;&#32452;&#32455;&#25105;&#20204;&#30340;&#31243;&#24207;&#65292;
&#36991;&#20813; &#20013;&#30340;&#31243;&#24207;&#31354;&#36716;&#12290;&#24688;&#24688;&#30456;&#21453;&#65292;&#23427;&#24212;&#35813;&#33021;&#22815;&#36827;&#20837;&#20241;&#30496;&#29366;&#24577;&#65292;&#24182;&#22312;&#29983;
&#20135;&#32773;&#21521;&#20849;&#20139;&#32531;&#23384;&#25554;&#20837;&#20540;&#26102;&#21796;&#37266;&#12290;</p><p><a name="(idx._(gentag._894))"></a>
<a name="(idx._(gentag._895))"></a>
<a name="(idx._(gentag._896))"></a>
&#26377;&#35768;&#22810;&#26041;&#24335;&#35774;&#35745;&#36825;&#31867;&#21516;&#27493;&#32452;&#20214;&#12290;&#19968;&#31181;&#31616;&#21333;&#30340;&#26041;&#24335;&#26159;&#20351;&#29992;<span class="emph">&#20114;&#26021;&#38145;</span> (<span class="emph">mutex exclusion</span>, <span class="emph">mutex</span>) &#25110;<span class="emph">&#20108;&#20803;&#20449;&#21495;&#37327;</span> (<span class="emph">binary semaphore</span>)&#12290;</p><p>&#20114;&#26021;&#38145;&#21487;&#33021;<span class="emph">&#25171;&#24320;</span> (<span class="emph">open</span>) &#25110;<span class="emph">&#20851;&#38381;</span> (<span class="emph">closed</span>)&#12290;&#23427;&#36824;&#21253;&#21547;&#19968;&#20010;&#31561;&#24453;&#20114;&#26021;&#38145;&#25171;
&#24320;&#30340;&#32447;&#31243;&#38431;&#21015;&#12290;&#20114;&#26021;&#38145;&#26377;&#19977;&#31181;&#25805;&#20316;&#65306;</p><ul><li><p><span class="stt">mutex</span>&#65292;&#26080;&#21442;&#25968;&#25805;&#20316;&#65292;&#21019;&#24314;&#19968;&#20010;&#21021;&#22987;&#29366;&#24577;&#20026;&#25171;&#24320;&#30340;&#20114;&#26021;&#38145;&#12290;</p></li><li><p><span class="stt">wait</span>&#65292;&#21333;&#21442;&#25968;&#25805;&#20316;&#65292;&#32447;&#31243;&#29992;&#23427;&#34920;&#26126;&#24819;&#35201;&#35775;&#38382;&#26576;&#19968;&#20114;&#26021;&#38145;&#12290;&#23427;&#30340;&#21442;&#25968;&#24517;&#39035;&#26159;&#19968;&#25226;
&#20114;&#26021;&#38145;&#12290;&#23427;&#30340;&#34892;&#20026;&#21462;&#20915;&#20110;&#20114;&#26021;&#38145;&#30340;&#29366;&#24577;&#12290;</p><ul><li><p>&#33509;&#20114;&#26021;&#38145;&#20851;&#38381;&#65292;&#24403;&#21069;&#32447;&#31243;&#25918;&#20837;&#20114;&#26021;&#38145;&#30340;&#31561;&#24453;&#38431;&#21015;&#20013;&#65292;&#24182;&#20013;&#27490;&#12290;&#25105;&#20204;&#35828;&#24403;&#21069;&#32447;
&#31243;<span class="emph">&#21463;&#38459;&#22622;</span>&#65292;&#31561;&#24453;&#36825;&#25226;&#20114;&#26021;&#38145;&#12290;</p></li><li><p>&#33509;&#20114;&#26021;&#38145;&#25171;&#24320;&#65292;&#21017;&#23558;&#20854;&#20851;&#38381;&#65292;&#24182;&#35753;&#24403;&#21069;&#32447;&#31243;&#32487;&#32493;&#25191;&#34892;&#12290;</p></li></ul><p><span class="stt">wait</span>&#30340;&#25191;&#34892;&#21482;&#27714;&#25928;&#26524;&#65307;&#23427;&#30340;&#36820;&#22238;&#20540;&#26410;&#23450;&#20041;&#12290;</p></li><li><p><span class="stt">signal</span>&#65292;&#21333;&#21442;&#25968;&#25805;&#20316;&#65292;&#32447;&#31243;&#29992;&#23427;&#34920;&#26126;&#20934;&#22791;&#37322;&#25918;&#26576;&#19968;&#20114;&#26021;&#38145;&#12290;&#23427;&#30340;&#21442;&#25968;&#24517;&#39035;&#26159;&#19968;
&#25226;&#20114;&#26021;&#38145;&#12290;</p><ul><li><p>&#33509;&#20114;&#26021;&#38145;&#20851;&#38381;&#65292;&#19988;&#31561;&#24453;&#38431;&#21015;&#20013;&#27809;&#26377;&#32447;&#31243;&#65292;&#21017;&#23558;&#20854;&#25171;&#24320;&#65292;&#24182;&#35753;&#24403;&#21069;&#32447;&#31243;&#32487;&#32493;&#25191;&#34892;&#12290;</p></li><li><p>&#33509;&#20114;&#26021;&#38145;&#20851;&#38381;&#65292;&#19988;&#31561;&#24453;&#38431;&#21015;&#20013;&#20173;&#26377;&#32447;&#31243;&#65292;&#21017;&#20174;&#20013;&#36873;&#20986;&#19968;&#20010;&#32447;&#31243;&#65292;&#25918;&#20837;&#35843;&#24230;&#22120;&#30340;&#31561;&#24453;
&#38431;&#21015;&#65292;&#20114;&#26021;&#38145;&#21017;&#20445;&#25345;&#20851;&#38381;&#12290;&#25191;&#34892; <span class="stt">signal</span> &#30340;&#32447;&#31243;&#32487;&#32493;&#35745;&#31639;&#12290;</p></li><li><p>&#33509;&#20114;&#26021;&#38145;&#25171;&#24320;&#65292;&#21017;&#20445;&#25345;&#25171;&#24320;&#65292;&#32447;&#31243;&#32487;&#32493;&#25191;&#34892;&#12290;</p></li></ul><p><span class="stt">signal</span>&#30340;&#25191;&#34892;&#21482;&#27714;&#25928;&#26524;&#65307;&#23427;&#30340;&#36820;&#22238;&#20540;&#26410;&#23450;&#20041;&#12290;<span class="stt">signal</span> &#25805;&#20316;&#24635;&#26159;&#25104;&#21151;&#65306;&#25191;&#34892;&#23427;&#30340;
&#32447;&#31243;&#20173;&#28982;&#26159;&#36816;&#34892;&#32447;&#31243;&#12290;</p></li></ul><p><a name="(idx._(gentag._897))"></a>
&#36825;&#20123;&#23646;&#24615;&#20445;&#35777;&#22312;&#19968;&#23545;&#36830;&#32493;&#30340; <span class="stt">wait</span> &#21644; <span class="stt">signal</span> &#20043;&#38388;&#65292;&#21482;&#26377;&#19968;&#20010;&#32447;&#31243;&#21487;&#20197;&#25191;&#34892;&#12290;&#36825;
&#37096;&#20998;&#31243;&#24207;&#21483;&#20570;<span class="emph">&#20851;&#38190;&#21306;&#22495;</span> (<span class="emph">critical region</span>)&#12290;&#22312;&#20851;&#38190;&#21306;&#22495;&#20869;&#65292;&#20004;&#20010;&#32447;&#31243;&#19981;&#21487;&#33021;&#21516;&#26102;
&#25191;&#34892;&#12290;&#20363;&#22914;&#65292; &#23637;&#31034;&#20102;&#25105;&#20204;&#20043;&#21069;&#30340;&#20363;&#23376;&#65292;&#21482;&#26159;&#22312;&#20851;&#38190;&#34892;&#21608;&#22260;&#25554;&#20837;&#20102;&#19968;
&#25226;&#20114;&#26021;&#38145;&#12290;&#22312;&#36825;&#20010;&#31243;&#24207;&#20013;&#65292;&#19968;&#27425;&#21482;&#26377;&#19968;&#20010;&#32447;&#31243;&#21487;&#20197;&#25191;&#34892; <span class="stt">set x = -(x,-1)</span>&#65307;&#25152;&#20197;&#35745;&#25968;
&#22120;&#19968;&#23450;&#33021;&#22815;&#21040;&#36798;&#32456;&#20540; 3&#12290;
<a name="(idx._(gentag._898))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 0</span></p></td></tr><tr><td><p><span class="stt">in let mut = mutex()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let incr_x = proc (id)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (dummy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">wait(mut);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = -(x,-1);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">signal(mut)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">spawn((incr_x 100));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">spawn((incr_x 200));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">spawn((incr_x 300))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#20351;&#29992;&#20114;&#26021;&#38145;&#30340;&#23433;&#20840;&#35745;&#25968;&#22120;<a name="(elem._fig-5..21)"></a></p></blockquote></blockquote><p>&#25105;&#20204;&#29992;&#20004;&#20010;&#24341;&#29992;&#27169;&#25311;&#20114;&#26021;&#38145;&#65306;&#19968;&#20010;&#25351;&#21521;&#20854;&#29366;&#24577;&#65288;&#24320;&#21551;&#25110;&#20851;&#38381;&#65289;&#65292;&#19968;&#20010;&#25351;&#21521;&#31561;&#24453;&#36825;&#25226;&#38145;&#30340;&#32447;&#31243;
&#21015;&#34920;&#12290;&#25105;&#20204;&#36824;&#25226;&#20114;&#26021;&#38145;&#20316;&#20026;&#19968;&#31181;&#34920;&#36798;&#20540;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">mutex</span><span class="hspace">&nbsp;</span><span class="RktSym">mutex?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-mutex</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ref-to-closed?</span><span class="hspace">&nbsp;</span><span class="RktSym">reference?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ref-to-wait-queue</span><span class="hspace">&nbsp;</span><span class="RktSym">reference?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#32473; <span class="stt">value-of/k</span> &#28155;&#21152;&#36866;&#24403;&#30340;&#34892;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">mutex-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">mutex-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">new-mutex</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20854;&#20013;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">new-mutex</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Mutex}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">new-mutex</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-mutex</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><p><span class="stt">wait</span> &#21644; <span class="stt">signal</span> &#20316;&#20026;&#26032;&#30340;&#21333;&#21442;&#25968;&#25805;&#20316;&#65292;&#21482;&#26159;&#35843;&#29992;&#36807;&#31243; <span class="stt">wait-for-mutex</span> &#21644;
<span class="stt">signal-mutex</span>&#12290;<span class="stt">wait</span> &#21644; <span class="stt">signal</span> &#37117;&#27714;&#20986;&#23427;&#20204;&#21807;&#19968;&#21442;&#25968;&#30340;&#20540;&#65292;&#25152;&#20197;&#65292;&#22312;
<span class="stt">apply-cont</span> &#20013;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wait-cont</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">wait-for-mutex</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;mutex</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">saved-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">52</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">signal-cont</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">signal-mutex</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;mutex</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">saved-cont</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">53</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986; <span class="stt">wait-for-mutex</span> &#21644; <span class="stt">signal-mutex</span>&#12290;&#36825;&#20123;&#36807;&#31243;&#21462;&#20004;&#20010;&#21442;&#25968;&#65306;
&#19968;&#20010;&#20114;&#26021;&#38145;&#65292;&#19968;&#20010;&#32447;&#31243;&#65292;&#20854;&#24037;&#20316;&#26041;&#24335;&#22914;&#19978;&#25152;&#36848;&#65288;&#65289;&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">wait-for-mutex</span></span> : <span class="texMathInline">\mathit{Mutex} \times \mathit{Thread} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">&#31561;&#24453;&#20114;&#26021;&#38145;&#24320;&#21551;&#65292;&#28982;&#21518;&#20851;&#38381;&#23427;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">wait-for-mutex</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">th</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">mutex</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-mutex</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ref-to-closed?</span><span class="hspace">&nbsp;</span><span class="RktSym">ref-to-wait-queue</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="hspace">&nbsp;</span><span class="RktSym">ref-to-closed?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="hspace">&nbsp;</span><span class="RktSym">ref-to-wait-queue</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">enqueue</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="hspace">&nbsp;</span><span class="RktSym">ref-to-wait-queue</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">th</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">run-next-thread</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="hspace">&nbsp;</span><span class="RktSym">ref-to-closed?</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">th</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">signal-mutex</span></span> : <span class="texMathInline">\mathit{Mutex} \times \mathit{Thread} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">signal-mutex</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">th</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">mutex</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-mutex</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ref-to-closed?</span><span class="hspace">&nbsp;</span><span class="RktSym">ref-to-wait-queue</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">closed?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="hspace">&nbsp;</span><span class="RktSym">ref-to-closed?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">wait-queue</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref</span><span class="hspace">&nbsp;</span><span class="RktSym">ref-to-wait-queue</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">closed?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty?</span><span class="hspace">&nbsp;</span><span class="RktSym">wait-queue</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="hspace">&nbsp;</span><span class="RktSym">ref-to-closed?</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">th</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dequeue</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">wait-queue</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first-waiting-th</span><span class="hspace">&nbsp;</span><span class="RktSym">other-waiting-ths</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-on-ready-queue!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">first-waiting-th</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">ref-to-wait-queue</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">other-waiting-ths</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">th</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">th</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p><span class="stt">wait-for-mutex</span> &#21644; <span class="stt">signal-mutex</span>
<a name="(idx._(gentag._899))"></a>
<a name="(idx._(gentag._900))"></a>
<a name="(idx._(gentag._901))"></a><a name="(elem._fig-5..22)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._902))"></a>
<a name="(idx._(gentag._903))"></a>
<a name="(idx._(gentag._904))"></a>
<a name="(idx._(gentag._905))"></a>
<a name="(idx._(gentag._906))"></a>
<a name="(idx._(gentag._907))"></a>
<a name="(idx._(gentag._908))"></a>
<a name="(idx._(gentag._909))"></a>
<a name="(idx._(gentag._910))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex5..45)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#26412;&#33410;&#30340;&#35821;&#35328;&#28155;&#21152;&#24418;&#24335; <span class="stt">yield</span>&#12290;&#32447;&#31243;&#19981;&#35770;&#20309;&#26102;&#25191;&#34892; <span class="stt">yield</span>&#65292;&#37117;&#23558;&#33258;&#36523;&#25918;&#20837;&#23601;&#32490;&#38431;
&#21015;&#20043;&#20013;&#65292;&#23601;&#32490;&#38431;&#21015;&#22836;&#37096;&#30340;&#32447;&#31243;&#25509;&#30528;&#25191;&#34892;&#12290;&#24403;&#32447;&#31243;&#32487;&#32493;&#26102;&#65292;&#23601;&#22909;&#20687;&#35843;&#29992; <span class="stt">yield</span> &#36820;&#22238;&#20102;
99&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..46)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;ex5.45 &#30340;&#31995;&#32479;&#20013;&#65292;&#32447;&#31243;&#25918;&#20837;&#23601;&#32490;&#38431;&#21015;&#65292;&#26082;&#21487;&#33021;&#26159;&#22240;&#20026;&#32791;&#23613;&#26102;&#38388;&#29255;&#65292;&#20063;&#21487;
&#33021;&#26159;&#22240;&#20026;&#23427;&#36873;&#25321;&#35753;&#27493;&#12290;&#22312;&#21518;&#19968;&#31181;&#24773;&#20917;&#19979;&#65292;&#32447;&#31243;&#20250;&#20197;&#19968;&#20010;&#23436;&#25972;&#30340;&#26102;&#38388;&#29255;&#37325;&#21551;&#12290;&#20462;&#25913;&#31995;&#32479;&#65292;&#35753;&#23601;
&#32490;&#38431;&#21015;&#35760;&#24405;&#27599;&#20010;&#32447;&#31243;&#30340;&#21097;&#20313;&#26102;&#38388;&#29255;&#65288;&#22914;&#26524;&#26377;&#30340;&#35805;&#65289;&#65292;&#22312;&#32447;&#31243;&#37325;&#21551;&#26102;&#20173;&#20351;&#29992;&#21097;&#20313;&#30340;&#26102;&#38388;&#29255;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..47)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22914;&#26524;&#21097;&#20313;&#20004;&#20010;&#23376;&#32447;&#31243;&#65292;&#20108;&#32773;&#37117;&#22312;&#31561;&#24453;&#21478;&#19968;&#20010;&#23376;&#32447;&#31243;&#25345;&#26377;&#30340;&#20114;&#26021;&#38145;&#20250;&#24590;&#26679;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..48)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._911))"></a>
&#25105;&#20204;&#29992;&#36807;&#31243;&#34920;&#31034;&#32447;&#31243;&#12290;&#23558;&#20854;&#25913;&#20026;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..49)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._912))"></a>
<a name="(idx._(gentag._913))"></a>
&#20026; THREADS &#23436;&#25104;ex5.15&#65288;&#29992;&#22534;&#26632;&#19978;&#30340;&#24103;&#34920;&#31034;&#32493;&#25991;&#65289;&#12290;
<a name="(idx._(gentag._914))"></a>
<a name="(idx._(gentag._915))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..50)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._916))"></a>
&#23492;&#23384;&#26412;&#33410;&#30340;&#35299;&#37322;&#22120;&#12290;&#24517;&#39035;&#23492;&#23384;&#30340;&#20114;&#36882;&#24402;&#23614;&#35843;&#29992;&#36807;&#31243;&#26377;&#21738;&#20123;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..51)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#24819;&#35201;&#32452;&#32455;&#25105;&#20204;&#30340;&#31243;&#24207;&#65292;&#36991;&#20813; &#20013;&#30340;&#31243;&#24207;&#31354;&#36716;&#12290;&#24688;&#24688;&#30456;&#21453;&#65292;&#23427;&#24212;&#35813;
&#33021;&#22815;&#36827;&#20837;&#20241;&#30496;&#29366;&#24577;&#65292;&#24182;&#22312;&#29983;&#20135;&#32773;&#21521;&#20849;&#20139;&#32531;&#23384;&#25554;&#20837;&#20540;&#26102;&#21796;&#37266;&#12290;&#29992;&#20855;&#26377;&#20114;&#26021;&#38145;&#30340;&#31243;&#24207;&#23436;&#25104;&#36825;&#20123;&#65292;
&#25110;&#32773;&#23454;&#29616;&#19968;&#31181;&#21516;&#27493;&#25805;&#20316;&#31526;&#23436;&#25104;&#36825;&#20123;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..52)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986;&#20351;&#29992;&#20114;&#26021;&#38145;&#30340;&#31243;&#24207;&#65292;&#22914;&#65292;&#20294;&#20027;&#32447;&#31243;&#31561;&#24453;&#25152;&#26377;&#19977;&#20010;&#23376;&#32447;&#31243;&#32467;&#26463;&#65292;
&#28982;&#21518;&#36820;&#22238; <span class="stt">x</span> &#30340;&#20540;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..53)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#32447;&#31243;&#30340;&#34920;&#31034;&#65292;&#28155;&#21152;<span class="emph">&#32447;&#31243;&#25551;&#36848;&#31526;</span> (<span class="emph">thread identifier</span>)&#12290;&#27599;&#20010;&#26032;&#32447;&#31243;&#37117;&#26377;&#19968;&#20010;&#26032;
&#30340;&#32447;&#31243;&#25551;&#36848;&#31526;&#12290;&#24403;&#23376;&#32447;&#31243;&#21019;&#24314;&#26102;&#65292;&#20256;&#32473;&#23427;&#30340;&#19981;&#26159;&#26412;&#33410;&#20013;&#30340;&#20219;&#24847;&#20540; 28&#65292;&#32780;&#26159;&#23427;&#30340;&#32447;&#31243;&#25551;&#36848;&#31526;&#12290;
&#23376;&#32447;&#31243;&#30340;&#25551;&#36848;&#31526;&#20063;&#20316;&#20026; <span class="stt">spawn</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#36820;&#22238;&#32473;&#29238;&#32447;&#31243;&#12290;&#32473;&#35299;&#37322;&#22120;&#28155;&#21152;&#36741;&#21161;&#32452;&#20214;&#65292;&#36319;
&#36394;&#32447;&#31243;&#25551;&#36848;&#31526;&#30340;&#21019;&#24314;&#12290;&#39564;&#35777;&#23601;&#32490;&#38431;&#21015;&#20013;&#19968;&#20010;&#32447;&#31243;&#25551;&#36848;&#31526;&#33267;&#22810;&#20986;&#29616;&#19968;&#27425;&#12290;&#23376;&#32447;&#31243;&#22914;&#20309;&#33719;&#30693;&#29238;&#32447;
&#31243;&#30340;&#25551;&#36848;&#31526;&#65311;&#21407;&#31243;&#24207;&#30340;&#32447;&#31243;&#25551;&#36848;&#31526;&#24212;&#22914;&#20309;&#22788;&#29702;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..54)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;ex5.53 &#30340;&#35299;&#37322;&#22120;&#28155;&#21152;&#32452;&#20214; <span class="stt">kill</span>&#12290;<span class="stt">kill</span> &#32467;&#26500;&#21462;&#19968;&#32447;&#31243;&#21495;&#65292;&#22312;
&#23601;&#32490;&#38431;&#21015;&#25110;&#25152;&#26377;&#31561;&#24453;&#38431;&#21015;&#20013;&#25214;&#20986;&#23545;&#24212;&#30340;&#32447;&#31243;&#65292;&#28982;&#21518;&#21024;&#38500;&#23427;&#12290;&#27492;&#22806;&#65292;&#24403;&#23427;&#25214;&#21040;&#30446;&#26631;&#32447;&#31243;&#26102;&#65292;&#36820;
&#22238;&#30495;&#65307;&#22312;&#25152;&#26377;&#38431;&#21015;&#20013;&#37117;&#25214;&#19981;&#21040;&#25351;&#23450;&#32447;&#31243;&#21495;&#26102;&#65292;&#36820;&#22238;&#20551;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..55)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;ex5.53 &#30340;&#35299;&#37322;&#22120;&#28155;&#21152;&#32447;&#31243;&#36890;&#20449;&#32452;&#20214;&#65292;&#19968;&#20010;&#32447;&#31243;&#21487;&#20197;&#29992;&#21478;&#19968;&#32447;&#31243;&#30340;&#25551;&#36848;&#31526;
&#32473;&#23427;&#21457;&#36865;&#19968;&#20010;&#20540;&#12290;&#32447;&#31243;&#21487;&#20197;&#36873;&#25321;&#25509;&#25910;&#28040;&#24687;&#65292;&#27809;&#26377;&#32447;&#31243;&#32473;&#23427;&#21457;&#28040;&#24687;&#26102;&#21487;&#20197;&#38459;&#22622;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..56)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;ex5.55 &#30340;&#35299;&#37322;&#22120;&#65292;&#19981;&#35201;&#20351;&#29992;&#20849;&#20139;&#23384;&#20648;&#22120;&#65292;&#32780;&#26159;&#35753;&#27599;&#20010;&#32447;&#31243;&#20855;&#26377;&#33258;&#24049;&#30340;
&#23384;&#20648;&#22120;&#12290;&#22312;&#36825;&#31181;&#35821;&#35328;&#20013;&#65292;&#20960;&#20046;&#21487;&#20197;&#25490;&#38500;&#20114;&#26021;&#38145;&#12290;&#37325;&#20889;&#26412;&#33410;&#35821;&#35328;&#30340;&#31034;&#20363;&#31243;&#24207;&#65292;&#20294;&#19981;&#29992;&#20114;&#26021;&#38145;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..57)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;&#20320;&#26368;&#29233;&#30340;&#25805;&#20316;&#31995;&#32479;&#25945;&#26448;&#20013;&#65292;&#26377;&#21508;&#31181;&#21508;&#26679;&#30340;&#21516;&#27493;&#26426;&#21046;&#12290;&#25361;&#20986;&#19977;&#31181;&#65292;&#22312;&#26412;&#33410;&#30340;&#26694;&#26550;&#19979;&#23454;&#29616;&#23427;&#20204;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex5..58)"></a><span class="texMathInline">\textnormal{[}<span class="emph">&#32477;&#23545;</span> <span class="texMathInline">{\star}</span>\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._917))"></a>
&#21644;&#26379;&#21451;&#21507;&#20123;&#25259;&#33832;&#21543;&#65292;&#20294;&#26159;&#19968;&#20154;&#19968;&#27425;&#19968;&#23450;&#21482;&#25343;&#19968;&#22359;&#65281;</p></blockquote><h3 class="heading">6<tt>&nbsp;</tt><a name="(part._cps)"></a>&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;<span class="button-group"><a href="#(part._cps)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(idx._(gentag._918))"></a>
<a name="(idx._(gentag._919))"></a>
&#22312;<a href="#%28part._cpi%29" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a>&#65292;&#25105;&#20204;&#25226;&#35299;&#37322;&#22120;&#20013;&#30340;&#25152;&#26377;&#20027;&#35201;&#36807;&#31243;&#35843;&#29992;&#37325;&#20889;&#25104;<span class="emph">&#23614;&#35843;&#29992;</span>&#12290;&#36825;&#26679;&#65292;&#25105;&#20204;
&#20445;&#35777;&#20219;&#20309;&#26102;&#20505;&#65292;&#19981;&#35770;&#25191;&#34892;&#30340;&#31243;&#24207;&#22810;&#22823;&#25110;&#22810;&#22797;&#26434;&#65292;&#35299;&#37322;&#22120;&#21482;&#20351;&#29992;&#26377;&#38480;&#30340;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;&#36825;&#31181;&#24615;&#36136;
&#21483;&#20570;<span class="emph">&#36845;&#20195;&#24615;&#25511;&#21046;&#34892;&#20026;</span>&#12290;
<a name="(idx._(gentag._920))"></a></p><p><a name="(idx._(gentag._921))"></a>
&#25105;&#20204;&#36890;&#36807;&#32473;&#27599;&#20010;&#36807;&#31243;&#22810;&#20256;&#19968;&#20010;<span class="emph">&#32493;&#25991;</span>&#21442;&#25968;&#23454;&#29616;&#36825;&#19968;&#30446;&#26631;&#12290;&#36825;&#31181;&#32534;&#31243;&#39118;&#26684;
&#21483;&#20570;<span class="emph">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</span> (<span class="emph">continuation-passing style</span>) &#25110; <span class="emph">CPS</span>&#65292;&#19988;&#19981;&#38480;
&#20110;&#35299;&#37322;&#22120;&#12290;</p><p>&#26412;&#31456;&#65292;&#25105;&#20204;&#20171;&#32461;&#19968;&#31181;&#31995;&#32479;&#24615;&#30340;&#26041;&#27861;&#65292;&#23558;&#20219;&#19968;&#36807;&#31243;&#36716;&#25442;&#20026;&#20855;&#26377;&#36845;&#20195;&#24615;&#25511;&#21046;&#34892;&#20026;&#30340;&#31561;&#25928;&#36807;&#31243;&#12290;&#23454;
&#29616;&#36825;&#19968;&#28857;&#38656;&#35201;&#23558;&#36807;&#31243;&#36716;&#25442;&#20026;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#12290;</p><h4 class="heading">6.1<tt>&nbsp;</tt><a name="(part._s6..1)"></a>&#20889;&#20986;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#30340;&#31243;&#24207;<span class="button-group"><a href="#(part._s6..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._922))"></a>
&#38500;&#20102;&#20889;&#35299;&#37322;&#22120;&#65292;CPS &#36824;&#26377;&#21035;&#30340;&#20316;&#29992;&#12290;&#25105;&#20204;&#32771;&#34385;&#8220;&#32769;&#29087;&#20154;&#8221;&#38454;&#20056;&#31243;&#24207;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#38454;&#20056;&#30340;&#20256;&#36882;&#32493;&#25991;&#29256;&#26412;&#26159;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact/k</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact/k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20854;&#20013;&#65292;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (end-cont) </span><span class="texMathInline">val</span><span class="stt">) = </span><span class="texMathInline">val</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (fact1-cont </span><span class="texMathInline">n</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">) = </span><span class="texMathInline">val</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">= (apply-cont </span><span class="texMathInline">cont</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(* </span><span class="texMathInline">n</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt">))</span></p></td></tr></table></blockquote></blockquote><p>&#22312;&#36825;&#19968;&#29256;&#20869;&#65292;<span class="stt">fact/k</span> &#21644; <span class="stt">apply-cont</span> &#20013;&#30340;&#25152;&#26377;&#35843;&#29992;&#37117;&#22312;&#26411;&#23614;&#65292;&#22240;&#27492;&#19981;&#20135;&#29983;&#25511;&#21046;
&#19978;&#19979;&#25991;&#12290;</p><p><a name="(idx._(gentag._923))"></a>
<a name="(idx._(gentag._924))"></a>
&#25105;&#20204;&#21487;&#20197;&#29992;&#25968;&#25454;&#32467;&#26500;&#23454;&#29616;&#36825;&#20123;&#32493;&#25991;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">integer?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact1-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-n</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-n</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._925))"></a>
&#25105;&#20204;&#36824;&#33021;&#20197;&#22810;&#31181;&#26041;&#24335;&#36716;&#25442;&#36825;&#19968;&#31243;&#24207;&#65292;&#27604;&#22914;&#23492;&#23384;&#23427;&#65292;&#22914; &#25152;&#31034;&#12290;</p><p><a name="(idx._(gentag._926))"></a>
&#25105;&#20204;&#29978;&#33267;&#33021;&#23558;&#20854;&#36716;&#20026;&#36339;&#36291;&#24335;&#65292;&#22914; &#25152;&#31034;&#12290;&#22914;&#26524;&#29992;&#26222;&#36890;&#30340;&#25351;&#20196;&#24335;&#35821;&#35328;&#65292;
&#25105;&#20204;&#33258;&#28982;&#33021;&#23558;&#36339;&#24202;&#26367;&#25442;&#20026;&#36866;&#24403;&#30340;&#24490;&#29615;&#12290;
<a name="(idx._(gentag._927))"></a></p><p><a name="(idx._(gentag._928))"></a>
&#20294;&#26159;&#65292;&#26412;&#31456;&#25105;&#20204;&#20027;&#35201;&#20851;&#24515;&#65292;&#29992;&#36807;&#31243;&#34920;&#31034;&#27861;&#65288;&#22914;&#65289;&#26102;&#20250;&#21457;&#29983;&#20160;&#20040;&#12290;&#22238;&#24518;
&#19968;&#19979;&#65292;&#22312;&#36807;&#31243;&#34920;&#31034;&#27861;&#20013;&#65292;&#32493;&#25991;&#29992;&#23427;&#22312; <span class="stt">apply-cont</span> &#20013;&#30340;&#21160;&#20316;&#34920;&#31034;&#12290;&#36807;&#31243;&#34920;&#31034;&#20026;&#65306;
<a name="(idx._(gentag._929))"></a></p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">end-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg-n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact/k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact/k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact1-cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-n</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-n</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#23492;&#23384;&#21518;&#30340; <span class="stt">fact/k</span>
<a name="(idx._(gentag._930))"></a><a name="(elem._fig-6..1)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._931))"></a>
&#25105;&#20204;&#36824;&#21487;&#20197;&#26356;&#36827;&#19968;&#27493;&#65292;&#23558;&#31243;&#24207;&#20013;&#25152;&#26377;&#35843;&#29992;&#32493;&#25991;&#26500;&#36896;&#22120;&#30340;&#22320;&#26041;&#26367;&#25442;&#20026;&#20854;&#23450;&#20041;&#12290;&#22240;&#20026;&#23450;&#20041;&#22312;&#34892;&#20869;
&#23637;&#24320;&#65292;&#36825;&#19968;&#36716;&#25442;&#21483;&#20570;<span class="emph">&#20869;&#32852;</span> (<span class="emph">inlining</span>)&#12290;&#25105;&#20204;&#36824;&#35201;&#20869;&#32852; <span class="stt">apply-cont</span> &#30340;&#35843;&#29992;&#65292;
&#19981;&#20877;&#20889; <span class="stt">(apply-cont cont val)</span>&#65292;&#32780;&#26159;&#30452;&#25509;&#20889; <span class="stt">(cont val)</span>&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">pc</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg-n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">pc</span><span class="hspace">&nbsp;</span><span class="RktSym">fact/k</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">trampoline!</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">trampoline!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure?</span><span class="hspace">&nbsp;</span><span class="RktSym">pc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">trampoline!</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">pc</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">pc</span><span class="hspace">&nbsp;</span><span class="RktSym">fact/k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">continuation</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">pc</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">pc</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#23492;&#23384;&#21518;&#30340;&#36339;&#36291;&#24335; <span class="stt">fact/k</span>
<a name="(idx._(gentag._932))"></a><a name="(elem._fig-6..2)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._933))"></a>
&#22914;&#26524;&#25105;&#20204;&#25353;&#36825;&#31181;&#26041;&#24335;&#20869;&#32852;&#25152;&#26377;&#29992;&#21040;&#32493;&#25991;&#30340;&#22320;&#26041;&#65292;&#25105;&#20204;&#24471;&#21040;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact/k</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact/k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><span class="stt">fact/k</span> &#30340;&#23450;&#20041;&#21487;&#20197;&#35835;&#20316;&#65306;</p><blockquote><p><span class="emph">&#33509; <span class="texMathInline">n</span> &#20026; 0&#65292;&#23558; 1 &#20256;&#32473;&#32493;&#25991;&#65307;&#21542;&#21017;&#65292;&#27714; <span class="texMathInline">n-1</span> &#30340; <span class="stt">fact</span>&#65292;&#27714;&#20540;&#25152;&#22312;&#30340;&#32493;&#25991;&#65292;&#21462;
&#20854;&#32467;&#26524; <span class="stt">val</span>&#65292;&#28982;&#21518;&#23558; <span class="stt">(* </span><span class="texMathInline">n</span><span class="stt"> val)</span> &#30340;&#20540;&#20256;&#32473;&#24403;&#21069;&#32493;&#25991;&#12290;
</span></p></blockquote><p><a name="(idx._(gentag._934))"></a>
&#36807;&#31243; <span class="stt">fact/k</span> &#20855;&#26377;&#24615;&#36136; <span class="stt">(fact/k </span><span class="texMathInline">n</span><span class="stt"> </span><span class="texMathInline">g</span><span class="stt">) = (</span><span class="texMathInline">g</span><span class="stt"> </span><span class="texMathInline">n!</span><span class="stt">)</span>&#12290;&#23545; <span class="texMathInline">n</span>
&#20351;&#29992;&#24402;&#32435;&#27861;&#24456;&#23481;&#26131;&#35777;&#26126;&#36825;&#26465;&#24615;&#36136;&#12290;&#31532;&#19968;&#27493;&#65292;&#24403; <span class="texMathInline">n = 0</span>&#65292;&#25105;&#20204;&#35745;&#31639;&#65306;</p><blockquote class="SubFlow"><blockquote class="Small"><blockquote class="SCodeFlow"><p><span class="stt">(fact/k 0 </span><span class="texMathInline">g</span><span class="stt">) = (</span><span class="texMathInline">g</span><span class="stt"> 1) = (</span><span class="texMathInline">g</span><span class="stt"> (fact 0))</span></p></blockquote></blockquote><p>&#24402;&#32435;&#27493;&#39588;&#20013;&#65292;&#23545;&#26576;&#20010; <span class="texMathInline">n</span>&#65292;&#35774; <span class="stt">(fact/k </span><span class="texMathInline">n</span><span class="stt"> </span><span class="texMathInline">g</span><span class="stt">) = (</span><span class="texMathInline">g</span><span class="stt"> </span><span class="texMathInline">n!</span><span class="stt">)</span>&#65292;&#35797;&#35777;&#26126;
<span class="stt">(fact/k </span><span class="texMathInline">(n + 1)</span><span class="stt"> </span><span class="texMathInline">g</span><span class="stt">) = (</span><span class="texMathInline">g</span><span class="stt"> </span><span class="texMathInline">(n + 1)!</span><span class="stt">)</span>&#12290;&#35201;&#35777;&#26126;&#23427;&#65292;&#25105;&#20204;&#35745;&#31639;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(fact/k </span><span class="texMathInline">n + 1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">g</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (fact/k </span><span class="texMathInline">n</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(lambda (val) (</span><span class="texMathInline">g</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(* </span><span class="texMathInline">n + 1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">val))))</span></p></td></tr><tr><td><p><span class="stt">= ((lambda (val) (</span><span class="texMathInline">g</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(* </span><span class="texMathInline">n + 1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">val)))</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt"></span>&#65288;&#26681;&#25454;&#24402;&#32435;&#20551;&#35774;&#65289;<span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(fact </span><span class="texMathInline">n</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">= (</span><span class="texMathInline">g</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(* </span><span class="texMathInline">n + 1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(fact </span><span class="texMathInline">n</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt">= (</span><span class="texMathInline">g</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(fact </span><span class="texMathInline">n + 1</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#24402;&#32435;&#23436;&#27605;&#12290;</p></blockquote><p>&#20687;<a href="#%28part._s1..3%29" data-pltdoc="x">&#36741;&#21161;&#36807;&#31243;&#21644;&#19978;&#19979;&#25991;&#21442;&#25968;</a>&#19968;&#26679;&#65292;&#36825;&#37324;&#30340; <span class="texMathInline">g</span> &#26159;&#19978;&#19979;&#25991;&#21442;&#25968;&#65307;&#24615;&#36136; <span class="stt">(fact/k </span><span class="texMathInline">n</span><span class="stt"> </span><span class="texMathInline">g</span><span class="stt">) =</span><span class="stt">
</span><span class="stt">(</span><span class="texMathInline">g</span><span class="stt"> </span><span class="texMathInline">n!</span><span class="stt">)</span> &#20316;&#20026;&#29420;&#31435;&#35268;&#33539;&#65292;&#36981;&#24490;&#25105;&#20204;&#30340;&#21407;&#21017;<a href="#%28elem._no-myth%29" data-pltdoc="x"><span style="font-weight: bold">&#36991;&#20813;&#31070;&#31192;&#23567;&#24037;&#20855;</span></a>&#12290;
<a name="(idx._(gentag._935))"></a>
<a name="(idx._(gentag._936))"></a></p><p><a name="(idx._(gentag._937))"></a>
&#29616;&#22312;&#65292;&#25105;&#20204;&#29992;&#21516;&#26679;&#30340;&#26041;&#24335;&#36716;&#25442;&#35745;&#31639;&#26000;&#27874;&#37027;&#22865;&#25968;&#21015;&#30340; <span class="stt">fib</span>&#12290;&#25105;&#20204;&#20174;&#19979;&#38754;&#30340;&#36807;&#31243;&#24320;&#22987;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fib</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#25105;&#20204;&#20004;&#27425;&#36882;&#24402;&#35843;&#29992; <span class="stt">fib</span>&#65292;&#25152;&#20197;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010; <span class="stt">end-cont</span> &#21644;&#20004;&#20010;&#32493;&#25991;&#26500;&#36896;&#22120;&#65292;
&#20108;&#32773;&#21508;&#23545;&#24212;&#19968;&#20010;&#21442;&#25968;&#65292;&#23601;&#20687;&#22788;&#29702;<a href="#%28part._s5..1%29" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a>&#20013;&#30340;&#24046;&#20540;&#34920;&#36798;&#24335;&#37027;&#26679;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fib</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib/k</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">end-cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fib/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib/k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib1-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (end-cont) </span><span class="texMathInline">val</span><span class="stt">) = </span><span class="texMathInline">val</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (fib1-cont </span><span class="texMathInline">n</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (fib/k (- </span><span class="texMathInline">n</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">2) (fib2-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(apply-cont (fib2-cont </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">cont</span><span class="stt">) </span><span class="texMathInline">val2</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (apply-cont </span><span class="texMathInline">cont</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(+ </span><span class="texMathInline">val1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val2</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._938))"></a>
<a name="(idx._(gentag._939))"></a>
&#22312;&#36807;&#31243;&#34920;&#31034;&#27861;&#20013;&#65292;&#25105;&#20204;&#26377;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">end-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fib1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib/k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib2-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fib2-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#22914;&#26524;&#25105;&#20204;&#20869;&#32852;&#25152;&#26377;&#20351;&#29992;&#36825;&#20123;&#36807;&#31243;&#30340;&#22320;&#26041;&#65292;&#21487;&#24471;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fib</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib/k</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fib/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib/k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib/k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#31867;&#20284;&#38454;&#20056;&#65292;&#25105;&#20204;&#21487;&#20197;&#25226;&#36825;&#20010;&#23450;&#20041;&#35835;&#20316;&#65306;</p><blockquote><p><span class="emph">&#33509; <span class="texMathInline">n &lt; 2</span>&#65292;&#23558; 1 &#20256;&#32473;&#32493;&#25991;&#12290;&#21542;&#21017;&#65292;&#22788;&#29702; <span class="texMathInline">n-1</span>&#65292;&#27714;&#20540;&#25152;&#22312;&#30340;&#32493;&#25991;&#65292;&#21462;&#20854;&#32467;&#26524;
<span class="stt">val1</span>&#65292;&#28982;&#21518;&#22788;&#29702; <span class="stt">val2</span>&#65292;&#27714;&#20540;&#25152;&#22312;&#30340;&#32493;&#25991;&#65292;&#21462;&#20854;&#32467;&#26524; <span class="stt">val2</span>&#65292;&#28982;&#21518;&#23558; <span class="stt">(+
val1 val2)</span> &#30340;&#20540;&#20256;&#32473;&#24403;&#21069;&#32493;&#25991;&#12290;
<a name="(idx._(gentag._940))"></a></span></p></blockquote><p>&#29992;&#25512;&#23548; <span class="stt">fact</span> &#30340;&#26041;&#24335;&#65292;&#24456;&#23481;&#26131;&#24471;&#20986;&#65292;&#23545;&#20219;&#24847; <span class="texMathInline">g</span>&#65292;<span class="stt">(fib/k </span><span class="texMathInline">n</span><span class="stt"> </span><span class="texMathInline">g</span><span class="stt">) =</span><span class="stt">
</span><span class="stt">(</span><span class="texMathInline">g</span><span class="stt"> (fib </span><span class="texMathInline">n</span><span class="stt">))</span>&#12290;&#36825;&#37324;&#26377;&#20010;&#20551;&#24819;&#30340;&#20363;&#23376;&#65292;&#25512;&#24191;&#20102;&#36825;&#19968;&#24819;&#27861;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">17</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">33</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">h</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktVal">44</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#21464;&#25104;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktVal">17</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktVal">33</span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">h</span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktVal">44</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20854;&#20013;&#65292;&#36807;&#31243; <span class="stt">f</span>&#12289;<span class="stt">g</span> &#21644; <span class="stt">h</span> &#37117;&#20197;&#31867;&#20284;&#26041;&#24335;&#36716;&#25442;&#12290;</p><ul><li><p>&#22312; <span class="stt">(zero? x)</span> &#36825;&#19968;&#34892;&#65292;&#25105;&#20204;&#23558; 17 &#36820;&#22238;&#32473;&#32493;&#25991;&#12290;</p></li><li><p>&#22312; <span class="stt">(= x 1)</span> &#36825;&#19968;&#34892;&#65292;&#25105;&#20204;&#25353;&#23614;&#36882;&#24402;&#30340;&#26041;&#24335;&#35843;&#29992; <span class="stt">f</span>&#12290;</p></li><li><p>&#22312; <span class="stt">(= x 2)</span> &#36825;&#19968;&#34892;&#65292;&#25105;&#20204;&#22312;&#21152;&#27861;&#30340;&#25805;&#20316;&#25968;&#20301;&#32622;&#35843;&#29992; <span class="stt">f</span>&#12290;</p></li><li><p>&#22312; <span class="stt">(= x 3)</span> &#36825;&#19968;&#34892;&#65292;&#25105;&#20204;&#22312;&#36807;&#31243;&#35843;&#29992;&#30340;&#25805;&#20316;&#25968;&#20301;&#32622;&#35843;&#29992; <span class="stt">f</span>&#12290;</p></li><li><p>&#22312; <span class="stt">(= x 4)</span> &#36825;&#19968;&#34892;&#65292;&#26377;&#20004;&#20010;&#36807;&#31243;&#35843;&#29992;&#22312;&#21152;&#27861;&#30340;&#25805;&#20316;&#25968;&#20301;&#32622;&#12290;</p></li><li><p>&#22312; <span class="stt">else</span> &#36825;&#19968;&#34892;&#65292;&#26377;&#20004;&#20010;&#36807;&#31243;&#35843;&#29992;&#22312;&#21478;&#19968;&#20010;&#36807;&#31243;&#35843;&#29992;&#20869;&#30340;&#25805;&#20316;&#25968;&#20301;&#32622;&#12290;</p></li></ul></blockquote><p>&#20174;&#36825;&#20123;&#20363;&#23376;&#20013;&#28014;&#29616;&#20986;&#19968;&#31181;&#27169;&#24335;&#12290;</p><blockquote class="Tip"><blockquote class="SCentered"><p><a name="(elem._cps-recipe)"></a><span style="font-weight: bold">CPS &#31192;&#26041;</span>
<a name="(idx._(gentag._941))"></a>
<a name="(idx._(gentag._942))"></a></p></blockquote><blockquote class="TipContent"><p>&#35201;&#23558;&#31243;&#24207;&#36716;&#25442;&#20026;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#65306;</p><ol><li><p>&#32473;&#27599;&#20010;&#36807;&#31243;&#20256;&#19968;&#20010;&#39069;&#22806;&#21442;&#25968;&#65288;&#36890;&#24120;&#26159; <span class="stt">cont</span> &#25110; <span class="stt">k</span>&#65289;&#12290;</p></li><li><p>&#19981;&#35770;&#36807;&#31243;&#36820;&#22238;&#24120;&#37327;&#36824;&#26159;&#21464;&#37327;&#65292;&#37117;&#23558;&#36820;&#22238;&#20540;&#20256;&#32473;&#32493;&#25991;&#65292;&#23601;&#20687;&#19978;&#38754;&#30340; <span class="stt">(cont 17)</span>&#12290;</p></li><li><p>&#36807;&#31243;&#35843;&#29992;&#22312;&#23614;&#37096;&#26102;&#65292;&#29992;&#21516;&#26679;&#30340;&#32493;&#25991; <span class="stt">cont</span> &#35843;&#29992;&#36807;&#31243;&#12290;</p></li><li><p>&#36807;&#31243;&#35843;&#29992;&#22312;&#25805;&#20316;&#25968;&#20301;&#32622;&#26102;&#65292;&#22312;&#26032;&#30340;&#32493;&#25991;&#20013;&#27714;&#36807;&#31243;&#35843;&#29992;&#30340;&#20540;&#65292;&#36825;&#20010;&#32493;&#25991;&#32473;&#35843;&#29992;&#32467;&#26524;&#21629;
&#21517;&#65292;&#32487;&#32493;&#36827;&#34892;&#35745;&#31639;&#12290;</p></li></ol></blockquote></blockquote><p>&#36825;&#20123;&#35268;&#21017;&#34429;&#19981;&#27491;&#24335;&#65292;&#20294;&#36275;&#20197;&#35299;&#37322;&#36825;&#31181;&#27169;&#24335;&#12290;
<a name="(idx._(gentag._943))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex6..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32771;&#34385;&#65292;&#20026;&#20160;&#20040;&#31227;&#38500; <span class="stt">fact/k</span> &#23450;&#20041;&#20013;&#30340; <span class="stt">(set! pc fact/k)</span>
&#21644; <span class="stt">apply-cont</span> &#20013;&#23450;&#20041;&#30340; <span class="stt">(set! pc apply-cont)</span>&#65292;&#31243;&#24207;&#20173;&#33021;&#27491;&#24120;&#36816;&#34892;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..2)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#29992;&#24402;&#32435;&#27861;&#35777;&#26126;&#65306;&#23545;&#20219;&#24847; <span class="texMathInline">g</span>&#65292;<span class="stt">(fib/k </span><span class="texMathInline">n</span><span class="stt"> </span><span class="texMathInline">g</span><span class="stt">) = (</span><span class="texMathInline">g</span><span class="stt"> (fib </span><span class="texMathInline">n</span><span class="stt">))</span>&#65292;&#24402;&#32435;
&#21464;&#37327;&#20026; <span class="texMathInline">n</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..3)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25226;&#19979;&#38754;&#27599;&#20010; Scheme &#34920;&#36798;&#24335;&#37325;&#20889;&#20026;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#12290;&#20551;&#35774;&#25152;&#26377;&#26410;&#30693;&#20989;&#25968;&#37117;&#24050;&#32463;&#37325;&#20889;&#25104; CPS &#39118;
&#26684;&#12290;</p><ol><li><p><span class="stt">(lambda (x y) (p (+ 8 x) (q y)))</span></p></li><li><p><span class="stt">(lambda (x y u v) (+ 1 (f (g x y) (+ u v))))</span></p></li><li><p><span class="stt">(+ 1 (f (g x y) (+ u (h v))))</span></p></li><li><p><span class="stt">(zero? (if a (p x) (p y)))</span></p></li><li><p><span class="stt">(zero? (if (f a) (p x) (p y)))</span></p></li><li><p><span class="stt">(let ((x (let ((y 8)) (p y)))) x)</span></p></li><li><p><span class="stt">(let ((x (if a (p x) (p y)))) x)</span></p></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..4)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._944))"></a>
<a name="(idx._(gentag._945))"></a>
<a name="(idx._(gentag._946))"></a>
<a name="(idx._(gentag._947))"></a>
<a name="(idx._(gentag._948))"></a>
<a name="(idx._(gentag._949))"></a>
<a name="(idx._(gentag._950))"></a>
<a name="(idx._(gentag._951))"></a>
<a name="(idx._(gentag._952))"></a>
<a name="(idx._(gentag._953))"></a>
<a name="(idx._(gentag._954))"></a>
&#25226;&#19979;&#38754;&#30340;&#25152;&#26377;&#36807;&#31243;&#37325;&#20889;&#20026;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#12290;&#34920;&#31034;&#27599;&#20010;&#36807;&#31243;&#30340;&#32493;&#25991;&#26102;&#65292;&#20808;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#65292;&#28982;
&#21518;&#29992;&#36807;&#31243;&#34920;&#31034;&#27861;&#65292;&#28982;&#21518;&#29992;&#20869;&#32852;&#36807;&#31243;&#34920;&#31034;&#27861;&#12290;&#26368;&#21518;&#65292;&#20889;&#20986;&#23492;&#23384;&#29256;&#26412;&#12290;&#29031;<a href="#%28part._cpi%29" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a>&#37027;&#26679;&#23450;&#20041;
<span class="stt">end-cont</span>&#65292;&#39564;&#35777;&#20320;&#23454;&#29616;&#30340;&#36825;&#22235;&#20010;&#29256;&#26412;&#26159;&#23614;&#35843;&#29992;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-cont (end-cont) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(eopl:printf "&#35745;&#31639;&#32467;&#26463;.~%")</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(eopl:printf "&#36825;&#21477;&#35805;&#21482;&#33021;&#20986;&#29616;&#19968;&#27425;.~%")</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr></table></blockquote><ol><li><p><span class="stt">remove-first</span>&#65288;<a href="#%28elem._remove-first%29" data-pltdoc="x">1.2.3 &#33410;</a>&#65289;</p></li><li><p><span class="stt">list-sum</span>&#65288;<a href="#%28elem._list-sum%29" data-pltdoc="x">1.3 &#33410;</a>&#65289;</p></li><li><p><span class="stt">occurs-free?</span>&#65288;<a href="#%28elem._occurs-free-1~3f%29" data-pltdoc="x">1.2.4 &#33410;</a>&#65289;</p></li><li><p><span class="stt">subst</span>&#65288;<a href="#%28elem._subst%29" data-pltdoc="x">1.2.5 &#33410;</a>&#65289;
<a name="(idx._(gentag._955))"></a>
<a name="(idx._(gentag._956))"></a>
<a name="(idx._(gentag._957))"></a>
<a name="(idx._(gentag._958))"></a>
<a name="(idx._(gentag._959))"></a>
<a name="(idx._(gentag._960))"></a>
<a name="(idx._(gentag._961))"></a>
<a name="(idx._(gentag._962))"></a>
<a name="(idx._(gentag._963))"></a>
<a name="(idx._(gentag._964))"></a></p></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..5)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#24403;&#25105;&#20204;&#25226;&#34920;&#36798;&#24335;&#37325;&#20889;&#20026;CPS&#26102;&#65292;&#25105;&#20204;&#23601;&#20026;&#34920;&#36798;&#24335;&#20013;&#30340;&#36807;&#31243;&#36873;&#25321;&#20102;&#19968;&#31181;&#27714;&#20540;&#39034;&#24207;&#12290;&#25226;&#21069;&#38754;&#30340;&#27599;
&#20010;&#20363;&#23376;&#37325;&#20889;&#20026;CPS&#65292;&#19988;&#20351;&#36807;&#31243;&#35843;&#29992;&#20174;&#21491;&#21521;&#24038;&#27714;&#20540;&#12290;
<a name="(idx._(gentag._965))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..6)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312; <span class="stt">(lambda (x y) (+ (f (g x)) (h (j y))))</span> &#20013;&#65292;&#36807;&#31243;&#35843;&#29992;&#26377;&#22810;&#23569;&#31181;&#19981;&#21516;&#30340;&#27714;&#20540;&#39034;
&#24207;&#65311;&#23545;&#27599;&#31181;&#27714;&#20540;&#39034;&#24207;&#65292;&#20889;&#20986;&#23545;&#24212;&#30340; CPS &#34920;&#36798;&#24335;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..7)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._966))"></a>
<a name="(idx._(gentag._967))"></a>
<a name="(idx._(gentag._968))"></a>
<a name="(idx._(gentag._969))"></a>
&#20889;&#20986;&#12289;fig-5.5 &#21644; fig-5.6 &#20013;&#35299;&#37322;&#22120;&#30340;&#36807;
&#31243;&#34920;&#31034;&#21644;&#20869;&#32852;&#36807;&#31243;&#34920;&#31034;&#12290;
<a name="(idx._(gentag._970))"></a>
<a name="(idx._(gentag._971))"></a>
<a name="(idx._(gentag._972))"></a>
<a name="(idx._(gentag._973))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..8)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._974))"></a>
<a name="(idx._(gentag._975))"></a>
&#20889;&#20986;<a href="#%28part._s5..4%29" data-pltdoc="x">&#24322;&#24120;</a>&#35299;&#37322;&#22120;&#30340;&#36807;&#31243;&#34920;&#31034;&#21644;&#20869;&#32852;&#36807;&#31243;&#34920;&#31034;&#12290;&#36825;&#26497;&#23500;&#25361;&#25112;&#24615;&#65292;&#22240;&#20026;&#25105;&#20204;&#23454;&#38469;&#19978;&#26377;
&#20004;&#20010;&#35266;&#27979;&#22120;&#65292;<span class="stt">apply-cont</span> &#21644; <span class="stt">apply-handler</span>&#12290;&#25552;&#31034;&#65306;&#32771;&#34385;&#20462;&#25913;
cps-recipe&#30340;&#31192;&#26041;&#65292;&#32473;&#27599;&#20010;&#36807;&#31243;&#28155;&#21152;&#20004;&#20010;&#21442;&#25968;&#65292;&#19968;&#20010;&#34920;&#31034; <span class="stt">apply-cont</span> &#20013;
&#32493;&#25991;&#30340;&#34892;&#20026;&#65292;&#19968;&#20010;&#34920;&#31034; <span class="stt">apply-handler</span> &#20013;&#32493;&#25991;&#30340;&#34892;&#20026;&#12290;<br/>
<a name="(idx._(gentag._976))"></a>
<a name="(idx._(gentag._977))"></a></p></blockquote><p><a name="(idx._(gentag._978))"></a>
&#26377;&#26102;&#65292;&#25105;&#20204;&#33021;&#21457;&#29616;&#26356;&#24039;&#22937;&#30340;&#26041;&#24335;&#34920;&#31034;&#32493;&#25991;&#12290;&#25105;&#20204;&#37325;&#26032;&#32771;&#34385;&#29992;&#36807;&#31243;&#34920;&#31034;&#32493;&#25991;&#30340; <span class="stt">fact</span>&#12290;&#20854;
&#20013;&#65292;&#25105;&#20204;&#26377;&#20004;&#20010;&#32493;&#25991;&#26500;&#36896;&#22120;&#65292;&#20889;&#20316;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">end-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#22312;&#36825;&#20010;&#31995;&#32479;&#20013;&#65292;&#25152;&#26377;&#32493;&#25991;&#37117;&#29992;&#26576;&#20010;&#25968;&#20056;&#20197;&#21442;&#25968;&#12290;<span class="stt">end-cont</span> &#23558;&#20854;&#21442;&#25968;&#20056; 1&#65292;&#33509;
<span class="texMathInline">cont</span> &#23558;&#21442;&#25968;&#20056; <span class="texMathInline">k</span>&#65292;&#37027;&#20040; <span class="stt">(fact1 </span><span class="texMathInline">n</span><span class="stt"> </span><span class="texMathInline">cont</span><span class="stt">)</span> &#23558;&#20854;&#20540;&#20056; <span class="texMathInline">k * n</span>&#12290;</p><p>&#25152;&#20197;&#27599;&#20010;&#32493;&#25991;&#37117;&#24418;&#22914; <span class="stt">(lambda (val) (* </span><span class="texMathInline">k</span><span class="stt"> val))</span>&#12290;&#36825;&#24847;&#21619;&#30528;&#25105;&#20204;&#21487;&#20197;&#29992;&#27599;&#20010;&#32493;&#25991;
&#20165;&#26377;&#30340;&#33258;&#30001;&#21464;&#37327;&#8212;&#8212;&#25968;&#23383; <span class="texMathInline">k</span>&#8212;&#8212;&#34920;&#31034;&#23427;&#12290;&#29992;&#36825;&#31181;&#34920;&#31034;&#26041;&#24335;&#65292;&#25105;&#20204;&#26377;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">end-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact1-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#22914;&#26524;&#25105;&#20204;&#22312; <span class="stt">fact/k</span> &#30340;&#21407;&#22987;&#23450;&#20041;&#20013;&#20869;&#32852;&#36825;&#20123;&#36807;&#31243;&#65292;&#24182;&#20351;&#29992;&#24615;&#36136; <span class="stt">(* </span><span class="texMathInline">cont</span><span class="stt"> 1) =</span><span class="stt">
</span><span class="texMathInline">cont</span>&#65292;&#21487;&#24471;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact/k</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact/k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20294;&#26159;&#36825;&#21644; <span class="stt">fact-iter</span>&#65288;fact-iter&#65289;&#23436;&#20840;&#30456;&#21516;&#65281;&#25152;&#20197;&#25105;&#20204;&#26126;&#30333;&#20102;&#65292;
<a name="(idx._(gentag._979))"></a>&#32047;&#21152;&#22120;&#36890;&#24120;&#21482;&#26159;&#32493;&#25991;&#30340;&#19968;&#31181;&#34920;&#31034;&#26041;&#24335;&#12290;&#36825;&#20196;&#20154;&#21360;&#35937;&#28145;&#21051;&#12290;&#30456;&#24403;&#19968;
&#37096;&#20998;&#32463;&#20856;&#30340;&#31243;&#24207;&#20248;&#21270;&#38382;&#39064;&#21407;&#26469;&#26159;&#36825;&#19968;&#24605;&#24819;&#30340;&#29305;&#20363;&#12290;
<a name="(idx._(gentag._980))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex6..9)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20056;&#27861;&#30340;&#20160;&#20040;&#24615;&#36136;&#20351;&#36825;&#31181;&#31243;&#24207;&#20248;&#21270;&#25104;&#20026;&#21487;&#33021;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..10)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._981))"></a>
&#32473; <span class="stt">list-sum</span> &#35774;&#35745;&#19968;&#31181;&#31616;&#20415;&#30340;&#32493;&#25991;&#34920;&#31034;&#26041;&#24335;&#65292;&#23601;&#20687;&#19978;&#38754;&#30340; <span class="stt">fact/k</span> &#37027;&#26679;&#12290;</p></blockquote><h4 class="heading">6.2<tt>&nbsp;</tt><a name="(part._s6..2)"></a>&#23614;&#24335;<span class="button-group"><a href="#(part._s6..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._982))"></a>
<a name="(idx._(gentag._983))"></a>
&#35201;&#20889;&#20986;&#31243;&#24207;&#26469;&#20570;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#21464;&#25442;&#65292;&#25105;&#20204;&#38656;&#35201;&#25214;&#20986;&#36755;&#20837;&#21644;&#36755;&#20986;&#35821;&#35328;&#12290;&#25105;&#20204;&#36873;&#25321; LETREC &#20316;&#20026;
&#36755;&#20837;&#35821;&#35328;&#65292;&#24182;&#34917;&#20805;&#22810;&#21442;&#25968;&#36807;&#31243;&#21644;&#22810;&#22768;&#26126;&#30340; <span class="stt">letrec</span> &#34920;&#36798;&#24335;&#12290;
<a name="(idx._(gentag._984))"></a>
&#20854;&#35821;&#27861;&#22914; &#25152;&#31034;&#65292;&#25105;&#20204;&#31216;&#20043;&#20026; CPS-IN&#12290;&#20026;&#20102;&#21306;&#20998;&#36825;&#31181;&#35821;&#35328;&#21644;&#36755;&#20986;&#35821;&#35328;
&#30340;&#34920;&#36798;&#24335;&#65292;&#25105;&#20204;&#25226;&#36825;&#20123;&#21483;&#20570;<span class="emph">&#36755;&#20837;&#34920;&#36798;&#24335;</span> (<span class="emph">input expression</span>)&#12290;</p><p><a name="(idx._(gentag._985))"></a>
&#35201;&#23450;&#20041; CPS &#21464;&#25442;&#31639;&#27861;&#30340;&#21487;&#33021;&#36755;&#20986;&#65292;&#25105;&#20204;&#35201;&#25214;&#20986; CPI-IN &#30340;&#23376;&#38598;&#65292;&#22312;&#36825;&#20010;&#38598;&#21512;&#20013;&#65292;&#36807;&#31243;&#35843;&#29992;
&#19981;&#20135;&#29983;&#20219;&#20309;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;
<a name="(idx._(gentag._986))"></a></p><p>&#22238;&#24518;<a href="#%28part._cpi%29" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a>&#20013;&#30340;&#21407;&#21017;&#65306;</p><blockquote class="SubFlow"><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#19981;&#26159;&#36807;&#31243;&#35843;&#29992;&#65292;&#32780;&#26159;&#25805;&#20316;&#25968;&#30340;&#27714;&#20540;&#23548;&#33268;&#25511;&#21046;&#19978;&#19979;&#25991;&#25193;&#22823;&#12290;</span>
<a name="(idx._(gentag._987))"></a>
<a name="(idx._(gentag._988))"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._989))"></a>
&#37027;&#20040;&#65292;&#22312;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20013;&#65292;&#26159; <span class="stt">fact</span> &#30340;&#35843;&#29992;&#20301;&#32622;<span class="emph">&#20316;&#20026;&#25805;&#20316;&#25968;</span>&#23548;&#33268;&#20102;&#25511;&#21046;&#19978;&#19979;&#25991;&#30340;&#20135;&#29983;&#12290;&#30456;&#21453;&#65292;&#22312;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact-iter</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact-iter-acc</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fact-iter-acc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact-iter-acc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._990))"></a></div></p></blockquote><p><a name="(idx._(gentag._991))"></a>
&#20013;&#65292; &#36807;&#31243;&#35843;&#29992;&#37117;&#19981;&#22312;&#25805;&#20316;&#25968;&#20301;&#32622;&#12290;&#25105;&#20204;&#35828;&#36825;&#20123;&#35843;&#29992;&#22312;<span class="emph">&#23614;&#31471;</span> (<span class="emph">tail position</span>)&#65292;&#22240;
&#20026;&#23427;&#20204;&#30340;&#20540;&#23601;&#26159;&#25972;&#20010;&#35843;&#29992;&#30340;&#32467;&#26524;&#12290;&#25105;&#20204;&#31216;&#20043;&#20026;<span class="emph">&#23614;&#35843;&#29992;</span> (<span class="emph">tail call</span>)&#12290;</p></blockquote><blockquote class="EoplFigure"><p>[!ht]
<br/>
<span class="Iidentity">\begin{align*}\mathit{Program} &amp;::= \mathit{InpExp} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">a-program (exp1)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= \mathit{Number} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">const-exp (num)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= <span class="stt">(- </span><span class="Iidentity">\mathit{InpExp}</span><span class="stt"> , </span><span class="Iidentity">\mathit{InpExp}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">diff-exp (exp1 exp2)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= <span class="stt">(zero? </span><span class="Iidentity">\mathit{InpExp}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">zero?-exp (exp1)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= <span class="stt">if </span><span class="Iidentity">\mathit{InpExp}</span><span class="stt"> then </span><span class="Iidentity">\mathit{InpExp}</span><span class="stt"> else </span><span class="Iidentity">\mathit{InpExp}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">if-exp (exp1 exp2 exp3)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= \mathit{Identifier} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">var-exp (var)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= <span class="stt">let </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{InpExp}</span><span class="stt"> in </span><span class="Iidentity">\mathit{InpExp}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">let-exp (var exp1 body)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= <span class="stt">letrec </span><span class="Iidentity">\{\mathit{Identifier}\ }<span class="stt">(</span><span class="Iidentity">\{\mathit{Identifier}\}^{*(,)}</span><span class="stt">)</span> = <span class="Iidentity">\mathit{InpExp}\</span>^{*}</span><span class="stt"> in </span><span class="Iidentity">\mathit{InpExp}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">letrec-exp (p-names b-varss p-bodies letrec-body)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= <span class="stt">proc (</span><span class="Iidentity">\mathit{\{Identifier\}^{*(,)}}</span><span class="stt">) </span><span class="Iidentity">\mathit{InpExp}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">proc-exp (vars body)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{InpExp}</span><span class="stt"> </span><span class="Iidentity">\{\mathit{InpExp}\}^{*}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">call-exp (rator rands)</span>}\end{align*}</span></p><blockquote class="caption"><p>CPS-IN&#30340;&#35821;&#27861;
<a name="(idx._(gentag._992))"></a><a name="(elem._fig-6..3)"></a></p></blockquote></blockquote><p>&#20877;&#22238;&#24518;&#19968;&#19979;&#21407;&#21017;<span style="font-weight: bold">&#23614;&#35843;&#29992;&#19981;&#25193;&#22823;&#32493;&#25991;</span>&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#23614;&#35843;&#29992;&#19981;&#25193;&#22823;&#32493;&#25991;</span>
<a name="(idx._(gentag._993))"></a>
<a name="(idx._(gentag._994))"></a></p></blockquote><p class="TipContent">&#33509; <span class="texMathInline">exp_1</span> &#30340;&#20540;&#20316;&#20026; <span class="texMathInline">exp_2</span> &#30340;&#20540;&#36820;&#22238;&#65292;&#21017;
<span class="texMathInline">exp_1</span> &#21644;<span class="texMathInline">exp_2</span> &#24212;&#22312;&#21516;&#26679;&#30340;&#32493;&#25991;&#20013;&#25191;&#34892;&#12290;</p></blockquote><p>&#33509;&#25152;&#26377;&#36807;&#31243;&#35843;&#29992;&#21644;&#25152;&#26377;&#21253;&#21547;&#36807;&#31243;&#35843;&#29992;&#30340;&#23376;&#34920;&#36798;&#24335;&#37117;&#22312;&#23614;&#31471;&#65292;&#25105;&#20204;&#31216;&#19968;&#20010;&#34920;&#36798;&#24335;
&#20026;<span class="emph">&#23614;&#24335;</span> (<span class="emph">tail form</span>)&#12290;&#36825;&#20010;&#26465;&#20214;&#34920;&#26126;&#25152;&#26377;&#36807;&#31243;&#35843;&#29992;&#37117;&#19981;&#20250;&#20135;&#29983;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;</p><p>&#22240;&#27492;&#65292;&#22312; Scheme &#20013;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></blockquote><p>&#26159;&#23614;&#24335;&#65292;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">h</span><span class="hspace">&nbsp;</span><span class="RktSym">u</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20063;&#26159;&#23614;&#24335;&#65292;&#20294;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">+</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">37</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#19981;&#26159;&#12290;&#22240;&#20026; <span class="stt">if</span> &#34920;&#36798;&#24335;&#21253;&#21547;&#19968;&#20010;&#19981;&#22312;&#23614;&#31471;&#30340;&#36807;&#31243;&#35843;&#29992;&#12290;</p></blockquote><p>&#36890;&#24120;&#65292;&#35201;&#21028;&#23450;&#35821;&#35328;&#30340;&#23614;&#31471;&#65292;&#25105;&#20204;&#24517;&#39035;&#29702;&#35299;&#20854;&#21547;&#20041;&#12290;&#22788;&#20110;&#23614;&#31471;&#30340;&#23376;&#34920;&#36798;&#24335;&#20855;&#26377;&#22914;&#19979;&#24615;&#36136;&#65306;&#35813;&#34920;
&#36798;&#24335;&#27714;&#20540;&#21518;&#65292;&#20854;&#20540;&#38543;&#21363;&#25104;&#20026;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#19968;&#20010;&#34920;&#36798;&#24335;&#21487;&#33021;&#26377;&#22810;&#20010;&#23614;&#31471;&#12290;&#20363;&#22914;&#65292;<span class="stt">if</span>
&#34920;&#36798;&#24335;&#21487;&#33021;&#36873;&#25321;&#30495;&#20540;&#20998;&#25903;&#65292;&#20063;&#21487;&#33021;&#36873;&#25321;&#20551;&#20540;&#20998;&#25903;&#12290;&#23545;&#23614;&#31471;&#30340;&#23376;&#34920;&#36798;&#24335;&#65292;&#19981;&#38656;&#35201;&#20445;&#23384;&#20449;&#24687;&#65292;&#22240;
&#27492;&#20063;&#23601;&#19981;&#20250;&#20135;&#29983;&#25511;&#21046;&#19978;&#19979;&#25991;&#12290;</p><p>CPS-IN &#20013;&#30340;&#23614;&#31471;&#22914; &#25152;&#31034;&#12290;&#23614;&#31471;&#27599;&#20010;&#23376;&#34920;&#36798;&#24335;&#30340;&#20540;&#37117;&#21487;&#33021;&#25104;&#20026;&#25972;&#20010;&#34920;
&#36798;&#24335;&#30340;&#20540;&#12290;&#22312;&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#20013;&#65292;&#25805;&#20316;&#25968;&#20301;&#32622;&#30340;&#23376;&#34920;&#36798;&#24335;&#20250;&#20135;&#29983;&#26032;&#30340;&#32493;&#25991;&#12290;&#23614;&#31471;&#30340;&#23376;&#34920;&#36798;
&#24335;&#22312;&#21407;&#34920;&#36798;&#24335;&#30340;&#32493;&#25991;&#20013;&#27714;&#20540;&#65292;&#22914;tail-call-explain&#25152;&#36848;&#12290;
<a name="(idx._(gentag._995))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">zero?(</span><span class="texMathInline">O</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">-(</span><span class="texMathInline">O</span><span class="stt">,</span><span class="texMathInline">O</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">if </span><span class="texMathInline">O</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">then </span><span class="texMathInline">T</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">else </span><span class="texMathInline">T</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">let </span><span class="texMathInline">Var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">= </span><span class="texMathInline">O</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">in </span><span class="texMathInline">T</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">letrec </span><span class="texMathInline">\{Var \ <span class="stt">(</span>\{Var\}^{*(,)}<span class="stt">)</span> \ <span class="stt">=</span> \ T\}^{*}</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">in </span><span class="texMathInline">T</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">proc (</span><span class="texMathInline">\{Var\}^{*(,)}</span><span class="stt">) = </span><span class="texMathInline">T</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">(</span><span class="texMathInline">O</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">O</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">...</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">O</span><span class="stt">)</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>CPS-IN &#20013;&#30340;&#23614;&#31471;&#21644;&#25805;&#20316;&#25968;&#20301;&#32622;&#12290;&#23614;&#31471;&#35760;&#20026; <span class="texMathInline">T</span>&#12290;&#25805;&#20316;&#25968;&#20301;&#32622;
&#35760;&#20026; <span class="texMathInline">O</span>&#12290;<a name="(idx._(gentag._996))"></a><a name="(elem._fig-6..4)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._997))"></a>
&#25105;&#20204;&#26681;&#25454;&#36825;&#31181;&#21306;&#21035;&#35774;&#35745; CPS &#36716;&#25442;&#31639;&#27861;&#30340;&#30446;&#26631;&#35821;&#35328; CPS-OUT&#12290;&#36825;&#31181;&#35821;&#35328;&#30340;&#35821;&#27861;
&#22914; &#25152;&#31034;&#12290;&#36825;&#22871;&#35821;&#27861;&#23450;&#20041;&#20102; CPS-IN &#30340;&#23376;&#38598;&#65292;&#20294;&#30053;&#26377;&#19981;&#21516;&#12290;&#29983;&#25104;&#24335;&#30340;
&#21517;&#23383;&#24635;&#20197; <span class="stt">cps-</span> &#24320;&#22836;&#65292;&#36825;&#26679;&#23427;&#20204;&#19981;&#20250;&#19982; CPS-IN &#20013;&#29983;&#25104;&#24335;&#30340;&#21517;&#23383;&#28151;&#28102;&#12290;</p><p><a name="(idx._(gentag._998))"></a>
<a name="(idx._(gentag._999))"></a>
&#26032;&#30340;&#35821;&#27861;&#26377;&#20004;&#20010;&#38750;&#32456;&#32467;&#31526;&#65292;<span class="texMathInline">\mathit{SimpleExp}</span> &#21644; <span class="texMathInline">\mathit{TfExp}</span>&#12290;&#36825;&#31181;&#35774;&#35745;&#20013;&#65292;
<span class="texMathInline">\mathit{SimpleExp}</span> &#34920;&#36798;&#24335;&#19981;&#21253;&#21547;&#20219;&#20309;&#36807;&#31243;&#35843;&#29992;&#65292;<span class="texMathInline">\mathit{TfExp}</span> &#34920;&#36798;&#24335;&#19968;&#23450;&#26159;
&#23614;&#24335;&#12290;</p><p>&#22240;&#20026; <span class="texMathInline">\mathit{SimpleExp}</span> &#34920;&#36798;&#24335;&#19981;&#21253;&#21547;&#20219;&#20309;&#36807;&#31243;&#35843;&#29992;&#65292;&#23427;&#20204;&#22823;&#33268;&#21487;&#20197;&#30475;&#25104;&#21482;&#26377;&#19968;&#34892;&#30340;
&#31616;&#21333;&#20195;&#30721;&#65292;&#23545;&#25105;&#20204;&#26469;&#35828;&#65292;&#23427;&#20204;&#31616;&#21333;&#21040;&#19981;&#38656;&#20351;&#29992;&#25511;&#21046;&#22534;&#26632;&#12290;&#31616;&#21333;&#34920;&#36798;&#24335;&#21253;&#25324; <span class="stt">proc</span> &#34920;&#36798;
&#24335;&#65292;&#22240;&#20026; <span class="stt">proc</span> &#34920;&#36798;&#24335;&#30452;&#25509;&#36820;&#22238;&#19968;&#20010;&#36807;&#31243;&#20540;&#65292;&#20294;&#36807;&#31243;&#30340;&#20027;&#20307;&#24517;&#39035;&#26159;&#23614;&#24335;&#12290;
<a name="(idx._(gentag._1000))"></a></p><p>&#23614;&#34920;&#36798;&#24335;&#30340;&#20256;&#36882;&#32493;&#25991;&#35299;&#37322;&#22120;&#22914; &#25152;&#31034;&#12290;&#30001;&#20110;&#36825;&#31181;&#35821;&#35328;&#30340;&#36807;&#31243;&#21462;&#22810;&#20010;&#21442;
&#25968;&#65292;&#25105;&#20204;&#29992;ex2.10 &#20013;&#30340; <span class="stt">extend-env*</span> &#21019;&#24314;&#22810;&#20010;&#32465;&#23450;&#65292;&#24182;&#29992;&#31867;&#20284;&#26041;&#24335;
&#25193;&#23637; <span class="stt">extend-env-rec</span>&#65292;&#24471;&#21040; <span class="stt">extend-env-rec*</span>&#12290;</p><p>&#22312;&#36825;&#20010;&#35299;&#37322;&#22120;&#20013;&#65292;&#25152;&#26377;&#36882;&#24402;&#35843;&#29992;&#37117;&#22312;&#65288;Scheme &#30340;&#65289;&#23614;&#31471;&#65292;&#25152;&#20197;&#36816;&#34892;&#35299;&#37322;&#22120;&#19981;&#20250;&#22312; Scheme
&#20013;&#20135;&#29983;&#25511;&#21046;&#19978;&#19979;&#25991;&#65288;&#19981;&#20840;&#26159;&#36825;&#26679;&#65306;&#36807;&#31243;
<span class="stt">value-of-simple-exp</span>&#65288;ex6.11&#65289;&#20250;&#22312; Scheme &#20013;&#20135;&#29983;&#25511;&#21046;&#19978;&#19979;&#25991;&#65292;
&#20294;&#36825;&#21487;&#20197;&#36991;&#20813;&#65288;&#21442;&#35265;ex6.18&#65289;&#65289;&#12290;</p><p>&#26356;&#37325;&#35201;&#30340;&#26159;&#65292;&#35299;&#37322;&#22120;&#19981;&#20250;&#20135;&#29983;&#26032;&#30340;&#32493;&#25991;&#12290;&#36807;&#31243; <span class="stt">value-of/k</span> &#21462;&#19968;&#20010;&#32493;&#25991;&#21442;&#25968;&#65292;&#21407;&#23553;&#19981;
&#21160;&#22320;&#20256;&#32473;&#27599;&#20010;&#36882;&#24402;&#35843;&#29992;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#31227;&#38500;&#32493;&#25991;&#21442;&#25968;&#12290;</p><p>&#24403;&#28982;&#65292;&#27809;&#26377;&#36890;&#29992;&#30340;&#26041;&#24335;&#21028;&#26029;&#19968;&#20010;&#36807;&#31243;&#30340;&#25511;&#21046;&#34892;&#20026;&#26159;&#21542;&#26159;&#36845;&#20195;&#24335;&#30340;&#12290;&#32771;&#34385;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">strange-predicate?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fact-iter</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#21482;&#26377; <span class="stt">strange-predicate?</span> &#23545;&#25152;&#26377;&#36275;&#22815;&#22823;&#30340; <span class="stt">n</span> &#37117;&#36820;&#22238;&#20551;&#26102;&#65292;&#36825;&#20010;&#36807;&#31243;&#25165;&#26159;&#36845;&#20195;
&#24335;&#30340;&#12290;&#20294;&#21363;&#20351;&#33021;&#26597;&#30475; <span class="stt">strange-predicate?</span> &#30340;&#20195;&#30721;&#65292;&#20063;&#21487;&#33021;&#26080;&#27861;&#21028;&#26029;&#36825;&#19968;&#26465;&#20214;&#30340;&#30495;&#20551;&#12290;
&#22240;&#27492;&#65292;&#25105;&#20204;&#26368;&#22810;&#21482;&#33021;&#23492;&#24076;&#26395;&#20110;&#31243;&#24207;&#20013;&#30340;&#36807;&#31243;&#35843;&#29992;&#19981;&#20135;&#29983;&#25511;&#21046;&#19978;&#19979;&#25991;&#65292;&#32780;&#19981;&#35770;&#20854;&#26159;&#21542;&#25191;&#34892;&#12290;
<a name="(idx._(gentag._1001))"></a>
<a name="(idx._(gentag._1002))"></a></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara"><br/>
</div><div class="SIntrapara"><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Program} &amp;::= \mathit{TfExp} \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-a-program (exp1)</span>} \\[5pt]
\mathit{SimpleExp} &amp;::= \mathit{Number} \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-const-exp (num)</span>} \\[5pt]
\mathit{SimpleExp} &amp;::= \mathit{Identifier} \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-var-exp (var)</span>} \\[5pt]
\mathit{SimpleExp} &amp;::= <span class="stt">(- </span><span class="Iidentity">\mathit{SimpleExp}</span><span class="stt"> , </span><span class="Iidentity">\mathit{SimpleExp}</span><span class="stt">)</span> \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-diff-exp (simple1 simple2)</span>} \\[5pt]
\mathit{SimpleExp} &amp;::= <span class="stt">(zero? </span><span class="Iidentity">\mathit{SimpleExp}</span><span class="stt">)</span> \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-zero?-exp (simple1)</span>} \\[5pt]
\mathit{SimpleExp} &amp;::= <span class="stt">proc (</span><span class="Iidentity">\mathit{\{Identifier\}^{*(,)}}</span><span class="stt">) </span><span class="Iidentity">\mathit{TfExp}</span> \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-proc-exp (vars body)</span>} \\[5pt]
    \mathit{TfExp} &amp;::= <span class="Iidentity">\mathit{SimpleExp}</span> \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">simple-exp-&gt;exp (simple-exp1)</span>} \\[5pt]
   \mathit{TfExp} &amp;::= <span class="stt">let </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{SimpleExp}</span><span class="stt"> in </span><span class="Iidentity">\mathit{TfExp}</span> \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-let-exp (var simple1 body)</span>} \\[5pt]
    \mathit{TfExp} &amp;::= <span class="stt">letrec </span><span class="Iidentity">\{\mathit{Identifier}\ }<span class="stt">(</span><span class="Iidentity">\{\mathit{Identifier}\}^{*(,)}</span><span class="stt">)</span> = <span class="Iidentity">\mathit{TfExp}\</span>^{*}</span><span class="stt"> in </span><span class="Iidentity">\mathit{TfExp}</span> \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-letrec-exp (p-names b-varss p-bodies body)</span>} \\[5pt]
    \mathit{TfExp} &amp;::= <span class="stt">if </span><span class="Iidentity">\mathit{SimpleExp}</span><span class="stt"> then </span><span class="Iidentity">\mathit{TfExp}</span><span class="stt"> else </span><span class="Iidentity">\mathit{TfExp}</span> \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-if-exp (simple1 body1 body2)</span>} \\[5pt]
    \mathit{TfExp} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{SimpleExp}</span><span class="stt"> </span><span class="Iidentity">\{\mathit{SimpleExp}\}^{*}</span><span class="stt">)</span> \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">call-exp (rator rands)</span>}\end{align*}</span></p></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>CPS-OUT &#30340;&#35821;&#27861;
<a name="(idx._(gentag._1003))"></a><a name="(elem._fig-6..5)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1004))"></a></div></p></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of/k</span></span> : <span class="texMathInline">\mathit{TfExp} \times \mathit{Env} \times \mathit{Cont} \to \mathit{FinalAnswer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">tfexp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-exp-&gt;exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-letrec-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-names</span><span class="hspace">&nbsp;</span><span class="RktSym">b-varss</span><span class="hspace">&nbsp;</span><span class="RktSym">p-bodies</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec**</span><span class="hspace">&nbsp;</span><span class="RktSym">p-names</span><span class="hspace">&nbsp;</span><span class="RktSym">b-varss</span><span class="hspace">&nbsp;</span><span class="RktSym">p-bodies</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple1</span><span class="hspace">&nbsp;</span><span class="RktSym">body1</span><span class="hspace">&nbsp;</span><span class="RktSym">body2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;bool</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rands</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">rator-proc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-vals</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">rands</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-procedure/k</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-proc</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-vals</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure/k</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \times \mathit{Cont} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">args</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env*</span><span class="hspace">&nbsp;</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">args</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p>CPS-OUT &#20013;&#30340;&#23614;&#24335;&#35299;&#37322;&#22120;<a name="(elem._fig-6..6)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1005))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..11)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986; <span class="stt">value-of-simple-exp</span>&#65292;&#23436;&#25104; &#20013;&#30340;&#35299;&#37322;&#22120;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..12)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21028;&#26029;&#19979;&#21015;&#34920;&#36798;&#24335;&#26159;&#21542;&#26159;&#31616;&#21333;&#30340;&#12290;</p><ol><li><p><span class="stt">-((f -(x,1)),1)</span></p></li><li><p><span class="stt">(f -(-(x,y),1))</span></p></li><li><p><span class="stt">if zero?(x) then -(x,y) else -(-(x,y),1)</span></p></li><li><p><span class="stt">let x = proc (y) (y x) in -(x,3)</span></p></li><li><p><span class="stt">let f = proc (x) x in (f 3)</span></p></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..13)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#29992;&#19978;&#38754;cps-recipe&#30340; CPS &#31192;&#26041;&#65292;&#25226;&#19979;&#21015; CPS-IN &#34920;&#36798;&#24335;&#32763;&#35793;&#20026;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#12290;
&#29992; &#20013;&#30340;&#35299;&#37322;&#22120;&#36816;&#34892;&#36716;&#25442;&#21518;&#30340;&#31243;&#24207;&#65292;&#27979;&#35797;&#23427;&#20204;&#65292;&#30830;&#20445;&#21407;&#31243;&#24207;&#21644;&#36716;&#25442;&#21518;
&#30340;&#29256;&#26412;&#23545;&#25152;&#26377;&#36755;&#20837;&#37117;&#32473;&#20986;&#21516;&#26679;&#30340;&#32467;&#26524;&#12290;</p><ol><li><p><span class="stt">removeall</span>&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">removeall(n,s) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if null?(s)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">then emptylist</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else if number?(car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then if equal?(n,car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then (removeall n cdr(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else cons(car(s),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(removeall n cdr(s)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else cons((removeall n car(s)),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(removeall n cdr(s)))</span></p></td></tr></table></blockquote></li><li><p><span class="stt">occurs-in?</span>&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">occurs-in?(n,s) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if null?(s)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else if number?(car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then if equal?(n,car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else (occurs-in? n cdr(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if (occurs-in? n car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else (occurs-in? n cdr(s))</span></p></td></tr></table></blockquote></li><li><p><span class="stt">remfirst</span>&#12290;&#23427;&#20351;&#29992;&#21069;&#38754;&#20363;&#23376;&#20013;&#30340; <span class="stt">occurs-in?</span>&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">remfirst(n,s) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">loop(s) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if null?(s)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then emptylist</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if number?(car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then if equal?(n,car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then cdr(s)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else cons(car(s),(loop cdr(s)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if (occurs-in? n car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then cons((remfirst n car(s)),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">cdr(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else cons(car(s),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(remfirst n cdr(s)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">in (loop s)</span></p></td></tr></table></blockquote></li><li><p><span class="stt">depth</span>&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">depth(s) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if null?(s)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else if number?(car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then (depth cdr(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if less?(add1((depth car(s))),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(depth cdr(s)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then (depth cdr(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else add1((depth car(s)))</span></p></td></tr></table></blockquote></li><li><p><span class="stt">depth-with-let</span>&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">depth(s) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if null?(s)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else if number?(car(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then (depth cdr(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else let dfirst = add1((depth car(s)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">drest = (depth cdr(s))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in if less?(dfirst,drest)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then drest</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else dfirst</span></p></td></tr></table></blockquote></li><li><p><span class="stt">map</span>&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">map(f, l) = if null?(l)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then emptylist</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else cons((f car(l)),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(map f cdr(l)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">square(n) = *(n,n)</span></p></td></tr><tr><td><p><span class="stt">in (map square list(1,2,3,4,5))</span></p></td></tr></table></blockquote></li><li><p><span class="stt">fnlrgtn</span>&#12290;n-list &#31867;&#20284; s-list&#65288;s-list&#65289;&#65292;&#21482;&#19981;&#36807;&#20854;&#20013;&#30340;&#20803;&#32032;&#19981;
&#26159;&#31526;&#21495;&#65292;&#32780;&#26159;&#25968;&#23383;&#12290;<span class="stt">fnlrgtn</span> &#21462;&#19968; n-list&#65292;&#19968;&#20010;&#25968;&#23383; <span class="stt">n</span>&#65292;&#36820;&#22238;&#21015;&#34920;&#20013;&#65288;&#20174;&#24038;&#21521;
&#21491;&#25968;&#65289;&#31532;&#19968;&#20010;&#22823;&#20110; <span class="stt">n</span> &#30340;&#25968;&#23383;&#12290;&#19968;&#26086;&#25214;&#21040;&#32467;&#26524;&#65292;&#23601;&#19981;&#20877;&#26816;&#26597;&#21015;&#34920;&#20013;&#21097;&#20313;&#20803;&#32032;&#12290;&#20363;&#22914;&#65292;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(fnlrgtn list(1,list(3,list(2),7,list(9)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">6)</span></p></td></tr></table></blockquote><p>&#36820;&#22238; 7&#12290;</p></li><li><p><span class="stt">every</span>&#12290;&#36825;&#20010;&#36807;&#31243;&#21462;&#19968;&#35859;&#35789;&#65292;&#19968;&#20010;&#21015;&#34920;&#65292;&#24403;&#19988;&#20165;&#24403;&#35859;&#35789;&#23545;&#21015;&#34920;&#20013;&#25152;&#26377;&#20803;&#32032;&#37117;&#20026;
&#30495;&#26102;&#65292;&#36820;&#22238;&#30495;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">every(pred, l) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if null?(l)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else if (pred car(l))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then (every pred cdr(l))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else 0</span></p></td></tr><tr><td><p><span class="stt">in (every proc(n) greater?(n,5) list(6,7,8,9))</span></p></td></tr></table></blockquote></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..14)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#34917;&#20805; <span class="stt">value-of-program</span> &#21644; <span class="stt">apply-cont</span>&#65292;&#23436;&#25104; &#20013;&#30340;&#35299;&#37322;
&#22120;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..15)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#35266;&#23519;&#21069;&#19968;&#36947;&#32451;&#20064;&#20013;&#30340;&#35299;&#37322;&#22120;&#21487;&#30693;&#65292;<span class="stt">cont</span> &#21482;&#26377;&#19968;&#20010;&#20540;&#12290;&#26681;&#25454;&#36825;&#19968;&#35266;&#23519;&#23436;&#20840;&#31227;&#38500;
<span class="stt">cont</span> &#21442;&#25968;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..16)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1006))"></a>
&#23492;&#23384; &#20013;&#30340;&#35299;&#37322;&#22120;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..17)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1007))"></a>
&#25226; &#20013;&#30340;&#35299;&#37322;&#22120;&#36716;&#25442;&#20026;&#36339;&#36291;&#24335;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..18)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913; CPS-OUT &#30340;&#35821;&#27861;&#65292;&#25226;&#31616;&#21333; <span class="stt">diff-exp</span> &#21644; <span class="stt">zero?-exp</span> &#30340;&#21442;&#25968;&#38480;&#21046;&#20026;&#24120;&#37327;&#21644;&#21464;
&#37327;&#12290;&#36825;&#26679;&#65292;&#35821;&#35328;&#20013;&#30340; <span class="stt">value-of-simple-exp</span> &#23601;&#19981;&#24517;&#36882;&#24402;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..19)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986; Scheme &#36807;&#31243; <span class="stt">tail-form?</span>&#65292;&#23427;&#21462;&#19968; CPS-IN &#31243;&#24207;&#30340;&#35821;&#27861;&#26641;&#65292;&#35821;&#27861;
&#22914; &#25152;&#31034;&#65292;&#21028;&#26029;&#21516;&#19968;&#23383;&#31526;&#20018;&#26159;&#21542;&#26159; &#20013;&#35821;&#27861;&#23450;&#20041;
&#30340;&#23614;&#24335;&#12290;</p></blockquote><h4 class="heading">6.3<tt>&nbsp;</tt><a name="(part._s6..3)"></a>&#36716;&#25442;&#20026;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;<span class="button-group"><a href="#(part._s6..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1008))"></a>
<a name="(idx._(gentag._1009))"></a>
&#26412;&#33410;&#65292;&#25105;&#20204;&#24320;&#21457;&#31639;&#27861;&#65292;&#23558;&#20219;&#24847;&#31243;&#24207;&#20174; CPS-IN &#36716;&#25442;&#20026; CPS-OUT&#12290;</p><p>&#23601;&#20687;&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#19968;&#26679;&#65292;&#25105;&#20204;&#30340;&#32763;&#35793;&#22120;<span class="emph">&#36319;&#38543;&#35821;&#27861;</span>&#12290;&#20063;&#20687;&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;&#19968;&#26679;&#65292;
&#25105;&#20204;&#30340;&#32763;&#35793;&#22120;&#20877;&#21462;&#19968;&#20010;&#34920;&#31034;&#32493;&#25991;&#30340;&#21442;&#25968;&#12290;&#22810;&#20986;&#30340;&#36825;&#20010;&#21442;&#25968;&#26159;&#19968;&#20010;&#34920;&#31034;&#32493;&#25991;&#30340;&#31616;&#21333;&#34920;&#36798;&#24335;&#12290;</p><p>&#20687;&#20043;&#21069;&#37027;&#26679;&#65292;&#25105;&#20204;&#39318;&#20808;&#32473;&#20986;&#20363;&#23376;&#65292;&#28982;&#21518;&#25552;&#20986;&#35268;&#33539;&#65292;&#26368;&#21518;&#20889;&#20986;&#31243;&#24207;&#12290;
&#23637;&#31034;&#20102;&#19982;&#21069;&#19968;&#33410;&#31867;&#20284;&#30340; Scheme &#20363;&#23376;&#65292;&#21482;&#26159;&#26356;&#21152;&#35814;&#32454;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]
</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">17</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">37</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">33</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">h</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktVal">44</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></div></p><p>&#21464;&#25442;&#20026;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">k</span><span class="hspace">&nbsp;</span><span class="RktVal">17</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktVal">37</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">k</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktVal">33</span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">h</span><span class="hspace">&nbsp;</span><span class="RktSym">v1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktVal">44</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">v2</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="caption"><p>CPS &#21464;&#25442;&#31034;&#20363;&#65288;Scheme&#65289;<a name="(elem._fig-6..7)"></a></p></blockquote></blockquote><p>&#31532;&#19968;&#31181;&#24773;&#20917;&#26159;&#24120;&#37327;&#12290;&#24120;&#37327;&#30452;&#25509;&#20256;&#32473;&#32493;&#25991;&#65292;&#23601;&#20687;&#19978;&#38754; <span class="stt">(zero? x)</span> &#36825;&#19968;&#34892;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp </span><span class="texMathInline">n</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">K</span><span class="stt">) = (</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">n</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#20854;&#20013;&#65292;<span class="texMathInline">K</span> &#34920;&#31034;&#32493;&#25991;&#65292;&#26159;&#19968;&#20010; simple-exp&#12290;</p></blockquote><p>&#21516;&#26679;&#65292;&#21464;&#37327;&#30452;&#25509;&#20256;&#32473;&#32493;&#25991;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">K</span><span class="stt">) = (</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">var</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#24403;&#28982;&#65292;&#25105;&#20204;&#31639;&#27861;&#30340;&#36755;&#20837;&#36755;&#20986;&#37117;&#26159;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#25152;&#20197;&#25105;&#20204;&#24212;&#35813;&#29992;&#25277;&#35937;&#35821;&#27861;&#26500;&#36896;&#22120;&#65292;&#32780;&#19981;&#26159;&#20855;&#20307;
&#35821;&#27861;&#65292;&#23601;&#20687;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp (const-exp </span><span class="texMathInline">n</span><span class="stt">) </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (make-send-to-cont </span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(cps-const-exp </span><span class="texMathInline">n</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(cps-of-exp (var-exp </span><span class="texMathInline">var</span><span class="stt">) </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (make-send-to-cont </span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(cps-var-exp </span><span class="texMathInline">var</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#20854;&#20013;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">make-send-to-cont</span></span> : <span class="texMathInline">\mathit{SimpleExp} \times \mathit{SimpleExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">make-send-to-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">k-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-call-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">simple-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#38656;&#35201; <span class="stt">list</span>&#65292;&#22240;&#20026;&#22312; CPS-OUT &#20013;&#65292;&#27599;&#20010;&#35843;&#29992;&#34920;&#36798;&#24335;&#37117;&#21462;&#19968;&#20010;&#25805;&#20316;&#25968;&#21015;&#34920;&#12290;</p></blockquote><p>&#20294;&#26159;&#22312;&#35268;&#33539;&#20013;&#65292;&#25105;&#20204;&#20173;&#28982;&#20351;&#29992;&#20855;&#20307;&#35821;&#27861;&#65292;&#22240;&#20026;&#20855;&#20307;&#35821;&#27861;&#36890;&#24120;&#26356;&#23481;&#26131;&#35835;&#25026;&#12290;</p><p><a name="(idx._(gentag._1010))"></a>
<a name="(idx._(gentag._1011))"></a>
&#36807;&#31243;&#21602;&#65311;&#25105;&#20204;&#36716;&#25442; &#20013;&#37027;&#26679;&#30340; <span class="stt">(lambda (x) ...)</span> &#36807;&#31243;&#26102;&#65292;&#20026;&#20854;
&#26032;&#22686;&#19968;&#20010;&#21442;&#25968; <span class="stt">k</span>&#65292;&#28982;&#21518;&#36716;&#25442;&#20027;&#20307;&#65292;&#24182;&#23558;&#20027;&#20307;&#30340;&#20540;&#20256;&#32473;&#32493;&#25991; <span class="stt">k</span>&#12290;&#25105;&#20204;
&#22312; &#20013;&#27491;&#26159;&#36825;&#26679;&#20570;&#30340;&#12290;&#25152;&#20197;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">proc (</span><span class="texMathInline">var_1</span><span class="stt">, ..., </span><span class="texMathInline">var_n</span><span class="stt">) </span><span class="texMathInline">exp</span></p></td></tr></table></blockquote><p>&#21464;&#25104;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">proc (</span><span class="texMathInline">var_1</span><span class="stt">, ..., </span><span class="texMathInline">var_n</span><span class="stt">, k) (cps-of-exp </span><span class="texMathInline">exp</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">k)</span></p></td></tr></table></blockquote><p>&#23601;&#20687;&#22270;&#20013;&#37027;&#26679;&#12290;&#20294;&#26159;&#65292;&#36825;&#36824;&#27809;&#23436;&#12290;&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#29983;&#25104;&#20195;&#30721;&#65292;&#27714; <span class="stt">proc</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#24182;
&#23558;&#32467;&#26524;&#20256;&#32473;&#32493;&#25991; <span class="texMathInline">K</span>&#12290;&#25152;&#20197; <span class="stt">proc</span> &#34920;&#36798;&#24335;&#30340;&#23436;&#25972;&#35268;&#33539;&#20026;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;proc (</span><span class="texMathInline">var_1</span><span class="stt">, ..., </span><span class="texMathInline">var_n</span><span class="stt">) </span><span class="texMathInline">exp</span><span class="stt">&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">&lt;&lt;proc (</span><span class="texMathInline">var_1</span><span class="stt">, ..., </span><span class="texMathInline">var_n</span><span class="stt">, k) (cps-of-exp </span><span class="texMathInline">exp</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">k)&gt;&gt;)</span></p></td></tr></table></blockquote></blockquote><p>&#20854;&#20013;&#65292;<span class="stt">k</span> &#26159;&#26032;&#21464;&#37327;&#65292;<span class="texMathInline">K</span> &#34920;&#31034;&#32493;&#25991;&#65292;&#26159;&#20219;&#24847;&#31616;&#21333;&#34920;&#36798;&#24335;&#12290;</p><p><a name="(idx._(gentag._1012))"></a>
&#26377;&#25805;&#20316;&#25968;&#30340;&#34920;&#36798;&#24335;&#21602;&#65311;&#25105;&#20204;&#26242;&#26102;&#32473;&#35821;&#35328;&#28155;&#21152;&#20219;&#24847;&#22810;&#20010;&#25805;&#20316;&#25968;&#30340;&#27714;&#21644;&#34920;&#36798;&#24335;&#12290;&#35201;&#28155;&#21152;&#36825;&#31181;&#34920;&#36798;
&#24335;&#65292;&#25105;&#20204;&#32473; CPS-IN &#30340;&#35821;&#27861;&#28155;&#21152;&#29983;&#25104;&#24335;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{InpExp} &amp;::= <span class="stt">+(</span><span class="Iidentity">\mathit{\{InpExp\}^{*(,)}}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">sum-exp (exps)</span>}\end{align*}</span></p></blockquote><p>&#32473; CPS-OUT &#30340;&#35821;&#27861;&#28155;&#21152;&#29983;&#25104;&#24335;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{SimpleExp} &amp;::= <span class="stt">+(</span><span class="Iidentity">\mathit{\{SimpleExp\}^{*(,)}}</span><span class="stt">)</span> \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-sum-exp (simple-exps)</span>}\end{align*}</span></p></blockquote><p>&#36825;&#20010;&#26032;&#29983;&#25104;&#24335;&#20173;&#20445;&#25345;&#24615;&#36136;&#65306;&#31616;&#21333;&#34920;&#36798;&#24335;&#20869;&#19981;&#20250;&#20986;&#29616;&#36807;&#31243;&#35843;&#29992;&#12290;</p><p><span class="stt">(cps-of-exp </span><span class="texMathInline">\textnormal{\guillemotleft}</span><span class="stt">+(</span><span class="texMathInline">exp_1</span><span class="stt">, ...,</span><span class="stt">
</span><span class="texMathInline">exp_n</span><span class="stt">)</span><span class="texMathInline">\textnormal{\guillemotright}</span><span class="stt"> </span><span class="texMathInline">K</span><span class="stt">)</span> &#21487;&#33021;&#26159;&#20160;&#20040;&#21602;&#65311;&#21487;&#33021; <span class="texMathInline">exp_1</span>,
<span class="texMathInline">\dots</span>, <span class="texMathInline">exp_n</span> &#37117;&#26159;&#31616;&#21333;&#30340;&#65292;&#23601;&#20687; &#20013;&#30340; <span class="stt">(= x 2)</span>&#12290;&#37027;
&#20040;&#65292;&#25972;&#20010;&#34920;&#36798;&#24335;&#37117;&#26159;&#31616;&#21333;&#30340;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#23427;&#30340;&#20540;&#25509;&#20256;&#32473;&#32493;&#25991;&#12290;&#35774; <span class="texMathInline">simp</span> &#20026;&#19968;&#31616;&#21333;&#34920;&#36798;&#24335;&#65292;
&#37027;&#20040;&#26377;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;+(</span><span class="texMathInline">simp_1</span><span class="stt">, ..., </span><span class="texMathInline">simp_n</span><span class="stt">)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">&lt;&lt;+(</span><span class="texMathInline">simp_1</span><span class="stt">, ..., </span><span class="texMathInline">simp_n</span><span class="stt">)&gt;&gt;)</span></p></td></tr></table></blockquote><p>&#22914;&#26524;&#25805;&#20316;&#25968;&#19981;&#26159;&#31616;&#21333;&#30340;&#21602;&#65311;&#37027;&#20040;&#27714;&#20540;&#32493;&#25991;&#38656;&#35201;&#32473;&#20854;&#20540;&#21629;&#21517;&#65292;&#28982;&#21518;&#32487;&#32493;&#27714;&#21644;&#65292;&#23601;&#20687;&#19978;&#38754;
<span class="stt">(= x 3)</span> &#36825;&#34892;&#12290;&#20854;&#20013;&#30340;&#31532;&#20108;&#20010;&#26159;&#39318;&#20010;&#22797;&#26434;&#25805;&#20316;&#25968;&#12290;&#37027;&#20040;&#25105;&#20204;&#30340; CPS &#36716;&#25442;&#22120;&#24212;&#20855;&#26377;&#24615;&#36136;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;+(</span><span class="texMathInline">simp_1</span><span class="stt">, </span><span class="texMathInline">exp_2</span><span class="stt">, </span><span class="texMathInline">simp_3</span><span class="stt">, ..., </span><span class="texMathInline">simp_n</span><span class="stt">)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (</span><span class="texMathInline">var_2</span><span class="stt">) (</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">+(</span><span class="texMathInline">simp_1</span><span class="stt">, </span><span class="texMathInline">var_2</span><span class="stt">, </span><span class="texMathInline">simp_3</span><span class="stt">, ..., </span><span class="texMathInline">simp_n</span><span class="stt">))&gt;&gt;)</span></p></td></tr></table></blockquote><p>&#22914;&#26524; <span class="texMathInline">exp_2</span> &#21482;&#26159;&#19968;&#20010;&#36807;&#31243;&#35843;&#29992;&#65292;&#37027;&#20040;&#36755;&#20986;&#21644;&#22270;&#20013;&#30456;&#21516;&#12290;&#20294; <span class="texMathInline">exp_2</span> &#21487;&#33021;&#26356;&#22797;&#26434;&#65292;&#25152;
&#20197;&#25105;&#20204;&#36882;&#24402;&#35843;&#29992; <span class="stt">cps-of-exp</span> &#22788;&#29702; <span class="texMathInline">exp_2</span> &#21644;&#26356;&#22823;&#30340;&#32493;&#25991;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">proc (</span><span class="texMathInline">var_2</span><span class="stt">) (</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">+(</span><span class="texMathInline">simp_1</span><span class="stt">, </span><span class="texMathInline">var_2</span><span class="stt">, </span><span class="texMathInline">simp_3</span><span class="stt">, ..., </span><span class="texMathInline">simp_n</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#32780;&#27714;&#21644;&#34920;&#36798;&#24335;&#20013;&#65292;&#36824;&#26377;&#21478;&#19968;&#31181;&#22797;&#26434;&#25805;&#20316;&#25968;&#65292;&#23601;&#20687; <span class="stt">(= x 5)</span> &#36825;&#31181;&#12290;&#25152;&#20197;&#65292;&#19981;&#26159;&#30452;&#25509;&#20351;&#29992;
&#32493;&#25991;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">proc (</span><span class="texMathInline">var_2</span><span class="stt">) (</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">+(</span><span class="texMathInline">simp_1</span><span class="stt">, </span><span class="texMathInline">var_2</span><span class="stt">, ..., </span><span class="texMathInline">simp_n</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#36824;&#35201;&#36882;&#24402;&#22788;&#29702;&#26356;&#22823;&#30340;&#21442;&#25968;&#12290;&#25105;&#20204;&#21487;&#20197;&#25226;&#36825;&#26465;&#35268;&#21017;&#24635;&#32467;&#20026;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;+(</span><span class="texMathInline">simp_1</span><span class="stt">, </span><span class="texMathInline">exp_2</span><span class="stt">, </span><span class="texMathInline">exp_3</span><span class="stt">, ..., </span><span class="texMathInline">exp_n</span><span class="stt">)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (</span><span class="texMathInline">var_2</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;+(</span><span class="texMathInline">simp_1</span><span class="stt">, </span><span class="texMathInline">var_2</span><span class="stt">, </span><span class="texMathInline">exp_3</span><span class="stt">, ..., </span><span class="texMathInline">exp_n</span><span class="stt">))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr></table></blockquote></blockquote><p><span class="stt">cps-of-exp</span> &#30340;&#27599;&#20010;&#36882;&#24402;&#35843;&#29992;&#37117;&#20445;&#35777;&#20250;&#32456;&#27490;&#12290;&#31532;&#19968;&#20010;&#35843;&#29992;&#20250;&#32456;&#27490;&#26159;&#22240;&#20026; <span class="texMathInline">exp_2</span> &#27604;
&#21407;&#34920;&#36798;&#24335;&#23567;&#12290;&#31532;&#20108;&#20010;&#35843;&#29992;&#20250;&#32456;&#27490;&#26159;&#36824;&#26159;&#22240;&#20026;&#20854;&#21442;&#25968;&#20063;&#27604;&#21407;&#26469;&#30340;&#23567;&#65306;<span class="texMathInline">var_2</span> &#24635;&#26159;&#27604;
<span class="texMathInline">exp_2</span> &#23567;&#12290;</p><p>&#20363;&#22914;&#65292;&#26597;&#30475; <span class="stt">(= x 5)</span> &#36825;&#19968;&#34892;&#65292;&#24182;&#20351;&#29992; CPS-IN &#30340;&#35821;&#27861;&#65292;&#25105;&#20204;&#26377;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;+((f x), 33, (g y))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp &lt;&lt;(f x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (</span><span class="texMathInline">v1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;+(v1, 33, (g y))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)&gt;&gt;)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp &lt;&lt;(f x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (</span><span class="texMathInline">v1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(g y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc </span><span class="texMathInline">v2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;+(v1, 33, v2)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp &lt;&lt;(f x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (</span><span class="texMathInline">v1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(g y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc </span><span class="texMathInline">v2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">&lt;&lt;+(v1, 33, v2)&gt;&gt;)))</span></p></td></tr><tr><td><p><span class="stt">= (f x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(g y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">&lt;&lt;+(v1, 33, v2)&gt;&gt;)))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._1013))"></a>
&#36807;&#31243;&#35843;&#29992;&#19982;&#20043;&#31867;&#20284;&#12290;&#22914;&#26524;&#25805;&#20316;&#31526;&#21644;&#25805;&#20316;&#25968;&#37117;&#26159;&#31616;&#21333;&#30340;&#65292;&#37027;&#20040;&#25105;&#20204;&#28155;&#21152;&#32493;&#25991;&#21442;&#25968;&#65292;&#30452;&#25509;&#35843;&#29992;&#36807;
&#31243;&#65292;&#23601;&#20687; <span class="stt">(= x 2)</span> &#36825;&#34892;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;(</span><span class="texMathInline">simp_0</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">simp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">... </span><span class="texMathInline">simp_n</span><span class="stt">)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (</span><span class="texMathInline">simp_0</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">simp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">... </span><span class="texMathInline">simp_n</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#21478;&#19968;&#26041;&#38754;&#65292;&#22914;&#26524;&#26576;&#20010;&#25805;&#20316;&#25968;&#26159;&#22797;&#26434;&#30340;&#65292;&#37027;&#20040;&#25105;&#20204;&#24517;&#39035;&#20808;&#27714;&#23427;&#30340;&#20540;&#65292;&#20687; <span class="stt">(= x 4)</span> &#36825;&#34892;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;(</span><span class="texMathInline">simp_0</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">simp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">... </span><span class="texMathInline">exp_n</span><span class="stt">)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (</span><span class="texMathInline">var_2</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(</span><span class="texMathInline">simp_0</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">simp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">var_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">... </span><span class="texMathInline">exp_n</span><span class="stt">)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)&gt;&gt;)</span></p></td></tr></table></blockquote><p>&#32780;&#19988;&#65292;&#20687;&#20043;&#21069;&#37027;&#26679;&#65292;<span class="stt">cps-of-exp</span> &#30340;&#31532;&#20108;&#20010;&#35843;&#29992;&#36882;&#24402;&#36827;&#20837;&#36807;&#31243;&#35843;&#29992;&#20043;&#20013;&#65292;&#20026;&#27599;&#20010;&#22797;&#26434;&#21442;
&#25968;&#35843;&#29992; <span class="stt">cps-of-exp</span>&#65292;&#30452;&#21040;&#25152;&#26377;&#21442;&#25968;&#37117;&#26159;&#31616;&#21333;&#21442;&#25968;&#12290;</p><p>&#20889;&#25104; CPS-IN &#30340;&#20363;&#23376; <span class="stt">(= x 5)</span> &#21487;&#29992;&#36825;&#20123;&#35268;&#21017;&#22788;&#29702;&#22914;&#19979;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;(h (f x) -(44,y) (g y))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp &lt;&lt;(f x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(h v1 -(44,y) (g y))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)&gt;&gt;)</span></p></td></tr><tr><td><p><span class="stt">= (f x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(h v1 -(44,y) (g y))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">= (f x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(g y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(h v1 -(44,y) v2)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt">= (f x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(g y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(h v1 -(44,y) v2)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt">= (f x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(g y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(h v1 -(44,y) v2 </span><span class="texMathInline">K</span><span class="stt">)))</span></p></td></tr></table></blockquote><p>&#27714;&#21644;&#34920;&#36798;&#24335;&#21644;&#36807;&#31243;&#35843;&#29992;&#30340;&#35268;&#33539;&#36981;&#24490;&#21516;&#26679;&#30340;&#27169;&#24335;&#65306;&#25214;&#20986;&#31532;&#19968;&#20010;&#22797;&#26434;&#25805;&#20316;&#25968;&#65292;&#36882;&#24402;&#22788;&#29702;&#37027;&#20010;&#25805;&#20316;
&#25968;&#21644;&#20462;&#25913;&#36807;&#30340;&#25805;&#20316;&#25968;&#21015;&#34920;&#12290;&#36825;&#23545;&#20219;&#20309;&#27714;&#20540;&#25805;&#20316;&#25968;&#30340;&#34920;&#36798;&#24335;&#37117;&#26377;&#25928;&#12290;&#22914;&#26524; <span class="stt">complex-exp</span>
&#26159;&#26576;&#20010;&#38656;&#35201;&#27714;&#20540;&#25805;&#20316;&#25968;&#30340; CPS-IN &#34920;&#36798;&#24335;&#65292;&#37027;&#20040;&#25105;&#20204;&#26377;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp (complex-exp </span><span class="texMathInline">simp_0</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">simp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">... </span><span class="texMathInline">exp_n</span><span class="stt">) </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (</span><span class="texMathInline">var_2</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(complex-exp </span><span class="texMathInline">simp_0</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">simp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">... </span><span class="texMathInline">exp_n</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">K</span><span class="stt">)&gt;&gt;)</span></p></td></tr></table></blockquote><p>&#20854;&#20013;&#65292;<span class="texMathInline">var_2</span> &#26159;&#19968;&#20010;&#26032;&#21464;&#37327;&#12290;</p></blockquote><p>&#22788;&#29702;&#27714;&#21644;&#34920;&#36798;&#24335;&#21644;&#36807;&#31243;&#35843;&#29992;&#30340;&#21807;&#19968;&#19981;&#21516;&#20043;&#22788;&#26159;&#22312;&#25152;&#26377;&#21442;&#25968;&#37117;&#31616;&#21333;&#26102;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#35201;
&#25226;&#27599;&#20010;&#21442;&#25968;&#36716;&#25442;&#20026; CPS-OUT &#20013;&#30340; <span class="stt">simple-exp</span>&#65292;&#24182;&#29992;&#36716;&#25442;&#32467;&#26524;&#29983;&#25104;&#19968;&#20010;&#23614;&#24335;&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#25226;&#36825;&#31181;&#34892;&#20026;&#23553;&#35013;&#21040;&#36807;&#31243; <span class="stt">cps-of-exps</span> &#20013;&#65292;&#22914; &#25152;&#31034;&#12290;
&#23427;&#30340;&#21442;&#25968;&#26159;&#36755;&#20837;&#34920;&#36798;&#24335;&#30340;&#21015;&#34920;&#21644;&#36807;&#31243; <span class="stt">builder</span>&#12290;&#23427;&#29992;ex1.23 &#20013;&#30340;
<span class="stt">list-index</span>&#65292;&#25214;&#20986;&#21015;&#34920;&#20013;&#31532;&#19968;&#20010;&#22797;&#26434;&#34920;&#36798;&#24335;&#30340;&#20301;&#32622;&#12290;&#22914;&#26524;&#26377;&#36825;&#26679;&#30340;&#22797;&#26434;&#34920;&#36798;&#24335;&#65292;&#37027;&#20040;
&#23427;&#36716;&#25442;&#35813;&#34920;&#36798;&#24335;&#65292;&#36716;&#25442;&#25152;&#22312;&#30340;&#32493;&#25991;&#32473;&#34920;&#36798;&#24335;&#30340;&#32467;&#26524;&#21629;&#21517;&#65288;&#32465;&#23450;&#21040; <span class="stt">var</span> &#30340;&#26631;&#35782;&#31526;&#65289;&#65292;&#28982;
&#21518;&#36882;&#24402;&#22788;&#29702;&#20462;&#25913;&#21518;&#30340;&#34920;&#36798;&#24335;&#21015;&#34920;&#12290;</p><p>&#22914;&#26524;&#19981;&#23384;&#22312;&#22797;&#26434;&#34920;&#36798;&#24335;&#65292;&#37027;&#20040;&#25105;&#20204;&#29992; <span class="stt">builder</span> &#22788;&#29702;&#34920;&#36798;&#24335;&#21015;&#34920;&#12290;&#20294;&#36825;&#20123;&#34920;&#36798;&#24335;&#34429;&#26159;&#31616;
&#21333;&#30340;&#65292;&#23427;&#20204;&#20173;&#23646;&#20110; CPS-IN &#30340;&#35821;&#27861;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#29992;&#36807;&#31243; <span class="stt">cps-of-simple-exp</span> &#25226;&#27599;&#20010;&#34920;
&#36798;&#24335;&#36716;&#25442;&#20026; CPS-OUT &#30340;&#35821;&#27861;&#12290;&#28982;&#21518;&#65292;&#25105;&#20204;&#25226; <span class="texMathInline">\mathit{SimpleExp}</span> &#30340;&#21015;&#34920;&#20256;&#32473;
<span class="stt">builder</span>&#65288;<span class="stt">list-set</span> &#22914;ex1.19 &#25152;&#36848;&#65289;&#12290;</p><p>&#36807;&#31243; <span class="stt">inp-exp-simple?</span> &#21462;&#19968; CPS-IN &#34920;&#36798;&#24335;&#65292;&#21028;&#26029;&#34920;&#31034;&#23427;&#30340;&#23383;&#31526;&#20018;&#33021;&#21542;&#35299;&#26512;&#20026;
<span class="texMathInline">\mathit{SimpleExp}</span>&#12290;&#23427;&#20351;&#29992;ex1.24 &#20013;&#30340;&#36807;&#31243; <span class="stt">every?</span>&#12290;&#33509;
<span class="texMathInline">lst</span> &#20013;&#30340;&#25152;&#26377;&#20803;&#32032;&#28385;&#36275; <span class="texMathInline">pred</span>&#65292;<span class="stt">(every? </span><span class="texMathInline">pred</span><span class="stt"> </span><span class="texMathInline">lst</span><span class="stt">)</span> &#36820;&#22238; <span class="stt">#t</span>&#65292;
&#21542;&#21017;&#36820;&#22238;<span class="stt">#f</span>&#12290;</p><p><span class="stt">cps-of-simple-exp</span> &#30340;&#20195;&#30721;&#30452;&#25130;&#20102;&#24403;&#65292;&#22914; &#25152;&#31034;&#12290;&#23427;&#36824;&#23558;
<span class="stt">proc-exp</span> &#30340;&#20027;&#20307;&#32763;&#35793;&#20570; CPS &#21464;&#25442;&#12290;&#33509;&#35201;&#20351;&#36755;&#20986;&#20026; <span class="texMathInline">\mathit{SimpleExp}</span>&#65292;&#36825;&#26159;&#24517;
&#35201;&#30340;&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#29992; <span class="stt">cps-of-exps</span> &#29983;&#25104;&#27714;&#21644;&#34920;&#36798;&#24335;&#21644;&#36807;&#31243;&#35843;&#29992;&#30340;&#23614;&#24335;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">cps-of-exps</span></span> : <span class="texMathInline">\mathit{Listof(InpExp)} \times \mathit{(Listof(InpExp) \to TfExp)} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-exps</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="hspace">&nbsp;</span><span class="RktSym">builder</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-rest</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-weight: bold"><span class="stt">cps-of-rest</span></span> : <span class="texMathInline">\mathit{Listof(InpExp)} \to \mathit{TfExp}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">pos</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-index</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inp-exp-simple?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktSym">pos</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">builder</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh-identifier</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="hspace">&nbsp;</span><span class="RktSym">pos</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-rest</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-set</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="hspace">&nbsp;</span><span class="RktSym">pos</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">inp-exp-simple?</span></span> : <span class="texMathInline">\mathit{InpExp} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">inp-exp-simple?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inp-exp-simple?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inp-exp-simple?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inp-exp-simple?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ids</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">every?</span><span class="hspace">&nbsp;</span><span class="RktSym">inp-exp-simple?</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p><span class="stt">cps-of-exps</span><a name="(elem._fig-6..8)"></a></p></blockquote></blockquote><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">cps-of-sum-exp</span></span> : <span class="texMathInline">\mathit{Listof(InpExp)} \times \mathit{SimpleExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-sum-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-send-to-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">k-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-sum-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">cps-of-simple-exp</span></span> : <span class="texMathInline">\mathit{InpExp} \to \mathit{SimpleExp}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">&#35774; (inp-exp-simple? exp) = #f</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-simple-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-const-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-var-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ids</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">ids</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">k%00</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">k%00</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-sum-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-exp-to-cps-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p><span class="stt">cps-of-simple-exp</span><a name="(elem._fig-6..9)"></a></p></blockquote></blockquote><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">cps-of-call-exp</span></span> : <span class="texMathInline">\mathit{InpExp} \times \mathit{Listof(InpExp)} \times \mathit{SimpleExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-call-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rands</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rands</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-call-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1014))"></a>
<a name="(idx._(gentag._1015))"></a></div></p></blockquote><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986; CPS &#32763;&#35793;&#22120;&#30340;&#21097;&#20313;&#37096;&#20998;
&#65288;&ndash;fig-6.12&#65289;&#12290;&#23427;<span class="emph">&#36319;&#38543;&#35821;&#27861;</span>&#12290;&#24403;&#34920;&#36798;&#24335;&#24635;&#26159;
&#31616;&#21333;&#30340;&#65292;&#22914;&#24120;&#37327;&#12289;&#21464;&#37327;&#21644;&#36807;&#31243;&#65292;&#25105;&#20204;&#30452;&#25509;&#29992; <span class="stt">make-send-to-cont</span> &#29983;&#25104;&#20195;&#30721;&#12290;&#21542;&#21017;&#65292;&#25105;
&#20204;&#35843;&#29992;&#36741;&#21161;&#36807;&#31243;&#65292;&#27599;&#20010;&#36741;&#21161;&#36807;&#31243;&#37117;&#35843;&#29992; <span class="stt">cps-of-exps</span> &#27714;&#23376;&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#29992;&#36866;&#24403;&#30340;&#29983;&#25104;
&#22120;&#26500;&#36896; CPS &#36755;&#20986;&#30340;&#26368;&#20869;&#37096;&#12290;&#19968;&#20010;&#20363;&#22806;&#26159; <span class="stt">cps-of-letrec-exp</span>&#65292;&#23427;&#27809;&#26377;&#32039;&#37051;&#30340;&#23376;&#34920;&#36798;&#24335;&#65292;
&#25152;&#20197;&#23427;&#30452;&#25509;&#29983;&#25104; CPS &#36755;&#20986;&#12290;&#26368;&#21518;&#65292;&#25105;&#20204;&#35843;&#29992; <span class="stt">cps-of-exps</span> &#32763;&#35793;&#25972;&#20010;&#31243;&#24207;&#65292;&#23427;&#21462;&#19968;&#29983;
&#25104;&#22120;&#65292;&#35813;&#29983;&#25104;&#22120;&#30452;&#25509;&#36820;&#22238;&#19968;&#20010;&#31616;&#21333;&#34920;&#36798;&#24335;&#12290;
<a name="(idx._(gentag._1016))"></a></p><p>&#22312;&#19979;&#38754;&#30340;&#32451;&#20064;&#20013;&#65292;&#29992; CPS-OUT &#30340;&#35821;&#27861;&#21644;&#35299;&#37322;&#22120;&#36816;&#34892;&#36755;&#20986;&#34920;&#36798;&#24335;&#65292;&#30830;&#20445;&#23427;&#20204;&#26159;&#23614;&#24335;&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">cps-of-exp</span></span> : <span class="texMathInline">\mathit{InpExp} \times \mathit{SimpleExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-send-to-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-const-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-send-to-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-var-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-send-to-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">k%00</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">k%00</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-diff-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-sum-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-if-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-let-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letrec-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-names</span><span class="hspace">&nbsp;</span><span class="RktSym">b-varss</span><span class="hspace">&nbsp;</span><span class="RktSym">p-bodies</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-letrec-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">p-names</span><span class="hspace">&nbsp;</span><span class="RktSym">b-varss</span><span class="hspace">&nbsp;</span><span class="RktSym">p-bodies</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rands</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-call-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rands</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">cps-of-zero?-exp</span></span> : <span class="texMathInline">\mathit{InpExp} \times \mathit{SimpleExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-zero?-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-send-to-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">k-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-zero?-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p><span class="stt">cps-of-exp</span>&#65292;&#31532;1&#37096;&#20998;
<a name="(idx._(gentag._1017))"></a>
<a name="(idx._(gentag._1018))"></a><a name="(elem._fig-6..10)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">cps-of-diff-exp</span></span> : <span class="texMathInline">\mathit{InpExp} \times \mathit{InpExp} \times \mathit{SimpleExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-send-to-cont</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">k-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">cps-of-if-exp</span></span> : <span class="texMathInline">\mathit{InpExp} \times \mathit{InpExp} \times \mathit{SimpleExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-if-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">cps-of-let-exp</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{InpExp} \times \mathit{InpExp} \times \mathit{SimpleExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktSym">rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">rhs</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">cps-of-letrec-exp</span></span> : <br/> <span class="texMathInline">\phantom{x}\mathit{Listof(Var)} \times \mathit{Listof(Listof(Var))} \times \mathit{Listof(InpExp)} \times \mathit{InpExp} \times \mathit{SimpleExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-letrec-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-names</span><span class="hspace">&nbsp;</span><span class="RktSym">b-varss</span><span class="hspace">&nbsp;</span><span class="RktSym">p-bodies</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-letrec-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">p-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">b-vars</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">b-vars</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">k%00</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">b-varss</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">k%00</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">p-bodies</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p><span class="stt">cps-of-exp</span>&#65292;&#31532;2&#37096;&#20998;<a name="(elem._fig-6..11)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">cps-of-program</span></span> : <span class="texMathInline">\mathit{InpExp} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-a-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">new-args</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-exp-&gt;exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">new-args</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p><span class="stt">cps-of-exp</span>&#65292;&#31532;3&#37096;&#20998;
<a name="(idx._(gentag._1019))"></a>
<a name="(idx._(gentag._1020))"></a><a name="(elem._fig-6..12)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1021))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex6..20)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1022))"></a>
<a name="(idx._(gentag._1023))"></a>
&#25105;&#20204;&#30340;&#36807;&#31243; <span class="stt">cps-of-exps</span> &#36843;&#20351;&#23376;&#34920;&#36798;&#24335;&#25353;&#20174;&#24038;&#21521;&#21491;&#30340;&#39034;&#24207;&#27714;&#20540;&#12290;&#20462;&#25913;
<span class="stt">cps-of-exps</span>&#65292;&#20351;&#23376;&#34920;&#36798;&#24335;&#20174;&#21491;&#21521;&#24038;&#27714;&#20540;&#12290;
<a name="(idx._(gentag._1024))"></a>
<a name="(idx._(gentag._1025))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..21)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913; <span class="stt">cps-of-call-exp</span>&#65292;&#20808;&#20174;&#24038;&#21521;&#21491;&#27714;&#20986;&#25805;&#20316;&#25968;&#30340;&#20540;&#65292;&#20877;&#27714;&#25805;&#20316;&#31526;&#30340;&#20540;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..22)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#26377;&#26102;&#65292;&#24403;&#25105;&#20204;&#29983;&#25104; <span class="stt">(</span><span class="texMathInline">K</span><span class="stt"> </span><span class="texMathInline">simp</span><span class="stt">)</span>&#65292;<span class="texMathInline">K</span> &#24050;&#32463;&#26159;&#19968;&#20010; <span class="stt">proc-exp</span>&#12290;&#25152;&#20197;&#65292;&#19981;
&#26159;&#29983;&#25104;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(proc (</span><span class="texMathInline">var_1</span><span class="stt">) ... </span><span class="texMathInline">simp</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#32780;&#24212;&#29983;&#25104;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let </span><span class="texMathInline">var_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">= </span><span class="texMathInline">simp</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">in ...</span></p></td></tr></table></blockquote><p>&#37027;&#20040;&#65292;CPS &#20195;&#30721;&#20855;&#26377;&#24615;&#36136;&#65306;&#24418;&#22914;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(proc (</span><span class="texMathInline">var</span><span class="stt">) </span><span class="texMathInline">exp_1</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">simp</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#30340;&#23376;&#34920;&#36798;&#24335;&#33509;&#19981;&#22312;&#21407;&#34920;&#36798;&#24335;&#20013;&#65292;&#21017;&#19981;&#20250;&#20986;&#29616;&#22312; CPS &#20195;&#30721;&#20013;&#12290;</p><p>&#20462;&#25913; <span class="stt">make-send-to-cont</span>&#65292;&#29983;&#25104;&#26356;&#22909;&#30340;&#20195;&#30721;&#12290;&#26032;&#30340;&#35268;&#21017;&#20309;&#26102;&#29983;&#25928;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..23)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1026))"></a>
&#35266;&#23519;&#21487;&#30693;&#65292;<span class="stt">if</span> &#30340;&#35268;&#21017;&#23548;&#33268;&#32493;&#25991; <span class="texMathInline">K</span> &#22797;&#21046;&#20004;&#27425;&#65292;&#25152;&#20197;&#22312;&#23884;&#22871;&#30340; <span class="stt">if</span> &#20013;&#65292;&#36716;&#25442;&#21518;
&#30340;&#20195;&#30721;&#23610;&#23544;&#21576;&#25351;&#25968;&#22686;&#38271;&#12290;&#36816;&#34892;&#19968;&#20010;&#20363;&#23376;&#65292;&#39564;&#35777;&#36825;&#19968;&#35266;&#23519;&#12290;&#28982;&#21518;&#65292;&#20462;&#25913;&#36716;&#25442;&#65292;&#25226; <span class="texMathInline">K</span> &#32465;&#23450;
&#21040;&#26032;&#30340;&#21464;&#37327;&#65292;&#20174;&#32780;&#36991;&#20813;&#36825;&#31181;&#22686;&#38271;&#12290;
<a name="(idx._(gentag._1027))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..24)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1028))"></a>
&#32473;&#35821;&#35328;&#28155;&#21152;&#21015;&#34920;&#65288;ex3.10&#65289;&#12290;&#35760;&#20303;&#65306;&#21015;&#34920;&#30340;&#21442;&#25968;&#19981;&#22312;&#23614;&#31471;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..25)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1029))"></a>
&#25193;&#23637; CPS-IN&#65292;&#35753; <span class="stt">let</span> &#34920;&#36798;&#24335;&#22768;&#26126;&#20219;&#24847;&#25968;&#37327;&#30340;&#21464;&#37327;&#65288;ex3.16&#65289;&#12290;
<a name="(idx._(gentag._1030))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#30001; <span class="stt">cps-of-exps</span> &#24341;&#20837;&#30340;&#32493;&#25991;&#21464;&#37327;&#22312;&#32493;&#25991;&#20013;&#21482;&#20250;&#21482;&#20250;&#20986;&#29616;&#19968;&#27425;&#12290;&#20462;&#25913;
<span class="stt">make-send-to-cont</span>&#65292;&#19981;&#26159;&#29983;&#25104;ex6.22 &#20013;&#30340;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let </span><span class="texMathInline">var_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">= </span><span class="texMathInline">simp_1</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">in </span><span class="texMathInline">T</span></p></td></tr></table></blockquote><p>&#32780;&#26159;&#29983;&#25104; <span class="texMathInline">T[simp_1/var_1]</span>&#12290;&#20854;&#20013;&#65292;&#31526;&#21495; <span class="texMathInline">E_1[E_2/var]</span> &#24847;&#20026;&#65292;&#25226;&#34920;&#36798;&#24335; <span class="texMathInline">E_1</span>
&#20013;&#33258;&#30001;&#20986;&#29616;&#30340;&#25152;&#26377;&#21464;&#37327; <span class="texMathInline">var</span> &#26367;&#25442;&#20026; <span class="texMathInline">E_2</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..27)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25353;&#24403;&#21069;&#26041;&#24335;&#65292;<span class="stt">cps-of-let-exp</span> &#29983;&#25104;&#19968;&#20010;&#26080;&#29992;&#30340; <span class="stt">let</span> &#34920;&#36798;&#24335;&#65288;&#20026;&#20160;&#20040;&#65311;&#65289;&#12290;&#20462;&#25913;
&#36825;&#20010;&#36807;&#31243;&#65292;&#30452;&#25509;&#25226; <span class="stt">let</span> &#21464;&#37327;&#20316;&#20026;&#32493;&#25991;&#21464;&#37327;&#12290;&#37027;&#20040;&#65292;&#33509; <span class="texMathInline">exp_1</span> &#26159;&#22797;&#26434;&#30340;&#65292;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;let </span><span class="texMathInline">var_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">= </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">in </span><span class="texMathInline">exp_2</span><span class="stt">&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">&lt;&lt;proc (</span><span class="texMathInline">var_1</span><span class="stt">) (cps-of-exp </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">K</span><span class="stt">)&gt;&gt;)</span></p></td></tr></table></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..28)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#35797;&#24819;&#65306;&#26377;&#19968;&#20010; Scheme &#31243;&#24207;&#30340; CPS &#36716;&#25442;&#22120;&#65292;&#29992;&#23427;&#36716;&#25442;<a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a>&#20013;&#30340;&#31532;&#19968;&#20010;&#35299;&#37322;&#22120;&#65292;&#32467;
&#26524;&#20250;&#24590;&#26679;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..29)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32771;&#34385; <span class="stt">cps-of-exps</span> &#30340;&#21464;&#20307;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-exps</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="hspace">&nbsp;</span><span class="RktSym">builder</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-rest</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">exps</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">acc</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-weight: bold"><span class="stt">cps-of-rest</span></span> : <span class="texMathInline">\mathit{Listof(InpExp)} \times \mathit{Listof(SimpleExp)} \to \mathit{TfExp}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">builder</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">reverse</span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">inp-exp-simple?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-rest</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">acc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh-identifier</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-rest</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">acc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20026;&#20160;&#20040; <span class="stt">cps-of-exp</span> &#30340;&#36825;&#31181;&#21464;&#20307;&#27604; &#20013;&#30340;&#26356;&#39640;&#25928;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..30)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#35843;&#29992; <span class="stt">cps-of-exps</span> &#22788;&#29702;&#38271;&#24230;&#20026; 1 &#30340;&#34920;&#36798;&#24335;&#21015;&#34920;&#21487;&#20197;&#31616;&#21270;&#22914;&#19979;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exps (list </span><span class="texMathInline">exp</span><span class="stt">) </span><span class="texMathInline">builder</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp/ctx </span><span class="texMathInline">exp</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(lambda (simp) (</span><span class="texMathInline">builder</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(list simp))))</span></p></td></tr></table></blockquote><p>&#20854;&#20013;&#65292;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">cps-of-exp/ctx</span></span> : <span class="texMathInline">\mathit{InpExp} \times \mathit{(SimpleExp \rightarrow{} TfExp)} \to \mathit{TfExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-exp/ctx</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">context</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inp-exp-simple?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">context</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh-identifier</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">context</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-var-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#26679;&#65292;&#30001;&#20110;&#21015;&#34920;&#30340;&#21442;&#25968;&#25968;&#37327;&#24050;&#32463;&#30830;&#23450;&#65292;&#25105;&#20204;&#21487;&#20197;&#31616;&#21270;&#20986;&#29616; <span class="stt">(cps-of-exps (list ...))</span>
&#30340;&#22320;&#26041;&#12290;&#37027;&#20040;&#65292;&#35832;&#22914; <span class="stt">cps-of-diff-exp</span> &#21487;&#20197;&#29992; <span class="stt">cps-of-exp/ctx</span> &#23450;&#20041;&#65292;&#32780;&#19981;&#38656;
&#35201; <span class="stt">cps-of-exps</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cps-of-diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp/ctx</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exp/ctx</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-send-to-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-diff-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simp1</span><span class="hspace">&nbsp;</span><span class="RktSym">simp2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23545; <span class="stt">cps-of-call-exp</span> &#20013;&#29992;&#21040;&#30340; <span class="stt">cps-of-exps</span>&#65292;&#25105;&#20204;&#21487;&#20197;&#29992;
<span class="stt">cps-of-exp/ctx</span> &#22788;&#29702; <span class="stt">rator</span>&#65292;&#20294;&#20173;&#38656;&#20351;&#29992; <span class="stt">cps-of-exps</span> &#22788;&#29702; <span class="stt">rands</span>&#12290;
&#21024;&#38500;&#32763;&#35793;&#22120;&#20013;&#20854;&#20182;&#22320;&#26041;&#20986;&#29616;&#30340; <span class="stt">cps-of-exps</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..31)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1031))"></a>
<a name="(idx._(gentag._1032))"></a>
<a name="(idx._(gentag._1033))"></a>
&#20889;&#19968;&#20010;&#32763;&#35793;&#22120;&#65292;&#23427;&#21462; <span class="stt">cps-of-program</span> &#30340;&#36755;&#20986;&#65292;&#29983;&#25104;&#19968;&#20010;&#31561;&#20215;&#31243;&#24207;&#65292;&#20854;&#20013;&#25152;&#26377;&#30340;&#32493;&#25991;
&#37117;&#29992;<a href="#%28part._cpi%29" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a>&#20013;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#12290;&#29992;&#21015;&#34920;&#34920;&#31034;&#37027;&#20123;&#29992; <span class="stt">define-datatype</span> &#29983;&#25104;&#30340;&#25968;
&#25454;&#32467;&#26500;&#12290;&#30001;&#20110;&#25105;&#20204;&#30340;&#35821;&#35328;&#19981;&#25903;&#25345;&#31526;&#21495;&#65292;&#20320;&#21487;&#20197;&#22312;&#39318;&#39033;&#20301;&#32622;&#20351;&#29992;&#25972;&#25968;&#26631;&#31614;&#65292;&#20197;&#27492;&#21306;&#20998;&#25968;&#25454;&#31867;&#22411;
&#30340;&#21464;&#20307;&#12290;
<a name="(idx._(gentag._1034))"></a>
<a name="(idx._(gentag._1035))"></a>
<a name="(idx._(gentag._1036))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..32)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1037))"></a>
&#20889;&#19968;&#20010;&#32763;&#35793;&#22120;&#65292;&#23427;&#31867;&#20284;ex6.31&#65292;&#20294;&#25226;&#25152;&#26377;&#36807;&#31243;&#34920;&#31034;&#20026;&#25968;&#25454;&#32467;&#26500;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..33)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1038))"></a>
&#20889;&#19968;&#20010;&#32763;&#35793;&#22120;&#65292;&#23427;&#21462;ex6.32 &#30340;&#36755;&#20986;&#65292;&#23558;&#20854;&#36716;&#25442;&#20026;
&#37027;&#26679;&#30340;&#23492;&#23384;&#22120;&#31243;&#24207;&#12290;
<a name="(idx._(gentag._1039))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..34)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1040))"></a>
<a name="(idx._(gentag._1041))"></a>
<a name="(idx._(gentag._1042))"></a>
&#25105;&#20204;&#25226;&#31243;&#24207;&#36716;&#25442;&#20026; CPS &#26102;&#65292;&#19981;&#20165;&#23558;&#31243;&#24207;&#20013;&#30340;&#25511;&#21046;&#19978;&#19979;&#25991;&#21464;&#20026;&#26174;&#24335;&#30340;&#65292;&#32780;&#19988;&#36824;&#30830;&#23450;&#20102;&#25805;&#20316;&#30340;
&#25191;&#34892;&#39034;&#24207;&#65292;&#20197;&#21450;&#25152;&#26377;&#20013;&#38388;&#32467;&#26524;&#30340;&#21517;&#23383;&#12290;&#21518;&#32773;&#21483;&#20570;<span class="emph">&#24207;&#21015;&#21270;</span> (<span class="emph">sequentialization</span>)&#12290;&#22914;
&#26524;&#25105;&#20204;&#19981;&#20851;&#24515;&#33021;&#21542;&#33719;&#24471;&#36845;&#20195;&#24615;&#25511;&#21046;&#34892;&#20026;&#65292;&#25105;&#20204;&#24207;&#21015;&#21270;&#31243;&#24207;&#26102;&#21487;&#23558;&#20854;&#36716;&#25442;&#20026;
<span class="emph">A-normal form</span>&#65292;&#25110;&#31216;<span class="emph">ANF</span>&#12290;&#36825;&#37324;&#26159;&#19968;&#20010; ANF &#31243;&#24207;&#30340;&#20363;&#23376;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fib/anf</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib/anf</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fib/anf</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>CPS &#31243;&#24207;&#20256;&#36882;&#21629;&#21517;&#20013;&#38388;&#32467;&#26524;&#30340;&#32493;&#25991;&#65292;&#20174;&#32780;&#24207;&#21015;&#21270;&#35745;&#31639;&#65307;ANF &#31243;&#24207;&#29992; <span class="stt">let</span> &#34920;&#36798;&#24335;&#21629;&#21517;&#25152;
&#26377;&#20013;&#38388;&#32467;&#26524;&#65292;&#20174;&#32780;&#24207;&#21015;&#21270;&#35745;&#31639;&#12290;</p><p>&#37325;&#20889; <span class="stt">cps-of-exp</span>&#65292;&#29983;&#25104; ANF &#31243;&#24207;&#32780;&#38750; CPS &#31243;&#24207;&#65288;&#23545;&#19981;&#22312;&#23614;&#31471;&#30340;&#26465;&#20214;&#34920;&#36798;&#24335;&#65292;
&#29992;ex6.23 &#20013;&#30340;&#26041;&#27861;&#22788;&#29702;&#65289;&#12290;&#28982;&#21518;&#65292;&#29992;&#20462;&#25913;&#21518;&#30340; <span class="stt">cps-of-exp</span> &#22788;&#29702;&#20363;
<span class="stt">fib</span> &#30340;&#23450;&#20041;&#65292;&#39564;&#35777;&#20854;&#32467;&#26524;&#26159;&#21542;&#20026; <span class="stt">fib/anf</span>&#12290;&#26368;&#21518;&#65292;&#39564;&#35777;&#23545;&#24050;&#32463;&#26159; ANF &#30340;&#36755;&#20837;&#31243;
&#24207;&#65292;&#20320;&#30340;&#32763;&#35793;&#22120;&#20135;&#29983;&#30340;&#31243;&#24207;&#19982;&#36755;&#20837;&#21482;&#26377;&#32465;&#23450;&#21464;&#37327;&#21517;&#19981;&#21516;&#12290;
<a name="(idx._(gentag._1043))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..35)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#29992;&#20960;&#20010;&#20363;&#23376;&#39564;&#35777;&#65306;&#33509;&#37319;&#29992;ex6.27 &#20013;&#30340;&#20248;&#21270;&#26041;&#27861;&#65292;&#23545; ANF &#36716;&#25442;&#22120;
&#65288;ex6.34&#65289;&#30340;&#36755;&#20837;&#21644;&#36755;&#20986;&#31243;&#24207;&#36827;&#34892; CPS &#21464;&#25442;&#65292;&#25152;&#24471;&#32467;&#26524;&#30456;&#21516;&#12290;
<a name="(idx._(gentag._1044))"></a>
<a name="(idx._(gentag._1045))"></a></p></blockquote><h4 class="heading">6.4<tt>&nbsp;</tt><a name="(part._s6..4)"></a>&#24314;&#27169;&#35745;&#31639;&#25928;&#26524;<span class="button-group"><a href="#(part._s6..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1046))"></a>
CPS &#30340;&#21478;&#19968;&#37325;&#35201;&#24212;&#29992;&#26159;&#25552;&#20379;&#27169;&#22411;&#65292;&#23558;&#35745;&#31639;&#25928;&#26524;&#21464;&#20026;&#26174;&#24335;&#30340;&#12290;&#35745;&#31639;&#25928;&#26524;&#8212;&#8212;&#20687;&#26159;&#25171;&#21360;&#25110;&#32473;&#21464;&#37327;&#36171;
&#20540;&#8212;&#8212;&#24456;&#38590;&#29992;<a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a>&#20351;&#29992;&#30340;&#26041;&#31243;&#25512;&#29702;&#24314;&#27169;&#12290;&#36890;&#36807; CPS &#21464;&#25442;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#36825;&#20123;&#25928;&#26524;&#21464;&#20026;
&#26174;&#24335;&#30340;&#65292;&#23601;&#20687;&#25105;&#20204;&#22312;<a href="#%28part._cpi%29" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a>&#20013;&#22788;&#29702;&#38750;&#23616;&#37096;&#25511;&#21046;&#27969;&#19968;&#26679;&#12290;</p><p><a name="(idx._(gentag._1047))"></a>
<a name="(idx._(gentag._1048))"></a>
<a name="(idx._(gentag._1049))"></a>
&#29992; CPS &#24314;&#27169;&#25928;&#26524;&#26102;&#65292;&#25105;&#20204;&#30340;&#22522;&#26412;&#21407;&#21017;&#26159;&#31616;&#21333;&#34920;&#36798;&#24335;&#19981;&#24212;&#26377;&#20219;&#20309;&#25928;&#26524;&#12290;&#31616;&#21333;&#34920;&#36798;&#24335;&#19981;&#24212;&#21547;&#26377;
&#36807;&#31243;&#35843;&#29992;&#20063;&#26159;&#22522;&#20110;&#36825;&#19968;&#21407;&#21017;&#65292;&#22240;&#20026;&#36807;&#31243;&#35843;&#29992;&#21487;&#33021;&#19981;&#32456;&#27490;&#65288;&#36825;&#24403;&#28982;&#26159;&#19968;&#31181;&#25928;&#26524;&#65281;&#65289;&#12290;</p><p>&#26412;&#33410;&#65292;&#25105;&#20204;&#30740;&#31350;&#19977;&#31181;&#25928;&#26524;&#65306;&#25171;&#21360;&#65292;&#23384;&#20648;&#22120;&#65288;&#29992;&#26174;&#24335;&#24341;&#29992;&#27169;&#22411;&#65289;&#65292;&#20197;&#21450;&#38750;&#26631;&#20934;&#25511;&#21046;&#27969;&#12290;</p><p>&#25105;&#20204;&#39318;&#20808;&#32771;&#34385;&#25171;&#21360;&#12290;&#25171;&#21360;&#24403;&#28982;&#26159;&#19968;&#31181;&#25928;&#26524;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(f print(3) print(4))</span></p></td></tr></table></blockquote><p>&#21644;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(f 1 1)</span></p></td></tr></table></blockquote><p>&#21363;&#20351;&#36820;&#22238;&#21516;&#26679;&#30340;&#31572;&#26696;&#65292;&#20063;&#20855;&#26377;&#19981;&#21516;&#25928;&#26524;&#12290;&#25928;&#26524;&#36824;&#21462;&#20915;&#20110;&#21442;&#25968;&#30340;&#27714;&#20540;&#39034;&#24207;&#12290;&#36804;&#20170;&#20026;&#27490;&#65292;&#25105;&#20204;&#30340;
&#35821;&#35328;&#24635;&#26159;&#25353;&#20174;&#24038;&#21521;&#21491;&#30340;&#39034;&#24207;&#27714;&#21442;&#25968;&#30340;&#20540;&#65292;&#20294;&#20854;&#20182;&#35821;&#35328;&#21487;&#33021;&#19981;&#26159;&#36825;&#26679;&#12290;</p></blockquote><p>&#35201;&#24314;&#27169;&#36825;&#20123;&#24819;&#27861;&#65292;&#25105;&#20204;&#25353;&#29031;&#19979;&#38754;&#30340;&#26041;&#24335;&#20462;&#25913; CPS &#21464;&#25442;&#65306;</p><ul><li><p>&#25105;&#20204;&#32473; CPS-IN &#28155;&#21152; <span class="stt">print</span> &#34920;&#36798;&#24335;&#65306;
<a name="(idx._(gentag._1050))"></a></p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{InpExp} &amp;::= <span class="stt">print (</span><span class="Iidentity">\mathit{InpExp}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">print-exp (exp1)</span>}\end{align*}</span></p></blockquote><p>&#25105;&#20204;&#23578;&#26410;&#20889;&#20986; CPS-IN &#30340;&#35299;&#37322;&#22120;&#65292;&#20294;&#35299;&#37322;&#22120;&#24212;&#24403;&#25193;&#23637;&#65292;&#20174;&#32780;&#22788;&#29702; <span class="stt">print-exp</span>&#65307;&#23427;&#25171;&#21360;
&#20986;&#21442;&#25968;&#30340;&#20540;&#65292;&#36820;&#22238;&#26576;&#20010;&#20540;&#65288;&#25105;&#20204;&#36873;&#20219;&#24847;&#20540; 38&#65289;&#12290;</p></li><li><p>&#25105;&#20204;&#32473; CPS-OUT &#28155;&#21152; <span class="stt">printk</span> &#34920;&#36798;&#24335;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{TfExp} &amp;::= <span class="stt">printk (</span><span class="Iidentity">\mathit{SimpleExp}</span><span class="stt">) ; </span><span class="Iidentity">\mathit{TfExp}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-printk-exp (simple-exp1 body)</span>}\end{align*}</span></p></blockquote><p>&#34920;&#36798;&#24335; <span class="stt">printk(</span><span class="texMathInline">simp</span><span class="stt">);</span><span class="texMathInline">exp</span> &#26377;&#19968;&#31181;&#25928;&#26524;&#65306;&#25171;&#21360;&#12290;&#22240;&#27492;&#65292;&#23427;&#24517;&#39035;&#26159;&#19968;&#20010;
<span class="texMathInline">\mathit{TfExp}</span>&#65292;&#32780;&#38750; <span class="texMathInline">\mathit{SimpleExp}</span>&#65292;&#19988;&#21482;&#33021;&#20986;&#29616;&#22312;&#23614;&#31471;&#12290;<span class="texMathInline">exp</span> &#30340;&#20540;
&#25104;&#20026;&#25972;&#20010; <span class="stt">printk</span>&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#25152;&#20197; <span class="texMathInline">exp</span> &#26412;&#36523;&#22312;&#23614;&#31471;&#65292;&#21487;&#20197;&#26159;&#19968;&#20010; <span class="stt">tfexp</span>&#12290;
&#37027;&#20040;&#65292;&#36825;&#37096;&#20998;&#20195;&#30721;&#21487;&#20197;&#20889;&#20316;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">printk(-(v1,1));</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(f v1 </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#35201;&#23454;&#29616;&#23427;&#65292;&#25105;&#20204;&#32473; CPS-OUT &#30340;&#35299;&#37322;&#22120;&#28155;&#21152;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">printk-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:printf</span><span class="hspace">&nbsp;</span><span class="RktVal">"~s~%"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">cont</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></li><li><p>&#25105;&#20204;&#32473; <span class="stt">cps-of-exp</span> &#28155;&#21152;&#19968;&#34892;&#20195;&#30721;&#65292;&#25226; <span class="stt">print</span> &#34920;&#36798;&#24335;&#32763;&#35793;&#20026;
<span class="stt">printk</span> &#34920;&#36798;&#24335;&#12290;&#25105;&#20204;&#20026; <span class="stt">print</span> &#36873;&#25321;&#20219;&#24847;&#36820;&#22238;&#20540; 38&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#30340;&#32763;&#35793;&#24212;&#20026;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;print(</span><span class="texMathInline">simp_1</span><span class="stt">)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">) = printk(</span><span class="texMathInline">simp_1</span><span class="stt">) ; (</span><span class="texMathInline">K</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">38)</span></p></td></tr></table></blockquote><p>&#28982;&#21518;&#65292;&#30001;&#20110; <span class="stt">print</span> &#30340;&#21442;&#25968;&#21487;&#33021;&#26159;&#22797;&#26434;&#30340;&#65292;&#25105;&#20204;&#29992; <span class="stt">cps-of-exps</span> &#22788;&#29702;&#12290;&#36825;&#26679;&#65292;
&#25105;&#20204;&#32473; <span class="stt">cps-of-exp</span> &#26032;&#22686;&#36825;&#20960;&#34892;&#20195;&#30721;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">print-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-printk-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-send-to-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">38</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1051))"></a></div></p></blockquote></li></ul><p>&#26469;&#30475;&#19968;&#20010;&#26356;&#22797;&#26434;&#30340;&#20363;&#23376;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;(f print((g x)) print(4))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp &lt;&lt;print((g x))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(f v1 print(4))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)&gt;&gt;)</span></p></td></tr><tr><td><p><span class="stt">= (cps-of-exp &lt;&lt;(g x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(print v2)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(f v1 print(4))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)&gt;&gt;)&gt;&gt;)</span></p></td></tr><tr><td><p><span class="stt">= (g x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(print v2)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (v1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(f v1 print(4))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)&gt;&gt;))</span></p></td></tr><tr><td><p><span class="stt">= (g x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">printk(v2);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let v1 = 38</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (cps-of-exp &lt;&lt;(f v1 print(4))&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">= (g x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">printk(v2);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let v1 = 38</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (cps-of-exp &lt;&lt;print(4)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;proc (v3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(cps-of-exp &lt;&lt;(f v1 v3)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)&gt;&gt;))</span></p></td></tr><tr><td><p><span class="stt">= (g x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">printk(v2);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let v1 = 38</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in printk(4);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let v3 = 38</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (cps-of-exp &lt;&lt;(f v1 v3)&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">= (g x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (v2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">printk(v2);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let v1 = 38</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in printk(4);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let v3 = 38</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (f v1 v3 </span><span class="texMathInline">k</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;&#25105;&#20204;&#35843;&#29992; <span class="stt">g</span>&#65292;&#35843;&#29992;&#25152;&#22312;&#30340;&#32493;&#25991;&#25226;&#32467;&#26524;&#21629;&#21517;&#20026; <span class="stt">v2</span>&#12290;&#32493;&#25991;&#25171;&#21360;&#20986; <span class="stt">v2</span> &#30340;
&#20540;&#65292;&#25226; 38 &#20256;&#32473;&#19979;&#19968;&#32493;&#25991;&#65292;&#19979;&#19968;&#32493;&#25991;&#23558; <span class="stt">v1</span> &#32465;&#23450;&#21040;&#23454;&#21442; 38&#65292;&#25171;&#21360;&#20986; 4&#65292;&#28982;&#21518;&#35843;&#29992;&#19979;&#19968;
&#32493;&#25991;&#65292;&#19979;&#19968;&#32493;&#25991;&#25226; <span class="stt">v2</span> &#32465;&#23450;&#21040;&#23454;&#21442;&#65288;&#20063;&#26159; 38&#65289;&#65292;&#28982;&#21518;&#29992; <span class="stt">v1</span>&#65292;<span class="stt">v3</span> &#21644; <span class="texMathInline">K</span>
&#35843;&#29992; <span class="stt">f</span>&#12290;</p><p><a name="(idx._(gentag._1052))"></a>
<a name="(idx._(gentag._1053))"></a>
&#25105;&#20204;&#25353;&#29031;&#21516;&#26679;&#30340;&#27493;&#39588;&#24314;&#27169;&#26174;&#24335;&#24341;&#29992;&#65288;<a href="#%28part._s4..2%29" data-pltdoc="x">EXPLICIT-REFS&#65306;&#26174;&#24335;&#24341;&#29992;&#35821;&#35328;</a>&#65289;&#12290;&#25105;&#20204;&#32473; CPS-IN &#21644; CPS-OUT &#28155;&#21152;&#26032;
&#30340;&#35821;&#27861;&#65292;&#32473; CPS-OUT &#30340;&#35299;&#37322;&#22120;&#28155;&#21152;&#20195;&#30721;&#65292;&#22788;&#29702;&#26032;&#30340;&#35821;&#27861;&#65292;&#32473; <span class="stt">cps-of-exp</span> &#28155;&#21152;&#20195;&#30721;&#65292;
&#23558;&#26032;&#30340; CPS-IN &#35821;&#27861;&#32763;&#35793;&#20026; CPS-OUT&#12290;&#23545;&#26174;&#24335;&#24341;&#29992;&#65292;&#25105;&#20204;&#38656;&#35201;&#28155;&#21152;&#21019;&#24314;&#24341;&#29992;&#65292;&#35299;&#24341;&#29992;&#21644;&#36171;&#20540;
&#30340;&#35821;&#27861;&#12290;</p><ul><li><p>&#25105;&#20204;&#32473; CPS-IN &#28155;&#21152;&#35821;&#27861;&#65306;
<a name="(idx._(gentag._1054))"></a>
<a name="(idx._(gentag._1055))"></a>
<a name="(idx._(gentag._1056))"></a>
<a name="(idx._(gentag._1057))"></a></p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{InpExp} &amp;::= <span class="stt">newref (</span><span class="Iidentity">\mathit{InpExp}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">newref-exp (exp1)</span>} \\[5pt]
  \mathit{InpExp} &amp;::= <span class="stt">deref (</span><span class="Iidentity">\mathit{InpExp}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">deref-exp (exp1)</span>} \\[5pt]
\mathit{InpExp} &amp;::= <span class="stt">setref (</span><span class="Iidentity">\mathit{InpExp}</span><span class="stt"> , </span><span class="Iidentity">\mathit{InpExp}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">setref-exp (exp1 exp2)</span>}\end{align*}</span></p></blockquote></li><li><p>&#25105;&#20204;&#32473; CPS-OUT &#28155;&#21152;&#35821;&#27861;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{TfExp} &amp;::= <span class="stt">newrefk (</span><span class="Iidentity">\mathit{simple\mbox{-}exp}</span><span class="stt">, </span><span class="Iidentity">\mathit{simple\mbox{-}exp}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-newrefk-exp (simple1 simpe2)</span>} \\[5pt]
   \mathit{TfExp} &amp;::= <span class="stt">derefk (</span><span class="Iidentity">\mathit{simple\mbox{-}exp}</span><span class="stt">, </span><span class="Iidentity">\mathit{simple\mbox{-}exp}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-derefk-exp (simple1 simpe2)</span>} \\[5pt]
   \mathit{TfExp} &amp;::= <span class="stt">setrefk (</span><span class="Iidentity">\mathit{simple\mbox{-}exp}</span><span class="stt">, </span><span class="Iidentity">\mathit{simple\mbox{-}exp}</span><span class="stt">) ; </span><span class="Iidentity">\mathit{TfExp}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cps-setrefk-exp (simple1 simpe2)</span>}\end{align*}</span></p></blockquote><p><span class="stt">newrefk</span> &#34920;&#36798;&#24335;&#21462;&#20004;&#20010;&#21442;&#25968;&#65306;&#25918;&#20837;&#26032;&#20998;&#37197;&#21333;&#20803;&#30340;&#20540;&#65292;&#25509;&#25910;&#26032;&#20301;&#32622;&#24341;&#29992;&#30340;&#32493;&#25991;&#12290;
<span class="stt">derefk</span> &#19982;&#20043;&#31867;&#20284;&#12290;&#30001;&#20110; <span class="stt">setrefk</span> &#30340;&#25191;&#34892;&#36890;&#24120;&#21482;&#27714;&#25928;&#26524;&#65292;<span class="stt">setrefk</span> &#30340;&#35774;&#35745;
&#19982; <span class="stt">printk</span> &#31867;&#20284;&#12290;&#23427;&#23558;&#31532;&#20108;&#20010;&#21442;&#25968;&#30340;&#20540;&#36171;&#32473;&#31532;&#19968;&#20010;&#21442;&#25968;&#30340;&#20540;&#65292;&#21518;&#32773;&#24212;&#26159;&#19968;&#20010;&#24341;&#29992;&#65292;&#28982;
&#21518;&#23614;&#36882;&#24402;&#24335;&#22320;&#25191;&#34892;&#31532;&#19977;&#20010;&#21442;&#25968;&#12290;</p><p>&#22312;&#36825;&#38376;&#35821;&#35328;&#20013;&#65292;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">newrefk(33, proc (loc1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">newrefk(44, proc (loc2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">setrefk(loc1,22);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">derefk(loc1, proc (val)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-(val,1))))</span></p></td></tr></table></blockquote><p>&#36825;&#20010;&#31243;&#24207;&#26032;&#20998;&#37197;&#19968;&#20010;&#20301;&#32622;&#65292;&#20540;&#20026; 33&#65292;&#25226; <span class="stt">loc1</span> &#32465;&#23450;&#21040;&#37027;&#20010;&#20301;&#32622;&#12290;&#28982;&#21518;&#65292;&#23427;&#26032;&#20998;&#37197;&#19968;&#20010;
&#20301;&#32622;&#65292;&#20540;&#20026; 44&#65292;&#25226; <span class="stt">loc2</span> &#32465;&#23450;&#21040;&#37027;&#20010;&#20301;&#32622;&#12290;&#28982;&#21518;&#65292;&#23427;&#25226;&#20301;&#32622; <span class="stt">loc1</span> &#30340;&#20869;&#23481;&#35774;&#20026;
22&#12290;&#26368;&#21518;&#65292;&#23427;&#21462;&#20986; <span class="stt">loc1</span> &#30340;&#20540;&#65292;&#25226;&#32467;&#26524;&#65288;&#24212;&#20026; 22&#65289;&#32465;&#23450;&#21040; <span class="stt">val</span>&#65292;&#27714;&#20986;&#24182;&#36820;&#22238;
<span class="stt">-(val,1)</span> &#30340;&#32467;&#26524; 21&#12290;</p><p>&#35201;&#24471;&#21040;&#36825;&#31181;&#34892;&#20026;&#65292;&#25105;&#20204;&#32473; CPS-OUT &#30340;&#35299;&#37322;&#22120;&#28155;&#21152;&#36825;&#20960;&#34892;&#20195;&#30721;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">cps-newrefk-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple1</span><span class="hspace">&nbsp;</span><span class="RktSym">simple2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">newval</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ref-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-procedure/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">newval</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">cps-derefk-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple1</span><span class="hspace">&nbsp;</span><span class="RktSym">simple2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-procedure/k</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">deref</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;ref</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">cps-setrefk-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple1</span><span class="hspace">&nbsp;</span><span class="RktSym">simple2</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;ref</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-simple-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">simple2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">setref!</span><span class="hspace">&nbsp;</span><span class="RktSym">ref</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of/k</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></li><li><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#32473; <span class="stt">cps-of-exp</span> &#28155;&#21152;&#36825;&#20960;&#34892;&#20195;&#30721;&#26469;&#20570;&#32763;&#35793;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">newref-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-newrefk-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">deref-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-derefk-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">setref-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-of-exps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-setrefk-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">simples</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-send-to-cont</span><span class="hspace">&nbsp;</span><span class="RktSym">k-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cps-const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">23</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#22312;&#26368;&#21518;&#19968;&#34892;&#65292;&#25105;&#20204;&#35753; <span class="stt">setref</span> &#36820;&#22238; 23&#65292;&#36825;&#19982; EXPLICIT-REFS &#19968;&#33268;&#12290;
<a name="(idx._(gentag._1058))"></a>
<a name="(idx._(gentag._1059))"></a>
<a name="(idx._(gentag._1060))"></a>
<a name="(idx._(gentag._1061))"></a>
<a name="(idx._(gentag._1062))"></a>
<a name="(idx._(gentag._1063))"></a></p></li></ul><blockquote class="EoplExercise"><p><a name="(elem._ex6..36)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1064))"></a>
&#32473; CPS-IN &#28155;&#21152; <span class="stt">begin</span> &#34920;&#36798;&#24335;&#65288;ex4.4&#65289;&#12290;CPS-OUT &#24212;&#35813;&#19981;&#38656;&#35201;&#20462;&#25913;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..37)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1065))"></a>
&#32473; CPS-IN &#28155;&#21152;&#38544;&#24335;&#24341;&#29992;&#65288;<a href="#%28part._s4..3%29" data-pltdoc="x">IMPLICIT-REFS&#65306;&#38544;&#24335;&#24341;&#29992;&#35821;&#35328;</a>&#65289;&#12290;&#29992;&#21644;&#26174;&#24335;&#24341;&#29992;&#30456;&#21516;&#30340; CPS-OUT&#65292;&#30830;&#20445;&#32763;&#35793;&#22120;
&#22312;&#36866;&#24403;&#30340;&#22320;&#26041;&#25554;&#20837;&#20998;&#37197;&#21644;&#35299;&#24341;&#29992;&#12290;&#25552;&#31034;&#65306;&#22238;&#24518;&#19968;&#19979;&#65292;&#22312;&#38544;&#24335;&#24341;&#29992;&#20986;&#29616;&#30340;&#22320;&#26041;&#65292;<span class="stt">var-exp</span>
&#19981;&#20877;&#26159;&#31616;&#21333;&#30340;&#65292;&#22240;&#20026;&#23427;&#38656;&#35201;&#35835;&#21462;&#23384;&#20648;&#22120;&#12290;
<a name="(idx._(gentag._1066))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..38)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22914;&#26524;&#19968;&#20010;&#21464;&#37327;&#19981;&#20250;&#20986;&#29616;&#22312; <span class="stt">set</span> &#34920;&#36798;&#24335;&#30340;&#24038;&#36793;&#65292;&#23427;&#26159;&#19981;&#21487;&#21464;&#30340;&#65292;&#22240;&#27492;&#21487;&#20197;&#35270;&#20026;&#31616;&#21333;&#30340;&#12290;
&#25193;&#23637;&#21069;&#19968;&#39064;&#30340;&#35299;&#31572;&#65292;&#25353;&#31616;&#21333;&#34920;&#36798;&#24335;&#22788;&#29702;&#25152;&#26377;&#36825;&#26679;&#30340;&#21464;&#37327;&#12290;<br/></p></blockquote><p><a name="(idx._(gentag._1067))"></a>
<a name="(idx._(gentag._1068))"></a>
<a name="(idx._(gentag._1069))"></a>
<a name="(idx._(gentag._1070))"></a>
&#26368;&#21518;&#26159;&#38750;&#23616;&#37096;&#25511;&#21046;&#27969;&#12290;&#25105;&#20204;&#26469;&#32771;&#34385;ex5.42 &#20013;&#30340; <span class="stt">letcc</span>&#12290;<span class="stt">letcc</span>
&#34920;&#36798;&#24335; <span class="stt">letcc </span><span class="texMathInline">var</span><span class="stt"> in </span><span class="texMathInline">body</span> &#23558;&#24403;&#21069;&#32493;&#25991;&#32465;&#23450;&#21040;&#21464;&#37327; <span class="texMathInline">var</span>&#12290;<span class="texMathInline">body</span> &#20026;
&#35813;&#32465;&#23450;&#30340;&#20316;&#29992;&#22495;&#12290;&#32493;&#25991;&#30340;&#21807;&#19968;&#25805;&#20316;&#26159; <span class="stt">throw</span>&#12290;&#25105;&#20204;&#29992;&#35821;&#27861; <span class="stt">throw </span><span class="texMathInline">Expression</span><span class="stt">
</span><span class="stt">to </span><span class="texMathInline">Expression</span>&#65292;&#23427;&#38656;&#35201;&#27714;&#20986;&#20004;&#20010;&#23376;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#31532;&#20108;&#20010;&#34920;&#36798;&#24335;&#24212;&#36820;&#22238;&#19968;&#20010;&#32493;&#25991;&#65292;&#35813;&#32493;
&#25991;&#20316;&#29992;&#20110;&#31532;&#19968;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;<span class="stt">throw</span> &#24403;&#21069;&#30340;&#32493;&#25991;&#21017;&#34987;&#24573;&#30053;&#12290;</p><p>&#25105;&#20204;&#39318;&#20808;&#25353;&#29031;&#26412;&#31456;&#30340;&#26041;&#24335;&#20998;&#26512;&#36825;&#20123;&#34920;&#36798;&#24335;&#12290;&#36825;&#20123;&#34920;&#36798;&#24335;&#19968;&#23450;&#26159;&#22797;&#26434;&#30340;&#12290;<span class="stt">letcc</span> &#30340;&#20027;&#20307;
&#37096;&#20998;&#22312;&#23614;&#31471;&#65292;&#22240;&#20026;&#23427;&#30340;&#20540;&#23601;&#26159;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#30001;&#20110; <span class="stt">throw</span> &#20013;&#30340;&#20004;&#20010;&#20301;&#32622;&#37117;&#38656;&#27714;&#20540;&#65292;
&#19988;&#37117;&#19981;&#26159; <span class="stt">throw</span> &#30340;&#20540;&#65288;&#30830;&#23454;&#65292;<span class="stt">throw</span> &#27809;&#26377;&#20540;&#65292;&#22240;&#20026;&#23427;&#19981;&#20250;&#36820;&#22238;&#21040;&#32039;&#37051;&#30340;&#32493;&#25991;&#65289;&#65292;
&#22240;&#27492;&#23427;&#20204;&#37117;&#22312;&#25805;&#20316;&#25968;&#20301;&#32622;&#12290;</p><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986;&#36716;&#25442;&#36825;&#20004;&#20010;&#34920;&#36798;&#24335;&#30340;&#35268;&#21017;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;letcc </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">in </span><span class="texMathInline">body</span><span class="stt">&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= let </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">= </span><span class="texMathInline">K</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">in (cps-of-exp </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">var</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(cps-of-exp &lt;&lt;throw </span><span class="texMathInline">simp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">to </span><span class="texMathInline">simp_2</span><span class="stt">&gt;&gt; </span><span class="texMathInline">K</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (</span><span class="texMathInline">simp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">simp_1</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#20173;&#29992; <span class="stt">cps-of-exps</span> &#22788;&#29702; <span class="stt">throw</span> &#21487;&#33021;&#21547;&#26377;&#30340;&#22797;&#26434;&#21442;&#25968;&#12290;&#36825;&#37324;&#65292;<span class="texMathInline">K</span> &#22914;&#26399;&#26395;
&#30340;&#37027;&#26679;&#24573;&#30053;&#12290;</p></blockquote><p>&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#19981;&#38656;&#35201;&#32473;&#32473; CPS-OUT &#28155;&#21152;&#35821;&#27861;&#65292;&#22240;&#20026;&#25105;&#20204;&#25805;&#20316;&#30340;&#27491;&#26159;&#25511;&#21046;&#32467;&#26500;&#12290;
<a name="(idx._(gentag._1071))"></a>
<a name="(idx._(gentag._1072))"></a>
<a name="(idx._(gentag._1073))"></a>
<a name="(idx._(gentag._1074))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex6..39)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312; CPS &#32763;&#35793;&#22120;&#20013;&#23454;&#29616; <span class="stt">letcc</span> &#21644; <span class="stt">throw</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex6..40)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312; CPS &#32763;&#35793;&#22120;&#20013;&#28155;&#21152;&#21644;&#23454;&#29616;<a href="#%28part._s5..4%29" data-pltdoc="x">&#24322;&#24120;</a>&#20013;&#30340; <span class="stt">try/catch</span> &#21644; <span class="stt">throw</span>&#12290;CPS-OUT
&#24212;&#35813;&#19981;&#38656;&#35201;&#28155;&#21152;&#20219;&#20309;&#19996;&#35199;&#65292;&#32780; <span class="stt">cps-of-exp</span> &#25913;&#21462;&#20004;&#20010;&#32493;&#25991;&#65306;&#19968;&#20010;&#25104;&#21151;&#32493;&#25991;&#65292;&#19968;&#20010;&#38169;&#35823;
&#32493;&#25991;&#12290;
<a name="(idx._(gentag._1075))"></a></p></blockquote><h3 class="heading">7<tt>&nbsp;</tt><a name="(part._types)"></a>&#31867;&#22411;<span class="button-group"><a href="#(part._types)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(idx._(gentag._1076))"></a>
&#25105;&#20204;&#24050;&#29702;&#35299;&#22914;&#20309;&#29992;&#35299;&#37322;&#22120;&#24314;&#27169;&#31243;&#24207;&#30340;&#36816;&#34892;&#26102;&#34892;&#20026;&#12290;&#29616;&#22312;&#65292;&#25105;&#20204;&#29992;&#21516;&#26679;&#30340;&#25216;&#26415;&#19981;&#21152;&#36816;&#34892;
&#22320;<span class="emph">&#20998;&#26512;</span>&#25110;<span class="emph">&#39044;&#27979;</span>&#31243;&#24207;&#30340;&#34892;&#20026;&#12290;</p><p>&#25105;&#20204;&#24050;&#35265;&#35782;&#36807;&#19968;&#20123;&#20102;&#65306;&#25105;&#20204;&#30340;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#22312;&#20998;&#26512;&#38454;&#27573;&#39044;&#27979;&#31243;&#24207;&#22312;&#36816;&#34892;&#26102;&#22914;&#20309;&#20174;&#29615;&#22659;&#20013;&#25214;
&#20986;&#21508;&#20010;&#21464;&#37327;&#12290;&#32780;&#19988;&#65292;&#32763;&#35793;&#22120;&#26412;&#36523;&#30475;&#36215;&#26469;&#23601;&#20687;&#19968;&#20010;&#35299;&#37322;&#22120;&#65292;&#21482;&#26159;&#25105;&#20204;&#20256;&#36882;&#30340;&#19981;&#26159;&#29615;&#22659;&#65292;&#32780;&#26159;&#38745;
&#24577;&#29615;&#22659;&#12290;</p><p>&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#20998;&#26512;&#31243;&#24207;&#65292;&#39044;&#27979;&#31243;&#24207;&#27714;&#20540;&#26159;&#21542;<span class="emph">&#23433;&#20840;</span> (<span class="emph">safe</span>)&#65292;&#21363;&#65292;&#27714;&#20540;&#36807;&#31243;&#26159;&#21542;&#33021;&#36991;
&#20813;&#26576;&#20123;&#31867;&#22411;&#30340;&#38169;&#35823;&#65292;&#20294;&#23433;&#20840;&#30340;&#21547;&#20041;&#35270;&#35821;&#35328;&#32780;&#19981;&#21516;&#12290;&#22914;&#26524;&#25105;&#20204;&#33021;&#20445;&#35777;&#27714;&#20540;&#26159;&#23433;&#20840;&#30340;&#65292;&#25105;&#20204;&#23601;&#33021;
&#30830;&#20445;&#31243;&#24207;&#28385;&#36275;&#20854;&#21512;&#32422;&#12290;</p><p>&#26412;&#31456;&#65292;&#25105;&#20204;&#32771;&#34385;&#31867;&#20284;<a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a> LETREC&#30340;&#35821;&#35328;&#12290;&#36825;&#20123;&#35821;&#35328;&#27714;&#20540;&#23433;&#20840;&#65292;&#24403;&#19988;&#20165;&#24403;&#65306;</p><ol><li><p>&#27599;&#20010;&#24453;&#27714;&#20540;&#30340;&#21464;&#37327; <span class="texMathInline">var</span> &#37117;&#24050;&#32465;&#23450;&#12290;</p></li><li><p>&#27599;&#20010;&#24453;&#27714;&#20540;&#30340;&#24046;&#20540;&#34920;&#36798;&#24335; <span class="stt">(diff-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">)</span> &#20013;&#65292;<span class="texMathInline">exp_1</span>
&#21644; <span class="texMathInline">exp_2</span> &#30340;&#20540;&#37117;&#26159; <span class="stt">num-val</span>&#12290;</p></li><li><p>&#27599;&#20010;&#24453;&#27714;&#20540;&#30340;&#34920;&#36798;&#24335; <span class="stt">(zero?-exp </span><span class="texMathInline">exp_1</span><span class="stt">)</span> &#20013;&#65292;<span class="texMathInline">exp_1</span> &#30340;&#20540;&#37117;&#26159;
<span class="stt">num-val</span>&#12290;</p></li><li><p>&#27599;&#20010;&#24453;&#27714;&#20540;&#30340;&#26465;&#20214;&#34920;&#36798;&#24335; <span class="stt">(if-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">exp_3</span><span class="stt">)</span> &#20013;&#65292;
<span class="texMathInline">exp_1</span> &#30340;&#20540;&#37117;&#26159; <span class="stt">bool-val</span>&#12290;</p></li><li><p>&#27599;&#20010;&#24453;&#27714;&#20540;&#30340;&#36807;&#31243;&#35843;&#29992; <span class="stt">(call-exp </span><span class="texMathInline">rator</span><span class="stt"> </span><span class="texMathInline">rand</span><span class="stt">)</span> &#20013;&#65292;<span class="texMathInline">rator</span> &#30340;
&#20540;&#37117;&#26159; <span class="stt">proc-val</span>&#12290;</p></li></ol><p>&#36825;&#20123;&#26465;&#20214;&#30830;&#20445;&#27599;&#20010;&#25805;&#20316;&#31526;&#37117;&#20316;&#29992;&#20110;&#27491;&#30830;&#31867;&#22411;&#30340;&#25805;&#20316;&#25968;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#35828;&#36829;&#21453;&#36825;&#20123;&#26465;&#20214;
&#26159;<span class="emph">&#31867;&#22411;&#38169;&#35823;</span> (<span class="emph">type error</span>)&#12290;</p><p>&#23433;&#20840;&#30340;&#27714;&#20540;&#20173;&#21487;&#33021;&#22240;&#20026;&#20854;&#20182;&#21407;&#22240;&#32780;&#22833;&#36133;&#65306;&#38500;&#20197;&#38646;&#65292;&#21462;&#31354;&#21015;&#34920;&#30340; <span class="stt">car</span>&#65292;&#31561;&#31561;&#12290;&#25105;&#20204;&#19981;&#25226;
&#36825;&#20123;&#31639;&#20316;&#23433;&#20840;&#30340;&#23450;&#20041;&#65292;&#22240;&#20026;&#22312;&#39044;&#27979;&#23433;&#20840;&#24615;&#26102;&#65292;&#20445;&#35777;&#36825;&#20123;&#26465;&#20214;&#35201;&#27604;&#19978;&#38754;&#21015;&#20986;&#30340;&#38590;&#24471;&#22810;&#12290;&#21516;&#26679;&#22320;&#65292;
&#23433;&#20840;&#30340;&#27714;&#20540;&#21487;&#33021;&#27704;&#36828;&#36816;&#34892;&#12290;&#25105;&#20204;&#30340;&#23433;&#20840;&#23450;&#20041;&#19981;&#21253;&#21547;&#19981;&#32456;&#27490;&#65292;&#22240;&#20026;&#26816;&#26597;&#31243;&#24207;&#26159;&#21542;&#32456;&#27490;&#20063;&#24456;&#22256;&#38590;
&#65288;&#20107;&#23454;&#19978;&#65292;&#36825;&#19968;&#33324;&#26159;&#26080;&#27861;&#21028;&#23450;&#30340;&#65289;&#12290;&#26377;&#20123;&#35821;&#35328;&#30340;&#31867;&#22411;&#31995;&#32479;&#32473;&#20986;&#27604;&#19978;&#36848;&#26356;&#24378;&#30340;&#20445;&#35777;&#65292;&#20294;&#23427;&#20204;&#35201;
&#27604;&#25105;&#20204;&#36825;&#37324;&#32771;&#34385;&#30340;&#22797;&#26434;&#24471;&#22810;&#12290;</p><p>&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#20889;&#20986;&#36807;&#31243;&#65292;&#26597;&#30475;&#31243;&#24207;&#25991;&#26412;&#65292;&#25509;&#21463;&#25110;&#32773;&#25298;&#32477;&#23427;&#12290;&#32780;&#19988;&#65292;&#25105;&#20204;&#24076;&#26395;&#25105;&#20204;&#30340;&#20998;&#26512;&#36807;&#31243;
&#20445;&#23432;&#19968;&#28857;&#65306;&#22914;&#26524;&#20998;&#26512;&#25509;&#21463;&#31243;&#24207;&#65292;&#37027;&#20040;&#25105;&#20204;&#30830;&#20445;&#27714;&#31243;&#24207;&#30340;&#20540;&#26159;&#23433;&#20840;&#30340;&#12290;&#22914;&#26524;&#20998;&#26512;&#19981;&#33021;&#30830;&#23450;&#27714;&#20540;
&#26159;&#21542;&#23433;&#20840;&#65292;&#23427;&#24517;&#39035;&#25298;&#32477;&#31243;&#24207;&#12290;&#25105;&#20204;&#31216;&#36825;&#26679;&#30340;&#20998;&#26512;&#26159;<span class="emph">&#20581;&#22766;&#30340;</span> (<span class="emph">sound</span>)&#12290;
<a name="(idx._(gentag._1077))"></a></p><p>&#25298;&#32477;&#25152;&#26377;&#31243;&#24207;&#30340;&#20998;&#26512;&#20173;&#26159;&#20581;&#22766;&#30340;&#65292;&#21487;&#25105;&#20204;&#36824;&#26159;&#24819;&#35753;&#25105;&#20204;&#30340;&#20998;&#26512;&#25509;&#21463;&#19968;&#22823;&#25209;&#31243;&#24207;&#12290;&#26412;&#31456;&#30340;&#20998;&#26512;
&#23558;&#25509;&#21463;&#36275;&#22815;&#22810;&#30340;&#31243;&#24207;&#65292;&#22240;&#27492;&#26159;&#26377;&#29992;&#30340;&#12290;</p><p>&#36825;&#37324;&#26159;&#19968;&#20123;&#31034;&#20363;&#31243;&#24207;&#65292;&#20197;&#21450;&#23427;&#20204;&#24212;&#34987;&#20998;&#26512;&#25298;&#32477;&#25110;&#25509;&#21463;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">if 3 then 88 else 99</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25298;&#32477;&#65306;&#26465;&#20214;&#38750;&#24067;&#23572;&#20540;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">proc (x) (3 x)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25298;&#32477;&#65306;rator&#38750;&#36807;&#31243;&#20540;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">proc (x) (x 3)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25509;&#21463;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">proc (f) proc (x) (f x)</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25509;&#21463;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">let x = 4 in (x 3)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25298;&#32477;&#65306;rator&#38750;&#36807;&#31243;&#20540;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(proc (x) (x 3)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25298;&#32477;&#65306;&#21516;&#21069;&#20363;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">4)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let x = zero?(0)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25298;&#32477;&#65306;diff-exp &#21442;&#25968;&#38750;&#25972;&#25968;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">in -(3, x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(proc (x) -(3,x)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25298;&#32477;&#65306;&#21516;&#21069;&#20363;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">zero?(0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let f = 3</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25298;&#32477;&#65306;rator&#38750;&#36807;&#31243;&#20540;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">in proc (x) (f x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(proc (f) proc (x) (f x)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="Smaller">&#25298;&#32477;&#65306;&#21516;&#21069;&#20363;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">letrec f(x) = (f -(x,-1)) </span><span class="Smaller">&#25509;&#21463;&#65292;&#19981;&#32456;&#27490;&#65292;&#20294;&#26159;&#23433;&#20840;</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">in (f 1)</span></p></td></tr></table></blockquote><p>&#34429;&#28982;&#26368;&#21518;&#19968;&#20010;&#20363;&#23376;&#27714;&#20540;&#19981;&#32456;&#27490;&#65292;&#20294;&#26681;&#25454;&#19978;&#36848;&#23450;&#20041;&#65292;&#27714;&#20540;&#20173;&#26159;&#23433;&#20840;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#30340;&#20998;&#26512;&#21487;&#20197;&#25509;
&#21463;&#23427;&#12290;&#20043;&#25152;&#20197;&#25509;&#21463;&#23427;&#65292;&#26159;&#22240;&#20026;&#25105;&#20204;&#30340;&#20998;&#26512;&#22120;&#19981;&#22815;&#22909;&#65292;&#19981;&#36275;&#20197;&#21028;&#23450;&#36825;&#20010;&#31243;&#24207;&#19981;&#20250;&#32456;&#27490;&#12290;
<a name="(idx._(gentag._1078))"></a></p><h4 class="heading">7.1<tt>&nbsp;</tt><a name="(part._s7..1)"></a>&#20540;&#21450;&#20854;&#31867;&#22411;<span class="button-group"><a href="#(part._s7..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1079))"></a>
&#30001;&#20110;&#23433;&#20840;&#26465;&#20214;&#21482;&#28041;&#21450; <span class="stt">num-val</span>&#12289;<span class="stt">bool-val</span> &#21644; <span class="stt">proc-val</span>&#65292;&#26377;&#20154;&#21487;&#33021;&#20197;&#20026;&#35760;
&#24405;&#36825;&#19977;&#31181;&#31867;&#22411;&#23601;&#36275;&#22815;&#20102;&#12290;&#20294;&#37027;&#26159;&#19981;&#22815;&#30340;&#65306;&#22914;&#26524;&#25105;&#20204;&#21482;&#30693;&#36947; <span class="stt">f</span> &#32465;&#23450;&#21040;&#19968;&#20010;
<span class="stt">proc-val</span>&#65292;&#25105;&#20204;&#26681;&#26412;&#26080;&#27861;&#30830;&#35748; <span class="stt">(f 1)</span> &#30340;&#20540;&#12290;&#20174;&#36825;&#20010;&#35282;&#24230;&#26469;&#30475;&#65292;&#25105;&#20204;&#38656;&#35201;&#26356;&#32454;&#33268;
&#22320;&#35760;&#24405;&#19982;&#36807;&#31243;&#30456;&#20851;&#30340;&#20449;&#24687;&#12290;&#36825;&#20123;&#26356;&#32454;&#33268;&#30340;&#20449;&#24687;&#21483;&#20570;&#35821;&#35328;&#30340;<span class="emph">&#31867;&#22411;&#32467;
&#26500;</span> (<span class="emph">type structure</span>)&#12290;</p><p>&#25105;&#20204;&#30340;&#35821;&#35328;&#23558;&#26377;&#19968;&#31181;&#38750;&#24120;&#31616;&#21333;&#30340;&#31867;&#22411;&#32467;&#26500;&#12290;&#29616;&#22312;&#65292;&#32771;&#34385; LETREC &#20013;&#30340;&#34920;&#36798;&#20540;&#12290;&#36825;&#20123;&#20540;&#21482;&#21253;&#21547;
&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#20294;&#22788;&#29702; &#20013;&#30340;&#22810;&#21442;&#25968;&#36807;&#31243;&#20063;&#24456;&#26126;&#20102;&#65306;&#21482;&#38656;&#20570;&#20123;&#39069;&#22806;&#24037;&#20316;&#65292;
&#27809;&#26377;&#20219;&#20309;&#26032;&#24605;&#24819;&#12290;</p><blockquote class="SubFlow"><p>\begin{cornertext}[title=&#31867;&#22411;&#35821;&#27861;]
<span class="Iidentity">\begin{align*}\mathit{Type} &amp;::= \mathit{int} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">int-type ()</span>} \\[5pt]
    \mathit{Type} &amp;::= \mathit{bool} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">bool-type ()</span>} \\[5pt]
    \mathit{Type} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Type}</span><span class="stt"> -&gt; </span><span class="Iidentity">\mathit{Type}</span><span class="stt">)</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">proc-type (arg-type result-type)</span>}\end{align*}</span>
\end{cornertext}</p></blockquote><p>&#35201;&#29702;&#35299;&#36825;&#20010;&#31995;&#32479;&#22914;&#20309;&#24037;&#20316;&#65292;&#35753;&#25105;&#20204;&#26469;&#30475;&#20123;&#20363;&#23376;&#12290;</p><blockquote class="SubFlow"><p><div class="SIntrapara">\begin{cornertext}[title=&#20540;&#21450;&#20854;&#31867;&#22411;&#30340;&#20363;&#23376;]
</div><div class="SIntrapara"><blockquote class="SubFlow"><p><span class="stt">3</span> &#30340;&#20540;&#31867;&#22411;&#20026; <span class="stt">int</span>&#12290;</p><p><span class="stt">-(33,22)</span> &#30340;&#20540;&#31867;&#22411;&#20026; <span class="stt">int</span>&#12290;</p><p><span class="stt">zero?(11)</span> &#30340;&#20540;&#31867;&#22411;&#20026;<span class="stt">bool</span>&#12290;</p><p><span class="stt">proc (x) -(x,11)</span> &#30340;&#20540;&#31867;&#22411;&#20026; <span class="stt">int -&gt; int</span>&#65292;&#22240;&#20026;&#32473;&#23450;&#19968;&#20010;&#25972;&#25968;&#26102;&#65292;&#23427;&#36820;&#22238;&#19968;&#20010;
&#25972;&#25968;&#12290;</p><p><span class="stt">proc (x) let y = -(x,11) in -(x,y)</span><br/>&#30340;&#20540;&#31867;&#22411;&#20026; <span class="stt">int -&gt; int</span>&#65292;
&#22240;&#20026;&#32473;&#23450;&#19968;&#20010;&#25972;&#25968;&#26102;&#65292;&#23427;&#36820;&#22238;&#19968;&#20010;&#25972;&#25968;&#12290;</p><p><span class="stt">proc (x) if x then 11 else 22</span><br/>&#30340;&#20540;&#31867;&#22411;&#20026; <span class="stt">bool -&gt; int</span>&#65292;&#22240;&#20026;
&#32473;&#23450;&#19968;&#20010;&#24067;&#23572;&#20540;&#26102;&#65292;&#23427;&#36820;&#22238;&#19968;&#20010;&#25972;&#25968;&#12290;</p><p><span class="stt">proc (x) if x then 11 else zero?(11)</span> &#22312;&#25105;&#20204;&#30340;&#31867;&#22411;&#31995;&#32479;&#20013;&#27809;&#26377;&#31867;&#22411;&#65292;&#22240;&#20026;&#32473;&#23450;&#19968;
&#20010;&#24067;&#23572;&#20540;&#26102;&#65292;&#23427;&#26082;&#21487;&#33021;&#36820;&#22238;&#19968;&#20010;&#25972;&#25968;&#65292;&#20063;&#21487;&#33021;&#36820;&#22238;&#19968;&#20010;&#24067;&#23572;&#20540;&#65292;&#32780;&#25105;&#20204;&#27809;&#26377;&#25551;&#36848;&#36825;&#31181;&#34892;&#20026;&#30340;
&#31867;&#22411;&#12290;</p><p><span class="stt">proc (x) proc (y) if y then x else 11</span><br/>&#30340;&#20540;&#31867;&#22411;&#20026; <span class="stt">(int -&gt;
(bool -&gt; int))</span>&#65292;&#22240;&#20026;&#32473;&#23450;&#19968;&#20010;&#24067;&#23572;&#20540;&#26102;&#65292;&#23427;&#36820;&#22238;&#19968;&#20010;&#36807;&#31243;&#65292;&#35813;&#36807;&#31243;&#21462;&#19968;&#24067;&#23572;&#20540;&#65292;&#36820;&#22238;&#19968;
&#25972;&#25968;&#12290;</p><p><span class="stt">proc (f) (f 3)</span> &#30340;&#20540;&#31867;&#22411;&#20026; <span class="stt">((int -&gt; </span><span class="texMathInline">t</span><span class="stt">) -&gt; </span><span class="texMathInline">t</span><span class="stt">)</span>&#65292;<span class="texMathInline">t</span> &#26159;&#20219;&#24847;&#31867;&#22411;&#65292;
&#22240;&#20026;&#32473;&#23450;&#19968;&#20010;&#31867;&#22411;&#20026; <span class="stt">(int -&gt; </span><span class="texMathInline">t</span><span class="stt">)</span> &#30340;&#36807;&#31243;&#65292;&#23427;&#36820;&#22238;&#31867;&#22411;&#20026; <span class="texMathInline">t</span> &#30340;&#20540;&#12290;</p><p><span class="stt">proc (f) proc (x) (f (f x))</span> &#30340;&#20540;&#31867;&#22411;&#20026; <span class="stt">((</span><span class="texMathInline">t</span><span class="stt"> -&gt; </span><span class="texMathInline">t</span><span class="stt">) -&gt; (</span><span class="texMathInline">t</span><span class="stt"> -&gt;</span><span class="stt">
</span><span class="texMathInline">t</span><span class="stt">))</span>&#65292;<span class="texMathInline">t</span> &#26159;&#20219;&#24847;&#31867;&#22411;&#65292;&#22240;&#20026;&#32473;&#23450;&#19968;&#20010;&#31867;&#22411;&#20026; <span class="stt">(</span><span class="texMathInline">t</span><span class="stt"> -&gt; </span><span class="texMathInline">t</span><span class="stt">)</span> &#30340;&#36807;&#31243;&#65292;&#23427;
&#36820;&#22238;&#21478;&#19968;&#36807;&#31243;&#65292;&#35813;&#36807;&#31243;&#21462;&#19968;&#31867;&#22411;&#20026; <span class="texMathInline">t</span> &#30340;&#21442;&#25968;&#65292;&#36820;&#22238;&#19968;&#31867;&#22411;&#20026; <span class="texMathInline">t</span> &#30340;&#20540;&#12290;</p></blockquote></div><div class="SIntrapara">
\end{cornertext}</div></p></blockquote><p>&#25105;&#20204;&#29992;&#19979;&#38754;&#30340;&#23450;&#20041;&#35299;&#37322;&#36825;&#20123;&#20363;&#23376;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplDefinition"><p><a name="(elem._d7..1..1)"></a><span class="hspace">&nbsp;</span>&#24615;&#36136;&#8220;&#34920;&#36798;&#20540;v&#30340;&#31867;&#22411;&#20026;t&#8221;&#30001;&#23545; t &#36827;&#34892;&#24402;&#32435;&#24471;&#21040;&#65306;</p><ul><li><p>&#24403;&#19988;&#20165;&#24403;&#34920;&#36798;&#20540;&#26159;&#19968;&#20010; <span class="stt">num-val</span>&#65292;&#20854;&#31867;&#22411;&#20026; <span class="stt">int</span>&#12290;
<a name="(idx._(gentag._1080))"></a></p></li><li><p>&#24403;&#19988;&#20165;&#24403;&#34920;&#36798;&#20540;&#26159;&#19968;&#20010; <span class="stt">bool-val</span>&#65292;&#20854;&#31867;&#22411;&#20026; <span class="stt">bool</span>&#12290;
<a name="(idx._(gentag._1081))"></a></p></li><li><p>&#24403;&#19988;&#20165;&#24403;&#34920;&#36798;&#20540;&#26159;&#19968;&#20010; <span class="stt">proc-val</span>&#65292;&#19988;&#32473;&#23450;&#31867;&#22411;&#20026; <span class="texMathInline">t_1</span> &#30340;&#21442;&#25968;&#26102;&#65292;&#21457;&#29983;
&#22914;&#19979;&#20043;&#19968;&#65306;<a name="(idx._(gentag._1082))"></a><a name="(idx._(gentag._1083))"></a></p><ol><li><p>&#36820;&#22238;&#20540;&#31867;&#22411;&#20026; <span class="texMathInline">t_2</span></p></li><li><p>&#19981;&#32456;&#27490;</p></li><li><p>&#21457;&#29983;&#31867;&#22411;&#38169;&#35823;&#20043;&#22806;&#30340;&#38169;&#35823;</p></li></ol><p>&#20854;&#31867;&#22411;&#20026; <span class="stt">(</span><span class="texMathInline">t_1 \to t_2</span><span class="stt">)</span>&#12290;</p></li></ul></blockquote><p>&#26377;&#26102;&#65292;&#25105;&#20204;&#19981;&#35828;&#8220;<span class="texMathInline">v</span>&#31867;&#22411;&#20026;<span class="texMathInline">t</span>&#8221;&#65292;&#32780;&#35828;
&#8220;<span class="texMathInline">v</span> &#20855;&#26377;&#31867;&#22411; <span class="texMathInline">t</span>&#8221;&#12290;</p></blockquote><p>&#27492;&#23450;&#20041;&#24402;&#32435;&#33258; <span class="texMathInline">t</span>&#12290;&#20294;&#26159;&#23427;&#20381;&#36182;&#20110;&#19978;&#38754;&#21478;&#34892;&#23450;&#20041;&#30340;&#31867;&#22411;&#38169;&#35823;&#12290;</p><p>&#22312;&#35813;&#31995;&#32479;&#20013;&#65292;&#20540; <span class="texMathInline">v</span> &#21487;&#20197;&#26377;&#22810;&#20010;&#31867;&#22411;&#12290;&#27604;&#22914;&#65292;&#20540; <span class="stt">proc (x) x</span> &#31867;&#22411;&#20026; <span class="stt">(</span><span class="texMathInline">t
\to t</span><span class="stt">)</span>&#65292;<span class="texMathInline">t</span> &#26159;&#20219;&#24847;&#31867;&#22411;&#12290;&#26377;&#20123;&#20540;&#21487;&#33021;&#27809;&#26377;&#31867;&#22411;&#65292;&#27604;&#22914; <span class="stt">proc (x) if x then 11
else zero?(11)</span>&#12290;
<a name="(idx._(gentag._1084))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex7..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19979;&#38754;&#26159;&#19968;&#20123;&#21547;&#26377;&#38381;&#21253;&#30340;&#34920;&#36798;&#24335;&#12290;&#24819;&#24819;&#27599;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#27599;&#20010;&#20540;&#30340;&#31867;&#22411;&#26159;&#20160;&#20040;&#65288;&#21487;&#33021;&#19981;&#27490;&#19968;
&#20010;&#65289;&#65311;&#26377;&#20123;&#20540;&#30340;&#31867;&#22411;&#22312;&#25105;&#20204;&#30340;&#26377;&#31867;&#22411;&#35821;&#35328;&#20013;&#21487;&#33021;&#26080;&#27861;&#25551;&#36848;&#12290;</p><ol><li><p><span class="stt">proc (x) -(x,3)</span></p></li><li><p><span class="stt">proc (f) proc (x) -((f x), 1)</span></p></li><li><p><span class="stt">proc (x) x</span></p></li><li><p><span class="stt">proc (x) proc (y) (x y)</span></p></li><li><p><span class="stt">proc (x) (x 3)</span></p></li><li><p><span class="stt">proc (x) (x x)</span></p></li><li><p><span class="stt">proc (x) if x then 88 else 99</span></p></li><li><p><span class="stt">proc (x) proc (y) if x then y else 99</span></p></li><li><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">(proc (p) if p then 88 else 99</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">33)</span></p></td></tr></table></li><li><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">(proc (p) if p then 88 else 99</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">proc (z) z)</span></p></td></tr></table></li><li><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">proc (f)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">proc (g)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">proc (p)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (x) if (p (f x)) then (g 1) else -((f x),1)</span></p></td></tr></table></li><li><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">proc(p)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">proc (f)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">if (p x) then -(x,1) else (f p)</span></p></td></tr></table></li><li><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">proc (f)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">let d = proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (z) ((f (x x)) z)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">in proc (n) ((f (d d)) n)</span></p></td></tr></table></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..2)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#26681;&#25454;&#65292;&#26377;&#27809;&#26377;&#34920;&#36798;&#20540;&#24688;&#22909;&#26377;&#20004;&#31181;&#31867;&#22411;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..3)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;&#35821;&#35328; LETREC &#20013;&#65292;&#33021;&#21542;&#21028;&#23450;&#34920;&#36798;&#20540; <span class="texMathInline">val</span> &#30340;&#31867;&#22411;&#20026; <span class="texMathInline">t</span>&#65311;</p></blockquote><h4 class="heading">7.2<tt>&nbsp;</tt><a name="(part._s7..2)"></a>&#36171;&#20104;&#34920;&#36798;&#20540;&#31867;&#22411;<span class="button-group"><a href="#(part._s7..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1085))"></a>
&#29616;&#22312;&#65292;&#25105;&#20204;&#21482;&#35299;&#20915;&#20102;&#34920;&#36798;&#20540;&#30340;&#31867;&#22411;&#12290;&#20026;&#20102;&#20998;&#26512;&#31243;&#24207;&#65292;&#25105;&#20204;&#35201;&#20889;&#20986;&#36807;&#31243;&#65292;&#39044;&#27979;&#34920;&#36798;&#24335;&#20540;&#30340;&#31867;&#22411;&#12290;</p><p>&#26356;&#20934;&#30830;&#22320;&#35828;&#65292;&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#20889;&#20986;&#36807;&#31243; <span class="stt">type-of</span>&#12290;&#32473;&#23450;&#19968;&#20010;&#34920;&#36798;&#24335;&#65288;&#21517;&#20026; <span class="texMathInline">exp</span>&#65289;&#21644;
&#19968;&#20010;&#23558;&#21464;&#37327;&#26144;&#23556;&#21040;&#26576;&#19968;&#31867;&#22411;&#30340;<span class="emph">&#31867;&#22411;&#29615;&#22659;</span> (<span class="emph">type environment</span>)&#65288;&#21517;&#20026;<span class="texMathInline">tenv</span>&#65289;&#65292;
<a name="(idx._(gentag._1086))"></a>
<a name="(idx._(gentag._1087))"></a>
&#23427;&#36171;&#32473; <span class="texMathInline">exp</span> &#19968;&#20010;&#31867;&#22411; <span class="texMathInline">t</span>&#65292;&#19988; <span class="texMathInline">t</span> &#20855;&#26377;&#24615;&#36136;&#65306;</p><blockquote class="SubFlow"><p><div class="SIntrapara">\begin{cornertext}[title=<span class="stt">type-of</span> &#35268;&#33539;]
</div><div class="SIntrapara"><blockquote class="SubFlow"><p>&#19981;&#35770;&#20309;&#26102;&#27714; <span class="texMathInline">exp</span> &#30340;&#20540;&#65292;&#33509;&#29615;&#22659;&#20013;&#25152;&#26377;&#21464;&#37327;&#23545;&#24212;&#20540;&#30340;&#31867;&#22411;&#37117;&#30001; <span class="texMathInline">tenv</span> &#25351;&#23450;&#65292;&#21017;&#21457;&#29983;
&#22914;&#19979;&#20043;&#19968;&#65306;</p><ul><li><p>&#32467;&#26524;&#31867;&#22411;&#20026; <span class="texMathInline">t</span>&#65292;</p></li><li><p>&#27714;&#20540;&#19981;&#32456;&#27490;&#65292;&#25110;</p></li><li><p>&#27714;&#20540;&#22240;&#31867;&#22411;&#38169;&#35823;&#20043;&#22806;&#30340;&#21407;&#22240;&#22833;&#36133;&#12290;</p></li></ul></blockquote></div><div class="SIntrapara">
\end{cornertext}</div></p></blockquote><p><a name="(idx._(gentag._1088))"></a>
&#22914;&#26524;&#25105;&#20204;&#21487;&#20197;&#36171;&#20104;&#34920;&#36798;&#24335;&#19968;&#20010;&#31867;&#22411;&#65292;&#25105;&#20204;&#35828;&#35813;&#34920;&#36798;&#24335;&#26159;<span class="emph">&#27491;&#24120;&#31867;&#22411;</span> (<span class="emph">well-typed</span>) &#30340;&#65292;
&#21542;&#21017;&#35828;&#23427;&#26159;<span class="emph">&#24322;&#24120;&#31867;&#22411;</span> (<span class="emph">ill-typed</span>) &#25110;<span class="emph">&#26080;&#31867;&#22411;</span>
&#30340;&#12290;<a name="(idx._(gentag._1089))"></a><a name="(idx._(gentag._1090))"></a></p><p>&#25105;&#20204;&#30340;&#20998;&#26512;&#22522;&#20110;&#20197;&#19979;&#21407;&#21017;&#65306;&#22914;&#26524;&#25105;&#20204;&#33021;&#39044;&#27979;&#34920;&#36798;&#24335;&#20013;&#25152;&#26377;&#23376;&#34920;&#36798;&#24335;&#30340;&#20540;&#31867;&#22411;&#65292;&#23601;&#33021;&#39044;&#27979;&#34920;&#36798;
&#24335;&#30340;&#20540;&#31867;&#22411;&#12290;</p><p>&#25105;&#20204;&#29992;&#36825;&#19968;&#24819;&#27861;&#20889;&#20986; <span class="stt">type-of</span> &#36981;&#24490;&#30340;&#19968;&#20123;&#35268;&#21017;&#12290;&#35774; <span class="texMathInline">tenv</span> &#20026;&#19968;<span class="emph">&#31867;&#22411;&#29615;&#22659;</span>&#65292;
&#23558;&#21508;&#20010;&#21464;&#37327;&#26144;&#23556;&#21040;&#31867;&#22411;&#12290;&#37027;&#20040;&#25105;&#20204;&#26377;&#65306;</p><blockquote class="SubFlow"><p><div class="SIntrapara">\begin{cornertext}[title=&#31616;&#21333;&#21028;&#31867;&#35268;&#21017;]
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(type-of (const-exp </span><span class="texMathInline">num</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(type-of (var-exp </span><span class="texMathInline">num</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">tenv</span><span class="stt">(</span><span class="texMathInline">var</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">\infer{<span class="stt">(type-of (zero?-exp </span><span class="texMathInline">exp_1</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = bool</span>}
      {<span class="stt">(type-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = int</span>}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">\infer{<span class="stt">(type-of (diff-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = int</span>}
      {<span class="stt">(type-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = int</span> &amp;
       <span class="stt">(type-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = int</span>}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">\infer{<span class="stt">(type-of (let-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_2</span>}
      {<span class="stt">(type-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_1</span> &amp;
       <span class="stt">(type-of </span><span class="texMathInline">body</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">t_1</span><span class="stt">]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_2</span>}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">\infer{<span class="stt">(type-of (if-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">exp_3</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span>}
      {\begin{gathered}
       <span class="stt">(type-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = bool</span> \\
       <span class="stt">(type-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span> \\
       <span class="stt">(type-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span>
       \end{gathered}}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">\infer{<span class="stt">(type-of (call-exp </span><span class="texMathInline">rator</span><span class="stt"> </span><span class="texMathInline">rand</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_2</span>}
      {<span class="stt">(type-of </span><span class="texMathInline">rator</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_1 \to t_2</span> &amp;
       <span class="stt">(type-of </span><span class="texMathInline">rand</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_1</span>}</span></p></td></tr></table></div><div class="SIntrapara">
\end{cornertext}</div></p></blockquote><p><a name="(elem._suitable-env)"></a>&#33509;&#25105;&#20204;&#22312;&#36866;&#24403;&#30340;&#29615;&#22659;&#20013;&#27714;&#31867;&#22411;&#20026; <span class="texMathInline">t</span> &#30340;&#34920;&#36798;&#24335; <span class="texMathInline">exp</span> &#30340;
&#20540;&#65292;&#25105;&#20204;&#19981;&#20165;&#30693;&#36947;&#20540;&#30340;&#31867;&#22411;&#20026; <span class="texMathInline">t</span>&#65292;&#32780;&#19988;&#30693;&#36947;&#19982;&#36825;&#20010;&#20540;&#26377;&#20851;&#30340;&#21382;&#21490;&#20449;&#24687;&#12290;&#22240;&#20026;&#27714;
<span class="texMathInline">exp</span> &#30340;&#20540;&#20445;&#35777;&#26159;&#23433;&#20840;&#30340;&#65292;&#25105;&#20204;&#30693;&#36947; <span class="texMathInline">exp</span> &#30340;&#20540;&#19968;&#23450;&#26159;&#30001;&#31526;&#21512;&#31867;&#22411; <span class="texMathInline">t</span> &#30340;&#25805;&#20316;&#31526;&#20135;
&#29983;&#30340;&#12290;&#22312;<a href="#%28part._modules%29" data-pltdoc="x">&#27169;&#22359;</a>&#65292;&#25105;&#20204;&#26356;&#32454;&#33268;&#22320;&#24605;&#32771;&#25968;&#25454;&#25277;&#35937;&#26102;&#65292;&#36825;&#31181;&#35266;&#28857;&#20250;&#24456;&#26377;&#24110;&#21161;&#12290;</p><p><a name="(idx._(gentag._1091))"></a>
&#36807;&#31243;&#21602;&#65311;&#22914;&#26524; <span class="stt">proc(</span><span class="texMathInline">var</span><span class="stt">) </span><span class="texMathInline">body</span> &#31867;&#22411;&#20026; <span class="texMathInline">t_1 \to t_2</span>&#65292;&#37027;&#20040;&#24212;&#35813;&#29992;&#31867;&#22411;
&#20026; <span class="texMathInline">t_1</span> &#30340;&#21442;&#25968;&#35843;&#29992;&#23427;&#12290;&#27714; <span class="texMathInline">body</span> &#30340;&#20540;&#26102;&#65292;&#32465;&#23450;&#21040;&#21464;&#37327; <span class="texMathInline">var</span> &#30340;&#20540;&#31867;&#22411;&#20026;
<span class="texMathInline">t_1</span>&#12290;</p><p>&#36825;&#24847;&#21619;&#30528;&#22914;&#19979;&#35268;&#21017;&#65306;</p><p><span class="texMathDisplay">\infer{<span class="stt">(type-of (proc-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_1 \to t_2</span>}
      {<span class="stt">(type-of </span><span class="texMathInline">body</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">t_1</span><span class="stt">]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_2</span>}</span></p><p>&#36825;&#26465;&#35268;&#21017;&#26159;&#20581;&#22766;&#30340;&#65306;&#22914;&#26524; <span class="stt">type-of</span> &#23545; <span class="texMathInline">body</span> &#20570;&#20986;&#20102;&#27491;&#30830;&#39044;&#27979;&#65292;&#37027;&#20040;&#23427;&#20063;&#33021;&#23545;
<span class="stt">(proc-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">)</span> &#20570;&#20986;&#27491;&#30830;&#39044;&#27979;&#12290;</p><p>&#21482;&#26377;&#19968;&#20010;&#38382;&#39064;&#65306;&#22914;&#26524;&#25105;&#20204;&#35201;&#35745;&#31639; <span class="stt">proc</span> &#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#65292;&#25105;&#20204;&#24590;&#20040;&#25214;&#20986;&#32465;&#23450;&#21464;&#37327;&#30340;&#31867;&#22411;
<span class="texMathInline">t_1</span>&#65311;&#23427;&#26080;&#22788;&#21487;&#23547;&#12290;</p><p>&#35201;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#26377;&#20004;&#31181;&#26631;&#20934;&#35774;&#35745;&#65306;</p><ul><li><p><span class="emph">&#31867;&#22411;&#26816;&#26597;</span> (<span class="emph">Type Checking</span>)&#65306;&#25353;&#36825;&#31181;&#26041;&#27861;&#65292;&#31243;&#24207;&#21592;&#38656;&#35201;&#25351;&#20986;&#32570;&#22833;&#30340;&#32465;&#23450;&#21464;
&#37327;&#31867;&#22411;&#65292;&#31867;&#22411;&#26816;&#26597;&#22120;&#25512;&#26029;&#20854;&#20182;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#65292;&#26816;&#26597;&#23427;&#20204;&#26159;&#21542;&#19968;&#33268;&#12290;</p></li><li><p><span class="emph">&#31867;&#22411;&#25512;&#23548;</span> (<span class="emph">Type Inference</span>)&#65306;&#25353;&#36825;&#31181;&#26041;&#27861;&#65292;&#31867;&#22411;&#26816;&#26597;&#22120;&#26681;&#25454;&#31243;&#24207;&#20013;&#21464;&#37327;&#30340;
&#20351;&#29992;&#65292;&#23581;&#35797;<span class="emph">&#25512;&#26029;</span> (<span class="emph">infer</span>) &#32465;&#23450;&#21464;&#37327;&#30340;&#31867;&#22411;&#12290;&#22914;&#26524;&#35821;&#35328;&#35774;&#35745;&#24471;&#24403;&#65292;&#31867;&#22411;&#26816;&#26597;&#22120;&#21487;&#20197;
&#25512;&#26029;&#20986;&#22823;&#22810;&#25968;&#29978;&#33267;&#25152;&#26377;&#36825;&#26679;&#30340;&#31867;&#22411;&#12290;
<a name="(idx._(gentag._1092))"></a>
<a name="(idx._(gentag._1093))"></a></p></li></ul><p>&#25105;&#20204;&#20381;&#27425;&#30740;&#31350;&#23427;&#20204;&#12290;
<a name="(idx._(gentag._1094))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex7..4)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#29992;&#26412;&#33410;&#30340;&#35268;&#21017;&#65292;&#20687;deriv-tree&#37027;&#26679;&#65292;&#20889;&#20986; <span class="stt">proc (x) x</span> &#21644; <span class="stt">proc (x)
(x y)</span> &#30340;&#31867;&#22411;&#25512;&#23548;&#12290;&#36816;&#29992;&#35268;&#21017;&#65292;&#32473;&#27599;&#20010;&#34920;&#36798;&#24335;&#36171;&#20104;&#33267;&#23569;&#20004;&#31181;&#31867;&#22411;&#12290;&#36825;&#20123;&#34920;&#36798;&#24335;&#30340;&#20540;&#31867;&#22411;&#30456;
&#21516;&#21527;&#65311;</p></blockquote><h4 class="heading">7.3<tt>&nbsp;</tt><a name="(part._s7..3)"></a>CHECKED&#65306;&#24102;&#26377;&#31867;&#22411;&#26816;&#26597;&#30340;&#35821;&#35328;<span class="button-group"><a href="#(part._s7..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1095))"></a>
<a name="(idx._(gentag._1096))"></a>
&#38500;&#20102;&#35201;&#27714;&#31243;&#24207;&#21592;&#20889;&#20986;&#25152;&#26377;&#32465;&#23450;&#21464;&#37327;&#30340;&#31867;&#22411;&#20043;&#22806;&#65292;&#25105;&#20204;&#30340;&#26032;&#35821;&#35328;&#21644; LETREC &#30456;&#21516;&#12290;&#23545;&#30001;
<span class="stt">letrec</span> &#32465;&#23450;&#30340;&#21464;&#37327;&#65292;&#25105;&#20204;&#36824;&#35201;&#27714;&#31243;&#24207;&#21592;&#25351;&#23450;&#36807;&#31243;&#32467;&#26524;&#30340;&#31867;&#22411;&#12290;</p><p>&#36825;&#37324;&#26159;&#19968;&#20123; CHECKED &#31243;&#24207;&#20363;&#23376;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">proc (x : int) -(x,1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">int double (x : int) = if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((double -(x,1)), -2)</span></p></td></tr><tr><td><p><span class="stt">in double</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">proc (f : (bool -&gt; int)) proc (n : int) (f zero?(n))</span></p></td></tr></table></blockquote><p><span class="stt">double</span> &#32467;&#26524;&#30340;&#31867;&#22411;&#20026; <span class="stt">int</span>&#65292;&#20294; <span class="stt">double</span> &#26412;&#36523;&#30340;&#31867;&#22411;&#20026; <span class="stt">(int -&gt; int)</span>&#65292;
&#22240;&#20026;&#23427;&#26159;&#19968;&#20010;&#36807;&#31243;&#65292;&#21462;&#19968;&#25972;&#25968;&#65292;&#36820;&#22238;&#19968;&#25972;&#25968;&#12290;</p><p><a name="(idx._(gentag._1097))"></a>
&#35201;&#23450;&#20041;&#36825;&#31181;&#35821;&#35328;&#30340;&#35821;&#27861;&#65292;&#25105;&#20204;&#25913;&#21464; <span class="stt">proc</span> &#21644; <span class="stt">letrec</span> &#34920;&#36798;&#24335;&#30340;&#29983;&#25104;&#24335;&#12290;</p><blockquote class="SubFlow"><p><div class="SIntrapara">\begin{cornertext}[title=&#20462;&#25913;&#21518;&#30340;&#29983;&#25104;&#24335;&#65292;&#36866;&#29992;&#20110; CHECKED]
</div><div class="SIntrapara"><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">proc (</span><span class="Iidentity">\mathit{Identifier : Type}</span><span class="stt">) </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">proc-exp (var ty body)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">letrec</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \phantom{x}<span class="Iidentity">\mathit{Type}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> : </span><span class="Iidentity">\mathit{Type}</span><span class="stt">) = </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} <span class="stt">in </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{\begin{math}\begin{alignedat}{-1}
                                  &amp;<span class="stt">letrec-exp</span> \\
                                  &amp;\phantom{xx}<span class="stt">(p-result-type p-name b-var b-var-type</span> \\
                                  &amp;\phantom{xxx}<span class="stt">p-body</span> \\
                                  &amp;\phantom{xxx}<span class="stt">letrec-body</span><span class="stt">)</span>
                                 \end{alignedat}\end{math}}\end{align*}</span></p></blockquote></div><div class="SIntrapara">
\end{cornertext}</div></p></blockquote><p>&#23545;&#25351;&#23450;&#32465;&#23450;&#21464;&#37327;&#31867;&#22411;&#30340; <span class="stt">proc</span> &#34920;&#36798;&#24335;&#65292;&#35268;&#21017;&#21464;&#20026;&#65306;</p><p><span class="texMathDisplay">\infer{<span class="stt">(type-of (proc-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">t_{var}</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_{var} \to t_{res}</span>}
      {<span class="stt">(type-of </span><span class="texMathInline">body</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">t_{var}</span><span class="stt">]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_{res}</span>}</span></p><p><span class="stt">letrec</span> &#21602;&#65311;&#20856;&#22411;&#30340; <span class="stt">letrec</span> &#22914;&#19979;&#65306;</p><blockquote class="SCentered"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">t_{res}</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">p</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(</span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: </span><span class="texMathInline">t_{var}</span><span class="stt">) = </span><span class="texMathInline">e_{proc\mbox{-}body}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">in </span><span class="texMathInline">e_{letrec\mbox{-}body}</span></p></td></tr></table></blockquote><p>&#35813;&#34920;&#36798;&#24335;&#22768;&#26126;&#19968;&#20010;&#21517;&#20026; <span class="texMathInline">p</span> &#30340;&#36807;&#31243;&#65292;&#20854;&#24418;&#21442;&#26159;&#31867;&#22411;&#20026; <span class="texMathInline">t_{var}</span> &#30340;&#21464;&#37327; <span class="texMathInline">var</span>&#65292;&#20027;
&#20307;&#20026; <span class="texMathInline">e_{proc\mbox{-}body}</span>&#12290;&#22240;&#27492;&#65292;<span class="texMathInline">p</span> &#30340;&#31867;&#22411;&#24212;&#20026; <span class="texMathInline">t_{var} \to t_{res}</span>&#12290;</p><p>&#26816;&#26597; <span class="stt">letrec</span> &#20013;&#30340;&#34920;&#36798;&#24335; <span class="texMathInline">e_{proc\mbox{-}body}</span> &#21644;
<span class="texMathInline">e_{letrec\mbox{-}body}</span> &#26102;&#65292;&#31867;&#22411;&#29615;&#22659;&#20013;&#30340;&#25152;&#26377;&#21464;&#37327;&#37117;&#24517;&#39035;&#26377;&#27491;&#30830;&#30340;&#31867;&#22411;&#12290;&#25105;&#20204;&#21487;&#20197;
&#29992;&#23450;&#30028;&#35268;&#21017;&#21028;&#26029;&#24403;&#21069;&#20316;&#29992;&#22495;&#23646;&#20110;&#21738;&#20123;&#21464;&#37327;&#65292;&#24182;&#30001;&#27492;&#21028;&#26029;&#21464;&#37327;&#23545;&#24212;&#30340;&#31867;&#22411;&#12290;</p><p><span class="texMathInline">e_{letrec\mbox{-}body}</span> &#22312;&#36807;&#31243;&#21517; <span class="texMathInline">p</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#12290;&#22914;&#19978;&#25152;&#36848;&#65292;<span class="texMathInline">p</span> &#30340;&#31867;&#22411;&#22768;&#26126;
&#20026; <span class="texMathInline">t_{var} \to t_{res}</span>&#12290;&#22240;&#27492;&#65292;&#26816;&#26597; <span class="texMathInline">e_{letrec\mbox{-}body}</span> &#26102;&#30340;&#31867;&#22411;&#29615;&#22659;&#24212;
&#20026;&#65306;</p><p><span class="texMathDisplay">tenv_{letrec\mbox{-}body} = \text{[}p=(t_{var} \to t_{res})\text{]}tenv</span></p><p><span class="texMathInline">e_{proc\mbox{-}body}</span> &#21602;&#65311;<span class="texMathInline">e_{proc\mbox{-}body}</span> &#22312;&#21464;&#37327; <span class="texMathInline">p</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;
<span class="texMathInline">p</span> &#30340;&#31867;&#22411;&#20026; <span class="texMathInline">t_{var} \to t_{res}</span>&#65307;<span class="texMathInline">e_{proc\mbox{-}body}</span> &#20063;&#22312;&#21464;&#37327;
<span class="texMathInline">var</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="texMathInline">var</span> &#30340;&#31867;&#22411;&#20026; <span class="texMathInline">t_{var}</span>&#12290;&#22240;&#27492;&#65292;<span class="texMathInline">e_{proc\mbox{-}body}</span>
&#30340;&#31867;&#22411;&#29615;&#22659;&#24212;&#20026;&#65306;</p><p><span class="texMathDisplay">tenv_{proc\mbox{-}body} = \text{[}var=t_{var}\text{]}tenv_{letrec\mbox{-}body}</span></p><p>&#32780;&#19988;&#65292;&#22312;&#36825;&#20010;&#31867;&#22411;&#29615;&#22659;&#20013;&#65292;<span class="texMathInline">e_{proc\mbox{-}body}</span> &#30340;&#32467;&#26524;&#31867;&#22411;&#24212;&#20026; <span class="texMathInline">t_{res}</span>&#12290;</p><p>&#25226;&#36825;&#20123;&#20889;&#25104;&#19968;&#26465;&#35268;&#21017;&#65292;&#25105;&#20204;&#26377;&#65306;</p><p><span class="texMathDisplay">\infer{<span class="stt">(type-of</span>\ <span class="stt">(letrec-exp</span> <span class="texMathInline">t_{res}</span> p <span class="stt">(</span>var : t_{var}<span class="stt">)</span> <span class="stt">=</span>\
       e_{proc\mbox{-}body} <span class="stt">in</span> e_{letrec\mbox{-}body}<span class="stt">)</span> tenv<span class="stt">)</span> <span class="stt">=</span>\ t}
      {\begin{gathered}
       <span class="stt">(type-of </span><span class="texMathInline">e_{proc\mbox{-}body}</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">t_{var}</span><span class="stt">][</span><span class="texMathInline">p</span><span class="stt">=</span><span class="texMathInline">(t_{var} \to t_{res})</span><span class="stt">]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_{res}</span> \\
       <span class="stt">(type-of </span><span class="texMathInline">e_{letrec\mbox{-}body}</span><span class="stt"> [</span><span class="texMathInline">p</span><span class="stt">=</span><span class="texMathInline">(t_{var} \to t_{res})</span><span class="stt">]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span>
       \end{gathered}}</span></p><p>&#29616;&#22312;&#25105;&#20204;&#24050;&#32463;&#20889;&#20986;&#20102;&#25152;&#26377;&#35268;&#21017;&#65292;&#21487;&#20197;&#23454;&#29616;&#35821;&#35328;&#30340;&#31867;&#22411;&#26816;&#26597;&#22120;&#20102;&#12290;
<a name="(idx._(gentag._1098))"></a></p><h5 class="heading">7.3.1<tt>&nbsp;</tt><a name="(part._s7..3..1)"></a>&#26816;&#26597;&#22120;<span class="button-group"><a href="#(part._s7..3..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#25105;&#20204;&#38656;&#35201;&#27604;&#36739;&#31867;&#22411;&#26159;&#21542;&#30456;&#31561;&#12290;&#25105;&#20204;&#29992;&#36807;&#31243; <span class="stt">check-equal-type!</span> &#20570;&#27604;&#36739;&#65292;&#23427;&#27604;&#36739;&#20004;&#20010;&#31867;
&#22411;&#65292;&#33509;&#20108;&#32773;&#19981;&#31561;&#21017;&#25253;&#38169;&#12290;<span class="stt">check-equal-type!</span> &#30340;&#31532;&#19977;&#20010;&#21442;&#25968;&#26159;&#19968;&#34920;&#36798;&#24335;&#65292;&#25351;&#26126;&#31867;&#22411;&#19981;
&#31561;&#30340;&#20301;&#32622;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">check-equal-type!</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Type} \times \mathit{Exp} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">check-equal-type!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-unequal-types</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">report-unequal-types</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Type} \times \mathit{Exp} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">report-unequal-types</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">check-equal-type!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Types didn't match: ~s != ~a in~%~a"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#19981;&#20351;&#29992; <span class="stt">check-equal-type!</span> &#35843;&#29992;&#30340;&#36820;&#22238;&#20540;&#65292;&#22240;&#27492;&#22914;&#21516;<a href="#%28part._s4..2..2%29" data-pltdoc="x">&#23450;&#20041;&#26174;&#24335;&#24341;&#29992;&#25805;&#20316;</a>&#20013;&#30340;
<span class="stt">setref</span> &#37027;&#26679;&#65292;<span class="stt">check-equal-type!</span> &#30340;&#25191;&#34892;&#21482;&#27714;&#25928;&#26524;&#12290;</p><p>&#36807;&#31243; <span class="stt">report-unequal-types</span> &#29992; <span class="stt">type-to-external-form</span>&#65292;&#23558;&#31867;&#22411;&#36716;&#25442;&#20026;&#26131;&#35835;&#30340;
&#21015;&#34920;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">type-to-external-form</span></span> : <span class="texMathInline">\mathit{Type} \to \mathit{List}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-to-external-form</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">int</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bool</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal"><span class="nobreak">-&gt;</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#35268;&#21017;&#36716;&#25442;&#20026;&#31243;&#24207;&#65292;&#23601;&#20687;&#22788;&#29702;<a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a>&#20013;&#30340;&#35299;&#37322;&#22120;&#37027;&#26679;&#12290;&#32467;&#26524;
&#22914;&ndash;fig-7.3 &#25152;&#31034;&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Tenv} = \mathit{Var} \to \mathit{Type}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">type-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">type-of</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Tenv} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{<span class="stt">(type-of </span><span class="texMathInline">num</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = int</span>}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{<span class="stt">(type-of </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">tenv</span><span class="stt">(</span><span class="texMathInline">var</span><span class="stt">)</span>}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\infer{<span class="stt">(type-of (diff-exp </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = int</span>}{<span class="stt">(type-of </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = int</span> &amp; <span class="stt">(type-of </span><span class="texMathInline">e_2</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = int</span>}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-equal-type!</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-equal-type!</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\infer{<span class="stt">(type-of (zero?-exp </span><span class="texMathInline">e_1</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = bool</span>}{<span class="stt">(type-of </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = int</span>}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-equal-type!</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\infer{<span class="stt">(type-of (if-exp </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt"> </span><span class="texMathInline">e_3</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span>}{\begin{gathered}<span class="stt">(type-of </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = bool</span> \\ <span class="stt">(type-of </span><span class="texMathInline">e_2</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span> \\ <span class="stt">(type-of </span><span class="texMathInline">e_3</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span>\end{gathered}}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-equal-type!</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-equal-type!</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">ty3</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\begin{comment}</td></tr><tr><td><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\end{comment}
\smallskip</td></tr></table></blockquote><blockquote class="caption"><p>CHECKED &#30340; <span class="stt">type-of</span>
<a name="(idx._(gentag._1099))"></a>
<a name="(idx._(gentag._1100))"></a><a name="(elem._fig-7..1)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\fbox{\infer{<span class="stt">(type-of (let-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_2</span>}{<span class="stt">(type-of </span><span class="texMathInline">body</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">t_1</span><span class="stt">]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_2</span> &amp; <span class="stt">(type-of </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_1</span>}}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">exp1-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1-type</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="texMathInline">\fbox{\infer{<span class="stt">(type-of (proc-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">t_{var}</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = (</span><span class="texMathInline">t_{var} \to t_{res}</span><span class="stt">)</span>}{<span class="stt">(type-of </span><span class="texMathInline">body</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">t_{var}</span><span class="stt">]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_res</span>}}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">var-type</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">result-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">var-type</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktSym">var-type</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="texMathInline">\fbox{\infer{<span class="stt">(type-of (call-exp </span><span class="texMathInline">rator</span><span class="stt"> </span><span class="texMathInline">rand</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_2</span>}{<span class="stt">(type-of </span><span class="texMathInline">rator</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = (</span><span class="texMathInline">t_1 \to t_2</span><span class="stt">)</span> &amp; <span class="stt">(type-of </span><span class="texMathInline">rand</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_1</span>}}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">rator-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-equal-type!</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-rator-not-a-proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">rator-type</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>CHECKED &#30340; <span class="stt">type-of</span>&#65292;&#32493;
<a name="(idx._(gentag._1101))"></a>
<a name="(idx._(gentag._1102))"></a><a name="(elem._fig-7..2)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td>\smallskip
\begin{comment}</td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span></td></tr><tr><td>\end{comment}</td></tr><tr><td><span class="texMathInline">\fbox{\infer{<span class="stt">(type-of</span>\ <span class="stt">letrec</span>\ t_{res}\ p\ <span class="stt">(</span>var <span class="stt">:</span> t_{var}<span class="stt">)</span>\ <span class="stt">=</span>\ e_{proc\mbox{-}body}\ <span class="stt">in</span>\ e_{letrec\mbox{-}body}\ tenv<span class="stt">)</span>\ <span class="stt">=</span>\ t}{\begin{gathered}<span class="stt">(type-of </span><span class="texMathInline">e_{proc\mbox{-}body}</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">t_{var}</span><span class="stt">][</span><span class="texMathInline">p</span><span class="stt"> =(</span><span class="texMathInline">t_{var} \to t_{res}</span><span class="stt">)]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_{res}</span> \\ <span class="stt">(type-of </span><span class="texMathInline">e_{letrec\mbox{-}body}</span><span class="stt"> [</span><span class="texMathInline">p</span><span class="stt"> = (</span><span class="texMathInline">t_{var} \to t_{res}</span><span class="stt">)]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span>\end{gathered}}}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">letrec-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-result-type</span><span class="hspace">&nbsp;</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">tenv-for-letrec-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">p-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var-type</span><span class="hspace">&nbsp;</span><span class="RktSym">p-result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">p-body-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv-for-letrec-body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-equal-type!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">p-body-type</span><span class="hspace">&nbsp;</span><span class="RktSym">p-result-type</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv-for-letrec-body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>CHECKED &#30340; <span class="stt">type-of</span>&#65292;&#32493;
<a name="(idx._(gentag._1103))"></a>
<a name="(idx._(gentag._1104))"></a><a name="(elem._fig-7..3)"></a></p></blockquote></blockquote><p><div class="SIntrapara"><a name="(idx._(gentag._1105))"></a>
<a name="(idx._(gentag._1106))"></a>
</div><div class="SIntrapara"><blockquote class="EoplExercise"><p><a name="(elem._ex7..5)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1107))"></a>
<a name="(idx._(gentag._1108))"></a>
<a name="(idx._(gentag._1109))"></a>
&#25193;&#23637;&#26816;&#26597;&#22120;&#65292;&#22788;&#29702;&#22810;&#22768;&#26126; <span class="stt">let</span>&#12289;&#22810;&#21442;&#25968;&#36807;&#31243;&#12289;&#20197;&#21450;&#22810;&#22768;&#26126; <span class="stt">letrec</span>&#12290;&#20320;&#38656;&#35201;&#28155;&#21152;
&#24418;&#22914; <span class="texMathInline">t_1</span><span class="stt"> * </span><span class="texMathInline">t_2</span><span class="stt"> * </span><span class="texMathInline">\dots</span><span class="stt"> * </span><span class="texMathInline">t_n</span><span class="stt"> -&gt; </span><span class="texMathInline">t</span> &#30340;&#31867;&#22411;&#26469;&#22788;&#29702;&#22810;&#21442;&#25968;&#36807;
&#31243;&#12290;
<a name="(idx._(gentag._1110))"></a>
<a name="(idx._(gentag._1111))"></a>
<a name="(idx._(gentag._1112))"></a></p></blockquote></div></p><blockquote class="EoplExercise"><p><a name="(elem._ex7..6)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1113))"></a>
<a name="(idx._(gentag._1114))"></a>
&#25193;&#23637;&#26816;&#26597;&#22120;&#65292;&#22788;&#29702;&#36171;&#20540;&#65288;<a href="#%28part._s4..3%29" data-pltdoc="x">IMPLICIT-REFS&#65306;&#38544;&#24335;&#24341;&#29992;&#35821;&#35328;</a>&#65289;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..7)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1115))"></a>
&#20462;&#25913;&#26816;&#26597; <span class="stt">if-exp</span> &#30340;&#20195;&#30721;&#65292;&#33509;&#26465;&#20214;&#19981;&#26159;&#24067;&#23572;&#20540;&#65292;&#21017;&#19981;&#26816;&#26597;&#20854;&#20182;&#34920;&#36798;&#24335;&#12290;&#32473;&#20986;&#19968;&#20010;&#34920;&#36798;
&#24335;&#65292;&#20351;&#26032;&#26087;&#20004;&#20010;&#29256;&#26412;&#30340;&#26816;&#26597;&#22120;&#34920;&#29616;&#20986;&#19981;&#21516;&#30340;&#34892;&#20026;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..8)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1116))"></a>
&#32473;&#35821;&#35328;&#28155;&#21152;&#31867;&#22411; <span class="stt">pairof</span>&#12290;&#27604;&#22914;&#65292;&#24403;&#19988;&#20165;&#24403;&#19968;&#20010;&#20540;&#26159;&#24207;&#23545;&#65292;&#19988;&#25152;&#21547;&#20540;&#31867;&#22411;&#20026; <span class="texMathInline">t_1</span>
&#21644; <span class="texMathInline">t_2</span> &#26102;&#65292;&#20854;&#31867;&#22411;&#20026; <span class="stt">pairof </span><span class="texMathInline">t_1</span><span class="stt"> * </span><span class="texMathInline">t_2</span>&#12290;&#32473;&#35821;&#35328;&#28155;&#21152;&#19979;&#21015;&#29983;&#25104;&#24335;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Type} &amp;::= <span class="stt">pairof </span><span class="Iidentity">\mathit{Type}</span><span class="stt"> * </span><span class="Iidentity">\mathit{Type}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">pair-type (ty1 ty2)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">pair (</span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> , </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">pair-exp (exp1 exp2)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">unpair </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} <span class="stt">in </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">unpair-exp (var1 var2 exp body)</span>}\end{align*}</span></p><p><span class="stt">pair</span> &#34920;&#36798;&#24335;&#29983;&#25104;&#19968;&#20010;&#24207;&#23545;&#65292;<span class="stt">unpair</span> &#34920;&#36798;&#24335;&#65288;&#21516;&#65289;&#23558;&#20004;
&#20010;&#21464;&#37327;&#32465;&#23450;&#21040;&#34920;&#36798;&#24335;&#30340;&#20004;&#37096;&#20998;&#12290;&#36825;&#20123;&#21464;&#37327;&#30340;&#20316;&#29992;&#22495;&#26159; <span class="stt">body</span>&#12290;<span class="stt">pair</span> &#21644;
<span class="stt">unpair</span> &#30340;&#21028;&#31867;&#35268;&#21017;&#20026;&#65306;</p><p><span class="texMathDisplay">\infer{<span class="stt">(type-of (pair-exp </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = pairof </span><span class="texMathInline">t_1</span><span class="stt"> * </span><span class="texMathInline">t_2</span>}
      {\begin{gathered}
       <span class="stt">(type-of </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_1</span> \\
       <span class="stt">(type-of </span><span class="texMathInline">e_2</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_2</span> \\
       \end{gathered}}</span></p><p><span class="texMathDisplay">\infer{<span class="stt">(type-of (unpair-exp </span><span class="texMathInline">var_1</span><span class="stt"> </span><span class="texMathInline">var_2</span><span class="stt"> </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_{body}</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_{body}</span>}
      {\begin{gathered}
       <span class="stt">(type-of </span><span class="texMathInline">e_{pair}</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = (pairof </span><span class="texMathInline">t_1</span><span class="stt"> </span><span class="texMathInline">t_2</span><span class="stt">)</span> \\
       <span class="stt">(type-of </span><span class="texMathInline">e_{body}</span><span class="stt"> [</span><span class="texMathInline">var_1</span><span class="stt">=</span><span class="texMathInline">t_1</span><span class="stt">][</span><span class="texMathInline">var_2</span><span class="stt">=</span><span class="texMathInline">t_2</span><span class="stt">]</span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t_{body}</span> \\
       \end{gathered}}</span></p><p>&#25193;&#23637; CHECKED&#65292;&#23454;&#29616;&#36825;&#20123;&#35268;&#21017;&#12290;&#22312; <span class="stt">type-to-external-form</span> &#20013;&#65292;&#29992;&#21015;&#34920; <span class="stt">(pairof</span><span class="stt">
</span><span class="texMathInline">t_1</span><span class="stt"> </span><span class="texMathInline">t_2</span><span class="stt">)</span> &#34920;&#31034;&#24207;&#23545;&#12290;
<a name="(idx._(gentag._1117))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..9)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1118))"></a>
&#32473;&#35821;&#35328;&#28155;&#21152;&#31867;&#22411; <span class="stt">listof</span>&#65292;&#20854;&#25805;&#20316;&#19982; &#31867;&#20284;&#12290;&#24403;&#19988;&#20165;&#24403;&#20540;&#26159;&#21015;&#34920;&#65292;
&#19988;&#25152;&#26377;&#20803;&#32032;&#31867;&#22411;&#22343;&#20026; <span class="texMathInline">t</span> &#26102;&#65292;&#20540;&#31867;&#22411;&#20026; <span class="stt">listof </span><span class="texMathInline">t</span>&#12290;&#29992;&#19979;&#21015;&#29983;&#25104;&#24335;&#25193;&#23637;&#35821;&#35328;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Type} &amp;::= <span class="stt">listof </span><span class="Iidentity">\mathit{Type}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">list-type (ty)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">list (</span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\{,\mathit{Expression}}\</span><span class="stt">^{*})</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">list-exp (exp1 exps)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">cons (</span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> , </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cons-exp (exp1 exp2)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">null? (</span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">null-exp (exp1)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">emptylist_</span><span class="Iidentity">\mathit{Type}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">emptylist-exp (ty)</span>} \\[5pt]\end{align*}</span></p><p>&#20197;&#21450;&#22235;&#26465;&#19982;&#31867;&#22411;&#30456;&#20851;&#30340;&#35268;&#21017;&#65306;</p><p><span class="texMathDisplay">\infer{<span class="stt">(type-of (list-exp </span><span class="texMathInline">e_1</span><span class="stt"> (</span><span class="texMathInline">e_2</span><span class="stt"> ... </span><span class="texMathInline">e_n</span><span class="stt">)) </span><span class="texMathInline">tenv</span><span class="stt">) = listof </span><span class="texMathInline">t</span>}
      {\begin{gathered}
       <span class="stt">(type-of </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span> \\
       <span class="stt">(type-of </span><span class="texMathInline">e_2</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span> \\
       \vdots \\
       <span class="stt">(type-of </span><span class="texMathInline">e_n</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span>
       \end{gathered}}</span></p><p><span class="texMathDisplay">\infer{<span class="stt">(type-of cons(</span><span class="texMathInline">e_1</span><span class="stt">, </span><span class="texMathInline">e_2</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = listof </span><span class="texMathInline">t</span>}
      {\begin{gathered}
       <span class="stt">(type-of </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">t</span> \\
       <span class="stt">(type-of </span><span class="texMathInline">e_2</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = listof </span><span class="texMathInline">t</span>
       \end{gathered}}</span></p><p><span class="texMathDisplay">\infer{<span class="stt">(type-of null?(</span><span class="texMathInline">e_1</span><span class="stt">) </span><span class="texMathInline">tenv</span><span class="stt">) = bool</span>}
      {<span class="stt">(type-of </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = listof </span><span class="texMathInline">t</span>}</span></p><p><span class="texMathDisplay"><span class="stt">(type-of emptylist[</span><span class="texMathInline">t</span><span class="stt">] </span><span class="texMathInline">tenv</span><span class="stt">) = listof </span><span class="texMathInline">t</span></span></p><p>&#34429;&#28982; <span class="stt">cons</span> &#21644; <span class="stt">pair</span> &#31867;&#20284;&#65292;&#23427;&#20204;&#30340;&#21028;&#31867;&#35268;&#21017;&#21364;&#23436;&#20840;&#19981;&#21516;&#12290;</p><p>&#20026; <span class="stt">car</span> &#21644; <span class="stt">cdr</span> &#20889;&#20986;&#31867;&#20284;&#30340;&#35268;&#21017;&#65292;&#25193;&#23637;&#26816;&#26597;&#22120;&#65292;&#22788;&#29702;&#36825;&#20123;&#21644;&#19978;&#36848;&#34920;&#36798;&#24335;&#12290;
&#29992; &#20013;&#30340;&#23567;&#25216;&#24039;&#36991;&#20813;&#19982; <span class="stt">proc-type-exp</span> &#30340;&#20914;&#31361;&#12290;&#36825;&#20123;&#35268;&#21017;&#24212;&#30830;
&#20445; <span class="stt">car</span> &#21644; <span class="stt">cdr</span> &#24212;&#29992;&#20110;&#21015;&#34920;&#65292;&#20294;&#23427;&#20204;&#26080;&#27861;&#20445;&#35777;&#21015;&#34920;&#38750;&#31354;&#12290;&#20026;&#20160;&#20040;&#35753;&#35268;&#21017;&#30830;&#20445;&#21015;&#34920;
&#38750;&#31354;&#19981;&#21512;&#29702;&#65311;&#20026;&#20160;&#20040; <span class="stt">emptylist</span> &#20013;&#30340;&#31867;&#22411;&#21442;&#25968;&#26159;&#24517;&#38656;&#30340;&#65311;
<a name="(idx._(gentag._1119))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..10)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1120))"></a>
<a name="(idx._(gentag._1121))"></a>
&#25193;&#23637;&#26816;&#26597;&#22120;&#65292;&#22788;&#29702; EXPLICIT-REFS&#12290;&#20320;&#38656;&#35201;&#36825;&#26679;&#20570;&#65306;</p><ul><li><p>&#32473;&#31867;&#22411;&#31995;&#32479;&#28155;&#21152;&#31867;&#22411; <span class="stt">refto </span><span class="texMathInline">t</span>&#65292;&#20854;&#20013;&#65292;<span class="texMathInline">t</span> &#26159;&#20219;&#24847;&#31867;&#22411;&#12290;&#36825;&#20010;&#31867;&#22411;&#34920;&#31034;
&#24341;&#29992;&#65292;&#25351;&#21521;&#30340;&#20301;&#32622;&#21253;&#21547;&#31867;&#22411;&#20026; <span class="texMathInline">t</span> &#30340;&#20540;&#12290;&#37027;&#20040;&#65292;&#33509; <span class="texMathInline">e</span> &#31867;&#22411;&#20026; <span class="texMathInline">t</span>&#65292;&#21017;
<span class="stt">(newref </span><span class="texMathInline">e</span><span class="stt">)</span> &#31867;&#22411;&#20026; <span class="stt">refto </span><span class="texMathInline">t</span>&#12290;</p></li><li><p>&#32473;&#31867;&#22411;&#31995;&#32479;&#28155;&#21152;&#31867;&#22411; <span class="stt">void</span>&#12290;<span class="stt">seref</span> &#30340;&#36820;&#22238;&#20540;&#20026;&#27492;&#31867;&#22411;&#12290;&#23545;&#31867;&#22411;&#20026;
<span class="stt">void</span> &#30340;&#20540;&#65292;&#19981;&#33021;&#36827;&#34892;&#20219;&#20309;&#25805;&#20316;&#65292;&#25152;&#20197; <span class="stt">setref</span> &#36820;&#22238;&#20160;&#20040;&#20540;&#37117;&#19981;&#35201;&#32039;&#12290;&#36825;&#26159;&#25226;&#31867;
&#22411;&#20316;&#20026;&#20449;&#24687;&#38544;&#34255;&#26426;&#21046;&#30340;&#20363;&#23376;&#12290;</p></li><li><p>&#20889;&#20986; <span class="stt">newref</span>&#12289;<span class="stt">deref</span> &#21644; <span class="stt">setref</span> &#30340;&#21028;&#31867;&#35268;&#21017;&#12290;</p></li><li><p>&#22312;&#26816;&#26597;&#22120;&#20013;&#23454;&#29616;&#36825;&#20123;&#35268;&#21017;&#12290;
<a name="(idx._(gentag._1122))"></a>
<a name="(idx._(gentag._1123))"></a></p></li></ul></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..11)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1124))"></a>
&#25193;&#23637;&#26816;&#26597;&#22120;&#65292;&#22788;&#29702; MUTABLE-PAIRS&#12290;</p></blockquote><h4 class="heading">7.4<tt>&nbsp;</tt><a name="(part._s7..4)"></a>INFERRED&#65306;&#24102;&#26377;&#31867;&#22411;&#25512;&#23548;&#30340;&#35821;&#35328;<span class="button-group"><a href="#(part._s7..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1125))"></a>
<a name="(idx._(gentag._1126))"></a>
&#22312;&#31243;&#24207;&#20013;&#20889;&#20986;&#31867;&#22411;&#34429;&#28982;&#26377;&#21161;&#20110;&#35774;&#35745;&#21644;&#25991;&#26723;&#65292;&#20294;&#24456;&#32791;&#26102;&#12290;&#21478;&#19968;&#31181;&#35774;&#35745;&#26159;&#35753;&#32534;&#35793;&#22120;&#26681;&#25454;&#21464;&#37327;&#30340;&#20351;
&#29992;&#20197;&#21450;&#31243;&#24207;&#21592;&#21487;&#33021;&#32473;&#20986;&#30340;&#20449;&#24687;&#65292;&#25512;&#26029;&#20986;&#25152;&#26377;&#21464;&#37327;&#30340;&#31867;&#22411;&#12290;&#20196;&#20154;&#24778;&#35766;&#30340;&#26159;&#65292;&#23545;&#35774;&#35745;&#20005;&#35880;&#30340;&#35821;&#35328;&#65292;
&#32534;&#35793;&#22120;<span class="emph">&#24635;</span>&#33021;&#25512;&#26029;&#20986;&#21464;&#37327;&#30340;&#31867;&#22411;&#12290;&#36825;&#31181;&#31574;&#30053;&#21483;&#20570;<span class="emph">&#31867;&#22411;&#25512;&#23548;</span>&#12290;&#23427;&#36866;&#29992;&#20110; LETREC
&#36825;&#26679;&#30340;&#35821;&#35328;&#65292;&#20063;&#36866;&#29992;&#20110;&#27604;&#36739;&#22823;&#22411;&#30340;&#35821;&#35328;&#12290;</p><p>&#25105;&#20204;&#20174;&#35821;&#35328; CHECKED &#20837;&#25163;&#30740;&#31350;&#31867;&#22411;&#25512;&#23548;&#30340;&#23454;&#20363;&#12290;&#28982;&#21518;&#65292;&#25105;&#20204;&#20462;&#25913;&#35821;&#35328;&#65292;&#20196;&#25152;&#26377;&#31867;&#22411;&#34920;&#36798;&#24335;
&#25104;&#20026;&#21487;&#36873;&#39033;&#12290;&#25105;&#20204;&#29992;&#26631;&#35760; <span class="stt">?</span> &#26367;&#20195;&#32570;&#22833;&#30340;&#31867;&#22411;&#34920;&#36798;&#24335;&#12290;&#22240;&#27492;&#65292;&#20856;&#22411;&#30340;&#31243;&#24207;&#30475;&#36215;&#26469;&#20687;&#26159;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">? foo (x : ?) = if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -(x, (foo -(x,1)))</span></p></td></tr><tr><td><p><span class="stt">in foo</span></p></td></tr></table></blockquote><p>&#27599;&#20010;&#38382;&#21495;&#65288;&#24403;&#28982;&#65292;&#38500;&#20102; <span class="stt">zero?</span> &#32467;&#23614;&#37027;&#20010;&#65289;&#25351;&#20986;&#25152;&#22312;&#20043;&#22788;&#26377;&#19968;&#20010;&#24453;&#25512;&#23548;&#30340;&#31867;&#22411;&#12290;</p></blockquote><p>&#30001;&#20110;&#31867;&#22411;&#34920;&#36798;&#24335;&#26159;&#21487;&#36873;&#30340;&#65292;&#25105;&#20204;&#21487;&#20197;&#29992;&#31867;&#22411;&#26367;&#20195;&#26576;&#20123; <span class="stt">?</span>&#65292;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">? even (x : int) = if zero?(x) then 1 else (odd -(x,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">bool odd (x : ?) = if zero?(x) then 0 else (even -(x,1))</span></p></td></tr><tr><td><p><span class="stt">in (odd 13)</span></p></td></tr></table></blockquote><p>&#35201;&#23450;&#20041;&#36825;&#31181;&#35821;&#27861;&#65292;&#25105;&#20204;&#26032;&#28155;&#19968;&#20010;&#38750;&#32456;&#32467;&#31526;&#65292;<span class="texMathInline">\mathit{Optional\mbox{-}type}</span>&#65292;&#24182;&#20462;&#25913;
<span class="stt">proc</span> &#21644; <span class="stt">letrec</span> &#30340;&#29983;&#25104;&#24335;&#65292;&#20196;&#20854;&#29992;&#21487;&#36873;&#31867;&#22411;&#26367;&#20195;&#31867;&#22411;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Optinal\mbox{-}Type} &amp;::= <span class="stt">?</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">no-type ()</span>} \\[5pt]
\mathit{Optinal\mbox{-}Type} &amp;::= \mathit{Type} \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">a-type (ty)</span>} \\[5pt]
        \mathit{Expression} &amp;::= <span class="stt">proc (</span><span class="Iidentity">\mathit{Identifier : Optinal\mbox{-}Type}</span><span class="stt">) </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">proc-exp (var otype body)</span>} \\[5pt]
        \mathit{Expression} &amp;::= <span class="stt">letrec</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \phantom{x}<span class="Iidentity">\mathit{Optinal\mbox{-}Type}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> : </span><span class="Iidentity">\mathit{Optinal\mbox{-}Type}</span><span class="stt">) = </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} <span class="stt">in </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{\begin{math}\begin{alignedat}{-1}
                                          &amp;<span class="stt">letrec-exp</span> \\
                                          &amp;\phantom{xx}<span class="stt">(p-result-otype p-name</span> \\
                                          &amp;\phantom{xxx}<span class="stt">b-var b-var-otype p-body</span> \\
                                          &amp;\phantom{xxx}<span class="stt">letrec-body</span><span class="stt">)</span>
                                         \end{alignedat}\end{math}}\end{align*}</span></p></blockquote><p>&#25490;&#38500;&#30340;&#31867;&#22411;&#23601;&#26159;&#38656;&#35201;&#25105;&#20204;&#25214;&#20986;&#30340;&#31867;&#22411;&#12290;&#35201;&#25214;&#20986;&#23427;&#20204;&#65292;&#25105;&#20204;&#36941;&#21382;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#29983;&#25104;&#31867;&#22411;&#20043;&#38388;&#30340;
&#26041;&#31243;&#65292;&#26041;&#31243;&#20013;&#21487;&#33021;&#21547;&#26377;&#36825;&#20123;&#26410;&#30693;&#31867;&#22411;&#12290;&#28982;&#21518;&#65292;&#25105;&#20204;&#27714;&#35299;&#21547;&#26377;&#26410;&#30693;&#31867;&#22411;&#30340;&#26041;&#31243;&#12290;</p><p>&#35201;&#29702;&#35299;&#36825;&#19968;&#27969;&#31243;&#65292;&#25105;&#20204;&#38656;&#35201;&#32473;&#26410;&#30693;&#31867;&#22411;&#36215;&#21517;&#23383;&#12290;&#23545;&#27599;&#20010;&#34920;&#36798;&#24335; <span class="texMathInline">e</span> &#25110;&#32465;&#23450;&#21464;&#37327; <span class="texMathInline">var</span>&#65292;
&#35774; <span class="texMathInline">t_e</span> &#25110; <span class="texMathInline">t_{var}</span> &#34920;&#31034;&#34920;&#36798;&#24335;&#25110;&#32465;&#23450;&#21464;&#37327;&#30340;&#31867;&#22411;&#12290;</p><p><a name="(idx._(gentag._1127))"></a>
&#23545;&#34920;&#36798;&#24335;&#25277;&#35937;&#35821;&#27861;&#26641;&#20013;&#30340;&#27599;&#20010;&#33410;&#28857;&#65292;&#31867;&#22411;&#35268;&#21017;&#20915;&#23450;&#20102;&#31867;&#22411;&#20043;&#38388;&#24517;&#39035;&#25104;&#31435;&#30340;&#26576;&#20123;&#26041;&#31243;&#12290;&#23545;&#25105;&#20204;
&#30340; PROC &#35821;&#35328;&#65292;&#36825;&#20123;&#26041;&#31243;&#26159;&#65306;</p><p><span class="Iidentity">\begin{align*}<span class="stt">(diff-exp </span><span class="Iidentity">e_1</span><span class="stt"> </span><span class="Iidentity">e_2</span><span class="stt">)</span> &amp;: t_{e_1} = <span class="stt">int</span> \\
              &amp;\mathrel{\phantom{:}} t_{e_2} = <span class="stt">int</span> \\
              &amp;\mathrel{\phantom{:}} t_{<span class="stt">(diff-exp </span><span class="Iidentity">e_1</span><span class="stt"> </span><span class="Iidentity">e_2</span><span class="stt">)</span>} = <span class="stt">int</span> \\[1em]
<span class="stt">(zero?-exp </span><span class="Iidentity">e_1</span><span class="stt">)</span> &amp;: t_{e_1} = <span class="stt">int</span> \\
       &amp;\mathrel{\phantom{:}} t_{<span class="stt">(zero?-exp </span><span class="Iidentity">e_1</span><span class="stt">)</span>} = <span class="stt">bool</span> \\[1em]
<span class="stt">(if-exp </span><span class="Iidentity">e_1</span><span class="stt"> </span><span class="Iidentity">e_2</span><span class="stt"> </span><span class="Iidentity">e_3</span><span class="stt">)</span> &amp;: t_{e_1} = <span class="stt">bool</span> \\
                    &amp;\mathrel{\phantom{:}} t_{e_2} = t_{<span class="stt">(if-exp </span><span class="Iidentity">e_1</span><span class="stt"> </span><span class="Iidentity">e_2</span><span class="stt"> </span><span class="Iidentity">e_3</span><span class="stt">)</span>} \\
                    &amp;\mathrel{\phantom{:}} t_{e_3} = t_{<span class="stt">(if-exp </span><span class="Iidentity">e_1</span><span class="stt"> </span><span class="Iidentity">e_2</span><span class="stt"> </span><span class="Iidentity">e_3</span><span class="stt">)</span>} \\[1em]
<span class="stt">(proc-exp </span><span class="Iidentity">var</span><span class="stt"> </span><span class="Iidentity">body</span><span class="stt">)</span> &amp;: t_{<span class="stt">(proc-exp </span><span class="Iidentity">var</span><span class="stt"> </span><span class="Iidentity">body</span><span class="stt">)</span>} = (t_{var} \to t_{body}) \\[1em]
<span class="stt">(call-exp </span><span class="Iidentity">rator</span><span class="stt"> </span><span class="Iidentity">rand</span><span class="stt">)</span> &amp;: t_{rator} = (t_{rand} \to t_{<span class="stt">(call-exp </span><span class="Iidentity">rator</span><span class="stt"> </span><span class="Iidentity">rand</span><span class="stt">)</span>})\end{align*}</span></p><ul><li><p>&#31532;&#19968;&#26465;&#35268;&#21017;&#26159;&#35828;&#65292;<span class="stt">diff-exp</span> &#30340;&#21442;&#25968;&#21644;&#32467;&#26524;&#31867;&#22411;&#22343;&#20026; <span class="stt">int</span>&#12290;</p></li><li><p>&#31532;&#20108;&#26465;&#35268;&#21017;&#26159;&#35828;&#65292;<span class="stt">zero?-exp</span> &#30340;&#21442;&#25968;&#20026; <span class="stt">int</span>&#65292;&#32467;&#26524;&#20026; <span class="stt">bool</span>&#12290;</p></li><li><p>&#31532;&#19977;&#26465;&#35268;&#21017;&#26159;&#35828;&#65292;<span class="stt">if</span> &#34920;&#36798;&#24335;&#20013;&#30340;&#26465;&#20214;&#31867;&#22411;&#24517;&#39035;&#20026; <span class="stt">bool</span>&#65292;&#20004;&#20010;&#20998;&#25903;&#30340;&#31867;
&#22411;&#24517;&#39035;&#19982;&#25972;&#20010; <span class="stt">if</span> &#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#30456;&#21516;&#12290;</p></li><li><p>&#31532;&#22235;&#26465;&#35268;&#21017;&#26159;&#35828;&#65292;<span class="stt">proc</span> &#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#26159;&#19968;&#36807;&#31243;&#65292;&#20854;&#21442;&#25968;&#31867;&#22411;&#20026;&#32465;&#23450;&#21464;&#37327;&#30340;&#31867;
&#22411;&#65292;&#20854;&#32467;&#26524;&#31867;&#22411;&#20026;&#20027;&#20307;&#30340;&#31867;&#22411;&#12290;</p></li><li><p>&#31532;&#20116;&#26465;&#35268;&#21017;&#26159;&#35828;&#65292;&#22312;&#36807;&#31243;&#35843;&#29992;&#20013;&#65292;&#25805;&#20316;&#31526;&#31867;&#22411;&#24517;&#39035;&#26159;&#19968;&#36807;&#31243;&#65292;&#20854;&#21442;&#25968;&#31867;&#22411;&#24517;&#39035;&#19982;&#25805;
&#20316;&#25968;&#30456;&#21516;&#65292;&#20854;&#32467;&#26524;&#31867;&#22411;&#19982;&#25972;&#20010;&#35843;&#29992;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#30456;&#21516;&#12290;</p></li></ul><p>&#35201;&#25512;&#23548;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#65292;&#25105;&#20204;&#20026;&#25152;&#26377;&#23376;&#34920;&#36798;&#24335;&#21644;&#32465;&#23450;&#21464;&#37327;&#20998;&#37197;&#19968;&#20010;&#31867;&#22411;&#21464;&#37327;&#65292;&#32473;&#20986;&#25152;&#26377;&#23376;&#34920;&#36798;
&#24335;&#30340;&#32422;&#26463;&#26465;&#20214;&#65292;&#28982;&#21518;&#27714;&#35299;&#24471;&#20986;&#30340;&#26041;&#31243;&#12290;&#35201;&#29702;&#35299;&#36825;&#19968;&#27969;&#31243;&#65292;&#25105;&#20204;&#26469;&#25512;&#23548;&#20960;&#20010;&#31034;&#20363;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#12290;
<a name="(idx._(gentag._1128))"></a>
<a name="(idx._(gentag._1129))"></a>
<a name="(idx._(gentag._1130))"></a>
<a name="(idx._(gentag._1131))"></a></p><p><a name="(idx._(gentag._1132))"></a>
&#25105;&#20204;&#20174;&#34920;&#36798;&#24335; <span class="stt">proc(f) proc(x) -((f 3),(f x))</span> &#24320;&#22987;&#12290;&#25105;&#20204;&#39318;&#20808;&#20570;&#19968;&#24352;&#34920;&#65292;&#28085;&#30422;&#36825;
&#20010;&#34920;&#36798;&#24335;&#20013;&#30340;&#25152;&#26377;&#32465;&#23450;&#21464;&#37327;&#12289;<span class="stt">proc</span> &#34920;&#36798;&#24335;&#12289;<span class="stt">if</span> &#34920;&#36798;&#24335;&#21644;&#36807;&#31243;&#35843;&#29992;&#65292;&#24182;&#32473;&#23427;&#20204;&#20998;
&#21035;&#20998;&#37197;&#19968;&#20010;&#21464;&#37327;&#12290;</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#34920;&#36798;&#24335;</span></p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#31867;&#22411;&#21464;&#37327;</span></p></td></tr><tr><td><p><span class="stt">f</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_f</span></p></td></tr><tr><td><p><span class="stt">x</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_x</span></p></td></tr><tr><td><p><span class="stt">proc(f)proc(x)-((f 3),(f x))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_0</span></p></td></tr><tr><td><p><span class="stt">proc(x)-((f 3),(f x))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_1</span></p></td></tr><tr><td><p><span class="stt">-((f 3),(f x))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_2</span></p></td></tr><tr><td><p><span class="stt">(f 3)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_3</span></p></td></tr><tr><td><p><span class="stt">(f x)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_4</span></p></td></tr></table></p><p>&#29616;&#22312;&#65292;&#23545;&#27599;&#20010;&#22797;&#26434;&#34920;&#36798;&#24335;&#65292;&#37117;&#21487;&#20197;&#26681;&#25454;&#19978;&#36848;&#35268;&#21017;&#20889;&#20986;&#19968;&#20010;&#31867;&#22411;&#26041;&#31243;&#12290;</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#34920;&#36798;&#24335;</span></p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="stt">proc(f)proc(x)-((f 3),(f x))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">\text{1.\quad}t_0 = t_f \to t_1</span></p></td></tr><tr><td><p><span class="stt">proc(x)-((f 3),(f x))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">\text{2.\quad}t_1 = t_x \to t_2</span></p></td></tr><tr><td><p><span class="stt">-((f 3),(f x))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">\text{3.\quad}t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">\text{4.\quad}t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">\text{5.\quad}t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="stt">(f 3)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">\text{6.\quad}t_f = <span class="stt">int</span> \to t_3</span></p></td></tr><tr><td><p><span class="stt">(f x)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">\text{7.\quad}t_f = t_x \to t_4</span></p></td></tr></table></p><ul><li><p>&#26041;&#31243; 1 &#26159;&#35828;&#65292;&#25972;&#20010;&#34920;&#36798;&#24335;&#29983;&#25104;&#19968;&#20010;&#36807;&#31243;&#65292;&#20854;&#21442;&#25968;&#31867;&#22411;&#20026; <span class="texMathInline">t_f</span>&#65292;&#32467;&#26524;&#31867;&#22411;&#19982;
<span class="stt">proc(x)-((f 3),(f x))</span> &#30456;&#21516;&#12290;</p></li><li><p>&#26041;&#31243; 2 &#26159;&#35828;&#65292;<span class="stt">proc(x)-((f 3),(f x))</span> &#20135;&#29983;&#19968;&#36807;&#31243;&#65292;&#20854;&#21442;&#25968;&#31867;&#22411;&#20026; <span class="texMathInline">t_x</span>&#65292;
&#32467;&#26524;&#31867;&#22411;&#19982; <span class="stt">-((f 3),(f x))</span> &#30456;&#21516;&#12290;</p></li><li><p>&#26041;&#31243; 3-5 &#26159;&#35828;&#65292;&#20943;&#27861;&#25805;&#20316; <span class="stt">-((f 3),(f x))</span> &#30340;&#21442;&#25968;&#21644;&#32467;&#26524;&#37117;&#26159;&#25972;&#25968;&#12290;</p></li><li><p>&#26041;&#31243; 6 &#26159;&#35828;&#65292;<span class="stt">f</span> &#26399;&#26395;&#30340;&#21442;&#25968;&#31867;&#22411;&#20026; <span class="stt">int</span>&#65292;&#36820;&#22238;&#20540;&#31867;&#22411;&#19982; <span class="stt">(f 3)</span> &#30456;
&#21516;&#12290;</p></li><li><p>&#31867;&#20284;&#22320;&#65292;&#26041;&#31243; 7 &#26159;&#35828;&#65292;<span class="stt">f</span> &#26399;&#26395;&#30340;&#21442;&#25968;&#31867;&#22411;&#19982; <span class="stt">x</span> &#30456;&#21516;&#65292;&#36820;&#22238;&#20540;&#31867;&#22411;&#19982;
<span class="stt">(f x)</span> &#30456;&#21516;&#12290;</p></li></ul><p>&#21482;&#35201;&#28385;&#36275;&#22914;&#19979;&#26041;&#31243;&#65292;<span class="texMathInline">t_f</span>&#12289;<span class="texMathInline">t_x</span>&#12289;<span class="texMathInline">t_0</span>&#12289;<span class="texMathInline">t_1</span>&#12289;<span class="texMathInline">t_2</span>&#12289;<span class="texMathInline">t_3</span> &#21644;
<span class="texMathInline">t_4</span> &#30340;&#35299;&#21487;&#20197;&#26159;&#20219;&#24847;&#20540;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="texMathInline">t_0 = t_f \to t_1</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">t_1 = t_x \to t_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">t_3 = <span class="stt">int</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">t_4 = <span class="stt">int</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">t_2 = <span class="stt">int</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">t_f = <span class="stt">int</span> \to t_3</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">t_f = t_x \to t_4</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._1133))"></a>
&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#25214;&#20986;&#21464;&#37327;&#30340;&#20540;&#65292;&#20351;&#25152;&#26377;&#26041;&#31243;&#25104;&#31435;&#12290;&#25105;&#20204;&#21487;&#20197;&#25226;&#36825;&#26679;&#30340;&#35299;&#34920;&#31034;&#20026;&#19968;&#32452;&#26041;&#31243;&#65292;&#26041;&#31243;
&#30340;&#24038;&#36793;&#37117;&#26159;&#21464;&#37327;&#12290;&#25105;&#20204;&#31216;&#36825;&#32452;&#26041;&#31243;&#20026;&#19968;&#32452;<span class="emph">&#20195;&#25442;&#24335;</span> (<span class="emph">substitution</span>)&#65292;&#31216;&#20195;&#25442;&#24335;&#26041;&#31243;
&#24038;&#36793;&#30340;&#21464;&#37327;<span class="emph">&#32465;&#23450;</span> (<span class="emph">bound</span>) &#20110;&#20195;&#25442;&#24335;&#12290;
<a name="(idx._(gentag._1134))"></a></p><p><a name="(idx._(gentag._1135))"></a>
<a name="(idx._(gentag._1136))"></a>
&#25105;&#20204;&#21487;&#20197;&#25353;&#37096;&#23601;&#29677;&#22320;&#27714;&#35299;&#36825;&#20123;&#26041;&#31243;&#12290;&#36825;&#19968;&#36807;&#31243;&#21483;&#20570;<span class="emph">&#21512;&#19968;</span> (<span class="emph">unification</span>)&#12290;</p><p>&#25105;&#20204;&#25226;&#35745;&#31639;&#20998;&#20026;&#20004;&#31181;&#29366;&#24577;&#65292;&#19968;&#31181;&#26159;&#24453;&#27714;&#35299;&#30340;&#26041;&#31243;&#65292;&#19968;&#31181;&#26159;&#24050;&#21457;&#29616;&#30340;&#20195;&#25442;&#24335;&#12290;&#26368;&#24320;&#22987;&#65292;&#25152;&#26377;&#26041;
&#31243;&#37117;&#24453;&#27714;&#35299;&#65292;&#27809;&#26377;&#19968;&#20010;&#20195;&#25442;&#24335;&#12290;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to t_1</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to t_2</span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_3</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_x \to t_4</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr></table></td></tr></table></p><p>&#25105;&#20204;&#20381;&#27425;&#32771;&#34385;&#27599;&#20010;&#26041;&#31243;&#12290;&#22914;&#26524;&#26041;&#31243;&#24038;&#36793;&#26159;&#19968;&#20010;&#21464;&#37327;&#65292;&#25105;&#20204;&#23558;&#20854;&#31227;&#21040;&#20195;&#25442;&#24335;&#32452;&#20013;&#12290;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to t_2</span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_3</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_x \to t_4</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to t_1</span></p></td></tr></table></td></tr></table></p><p>&#20294;&#26159;&#65292;&#36825;&#26679;&#20570;&#21487;&#33021;&#20250;&#25913;&#21464;&#20195;&#25442;&#24335;&#32452;&#12290;&#20363;&#22914;&#65292;&#19979;&#19968;&#20010;&#26041;&#31243;&#32473;&#20986;&#20102; <span class="texMathInline">t_1</span> &#30340;&#20540;&#12290;&#20195;&#25442;&#24335;
<span class="texMathInline">t_0</span> &#21491;&#36793;&#30340;&#20540;&#21253;&#21547; <span class="texMathInline">t_1</span>&#65292;&#25105;&#20204;&#35201;&#22312;&#20854;&#20013;&#20351;&#29992;&#36825;&#19968;&#20449;&#24687;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#25226;&#20195;&#25442;&#24335;&#21491;&#36793;&#20986;
&#29616;&#30340;&#27599;&#20010; <span class="texMathInline">t_1</span> &#25442;&#25481;&#12290;&#37027;&#20040;&#65292;&#25105;&#20204;&#26377;&#65306;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_3</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_x \to t_4</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to (t_x \to t_2)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to t_2</span></p></td></tr></table></td></tr></table></p><p>&#22914;&#26524;&#26041;&#31243;&#21491;&#36793;&#26159;&#19968;&#21464;&#37327;&#65292;&#25105;&#20204;&#35843;&#25442;&#20004;&#20391;&#65292;&#28982;&#21518;&#20173;&#29031;&#19978;&#38754;&#25805;&#20316;&#12290;&#25105;&#20204;&#21487;&#20197;&#25353;&#29031;&#36825;&#31181;&#26041;&#24335;&#65292;&#32487;&#32493;
&#22788;&#29702;&#19979;&#38754;&#30340;&#30340;&#19977;&#20010;&#26041;&#31243;&#12290;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_3</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_x \to t_4</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to (t_x \to t_2)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to t_2</span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_3</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_x \to t_4</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to (t_x \to t_2)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to t_2</span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_3</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_x \to t_4</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to (t_x \to <span class="stt">int</span>)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#29616;&#22312;&#65292;&#19979;&#19968;&#20010;&#35201;&#22788;&#29702;&#30340;&#26041;&#31243;&#21547;&#26377; <span class="texMathInline">t_3</span>&#65292;&#24050;&#32463;&#22312;&#20195;&#25442;&#24335;&#32452;&#20013;&#32465;&#23450;&#21040; <span class="stt">int</span>&#12290;&#25152;&#20197;&#65292;&#25105;
&#20204;&#29992; <span class="stt">int</span> &#26367;&#25442;&#26041;&#31243;&#20013;&#30340; <span class="texMathInline">t_3</span>&#12290;&#26041;&#31243;&#20013;&#30340;&#20854;&#20182;&#31867;&#22411;&#21464;&#37327;&#20063;&#36825;&#26679;&#22788;&#29702;&#12290;&#25105;&#20204;&#31216;&#20043;&#20026;&#23545;
&#26041;&#31243;<span class="emph">&#24212;&#29992;</span> (<span class="emph">apply</span>) &#20195;&#25442;&#24335;&#12290;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_x \to t_4</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to (t_x \to <span class="stt">int</span>)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#25105;&#20204;&#25226;&#24471;&#21040;&#30340;&#26041;&#31243;&#31227;&#20837;&#20195;&#25442;&#24335;&#32452;&#20013;&#65292;&#24182;&#26356;&#26032;&#38656;&#35201;&#26356;&#26032;&#30340;&#20195;&#25442;&#24335;&#12290;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_x \to t_4</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = (<span class="stt">int</span> \to <span class="stt">int</span>) \to (t_x \to <span class="stt">int</span>)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#19979;&#19968;&#20010;&#26041;&#31243;&#65292;<span class="texMathInline">t_f = t_x \to t_4</span>&#65292;&#21253;&#21547; <span class="texMathInline">t_f</span> &#21644; <span class="texMathInline">t_4</span>&#65292;&#22343;&#24050;&#32465;&#23450;&#20110;&#20195;&#25442;&#24335;&#65292;&#25152;
&#20197;&#25105;&#20204;&#23545;&#35813;&#26041;&#31243;&#24212;&#29992;&#20195;&#25442;&#24335;&#65292;&#24471;&#65306;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline"><span class="stt">int</span> \to <span class="stt">int</span> = t_x \to <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = (<span class="stt">int</span> \to <span class="stt">int</span>) \to (t_x \to <span class="stt">int</span>)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#22914;&#26524;&#26041;&#31243;&#20004;&#36793;&#37117;&#19981;&#26159;&#21464;&#37327;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#20854;&#21270;&#31616;&#65292;&#24471;&#21040;&#20004;&#20010;&#26041;&#31243;&#65306;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline"><span class="stt">int</span> = t_x</span></p></td></tr><tr><td><p><span class="texMathInline"><span class="stt">int</span> = <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = (<span class="stt">int</span> \to <span class="stt">int</span>) \to (t_x \to <span class="stt">int</span>)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_x \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#25105;&#20204;&#36824;&#26159;&#29031;&#24120;&#22788;&#29702;&#65306;&#20687;&#20043;&#21069;&#37027;&#26679;&#65292;&#23545;&#35843;&#31532;&#19968;&#20010;&#26041;&#31243;&#30340;&#20004;&#20391;&#65292;&#21152;&#20837;&#20195;&#25442;&#24335;&#32452;&#65292;&#26356;&#26032;&#20195;&#25442;&#24335;&#32452;&#12290;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline"><span class="stt">int</span> = <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = (<span class="stt">int</span> \to <span class="stt">int</span>) \to (<span class="stt">int</span> \to <span class="stt">int</span>)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">int</span> \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#26368;&#21518;&#19968;&#20010;&#26041;&#31243; <span class="texMathInline"><span class="stt">int</span> = <span class="stt">int</span></span> &#24635;&#26159;&#25104;&#31435;&#65292;&#25152;&#20197;&#21487;&#20197;&#20002;&#24323;&#12290;
<a name="(idx._(gentag._1137))"></a></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = (<span class="stt">int</span> \to <span class="stt">int</span>) \to (<span class="stt">int</span> \to <span class="stt">int</span>)</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">int</span> \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_3 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_4 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#27809;&#26377;&#26041;&#31243;&#20102;&#65292;&#25152;&#20197;&#25105;&#20204;&#24050;&#23436;&#25104;&#12290;&#20174;&#36825;&#20010;&#35745;&#31639;&#65292;&#25105;&#20204;&#24471;&#20986;&#32467;&#35770;&#65306;&#21407;&#34920;&#36798;&#24335; <span class="stt">proc (f) proc
(x) -((f 3),(f x))</span> &#30340;&#31867;&#22411;&#24212;&#20026;&#65306;</p><blockquote><p><span class="texMathInline">((<span class="stt">int</span> \to <span class="stt">int</span>) \to (<span class="stt">int</span> \to <span class="stt">int</span>))</span></p></blockquote><p>&#36825;&#26159;&#21512;&#29702;&#30340;&#65306;<span class="stt">f</span> &#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#24517;&#39035;&#26159;&#19968;&#20010; <span class="stt">int</span>&#65292;&#22240;&#20026;&#23427;&#25509;&#21463; <span class="stt">3</span> &#20570;&#21442;&#25968;&#12290;&#23427;
&#24517;&#39035;&#29983;&#25104;&#19968;&#20010; <span class="stt">int</span>&#65292;&#22240;&#20026;&#23427;&#30340;&#20540;&#29992;&#20316;&#20943;&#27861;&#25805;&#20316;&#30340;&#21442;&#25968;&#12290;<span class="stt">x</span> &#20063;&#24517;&#39035;&#26159;&#19968;&#20010;
<span class="stt">int</span>&#65292;&#22240;&#20026;&#23427;&#20063;&#29992;&#20316; <span class="stt">f</span> &#30340;&#21442;&#25968;&#12290;</p><p>&#25105;&#20204;&#20877;&#30475;&#21478;&#19968;&#20010;&#20363;&#23376;&#65306;<span class="stt">proc (f) (f 11)</span>&#12290;&#25105;&#20204;&#20173;&#20174;&#20998;&#37197;&#31867;&#22411;&#21464;&#37327;&#24320;&#22987;&#12290;</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#34920;&#36798;&#24335;</span></p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#31867;&#22411;&#21464;&#37327;</span></p></td></tr><tr><td><p><span class="stt">f</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_f</span></p></td></tr><tr><td><p><span class="stt">proc (f) (f 11)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_0</span></p></td></tr><tr><td><p><span class="stt">(f 11)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_1</span></p></td></tr></table></p><p>&#25509;&#19979;&#26469;&#25105;&#20204;&#20889;&#20986;&#26041;&#31243;&#65306;</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#34920;&#36798;&#24335;</span></p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="stt">proc(f)(f 11)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_0 = t_f \to t_1</span></p></td></tr><tr><td><p><span class="stt">(f 11)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_1</span></p></td></tr></table></p><p>&#28982;&#21518;&#27714;&#35299;&#65306;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to t_1</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_1</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_1</span></p></td></tr></table></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to t_1</span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = (<span class="stt">int</span> \to t_1) \to t_1</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = <span class="stt">int</span> \to t_1</span></p></td></tr></table></td></tr></table></p><p>&#36825;&#24847;&#21619;&#30528;&#21487;&#20197;&#32473; <span class="stt">proc (f) (f 11)</span> &#36171;&#20104;&#31867;&#22411; <span class="texMathInline">(<span class="stt">int</span> \to t_1) \to t_1</span>&#65292;&#20854;
&#20013; <span class="texMathInline">t_1</span> &#26159;&#20219;&#20309;&#31867;&#22411;&#12290;&#36825;&#20063;&#26159;&#21512;&#29702;&#30340;&#65306;&#25105;&#20204;&#21487;&#20197;&#25512;&#20986; <span class="stt">f</span> &#24517;&#39035;&#21462;&#19968; <span class="stt">int</span> &#21442;&#25968;&#65292;
&#20294;&#23545; <span class="stt">f</span> &#32467;&#26524;&#30340;&#31867;&#22411;&#19968;&#26080;&#25152;&#30693;&#12290;&#32780;&#19988;&#65292;&#23545;&#20219;&#20309; <span class="texMathInline">t_1</span>&#65292;&#36825;&#20010;&#20195;&#30721;&#37117;&#20999;&#23454;&#21487;&#34892;&#65292;&#21482;&#35201;
<span class="stt">f</span> &#21462;&#19968; <span class="stt">int</span> &#21442;&#25968;&#65292;&#36820;&#22238;&#19968;&#31867;&#22411;&#20026; <span class="texMathInline">t_1</span> &#30340;&#20540;&#12290;&#25105;&#20204;&#31216;<span class="texMathInline">t_1</span> &#23545;&#23427;
&#26159;<span class="emph">&#22810;&#24577;</span> (<span class="emph">polymorphic</span>) &#30340;&#12290;
<a name="(idx._(gentag._1138))"></a></p><p>&#20877;&#26469;&#30475;&#19968;&#20010;&#20363;&#23376;&#12290;&#32771;&#34385; <span class="stt">if x then -(x,1) else 0</span>&#12290;&#25105;&#20204;&#36824;&#26159;&#32473;&#27599;&#20010;&#19981;&#26159;&#24120;&#25968;&#30340;&#23376;&#34920;
&#36798;&#24335;&#20998;&#37197;&#19968;&#20010;&#31867;&#22411;&#21464;&#37327;&#12290;</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#34920;&#36798;&#24335;</span></p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#31867;&#22411;&#21464;&#37327;</span></p></td></tr><tr><td><p><span class="stt">x</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_x</span></p></td></tr><tr><td><p><span class="stt">if x then -(x,1) else 0</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_0</span></p></td></tr><tr><td><p><span class="stt">-(x,1)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_1</span></p></td></tr></table></p><p>&#28982;&#21518;&#32473;&#20986;&#26041;&#31243;&#65306;</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#34920;&#36798;&#24335;</span></p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="stt">if x then -(x,1) else 0</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_x = <span class="stt">bool</span></span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_1 = t_0</span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline"><span class="stt">int</span> = t_0</span></p></td></tr><tr><td><p><span class="stt">-(x,1)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_x = <span class="stt">int</span></span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_1 = <span class="stt">int</span></span></p></td></tr></table></p><p>&#20687;&#20043;&#21069;&#37027;&#26679;&#22788;&#29702;&#36825;&#20123;&#26041;&#31243;&#65292;&#25105;&#20204;&#26377;&#65306;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_0</span></p></td></tr><tr><td><p><span class="texMathInline"><span class="stt">int</span> = t_0</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_0</span></p></td></tr><tr><td><p><span class="texMathInline"><span class="stt">int</span> = t_0</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">bool</span></span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline"><span class="stt">int</span> = t_0</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_0</span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_0</span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_0</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#30001;&#20110; <span class="texMathInline">t_x</span> &#24050;&#32463;&#32465;&#23450;&#20110;&#20195;&#25442;&#24335;&#32452;&#65292;&#25105;&#20204;&#23545;&#19979;&#19968;&#26041;&#31243;&#24212;&#29992;&#20195;&#25442;&#65292;&#24471;&#65306;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline"><span class="stt">bool</span> = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_x = <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = t_0</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#24590;&#20040;&#22238;&#20107;&#65311;&#20174;&#36825;&#20123;&#26041;&#31243;&#65292;&#25105;&#20204;&#25512;&#20986; <span class="stt">bool = int</span>&#12290;&#25152;&#20197;&#22312;&#36825;&#20123;&#26041;&#31243;&#20013;&#30340;&#35299;&#20013;&#65292;&#22343;&#26377;
<span class="stt">bool = int</span>&#12290;&#20294; <span class="stt">bool</span> &#21644; <span class="stt">int</span> &#19981;&#21487;&#33021;&#30456;&#31561;&#12290;&#22240;&#27492;&#65292;&#36825;&#20123;&#26041;&#31243;&#26080;&#35299;&#65292;&#20063;&#23601;&#26080;
&#27861;&#36171;&#20104;&#36825;&#20010;&#34920;&#36798;&#24335;&#31867;&#22411;&#12290;&#36825;&#26159;&#21512;&#29702;&#30340;&#65292;&#22240;&#20026;&#34920;&#36798;&#24335; <span class="stt">if x then -(x,1) else 0</span> &#20013;&#65292;
<span class="stt">x</span> &#21516;&#26102;&#29992;&#20316;&#24067;&#23572;&#20540;&#21644;&#25972;&#25968;&#20540;&#65292;&#32780;&#22312;&#25105;&#20204;&#30340;&#31867;&#22411;&#31995;&#32479;&#20013;&#65292;&#36825;&#26159;&#19981;&#20801;&#35768;&#30340;&#12290;</p><p>&#20877;&#26469;&#30475;&#19968;&#20010;&#20363;&#23376;&#12290;&#32771;&#34385; <span class="stt">proc (f) zero?((f f))</span>&#12290;&#25105;&#20204;&#20173;&#20687;&#20043;&#21069;&#37027;&#26679;&#22788;&#29702;&#12290;</p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#34920;&#36798;&#24335;</span></p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#31867;&#22411;&#21464;&#37327;</span></p></td></tr><tr><td><p><span class="stt">proc (f) zero?((f f))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_0</span></p></td></tr><tr><td><p><span class="stt">f</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_f</span></p></td></tr><tr><td><p><span class="stt">zero?((f f))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_1</span></p></td></tr><tr><td><p><span class="stt">(f f)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_2</span></p></td></tr></table></p><p><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#34920;&#36798;&#24335;</span></p></td><td style="border-bottom: 1px solid black;"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="stt">proc (f) zero?((f f))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_0 = t_f \to t_1</span></p></td></tr><tr><td><p><span class="stt">zero?((f f))</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_1 = <span class="stt">bool</span></span></p></td></tr><tr><td><p></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="stt">(f f)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="texMathInline">t_f = t_f \to t_2</span></p></td></tr></table></p><p>&#28982;&#21518;&#65292;&#25105;&#20204;&#20173;&#20687;&#20043;&#21069;&#37027;&#26679;&#27714;&#35299;&#65306;</p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to t_1</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_f \to t_2</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_f \to t_2</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to t_1</span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_f \to t_2</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">bool</span></span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_f \to t_2</span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0" cellpadding="0"><tr><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#26041;&#31243;</span></p></td></tr><tr><td><p><span class="texMathInline">t_f = t_f \to <span class="stt">int</span></span></p></td></tr></table></td><td valign="baseline"><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td valign="baseline"><table cellspacing="0" cellpadding="0" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">&#20195;&#25442;&#24335;</span></p></td></tr><tr><td><p><span class="texMathInline">t_0 = t_f \to <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_1 = <span class="stt">bool</span></span></p></td></tr><tr><td><p><span class="texMathInline">t_2 = <span class="stt">int</span></span></p></td></tr></table></td></tr></table></p><p>&#38382;&#39064;&#26469;&#20102;&#12290;&#25105;&#20204;&#25512;&#23548;&#20986; <span class="texMathInline">t_f = t_f \to <span class="stt">int</span></span>&#12290;&#20294;&#27809;&#26377;&#19968;&#31181;&#31867;&#22411;&#20855;&#26377;&#36825;&#31181;&#24615;&#36136;&#65292;&#22240;
&#20026;&#36825;&#20010;&#26041;&#31243;&#30340;&#21491;&#36793;&#24635;&#26159;&#27604;&#24038;&#36793;&#22823;&#65306;&#22914;&#26524; <span class="texMathInline">t_f</span> &#30340;&#35821;&#27861;&#26641;&#21253;&#21547; <span class="texMathInline">k</span> &#20010;&#33410;&#28857;&#65292;&#37027;&#20040;&#26041;&#31243;&#21491;
&#36793;&#24635;&#26159;&#21253;&#21547; <span class="texMathInline">k+2</span> &#20010;&#33410;&#28857;&#12290;
<a name="(idx._(gentag._1139))"></a></p><p>&#25152;&#20197;&#65292;&#22914;&#26524;&#25105;&#20204;&#25512;&#23548;&#30340;&#26041;&#31243;&#24418;&#22914; <span class="texMathInline">tv = t</span>&#65292;&#19988;&#31867;&#22411;&#21464;&#37327; <span class="texMathInline">tv</span> &#20986;&#29616;&#22312;&#31867;&#22411; <span class="texMathInline">t</span> &#20013;&#65292;
&#25105;&#20204;&#21482;&#33021;&#24471;&#20986;&#32467;&#35770;&#65306;&#21407;&#26041;&#31243;&#26080;&#35299;&#12290;&#36825;&#20010;&#38468;&#21152;&#26465;&#20214;&#21483;&#20570;<span class="emph">&#39564;&#23384;</span> (<span class="emph">occurrence check</span>)&#12290;
<a name="(idx._(gentag._1140))"></a></p><p>&#36825;&#20010;&#26465;&#20214;&#20063;&#24847;&#21619;&#30528;&#25105;&#20204;&#29983;&#25104;&#30340;&#20195;&#25442;&#24335;&#24212;&#28385;&#36275;&#22914;&#19979;&#19981;&#21464;&#24335;&#65306;</p><blockquote class="SubFlow"><p>\begin{cornertext}[title=&#26080;&#23384;&#19981;&#21464;&#24335;]
&#20195;&#25442;&#24335;&#20013;&#32465;&#23450;&#30340;&#21464;&#37327;&#19981;&#24212;&#20986;&#29616;&#22312;&#20219;&#20309;&#20195;&#25442;&#24335;&#30340;&#21491;&#36793;&#12290;
<a name="(idx._(gentag._1141))"></a>
\end{cornertext}</p></blockquote><p><a name="(idx._(gentag._1142))"></a>
&#25105;&#20204;&#35299;&#26041;&#31243;&#30340;&#20195;&#30721;&#26497;&#24230;&#20381;&#36182;&#36825;&#20010;&#19981;&#21464;&#24335;&#12290;</p><blockquote class="EoplExercise"><p><a name="(elem._ex7..12)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#29992;&#26412;&#33410;&#30340;&#26041;&#27861;&#65292;&#25512;&#23548; &#20013;&#27599;&#20010;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#65292;&#25110;&#32773;&#21028;&#23450;&#34920;&#36798;&#24335;&#27809;&#26377;&#31867;
&#22411;&#12290;&#23601;&#20687;&#26412;&#33410;&#30340;&#20854;&#20182;&#32451;&#20064;&#37027;&#26679;&#65292;&#20551;&#35774;&#27599;&#20010;&#32465;&#23450;&#21464;&#37327;&#37117;&#26377;&#23545;&#24212;&#30340; <span class="stt">?</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..13)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#20986; <span class="stt">let</span> &#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#25512;&#23548;&#35268;&#21017;&#12290;&#29992;&#20320;&#30340;&#35268;&#21017;&#65292;&#25512;&#23548;&#19979;&#21015;&#21508;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#65292;&#25110;&#32773;&#21028;&#23450;
&#34920;&#36798;&#24335;&#26080;&#31867;&#22411;&#12290;</p><ol><li><p><span class="stt">let x = 4 in (x 3)</span></p></li><li><p><span class="stt">let f = proc (z) z in proc (x) -((f x), 1)</span></p></li><li><p><span class="stt">let p = zero?(1) in if p then 88 else 99</span></p></li><li><p><span class="stt">let p = proc (z) z in if p then 88 else 99</span></p></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..14)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19979;&#38754;&#30340;&#34920;&#36798;&#24335;&#26377;&#20309;&#38382;&#39064;&#65311;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">? even(odd : ?) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (x : ?)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x) then 1 else (odd -(x,1))</span></p></td></tr><tr><td><p><span class="stt">in letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">? odd(x : bool) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x) then 0 else ((even odd) -(x,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (odd 13)</span></p></td></tr></table></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..15)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1143))"></a>
&#20889;&#20986; <span class="stt">letrec</span> &#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#25512;&#23548;&#35268;&#21017;&#12290;&#20320;&#30340;&#35268;&#21017;&#24212;&#33021;&#22788;&#29702;&#22810;&#22768;&#26126;&#30340; <span class="stt">letrec</span>&#12290;&#29992;
&#20320;&#30340;&#35268;&#21017;&#25512;&#23548;&#19979;&#21015;&#27599;&#20010;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#65292;&#25110;&#32773;&#21028;&#23450;&#34920;&#36798;&#24335;&#26080;&#31867;&#22411;&#12290;</p><ol><li><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">letrec ? f (x : ?)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if zero?(x) then 0 else -((f -(x,1)), -2)</span></p></td></tr><tr><td><p><span class="stt">in f</span></p></td></tr></table></li><li><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">letrec ? even (x : ?)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if zero?(x) then 1 else (odd -(x,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">? odd (x : ?)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if zero?(x) then 0 else (even -(x,1))</span></p></td></tr><tr><td><p><span class="stt">in (odd 13)</span></p></td></tr></table></li><li><table cellspacing="0" cellpadding="0" class="SVerbatim" style="display: inline-table; vertical-align: text-top; margin-top: 0;"><tr><td><p><span class="stt">letrec ? even (odd : ?)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= proc (x) if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else (odd -(x,1))</span></p></td></tr><tr><td><p><span class="stt">in letrec ? odd (x : ?) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else ((even odd) -(x,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (odd 13)</span></p></td></tr></table></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..16)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913; INFERRED &#30340;&#35821;&#27861;&#65292;&#25490;&#38500;&#32570;&#22833;&#31867;&#22411;&#65292;&#19981;&#20877;&#29992; <span class="stt">?</span> &#20570;&#26631;&#35760;&#12290;</p></blockquote><h5 class="heading">7.4.1<tt>&nbsp;</tt><a name="(part._s7..4..1)"></a>&#20195;&#25442;&#24335;<span class="button-group"><a href="#(part._s7..4..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1144))"></a>
&#25105;&#20204;&#25353;&#33258;&#24213;&#21521;&#19978;&#30340;&#26041;&#24335;&#23454;&#29616;&#12290;&#25105;&#20204;&#39318;&#20808;&#26469;&#32771;&#34385;&#20195;&#25442;&#24335;&#12290;</p><p>&#25105;&#20204;&#23558;&#31867;&#22411;&#21464;&#37327;&#34920;&#31034;&#20026;&#25968;&#25454;&#31867;&#22411; <span class="stt">type</span> &#30340;&#26032;&#21464;&#20307;&#12290;&#36825;&#37324;&#29992;&#21040;&#30340;&#25216;&#26415;&#21644;<a href="#%28part._s3..7%29" data-pltdoc="x">&#23454;&#29616;&#35789;&#27861;&#22320;&#22336;</a>&#20013;
&#22788;&#29702;&#35789;&#27861;&#22320;&#22336;&#30340;&#30456;&#21516;&#12290;&#25105;&#20204;&#32473;&#35821;&#27861;&#28155;&#21152;&#29983;&#25104;&#24335;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Type} &amp;::= <span class="stt">%tvar-type</span> \ \mathit{Number} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">tvar-type (serial-number)</span>}\end{align*}</span></p></blockquote><p>&#25105;&#20204;&#25226;&#36825;&#20123;&#25193;&#23637;&#21518;&#30340;&#31867;&#22411;&#31216;&#20026;<span class="emph">&#31867;&#22411;&#34920;&#36798;&#24335;</span> (<span class="emph">type expression</span>)&#12290;
<a name="(idx._(gentag._1145))"></a>&#31867;&#22411;&#34920;&#36798;&#24335;&#30340;&#22522;&#26412;&#25805;&#20316;&#26159;&#29992;&#31867;&#22411;&#20195;&#25442;&#31867;&#22411;&#21464;&#37327;&#65292;&#30001;
<span class="stt">apply-one-subst</span> &#23450;&#20041;&#12290;<span class="stt">(apply-one-subst </span><span class="texMathInline">t_0</span><span class="stt"> </span><span class="texMathInline">tv</span><span class="stt"> </span><span class="texMathInline">t_1</span><span class="stt">)</span> &#23558;
<span class="texMathInline">t_0</span> &#20013;&#20986;&#29616;&#30340;&#27599;&#20010;<span class="texMathInline">tv</span> &#20195;&#25442;&#20026; <span class="texMathInline">t_1</span>&#65292;&#36820;&#22238;&#20195;&#25442;&#21518;&#30340;&#34920;&#36798;&#24335;&#12290;&#26377;&#26102;&#65292;&#36825;&#20889;&#20316;
<span class="texMathInline">t_0</span><span class="stt">[</span><span class="texMathInline">tv=t_1</span><span class="stt">]</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-one-subst</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Tvar} \times \mathit{Type} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-one-subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty0</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-one-subst</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-one-subst</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tvar-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty0</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#20010;&#36807;&#31243;&#29992;&#26469;&#20195;&#25442;&#21333;&#20010;&#31867;&#22411;&#21464;&#37327;&#12290;&#23427;&#19981;&#33021;&#20687;&#19978;&#33410;&#20013;&#25551;&#36848;&#30340;&#37027;&#26679;&#22788;&#29702;&#25152;&#26377;&#20195;&#25442;&#12290;</p><p>&#20195;&#25442;&#24335;&#32452;&#26159;&#19968;&#20010;&#26041;&#31243;&#21015;&#34920;&#65292;&#26041;&#31243;&#20004;&#36793;&#20998;&#21035;&#20026;&#31867;&#22411;&#21464;&#37327;&#21644;&#31867;&#22411;&#12290;&#35813;&#21015;&#34920;&#20063;&#21487;&#35270;&#20026;&#31867;&#22411;&#21464;&#37327;&#21040;&#31867;
&#22411;&#30340;&#20989;&#25968;&#12290;&#24403;&#19988;&#20165;&#24403;&#31867;&#22411;&#21464;&#37327;&#20986;&#29616;&#20110;&#20195;&#25442;&#24335;&#32452;&#20013;&#26576;&#20010;&#26041;&#31243;&#30340;&#24038;&#20391;&#26102;&#65292;&#25105;&#20204;&#35828;&#35813;&#21464;&#37327;<span class="emph">&#32465;
&#23450;</span>&#20110;&#20195;&#25442;&#24335;&#12290;
<a name="(idx._(gentag._1146))"></a></p><p>&#25105;&#20204;&#29992;&#24207;&#23545; <span class="stt">(&#31867;&#22411;&#21464;&#37327; . &#31867;&#22411;)</span> &#30340;&#21015;&#34920;&#34920;&#31034;&#20195;&#25442;&#24335;&#32452;&#12290;&#20195;&#25442;&#24335;&#32452;&#30340;&#24517;&#35201;&#35266;&#27979;&#22120;&#26159;
<span class="stt">apply-subst-to-type</span>&#12290;&#23427;&#36941;&#21382;&#31867;&#22411; <span class="texMathInline">t</span>&#65292;&#25226;&#27599;&#20010;&#31867;&#22411;&#21464;&#37327;&#26367;&#25442;&#20026;&#20195;&#25442;&#24335;&#32452;
<span class="texMathInline">\sigma</span> &#20013;&#30340;&#32465;&#23450;&#12290;&#22914;&#26524;&#19968;&#20010;&#21464;&#37327;&#26410;&#32465;&#23450;&#20110;&#20195;&#25442;&#24335;&#65292;&#37027;&#20040;&#20445;&#25345;&#19981;&#21464;&#12290;&#25105;&#20204;&#29992;
<span class="texMathInline">t\sigma</span> &#34920;&#31034;&#24471;&#21040;&#30340;&#31867;&#22411;&#12290;</p><p>&#36825;&#19968;&#23454;&#29616;&#29992; Scheme &#36807;&#31243; <span class="stt">assoc</span> &#22312;&#20195;&#25442;&#24335;&#32452;&#20013;&#26597;&#25214;&#31867;&#22411;&#21464;&#37327;&#12290;&#33509;&#32473;&#23450;&#31867;&#22411;&#26159;&#21015;&#34920;&#20013;&#26576;
&#20010;&#24207;&#23545;&#30340;&#39318;&#39033;&#65292;<span class="stt">assoc</span> &#36820;&#22238;&#23545;&#24212;&#30340;&#65288;&#31867;&#22411;&#21464;&#37327;&#65292;&#31867;&#22411;&#65289;&#24207;&#23545;&#65292;&#21542;&#21017;&#36820;&#22238; <span class="stt">#f</span>&#12290;&#25105;
&#20204;&#23558;&#23427;&#20889;&#20986;&#26469;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-subst-to-type</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Subst} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-subst-to-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-subst-to-type</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-subst-to-type</span><span class="hspace">&nbsp;</span><span class="RktSym">t2</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tvar-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sn</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">tmp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assoc</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">tmp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">tmp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20195;&#25442;&#24335;&#32452;&#30340;&#26500;&#36896;&#22120;&#26377; <span class="stt">empty-subst</span> &#21644; <span class="stt">extend-subst</span>&#12290;<span class="stt">(empty-subst)</span> &#29983;
&#25104;&#31354;&#20195;&#25442;&#24335;&#32452;&#30340;&#34920;&#31034;&#12290;<span class="stt">(extend-subst </span><span class="texMathInline">\sigma</span><span class="stt"> </span><span class="texMathInline">tv</span><span class="stt"> </span><span class="texMathInline">t</span><span class="stt">)</span> &#21462;&#19968;&#20195;&#25442;&#24335;&#32452;
<span class="texMathInline">\sigma</span>&#65292;&#20687;&#19978;&#33410;&#37027;&#26679;&#32473;&#23427;&#28155;&#21152;&#26041;&#31243; <span class="texMathInline">tv = t</span>&#12290;&#36825;&#20010;&#25805;&#20316;&#20998;&#20004;&#27493;&#65306;&#39318;&#20808;&#25226;&#20195;&#25442;&#24335;&#32452;&#20013;
&#25152;&#26377;&#26041;&#31243;&#21491;&#36793;&#30340; <span class="texMathInline">tv</span> &#26367;&#25442;&#20026; <span class="texMathInline">t</span>&#65292;&#28982;&#21518;&#25226;&#26041;&#31243; <span class="texMathInline">tv = t</span> &#28155;&#21152;&#21040;&#21015;&#34920;&#20013;&#12290;&#29992;&#20844;&#24335;&#34920;
&#31034;&#20026;&#65306;</p><p><span class="texMathDisplay">\begin{pmatrix}
 tv_1 = t_1 \\
 \vdots \\
 tv_n = t_n
\end{pmatrix}[tv = t] =
\begin{pmatrix}
 tv = t \\
 tv_1 = t_1[tv = t] \\
 \vdots \\
 tv_n = t_n[tv = t]
\end{pmatrix}</span></p><p>&#35813;&#23450;&#20041;&#20855;&#26377;&#22914;&#19979;&#24615;&#36136;&#65306;&#23545;&#20219;&#24847;&#31867;&#22411; <span class="texMathInline">t</span>&#65292;</p><p><span class="texMathDisplay">(t\sigma)[tv = t{}&rsquo;] = t(\sigma[tv = t{}&rsquo;])</span></p><p><span class="stt">extend-subst</span> &#30340;&#23454;&#29616;&#20381;&#29031;&#19978;&#24335;&#12290;&#23427;&#25226; <span class="texMathInline">\sigma_0</span> &#25152;&#26377;&#32465;&#23450;&#20013;&#30340; <span class="texMathInline">t_0</span> &#20195;&#25442;&#20026;
<span class="texMathInline">tv_0</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">empty-subst</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Subst}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-subst</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-subst</span></span> : <span class="texMathInline">\mathit{Subst} \times \mathit{Tvar} \times \mathit{Type} \to \mathit{Subst}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">tvar &#23578;&#26410;&#32465;&#23450;&#20110; subst&#12290;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">oldlhs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">oldrhs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">oldlhs</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-one-subst</span><span class="hspace">&nbsp;</span><span class="RktSym">oldrhs</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#19968;&#23454;&#29616;&#20445;&#25345;&#26080;&#23384;&#19981;&#21464;&#24335;&#65292;&#20294;&#26082;&#19981;&#20381;&#36182;&#23427;&#65292;&#20063;&#19981;&#24378;&#21046;&#23427;&#12290;&#37027;&#26159;&#19979;&#19968;&#33410;&#20013;&#21512;&#19968;&#22120;&#30340;&#24037;&#20316;&#12290;
<a name="(idx._(gentag._1147))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex7..17)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;&#25105;&#20204;&#30340;&#23454;&#29616;&#20013;&#65292;&#24403; <span class="texMathInline">\sigma</span> &#24456;&#22823;&#26102;&#65292;<span class="stt">extend-subst</span> &#35201;&#20570;&#22823;&#37327;&#24037;&#20316;&#12290;&#23454;&#29616;&#21478;&#19968;&#31181;
&#34920;&#31034;&#65292;&#21017; <span class="stt">extend-subst</span> &#21464;&#25104;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20854;&#20313;&#24037;&#20316;&#31227;&#33267; <span class="stt">apply-subst-to-type</span>&#65292;&#32780;&#24615;&#36136; <span class="texMathInline">t(\sigma[tv = t{}&rsquo;]) =
(t\sigma)[tv = t{}&rsquo;]</span> &#20173;&#28982;&#28385;&#36275;&#12290;&#36825;&#26679;&#23450;&#20041; <span class="stt">extend-subst</span> &#36824;&#38656;&#35201;&#26080;&#23384;&#19981;&#21464;&#24335;&#21527;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..18)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#21069;&#19968;&#36947;&#32451;&#20064;&#20013;&#30340;&#23454;&#29616;&#65292;&#21017;&#23545;&#20219;&#24847;&#31867;&#22411;&#21464;&#37327;&#65292;<span class="stt">apply-subst-to-type</span> &#26368;&#22810;&#21482;&#38656;&#35745;&#31639;
&#19968;&#27425;&#20195;&#25442;&#12290;</p></blockquote><h5 class="heading">7.4.2<tt>&nbsp;</tt><a name="(part._s7..4..2)"></a>&#21512;&#19968;&#22120;<span class="button-group"><a href="#(part._s7..4..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1148))"></a>
&#21512;&#19968;&#22120;&#30340;&#20027;&#35201;&#36807;&#31243;&#26159; <span class="stt">unifier</span>&#12290;&#21512;&#19968;&#22120;&#25191;&#34892;&#19978;&#36848;&#25512;&#23548;&#27969;&#31243;&#20013;&#30340;&#36825;&#19968;&#30340;&#27493;&#39588;&#65306;&#21462;&#20004;&#20010;&#31867;
&#22411; <span class="stt">t_1</span> &#21644; <span class="stt">t_2</span>&#65292;&#28385;&#36275;&#26080;&#23384;&#19981;&#21464;&#24335;&#30340;&#20195;&#25442;&#24335;&#32452; <span class="texMathInline">\sigma</span>&#65292;&#20197;&#21450;&#34920;&#36798;&#24335;
<span class="stt">exp</span>&#65292;&#23558; <span class="texMathInline">t_1 = t_2</span> &#28155;&#21152;&#21040; <span class="texMathInline">\sigma</span>&#65292;&#36820;&#22238;&#24471;&#21040;&#30340;&#20195;&#25442;&#24335;&#32452;&#12290;&#36825;&#26159;&#21512;&#24182;
<span class="texMathInline">t_1\sigma</span> &#21644; <span class="texMathInline">t_2\sigma</span> &#21518;&#25152;&#24471;&#30340;&#26368;&#23567; <span class="texMathInline">\sigma</span> &#25193;&#23637;&#12290;&#36825;&#32452;&#20195;&#25442;&#24335;&#20173;&#28385;&#36275;&#26080;
&#23384;&#19981;&#21464;&#24335;&#12290;&#33509;&#28155;&#21152; <span class="texMathInline">t_1 = t_2</span> &#23548;&#33268;&#30683;&#30462;&#65292;&#25110;&#32773;&#36829;&#21453;&#20102;&#26080;&#23384;&#19981;&#21464;&#24335;&#65292;&#37027;&#20040;&#21512;&#19968;&#22120;&#25253;&#38169;&#65292;
&#25351;&#20986;&#38169;&#35823;&#25152;&#22312;&#30340;&#34920;&#36798;&#24335; <span class="stt">exp</span>&#12290;&#36825;&#36890;&#24120;&#26159;&#24471;&#20986;&#26041;&#31243; <span class="texMathInline">t_1 = t_2</span> &#30340;&#34920;&#36798;&#24335;&#12290;</p><p>&#36825;&#20010;&#31639;&#27861;&#29992; <span class="stt">cases</span> &#26469;&#20889;&#21313;&#20998;&#19981;&#20415;&#65292;&#25152;&#20197;&#25105;&#20204;&#25913;&#29992;&#31867;&#22411;&#30340;&#35859;&#35789;&#21644;&#25552;&#21462;&#22120;&#12290;&#31639;&#27861;
&#22914; &#25152;&#31034;&#65292;&#20854;&#27969;&#31243;&#22914;&#19979;&#65306;</p><ul><li><p>&#39318;&#20808;&#65292;&#20687;&#19978;&#38754;&#37027;&#26679;&#65292;&#25105;&#20204;&#23545;&#31867;&#22411; <span class="texMathInline">t_1</span> &#21644; <span class="texMathInline">t_2</span> &#20998;&#21035;&#24212;&#29992;&#20195;&#25442;&#24335;&#12290;</p></li><li><p>&#22914;&#26524;&#32467;&#26524;&#31867;&#22411;&#30456;&#21516;&#65292;&#25105;&#20204;&#31435;&#21363;&#36820;&#22238;&#12290;&#36825;&#19968;&#27493;&#23545;&#24212;&#19978;&#38754;&#30340;&#21024;&#38500;&#31616;&#21333;&#26041;&#31243;&#12290;</p></li><li><p>&#22914;&#26524; <span class="stt">ty1</span> &#20026;&#26410;&#30693;&#31867;&#22411;&#65292;&#37027;&#20040;&#26080;&#23384;&#19981;&#21464;&#24335;&#21578;&#35785;&#25105;&#20204;&#65292;&#23427;&#26410;&#32465;&#23450;&#20110;&#20195;&#25442;&#24335;&#12290;&#30001;&#20110;
&#23427;&#26410;&#32465;&#23450;&#65292;&#25105;&#20204;&#23581;&#35797;&#25226; <span class="texMathInline">t_1 = t_2</span> &#28155;&#21152;&#21040;&#20195;&#25442;&#24335;&#32452;&#12290;&#20294;&#25105;&#20204;&#35201;&#39564;&#23384;&#65292;&#20197;&#20445;&#35777;&#26080;&#23384;&#19981;&#21464;
&#24335;&#25104;&#31435;&#12290;&#24403;&#19988;&#20165;&#24403;&#31867;&#22411;&#21464;&#37327; <span class="texMathInline">tv</span> &#19981;&#22312; <span class="texMathInline">t</span> &#20013;&#26102;&#65292;&#35843;&#29992; <span class="stt">(no-occurrence?</span><span class="stt">
</span><span class="texMathInline">tv</span><span class="stt"> </span><span class="texMathInline">t</span><span class="stt">)</span> &#36820;&#22238; <span class="stt">#t</span>&#65288;&#65289;&#12290;</p></li><li><p>&#22914;&#26524; <span class="texMathInline">t_2</span> &#20026;&#26410;&#30693;&#31867;&#22411;&#65292;&#21017;&#23545;&#35843; <span class="texMathInline">t_1</span> &#21644; <span class="texMathInline">t_2</span>&#65292;&#20063;&#29031;&#36825;&#26679;&#22788;&#29702;&#12290;</p></li><li><p>&#22914;&#26524; <span class="texMathInline">t_1</span> &#21644; <span class="texMathInline">t_2</span> &#37117;&#19981;&#26159;&#31867;&#22411;&#21464;&#37327;&#65292;&#37027;&#20040;&#25105;&#20204;&#20877;&#20570;&#36827;&#19968;&#27493;&#20998;&#26512;&#12290;</p><p>&#22914;&#26524;&#23427;&#20204;&#37117;&#26159; <span class="stt">proc</span> &#31867;&#22411;&#65292;&#37027;&#20040;&#25105;&#20204;&#21270;&#31616;&#26041;&#31243;&#65292;&#22312;&#20004;&#20010;&#21442;&#25968;&#31867;&#22411;&#20043;&#38388;&#24314;&#31435;&#26041;&#31243;&#65292;&#24471;&#21040;
&#19968;&#32452;&#20195;&#25442;&#24335;&#65292;&#28982;&#21518;&#29992;&#36825;&#32452;&#20195;&#25442;&#24335;&#22312;&#32467;&#26524;&#31867;&#22411;&#20043;&#38388;&#24314;&#31435;&#26041;&#31243;&#12290;</p><p>&#21542;&#21017;&#65292;<span class="texMathInline">t_1</span> &#21644; <span class="texMathInline">t_2</span> &#20013;&#19968;&#20010;&#26159; <span class="stt">int</span>&#65292;&#21478;&#19968;&#20010;&#26159; <span class="stt">bool</span>&#65292;&#25110;&#19968;&#20010;&#26159;
<span class="stt">proc</span>&#65292;&#21478;&#19968;&#20010;&#26159; <span class="stt">int</span> &#25110; <span class="stt">bool</span>&#12290;&#19981;&#31649;&#26159;&#21738;&#31181;&#24773;&#20917;&#65292;&#26041;&#31243;&#37117;&#26080;&#35299;&#65292;&#24341;&#21457;&#25253;&#38169;&#12290;</p></li></ul><p>&#20174;&#21478;&#19968;&#31181;&#35282;&#24230;&#26469;&#24605;&#32771;&#36825;&#20123;&#26377;&#21161;&#20110;&#29702;&#35299;&#12290;&#20195;&#25442;&#24335;&#32452;&#26159;&#19968;&#20010;<span class="emph">&#23384;&#20648;&#22120;</span>&#65292;&#26410;&#30693;&#31867;&#22411;&#26159;&#25351;&#21521;&#23384;
&#20648;&#22120;&#20013;&#26576;&#20301;&#32622;&#30340;<span class="emph">&#24341;&#29992;</span>&#12290;<span class="stt">unifier</span> &#25226; <span class="stt">ty1 = ty2</span> &#28155;&#21152;&#21040;&#23384;&#20648;&#22120;&#20013;&#65292;&#24471;&#21040;&#19968;
&#20010;&#26032;&#30340;&#23384;&#20648;&#22120;&#12290;</p><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#24517;&#39035;&#39564;&#23384;&#12290;&#30452;&#25509;&#36882;&#24402;&#22788;&#29702;&#31867;&#22411;&#21363;&#21487;&#65292;&#22914; &#25152;&#31034;&#12290;
<a name="(idx._(gentag._1149))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex7..19)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#35828;&#65306;&#8220;&#22914;&#26524;<span class="stt">ty1</span>&#20026;&#26410;&#30693;&#31867;&#22411;&#65292;&#37027;&#20040;&#26080;&#23384;&#19981;&#21464;&#24335;&#21578;&#35785;&#25105;&#20204;&#65292;&#23427;&#26410;&#32465;&#23450;
&#20110;&#20195;&#25442;&#24335;&#12290;&#8221;&#35814;&#32454;&#35299;&#37322;&#20026;&#20160;&#20040;&#22914;&#27492;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..20)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#21512;&#19968;&#22120;&#65292;&#19981;&#26159;&#23545;&#21512;&#19968;&#22120;&#30340;&#23454;&#21442;&#65292;&#32780;&#26159;&#21482;&#23545;&#31867;&#22411;&#21464;&#37327;&#35843;&#29992; <span class="stt">apply- subst-to-type</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..21)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#35828;&#20195;&#25442;&#24335;&#32452;&#23601;&#20687;&#23384;&#20648;&#22120;&#12290;&#29992; &#20013;&#30340;&#20195;&#25442;&#24335;&#32452;&#34920;&#31034;&#23454;&#29616;&#21512;&#19968;&#22120;&#65292;&#29992;
&#20840;&#23616; Scheme &#21464;&#37327;&#35760;&#24405;&#20195;&#25442;&#24335;&#32452;&#65292;&#23601;&#20687; &#21644; fig-4.2 &#37027;
&#26679;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..22)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20248;&#21270;&#21069;&#19968;&#36947;&#32451;&#20064;&#30340;&#23454;&#29616;&#65292;&#22312;&#24120;&#25968;&#26102;&#38388;&#20869;&#33719;&#21462;&#31867;&#22411;&#21464;&#37327;&#30340;&#32465;&#23450;&#12290;</p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">unifier</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Type} \times \mathit{Subst} \times \mathit{Exp} \to \mathit{Subst}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">unifier</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-subst-to-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-subst-to-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">equal?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">tvar-type?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-occurrence?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-subst</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-occurrence-violation</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">tvar-type?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-occurrence?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-subst</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-occurrence-violation</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unifier</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type-&gt;arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type-&gt;arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unifier</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type-&gt;result-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type-&gt;result-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-unification-failure</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#21512;&#19968;&#22120;<a name="(elem._fig-7..4)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">no-occurrence?</span></span> : <span class="texMathInline">\mathit{Tvar} \times \mathit{Type} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">no-occurrence?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-occurrence?</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-occurrence?</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tvar-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serial-number</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#39564;&#23384;<a name="(elem._fig-7..5)"></a></p></blockquote></blockquote><h5 class="heading">7.4.3<tt>&nbsp;</tt><a name="(part._s7..4..3)"></a>&#25214;&#20986;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;<span class="button-group"><a href="#(part._s7..4..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#25105;&#20204;&#29992; <span class="stt">otype-&gt;type</span> &#20026;&#27599;&#20010; <span class="stt">?</span> &#23450;&#20041;&#19968;&#20010;&#26032;&#31867;&#22411;&#21464;&#37327;&#65292;&#25226;&#21487;&#36873;&#31867;&#22411;&#36716;&#25442;&#20026;&#26410;&#30693;&#31867;
&#22411;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">otype-&gt;type</span></span> : <span class="texMathInline">\mathit{OptionalType} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">otype-&gt;type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">otype</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">optional-type</span><span class="hspace">&nbsp;</span><span class="RktSym">otype</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh-tvar-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">fresh-tvar-type</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">fresh-tvar-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">sn</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">sn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">sn</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tvar-type</span><span class="hspace">&nbsp;</span><span class="RktSym">sn</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25226;&#31867;&#22411;&#36716;&#25442;&#20026;&#22806;&#22312;&#34920;&#31034;&#26102;&#65292;&#25105;&#20204;&#29992;&#21253;&#21547;&#24207;&#21495;&#30340;&#31526;&#21495;&#34920;&#31034;&#31867;&#22411;&#21464;&#37327;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">type-to-external-form</span></span> : <span class="texMathInline">\mathit{Type} \to \mathit{List}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-to-external-form</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">int</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bool</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal"><span class="nobreak">-&gt;</span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tvar-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">serial-number</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-&gt;symbol</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"ty"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">serial-number</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._1150))"></a>
&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#20889; <span class="stt">type-of</span> &#20102;&#12290;&#23427;&#21462;&#19968;&#34920;&#36798;&#24335;&#65292;&#19968;&#20010;&#23558;&#31243;&#24207;&#21464;&#37327;&#26144;&#23556;&#21040;&#31867;&#22411;&#34920;&#36798;&#24335;&#30340;&#31867;
&#22411;&#29615;&#22659;&#65292;&#21644;&#19968;&#20010;&#28385;&#36275;&#26080;&#23384;&#19981;&#21464;&#24335;&#30340;&#20195;&#25442;&#24335;&#32452;&#65292;&#36820;&#22238;&#19968;&#20010;&#31867;&#22411;&#21644;&#28385;&#36275;&#26080;&#23384;&#19981;&#21464;&#24335;&#30340;&#26032;&#20195;&#25442;&#24335;&#32452;&#12290;</p><p>&#31867;&#22411;&#29615;&#22659;&#23558;&#21508;&#31867;&#22411;&#34920;&#36798;&#24335;&#19982;&#31243;&#24207;&#21464;&#37327;&#23545;&#24212;&#36215;&#26469;&#12290;&#20195;&#25442;&#24335;&#32452;&#35299;&#37322;&#20102;&#31867;&#22411;&#34920;&#36798;&#24335;&#20013;&#27599;&#20010;&#31867;&#22411;&#21464;&#37327;
&#30340;&#21547;&#20041;&#12290;&#25105;&#20204;&#25226;&#20195;&#25442;&#24335;&#32452;&#27604;&#20316;<span class="emph">&#23384;&#20648;&#22120;</span>&#65292;&#25226;&#31867;&#22411;&#21464;&#37327;&#27604;&#20316;&#23384;&#20648;&#22120;<span class="emph">&#24341;&#29992;</span>&#12290;&#22240;&#27492;&#65292;
<span class="stt">type-of</span> &#36820;&#22238;&#20004;&#20010;&#20540;&#65306;&#19968;&#20010;&#31867;&#22411;&#34920;&#36798;&#24335;&#65292;&#21644;&#19968;&#20010;&#35299;&#37322;&#34920;&#36798;&#24335;&#20013;&#31867;&#22411;&#21464;&#37327;&#30340;&#20195;&#25442;&#24335;&#32452;&#12290;
&#20687; &#37027;&#26679;&#65292;&#25105;&#20204;&#22312;&#23454;&#29616;&#26102;&#26032;&#23450;&#20041;&#19968;&#31181;&#21253;&#21547;&#20004;&#20010;&#20540;&#30340;&#25968;&#25454;&#31867;&#22411;&#65292;&#29992;&#20316;&#36820;
&#22238;&#20540;&#12290;</p><p><span class="stt">type-of</span> &#30340;&#23450;&#20041;&#22914;&ndash;fig-7.8 &#25152;&#31034;&#12290;&#23545;&#27599;&#20010;&#34920;&#36798;&#24335;&#65292;
&#25105;&#20204;&#36882;&#24402;&#22788;&#29702;&#23376;&#34920;&#36798;&#24335;&#65292;&#19968;&#36335;&#20256;&#36882;&#20195;&#25442;&#24335;&#32452;&#21442;&#25968;&#20013;&#29616;&#26377;&#30340;&#35299;&#12290;&#28982;&#21518;&#65292;&#25105;&#20204;&#26681;&#25454;&#35268;&#33539;&#65292;&#20026;&#24403;&#21069;
&#34920;&#36798;&#24335;&#24314;&#31435;&#26041;&#31243;&#65292;&#35843;&#29992; <span class="stt">unifier</span>&#65292;&#22312;&#20195;&#25442;&#24335;&#32452;&#20013;&#35760;&#24405;&#36825;&#20123;&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Answer} = \mathit{Type} \to \mathit{Subst}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktSym">answer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">type?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">substitution?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">type-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-tenv</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-subst</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-subst-to-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">type-of</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Tenv} \times \mathit{Subst} \to \mathit{Answer}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\begin{math}\begin{alignedat}{-1}<span class="stt">(zero?-exp </span><span class="texMathInline">e_1</span><span class="stt">)</span> &amp;: <span class="texMathInline">t_{e_1}</span> = <span class="stt">int</span> \\ &amp;\mathrel{\phantom{:}} <span class="texMathInline">t_{<span class="stt">(zero?-exp </span><span class="texMathInline">e_1</span><span class="stt">)</span>}</span> = <span class="stt">bool</span>\end{alignedat}\end{math}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">subst1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">subst2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unifier</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">subst1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">subst2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\begin{comment}</td></tr><tr><td><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\end{comment}
\smallskip</td></tr></table></blockquote><blockquote class="caption"><p>INFERRED &#30340; <span class="stt">type-of</span>&#65292;&#31532; 1 &#37096;&#20998;<a name="(elem._fig-7..6)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\fbox{\begin{math}\begin{alignedat}{-1}<span class="stt">(diff-exp </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt">)</span> &amp;: <span class="texMathInline">t_{e_1}</span> = <span class="stt">int</span> \\ &amp;\mathrel{\phantom{:}} <span class="texMathInline">t_{e_2}</span> = <span class="stt">int</span> \\ &amp;\mathrel{\phantom{:}} <span class="texMathInline">t_{<span class="stt">(diff-exp </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt">)</span>}</span> = <span class="stt">int</span>\end{alignedat}\end{math}}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">subst1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">subst1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unifier</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">subst1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">subst2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">subst2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unifier</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">subst2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="texMathInline">\fbox{\begin{math}\begin{alignedat}{-1}<span class="stt">(if-exp </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt"> </span><span class="texMathInline">e_3</span><span class="stt">)</span> &amp;: <span class="texMathInline">t_{e_1}</span> = <span class="stt">bool</span> \\ &amp;\mathrel{\phantom{:}} <span class="texMathInline">t_{e_2}</span> = <span class="texMathInline">t_{<span class="stt">(if-exp </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt"> </span><span class="texMathInline">e_3</span><span class="stt">)</span>}</span> \\ &amp;\mathrel{\phantom{:}} <span class="texMathInline">t_{e_3}</span> = <span class="texMathInline">t_{<span class="stt">(if-exp </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt"> </span><span class="texMathInline">e_3</span><span class="stt">)</span>}</span>\end{alignedat}\end{math}}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unifier</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty3</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unifier</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">ty3</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1-type</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1-type</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>INFERRED &#30340; <span class="stt">type-of</span>&#65292;&#31532; 2 &#37096;&#20998;<a name="(elem._fig-7..7)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\fbox{<span class="stt">(proc-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">)</span> : <span class="texMathInline">t_{<span class="stt">(proc-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">)</span>}</span> = <span class="stt">(</span><span class="texMathInline">tvar</span><span class="stt"> </span><span class="texMathInline">\to</span><span class="stt"> </span><span class="texMathInline">t_{body}</span><span class="stt">)</span>}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">otype</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">var-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">otype-&gt;type</span><span class="hspace">&nbsp;</span><span class="RktSym">otype</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">var-type</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body-type</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktSym">var-type</span><span class="hspace">&nbsp;</span><span class="RktSym">body-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="texMathInline">\fbox{<span class="stt">(call-exp </span><span class="texMathInline">rator</span><span class="stt"> </span><span class="texMathInline">rand</span><span class="stt">)</span> : <span class="texMathInline">t_{rator}</span> = <span class="stt">(</span><span class="texMathInline">t_{rand}</span><span class="stt"> </span><span class="texMathInline">\to</span><span class="stt"> </span><span class="texMathInline">t_{<span class="stt">(call-exp </span><span class="texMathInline">rator</span><span class="stt"> </span><span class="texMathInline">rand</span><span class="stt">)</span>}</span><span class="stt">)</span>}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">result-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh-tvar-type</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator-type</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unifier</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">rator-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">rand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>INFERRED &#30340; <span class="stt">type-of</span>&#65292;&#31532; 3 &#37096;&#20998;<a name="(elem._fig-7..8)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1151))"></a></div></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\fbox{\begin{math}\begin{alignedat}{-1}&amp;<span class="stt">letrec </span><span class="texMathInline">t_{proc\mbox{-}result}</span><span class="stt"> </span><span class="texMathInline">p</span><span class="stt"> (</span><span class="texMathInline">var</span><span class="stt"> : </span><span class="texMathInline">t_{var}</span><span class="stt">) = </span><span class="texMathInline">e_{proc\mbox{-}body}</span><span class="stt"> in </span><span class="texMathInline">e_{letrec\mbox{-}body}</span> : \\ &amp;\phantom{xx}t_{p} = t_{var} \to t_{e_{proc\mbox{-}body}} \\ &amp;\phantom{xx}t_{e_{letrec\mbox{-}body}} = t_{<span class="stt">letrec </span><span class="texMathInline">t_{proc\mbox{-}result}</span><span class="stt"> </span><span class="texMathInline">p</span><span class="stt"> (</span><span class="texMathInline">var</span><span class="stt"> : </span><span class="texMathInline">t_{var}</span><span class="stt">) = </span><span class="texMathInline">e_{proc\mbox{-}body}</span><span class="stt"> in </span><span class="texMathInline">e_{letrec\mbox{-}body}</span>}\end{alignedat}\end{math}}</span></td></tr><tr><td>\smallskip
\begin{comment}</td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">...</span></td></tr><tr><td>\end{comment}</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">letrec-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-result-otype</span><span class="hspace">&nbsp;</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var-otype</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">p-result-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">otype-&gt;type</span><span class="hspace">&nbsp;</span><span class="RktSym">p-result-otype</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-var-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">otype-&gt;type</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var-otype</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">tenv-for-letrec-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">p-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktSym">p-var-type</span><span class="hspace">&nbsp;</span><span class="RktSym">p-result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-var-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv-for-letrec-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-answer</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-body-type</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unifier</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body-type</span><span class="hspace">&nbsp;</span><span class="RktSym">p-result-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">letrec-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv-for-letrec-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>INFERRED &#30340; <span class="stt">type-of</span>&#65292;&#31532; 4 &#37096;&#20998;
<a name="(idx._(gentag._1152))"></a>
<a name="(idx._(gentag._1153))"></a><a name="(elem._fig-7..9)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1154))"></a>
&#22240;&#20026;&#22810;&#24577;&#30340;&#32536;&#25925;&#65292;&#27979;&#35797;&#25512;&#23548;&#22120;&#27604;&#27979;&#35797;&#20043;&#21069;&#30340;&#35299;&#37322;&#22120;&#31245;&#24494;&#40635;&#28902;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#32473;&#25512;&#23548;&#22120;&#36755;&#20837;
<span class="stt">proc (x) x</span>&#65292;&#23427;&#32473;&#20986;&#30340;&#22806;&#22312;&#34920;&#31034;&#21487;&#33021;&#26159; <span class="stt">(tvar1 -&gt; tvar1)</span>&#12289;<span class="stt">(tvar2 -&gt;
tvar2)</span> &#25110; <span class="stt">(tvar3 -&gt; tvar3)</span>&#65292;&#31561;&#31561;&#12290;&#27599;&#27425;&#35843;&#29992;&#25512;&#23548;&#22120;&#32467;&#26524;&#37117;&#21487;&#33021;&#19981;&#21516;&#65292;&#25152;&#20197;&#25105;&#20204;&#20889;
&#27979;&#35797;&#39033;&#26102;&#19981;&#33021;&#30452;&#25509;&#20351;&#29992;&#23427;&#20204;&#65292;&#21542;&#21017;&#23601;&#26080;&#27861;&#27604;&#36739;&#25512;&#23548;&#20986;&#30340;&#31867;&#22411;&#21644;&#27491;&#30830;&#31867;&#22411;&#12290;&#25105;&#20204;&#38656;&#35201;&#25509;&#21463;&#19978;&#36848;
&#25152;&#26377;&#21487;&#33021;&#65292;&#20294;&#25298;&#32477; <span class="stt">(tvar3 -&gt; tvar4)</span> &#25110;&#26159; <span class="stt">(int -&gt; tvar17)</span>&#12290;</p><p>&#35201;&#27604;&#36739;&#20004;&#31181;&#31867;&#22411;&#30340;&#22806;&#22312;&#34920;&#31034;&#65292;&#25105;&#20204;&#32479;&#19968;&#26410;&#30693;&#31867;&#22411;&#30340;&#21517;&#23383;&#65292;&#36941;&#21382;&#27599;&#20010;&#22806;&#22312;&#34920;&#31034;&#65292;&#32473;&#31867;&#22411;&#21464;&#37327;&#37325;
&#26032;&#32534;&#21495;&#65292;&#20351;&#20043;&#20174; <span class="stt">ty1</span> &#24320;&#22987;&#12290;&#28982;&#21518;&#65292;&#25105;&#20204;&#23601;&#33021;&#29992; <span class="stt">equal?</span> &#27604;&#36739;&#37325;&#26032;&#32534;&#21495;&#30340;&#31867;&#22411;
&#65288;&ndash;fig-7.11&#65289;&#12290;</p><p>&#35201;&#36880;&#20010;&#21629;&#21517;&#25152;&#26377;&#26410;&#30693;&#21464;&#37327;&#65292;&#25105;&#20204;&#29992; <span class="stt">canonical-subst</span> &#29983;&#25104;&#20195;&#25442;&#24335;&#32452;&#12290;&#25105;&#20204;&#29992;
<span class="stt">table</span>&#20570;&#32047;&#21152;&#22120;&#65292;&#21363;&#21487;&#30452;&#25509;&#36882;&#24402;&#12290;<span class="stt">table</span> &#30340;&#38271;&#24230;&#21578;&#35785;&#25105;&#20204;&#24050;&#25214;&#20986;&#22810;&#23569;&#20010;&#19981;&#21516;&#30340;&#26410;
&#30693;&#31867;&#22411;&#65292;&#25105;&#20204;&#21487;&#20197;&#29992;&#20854;&#38271;&#24230;&#32473;&#8220;&#19979;&#19968;&#20010;&#8221;<span class="stt">ty</span>&#31526;&#21495;&#32534;&#21495;&#12290;
&#36825;&#21644;&#25105;&#20204;&#22312; &#20013;&#20351;&#29992;&#30340; <span class="stt">length</span> &#31867;&#20284;&#12290;
<a name="(idx._(gentag._1155))"></a>
<a name="(idx._(gentag._1156))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{TvarTypeSym} = <span class="emph">&#21547;&#26377;&#25968;&#23383;&#30340;&#31526;&#21495;</span></span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="texMathInline">\mathit{A\mbox{-}list} = \mathit{Listof(Pair(TvarTypeSym,TvarTypeSym))}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">equal-up-to-gensyms?</span></span> : <span class="texMathInline">\mathit{S\mbox{-}exp} \times \mathit{S\mbox{-}exp} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">equal-up-to-gensyms?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sexp1</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-subst-to-sexp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">canonical-subst</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-subst-to-sexp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">canonical-subst</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">canonical-subst</span></span> : <span class="texMathInline">\mathit{S\mbox{-}exp} \to \mathit{A\mbox{-}list}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">canonical-subst</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">S-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">&#215;</span><span class="hspace">&nbsp;</span><span class="RktSym">A-list</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">A-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">sexp</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">table</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">table</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">tvar-type-sym?</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="hspace">&nbsp;</span><span class="RktSym">table</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">table</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ctr-&gt;ty</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktSym">table</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">table</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">pair?</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">table</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktSym">table</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p><span class="stt">equal-up-to-gensyms?</span>&#65292;&#31532; 1 &#37096;&#20998;
<a name="(idx._(gentag._1157))"></a>
<a name="(idx._(gentag._1158))"></a><a name="(elem._fig-7..10)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">tvar-type-sym?</span></span> : <span class="texMathInline">\mathit{Sym} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">tvar-type-sym?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sym</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span><span class="RktSym">sym</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">char-numeric?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">reverse</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">symbol-&gt;list</span><span class="hspace">&nbsp;</span><span class="RktSym">sym</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">symbol-&gt;list</span></span> : <span class="texMathInline">\mathit{Sym} \to \mathit{List}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol-&gt;list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-&gt;list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">symbol-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-subst-to-sexp</span></span> : <span class="texMathInline">\mathit{A\mbox{-}list} \times \mathit{S\mbox{-}exp} \to \mathit{S\mbox{-}exp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-subst-to-sexp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">tvar-type-sym?</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">pair?</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-subst-to-sexp</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-subst-to-sexp</span><span class="hspace">&nbsp;</span><span class="RktSym">subst</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktSym">sexp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">ctr-&gt;ty</span></span> : <span class="texMathInline">\mathit{N} \to \mathit{Sym}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">ctr-&gt;ty</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-&gt;symbol</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"tvar"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-&gt;string</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p><span class="stt">equal-up-to-gensyms?</span>&#65292;&#31532; 2 &#37096;&#20998;
<a name="(idx._(gentag._1159))"></a>
<a name="(idx._(gentag._1160))"></a><a name="(elem._fig-7..11)"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..23)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#25512;&#23548;&#22120;&#65292;&#20687; &#37027;&#26679;&#22788;&#29702;&#24207;&#23545;&#31867;&#22411;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..24)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1161))"></a>
<a name="(idx._(gentag._1162))"></a>
<a name="(idx._(gentag._1163))"></a>
&#25193;&#23637;&#25512;&#23548;&#22120;&#65292;&#22788;&#29702;&#22810;&#22768;&#26126; <span class="stt">let</span>&#12289;&#22810;&#21442;&#25968;&#36807;&#31243;&#21644;&#22810;&#22768;&#26126; <span class="stt">letrec</span>&#12290;
<a name="(idx._(gentag._1164))"></a>
<a name="(idx._(gentag._1165))"></a>
<a name="(idx._(gentag._1166))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..25)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1167))"></a>
&#25193;&#23637;&#25512;&#23548;&#22120;&#65292;&#20687; &#37027;&#26679;&#22788;&#29702;&#21015;&#34920;&#31867;&#22411;&#12290;&#20462;&#25913;&#35821;&#35328;&#65292;&#29992;&#29983;&#25104;&#24335;
<span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">emptylist</span></span>
&#20195;&#26367;
<span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">emptylist_</span><span class="texMathInline">\mathit{Type}</span></span>
&#25552;&#31034;&#65306;&#32771;&#34385;&#29992;&#31867;&#22411;&#21464;&#37327;&#20195;&#26367;&#32570;&#22833;&#30340; <span class="stt">_</span><span class="texMathInline">t</span>&#12290;
<a name="(idx._(gentag._1168))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1169))"></a>
&#25193;&#23637;&#25512;&#23548;&#22120;&#65292;&#20687; &#37027;&#26679;&#22788;&#29702; EXPLICIT-REFS&#12290;
<a name="(idx._(gentag._1170))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..27)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1171))"></a>
&#37325;&#20889;&#25512;&#23548;&#22120;&#65292;&#23558;&#20854;&#20998;&#20026;&#20004;&#27493;&#12290;&#31532;&#19968;&#27493;&#29983;&#25104;&#19968;&#31995;&#21015;&#26041;&#31243;&#65292;&#31532;&#20108;&#27493;&#37325;&#22797;&#35843;&#29992; <span class="stt">unify</span> &#27714;&#35299;&#23427;
&#20204;&#12290;
<a name="(idx._(gentag._1172))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..28)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1173))"></a>
&#25105;&#20204;&#30340;&#25512;&#23548;&#22120;&#34429;&#24456;&#26377;&#29992;&#65292;&#21364;&#19981;&#22815;&#24378;&#22823;&#65292;&#19981;&#20801;&#35768;&#31243;&#24207;&#21592;&#23450;&#20041;&#22810;&#24577;&#36807;&#31243;&#65292;&#20687;&#23450;&#20041;&#22810;&#24577;&#21407;&#35821;
<span class="stt">pair</span> &#25110; <span class="stt">cons</span> &#37027;&#26679;&#65292;&#36866;&#29992;&#20110;&#22810;&#31181;&#31867;&#22411;&#12290;&#20363;&#22914;&#65292;&#21363;&#20351;&#25191;&#34892;&#26159;&#23433;&#20840;&#30340;&#65292;&#25105;&#20204;&#30340;&#25512;&#23548;
&#22120;&#20063;&#20250;&#25298;&#32477;&#31243;&#24207;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let f = proc (x : ?) x</span></p></td></tr><tr><td><p><span class="stt">in if (f zero?(0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">then (f 11)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">else (f 22)</span></p></td></tr></table></blockquote><p>&#22240;&#20026; <span class="stt">f</span> &#26082;&#26159; <span class="stt">(bool -&gt; bool)</span> &#20063;&#26159; <span class="stt">(int -&gt; int)</span>&#12290;&#30001;&#20110;&#26412;&#33410;&#30340;&#25512;&#23548;&#22120;&#33267;
&#22810;&#21482;&#33021;&#25214;&#20986; <span class="stt">f</span> &#30340;&#19968;&#31181;&#31867;&#22411;&#65292;&#23427;&#23558;&#25298;&#32477;&#36825;&#27573;&#31243;&#24207;&#12290;</p><p>&#26356;&#23454;&#38469;&#30340;&#20363;&#23376;&#26159;&#36825;&#26679;&#30340;&#31243;&#24207;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">? map (f : ?) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">? foo (x : ?) = if null?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then emptylist</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else cons((f car(x)),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(foo cdr(x)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in foo</span></p></td></tr><tr><td><p><span class="stt">in letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">? even (y : ?) = if zero?(y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then zero?(0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else if zero?(-(y,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then zero?(1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else (even -(y,2))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in pair(((map proc(x : int) -(x,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">cons(3,cons(5,emptylist))),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">((map even)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">cons(3,cons(5,emptylist))))</span></p></td></tr></table></blockquote><p>&#36825;&#20010;&#34920;&#36798;&#24335;&#29992;&#20102;&#20004;&#27425; <span class="stt">map</span>&#65292;&#19968;&#27425;&#20135;&#29983; <span class="stt">int</span> &#21015;&#34920;&#65292;&#19968;&#27425;&#20135;&#29983; <span class="stt">bool</span> &#21015;&#34920;&#12290;&#22240;
&#27492;&#65292;&#20004;&#27425;&#20351;&#29992;&#23427;&#38656;&#35201;&#20004;&#20010;&#19981;&#21516;&#30340;&#31867;&#22411;&#12290;&#30001;&#20110;&#26412;&#33410;&#30340;&#25512;&#23548;&#22120;&#33267;&#22810;&#21482;&#33021;&#25214;&#20986; <span class="stt">map</span> &#30340;&#19968;&#31181;&#31867;
&#22411;&#65292;&#23427;&#26816;&#27979;&#21040; <span class="stt">int</span> &#21644; <span class="stt">bool</span> &#20914;&#31361;&#65292;&#25298;&#32477;&#31243;&#24207;&#12290;</p><p>&#36991;&#20813;&#36825;&#20010;&#38382;&#39064;&#30340;&#19968;&#31181;&#26041;&#27861;&#26159;&#21482;&#20801;&#35768; <span class="stt">let</span> &#24341;&#20837;&#22810;&#24577;&#65292;&#28982;&#21518;&#22312;&#31867;&#22411;&#26816;&#26597;&#26102;&#21306;&#20998;
<span class="stt">(let-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt">)</span> &#21644; <span class="stt">(call-exp (proc-exp </span><span class="texMathInline">var</span><span class="stt">
</span><span class="texMathInline">e_2</span><span class="stt">) </span><span class="texMathInline">e_1</span><span class="stt">)</span>&#12290;</p><p>&#32473;&#25512;&#23548;&#22120;&#28155;&#21152;&#22810;&#24577;&#32465;&#23450;&#65292;&#22788;&#29702;&#34920;&#36798;&#24335; <span class="stt">(let-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">e_1</span><span class="stt"> </span><span class="texMathInline">e_2</span><span class="stt">)</span> &#26102;&#65292;&#25226;
<span class="texMathInline">e_2</span> &#20013;&#33258;&#30001;&#20986;&#29616;&#30340;&#27599;&#20010; <span class="texMathInline">var</span> &#20195;&#25442;&#20026; <span class="texMathInline">e_1</span>&#12290;&#37027;&#20040;&#65292;&#22312;&#25512;&#23548;&#22120;&#30475;&#26469;&#65292;<span class="stt">let</span> &#20027;
&#20307;&#20013;&#26377;&#22810;&#20010;&#19981;&#21516;&#30340; <span class="texMathInline">e_1</span> &#21103;&#26412;&#65292;&#23427;&#20204;&#21487;&#20197;&#26377;&#19981;&#21516;&#30340;&#31867;&#22411;&#65292;&#19978;&#36848;&#31243;&#24207;&#23601;&#33021;&#36890;&#36807;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..29)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1174))"></a>
&#21069;&#19968;&#36947;&#32451;&#20064;&#25351;&#20986;&#30340;&#31867;&#22411;&#25512;&#23548;&#31639;&#27861;&#20250;&#22810;&#27425;&#20998;&#26512;<span class="texMathInline">e_1</span>&#65292;&#27599;&#27425;&#23545;&#24212; <span class="texMathInline">e_2</span> &#20013;&#20986;&#29616;&#30340;&#19968;&#20010;
<span class="texMathInline">e_1</span>&#12290;&#23454;&#29616; <a name="(idx._(gentag._1175))"></a>Milner &#30340; W &#31639;&#27861;&#65292;&#21482;&#38656;&#20998;&#26512; <span class="texMathInline">e_1</span> &#19968;&#27425;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex7..30)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1176))"></a>
<a name="(idx._(gentag._1177))"></a>
&#22810;&#24577;&#21644;&#21103;&#20316;&#29992;&#20043;&#38388;&#30340;&#30456;&#20114;&#20316;&#29992;&#24456;&#24494;&#22937;&#12290;&#32771;&#34385;&#20197;&#19979;&#25991;&#24320;&#22836;&#30340;&#19968;&#27573;&#31243;&#24207;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let p = newref(proc (x : ?) x)</span></p></td></tr><tr><td><p><span class="stt">in ...</span></p></td></tr></table></blockquote><ol><li><p>&#23436;&#25104;&#36825;&#27573;&#31243;&#24207;&#65292;&#20351;&#20043;&#36890;&#36807;&#25512;&#23548;&#22120;&#30340;&#26816;&#26597;&#65292;&#20294;&#26681;&#25454;&#26412;&#31456;&#24320;&#22836;&#30340;&#23450;&#20041;&#65292;&#27714;&#20540;&#19981;&#23433;&#20840;&#12290;</p></li><li><p>&#38480;&#21046; <span class="stt">let</span> &#22768;&#26126;&#30340;&#21491;&#36793;&#65292;&#19981;&#20801;&#35768;&#20986;&#29616;&#20316;&#29992;&#20110;&#23384;&#20648;&#22120;&#30340;&#25928;&#26524;&#65292;&#20174;&#32780;&#36991;&#20813;&#36825;&#19968;&#38382;&#39064;&#12290;
&#36825;&#21483;&#20570;<span class="emph">&#20540;&#32422;&#26463;</span> (<span class="emph">value restriction</span>)&#12290;
<a name="(idx._(gentag._1178))"></a>
<a name="(idx._(gentag._1179))"></a>
<a name="(idx._(gentag._1180))"></a></p></li></ol></blockquote><h3 class="heading">8<tt>&nbsp;</tt><a name="(part._modules)"></a>&#27169;&#22359;<span class="button-group"><a href="#(part._modules)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(idx._(gentag._1181))"></a>
&#35201;&#26500;&#24314;&#21482;&#26377;&#20960;&#30334;&#34892;&#20195;&#30721;&#30340;&#31995;&#32479;&#65292;&#25105;&#20204;&#20171;&#32461;&#30340;&#35821;&#35328;&#29305;&#24615;&#24050;&#38750;&#24120;&#24378;&#22823;&#12290;&#22914;&#26524;&#25105;&#20204;&#35201;&#26500;&#24314;&#26356;&#22823;&#30340;&#31995;
&#32479;&#65292;&#26377;&#25968;&#21315;&#34892;&#20195;&#30721;&#65292;&#25105;&#20204;&#23601;&#36824;&#38656;&#35201;&#19968;&#20123;&#21035;&#30340;&#20304;&#26009;&#12290;</p><ol><li><p>&#25105;&#20204;&#38656;&#35201;&#19968;&#31181;&#22909;&#30340;&#26041;&#24335;&#65292;&#23558;&#31995;&#32479;&#20998;&#20026;&#30456;&#23545;&#29420;&#31435;&#30340;&#37096;&#20998;&#65292;&#24182;&#33021;&#32534;&#20889;&#25991;&#26723;&#65292;&#35299;&#37322;&#21508;&#37096;&#20998;
&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#12290;</p></li><li><p>&#25105;&#20204;&#38656;&#35201;&#19968;&#31181;&#26356;&#22909;&#30340;&#26041;&#24335;&#26469;&#25511;&#21046;&#21517;&#23383;&#30340;&#20316;&#29992;&#22495;&#21644;&#32465;&#23450;&#12290;&#35789;&#27861;&#23450;&#30028;&#26159;&#21629;&#21517;&#25511;&#21046;&#30340;&#24378;&#22823;
&#24037;&#20855;&#65292;&#20294;&#19981;&#36275;&#20197;&#24212;&#23545;&#26356;&#22823;&#25110;&#20998;&#21106;&#20026;&#22810;&#20221;&#28304;&#20195;&#30721;&#30340;&#31243;&#24207;&#12290;</p></li><li><p>&#25105;&#20204;&#38656;&#35201;&#19968;&#31181;&#26041;&#24335;&#24378;&#21270;&#25277;&#35937;&#36793;&#30028;&#12290;&#22312;<a href="#%28part._da%29" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a>&#65292;&#25105;&#20204;&#20171;&#32461;&#20102;&#25277;&#35937;&#25968;&#25454;&#31867;&#22411;&#30340;&#24605;&#24819;&#12290;
&#22312;&#31867;&#22411;&#30340;&#23454;&#29616;&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#23545;&#20540;&#20570;&#20219;&#24847;&#25805;&#20316;&#65292;&#20294;&#22312;&#23454;&#29616;&#20043;&#22806;&#65292;&#31867;&#22411;&#30340;&#20540;&#21482;&#33021;&#36890;&#36807;&#31867;&#22411;&#25509;&#21475;
&#20013;&#30340;&#36807;&#31243;&#21019;&#24314;&#21644;&#25805;&#20316;&#12290;&#25105;&#20204;&#25226;&#36825;&#21483;&#20570;<a name="(idx._(gentag._1182))"></a><span class="emph">&#25277;&#35937;&#36793;&#30028;</span> (<span class="emph">abstraction boundary</span>)&#12290;&#22914;&#26524;&#31243;&#24207;&#36981;&#23432;&#36825;&#19968;&#30028;&#38480;&#65292;&#25105;&#20204;&#21487;
&#20197;&#25913;&#21464;&#25968;&#25454;&#31867;&#22411;&#30340;&#23454;&#29616;&#12290;&#20294;&#26159;&#65292;&#22914;&#26524;&#26576;&#20123;&#20195;&#30721;&#25171;&#30772;&#20102;&#25277;&#35937;&#65292;&#20381;&#36182;&#23454;&#29616;&#32454;&#33410;&#65292;&#25105;&#20204;&#23601;&#26080;&#27861;&#20219;
&#24847;&#20462;&#25913;&#23454;&#29616;&#32780;&#19981;&#30772;&#22351;&#20854;&#20182;&#20195;&#30721;&#12290;</p></li><li><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#38656;&#35201;&#19968;&#31181;&#26041;&#24335;&#65292;&#23558;&#36825;&#20123;&#37096;&#20998;&#28789;&#27963;&#32452;&#21512;&#65292;&#35753;&#21516;&#19968;&#37096;&#20998;&#21487;&#22797;&#29992;&#20110;&#19981;&#21516;&#22320;&#26041;&#12290;</p></li></ol><p>&#26412;&#31456;&#65292;&#25105;&#20204;&#20171;&#32461;<span class="emph">&#27169;&#22359;</span> (<span class="emph">module</span>)&#65292;&#20197;&#28385;&#36275;&#36825;&#20123;&#38656;&#27714;&#12290;&#20855;&#20307;&#26469;&#35828;&#65292;&#25105;&#20204;&#23637;&#31034;&#20102;&#22914;&#20309;&#29992;
&#31867;&#22411;&#31995;&#32479;&#21019;&#24314;&#21644;&#24378;&#21270;&#25277;&#35937;&#36793;&#30028;&#12290;</p><p>&#25105;&#20204;&#30340;&#27169;&#22359;&#35821;&#35328;&#20013;&#65292;&#31243;&#24207;&#21253;&#21547;&#19968;&#31995;&#21015;<span class="emph">&#27169;&#22359;&#23450;&#20041;</span> (<span class="emph">module definition</span>)&#65292;&#21518;&#36319;&#19968;&#20010;&#24453;
&#27714;&#20540;&#30340;&#34920;&#36798;&#24335;&#12290;&#27599;&#20010;&#27169;&#22359;&#23450;&#20041;&#25226;&#19968;&#20010;&#21517;&#23383;&#32465;&#23450;&#21040;&#19968;&#20010;<span class="emph">&#27169;&#22359;</span>&#12290;&#21019;&#24314;&#30340;&#27169;&#22359;&#21487;&#33021;
&#26159;<span class="emph">&#31616;&#21333;&#27169;&#22359;</span> (<span class="emph">simple module</span>)&#65292;&#31867;&#20284;&#29615;&#22659;&#65292;&#26159;&#19968;&#32452;&#32465;&#23450;&#65307;&#20063;&#21487;&#33021;&#26159;<span class="emph">&#27169;&#22359;&#36807;&#31243;</span> (<span class="emph">module
procedure</span>)&#65292;&#21462;&#19968;&#27169;&#22359;&#65292;&#29983;&#25104;&#21478;&#19968;&#27169;&#22359;&#12290;</p><p><a name="(idx._(gentag._1183))"></a>
&#27599;&#20010;&#27169;&#22359;&#37117;&#26377;&#19968;&#22871;<span class="emph">&#25509;&#21475;</span> (<span class="emph">interface</span>)&#12290;&#20316;&#20026;&#19968;&#32452;&#32465;&#23450;&#30340;&#27169;&#22359;&#20855;&#26377;<span class="emph">&#31616;&#21333;&#25509;&#21475;</span> (<span class="emph">simple
interface</span>)&#65292;&#25509;&#21475;&#21015;&#20986;&#27169;&#22359;&#25552;&#20379;&#30340;&#32465;&#23450;&#21450;&#20854;&#31867;&#22411;&#12290;&#27169;&#22359;&#36807;&#31243;&#30340;&#25509;&#21475;&#25351;&#23450;&#27169;&#22359;&#30340;
&#21442;&#25968;&#25509;&#21475;&#21644;&#36820;&#22238;&#27169;&#22359;&#30340;&#25509;&#21475;&#65292;&#23601;&#20687;&#36807;&#31243;&#30340;&#31867;&#22411;&#25351;&#23450;&#21442;&#25968;&#21644;&#32467;&#26524;&#30340;&#31867;&#22411;&#12290;</p><p>&#36825;&#20123;&#25509;&#21475;&#23601;&#20687;&#31867;&#22411;&#19968;&#26679;&#65292;&#20915;&#23450;&#20102;&#27169;&#22359;&#32452;&#21512;&#30340;&#26041;&#24335;&#12290;&#22240;&#20026;&#27714;&#20986;&#31034;&#20363;&#31243;&#24207;&#30340;&#20540;&#38750;&#24120;&#30452;&#25509;&#65292;&#22240;&#27492;&#25105;
&#20204;&#20851;&#27880;&#20854;&#31867;&#22411;&#12290;&#22914;&#21069;&#25152;&#35265;&#65292;&#29702;&#35299;&#36825;&#31181;&#35821;&#35328;&#30340;&#23450;&#30028;&#21644;&#32465;&#23450;&#35268;&#21017;&#26159;&#31243;&#24207;&#20998;&#26512;&#21644;&#27714;&#20540;&#30340;&#20851;&#38190;&#12290;
<a name="(idx._(gentag._1184))"></a></p><h4 class="heading">8.1<tt>&nbsp;</tt><a name="(part._s8..1)"></a>&#31616;&#21333;&#27169;&#22359;&#31995;&#32479;<span class="button-group"><a href="#(part._s8..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1185))"></a>
<a name="(idx._(gentag._1186))"></a>
&#25105;&#20204;&#30340;&#31532;&#19968;&#31181;&#35821;&#35328;&#21517;&#21483; SIMPLE-MODULES&#65292;&#21482;&#26377;&#31616;&#21333;&#27169;&#22359;&#12290;&#23427;&#27809;&#26377;&#27169;&#22359;&#36807;&#31243;&#65292;&#21482;&#21019;&#24314;&#38750;&#24120;&#31616;
&#21333;&#30340;&#25277;&#35937;&#36793;&#30028;&#12290;&#20960;&#31181;&#27969;&#34892;&#35821;&#35328;&#20351;&#29992;&#19982;&#20043;&#31867;&#20284;&#30340;&#27169;&#22359;&#31995;&#32479;&#12290;</p><h5 class="heading">8.1.1<tt>&nbsp;</tt><a name="(part._s8..1..1)"></a>&#20363;&#23376;<span class="button-group"><a href="#(part._s8..1..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#35774;&#24819;&#19968;&#20010;&#36719;&#20214;&#39033;&#30446;&#20013;&#26377;&#19977;&#21517;&#24320;&#21457;&#32773;&#65306;&#29233;&#20029;&#19997;&#12289;&#40077;&#20271;&#21644;&#26597;&#29702;&#12290;&#29233;&#20029;&#19997;&#12289;&#40077;&#20271;&#21644;&#26597;&#29702;&#27491;&#22312;&#24320;&#21457;&#39033;
&#30446;&#20013;&#30456;&#23545;&#29420;&#31435;&#30340;&#20960;&#37096;&#20998;&#12290;&#36825;&#20123;&#24320;&#21457;&#32773;&#25955;&#23621;&#21508;&#22320;&#65292;&#26102;&#21306;&#37117;&#21487;&#33021;&#19981;&#21516;&#12290;&#39033;&#30446;&#30340;&#27599;&#37096;&#20998;&#37117;&#35201;&#23454;&#29616;&#19968;
&#22871;<a href="#%28part._s2..1%29" data-pltdoc="x">&#29992;&#25509;&#21475;&#23450;&#20041;&#25968;&#25454;</a>&#37027;&#26679;&#30340;&#25509;&#21475;&#65292;&#20294;&#25509;&#21475;&#30340;&#23454;&#29616;&#21487;&#33021;&#28041;&#21450;&#22823;&#37327;&#20854;&#20182;&#36807;&#31243;&#12290;&#32780;&#19988;&#65292;&#24403;&#21508;&#37096;&#20998;&#38598;&#25104;
&#21040;&#19968;&#36215;&#26102;&#65292;&#24320;&#21457;&#32773;&#38656;&#35201;&#30830;&#20445;&#19981;&#23384;&#22312;&#24178;&#25200;&#39033;&#30446;&#20854;&#20182;&#37096;&#20998;&#30340;&#21629;&#21517;&#20914;&#31361;&#12290;</p><p>&#35201;&#23454;&#29616;&#36825;&#19968;&#30446;&#26631;&#65292;&#24320;&#21457;&#32773;&#20204;&#38656;&#35201;&#20844;&#24067;&#19968;&#22871;&#25509;&#21475;&#65292;&#21015;&#20986;&#27599;&#20010;&#20379;&#20182;&#20154;&#20351;&#29992;&#30340;&#36807;&#31243;&#21517;&#23383;&#12290;&#27169;&#22359;&#31995;&#32479;
&#35201;&#20445;&#35777;&#36825;&#20123;&#21517;&#23383;&#26159;&#20844;&#24320;&#30340;&#65292;&#32780;&#23427;&#20204;&#20351;&#29992;&#30340;&#20854;&#20182;&#21517;&#23383;&#21017;&#26159;&#31169;&#26377;&#30340;&#65292;&#19988;&#19981;&#20250;&#34987;&#39033;&#30446;&#20013;&#30340;&#20854;&#20182;&#20195;&#30721;
&#20462;&#25913;&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#29992;<a href="#%28part._expr%29" data-pltdoc="x">&#34920;&#36798;&#24335;</a>&#20013;&#30340;&#23450;&#30028;&#25216;&#26415;&#65292;&#20294;&#36825;&#20123;&#26080;&#27861;&#24212;&#23545;&#26356;&#22823;&#30340;&#24037;&#31243;&#12290;&#30456;&#21453;&#65292;&#25105;&#20204;&#20351;&#29992;&#27169;
&#22359;&#31995;&#32479;&#12290;&#24320;&#21457;&#32773;&#20204;&#21508;&#35774;&#35745;&#19968;&#20010;&#27169;&#22359;&#65292;&#21253;&#21547;&#20844;&#24320;&#25509;&#21475;&#21644;&#31169;&#26377;&#23454;&#29616;&#12290;&#20182;&#20204;&#33021;&#30475;&#21040;&#33258;&#24049;&#27169;&#22359;&#30340;&#25509;&#21475;
&#21644;&#23454;&#29616;&#65292;&#20294;&#29233;&#20029;&#19997;&#21482;&#33021;&#30475;&#21040;&#20182;&#20154;&#27169;&#22359;&#30340;&#25509;&#21475;&#12290;&#22905;&#30340;&#25152;&#20570;&#25152;&#20026;&#19981;&#20250;&#24433;&#21709;&#20854;&#20182;&#27169;&#22359;&#30340;&#23454;&#29616;&#65292;&#20854;&#20182;
&#27169;&#22359;&#30340;&#23454;&#29616;&#20063;&#19981;&#20250;&#24433;&#21709;&#22905;&#30340;&#65288;&#22914; &#25152;&#31034;&#65289;&#12290;</p><p>&#36825;&#37324;&#26159; SIMPLE-MODULES &#30340;&#31616;&#30701;&#20363;&#23376;&#12290;</p><blockquote class="EoplExample"><p><div class="SIntrapara"><a name="(elem._eg-8..1)"></a></div><div class="SIntrapara"><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[a : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">b : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">c : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[a = 33</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">x = -(a,1)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">% = 32</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">b = -(a,x)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">% = 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">c = -(x,b)] % = 31</span></p></td></tr><tr><td><p><span class="stt">let a = 10</span></p></td></tr><tr><td><p><span class="stt">in -(-(from m1 take a,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">from m1 take b),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">a)</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#20026; <span class="stt">int</span>&#65292;&#20540;&#20026; <span class="texMathInline">((33-1)-10)=22</span>&#12290;</p></blockquote></div></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="alice-view.svg" alt="项目中，爱丽丝所见的三个模块" width="464.54999999999995pt" height="498.75pt"/></p></blockquote></div></p><blockquote class="caption"><p>&#39033;&#30446;&#20013;&#65292;&#29233;&#20029;&#19997;&#25152;&#35265;&#30340;&#19977;&#20010;&#27169;&#22359;<a name="(elem._fig-8..1)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1187))"></a>
<a name="(idx._(gentag._1188))"></a>
<a name="(idx._(gentag._1189))"></a>
&#36825;&#20010;&#31243;&#24207;&#20174;&#21517;&#20026; <span class="stt">m1</span> &#30340;&#27169;&#22359;&#23450;&#20041;&#24320;&#22987;&#12290;&#20687;&#20219;&#20309;&#27169;&#22359;&#19968;&#26679;&#65292;&#23427;&#26377;<span class="emph">&#25509;&#21475;</span>&#21644;<span class="stt">&#20027;&#20307;</span>&#12290;
&#20027;&#20307;<span class="emph">&#23454;&#29616;</span>&#25509;&#21475;&#12290;&#25509;&#21475;<span class="emph">&#22768;&#26126;</span>&#21464;&#37327; <span class="stt">a</span>&#12289;<span class="stt">b</span> &#21644; <span class="stt">c</span>&#12290;&#20027;&#20307;<span class="emph">&#23450;
&#20041;</span>&#20102; <span class="stt">a</span>&#12289;<span class="stt">x</span>&#12289;<span class="stt">b</span> &#21644; <span class="stt">c</span> &#30340;&#32465;&#23450;&#12290;
<a name="(idx._(gentag._1190))"></a></p><p>&#24403;&#25105;&#20204;&#27714;&#31243;&#24207;&#30340;&#20540;&#26102;&#65292;&#20063;&#20250;&#27714;&#20986; <span class="stt">m1</span> &#20027;&#20307;&#20013;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#21464;&#37327; <span class="stt">from m1 take a</span>&#12289;
<span class="stt">from m1 take b</span> &#21644; <span class="stt">from m1 take c</span> &#32465;&#23450;&#21040;&#36866;&#24403;&#30340;&#20540;&#65292;&#23427;&#20204;&#30340;&#20316;&#29992;&#22495;&#20026;&#27169;&#22359;&#23450;
&#20041;&#20043;&#21518;&#12290;&#30001;&#20110; <span class="stt">from m1 take x</span> &#26410;&#22312;&#25509;&#21475;&#20013;&#22768;&#26126;&#65292;&#25152;&#20197;&#23427;&#30340;&#20316;&#29992;&#22495;&#19981;&#21253;&#21547;&#27169;&#22359;&#23450;&#20041;&#20043;
&#21518;&#12290;</p><p><a name="(idx._(gentag._1191))"></a>
<a name="(idx._(gentag._1192))"></a>
&#20026;&#20102;&#21516;<span class="emph">&#31616;&#21333;&#21464;&#37327;</span> (<span class="emph">simple variables</span>) &#21306;&#21035;&#65292;&#25105;&#20204;&#31216;&#36825;&#20123;&#26032;&#21464;&#37327;
&#20026;<span class="emph">&#21463;&#38480;&#21464;&#37327;</span> (<span class="emph">qualified variables</span>)&#12290;&#22312;&#19968;&#33324;&#30340;&#35821;&#35328;&#20013;&#65292;&#21463;&#38480;&#21464;&#37327;&#21487;&#33021;&#20889;&#20316;
<span class="stt">m1.a</span>&#12289;<span class="stt">m1:a</span> &#25110; <span class="stt">m1::a</span>&#12290;&#22312;<a href="#%28part._oac%29" data-pltdoc="x">&#23545;&#35937;&#21644;&#31867;</a>&#25506;&#35752;&#30340;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#20013;&#65292;
<span class="stt">m1.a</span> &#36890;&#24120;&#21478;&#26377;&#21547;&#20041;&#12290;</p><p>&#25105;&#20204;&#35828;&#25509;&#21475;<span class="emph">&#25552;&#20986;</span> (<span class="emph">offer</span>)&#65288;&#25110;&#31216;<span class="emph">&#20844;&#24067;</span> (<span class="emph">advertise</span>)&#65292;
&#25110;&#31216;<span class="emph">&#25215;&#35834;</span> (<span class="emph">promise</span>)&#65289;&#19977;&#20010;&#25972;&#22411;&#20540;&#65292;&#20027;&#20307;<span class="emph">&#25552;
&#20379;</span> (<span class="emph">supply</span>, <span class="emph">provide</span>)&#65288;&#25110;&#31216;<span class="emph">&#36755;&#20986;</span> (<span class="emph">export</span>)&#65289;&#36825;&#20123;&#20540;&#12290;&#24403;&#27169;&#22359;&#20027;&#20307;&#25552;&#20379;&#30340;&#20540;&#31867;&#22411;&#19982;&#25509;&#21475;&#21629;&#21517;&#21464;&#37327;&#26102;&#20844;
&#24067;&#30340;&#31867;&#22411;&#30456;&#31526;&#26102;&#65292;&#20027;&#20307;<span class="emph">&#28385;&#36275;</span>&#20854;&#25509;&#21475;&#12290;</p><p><a name="(idx._(gentag._1193))"></a>
&#22312;&#20027;&#20307;&#20013;&#65292;&#23450;&#20041;&#20855;&#26377; <span class="stt">let*</span> &#37027;&#26679;&#30340;&#20316;&#29992;&#22495;&#65292;&#25152;&#20197; <span class="stt">x</span>&#12289;<span class="stt">b</span> &#21644; <span class="stt">c</span> &#30340;&#23450;&#20041;
&#22312; <span class="stt">a</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#12290;&#19968;&#20123;&#20316;&#29992;&#22495;&#22914; &#25152;&#31034;&#12290;</p><p><a name="(idx._(gentag._1194))"></a>
&#26412;&#20363;&#20013;&#65292;&#20197; <span class="stt">let a = 10</span> &#24320;&#22836;&#30340;&#34920;&#36798;&#24335;&#26159;<span class="emph">&#31243;&#24207;&#20027;&#20307;</span> (<span class="emph">program body</span>)&#12290;&#23427;&#30340;&#20540;
&#21363;&#31243;&#24207;&#30340;&#20540;&#12290;</p><p><a name="(idx._(gentag._1195))"></a>&#27599;&#20010;&#27169;&#22359;&#37117;&#22312;&#27169;&#22359;&#20027;&#20307;&#21644;&#31243;&#24207;&#20854;&#20313;&#37096;&#20998;&#20043;&#38388;&#24314;&#31435;&#20102;&#25277;
&#35937;&#36793;&#30028;&#12290;&#27169;&#22359;&#20027;&#20307;&#20013;&#30340;&#34920;&#36798;&#24335;&#22312;&#25277;&#35937;&#36793;&#30028;<span class="emph">&#20043;&#20869;</span>&#65292;&#20854;&#20182;&#37096;&#20998;&#22312;&#25277;&#35937;&#36793;&#30028;<span class="emph">&#20043;&#22806;</span>&#12290;
&#27169;&#22359;&#20027;&#20307;&#20063;&#21487;&#20197;&#25552;&#20379;&#19981;&#22312;&#25509;&#21475;&#20013;&#30340;&#21517;&#23383;&#32465;&#23450;&#65292;&#20294;&#37027;&#20123;&#32465;&#23450;&#22312;&#31243;&#24207;&#20027;&#20307;&#21644;&#20854;&#20182;&#27169;&#22359;&#20013;&#19981;&#21487;&#35265;&#65292;
&#27491;&#22914; &#25152;&#31034;&#12290;&#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#20013;&#65292;&#31243;&#24207;&#20027;&#20307;&#19981;&#22312; <span class="stt">from m1 take x</span>
&#30340;&#20316;&#29992;&#22495;&#20869;&#12290;&#22914;&#26524;&#25105;&#20204;&#20889; <span class="stt">-(from m1 take a, from m1 take x)</span>&#65292;&#31243;&#24207;&#23601;&#20250;&#31867;&#22411;&#24322;&#24120;&#12290;</p><blockquote class="EoplExample"><p><a name="(elem._eg-8..2)"></a>&#31243;&#24207;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u : bool]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u = 33]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">44</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#24322;&#24120;&#12290;&#21363;&#20351;&#31243;&#24207;&#30340;&#20854;&#20182;&#37096;&#20998;&#19981;&#20351;&#29992;&#37027;&#20123;&#20540;&#65292;&#27169;&#22359;&#20027;&#20307;&#20063;&#35201;&#23558;&#25509;&#21475;&#20013;&#30340;&#21517;&#23383;&#19982;&#36866;&#24403;&#31867;&#22411;&#30340;
&#20540;&#20851;&#32852;&#36215;&#26469;&#12290;</p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="module-contour.svg" alt="简单模块中的一些作用域" width="498.0pt" height="402.0pt"/></p></blockquote></div></p><blockquote class="caption"><p>&#31616;&#21333;&#27169;&#22359;&#20013;&#30340;&#19968;&#20123;&#20316;&#29992;&#22495;<a name="(elem._fig-8..2)"></a></p></blockquote></blockquote><blockquote class="EoplExample"><p><a name="(elem._eg-8..3)"></a>&#27169;&#22359;&#20027;&#20307;&#24517;&#39035;&#25552;&#20379;&#25509;&#21475;&#20013;&#22768;&#26126;&#30340;&#25152;&#26377;&#32465;&#23450;&#12290;&#20363;&#22914;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">v : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u = 33]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">44</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#24322;&#24120;&#65292;&#22240;&#20026; <span class="stt">m1</span> &#30340;&#20027;&#20307;&#27809;&#26377;&#25552;&#20379;&#25509;&#21475;&#20013;&#20844;&#24067;&#30340;&#25152;&#26377;&#20540;&#12290;</p></blockquote></blockquote><blockquote class="EoplExample"><p><a name="(elem._eg-8..4)"></a>&#20026;&#20102;&#35753;&#23454;&#29616;&#31616;&#21333;&#19968;&#28857;&#65292;&#25105;&#20204;&#30340;&#35821;&#35328;&#35201;&#27714;&#27169;&#22359;&#20027;&#20307;&#25353;&#29031;&#25509;&#21475;&#22768;&#26126;&#30340;&#39034;&#24207;&#32473;&#20986;&#21508;&#20540;&#12290;&#22240;&#27492;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">v : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[v = 33</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">u = 44]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">from m1 take u</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#24322;&#24120;&#12290;&#21487;&#20197;&#20813;&#38500;&#36825;&#19968;&#38480;&#21046;&#65288;ex8.8&#12289;ex8.17&#65289;&#12290;</p></blockquote></blockquote><blockquote class="EoplExample"><p><a name="(elem._eg-8..5)"></a><a name="(idx._(gentag._1196))"></a>
&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#27169;&#22359;&#20855;&#26377; <span class="stt">let*</span> &#24335;&#30340;&#20316;&#29992;&#22495;&#65288;ex3.17&#65289;&#12290;&#20363;&#22914;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u = 44]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">module m2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[v : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[v = -(from m1 take u,11)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">-(from m1 take u, from m2 take v)</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#20026; <span class="stt">int</span>&#12290;&#20294;&#22914;&#26524;&#25105;&#20204;&#20132;&#25442;&#23450;&#20041;&#30340;&#39034;&#24207;&#65292;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[v : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[v = -(from m1 take u,11)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u = 44]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">-(from m1 take u, from m2 take v)</span></p></td></tr></table></blockquote><p>&#21017;&#31867;&#22411;&#24322;&#24120;&#65292;&#22240;&#20026; <span class="stt">m2</span> &#20027;&#20307;&#20013;&#20351;&#29992; <span class="stt">from m1 take u</span> &#30340;&#22320;&#26041;&#19981;&#22312;&#21518;&#32773;&#30340;&#20316;&#29992;&#22495;
&#20869;&#12290;</p></blockquote></blockquote><h5 class="heading">8.1.2<tt>&nbsp;</tt><a name="(part._s8..1..2)"></a>&#23454;&#29616;&#31616;&#21333;&#27169;&#22359;&#31995;&#32479;<span class="button-group"><a href="#(part._s8..1..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><h5 class="heading"><a name="(part._s8..1-syntax)"></a>&#35821;&#27861;<span class="button-group"><a href="#(part._s8..1-syntax)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>SIMPLE-MODULES &#30340;&#31243;&#24207;&#21253;&#21547;&#19968;&#20018;&#27169;&#22359;&#23450;&#20041;&#65292;&#28982;&#21518;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*} \mathit{Program} &amp;::= \{\mathit{ModuleDefn}\}^{*} \mathit{Expression} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">a-program (m-defs body)</span>}\end{align*}</span></p></blockquote><p>&#27169;&#22359;&#23450;&#20041;&#21253;&#21547;&#21517;&#23383;&#12289;&#25509;&#21475;&#21644;&#20027;&#20307;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{ModuleDefn} &amp;::= <span class="stt">module</span> \ \mathit{Identifier} \ <span class="stt">interface</span> \ \mathit{Iface} \ <span class="stt">body</span> \ \mathit{ModuleBody} \\[-3pt]
 &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">a-module-definition (m-name expected-iface m-body)</span>}\end{align*}</span></p></blockquote><p>&#31616;&#21333;&#27169;&#22359;&#30340;&#25509;&#21475;&#21253;&#21547;&#20219;&#24847;&#25968;&#37327;&#30340;&#22768;&#26126;&#12290;&#27599;&#20010;&#22768;&#26126;&#25351;&#23450;&#31243;&#24207;&#20013;&#19968;&#20010;&#21464;&#37327;&#30340;&#31867;&#22411;&#12290;
&#25105;&#20204;&#31216;&#20043;&#20026;<span class="emph">&#20540;&#22768;&#26126;</span> (<span class="emph">value declaration</span>)&#65292;&#22240;&#20026;&#35201;&#22768;&#26126;&#30340;&#21464;&#37327;&#34920;&#31034;&#19968;&#20010;&#20540;&#12290;&#22312;&#21518;&#38754;
&#20960;&#33410;&#20013;&#65292;&#25105;&#20204;&#20171;&#32461;&#20854;&#20182;&#31867;&#21035;&#30340;&#25509;&#21475;&#21644;&#22768;&#26126;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}   \mathit{Iface} &amp;::= <span class="stt">[</span> \{\mathit{Decl}\}^{*} <span class="stt">]</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">simple-iface (decls)</span>} \\[-5pt]
    \mathit{Decl} &amp;::= \mathit{Identifier} <span class="stt">:</span> \mathit{Type} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">val-decl (var-name ty)</span>}\end{align*}</span></p></blockquote><p>&#27169;&#22359;&#20027;&#20307;&#21253;&#21547;&#20219;&#24847;&#25968;&#37327;&#30340;&#23450;&#20041;&#12290;&#27599;&#20010;&#23450;&#20041;&#23558;&#21464;&#37327;&#21644;&#26576;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#20851;&#32852;&#36215;&#26469;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{ModuleBody} &amp;::= <span class="stt">[</span> \{\mathit{Defn}\}^{*} <span class="stt">]</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">defns-module-body (defns)</span>} \\[-5pt]
      \mathit{Defn} &amp;::= \mathit{Identifier} <span class="stt">=</span> \mathit{Expression} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">val-defn (var-name exp)</span>}\end{align*}</span></p></blockquote><p>&#25105;&#20204;&#30340;&#34920;&#36798;&#24335;&#19982; CHECKED&#65288;<a href="#%28part._s7..3%29" data-pltdoc="x">CHECKED&#65306;&#24102;&#26377;&#31867;&#22411;&#26816;&#26597;&#30340;&#35821;&#35328;</a>&#65289;&#30456;&#21516;&#65292;&#20294;&#25105;&#20204;&#35201;&#20462;&#25913;&#35821;&#27861;&#65292;&#26032;&#22686;&#19968;&#31181;&#34920;&#36798;&#24335;&#65292;
&#20197;&#20415;&#20351;&#29992;&#21463;&#38480;&#21464;&#37327;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">from</span> \mathit{Identifier} <span class="stt">take</span> \mathit{Identifier} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">qualified-var-exp (m-name var-name)</span>}\end{align*}</span></p></blockquote><h5 class="heading"><a name="(part._s8..1-the-interpreter)"></a>&#35299;&#37322;&#22120;<span class="button-group"><a href="#(part._s8..1-the-interpreter)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1197))"></a>
&#27714;&#27169;&#22359;&#20027;&#20307;&#30340;&#20540;&#20250;&#24471;&#21040;&#19968;&#20010;<span class="emph">&#27169;&#22359;</span>&#12290;&#22312;&#25105;&#20204;&#30340;&#31616;&#21333;&#27169;&#22359;&#35821;&#35328;&#20013;&#65292;&#27169;&#22359;&#26159;&#19968;&#20010;&#29615;&#22659;&#65292;&#21253;
&#21547;&#27169;&#22359;&#36755;&#20986;&#30340;&#25152;&#26377;&#32465;&#23450;&#12290;&#25105;&#20204;&#29992;&#25968;&#25454;&#31867;&#22411; <span class="stt">typed-module</span> &#34920;&#31034;&#36825;&#20123;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">typed-module</span><span class="hspace">&nbsp;</span><span class="RktSym">typed-module?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#29992;&#19968;&#31181;&#26032;&#30340;&#32465;&#23450;&#22312;&#29615;&#22659;&#20013;&#32465;&#23450;&#27169;&#22359;&#21517;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">environment</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">...as</span><span class="hspace">&nbsp;</span><span class="RktSym">before...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span><span class="hspace">&nbsp;</span><span class="RktSym">...as</span><span class="hspace">&nbsp;</span><span class="RktSym">before...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-with-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-val</span><span class="hspace">&nbsp;</span><span class="RktSym">typed-module?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20363;&#22914;&#65292;&#22914;&#26524;&#25105;&#20204;&#30340;&#31243;&#24207;&#26159;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[a : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">b : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">c : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[a = 33</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">b = 44</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">c = 55]</span></p></td></tr><tr><td><p><span class="stt">module m2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[a : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">b : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[a = 66</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">b = 77]</span></p></td></tr><tr><td><p><span class="stt">let z = 99</span></p></td></tr><tr><td><p><span class="stt">in -(z, -(from m1 take a, from m2 take a))</span></p></td></tr></table></blockquote><p>&#37027;&#20040;&#22768;&#26126; <span class="texMathInline">z</span> &#20043;&#21518;&#30340;&#29615;&#22659;&#26159;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">z</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">99</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:extend-env-with-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">m2</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:simple-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">66</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">77</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:empty-env</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:extend-env-with-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">m1</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:simple-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">33</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">44</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">55</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:empty-env</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:empty-env</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></blockquote><p>&#22312;&#36825;&#20010;&#29615;&#22659;&#20013;&#65292;<span class="stt">m1</span> &#21644; <span class="stt">m2</span> &#21508;&#32465;&#23450;&#21040;&#19968;&#20010;&#31616;&#21333;&#27169;&#22359;&#65292;&#20108;&#32773;&#20998;&#21035;&#21253;&#21547;&#19968;&#20010;&#23567;&#29615;&#22659;&#12290;</p></blockquote><p><a name="(idx._(gentag._1198))"></a>
&#25105;&#20204;&#29992; <span class="stt">lookup-qualified-var-in-env</span> &#27714;&#21463;&#38480;&#21464;&#37327; <span class="stt">from </span><span class="texMathInline">m</span><span class="stt"> take </span><span class="texMathInline">var</span>
&#24341;&#29992;&#30340;&#20540;&#12290;&#23427;&#22312;&#24403;&#21069;&#29615;&#22659;&#20013;&#26597;&#25214;&#27169;&#22359; <span class="texMathInline">m</span>&#65292;&#28982;&#21518;&#22312;&#24471;&#21040;&#30340;&#29615;&#22659;&#20013;&#26597;&#25214; <span class="texMathInline">var</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">lookup-qualified-var-in-env!</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{Sym} \times \mathit{Env} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">lookup-qualified-var-in-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">m-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-module-name-in-env</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">typed-module</span><span class="hspace">&nbsp;</span><span class="RktSym">m-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-module</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bindings</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">var-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#35201;&#27714;&#31243;&#24207;&#30340;&#20540;&#65292;&#25105;&#20204;&#25226;&#25152;&#26377;&#27169;&#22359;&#23450;&#20041;&#21152;&#20837;&#24403;&#21069;&#29615;&#22659;&#20013;&#65292;&#24471;&#21040;&#21021;&#22987;&#29615;&#22659;&#65292;&#28982;&#21518;&#27714;&#31243;&#24207;&#20027;&#20307;&#30340;&#20540;&#12290;
&#36807;&#31243; <span class="stt">add-module-defns-to-env</span> &#36941;&#21382;&#27169;&#22359;&#23450;&#20041;&#65292;&#27714;&#27599;&#20010;&#27169;&#22359;&#23450;&#20041;&#20027;&#20307;&#30340;&#20540;&#65292;&#24182;&#23558;&#24471;&#21040;
&#30340;&#27169;&#22359;&#21152;&#20837;&#24403;&#21069;&#29615;&#22659;&#20013;&#65292;&#22914; &#25152;&#31034;&#12290;</p><p><a name="(idx._(gentag._1199))"></a>
<a name="(idx._(gentag._1200))"></a>
&#26368;&#21518;&#65292;&#35201;&#27714;&#27169;&#22359;&#20027;&#20307;&#30340;&#20540;&#65292;&#25105;&#20204;&#25353;&#29031; <span class="stt">let*</span> &#24335;&#23450;&#30028;&#65292;&#22312;&#36866;&#24403;&#30340;&#29615;&#22659;&#20869;&#27714;&#27599;&#20010;&#34920;&#36798;&#24335;&#30340;
&#20540;&#65292;&#24471;&#20986;&#19968;&#29615;&#22659;&#12290;&#36807;&#31243; <span class="stt">defns-to-env</span> &#29983;&#25104;&#30340;&#29615;&#22659;&#21482;&#21253;&#21547;&#23450;&#20041; <span class="stt">defns</span> &#20135;&#29983;&#30340;&#32465;
&#23450;&#65288;&#65289;&#12290;
<a name="(idx._(gentag._1201))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-defns</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-module-defns-to-env</span><span class="hspace">&nbsp;</span><span class="RktSym">m-defns</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">add-module-defns-to-env</span></span> : <span class="texMathInline">\mathit{Listof(Defn)} \times \mathit{Env} \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">add-module-defns-to-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">module-definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-module-definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">iface</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-module-defns-to-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-with-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-module-body</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>SIMPLE-MODULES &#30340;&#35299;&#37322;&#22120;&#65292;&#31532; 1 &#37096;&#20998;<a name="(elem._fig-8..3)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1202))"></a></div></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-module-body</span></span> : <span class="texMathInline">\mathit{ModuleBody} \times \mathit{Env} \to \mathit{TypedModule}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-module-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">module-body</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-to-env</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">defns-to-env</span></span> : <span class="texMathInline">\mathit{Listof(Defn)} \times \mathit{Env} \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">defns-to-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-defn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-to-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>SIMPLE-MODULES &#30340;&#35299;&#37322;&#22120;&#65292;&#31532; 2 &#37096;&#20998;<a name="(elem._fig-8..4)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1203))"></a></div></p></blockquote><h5 class="heading"><a name="(part._s8..1-checker)"></a>&#26816;&#26597;&#22120;<span class="button-group"><a href="#(part._s8..1-checker)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1204))"></a>
&#26816;&#26597;&#22120;&#30340;&#24037;&#20316;&#26159;&#30830;&#20445;&#25152;&#26377;&#27169;&#22359;&#20027;&#20307;&#28385;&#36275;&#20854;&#25509;&#21475;&#65292;&#19988;&#25152;&#26377;&#21464;&#37327;&#30340;&#20351;&#29992;&#31526;&#21512;&#20854;&#31867;&#22411;&#12290;</p><p><a name="(idx._(gentag._1205))"></a>
&#25105;&#20204;&#35821;&#35328;&#30340;&#23450;&#30028;&#35268;&#21017;&#24456;&#31616;&#21333;&#65306;&#27169;&#22359;&#36981;&#24490; <span class="stt">let*</span> &#24335;&#23450;&#30028;&#65292;&#20381;&#27425;&#36827;&#20837;&#27169;&#22359;&#36755;&#20986;&#32465;&#23450;&#20013;&#30340;&#21463;
&#38480;&#21464;&#37327;&#30340;&#20316;&#29992;&#22495;&#12290;&#25509;&#21475;&#21578;&#35785;&#25105;&#20204;&#27599;&#20010;&#21463;&#38480;&#21464;&#37327;&#30340;&#31867;&#22411;&#12290;&#22768;&#26126;&#21644;&#23450;&#20041;&#20063;&#37117;&#36981;&#24490; <span class="stt">let*</span> &#24335;
&#23450;&#30028;&#65288;&#22914;&#65289;&#12290;</p><p>&#23601;&#20687;<a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#20013;&#30340;&#26816;&#26597;&#22120;&#37027;&#26679;&#65292;&#25105;&#20204;&#29992;&#31867;&#22411;&#29615;&#22659;&#35760;&#24405;&#19982;&#24403;&#21069;&#20316;&#29992;&#22495;&#20869;&#21508;&#21517;&#23383;&#30340;&#30456;&#20851;&#20449;
&#24687;&#12290;&#22240;&#20026;&#25105;&#20204;&#29616;&#22312;&#26377;&#20102;&#27169;&#22359;&#21517;&#65292;&#25105;&#20204;&#35201;&#22312;&#31867;&#22411;&#29615;&#22659;&#20013;&#32465;&#23450;&#27169;&#22359;&#21517;&#12290;&#27599;&#20010;&#27169;&#22359;&#21517;&#32465;&#23450;&#21040;&#27169;&#22359;&#30340;
&#25509;&#21475;&#65292;&#20316;&#20026;&#20854;&#31867;&#22411;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">type-environment</span><span class="hspace">&nbsp;</span><span class="RktSym">type-environment?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="emph">...&#21516;&#21069;...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">interface?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">type-environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#35201;&#25214;&#20986;&#21463;&#38480;&#21464;&#37327; <span class="stt">from </span><span class="texMathInline">m</span><span class="stt"> take </span><span class="texMathInline">var</span> &#30340;&#31867;&#22411;&#65292;&#25105;&#20204;&#39318;&#20808;&#22312;&#31867;&#22411;&#29615;&#22659;&#20013;&#25214;&#20986;
<span class="texMathInline">m</span>&#65292;&#28982;&#21518;&#22312;&#24471;&#21040;&#30340;&#25509;&#21475;&#20013;&#26597;&#25214; <span class="texMathInline">var</span> &#30340;&#31867;&#22411;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">lookup-qualified-var-in-tenv</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{Sym} \times \mathit{Tenv} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">lookup-qualified-var-in-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-module-name-in-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-variable-name-in-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">decls</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">type-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">module-defns</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-module-defns-to-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">module-defns</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">add-module-defns-to-tenv</span></span> : <span class="texMathInline">\mathit{Listof(ModuleDefn)} \times \mathit{Tenv} \to \mathit{Tenv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">add-module-defns-to-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">module-definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-module-definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expected-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">actual-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interface-of</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">actual-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">expected-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">expected-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-module-defns-to-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-module-doesnt-satisfy-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expected-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">actual-iface</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>SIMPLE-MODULES &#30340;&#26816;&#26597;&#22120;&#65292;&#31532; 1 &#37096;&#20998;<a name="(elem._fig-8..5)"></a></p></blockquote></blockquote><p>&#23601;&#20687;<a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#37027;&#26679;&#65292;&#23545;&#31243;&#24207;&#20570;&#31867;&#22411;&#26816;&#26597;&#30340;&#36807;&#31243;&#31867;&#27169;&#20223;&#31243;&#24207;&#30340;&#27714;&#20540;&#65292;&#20294;&#25105;&#20204;&#35760;&#24405;&#30340;&#19981;&#26159;
&#20540;&#65292;&#32780;&#26159;&#31867;&#22411;&#12290;&#25105;&#20204;&#29992; <span class="stt">type-of-program</span> &#20195;&#26367; <span class="stt">value-of-program</span>&#65292;&#29992;
<span class="stt">add-module-defns-to-tenv</span> &#20195;&#26367; <span class="stt">add-module-defns-to-env</span>&#12290;&#36807;&#31243;
<span class="stt">add-module-defns-to-tenv</span> &#29992; <span class="stt">&lt;:-iface</span> &#26816;&#26597;&#21508;&#27169;&#22359;&#20027;&#20307;&#20135;&#29983;&#30340;&#25509;&#21475;&#19982;&#25552;&#20986;&#30340;
&#25509;&#21475;&#26159;&#21542;&#30456;&#31526;&#65307;&#22914;&#26524;&#30456;&#31526;&#65292;&#23601;&#23558;&#27169;&#22359;&#21152;&#20837;&#21040;&#31867;&#22411;&#29615;&#22659;&#20013;&#65307;&#21542;&#21017;&#25253;&#38169;&#12290;</p><p><a name="(idx._(gentag._1206))"></a>
&#27169;&#22359;&#20027;&#20307;&#30340;&#25509;&#21475;&#23558;&#20027;&#20307;&#20013;&#23450;&#20041;&#30340;&#21508;&#20010;&#21464;&#37327;&#19982;&#23450;&#20041;&#20013;&#30340;&#31867;&#22411;&#20851;&#32852;&#36215;&#26469;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#25105;&#20204;&#26597;&#30475;&#31532;
&#19968;&#20010;&#20363;&#23376;&#30340;&#20027;&#20307;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[a = 33</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">x = -(a,1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">b = -(a,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">c = -(x,b)]</span></p></td></tr></table></blockquote><p>&#21487;&#24471;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[a : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">x : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">b : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">c : int]</span></p></td></tr></table></blockquote></blockquote><p>&#19968;&#26086;&#25105;&#20204;&#24314;&#31435;&#20102;&#19968;&#22871;&#25509;&#21475;&#26469;&#25551;&#36848;&#27169;&#22359;&#20027;&#20307;&#36755;&#20986;&#30340;&#25152;&#26377;&#32465;&#23450;&#65292;&#25105;&#20204;&#23601;&#33021;&#23558;&#20854;&#19982;&#27169;&#22359;&#20844;&#24067;&#30340;&#25509;&#21475;
&#27604;&#36739;&#12290;</p><p>&#22238;&#24518;&#19968;&#19979;&#65292;&#31616;&#21333;&#25509;&#21475;&#21253;&#21547;&#19968;&#20010;&#22768;&#26126;&#21015;&#34920;&#12290;&#36807;&#31243; <span class="stt">defns-to-decls</span> &#21019;&#24314;&#36825;&#26679;&#30340;&#21015;&#34920;&#65292;&#35843;
&#29992; <span class="stt">type-of</span> &#25214;&#20986;&#27599;&#20010;&#23450;&#20041;&#30340;&#31867;&#22411;&#12290;&#22312;&#27599;&#19968;&#27493;&#65292;&#23427;&#36824;&#25353; <span class="stt">let*</span> &#23450;&#30028;&#65292;&#25193;&#23637;&#23616;&#37096;&#31867;
&#22411;&#29615;&#22659;&#65288;&#35265;&#65289;&#12290;</p><p>&#21097;&#19979;&#30340;&#21482;&#26159;&#29992; <span class="stt">&lt;:-iface</span> &#27604;&#36739;&#27599;&#20010;&#27169;&#22359;&#30340;&#26399;&#26395;&#31867;&#22411;&#19982;&#23454;&#38469;&#31867;&#22411;&#12290;&#25105;&#20204;&#23558; <span class="stt">&lt;:</span> &#23450;&#20041;
&#20026;&#65306;&#33509; <span class="texMathInline">i_1 <span class="stt">&lt;:</span> i_2</span>&#65292;&#21017;&#28385;&#36275;&#25509;&#21475; <span class="texMathInline">i_1</span> &#30340;&#20219;&#20309;&#27169;&#22359;&#20063;&#28385;&#36275;&#25509;&#21475; <span class="texMathInline">i_2</span>&#12290;&#20363;&#22914;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[u : int</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[u : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">v : int</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">z : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">z : int]</span></p></td></tr></table></blockquote><p>&#22240;&#20026;&#28385;&#36275;&#25509;&#21475; <span class="stt">[u : int v : bool z : int]</span> &#30340;&#20219;&#20309;&#27169;&#22359;&#37117;&#25552;&#20379;&#20102;&#25509;&#21475; <span class="stt">[u : int
z : int]</span> &#20844;&#24067;&#30340;&#25152;&#26377;&#20540;&#12290;</p></blockquote><p>&#23545;&#25105;&#20204;&#30340;&#31616;&#21333;&#27169;&#22359;&#35821;&#35328;&#65292;<span class="stt">&lt;:-iface</span> &#21482;&#38656;&#35843;&#29992; <span class="stt">&lt;:-decls</span> &#27604;&#36739;&#22768;&#26126;&#12290;&#36825;&#20123;&#36807;&#31243;&#21462;
&#19968; <span class="stt">tenv</span> &#21442;&#25968;&#65292;&#31616;&#21333;&#27169;&#22359;&#31995;&#32479;&#19981;&#20351;&#29992;&#23427;&#65292;&#20294;<a href="#%28part._s8..2%29" data-pltdoc="x">&#22768;&#26126;&#31867;&#22411;&#30340;&#27169;&#22359;</a>&#38656;&#35201;&#12290;
&#35265;&#12290;</p><p>&#36807;&#31243; <span class="stt">&lt;-decls</span> &#25191;&#34892;&#20027;&#35201;&#24037;&#20316;&#65292;&#27604;&#36739;&#20004;&#20010;&#22768;&#26126;&#38598;&#21512;&#12290;&#22914;&#26524; <span class="texMathInline">decls_1</span> &#21644;
<span class="texMathInline">decls_2</span> &#26159;&#20004;&#20010;&#22768;&#26126;&#38598;&#21512;&#65292;&#24403;&#19988;&#20165;&#24403;&#20219;&#20309;&#33021;&#25552;&#20379; <span class="texMathInline">decls_1</span> &#20013;&#22768;&#26126;&#32465;&#23450;&#30340;&#27169;&#22359;&#65292;&#20063;
&#33021;&#25552;&#20379; <span class="texMathInline">decls_2</span> &#20013;&#22768;&#26126;&#30340;&#32465;&#23450;&#26102;&#65292;&#25105;&#20204;&#35828; <span class="texMathInline">decls_1 &lt;: decls_2</span>&#12290;&#22914;&#26524;
<span class="texMathInline">decls_2</span> &#20013;&#30340;&#25152;&#26377;&#22768;&#26126;&#65292;&#22312; <span class="texMathInline">decls_1</span> &#20013;&#37117;&#26377;&#19982;&#20043;&#21305;&#37197;&#30340;&#22768;&#26126;&#65292;&#23601;&#33021;&#20445;&#35777;&#36825;&#19968;&#28857;&#65292;
&#23601;&#20687;&#19978;&#38754;&#30340;&#20363;&#23376;&#37027;&#26679;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">interface-of</span></span> : <span class="texMathInline">\mathit{ModuleBody} \times \mathit{Tenv} \to \mathit{Iface}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">interface-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-body</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">module-body</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-to-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">defns-to-decls</span></span> : <span class="texMathInline">\mathit{Listof(Defn)} \times \mathit{Tenv} \to \mathit{Decl}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">defns-to-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-defn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-to-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>SIMPLE-MODULES &#30340;&#26816;&#26597;&#22120;&#65292;&#31532; 2 &#37096;&#20998;<a name="(elem._fig-8..6)"></a></p></blockquote></blockquote><p>&#36807;&#31243; <span class="stt">&lt;:-decls</span> &#39318;&#20808;&#26816;&#26597; <span class="stt">decls1</span> &#21644; <span class="stt">decls2</span>&#12290;&#33509; <span class="stt">decls2</span> &#20026;&#31354;&#65292;&#37027;
&#20040;&#23427;&#23545; <span class="stt">decls1</span> &#26080;&#25152;&#35201;&#27714;&#65292;&#25152;&#20197;&#32467;&#26524;&#20026; <span class="stt">#t</span>&#12290;&#33509; <span class="stt">decls2</span> &#38750;&#31354;&#65292;&#20294;
<span class="stt">decls1</span> &#20026;&#31354;&#65292;&#37027;&#20040; <span class="stt">decls2</span> &#26377;&#25152;&#35201;&#27714;&#65292;&#20294; <span class="stt">decls1</span> &#26080;&#21487;&#25552;&#20379;&#65292;&#25152;&#20197;&#32467;&#26524;&#20026;
<span class="stt">#f</span>&#12290;&#21542;&#21017;&#65292;&#25105;&#20204;&#27604;&#36739; <span class="stt">decls1</span> &#21644; <span class="stt">decls2</span> &#22768;&#26126;&#30340;&#31532;&#19968;&#23545;&#21464;&#37327;&#30340;&#21517;&#23383;&#65307;&#33509;&#20108;
&#32773;&#30456;&#21516;&#65292;&#37027;&#20040;&#23427;&#20204;&#30340;&#31867;&#22411;&#24517;&#39035;&#21305;&#37197;&#65292;&#28982;&#21518;&#25105;&#20204;&#36882;&#24402;&#22788;&#29702;&#20004;&#20010;&#22768;&#26126;&#21015;&#34920;&#20313;&#19979;&#30340;&#37096;&#20998;&#65307;&#33509;&#20182;&#20204;&#19981;
&#21516;&#65292;&#37027;&#20040;&#25105;&#20204;&#36882;&#24402;&#22788;&#29702; <span class="stt">decls1</span> &#30340; <span class="stt">cdr</span>&#65292;&#25214;&#20986;&#21305;&#37197; <span class="stt">decls2</span> &#20013;&#31532;&#19968;&#20010;&#22768;&#26126;
&#30340;&#20869;&#23481;&#12290;</p><p>&#36825;&#26679;&#65292;&#31616;&#21333;&#27169;&#22359;&#31995;&#32479;&#23601;&#23436;&#25104;&#20102;&#12290;
<a name="(idx._(gentag._1207))"></a>
<a name="(idx._(gentag._1208))"></a>
<a name="(idx._(gentag._1209))"></a>
<a name="(idx._(gentag._1210))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">&lt;:-iface</span></span> : <span class="texMathInline">\mathit{Iface} \times \mathit{Iface} \times \mathit{Tenv} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;:-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">iface1</span><span class="hspace">&nbsp;</span><span class="RktSym">iface2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">iface1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">iface2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">&lt;:-decls</span></span> : <span class="texMathInline">\mathit{Listof(Decl)} \times \mathit{Listof(Decl)} \times \mathit{Tenv} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;:-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls1</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">name1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">name1</span><span class="hspace">&nbsp;</span><span class="RktSym">name2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-decls</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-decls</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>SIMPLE-MODULES &#30340;&#25509;&#21475;&#27604;&#36739;<a name="(elem._fig-8..7)"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#26816;&#26597;&#22120;&#65292;&#26816;&#27979;&#24182;&#25298;&#32477;&#20219;&#20309;&#23450;&#20041;&#20004;&#20010;&#21516;&#21517;&#27169;&#22359;&#30340;&#31243;&#24207;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..2)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#36807;&#31243; <span class="stt">add-module-defns-to-env</span> &#19981;&#23436;&#20840;&#27491;&#30830;&#65292;&#22240;&#20026;&#23427;&#21152;&#20837;&#20102;&#27169;&#22359;&#23450;&#20041;&#30340;&#25152;&#26377;&#20540;&#65292;&#32780;&#19981;
&#21482;&#26159;&#25509;&#21475;&#20013;&#30340;&#20540;&#12290;&#20462;&#25913; <span class="stt">add-module-defns-to-env</span>&#65292;&#21482;&#21152;&#20837;&#25509;&#21475;&#20013;&#22768;&#26126;&#30340;&#20540;&#12290;
<span class="stt">add-module-defns-to-tenv</span> &#20063;&#26377;&#27492;&#38382;&#39064;&#21527;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..3)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#35821;&#35328;&#30340;&#35821;&#27861;&#65292;&#20197; <span class="stt">m.v</span> &#20195;&#26367; <span class="stt">from m take v</span> &#20351;&#29992;&#21463;&#38480;&#21464;&#37327;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..4)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1211))"></a>
<a name="(idx._(gentag._1212))"></a>
<a name="(idx._(gentag._1213))"></a>
&#20462;&#25913;&#35821;&#35328;&#30340;&#34920;&#36798;&#24335;&#65292;&#20687;ex7.24 &#37027;&#26679;&#65292;&#21152;&#20837;&#22810;&#22768;&#26126; <span class="stt">let</span>&#12289;&#22810;&#21442;&#25968;&#36807;&#31243;
&#21644;&#22810;&#22768;&#26126; <span class="stt">letrec</span>&#12290;
<a name="(idx._(gentag._1214))"></a>
<a name="(idx._(gentag._1215))"></a>
<a name="(idx._(gentag._1216))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..5)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20801;&#35768;&#22312;&#27169;&#22359;&#20027;&#20307;&#20013;&#20351;&#29992; <span class="stt">let</span> &#21644; <span class="stt">letrec</span> &#22768;&#26126;&#12290;&#20363;&#22914;&#65292;&#21487;&#20197;&#20889;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module even-odd</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[even : (int -&gt; bool)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">odd</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">: (int -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">bool local-odd (x : int)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">= ... (local-even -(x,1)) ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">bool local-even (x : int) = ... (local-odd -(x,1)) ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">in [even = local-even</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">odd = local-odd]</span></p></td></tr></table></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..6)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20801;&#35768;&#22312;&#27169;&#22359;&#20027;&#20307;&#20013;&#23450;&#20041;&#23616;&#37096;&#27169;&#22359;&#12290;&#20363;&#22914;&#65292;&#21487;&#20197;&#20889;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">v : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">module m2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">interface [v : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">body [v = 33]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u = 44</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">v = -(from m2 take v, 1)]</span></p></td></tr></table></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..7)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#21069;&#19968;&#39064;&#30340;&#35299;&#31572;&#65292;&#20801;&#35768;&#27169;&#22359;&#23558;&#20854;&#20182;&#27169;&#22359;&#20316;&#20026;&#36755;&#20986;&#30340;&#19968;&#37096;&#20998;&#12290;&#20363;&#22914;&#65292;&#21487;&#20197;&#20889;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u : int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">n : [v : int]]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">module m2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">interface [v : int]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">body [v = 33]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[u = 44</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">n = m2]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">from m1 take n take v</span></p></td></tr></table></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..8)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#27169;&#22359;&#24517;&#39035;&#25353;&#29031;&#25509;&#21475;&#20013;&#30340;&#39034;&#24207;&#20135;&#29983;&#20540;&#65292;&#21487;&#20197;&#21462;&#28040;&#36825;&#31181;&#38480;&#21046;&#12290;&#21462;&#28040;&#23427;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..9)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#35828;&#25105;&#20204;&#30340;&#27169;&#22359;&#31995;&#32479;&#24212;&#24403;&#33021;&#35299;&#37322;&#27169;&#22359;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#12290;&#32473; SIMPLE-MODULES &#28155;&#21152;&#36825;&#31181;&#33021;&#21147;&#65292;
&#22312;&#27169;&#22359;&#20027;&#20307;&#21644;&#31243;&#24207;&#20027;&#20307;&#20013;&#28155;&#21152;&#19968;&#26465; <span class="stt">depends-on</span> &#35821;&#21477;&#12290;&#37027;&#20040;&#65292;&#27169;&#22359; <span class="stt">m</span> &#19981;&#26159;&#22312;&#20043;
&#21069;&#22768;&#26126;&#30340;&#25152;&#26377;&#27169;&#22359;&#30340;&#20316;&#29992;&#22495;&#20013;&#65292;&#32780;&#26159;&#22312;&#33258;&#36523; <span class="stt">depends-on</span> &#35821;&#21477;&#20013;&#21015;&#20986;&#27169;&#22359;&#30340;&#20316;&#29992;&#22495;&#20013;&#12290;
&#20363;&#22914;&#65292;&#32771;&#34385;&#31243;&#24207;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1 ...</span></p></td></tr><tr><td><p><span class="stt">module m2 ...</span></p></td></tr><tr><td><p><span class="stt">module m3 ...</span></p></td></tr><tr><td><p><span class="stt">module m4 ...</span></p></td></tr><tr><td><p><span class="stt">module m5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface [...]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">depends-on m1, m3</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[...]</span></p></td></tr></table></blockquote><p><span class="stt">m5</span> &#30340;&#20027;&#20307;&#20165;&#22312;&#26469;&#33258; <span class="stt">m1</span> &#25110; <span class="stt">m3</span> &#30340;&#21463;&#38480;&#21464;&#37327;&#30340;&#20316;&#29992;&#22495;&#20013;&#12290;&#21363;&#20351; <span class="stt">m4</span> &#36755;
&#20986;&#20102; <span class="stt">x</span> &#30340;&#20540;&#65292;&#20351;&#29992; <span class="stt">from m4 take x</span> &#20063;&#23558;&#36896;&#25104;&#31867;&#22411;&#24322;&#24120;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..10)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#36824;&#21487;&#20197;&#29992; <span class="stt">depends-on</span> &#36825;&#26679;&#30340;&#29305;&#24615;&#25511;&#21046;&#27169;&#22359;&#20027;&#20307;&#27714;&#20540;&#30340;&#26102;&#26426;&#12290;&#32473; SIMPLE-MODULES
&#22686;&#21152;&#36825;&#31181;&#33021;&#21147;&#65292;&#22312;&#21508;&#27169;&#22359;&#20027;&#20307;&#21644;&#31243;&#24207;&#20027;&#20307;&#28155;&#21152;&#19968;&#26465; <span class="stt">imports</span> &#35821;&#21477;&#12290;<span class="stt">imports</span> &#23601;
&#20687; <span class="stt">depends-on</span>&#65292;&#19981;&#21516;&#20043;&#22788;&#26159;&#65292;&#20165;&#24403;&#65288;&#29992; <span class="stt">imports</span> &#35821;&#21477;&#65289;&#23558;&#27169;&#22359;&#36755;&#20837;&#21040;&#20854;&#20182;&#27169;&#22359;
&#26102;&#65292;&#25165;&#27714;&#20854;&#20027;&#20307;&#30340;&#20540;&#12290;</p><p>&#36825;&#26679;&#65292;&#22914;&#26524;&#25105;&#20204;&#30340;&#35821;&#35328;&#26377;&#25171;&#21360;&#34920;&#36798;&#24335;&#65292;&#31243;&#24207;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface [] body [x = print(1)]</span></p></td></tr><tr><td><p><span class="stt">module m2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface [] body [x = print(2)]</span></p></td></tr><tr><td><p><span class="stt">module m3</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface []</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">import m2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[x = print(3)]</span></p></td></tr><tr><td><p><span class="stt">import m3, m1</span></p></td></tr><tr><td><p><span class="stt">33</span></p></td></tr></table></blockquote><p>&#22312;&#36820;&#22238; 33 &#20043;&#21069;&#65292;&#23558;&#25171;&#21360; 2&#12289;3 &#21644; 1&#12290;&#36825;&#37324;&#30340;&#27169;&#22359;&#25509;&#21475;&#20026;&#31354;&#65292;&#22240;&#20026;&#25105;&#20204;&#21482;&#20851;&#24515;&#23427;&#20204;&#20027;&#20307;&#27714;&#20540;
&#30340;&#39034;&#24207;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..11)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1217))"></a>
&#20462;&#25913;&#26816;&#26597;&#22120;&#65292;&#29992; INFERRED &#20316;&#20026;&#35821;&#35328;&#30340;&#34920;&#36798;&#24335;&#12290;&#36825;&#36947;&#32451;&#20064;&#20013;&#65292;&#20320;&#38656;&#35201;&#20462;&#25913; <span class="stt">&lt;:-decls</span>&#65292;
&#19981;&#33021;&#29992; <span class="stt">equal?</span> &#27604;&#36739;&#31867;&#22411;&#12290;&#20363;&#22914;&#65292;&#22312;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface [f : (int -&gt; int)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body [f = proc (x : ?) x]</span></p></td></tr></table></blockquote><p>&#20013;&#65292;&#31867;&#22411;&#25512;&#23548;&#22120;&#25253;&#21578;&#30340; <span class="stt">f</span> &#23454;&#38469;&#31867;&#22411;&#21487;&#33021;&#26159; <span class="stt">(tvar07 -&gt; tvar07)</span>&#65292;&#36825;&#24212;&#24403;&#25509;&#21463;&#12290;
&#20294;&#26159;&#65292;&#25105;&#20204;&#24212;&#25298;&#32477;&#27169;&#22359;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface [f : (int -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body [f = proc (x : ?) x]</span></p></td></tr></table></blockquote><p>&#21363;&#20351;&#31867;&#22411;&#25512;&#23548;&#22120;&#25253;&#21578;&#30340;&#31867;&#22411;&#20173;&#20026; <span class="stt">(tvar07 -&gt; tvar07)</span>&#12290;
<a name="(idx._(gentag._1218))"></a></p></blockquote><h4 class="heading">8.2<tt>&nbsp;</tt><a name="(part._s8..2)"></a>&#22768;&#26126;&#31867;&#22411;&#30340;&#27169;&#22359;<span class="button-group"><a href="#(part._s8..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1219))"></a>
<a name="(idx._(gentag._1220))"></a>&#33267;&#20170;&#20026;&#27490;&#65292;&#25105;&#20204;&#30340;&#25509;&#21475;&#21482;&#22768;&#26126;&#20102;&#26222;&#36890;&#21464;&#37327;&#21450;&#20854;&#31867;&#22411;&#12290;&#22312;&#19979;&#38754;&#36825;
&#31181;&#27169;&#22359;&#35821;&#35328; OPAQUE-TYPES &#20013;&#65292;&#25105;&#20204;&#36824;&#20801;&#35768;&#25509;&#21475;&#22768;&#26126;&#31867;&#22411;&#12290;&#20363;&#22914;&#65292;&#22312;&#23450;&#20041;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._1221))"></a>
&#20013;&#65292;&#25509;&#21475;&#22768;&#26126;&#20102;&#31867;&#22411; <span class="stt">t</span>&#65292;&#20197;&#21450;&#35813;&#31867;&#22411;&#20540;&#30340;&#25805;&#20316; <span class="stt">zero</span>&#12289;<span class="stt">succ</span>&#12289;<span class="stt">pred</span> &#21644;
<span class="stt">is-zero</span>&#12290;&#22914;&#21516;<a href="#%28part._s2..1%29" data-pltdoc="x">&#29992;&#25509;&#21475;&#23450;&#20041;&#25968;&#25454;</a>&#65292;&#36825;&#22871;&#25509;&#21475;&#21487;&#33021;&#19982;&#31639;&#26415;&#25805;&#20316;&#30340;&#23454;&#29616;&#30456;&#20851;&#12290;&#36825;&#37324;&#30340;&#22768;&#26126;
<span class="stt">t</span> &#20026;<span class="emph">&#27169;&#31946;&#31867;&#22411;</span> (<span class="emph">opaque type</span>)&#65292;&#24847;&#20026;&#65292;&#27169;&#22359;&#20043;&#22806;&#30340;&#20195;&#30721;&#19981;&#30693;&#36947;&#36825;&#31181;&#31867;&#22411;&#30340;&#20540;
&#22914;&#20309;&#34920;&#31034;&#12290;&#25152;&#26377;&#30340;&#22806;&#37096;&#20195;&#30721;&#37117;&#30693;&#36947;&#21487;&#20197;&#29992; <span class="stt">from m1 take zero</span> &#21644; <span class="stt">from m1 take
succ</span> &#31561;&#36807;&#31243;&#22788;&#29702; <span class="stt">from m1 take t</span> &#31867;&#22411;&#30340;&#20540;&#12290;&#36825;&#26679;&#65292;<span class="stt">from m1 take t</span> &#30340;&#34920;&#29616;
&#23601;&#20687; <span class="stt">int</span> &#21644; <span class="stt">bool</span> &#20043;&#31867;&#30340;&#21407;&#29983;&#31867;&#22411;&#19968;&#26679;&#12290;</p></blockquote><p><a name="(idx._(gentag._1222))"></a>
<a name="(idx._(gentag._1223))"></a>
<a name="(idx._(gentag._1224))"></a>
&#25105;&#20204;&#23558;&#20171;&#32461;&#20004;&#31181;&#31867;&#22411;&#22768;&#26126;&#65306;<span class="emph">&#36879;&#26126;</span> (<span class="emph">transparent</span>) &#31867;&#22411;&#21644;<span class="emph">&#27169;&#31946;</span> (<span class="emph">opaque</span>)
&#31867;&#22411;&#12290;&#22909;&#30340;&#27169;&#22359;&#31995;&#32479;&#20013;&#65292;&#20108;&#32773;&#32570;&#19968;&#19981;&#21487;&#12290;</p><h5 class="heading">8.2.1<tt>&nbsp;</tt><a name="(part._s8..2..1)"></a>&#20363;&#23376;<span class="button-group"><a href="#(part._s8..2..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#27442;&#30693;&#20854;&#29992;&#36884;&#65292;&#20877;&#24819;&#24819;&#25105;&#20204;&#30340;&#20960;&#20301;&#24320;&#21457;&#32773;&#12290;&#29233;&#20029;&#19997;&#19968;&#30452;&#29992;&#21253;&#21547;&#25972;&#25968;&#23545;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#28857;&#30340;&#27178;&#32437;
&#22352;&#26631;&#12290;&#22905;&#20351;&#29992;&#30340;&#35821;&#35328;&#20855;&#26377;ex7.8 &#37027;&#26679;&#30340;&#31867;&#22411;&#65292;&#25152;&#20197;&#22905;&#30340;&#27169;&#22359;
<span class="stt">Alices-points</span> &#25509;&#21475;&#20855;&#26377;&#22914;&#19979;&#22768;&#26126;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">initial-point : (int -&gt; pairof int * int)</span></p></td></tr><tr><td><p><span class="stt">increment-x : (pairof int * int -&gt; pairof int * int)</span></p></td></tr></table></blockquote><p>&#40077;&#20271;&#21644;&#26597;&#29702;&#23545;&#27492;&#30452;&#21457;&#29282;&#39578;&#12290;&#20182;&#20204;&#19981;&#24819;&#19968;&#36941;&#21448;&#19968;&#36941;&#22320;&#20889; <span class="stt">pairof int * int</span>&#12290;&#22240;&#27492;&#65292;&#29233;&#20029;
&#19997;&#29992;&#36879;&#26126;&#31867;&#22411;&#22768;&#26126;&#37325;&#20889;&#22905;&#30340;&#25509;&#21475;&#12290;&#36825;&#26679;&#65292;&#22905;&#21487;&#20197;&#20889;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module Alices-points</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[transparent point = pairof int * int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">initial-point : (int -&gt; point)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">increment-x : (point -&gt; point)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">get-x : (point -&gt; int)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">...]</span></p></td></tr></table></blockquote><p>&#36825;&#20943;&#36731;&#20102;&#22905;&#30340;&#24037;&#20316;&#65292;&#22240;&#20026;&#22905;&#20889;&#24471;&#26356;&#23569;&#65307;&#36825;&#20063;&#20943;&#36731;&#20102;&#22905;&#21512;&#20316;&#32773;&#30340;&#24037;&#20316;&#65292;&#22240;&#20026;&#20182;&#20204;&#22312;&#23454;&#29616;&#20013;&#21487;&#20197;
&#20889;&#36825;&#26679;&#30340;&#23450;&#20041;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[transparent point = from Alices-points take point</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">foo = proc (p1 : point)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (p2 : point) ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...]</span></p></td></tr></table></blockquote><p>&#23545;&#26576;&#20123;&#39033;&#30446;&#20013;&#65292;&#36825;&#24456;&#19981;&#38169;&#12290;&#19981;&#36807;&#65292;&#29233;&#20029;&#19997;&#30340;&#39033;&#30446;&#27491;&#22909;&#35201;&#34920;&#31034;&#22266;&#23450;&#24418;&#29366;&#37329;&#23646;&#23548;&#36712;&#19978;&#30340;&#28857;&#65292;&#25152;&#20197;
&#27178;&#32437;&#22352;&#26631;&#19981;&#26159;&#30456;&#20114;&#29420;&#31435;&#30340;&#12290;<span class="NoteBox"><span class="NoteContent">&#19981;&#22952;&#23558;&#37329;&#23646;&#23548;&#36712;&#35270;&#20026;&#26377;&#38271;&#24230;&#26080;&#23485;&#24230;&#30340;&#22278;&#24418;&#36712;&#36857;&#65292;&#20197;&#22278;&#24515;&#20026;
&#22352;&#26631;&#21407;&#28857;&#12290;&#35201;&#20445;&#35777;&#27178;&#22352;&#26631;&#21464;&#21270;&#26102;&#65292;&#24471;&#21040;&#30340;&#28857;&#20173;&#22312;&#22278;&#19978;&#65292;&#21017;&#32437;&#22352;&#26631;&#20063;&#35201;&#30456;&#24212;&#25913;&#21464;&#12290;&#21453;&#20043;&#20134;
&#28982;&#12290;&#8212;&#8212;<span class="emph">&#35793;&#27880;</span></span></span>&#29233;&#20029;&#19997;&#23454;&#29616; <span class="stt">increment-x</span> &#26102;&#65292;&#35201;&#23567;&#24515;&#32764;&#32764;&#22320;&#26356;&#26032;&#32437;&#22352;&#26631;&#65292;&#20197;&#21305;&#37197;
&#27178;&#22352;&#26631;&#30340;&#25913;&#21464;&#12290;&#20294;&#26159;&#40077;&#20271;&#19981;&#30693;&#36947;&#36825;&#28857;&#65292;&#25152;&#20197;&#20182;&#30340;&#36807;&#31243;&#20889;&#20316;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">increment-y = proc (p : point)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">unpair x y = p</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in newpair(x, -(y,-1))</span></p></td></tr></table></blockquote><p>&#30001;&#20110;&#40077;&#20271;&#30340;&#20195;&#30721;&#20462;&#25913;&#32437;&#22352;&#26631;&#26102;&#19981;&#38543;&#20043;&#20462;&#25913;&#27178;&#22352;&#26631;&#65292;&#29233;&#20029;&#19997;&#30340;&#20195;&#30721;&#23601;&#27809;&#27861;&#27491;&#24120;&#24037;&#20316;&#20102;&#12290;</p></blockquote><p>&#26356;&#31967;&#31957;&#30340;&#26159;&#65292;&#22914;&#26524;&#29233;&#20029;&#19997;&#25171;&#31639;&#20462;&#25913;&#28857;&#30340;&#34920;&#31034;&#65292;&#25226;&#32437;&#22352;&#26631;&#20316;&#20026;&#31532;&#19968;&#37096;&#20998;&#21602;&#65311;&#22905;&#21487;&#20197;&#25353;&#29031;&#26032;&#30340;&#34920;
&#31034;&#20462;&#25913;&#22905;&#30340;&#20195;&#30721;&#12290;&#20294;&#26159;&#40077;&#20271;&#30340;&#20195;&#30721;&#23601;&#22351;&#25481;&#20102;&#65292;&#22240;&#20026;&#36807;&#31243; <span class="stt">increment-y</span> &#20462;&#25913;&#20102;&#24207;&#23545;&#20013;&#30340;
&#38169;&#35823;&#37096;&#20998;&#12290;</p><p>&#29233;&#20029;&#19997;&#21487;&#20197;&#25226; <span class="stt">point</span> &#22768;&#26126;&#20026;<span class="emph">&#27169;&#31946;</span>&#25968;&#25454;&#31867;&#22411;&#26469;&#35299;&#20915;&#22905;&#30340;&#38382;&#39064;&#12290;&#22905;&#25226;&#25509;&#21475;&#37325;&#20889;&#20026;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">opaque point</span></p></td></tr><tr><td><p><span class="stt">initial-point : (int -&gt; point)</span></p></td></tr><tr><td><p><span class="stt">increment-x : (point -&gt; point)</span></p></td></tr><tr><td><p><span class="stt">get-x : (point -&gt; int)</span></p></td></tr></table></blockquote><p>&#29616;&#22312;&#40077;&#20271;&#29992;&#36807;&#31243; <span class="stt">initial-point</span> &#21019;&#24314;&#26032;&#30340;&#28857;&#65292;&#32780;&#19988;&#20182;&#21487;&#20197;&#29992; <span class="stt">from
Alices-points take get-x</span> &#21644; <span class="stt">from Alices-points take increment-x</span> &#22788;&#29702;&#28857;&#65292;&#20294;
&#26159;&#38500;&#20102;&#29233;&#20029;&#19997;&#25509;&#21475;&#20013;&#30340;&#36807;&#31243;&#22806;&#65292;&#20182;&#26080;&#27861;&#29992;&#20854;&#20182;&#36807;&#31243;&#22788;&#29702;&#28857;&#12290;&#23588;&#20854;&#26159;&#65292;&#20182;&#20889;&#19981;&#20986;&#36807;&#31243;
<span class="stt">increment-y</span>&#65292;&#22240;&#20026;&#23427;&#29992;&#20102;&#29233;&#20029;&#19997;&#25509;&#21475;&#20043;&#22806;&#30340;&#36807;&#31243;&#22788;&#29702;&#28857;&#12290;</p><p>&#22312;&#26412;&#33410;&#30340;&#21097;&#20313;&#37096;&#20998;&#20013;&#65292;&#25105;&#20204;&#25506;&#31350;&#36825;&#20123;&#32452;&#20214;&#30340;&#26356;&#22810;&#20363;&#23376;&#12290;</p><h5 class="heading"><a name="(part._s8..2-transparent-types)"></a>&#36879;&#26126;&#31867;&#22411;<span class="button-group"><a href="#(part._s8..2-transparent-types)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1225))"></a>
<a name="(idx._(gentag._1226))"></a>
<a name="(idx._(gentag._1227))"></a>
&#25105;&#20204;&#39318;&#20808;&#35752;&#35770;&#36879;&#26126;&#31867;&#22411;&#22768;&#26126;&#12290;&#26377;&#26102;&#36825;&#20123;&#21448;&#31216;&#20316;<span class="emph">&#20855;&#20307;</span> (<span class="emph">concrete</span>) &#31867;&#22411;
&#25110;<span class="emph">&#31867;&#22411;&#32553;&#20889;</span> (<span class="emph">type abbreviation</span>)&#12290;</p><blockquote class="EoplExample"><p><a name="(elem._eg-8..6)"></a>&#31243;&#24207;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[transparent t = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">z : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">s : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-z? : (t -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type t = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">z = 33</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">s = proc (x : t) -(x,-1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-z? = proc (x : t) zero?(-(x,z))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">proc (x : from m1 take t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(from m1 take is-z? -(x,0))</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#20026; <span class="stt">(int -&gt; bool)</span>&#12290;</p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="module-type.svg" alt="模块类型声明的作用域" width="570.0pt" height="372.0pt"/></p></blockquote></div></p><blockquote class="caption"><p>&#27169;&#22359;&#31867;&#22411;&#22768;&#26126;&#30340;&#20316;&#29992;&#22495;<a name="(elem._fig-8..8)"></a></p></blockquote></blockquote><p>&#22312;&#25509;&#21475;&#30340;&#21097;&#20313;&#37096;&#20998;&#20013;&#65292;&#22768;&#26126; <span class="stt">transparent t = int</span> &#23558; <span class="stt">t</span> &#32465;&#23450;&#21040;&#31867;&#22411; <span class="stt">int</span>&#65292;
&#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#20889; <span class="stt">z : t</span>&#12290;&#26356;&#37325;&#35201;&#30340;&#26159;&#65292;&#22312;&#31243;&#24207;&#30340;&#21097;&#20313;&#37096;&#20998;&#20013;&#65292;&#22768;&#26126;&#20063;&#23558; <span class="stt">from m1
take t</span> &#32465;&#23450;&#21040; <span class="stt">int</span>&#12290;&#25105;&#20204;&#31216;&#20043;&#20026;<span class="emph">&#21463;&#38480;&#31867;&#22411;</span> (<span class="emph">qualified type</span>)&#12290;
<a name="(idx._(gentag._1228))"></a>
&#36825;&#37324;&#65292;&#25105;&#20204;&#29992;&#23427;&#22768;&#26126;&#20102;&#32465;&#23450;&#21040;&#21464;&#37327; <span class="stt">z</span> &#30340;&#31867;&#22411;&#12290;&#22768;&#26126;&#30340;&#20316;&#29992;&#22495;&#26159;&#25509;&#21475;&#30340;&#21097;&#20313;&#37096;&#20998;&#65292;&#20197;&#21450;
&#27169;&#22359;&#23450;&#20041;&#20043;&#21518;&#31243;&#24207;&#30340;&#21097;&#20313;&#37096;&#20998;&#12290;</p><p>&#27169;&#22359;&#20027;&#20307;&#20013;&#30340;&#23450;&#20041; <span class="stt">type t = int</span> &#22312;&#20027;&#20307;&#30340;&#21097;&#20313;&#37096;&#20998;&#20013;&#65292;&#23558; <span class="stt">t</span> &#32465;&#23450;&#21040; <span class="stt">int</span>&#65292;
&#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#20889; <span class="stt">s = proc (x : t) ...</span>&#12290;&#20687;&#20043;&#21069;&#37027;&#26679;&#65292;&#23450;&#20041;&#30340;&#20316;&#29992;&#22495;&#26159;&#20027;&#20307;&#30340;&#21097;&#20313;&#37096;
&#20998;&#65288;&#35265;&#65289;&#12290;</p><p>&#24403;&#28982;&#65292;&#25105;&#20204;&#21487;&#20197;&#32473;&#31867;&#22411;&#36215;&#20219;&#24847;&#21517;&#23383;&#65292;&#20063;&#21487;&#20197;&#22768;&#26126;&#22810;&#20010;&#31867;&#22411;&#12290;&#31867;&#22411;&#22768;&#26126;&#21487;&#20197;&#20986;&#29616;&#22312;&#25509;&#21475;&#20013;&#20219;&#24847;
&#20301;&#32622;&#65292;&#21482;&#35201;&#27599;&#20010;&#22768;&#26126;&#37117;&#20808;&#20110;&#20351;&#29992;&#12290;</p><p><a name="(idx._(gentag._1229))"></a>
<a name="(idx._(gentag._1230))"></a>
<a name="(idx._(gentag._1231))"></a></p><h5 class="heading"><a name="(part._s8..2-opaque-types)"></a>&#27169;&#31946;&#31867;&#22411;<span class="button-group"><a href="#(part._s8..2-opaque-types)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1232))"></a>
<a name="(idx._(gentag._1233))"></a>
&#27169;&#22359;&#36824;&#21487;&#20197;&#29992; <span class="stt">opaque-type</span> &#22768;&#26126;&#36755;&#20986;<span class="emph">&#27169;&#31946;</span>&#31867;&#22411;&#12290;&#27169;&#31946;&#31867;&#22411;&#26377;&#26102;&#21448;
&#31216;&#20316;<span class="emph">&#25277;&#35937;&#31867;&#22411;</span> (<span class="emph">abstract type</span>)&#12290;</p><blockquote class="EoplExample"><p><a name="(elem._eg-8..7)"></a>&#25105;&#20204;&#25226; &#31243;&#24207;&#20013;&#30340;&#36879;&#26126;&#31867;&#22411;&#26367;&#25442;&#20026;&#27169;&#31946;
&#31867;&#22411;&#12290;&#24471;&#20986;&#30340;&#31243;&#24207;&#26159;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">z : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">s : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-z? : (t -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type t = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">z = 33</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">s = proc (x : t) -(x,-1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-z? = proc (x : t) zero?(-(x,z))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">proc (x : from m1 take t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(from m1 take is-z? -(x,0))</span></p></td></tr></table></blockquote></blockquote></blockquote><p>&#25509;&#21475;&#20013;&#30340;&#22768;&#26126; <span class="stt">opaque t</span> &#25226; <span class="stt">t</span> &#20316;&#20026;&#19968;&#31181;&#26032;&#30340;&#27169;&#31946;&#31867;&#22411;&#21517;&#23383;&#12290;&#27169;&#31946;&#31867;&#22411;&#30340;&#34892;&#20026;&#23601;
&#20687; <span class="stt">int</span> &#25110; <span class="stt">bool</span> &#20043;&#31867;&#30340;&#21407;&#29983;&#31867;&#22411;&#12290;&#21517;&#20026; <span class="stt">t</span> &#30340;&#31867;&#22411;&#22312;&#25509;&#21475;&#30340;&#21097;&#20313;&#37096;&#20998;&#20013;&#32465;
&#23450;&#21040;&#36825;&#31181;&#27169;&#31946;&#31867;&#22411;&#65292;&#32780;&#21463;&#38480;&#31867;&#22411; <span class="stt">from m1 take t</span> &#22312;&#31243;&#24207;&#30340;&#21097;&#20313;&#37096;&#20998;&#20013;&#32465;&#23450;&#21040;&#21516;&#19968;&#27169;
&#31946;&#31867;&#22411;&#12290;&#31243;&#24207;&#30340;&#21097;&#20313;&#37096;&#20998;&#37117;&#30693;&#36947; <span class="stt">from m1 take z</span> &#32465;&#23450;&#21040;&#19968;&#20010;&#20540;&#65292;&#20854;&#31867;&#22411;&#20026; <span class="stt">from
m1 take t</span>&#65307;<span class="stt">from m1 take s</span> &#21644; <span class="stt">from m1 take is-z?</span> &#32465;&#23450;&#21040;&#36807;&#31243;&#65292;&#29992;&#26469;&#22788;&#29702;
&#36825;&#31181;&#31867;&#22411;&#30340;&#20540;&#12290;<a name="(idx._(gentag._1234))"></a>&#36825;&#23601;&#26159;&#25277;&#35937;&#36793;&#30028;&#12290;&#31867;&#22411;&#26816;&#26597;&#22120;&#30830;&#20445;&#34920;
&#36798;&#24335;&#30340;&#31867;&#22411;&#20026; <span class="stt">from m1 take t</span>&#26102;&#65292;&#27714;&#20540;&#26159;&#23433;&#20840;&#30340;&#65292;&#25152;&#20197;&#34920;&#36798;&#24335;&#30340;&#20540;&#21482;&#33021;&#36890;&#36807;&#36825;&#20123;&#25805;&#20316;
&#31526;&#29983;&#25104;&#65292;&#22914;suitable-env&#25152;&#36848;&#12290;</p><p>&#19982;&#20043;&#23545;&#24212;&#65292;&#23450;&#20041; <span class="stt">type t = int</span> &#22312;&#27169;&#22359;&#20027;&#20307;&#20869;&#37096;&#23558; <span class="stt">t</span> &#20316;&#20026; <span class="stt">int</span> &#30340;&#21517;&#23383;&#65292;
&#20294;&#26159;&#65292;&#30001;&#20110;&#31243;&#24207;&#30340;&#21097;&#20313;&#37096;&#20998;&#20174;&#27169;&#22359;&#25509;&#21475;&#33719;&#24471;&#32465;&#23450;&#65292;&#25152;&#20197;&#23545;&#27492;&#19968;&#26080;&#25152;&#30693;&#12290;</p><p>&#25152;&#20197; <span class="stt">-(x,0)</span> &#31867;&#22411;&#24322;&#24120;&#65292;&#22240;&#20026;&#20027;&#31243;&#24207;&#19981;&#30693;&#36947;&#31867;&#22411; <span class="stt">from m1 take t</span> &#20026;&#30340;&#20540;&#23601;&#26159;&#31867;
&#22411;&#20026; <span class="stt">int</span> &#30340;&#20540;&#12290;</p><p>&#25105;&#20204;&#25913;&#21464;&#31243;&#24207;&#65292;&#21024;&#25481;&#31639;&#26415;&#25805;&#20316;&#65292;&#24471;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">z : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">s : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-z? : (t -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type t = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">z = 33</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">s = proc (x : t) -(x,-1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-z? = proc (x : t) zero?(-(x,z))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">proc (x : from m1 take t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(from m1 take is-z? x)</span></p></td></tr></table></blockquote><p>&#29616;&#22312;&#65292;&#25105;&#20204;&#30340;&#31243;&#24207;&#31867;&#22411;&#27491;&#24120;&#65292;&#31867;&#22411;&#20026; <span class="stt">(from m1 take t -&gt; bool)</span>&#12290;</p></blockquote><p>&#36890;&#36807;&#24378;&#21270;&#25277;&#35937;&#36793;&#30028;&#65292;&#31867;&#22411;&#26816;&#26597;&#22120;&#30830;&#20445;&#31243;&#24207;&#21482;&#33021;&#36890;&#36807;&#25509;&#21475;&#25552;&#20379;&#30340;&#36807;&#31243;&#22788;&#29702;&#25509;&#21475;&#25552;&#20379;&#30340;&#20540;&#12290;
&#22914;<a href="#%28part._da%29" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a>&#25152;&#36848;&#65292;&#36825;&#32473;&#25105;&#20204;&#25552;&#20379;&#20102;&#26426;&#21046;&#26469;&#20998;&#31163;&#25968;&#25454;&#31867;&#22411;&#30340;&#29992;&#25143;&#21644;&#23454;&#29616;&#12290;&#25509;&#19979;&#26469;&#65292;&#25105;&#20204;&#32473;
&#20986;&#36825;&#19968;&#25216;&#26415;&#30340;&#20960;&#20010;&#20363;&#23376;&#12290;</p><blockquote class="EoplExample"><p><a name="(elem._eg-8..8)"></a>&#22914;&#26524;&#31243;&#24207;&#20351;&#29992;&#20102;&#27169;&#22359;&#23450;&#20041;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module colors</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque color</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">red : color</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">green : color</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-red? : (color -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type color = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">red = 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">green = 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-red? = proc (c : color) zero?(c)]</span></p></td></tr></table></blockquote><p>&#31243;&#24207;&#27809;&#27861;&#30693;&#36947; <span class="stt">from colors take color</span> &#23454;&#38469;&#20026; <span class="stt">int</span>&#65292;&#20063;&#19981;&#30693;&#36947; <span class="stt">from
colors take green</span> &#23454;&#38469;&#20026; 1&#65288;&#20063;&#35768;&#26377;&#19968;&#20010;&#20363;&#22806;&#65306;&#36820;&#22238;&#39068;&#33394;&#20316;&#20026;&#26368;&#32456;&#31572;&#26696;&#65292;&#28982;&#21518;&#25171;&#21360;&#20986;
&#26469;&#65289;&#12290;</p></blockquote></blockquote><blockquote class="EoplExample"><p><a name="(elem._eg-8..9)"></a>&#31243;&#24207;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module ints1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type t = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">zero = 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">succ = proc(x : t) -(x,-5)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">pred = proc(x : t) -(x,5)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero = proc (x : t) zero?(x)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let z = from ints1 take zero</span></p></td></tr><tr><td><p><span class="stt">in let s = from ints1 take succ</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (s (s z))</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#20026; <span class="stt">from ints1 take t</span>&#65292;&#20540;&#20026; 10&#12290;&#20294;&#25105;&#20204;&#21482;&#33021;&#36890;&#36807; <span class="stt">ints1</span> &#36755;&#20986;&#30340;&#36807;&#31243;&#22788;&#29702;
&#36825;&#20010;&#20540;&#12290;&#36825;&#20010;&#27169;&#22359;&#29992;&#34920;&#36798;&#20540; <span class="texMathInline">5*k</span> &#34920;&#31034;&#25972;&#25968; <span class="texMathInline">k</span>&#12290;&#29992;<a href="#%28part._s2..1%29" data-pltdoc="x">&#29992;&#25509;&#21475;&#23450;&#20041;&#25968;&#25454;</a>&#30340;&#34920;&#31034;&#27861;&#65292;&#20889;&#20316;
<span class="texMathInline">\lceil k \rceil = 5 * k</span>&#12290;</p></blockquote></blockquote><blockquote class="EoplExample"><p><a name="(elem._eg-8..10)"></a>&#22312;&#36825;&#20010;&#27169;&#22359;&#20013;&#65292;<span class="texMathInline">\lceil k \rceil = -3 * k</span>&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module ints2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type t = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">zero = 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">succ = proc(x : t) -(x,3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">pred = proc(x : t) -(x,-3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero = proc (x : t) zero?(x)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let z = from ints2 take zero</span></p></td></tr><tr><td><p><span class="stt">in let s = from ints2 take succ</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (s (s z))</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#20026; <span class="stt">from ints2 take t</span>&#65292;&#20540;&#20026; -6&#12290;</p></blockquote></blockquote><blockquote class="EoplExample"><p><a name="(elem._eg-8..11)"></a>&#22312;&#21069;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#19981;&#33021;&#30452;&#25509;&#22788;&#29702;&#20540;&#65292;&#20294;&#25105;&#20204;&#33021;&#29992;&#27169;&#22359;&#36755;&#20986;
&#30340;&#36807;&#31243;&#22788;&#29702;&#23427;&#20204;&#12290;&#20687;<a href="#%28part._da%29" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a>&#37027;&#26679;&#65292;&#25105;&#20204;&#21487;&#20197;&#32467;&#21512;&#36825;&#20123;&#36807;&#31243;&#20570;&#26377;&#29992;&#30340;&#24037;&#20316;&#12290;&#36825;&#37324;&#65292;&#25105;&#20204;
&#23558;&#23427;&#20204;&#32467;&#21512;&#36215;&#26469;&#65292;&#20889;&#20986;&#36807;&#31243; <span class="stt">to-int</span>&#65292;&#25226;&#27169;&#22359;&#20013;&#30340;&#20540;&#36716;&#22238; <span class="stt">int</span> &#31867;&#22411;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module ints1 </span><span class="emph">...&#21516;&#21069;...</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let z = from ints1 take zero</span></p></td></tr><tr><td><p><span class="stt">in let s = from ints1 take succ</span></p></td></tr><tr><td><p><span class="stt">in let p = from ints1 take pred</span></p></td></tr><tr><td><p><span class="stt">in let z? = from ints1 take is-zero</span></p></td></tr><tr><td><p><span class="stt">in letrec int to-int (x : from ints1 take t) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if (z? x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((to-int (p x)), -1)</span></p></td></tr><tr><td><p><span class="stt">in (to-int (s (s z)))</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#20026; <span class="stt">int</span>&#65292;&#20540;&#20026; 2&#12290;</p></blockquote></blockquote><blockquote class="EoplExample"><p><a name="(elem._eg-8..12)"></a>&#36825;&#37324;&#29992;&#21040;&#30340;&#25216;&#26415;&#19982; <span class="stt">ints2</span> &#20013;&#31639;&#26415;&#25805;&#20316;&#30340;&#23454;&#29616;&#30456;&#21516;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module ints2 </span><span class="emph">...&#21516;&#21069;...</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let z = from ints2 take zero</span></p></td></tr><tr><td><p><span class="stt">in let s = from ints2 take succ</span></p></td></tr><tr><td><p><span class="stt">in let p = from ints2 take pred</span></p></td></tr><tr><td><p><span class="stt">in let z? = from ints2 take is-zero</span></p></td></tr><tr><td><p><span class="stt">in letrec int to-int (x : from ints2 take t) =</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if (z? x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((to-int (p x)), -1)</span></p></td></tr><tr><td><p><span class="stt">in (to-int (s (s z)))</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#21516;&#26679;&#20026; <span class="stt">int</span>&#65292;&#20540;&#20026; 2&#12290;</p></blockquote></blockquote><p>&#22312;<a href="#%28part._s8..3%29" data-pltdoc="x">&#27169;&#22359;&#36807;&#31243;</a>&#20013;&#65292;&#25105;&#20204;&#23637;&#31034;&#22914;&#20309;&#23558;&#20004;&#20010;&#25277;&#35937;&#20986;&#26469;&#12290;</p><blockquote class="EoplExample"><p><a name="(elem._eg-8..13)"></a>&#22312;&#19979;&#38754;&#30340;&#31243;&#24207;&#20013;&#65292;&#25105;&#20204;&#35774;&#35745;&#19968;&#20010;&#27169;&#22359;&#26469;&#23553;&#35013;&#24067;&#23572;&#31867;&#22411;&#12290;&#24067;&#23572;&#20540;&#29992;&#25972;&#25968;&#20540;&#34920;&#31034;&#65292;
&#20294;&#26159;&#20687; &#37027;&#26679;&#65292;&#31243;&#24207;&#30340;&#21097;&#20313;&#37096;&#20998;&#23545;&#27492;&#19968;&#26080;&#25152;&#30693;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module mybool</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">true : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">false : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">and : (t -&gt; (t -&gt; t))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">not : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">to-bool : (t -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type t = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">true = 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">false = 13</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">and = proc (x : t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (y : t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x) then y else false</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">not = proc (x : t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x) then false else true</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">to-bool = proc (x : t) zero?(x)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let true = from mybool take true</span></p></td></tr><tr><td><p><span class="stt">in let false = from mybool take false</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let and = from mybool take and</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in ((and true) false)</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#20026; <span class="stt">from mybool take t</span>&#65292;&#20540;&#20026; 13&#12290;</p></blockquote></blockquote><p><a name="(idx._(gentag._1235))"></a>
<a name="(idx._(gentag._1236))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex8..12)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312; &#20013;&#65292;<span class="stt">and</span> &#21644; <span class="stt">not</span> &#30340;&#23450;&#20041;&#21487;&#20197;&#20174;&#27169;&#22359;&#20869;&#37096;&#31227;&#21040;&#22806;&#38754;
&#21527;&#65311;<span class="stt">to-bool</span> &#21602;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..13)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#19968;&#20010;&#27169;&#22359;&#65292;&#29992; <span class="texMathInline">5*k+3</span> &#34920;&#31034;&#25972;&#25968; <span class="texMathInline">k</span>&#65292;&#23454;&#29616;&#31639;&#26415;&#25805;&#20316;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..14)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19979;&#38754;&#26159; <span class="stt">mybool</span>&#65288;&#65289;&#30340;&#21478;&#19968;&#31181;&#23450;&#20041;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module mybool</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">true : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">false : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">and : (t -&gt; (t -&gt; t))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">not : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">to-bool : (t -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type t = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">true = 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">false = 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">and = proc (x : t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (y : t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x) then false else y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">not = proc (x : t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x) then true else false</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">to-bool = proc (x : t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x) then zero?(1) else zero?(0)]</span></p></td></tr></table></blockquote><p>&#26377;&#27809;&#26377;&#31243;&#24207;&#31867;&#22411;&#20026; <span class="stt">int</span>&#65292;&#29992; <span class="stt">mybool</span> &#21407;&#26469;&#30340;&#23450;&#20041;&#36820;&#22238;&#19968;&#20010;&#20540;&#65292;&#29992;&#26032;&#30340;&#23450;&#20041;&#36820;&#22238;&#21478;
&#19968;&#20010;&#20540;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..15)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1237))"></a>
<a name="(idx._(gentag._1238))"></a>
&#20889;&#19968;&#20010;&#27169;&#22359;&#65292;&#23454;&#29616;&#25277;&#35937;&#34920;&#12290;&#20320;&#23454;&#29616;&#30340;&#34920;&#24212;&#31867;&#20284;&#29615;&#22659;&#65292;&#20294;&#19981;&#26159;&#25226;&#31526;&#21495;&#32465;&#23450;&#21040; Scheme &#20540;&#65292;&#32780;&#26159;
&#25226;&#25972;&#25968;&#20540;&#32465;&#23450;&#21040;&#25972;&#25968;&#20540;&#12290;&#25509;&#21475;&#25552;&#20379;&#19968;&#20010;&#20540;&#65292;&#34920;&#31034;&#31354;&#34920;&#65307;&#20004;&#20010;&#36807;&#31243; <span class="stt">add-to-table</span> &#21644;
<span class="stt">lookup-in-table</span> &#31867;&#20284; <span class="stt">extend-env</span> &#21644; <span class="stt">apply-env</span>&#12290;&#30001;&#20110;&#25105;&#20204;&#30340;&#35821;&#35328;&#21482;&#26377;
&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#25105;&#20204;&#29992;&#21654;&#21937;&#21270;&#65288;ex3.20&#65289;&#23454;&#29616;&#31561;&#25928;&#30340;&#22810;&#21442;&#25968;&#36807;&#31243;&#12290;&#20320;&#21487;&#20197;&#29992;
&#26597;&#35810;&#20219;&#20309;&#20540;&#37117;&#36820;&#22238; 0 &#30340;&#34920;&#27169;&#25311;&#31354;&#34920;&#12290;&#36825;&#26159;&#35813;&#27169;&#22359;&#30340;&#19968;&#20010;&#20363;&#23376;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module tables</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque table</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">empty : table</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">add-to-table : (int -&gt; (int -&gt; (table -&gt; table)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">lookup-in-table : (int -&gt; (table -&gt; int))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type table = (int -&gt; int)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">...]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let empty = from tables take empty</span></p></td></tr><tr><td><p><span class="stt">in let add-binding = from tables take add-to-table</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let lookup = from tables take lookup-in-table</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let table1 = (((add-binding 3) 300)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(((add-binding 4) 400)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(((add-binding 3) 600)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">empty)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(((lookup 4) table1),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">((lookup 3) table1))</span></p></td></tr></table></blockquote><p>&#36825;&#20010;&#31243;&#24207;&#31867;&#22411;&#24212;&#20026; <span class="stt">int</span>&#12290;&#34920; <span class="stt">table1</span> &#25226; 4 &#32465;&#23450;&#21040; 400&#65292;&#25226; 3 &#32465;&#23450;&#21040; 300&#65292;&#25152;&#20197;
&#31243;&#24207;&#30340;&#20540;&#24212;&#20026; 100&#12290;
<a name="(idx._(gentag._1239))"></a>
<a name="(idx._(gentag._1240))"></a></p></blockquote><h5 class="heading">8.2.2<tt>&nbsp;</tt><a name="(part._s8..2..2)"></a>&#23454;&#29616;<span class="button-group"><a href="#(part._s8..2..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#29616;&#22312;&#25105;&#20204;&#26469;&#25193;&#23637;&#31995;&#32479;&#65292;&#23454;&#29616;&#36879;&#26126;&#31867;&#22411;&#21644;&#27169;&#31946;&#31867;&#22411;&#22768;&#26126;&#65292;&#21450;&#21463;&#38480;&#31867;&#22411;&#30340;&#24341;&#29992;&#12290;</p><h5 class="heading"><a name="(part._syntax-and-the-interpreter)"></a>&#35821;&#27861;&#21644;&#35299;&#37322;&#22120;<span class="button-group"><a href="#(part._syntax-and-the-interpreter)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1241))"></a>
<a name="(idx._(gentag._1242))"></a>
&#25105;&#20204;&#32473;&#20004;&#31181;&#26032;&#31867;&#22411;&#28155;&#21152;&#35821;&#27861;&#65306;&#26377;&#21517;&#31867;&#22411;&#65288;&#22914; <span class="stt">t</span>&#65289;&#21644;&#21463;&#38480;&#31867;&#22411;&#65288;&#22914; <span class="stt">from m1 take
t</span>&#65289;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Type} &amp;::= \mathit{Identifier} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">named-type (name)</span>} \\[5pt]
    \mathit{Type} &amp;::= <span class="stt">from </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> take </span><span class="Iidentity">\mathit{Identifier}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">qualified-type (m-name t-name)</span>}\end{align*}</span></p></blockquote><p>&#25105;&#20204;&#20026;&#27169;&#31946;&#31867;&#22411;&#21644;&#36879;&#26126;&#31867;&#22411;&#26032;&#22686;&#20004;&#31181;&#22768;&#26126;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Decl} &amp;::= <span class="stt">opaque </span><span class="Iidentity">\mathit{Identifier}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">opaque-type-decl (t-name)</span>} \\[5pt]
    \mathit{Decl} &amp;::= <span class="stt">transparent </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{Type}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">transparent-type-decl (t-name ty)</span>}\end{align*}</span></p></blockquote><p><a name="(idx._(gentag._1243))"></a>
&#25105;&#20204;&#36824;&#35201;&#26032;&#22686;&#19968;&#31181;&#23450;&#20041;&#65306;&#31867;&#22411;&#23450;&#20041;&#65292;&#29992;&#26469;&#23450;&#20041;&#27169;&#31946;&#31867;&#22411;&#21644;&#36879;&#26126;&#31867;&#22411;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Defn} &amp;::= <span class="stt">type </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{Type}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">type-defn (name ty)</span>}\end{align*}</span></p></blockquote><p>&#35299;&#37322;&#22120;&#19981;&#38656;&#35201;&#26597;&#30475;&#31867;&#22411;&#21644;&#22768;&#26126;&#65292;&#25152;&#20197;&#35299;&#37322;&#22120;&#30340;&#21807;&#19968;&#25913;&#21160;&#26159;&#24573;&#30053;&#31867;&#22411;&#23450;&#20041;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">defns-to-env</span></span> : <span class="texMathInline">\mathit{Listof(Defn)} \times \mathit{Env} \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">defns-to-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-defn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...as</span><span class="hspace">&nbsp;</span><span class="RktSym">before...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-defn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-name</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-to-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1244))"></a></div></p></blockquote><h5 class="heading"><a name="(part._the-checker)"></a>&#26816;&#26597;&#22120;<span class="button-group"><a href="#(part._the-checker)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1245))"></a>
<a name="(idx._(gentag._1246))"></a>
&#26816;&#26597;&#22120;&#30340;&#25913;&#21160;&#23601;&#22810;&#22810;&#20102;&#65292;&#22240;&#20026;&#25152;&#26377;&#20851;&#20110;&#31867;&#22411;&#30340;&#25805;&#20316;&#37117;&#35201;&#25193;&#23637;&#65292;&#20197;&#20415;&#22788;&#29702;&#26032;&#30340;&#31867;&#22411;&#12290;</p><p>&#39318;&#20808;&#65292;&#25105;&#20204;&#20171;&#32461;&#19968;&#31181;&#31995;&#32479;&#24615;&#30340;&#26041;&#27861;&#26469;&#22788;&#29702;&#27169;&#31946;&#31867;&#22411;&#21644;&#36879;&#26126;&#31867;&#22411;&#12290;&#27169;&#31946;&#31867;&#22411;&#23601;&#20687; <span class="stt">int</span> &#25110;
<span class="stt">bool</span> &#20043;&#31867;&#30340;&#21407;&#29983;&#31867;&#22411;&#19968;&#26679;&#12290;&#32780;&#36879;&#26126;&#31867;&#22411;&#21517;&#21103;&#20854;&#23454;&#65292;&#26159;&#36879;&#26126;&#30340;&#65306;&#23427;&#20204;&#30340;&#34892;&#20026;&#19982;&#23450;&#20041;&#30456;&#21516;&#12290;
&#25152;&#20197;&#27599;&#20010;&#31867;&#22411;&#37117;&#31561;&#20215;&#20110;&#19979;&#21015;&#35821;&#27861;&#25551;&#36848;&#30340;&#65306;</p><blockquote class="SubFlow"><blockquote class="Small"><p><span class="texMathDisplay">\mathit{Type} ::= <span class="stt">int</span>\ |\ <span class="stt">bool</span>\ |\ <span class="stt">from </span><span class="texMathInline">m</span><span class="stt"> take </span><span class="texMathInline">t</span>\ |\ <span class="stt">(</span><span class="texMathInline">\mathit{Type}</span><span class="stt"> -&gt; </span><span class="texMathInline">\mathit{Type}</span><span class="stt">)</span></span></p></blockquote><p>&#20854;&#20013;&#65292;<span class="texMathInline">t</span> &#20026; <span class="texMathInline">m</span> &#20013;&#30340;&#27169;&#31946;&#31867;&#22411;&#22768;&#26126;&#12290;&#25105;&#20204;&#31216;&#36825;&#31181;&#24418;&#24335;&#30340;&#31867;&#22411;&#20026;<span class="emph">&#23637;&#24320;&#31867;&#22411;</span> (<span class="emph">expanded
type</span>)&#12290;</p></blockquote><p>&#25509;&#19979;&#26469;&#25105;&#20204;&#25193;&#23637;&#31867;&#22411;&#29615;&#22659;&#65292;&#22788;&#29702;&#26032;&#31867;&#22411;&#12290;&#25105;&#20204;&#30340;&#31867;&#22411;&#29615;&#22659;&#23558;&#27599;&#20010;&#26377;&#21517;&#31867;&#22411;&#25110;&#21463;&#38480;&#31867;&#22411;&#32465;&#23450;&#21040;
&#19968;&#20010;&#23637;&#24320;&#31867;&#22411;&#12290;&#26032;&#30340;&#31867;&#22411;&#29615;&#22659;&#23450;&#20041;&#20026;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">type-environment</span><span class="hspace">&nbsp;</span><span class="RktSym">type-environment?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="emph">...&#21516;&#21069;...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-module</span><span class="hspace">&nbsp;</span><span class="emph">...&#21516;&#21069;...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">t-name</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">type?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">type-environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23427;&#28385;&#36275;&#26465;&#20214;&#65306;<span class="stt">type</span> &#24635;&#26159;&#19968;&#20010;&#23637;&#24320;&#31867;&#22411;&#12290;&#20687;invariant&#35752;&#35770;&#30340;&#65292;&#36825;&#20010;&#26465;&#20214;&#26159;
&#19968;<span class="emph">&#19981;&#21464;&#24335;</span>&#12290;</p></blockquote><p><a name="(idx._(gentag._1247))"></a>
&#25509;&#30528;&#25105;&#20204;&#20889;&#20986;&#20989;&#25968; <span class="stt">expand-type</span>&#65292;&#23427;&#21462;&#19968;&#20010;&#31867;&#22411;&#21644;&#19968;&#20010;&#31867;&#22411;&#29615;&#22659;&#65292;&#29992;&#21518;&#32773;&#20013;&#30340;&#32465;&#23450;&#23637;
&#24320;&#21069;&#32773;&#12290;&#26681;&#25454;&#19981;&#21464;&#24335;&#8220;&#32467;&#26524;&#31867;&#22411;&#24050;&#23637;&#24320;&#8221;&#65292;&#23427;&#22312;&#31867;&#22411;&#29615;&#22659;&#20013;&#26597;
&#35810;&#26377;&#21517;&#31867;&#22411;&#21644;&#21463;&#38480;&#31867;&#22411;&#65292;&#23545;<span class="stt">proc</span> &#31867;&#22411;&#65292;&#23427;&#36882;&#24402;&#22788;&#29702;&#21442;&#25968;&#21644;&#32467;&#26524;&#31867;&#22411;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">expand-type</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Tenv} \to \mathit{ExpandedType}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">expand-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-type</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">named-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-type-name-in-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">qualified-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">t-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-qualified-type-in-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">t-name</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20026;&#20102;&#32500;&#25345;&#36825;&#19968;&#19981;&#21464;&#24335;&#65292;&#25105;&#20204;&#24517;&#39035;&#20445;&#35777;&#19981;&#35770;&#20309;&#26102;&#25193;&#23637;&#31867;&#22411;&#29615;&#22659;&#65292;&#37117;&#35201;&#35843;&#29992; <span class="stt">expand-type</span>&#12290;
&#36825;&#31181;&#22320;&#26041;&#26377;&#19977;&#22788;&#65306;</p><ul><li><p>&#22312;&#26816;&#26597;&#22120;&#20013;&#30340; <span class="stt">type-of</span> &#20869;&#65307;</p></li><li><p>&#29992; <span class="stt">defns-to-decls</span> &#22788;&#29702;&#31867;&#22411;&#23450;&#20041;&#21015;&#34920;&#20043;&#22788;&#65307;</p></li><li><p>&#22312; <span class="stt">add-module-defns-to-tenv</span> &#20013;&#65292;&#21521;&#31867;&#22411;&#29615;&#22659;&#28155;&#21152;&#27169;&#22359;&#20043;&#22788;&#12290;</p></li></ul><p>&#22312;&#26816;&#26597;&#22120;&#20013;&#65292;&#25105;&#20204;&#25226;&#24418;&#22914;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">sym</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></p></blockquote></blockquote><p>&#30340;&#35843;&#29992;&#26367;&#25442;&#20026;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></p></blockquote></blockquote></blockquote><p>&#22312; <span class="stt">defns-to-decls</span> &#20013;&#65292;&#24403;&#25105;&#20204;&#36935;&#21040;&#31867;&#22411;&#23450;&#20041;&#26102;&#65292;&#25105;&#20204;&#23637;&#24320;&#21491;&#36793;&#30340;&#23450;&#20041;&#65292;&#28982;&#21518;&#23558;&#20854;&#21152;
&#20837;&#31867;&#22411;&#29615;&#22659;&#20013;&#12290;<span class="stt">type-of</span> &#36820;&#22238;&#30340;&#31867;&#22411;&#19968;&#23450;&#26159;&#23637;&#24320;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#19981;&#38656;&#35201;&#20877;&#27425;&#23637;&#24320;&#23427;&#12290;&#30001;
&#20110;&#22312;&#27169;&#22359;&#20027;&#20307;&#20013;&#65292;&#25152;&#26377;&#31867;&#22411;&#32465;&#23450;&#37117;&#26159;&#36879;&#26126;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#25226;&#31867;&#22411;&#23450;&#20041;&#36716;&#25442;&#20026;&#36879;&#26126;&#31867;&#22411;&#22768;&#26126;&#12290;&#22312;
<span class="stt">add-module-defns-to-tenv</span> &#20013;&#65292;&#25105;&#20204;&#35843;&#29992; <span class="stt">extend-tenv-with-module</span>&#65292;&#23558;&#25509;&#21475;
&#28155;&#21152;&#21040;&#31867;&#22411;&#29615;&#22659;&#20013;&#12290;&#36825;&#37324;&#65292;&#25105;&#20204;&#38656;&#35201;&#23637;&#24320;&#25509;&#21475;&#65292;&#20197;&#30830;&#20445;&#23427;&#21253;&#21547;&#30340;&#25152;&#26377;&#31867;&#22411;&#37117;&#24050;&#23637;&#24320;&#12290;&#35201;&#23436;&#25104;
&#36825;&#19968;&#28857;&#65292;&#25105;&#20204;&#20462;&#25913; <span class="stt">add-module-defns-to-tenv</span>&#65292;&#35843;&#29992; <span class="stt">expand-iface</span>&#12290;
&#35265;&#12290;</p><p>&#36807;&#31243; <span class="stt">expand-iface</span>&#65288;&#65289;&#35843;&#29992; <span class="stt">expand-decls</span>&#12290;&#25105;&#20204;&#25552;&#21462;
&#20986;&#36825;&#20123;&#36807;&#31243;&#65292;&#20026;<a href="#%28part._s8..3%29" data-pltdoc="x">&#27169;&#22359;&#36807;&#31243;</a>&#20570;&#20934;&#22791;&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">defns-to-decls</span></span> : <span class="texMathInline">\mathit{Listof(Defn)} \times \mathit{Tenv} \to \mathit{Decl}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">defns-to-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-defn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-to-decls</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-defn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transparent-type-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-to-decls</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">add-module-defns-to-tenv</span></span> : <span class="texMathInline">\mathit{Listof(ModuleDefn)} \times \mathit{Tenv} \to \mathit{Tenv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">add-module-defns-to-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">module-definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-module-definition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expected-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">actual-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interface-of</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">actual-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">expected-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-module</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expected-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-module-defns-to-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-module-doesnt-satisfy-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expected-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">actual-iface</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>OPAQUE-TYPES &#30340;&#26816;&#26597;&#22120;&#65292;&#31532; 1 &#37096;&#20998;<a name="(elem._fig-8..9)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">expand-iface</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{Iface} \times \mathit{Tenv} \to \mathit{Iface}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">expand-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">iface</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">decls</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">expand-decls</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{Listof(Decl)} \times \mathit{Tenv} \to \mathit{Listof(Decl)}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">expand-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">decls</span><span class="hspace">&nbsp;</span><span class="RktSym">internal-tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">decls</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">declaration</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">opaque-type-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">t-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">expanded-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">qualified-type</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">t-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">t-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expanded-type</span><span class="hspace">&nbsp;</span><span class="RktSym">internal-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transparent-type-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">t-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expanded-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">decls</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transparent-type-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">t-name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">expanded-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">internal-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">t-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expanded-type</span><span class="hspace">&nbsp;</span><span class="RktSym">internal-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transparent-type-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">t-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expanded-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">decls</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">expanded-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">internal-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">var-name</span><span class="hspace">&nbsp;</span><span class="RktSym">expanded-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">decls</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">internal-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>OPAQUE-TYPES &#30340;&#26816;&#26597;&#22120;&#65292;&#31532; 2 &#37096;&#20998;
<a name="(idx._(gentag._1248))"></a><a name="(elem._fig-8..10)"></a></p></blockquote></blockquote><p>&#36807;&#31243; <span class="stt">expand-decls</span> &#36941;&#21382;&#22768;&#26126;&#38598;&#21512;&#65292;&#21019;&#24314;&#26032;&#30340;&#31867;&#22411;&#29615;&#22659;&#65292;&#20854;&#20013;&#30340;&#27599;&#20010;&#31867;&#22411;&#21644;&#21464;&#37327;&#21517;&#37117;
&#32465;&#23450;&#21040;&#19968;&#20010;&#23637;&#24320;&#31867;&#22411;&#12290;&#40635;&#28902;&#20043;&#22788;&#26159;&#22768;&#26126;&#36981;&#24490; <span class="stt">let*</span> &#24335;&#20316;&#29992;&#22495;&#65306;&#38598;&#21512;&#20013;&#30340;&#27599;&#20010;&#22768;&#26126;&#30340;&#20316;
&#29992;&#22495;&#21253;&#21547;&#23427;&#20043;&#21518;&#30340;&#25152;&#26377;&#22768;&#26126;&#12290;
<a name="(idx._(gentag._1249))"></a></p><p>&#35201;&#26126;&#30333;&#36825;&#24847;&#21619;&#30528;&#20160;&#20040;&#65292;&#32771;&#34385;&#27169;&#22359;&#23450;&#20041;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module m1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">transparent u = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">transparent uu = (t -&gt; u)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">% A &#22788;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">f : uu</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">...]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[...]</span></p></td></tr></table></blockquote><p>&#35201;&#28385;&#36275;&#19981;&#21464;&#24335;&#65292;&#31867;&#22411;&#29615;&#22659;&#20013;&#30340; <span class="stt">m1</span> &#24212;&#32465;&#23450;&#21040;&#21253;&#21547;&#22914;&#19979;&#22768;&#26126;&#30340;&#25509;&#21475;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[transparent t = from m1 take t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">transparent u = int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">transparent uu = (from m1 take t -&gt; int)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">f : (from m1 take t -&gt; int)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...]</span></p></td></tr></table></blockquote><p>&#21482;&#35201;&#25105;&#20204;&#36825;&#26679;&#20570;&#65292;&#19981;&#35770;&#20309;&#26102;&#25105;&#20204;&#20174;&#31867;&#22411;&#29615;&#22659;&#20013;&#26597;&#35810;&#31867;&#22411;&#26102;&#65292;&#24471;&#21040;&#30340;&#37117;&#26159;&#26399;&#26395;&#30340;&#23637;&#24320;&#31867;&#22411;&#12290;</p><p>&#22312; A &#22788;&#65292;&#32039;&#38543;&#22768;&#26126; <span class="stt">f</span> &#20043;&#21518;&#65292;&#31867;&#22411;&#29615;&#22659;&#24212;&#32465;&#23450;&#21040;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">t</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#32465;&#23450;&#21040;</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">from m1 take t</span></p></td></tr><tr><td><p><span class="stt">u</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#32465;&#23450;&#21040;</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">int</span></p></td></tr><tr><td><p><span class="stt">uu</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>&#32465;&#23450;&#21040;</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="stt">(from m1 take t -&gt; int)</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#25226;&#31867;&#20284;&#19978;&#38754; A &#22788;&#30340;&#31867;&#22411;&#29615;&#22659;&#31216;&#20026;<span class="emph">&#20869;&#37096;</span>&#31867;&#22411;&#29615;&#22659;&#12290;&#23427;&#20316;&#20026;&#21442;&#25968;&#20256;&#32473;
<span class="stt">expand-decls</span>&#12290;</p><p>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986; <span class="stt">expand-decls</span>&#12290;&#20687; <span class="stt">defns-to-decls</span>&#65292;&#36825;&#20010;&#36807;&#31243;&#21482;&#21019;&#24314;&#36879;&#26126;&#22768;
&#26126;&#65292;&#22240;&#20026;&#23427;&#30340;&#29992;&#36884;&#23601;&#26159;&#21019;&#24314;&#26597;&#35810;&#21463;&#38480;&#31867;&#22411;&#25152;&#29992;&#30340;&#25968;&#25454;&#32467;&#26500;&#12290;</p><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#20462;&#25913; <span class="stt">&lt;:-decls</span>&#65292;&#22788;&#29702;&#20004;&#31181;&#26032;&#22768;&#26126;&#12290;&#25105;&#20204;&#24517;&#39035;&#22788;&#29702;&#22768;&#26126;&#38598;&#21512;&#20869;&#37096;&#30340;&#20316;&#29992;&#22495;&#20851;
&#31995;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#25105;&#20204;&#27604;&#36739;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[transparent t = int</span></p></td></tr><tr><td><p><span class="stt">x : bool</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y : int]</span></p></td></tr><tr><td><p><span class="stt">y : t]</span></p></td></tr></table></blockquote><p>&#22788;&#29702;&#22768;&#26126; <span class="stt">y</span> &#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#30693;&#36947; <span class="stt">t</span> &#25351;&#20195; <span class="stt">int</span> &#31867;&#22411;&#12290;&#25152;&#20197;&#65292;&#24403;&#25105;&#20204;&#36882;&#24402;&#21521;&#19979;
&#22788;&#29702;&#22768;&#26126;&#21015;&#34920;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#38543;&#20043;&#25193;&#23637;&#31867;&#22411;&#29615;&#22659;&#65292;&#23601;&#20687;&#22312; <span class="stt">expand-decls</span> &#20013;&#29983;&#25104;
<span class="stt">internal-tenv</span> &#19968;&#26679;&#12290;&#25105;&#20204;&#35843;&#29992; <span class="stt">extend-tenv-with-decl</span> &#22788;&#29702;&#36825;&#20123;&#65292;&#23427;&#21462;&#19968;&#22768;
&#26126;&#65292;&#26681;&#25454;&#31867;&#22411;&#29615;&#22659;&#23558;&#20854;&#23637;&#24320;&#20026;&#36866;&#24403;&#30340;&#31867;&#22411;&#65288;&#65289;&#12290;</p></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">&lt;:-decls</span></span> : <span class="texMathInline">\mathit{Listof(Decl)} \times \mathit{Listof(Decl)} \times \mathit{Tenv} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;:-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls1</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">name1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">name1</span><span class="hspace">&nbsp;</span><span class="RktSym">name2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-decls</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-tenv-with-decl</span></span> : <span class="texMathInline">\mathit{Decl} \times \mathit{Tenv} \to \mathit{Tenv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-tenv-with-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">declaration</span><span class="hspace">&nbsp;</span><span class="RktSym">decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transparent-type-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">opaque-type-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">qualified-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh-module-name</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">%unknown</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>OPAQUE-TYPES &#30340;&#26816;&#26597;&#22120;&#65292;&#31532; 3 &#37096;&#20998;
<a name="(idx._(gentag._1250))"></a><a name="(elem._fig-8..11)"></a></p></blockquote></blockquote><p>&#22312;&#23637;&#24320;&#36807;&#31243;&#20013;&#65292;&#25105;&#20204;&#24635;&#26159;&#29992; <span class="stt">decls1</span>&#12290;&#27442;&#30693;&#20854;&#21407;&#22240;&#65292;&#32771;&#34385;&#27604;&#36739;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[transparent t = int</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt">transparent u = (t -&gt; t)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">transparent u = (t -&gt; int)</span></p></td></tr><tr><td><p><span class="stt">f : (t -&gt; u)]</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">f : (t -&gt; (int -&gt; int))]</span></p></td></tr></table></blockquote><p>&#36825;&#19968;&#27604;&#36739;&#24212;&#35813;&#36890;&#36807;&#65292;&#22240;&#20026;&#24403;&#27169;&#22359;&#20027;&#20307;&#25552;&#20379;&#24038;&#20391;&#30340;&#32465;&#23450;&#26102;&#65292;&#20063;&#26159;&#21491;&#20391;&#25509;&#21475;&#30340;&#27491;&#30830;&#23454;&#29616;&#12290;</p><p>&#27604;&#36739;&#31867;&#22411; <span class="stt">u</span> &#30340;&#20004;&#20010;&#23450;&#20041;&#26102;&#65292;&#25105;&#20204;&#24471;&#30693;&#36947;&#31867;&#22411; <span class="stt">t</span> &#23454;&#38469;&#19978;&#26159; <span class="stt">int</span>&#12290;&#21363;&#20351;&#24038;&#36793;
&#30340;&#22768;&#26126;&#27809;&#26377;&#20986;&#29616;&#22312;&#21491;&#36793;&#65292;&#21516;&#26679;&#30340;&#25216;&#24039;&#20063;&#36866;&#29992;&#65292;&#23601;&#20687;&#19978;&#38754;&#31532;&#19968;&#20010;&#20363;&#23376;&#20013;&#30340;&#22768;&#26126; <span class="stt">t</span> &#25152;&#23637;&#31034;
&#30340;&#12290;&#25105;&#20204;&#35843;&#29992; <span class="stt">expand-type</span> &#26469;&#32500;&#25345;&#19981;&#21464;&#24335;&#8220;&#31867;&#22411;&#29615;&#22659;&#20013;&#30340;&#25152;&#26377;&#31867;&#22411;&#22343;
&#24050;&#23637;&#24320;&#8221;&#12290;<span class="stt">extend-tenv-with-decl</span> &#26368;&#21518;&#19968;&#21477;&#20013;&#36873;&#20160;&#20040;&#27169;&#22359;&#21517;&#26080;&#20851;&#32039;&#35201;&#65292;
&#22240;&#20026;&#21463;&#38480;&#31867;&#22411;&#25903;&#25345;&#30340;&#21807;&#19968;&#25805;&#20316;&#26159; <span class="stt">equal?</span>&#12290;&#25152;&#20197;&#29992; <span class="stt">fresh-module-name</span> &#36275;&#20197;&#20445;&#35777;
&#36825;&#19968;&#21463;&#38480;&#31867;&#22411;&#26159;&#26032;&#29983;&#25104;&#30340;&#12290;</p><p>&#29616;&#22312;&#26469;&#22788;&#29702;&#20851;&#38190;&#38382;&#39064;&#65306;&#22914;&#20309;&#27604;&#36739;&#22768;&#26126;&#65311;&#20165;&#24403;&#20108;&#32773;&#20351;&#29992;&#30456;&#21516;&#30340;&#21517;&#23383;&#65288;&#21464;&#37327;&#25110;&#31867;&#22411;&#65289;&#26102;&#65292;&#22768;&#26126;&#25165;
&#33021;&#21305;&#37197;&#12290;&#22914;&#26524;&#19968;&#23545;&#22768;&#26126;&#21516;&#21517;&#65292;&#26377;&#22235;&#31181;&#21305;&#37197;&#26041;&#24335;&#65306;</p><ul><li><p>&#20108;&#32773;&#22343;&#20026;&#20540;&#22768;&#26126;&#65292;&#19988;&#31867;&#22411;&#21305;&#37197;&#12290;</p></li><li><p>&#20108;&#32773;&#22343;&#20026;&#27169;&#31946;&#31867;&#22411;&#22768;&#26126;&#12290;</p></li><li><p>&#20108;&#32773;&#22343;&#20026;&#36879;&#26126;&#31867;&#22411;&#22768;&#26126;&#65292;&#19988;&#23450;&#20041;&#21305;&#37197;&#12290;</p></li><li><p><span class="stt">decl1</span> &#20026;&#36879;&#26126;&#31867;&#22411;&#22768;&#26126;&#65292;<span class="stt">decl2</span> &#20026;&#27169;&#31946;&#31867;&#22411;&#22768;&#26126;&#12290;&#20363;&#22914;&#65292;&#20551;&#35774;&#26377;&#20010;&#27169;&#22359;
&#30340;&#25509;&#21475;&#22768;&#26126;&#20102; <span class="stt">opaque t</span>&#65292;&#20027;&#20307;&#20013;&#30340;&#23450;&#20041;&#20026; <span class="stt">type t = int</span>&#65292;&#24212;&#24403;&#25509;&#21463;&#36825;&#31181;&#20570;&#27861;&#12290;
&#36807;&#31243; <span class="stt">defns-to-decls</span> &#23558;&#23450;&#20041; <span class="stt">type t = int</span> &#36716;&#25442;&#20026;&#36879;&#26126;&#31867;&#22411;&#22768;&#26126;&#65292;&#25152;&#20197;
<span class="stt">add-module-defns-to-tenv</span> &#20013;&#30340;&#26465;&#20214;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">actual-iface &lt;: expected-iface</span></p></td></tr></table></blockquote><p>&#38656;&#35201;&#26816;&#26597;
<span class="texMathDisplay"><span class="stt">(transparent </span><span class="texMathInline">t</span><span class="stt"> = int)</span> &lt;: <span class="stt">(opaque </span><span class="texMathInline">t</span><span class="stt">)</span></span>
&#26159;&#21542;&#25104;&#31435;&#12290;</p><p>&#30001;&#20110;&#36825;&#19968;&#27169;&#22359;&#24212;&#34987;&#25509;&#21463;&#65292;&#35813;&#39033;&#27979;&#35797;&#24212;&#36820;&#22238;&#30495;&#12290;</p><p>&#36825;&#21578;&#35785;&#25105;&#20204;&#65292;&#31867;&#22411;&#24050;&#30693;&#30340;&#23545;&#35937;&#24635;&#33021;&#20316;&#20026;&#31867;&#22411;&#26410;&#30693;&#30340;&#23545;&#35937;&#12290;&#21453;&#20043;&#21017;&#19981;&#28982;&#12290;&#20363;&#22914;&#65292;
<span class="texMathDisplay"><span class="stt">(opaque </span><span class="texMathInline">t</span><span class="stt">)</span> &lt;: <span class="stt">(transparent </span><span class="texMathInline">t</span><span class="stt"> = int)</span></span>
&#24212;&#20026;&#20551;&#65292;&#22240;&#20026;&#27169;&#31946;&#31867;&#22411;&#20540;&#30340;&#23454;&#38469;&#31867;&#22411;&#21487;&#33021;&#19981;&#26159; <span class="stt">int</span>&#65292;&#32780;&#19988;&#28385;&#36275; <span class="stt">opaque t</span> &#30340;&#27169;
&#22359;&#21487;&#33021;&#26080;&#27861;&#28385;&#36275; <span class="stt">transparent t = int</span>&#12290;</p></li></ul><p><div class="SIntrapara">&#36825;&#26679;&#65292;&#25105;&#20204;&#23601;&#24471;&#20986; &#20013;&#30340;&#20195;&#30721;&#12290;<span class="stt">equiv-type?</span> &#30340;&#23450;&#20041;&#25193;&#23637;&#20854;&#31867;
&#22411;&#65292;&#25152;&#20197;&#65292;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;
</div><div class="SIntrapara"><blockquote class="Small"><blockquote class="SCentered"><p><span class="stt">[transparent t = int x : bool y : t] &lt;: [y : int]</span></p></blockquote></blockquote></div><div class="SIntrapara"><blockquote class="SubFlow"><p>&#20013;&#65292;&#24038;&#36793;&#30340; <span class="stt">t</span> &#23637;&#24320;&#20026; <span class="stt">int</span>&#65292;&#21305;&#37197;&#25104;&#21151;&#12290;
<a name="(idx._(gentag._1251))"></a>
<a name="(idx._(gentag._1252))"></a></p></blockquote></div></p><blockquote class="EoplExercise"><p><a name="(elem._ex8..16)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1253))"></a>
<a name="(idx._(gentag._1254))"></a>
<a name="(idx._(gentag._1255))"></a>
&#29992;ex7.24 &#20013;&#30340;&#35821;&#35328;&#25193;&#23637;&#26412;&#33410;&#30340;&#31995;&#32479;&#65292;&#28982;&#21518;&#37325;&#20889;ex8.15&#65292;
&#29992;&#22810;&#21442;&#25968;&#36807;&#31243;&#20195;&#26367;&#36820;&#22238;&#36807;&#31243;&#30340;&#36807;&#31243;&#12290;
<a name="(idx._(gentag._1256))"></a>
<a name="(idx._(gentag._1257))"></a>
<a name="(idx._(gentag._1258))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..17)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20223;&#29031;ex8.8&#65292;&#20801;&#35768;&#27169;&#22359;&#20197;&#19981;&#21516;&#20110;&#25509;&#21475;&#22768;&#26126;&#30340;&#39034;&#24207;&#20135;&#29983;&#20540;&#12290;&#20294;&#26159;&#35760;&#20303;&#65292;&#23450;&#20041;&#8212;&#8212;
&#23588;&#20854;&#26159;&#31867;&#22411;&#30340;&#23450;&#20041;&#8212;&#8212;&#24517;&#39035;&#36981;&#23432;&#23450;&#30028;&#35268;&#21017;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..18)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#20195;&#30721;&#20381;&#36182;&#30340;&#19981;&#21464;&#24335;&#26159;&#65306;&#31867;&#22411;&#29615;&#22659;&#20013;&#30340;&#25152;&#26377;&#31867;&#22411;&#22343;&#24050;&#23637;&#24320;&#12290;&#25105;&#20204;&#22312;&#20195;&#30721;&#20013;&#22810;&#27425;&#35843;&#29992;
<span class="stt">expand-type</span> &#26469;&#32500;&#25345;&#36825;&#19968;&#19981;&#21464;&#24335;&#12290;&#36825;&#23601;&#24456;&#23481;&#26131;&#22240;&#24536;&#35760;&#35843;&#29992; <span class="stt">expand-type</span> &#32780;&#30772;&#22351;
&#31995;&#32479;&#12290;&#37325;&#26500;&#20195;&#30721;&#65292;&#20943;&#23569; <span class="stt">expand-type</span> &#30340;&#35843;&#29992;&#65292;&#20197;&#20415;&#26356;&#31283;&#23450;&#22320;&#32500;&#25345;&#19981;&#21464;&#24335;&#12290;
<a name="(idx._(gentag._1259))"></a></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">&lt;:-decl</span></span> : <span class="texMathInline">\mathit{Decl} \times \mathit{Decl} \times \mathit{Tenv} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;:-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl1</span><span class="hspace">&nbsp;</span><span class="RktSym">decl2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-decl?</span><span class="hspace">&nbsp;</span><span class="RktSym">decl1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val-decl?</span><span class="hspace">&nbsp;</span><span class="RktSym">decl2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equiv-type?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;type</span><span class="hspace">&nbsp;</span><span class="RktSym">decl1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;type</span><span class="hspace">&nbsp;</span><span class="RktSym">decl2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transparent-type-decl?</span><span class="hspace">&nbsp;</span><span class="RktSym">decl1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transparent-type-decl?</span><span class="hspace">&nbsp;</span><span class="RktSym">decl2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equiv-type?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;type</span><span class="hspace">&nbsp;</span><span class="RktSym">decl1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decl-&gt;type</span><span class="hspace">&nbsp;</span><span class="RktSym">decl2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">transparent-type-decl?</span><span class="hspace">&nbsp;</span><span class="RktSym">decl1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">opaque-type-decl?</span><span class="hspace">&nbsp;</span><span class="RktSym">decl2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">opaque-type-decl?</span><span class="hspace">&nbsp;</span><span class="RktSym">decl1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">opaque-type-decl?</span><span class="hspace">&nbsp;</span><span class="RktSym">decl2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">equiv-type?</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Type} \times \mathit{Tenv} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">equiv-type?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>OPAQUE-TYPES &#30340;&#26816;&#26597;&#22120;&#65292;&#31532; 4 &#37096;&#20998;
<a name="(idx._(gentag._1260))"></a>
<a name="(idx._(gentag._1261))"></a>
<a name="(idx._(gentag._1262))"></a><a name="(elem._fig-8..12)"></a></p></blockquote></blockquote><h4 class="heading">8.3<tt>&nbsp;</tt><a name="(part._s8..3)"></a>&#27169;&#22359;&#36807;&#31243;<span class="button-group"><a href="#(part._s8..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1263))"></a>
<a name="(idx._(gentag._1264))"></a>
<a name="(idx._(gentag._1265))"></a>
<a name="(idx._(gentag._1266))"></a>
OPAQUE-TYPES &#20013;&#30340;&#31243;&#24207;&#26377;&#22266;&#23450;&#30340;&#20381;&#36182;&#20851;&#31995;&#12290;&#27169;&#22359; <span class="stt">m4</span> &#21487;&#33021;&#20381;&#36182; <span class="stt">m3</span> &#21644; <span class="stt">m2</span>&#65292;
<span class="stt">m2</span> &#20381;&#36182; <span class="stt">m1</span>&#12290;&#26377;&#26102;&#65292;&#25105;&#20204;&#35828;&#20381;&#36182;&#20851;&#31995;&#26159;<span class="emph">&#30828;&#32534;&#30721;</span> (<span class="emph">hard-coded</span>) &#30340;&#12290;&#36890;&#24120;&#65292;
&#36825;&#31181;&#30828;&#32534;&#30721;&#30340;&#20381;&#36182;&#20851;&#31995;&#20250;&#23548;&#33268;&#31967;&#31957;&#30340;&#31243;&#24207;&#35774;&#35745;&#65292;&#22240;&#20026;&#36825;&#20351;&#27169;&#22359;&#38590;&#20197;&#22797;&#29992;&#12290;&#26412;&#33410;&#65292;&#25105;&#20204;&#32473;&#31995;&#32479;
&#28155;&#21152;&#21517;&#20026;<span class="emph">&#27169;&#22359;&#36807;&#31243;</span> (<span class="emph">module procedure</span>)&#65288;&#26377;&#26102;&#21448;&#31216;<span class="emph">&#21442;&#25968;&#21270;&#27169;&#22359;</span> (<span class="emph">parameterized
module</span>)&#65289;&#30340;&#32452;&#20214;&#65292;&#20197;&#20415;&#22797;&#29992;&#27169;&#22359;&#12290;&#25105;&#20204;&#31216;&#36825;&#31181;&#26032;&#35821;&#35328;&#20026;PROC-MODULES&#12290;</p><h5 class="heading">8.3.1<tt>&nbsp;</tt><a name="(part._s8..3..1)"></a>&#20363;&#23376;<span class="button-group"><a href="#(part._s8..3..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>&#20877;&#26469;&#30475;&#25105;&#20204;&#30340;&#19977;&#20301;&#24320;&#21457;&#32773;&#12290;&#26597;&#29702;&#24819;&#29992;&#29233;&#20029;&#19997;&#27169;&#22359;&#30340;&#26576;&#20123;&#32452;&#20214;&#12290;&#20294;&#29233;&#20029;&#19997;&#30340;&#27169;&#22359;&#20351;&#29992;&#20102;&#40077;&#20271;&#27169;
&#22359;&#25552;&#20379;&#30340;&#25968;&#25454;&#24211;&#65292;&#32780;&#26597;&#29702;&#24819;&#29992;&#21478;&#19968;&#25968;&#25454;&#24211;&#65292;&#30001;&#20854;&#20182;&#27169;&#22359;&#25552;&#20379;&#65288;&#25140;&#23433;&#23068;&#25152;&#20889;&#65289;&#12290;</p><p>&#35201;&#23454;&#29616;&#36825;&#20123;&#65292;&#29233;&#20029;&#19997;&#29992;&#27169;&#22359;&#36807;&#31243;&#37325;&#20889;&#22905;&#30340;&#20195;&#30721;&#12290;&#27169;&#22359;&#36807;&#31243;&#23601;&#20687;&#36807;&#31243;&#65292;&#20294;&#23427;&#22788;&#29702;&#30340;&#26159;&#27169;&#22359;&#65292;&#32780;
&#38750;&#34920;&#36798;&#20540;&#12290;&#22312;&#27169;&#22359;&#23618;&#38754;&#19978;&#65292;&#25509;&#21475;&#23601;&#20687;&#31867;&#22411;&#12290;&#23601;&#20687; CHECKED &#20013;&#30340;&#36807;&#31243;&#31867;&#22411;&#25351;&#23450;&#21442;&#25968;&#21644;&#32467;&#26524;&#31867;
&#22411;&#65292;&#27169;&#22359;&#36807;&#31243;&#30340;&#25509;&#21475;&#25351;&#23450;&#21442;&#25968;&#30340;&#25509;&#21475;&#21644;&#32467;&#26524;&#30340;&#25509;&#21475;&#12290;</p><p>&#29233;&#20029;&#19997;&#20889;&#20986;&#26032;&#30340;&#27169;&#22359; <span class="stt">Alices-point-builder</span>&#65292;&#24320;&#22836;&#20026;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module Alices-point-builder</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((database : [opaque db-type</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">opaque node-type</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">insert-node : (node-type -&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(db-type -&gt; db-type))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">=&gt; [opaque point</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">initial-point : (int -&gt; point)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">...])</span></p></td></tr></table></blockquote><p>&#36825;&#22871;&#25509;&#21475;&#35828;&#30340;&#26159;&#65292;<span class="stt">Alices-point-builder</span> &#26159;&#19968;&#27169;&#22359;&#36807;&#31243;&#12290;&#23427;&#26399;&#26395;&#30340;&#21442;&#25968;&#26159;&#19968;&#20010;&#27169;&#22359;&#65292;
&#35813;&#27169;&#22359;&#36755;&#20986;&#20004;&#20010;&#31867;&#22411;&#65292;<span class="stt">db-type</span> &#21644; <span class="stt">node-type</span>&#65292;&#19968;&#20010;&#36807;&#31243;&#65292;<span class="stt">insert-node</span>&#65292;
&#21487;&#33021;&#36824;&#26377;&#20854;&#20182;&#19968;&#20123;&#20540;&#12290;&#32473;&#23450;&#36825;&#20010;&#27169;&#22359;&#65292;<span class="stt">Alices-point-builder</span> &#24212;&#29983;&#25104;&#19968;&#20010;&#27169;&#22359;&#65292;&#29983;&#25104;
&#30340;&#27169;&#22359;&#36755;&#20986;&#27169;&#31946;&#31867;&#22411; <span class="stt">point</span>&#65292;&#36807;&#31243; <span class="stt">initial-point</span>&#65292;&#36824;&#21487;&#33021;&#26377;&#20854;&#20182;&#19968;&#20123;&#20540;&#12290;
<span class="stt">Alices-point-builder</span> &#30340;&#25509;&#21475;&#36824;&#25351;&#23450;&#20102;&#21442;&#25968;&#30340;&#23616;&#37096;&#21517;&#31216;&#65307;&#31245;&#21518;&#25105;&#20204;&#23558;&#30475;&#21040;&#20026;&#20309;&#38656;&#35201;&#23427;&#12290;</p><p>&#29233;&#20029;&#19997;&#30340;&#26032;&#27169;&#22359;&#20027;&#20307;&#24320;&#22836;&#20026;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">module-proc (m : [opaque db-type</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">opaque node-type</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">insert-node : (node-type -&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(db-type -&gt; db-type))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">...])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[type point = ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">initial-point = ... from m take insert-node ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">...]</span></p></td></tr></table></blockquote><p>&#23601;&#20687;&#19968;&#33324;&#30340;&#36807;&#31243;&#34920;&#36798;&#24335;&#24418;&#22914;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">proc (</span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: </span><span class="texMathInline">t</span><span class="stt">) </span><span class="texMathInline">e</span></p></td></tr></table></blockquote><p>&#27169;&#22359;&#36807;&#31243;&#24418;&#22914;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module-proc (</span><span class="texMathInline">m</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">: [...]) [...]</span></p></td></tr></table></blockquote></blockquote><p>&#26412;&#20363;&#20013;&#65292;&#29233;&#20029;&#19997;&#36873;&#25321; <span class="stt">m</span> &#20316;&#20026;&#27169;&#22359;&#36807;&#31243;&#20013;&#32465;&#23450;&#21464;&#37327;&#30340;&#21517;&#23383;&#65307;&#23427;&#19981;&#24517;&#21644;&#25509;&#21475;&#20013;&#30340;&#23616;&#37096;&#21517;&#23383;
&#30456;&#21516;&#12290;&#25105;&#20204;&#38656;&#35201;&#20877;&#20889;&#19968;&#36941;&#21442;&#25968;&#30340;&#25509;&#21475;&#65292;&#22240;&#20026;&#27169;&#22359;&#25509;&#21475;&#30340;&#20316;&#29992;&#22495;&#19981;&#21253;&#21547;&#27169;&#22359;&#20027;&#20307;&#12290;&#21487;&#20197;&#20813;&#38500;&#36825;
&#19968;&#38480;&#21046;&#65288;&#35265;ex8.27&#65289;&#12290;</p><p>&#29616;&#22312;&#65292;&#29233;&#20029;&#19997;&#25226;&#22905;&#30340;&#27169;&#22359;&#37325;&#20889;&#20026;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module Alices-points</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque point</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">initial-point : (int -&gt; point)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">...]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(Alices-point-builder Bobs-db-module)</span></p></td></tr></table></blockquote><p>&#26597;&#29702;&#30340;&#27169;&#22359;&#20889;&#25104;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module Charlies-points</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque point</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">initial-point : (int -&gt; point)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">...]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(Alices-point-builder Dianas-db-module)</span></p></td></tr></table></blockquote></blockquote><p>&#27169;&#22359; <span class="stt">Alices-points</span> &#20351;&#29992; <span class="stt">Bobs-db-module</span> &#22788;&#29702;&#25968;&#25454;&#24211;&#12290;&#27169;&#22359;
<span class="stt">Charlies-points</span> &#20351;&#29992; <span class="stt">Dianas-db-module</span> &#22788;&#29702;&#25968;&#25454;&#24211;&#12290;&#36825;&#26679;&#32452;&#32455;&#21487;&#20197;&#22797;&#29992;
<span class="stt">Alices-point-builder</span> &#20013;&#30340;&#20195;&#30721;&#12290;&#36825;&#19981;&#20165;&#36991;&#20813;&#20102;&#20889;&#20004;&#27425;&#21516;&#26679;&#30340;&#20195;&#30721;&#65292;&#32780;&#19988;&#65292;&#22312;&#20195;&#30721;&#38656;
&#35201;&#21464;&#21160;&#26102;&#65292;&#21487;&#20197;&#21482;&#25913;&#19968;&#22788;&#65292;&#33258;&#21160;&#20256;&#25773;&#21040; <span class="stt">Alices-point</span> &#21644; <span class="stt">Charlies-points</span> &#20013;&#12290;</p><p>&#21478;&#19968;&#20010;&#20363;&#23376;&#65292;&#32771;&#34385; &#21644;&#12290;&#22312;&#36825;&#20004;&#20010;&#20363;&#23376;&#20013;&#65292;
&#25105;&#20204;&#29992;&#22522;&#26412;&#30456;&#21516;&#30340;&#20195;&#30721;&#20889; <span class="stt">to-int</span>&#12290;&#22312; &#20013;&#23427;&#26159;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec int to-int (x : from ints1 take t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if (z? x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((to-int (p x)), -1)</span></p></td></tr></table></blockquote><p>&#22312; &#20013;&#65292;<span class="stt">x</span> &#30340;&#31867;&#22411;&#26159; <span class="stt">from ints2 take t</span>&#12290;&#25152;&#20197;&#25105;&#20204;&#37325;&#20889;
&#20026;&#21442;&#25968;&#21270;&#30340;&#27169;&#22359;&#65292;&#21442;&#25968;&#27169;&#22359;&#20135;&#29983;&#25152;&#38656;&#30340;&#25972;&#25968;&#12290;</p></blockquote><blockquote class="EoplExample"><p><a name="(elem._eg-8..14)"></a>&#22768;&#26126;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module to-int-maker</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((ints : [opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">=&gt; [to-int : (from ints take t -&gt; int)])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">module-proc (ints : [opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">[to-int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= let z? = from ints take is-zero</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let p = from ints take pred</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in letrec int to-int (x : from ints take t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if (z? x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((to-int (p x)), -1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in to-int]</span></p></td></tr></table></blockquote><p>&#23450;&#20041;&#20102;&#19968;&#20010;&#27169;&#22359;&#36807;&#31243;&#12290;&#36825;&#22871;&#25509;&#21475;&#35828;&#30340;&#26159;&#65292;&#35813;&#27169;&#22359;&#21462;&#27169;&#22359; <span class="stt">ints</span>&#65292;&#29983;&#25104;&#21478;&#19968;&#27169;&#22359;&#65307;
<span class="stt">ints</span> &#23454;&#29616;&#31639;&#26415;&#25805;&#20316;&#30340;&#25509;&#21475;&#65292;&#29983;&#25104;&#30340;&#27169;&#22359;&#36755;&#20986;&#36807;&#31243; <span class="stt">to-int</span>&#65292;&#23558; <span class="stt">ints</span> &#20013;&#30340;
&#31867;&#22411; <span class="stt">t</span> &#36716;&#25442;&#20026;&#25972;&#25968;&#12290;&#24471;&#20986;&#30340;&#36807;&#31243; <span class="stt">to-int</span> &#19981;&#33021;&#20381;&#36182;&#31639;&#26415;&#25805;&#20316;&#30340;&#23454;&#29616;&#65292;&#22240;&#20026;&#25105;&#20204;
&#26681;&#26412;&#19981;&#30693;&#36947;&#23454;&#29616;&#26159;&#20160;&#20040;&#65281;&#36825;&#27573;&#20195;&#30721;&#20013;&#65292;<span class="stt">ints</span> &#22768;&#26126;&#20102;&#20004;&#27425;&#65306;&#19968;&#27425;&#22312;&#25509;&#21475;&#20013;&#65292;&#19968;&#27425;&#22312;&#20027;&#20307;
&#20013;&#12290;&#20687;&#25105;&#20204;&#20043;&#21069;&#35828;&#30340;&#65292;&#36825;&#26159;&#22240;&#20026;&#25509;&#21475;&#22768;&#26126;&#30340;&#20316;&#29992;&#22495;&#21482;&#38480;&#20110;&#25509;&#21475;&#65292;&#19981;&#21253;&#21547;&#27169;&#22359;&#20027;&#20307;&#12290;</p></blockquote></blockquote><p>&#25105;&#20204;&#20877;&#26469;&#30475;&#20351;&#29992; <span class="stt">to-int</span> &#30340;&#19968;&#20123;&#20363;&#23376;&#65306;</p><blockquote class="EoplExample"><p><div class="SIntrapara"><a name="(elem._eg-8..15)"></a>
</div><div class="SIntrapara"><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module to-int-maker </span><span class="emph">...&#21516;&#21069;...</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">module ints1 </span><span class="emph">...&#21516;&#21069;...</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">module ints1-to-int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface [to-int : (from ints1 take t -&gt; int)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(to-int-maker ints1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let two1 = (from ints1 take succ</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(from ints1 take succ</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">from ints1 take zero))</span></p></td></tr><tr><td><p><span class="stt">in (from ints1-to-int take to-int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">two1)</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#20026; <span class="stt">int</span>&#65292;&#20540;&#20026; 2&#12290;&#22240;&#20026;&#25105;&#20204;&#39318;&#20808;&#23450;&#20041;&#20102;&#27169;&#22359; <span class="stt">to-int-maker</span> &#21644; <span class="stt">ints1</span>&#12290;
&#28982;&#21518;&#25105;&#20204;&#29992; <span class="stt">ints1</span> &#35843;&#29992; <span class="stt">to-int-maker</span>&#65292;&#24471;&#21040;&#27169;&#22359; <span class="stt">ints1-to-int</span>&#65292;&#23427;&#36755;&#20986;
&#32465;&#23450; <span class="stt">from ints1-to-int take to-int</span>&#12290;</p></blockquote></div></p></blockquote><p>&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#20004;&#27425;&#20351;&#29992; <span class="stt">to-int-maker</span>&#65292;&#22788;&#29702;&#20004;&#31181;&#19981;&#21516;&#30340;&#31639;&#26415;&#25805;&#20316;&#23454;&#29616;&#12290;</p><blockquote class="EoplExample"><p><div class="SIntrapara"><a name="(elem._eg-8..16)"></a>
</div><div class="SIntrapara"><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module to-int-maker </span><span class="emph">...&#21516;&#21069;...</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">module ints1 </span><span class="emph">...&#21516;&#21069;...</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">module ints2 </span><span class="emph">...&#21516;&#21069;...</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">module ints1-to-int</span></p></td></tr><tr><td><p><span class="stt">interface [to-int : (from ints1 take t -&gt; int)]</span></p></td></tr><tr><td><p><span class="stt">body (to-int-maker ints1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">module ints2-to-int</span></p></td></tr><tr><td><p><span class="stt">interface [to-int : (from ints2 take t -&gt; int)]</span></p></td></tr><tr><td><p><span class="stt">body (to-int-maker ints2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let s1 = from ints1 take succ</span></p></td></tr><tr><td><p><span class="stt">in let z1 = from ints1 take zero</span></p></td></tr><tr><td><p><span class="stt">in let to-ints1 = from ints1-to-int take to-int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">in let s2 = from ints2 take succ</span></p></td></tr><tr><td><p><span class="stt">in let z2 = from ints2 take zero</span></p></td></tr><tr><td><p><span class="stt">in let to-ints2 = from ints2-to-int take to-int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">in let two1 = (s1 (s1 z1))</span></p></td></tr><tr><td><p><span class="stt">in let two2 = (s2 (s2 z2))</span></p></td></tr><tr><td><p><span class="stt">in -((to-ints1 two1), (to-ints2 two2))</span></p></td></tr></table></blockquote><p>&#31867;&#22411;&#20026; <span class="stt">int</span>&#65292;&#20540;&#20026; 0&#12290;&#22914;&#26524;&#25105;&#20204;&#23558; <span class="stt">(to-ints2 two2)</span> &#26367;&#25442;&#20026; <span class="stt">(to-ints2
two1)</span>&#65292;&#21017;&#31243;&#24207;&#31867;&#22411;&#24322;&#24120;&#65292;&#22240;&#20026; <span class="stt">to-ints2</span> &#26399;&#26395;&#30340;&#21442;&#25968;&#31867;&#22411;&#26159; <span class="stt">int2</span> &#34920;&#31034;&#30340;&#31639;&#26415;
&#25805;&#20316;&#65292;&#20294;&#20540; <span class="stt">two1</span> &#30340;&#31867;&#22411;&#26159; <span class="stt">int1</span> &#34920;&#31034;&#30340;&#31639;&#26415;&#25805;&#20316;&#12290;</p></blockquote></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..19)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span> &#20013;&#65292;&#21019;&#24314; <span class="stt">two1</span> &#21644; <span class="stt">two2</span> &#30340;&#20195;&#30721;&#37325;&#22797;&#65292;&#22240;&#27492;&#21487;&#20197;&#25277;&#35937;&#20986;
&#26469;&#12290;&#23436;&#25104;&#27169;&#22359;&#23450;&#20041;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module from-int-maker</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((ints : [opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">=&gt; [from-int : (int -&gt; from ints take t)])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">...</span></p></td></tr></table></blockquote><p>&#29992;&#27169;&#22359; <span class="stt">ints</span>&#34920;&#31034;&#25972;&#25968;&#34920;&#36798;&#20540;&#12290;&#29992;&#20320;&#30340;&#27169;&#22359;&#37325;&#20570; &#20013;&#30340;&#35745;&#31639;&#12290;&#29992;
&#22823;&#20110; 2 &#30340;&#21442;&#25968;&#27979;&#35797;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..20)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1267))"></a>
&#23436;&#25104;&#27169;&#22359;&#23450;&#20041;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module sum-prod-maker</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((ints : [opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">=&gt; [plus : (from ints take t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-&gt; (from ints take t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-&gt; from ints take t))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">times : (from ints take t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-&gt; (from ints take t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-&gt; from ints take t))])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[plus = ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">times = ...]</span></p></td></tr></table></blockquote><p>&#23450;&#20041;&#19968;&#20010;&#27169;&#22359;&#36807;&#31243;&#65292;&#23427;&#21462;&#19968;&#31639;&#26415;&#25805;&#20316;&#30340;&#23454;&#29616;&#65292;&#29983;&#25104;&#29992;&#36825;&#31181;&#23454;&#29616;&#30340;&#27714;&#21644;&#21644;&#27714;&#31215;&#30340;&#36807;&#31243;&#12290;&#29992;
plus&#20013;&#30340; <span class="stt">plus</span> &#23450;&#20041;&#65292;&#20197;&#21450;&#31867;&#20284;&#30340; <span class="stt">times</span> &#23450;&#20041;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..21)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#19968;&#20010;&#27169;&#22359;&#36807;&#31243;&#65292;&#21462;&#31639;&#26415;&#25805;&#20316;&#30340;&#23454;&#29616; <span class="stt">ints</span>&#65292;&#36820;&#22238;&#31639;&#26415;&#25805;&#20316;&#30340;&#21478;&#19968;&#31181;&#23454;&#29616;&#65292;&#20854;&#20013;&#65292;&#25972;&#25968;
<span class="texMathInline">k</span> &#20197; <span class="stt">ints</span> &#20013;&#30340; <span class="texMathInline">2*k</span> &#34920;&#31034;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..22)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#23436;&#25104;&#27169;&#22359;&#23450;&#20041;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module equality-maker</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((ints : [opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">=&gt; [equal : (from ints take t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-&gt; (from ints take t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-&gt; bool))])</span></p></td></tr><tr><td><p><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">...</span></p></td></tr></table></blockquote><p>&#23450;&#20041;&#19968;&#20010;&#27169;&#22359;&#36807;&#31243;&#65292;&#23427;&#21462;&#19968;&#31639;&#26415;&#25805;&#20316;&#30340;&#23454;&#29616;&#65292;&#29983;&#25104;&#19968;&#36807;&#31243;&#65292;&#29992;&#36825;&#31181;&#23454;&#29616;&#20570;&#30456;&#31561;&#27604;&#36739;&#12290;
<a name="(idx._(gentag._1268))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..23)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1269))"></a>
&#20889;&#20986;&#27169;&#22359; <span class="stt">table-of</span>&#65292;&#23427;&#19982;ex8.15 &#20013;&#30340; <span class="stt">table</span> &#27169;&#22359;&#31867;&#20284;&#65292;&#21482;&#26159;
&#23558;&#34920;&#30340;&#20869;&#23481;&#21442;&#25968;&#21270;&#65292;&#36825;&#26679;&#23601;&#33021;&#29992;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">module mybool-tables</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[opaque table</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">empty : table</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">add-to-table : (int -&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(from mybool take t -&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(table -&gt; table)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">lookup-in-table : (int -&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(table -&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">from mybool take t))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(table-of mybool)</span></p></td></tr></table></blockquote><p>&#23450;&#20041;&#21253;&#21547; <span class="stt">from mybool take t</span> &#31867;&#22411;&#20540;&#30340;&#34920;&#12290;
<a name="(idx._(gentag._1270))"></a></p></blockquote><h5 class="heading">8.3.2<tt>&nbsp;</tt><a name="(part._s8..3..2)"></a>&#23454;&#29616;<span class="button-group"><a href="#(part._s8..3..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><h5 class="heading"><a name="(part._s8..3-syntax)"></a>&#35821;&#27861;<span class="button-group"><a href="#(part._s8..3-syntax)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1271))"></a>
&#32473;&#25105;&#20204;&#30340;&#35821;&#35328;&#28155;&#21152;&#27169;&#22359;&#36807;&#31243;&#23601;&#20687;&#28155;&#21152;&#36807;&#31243;&#19968;&#26679;&#12290;&#27169;&#22359;&#36807;&#31243;&#30340;&#25509;&#21475;&#24456;&#20687; <span class="stt">proc</span> &#30340;&#31867;&#22411;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}   \mathit{Iface} &amp;::= <span class="stt">((</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> : </span><span class="Iidentity">\mathit{Iface}</span><span class="stt">)) =&gt; </span><span class="Iidentity">\mathit{Iface}</span> \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">proc-iface (param-name param-iface result-iface)</span>}\end{align*}</span></p></blockquote><p>&#34429;&#28982;&#36825;&#22871;&#25509;&#21475;&#30475;&#36215;&#26469;&#20687;&#26159;&#26222;&#36890;&#30340;&#36807;&#31243;&#31867;&#22411;&#65292;&#23427;&#36824;&#26159;&#26377;&#20004;&#22788;&#21306;&#21035;&#12290;&#39318;&#20808;&#65292;&#23427;&#25551;&#36848;&#20102;&#27169;&#22359;&#20540;&#21040;&#27169;
&#22359;&#20540;&#30340;&#20989;&#25968;&#65292;&#32780;&#38750;&#34920;&#36798;&#20540;&#21040;&#34920;&#36798;&#20540;&#30340;&#20989;&#25968;&#12290;&#20854;&#27425;&#65292;&#19981;&#20687;&#36807;&#31243;&#31867;&#22411;&#65292;&#23427;&#35201;&#32473;&#20989;&#25968;&#30340;&#36755;&#20837;&#21629;&#21517;&#12290;
&#36825;&#26159;&#24517;&#39035;&#30340;&#65292;&#22240;&#20026;&#36755;&#20986;&#30340;&#25509;&#21475;&#21487;&#33021;&#20381;&#36182;&#36755;&#20837;&#30340;&#20540;&#65292;&#23601;&#20687; <span class="stt">to-int-maker</span> &#30340;&#31867;&#22411;&#37027;&#26679;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">((ints : [opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">=&gt; [to-int : (from ints take t -&gt; int)])</span></p></td></tr></table></blockquote><p><span class="stt">to-int-maker</span> &#21462;&#19968;&#27169;&#22359; <span class="stt">ints</span>&#65292;&#29983;&#25104;&#19968;&#27169;&#22359;&#65292;&#20854;&#31867;&#22411;&#19981;&#20165;&#20381;&#36182; <span class="stt">ints</span> &#20013;&#30340;
&#22266;&#23450;&#31867;&#22411;&#65292;&#20063;&#20381;&#36182; <span class="stt">ints</span> &#26412;&#36523;&#12290;<a name="(elem._module-proc-eg)"></a>&#24403;&#25105;&#20204;
&#20687; &#37027;&#26679;&#29992; <span class="stt">ints1</span> &#35843;&#29992; <span class="stt">to-int-maker</span> &#26102;&#65292;&#24471;&#21040;&#30340;&#27169;&#22359;
&#25509;&#21475;&#26159;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[to-int : (from ints1 take t -&gt; int)]</span></p></td></tr></table></blockquote><p>&#32780;&#24403;&#25105;&#20204;&#29992; <span class="stt">ints2</span> &#35843;&#29992;&#26102;&#65292;&#24471;&#21040;&#30340;&#26159;&#21478;&#19968;&#20010;&#25509;&#21475;</p><p><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[to-int : (from ints2 take t -&gt; int)]</span></p></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1272))"></a></div></p></blockquote><p>&#25105;&#20204;&#25193;&#23637; <span class="stt">expand-iface</span> &#26469;&#22788;&#29702;&#36825;&#20123;&#26032;&#25509;&#21475;&#65292;&#24182;&#25353;&#24050;&#23637;&#24320;&#22788;&#29702;&#12290;&#36825;&#26679;&#34892;&#24471;&#36890;&#26159;&#22240;&#20026;&#21442;
&#25968;&#25509;&#21475;&#21644;&#32467;&#26524;&#25509;&#21475;&#22312;&#38656;&#35201;&#26102;&#33258;&#20250;&#23637;&#24320;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">expand-iface</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{Iface} \times \mathit{Tenv} \to \mathit{Iface}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">expand-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">iface</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="emph">...&#21516;&#21069;...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param-name</span><span class="hspace">&nbsp;</span><span class="RktSym">param-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">result-iface</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">iface</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._1273))"></a>
<a name="(idx._(gentag._1274))"></a>
&#25105;&#20204;&#38656;&#35201;&#26032;&#30340;&#27169;&#22359;&#20027;&#20307;&#26469;&#21019;&#24314;&#27169;&#22359;&#36807;&#31243;&#65292;&#24341;&#29992;&#27169;&#22359;&#36807;&#31243;&#30340;&#32465;&#23450;&#21464;&#37327;&#65292;&#20197;&#21450;&#35843;&#29992;&#27169;&#22359;&#36807;&#31243;&#12290;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{ModuleBody} &amp;::= <span class="stt">module-proc (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> : </span><span class="Iidentity">\mathit{Iface}</span><span class="stt">) </span><span class="Iidentity">\mathit{ModuleBody}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">proc-module-body (m-name m-type m-body)</span>} \\[-5pt]
\mathit{ModuleBody} &amp;::= \mathit{Identifier} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">var-module-body (m-name)</span>} \\[-5pt]
\mathit{ModuleBody} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">app-module-body (rator rand)</span>}\end{align*}</span></p></blockquote><h5 class="heading"><a name="(part._s8..3-interpreter)"></a>&#35299;&#37322;&#22120;<span class="button-group"><a href="#(part._s8..3-interpreter)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1275))"></a>
&#39318;&#20808;&#65292;&#31867;&#20284;&#36807;&#31243;&#65292;&#25105;&#20204;&#26032;&#22686;&#19968;&#31181;&#27169;&#22359;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">typed-module</span><span class="hspace">&nbsp;</span><span class="RktSym">typed-module?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bindings</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">module-body?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25105;&#20204;&#25193;&#23637; <span class="stt">value-of-module-body</span> &#22788;&#29702;&#26032;&#30340;&#27169;&#22359;&#20027;&#20307;&#12290;&#20195;&#30721;&#19982;&#34920;&#36798;&#24335;&#20013;&#30340;&#21464;&#37327;&#24341;&#29992;&#21644;
&#36807;&#31243;&#35843;&#29992;&#21313;&#20998;&#31867;&#20284;&#65288;&#65289;&#12290;
<a name="(idx._(gentag._1276))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-module-body</span></span> : <span class="texMathInline">\mathit{ModuleBody} \times \mathit{Env} \to \mathit{TypedModule}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-module-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">module-body</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...as</span><span class="hspace">&nbsp;</span><span class="RktSym">before...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-module-name-in-env</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">m-type</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-module</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">rator-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-module-name-in-env</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-module-name-in-env</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">typed-module</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-module</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-module-body</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-with-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-val</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-bad-module-app</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p><span class="stt">value-of-module-body</span><a name="(elem._fig-8..13)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1277))"></a></div></p></blockquote><h5 class="heading"><a name="(part._s8..3-checker)"></a>&#26816;&#26597;&#22120;<span class="button-group"><a href="#(part._s8..3-checker)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><div class="SIntrapara"><a name="(idx._(gentag._1278))"></a>
<a name="(idx._(gentag._1279))"></a>
</div><div class="SIntrapara"><blockquote class="EoplFigure"><p>[!ht]<span class="texMathDisplay">\begin{array}{l}
 \small{\textrm{IFACE-M-VAR}} \\
 <span class="stt">(</span><span class="texMathInline">\rhd</span><span class="stt"> </span><span class="texMathInline">m</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">)</span> = tenv<span class="stt">(</span><span class="texMathInline">m</span><span class="stt">)</span>
\end{array}</span></p><p><span class="texMathDisplay">\begin{array}{l}
 \small{\textrm{IFACE-M-PROC}} \\
 \infer{<span class="stt">(</span><span class="texMathInline">\rhd</span><span class="stt"> (m-proc (</span><span class="texMathInline">m</span><span class="stt">:</span><span class="texMathInline">i_1</span><span class="stt">) </span><span class="texMathInline">body</span><span class="stt">))</span> = <span class="stt">((</span><span class="texMathInline">m</span><span class="stt">:</span><span class="texMathInline">i_1</span><span class="stt">) =&gt; </span><span class="texMathInline">i^{\prime}_{1}</span><span class="stt">)</span>}
       {<span class="stt">(</span><span class="texMathInline">\rhd</span><span class="stt"> body [</span><span class="texMathInline">m</span><span class="stt">=</span><span class="texMathInline">i_1</span><span class="stt">]tenv)</span> = i^{\prime}}
\end{array}</span></p><p><span class="texMathDisplay">\begin{array}{l}
 \small{\textrm{IFACE-M-APP}} \\
 \infer{<span class="stt">(</span><span class="texMathInline">\rhd</span><span class="stt"> (</span><span class="texMathInline">m_1</span><span class="stt"> </span><span class="texMathInline">m_2</span><span class="stt">) tenv)</span> = <span class="stt">i((</span><span class="texMathInline">m</span><span class="stt">:</span><span class="texMathInline">i_1</span><span class="stt">) =&gt; </span><span class="texMathInline">i^{\prime}_{1}</span><span class="stt">)</span>}
       {\begin{array}{c}
         tenv(m_1) = <span class="stt">((</span><span class="texMathInline">m</span><span class="stt">:</span><span class="texMathInline">i_1</span><span class="stt">) =&gt; </span><span class="texMathInline">i^{\prime}_{1}</span><span class="stt">)</span> \quad tenv(<span class="texMathInline">m_2</span>) = <span class="texMathInline">i_2</span> \\
         i_2 &lt;: i_1
        \end{array}}
\end{array}</span></p><blockquote class="caption"><p>&#26032;&#27169;&#22359;&#20027;&#20307;&#30340;&#21028;&#31867;&#35268;&#21017;<a name="(elem._fig-8..14)"></a></p></blockquote></blockquote></div></p><p>&#25105;&#20204;&#21487;&#20197;&#32473;&#26032;&#30340;&#27169;&#22359;&#20027;&#20307;&#20889;&#20986;<a href="#%28part._s7..2%29" data-pltdoc="x">&#36171;&#20104;&#34920;&#36798;&#20540;&#31867;&#22411;</a>&#37027;&#26679;&#30340;&#35268;&#21017;&#12290;&#36825;&#20123;&#35268;&#21017;
&#22914; &#25152;&#31034;&#12290;&#20026;&#20102;&#33021;&#22312;&#19968;&#39029;&#32440;&#20869;&#20889;&#19979;&#35268;&#21017;&#65292;&#25105;&#20204;&#29992; <span class="stt">(</span><span class="texMathInline">\rhd</span><span class="stt">
</span><span class="texMathInline">body</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">i</span> &#20195;&#26367; <span class="stt">(interface-of </span><span class="texMathInline">body</span><span class="stt"> </span><span class="texMathInline">tenv</span><span class="stt">) = </span><span class="texMathInline">i</span>&#12290;</p><p>&#27491;&#22914;&#39044;&#24819;&#30340;&#37027;&#26679;&#65292;&#27169;&#22359;&#21464;&#37327;&#30340;&#31867;&#22411;&#20174;&#31867;&#22411;&#29615;&#22659;&#20013;&#21462;&#24471;&#12290;&#23601;&#20687; CHECKED &#20013;&#30340;&#36807;&#31243;&#37027;&#26679;&#65292;
<span class="stt">module-proc</span> &#30340;&#31867;&#22411;&#26681;&#25454;&#21442;&#25968;&#31867;&#22411;&#21644;&#20027;&#20307;&#31867;&#22411;&#24471;&#21040;&#12290;</p><p>&#27169;&#22359;&#36807;&#31243;&#30340;&#35843;&#29992;&#24456;&#20687; CHECKED &#20013;&#30340;&#36807;&#31243;&#35843;&#29992;&#65292;&#20294;&#26377;&#20004;&#20010;&#37325;&#35201;&#21306;&#21035;&#12290;</p><p>&#39318;&#20808;&#65292;&#25805;&#20316;&#25968;&#30340;&#31867;&#22411;&#65288;&#35268;&#21017; IFACE-M-APP &#20013;&#30340; <span class="texMathInline">i_2</span>&#65289;&#19981;&#24517;&#19982;&#21442;&#25968;&#31867;&#22411; (<span class="texMathInline">i_1</span>) &#30456;&#21516;&#12290;
&#25105;&#20204;&#21482;&#35201;&#27714; <span class="texMathInline">i_2 &lt;: i_1</span>&#12290;&#36825;&#23601;&#22815;&#20102;&#65292;&#22240;&#20026; <span class="texMathInline">i_2 &lt;: i_1</span> &#24847;&#21619;&#30528;&#28385;&#36275;&#25509;&#21475; <span class="texMathInline">i_2</span>
&#30340;&#20219;&#24847;&#27169;&#22359;&#37117;&#28385;&#36275;&#25509;&#21475; <span class="texMathInline">i_1</span>&#65292;&#20063;&#23601;&#33021;&#20316;&#20026;&#27169;&#22359;&#36807;&#31243;&#30340;&#21442;&#25968;&#12290;</p><p>&#20854;&#27425;&#65292;&#22312;&#32467;&#26524;&#31867;&#22411; <span class="texMathInline">t^{\prime}_{1}</span> &#20013;&#65292;&#25105;&#20204;&#25226; <span class="texMathInline">m</span> &#20195;&#25442;&#20026;&#25805;&#20316;&#25968; <span class="texMathInline">m_2</span>&#12290;&#32771;&#34385;
module-proc-eg&#30340;&#20363;&#23376;&#12290;&#20854;&#20013;&#65292;&#25105;&#20204;&#29992; <span class="stt">ints1</span> &#21644; <span class="stt">ints2</span> &#35843;&#29992;&#27169;&#22359;&#36807;
&#31243; <span class="stt">to-int-maker</span>&#65292;&#20854;&#25509;&#21475;&#20026;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">((ints : [opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">=&gt; [to-int : (from ints take t -&gt; int)])</span></p></td></tr></table></blockquote><p>&#24403;&#25105;&#20204;&#29992; <span class="stt">ints1</span> &#35843;&#29992; <span class="stt">to-int-maker</span>&#65292;&#20195;&#25442;&#32780;&#24471;&#30340;&#25509;&#21475;&#20026;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[to-int : (from ints1 take t -&gt; int)]</span></p></td></tr></table></blockquote><p>&#24403;&#25105;&#20204;&#29992; <span class="stt">ints2</span> &#35843;&#29992; <span class="stt">to-int-maker</span>&#65292;&#20195;&#25442;&#32780;&#24471;&#30340;&#25509;&#21475;&#20026;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[to-int : (from ints2 take t -&gt; int)]</span></p></td></tr></table></blockquote><p>&#27491;&#21512;&#26399;&#26395;&#12290;</p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">interface-of</span></span> : <span class="texMathInline">\mathit{ModuleBody} \times \mathit{Tenv} \to \mathit{Iface}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">interface-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-body</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">module-body</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-module-name-in-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">defns-to-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">defns</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator-id</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-id</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">rator-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-module-name-in-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-id</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-module-name-in-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-id</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-attempt-to-apply-simple-module</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-id</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param-name</span><span class="hspace">&nbsp;</span><span class="RktSym">param-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">result-iface</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">param-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rename-in-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">result-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">param-name</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-id</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-bad-module-application-error</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">param-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-module-body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand-name</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">body-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interface-of</span><span class="hspace">&nbsp;</span><span class="RktSym">m-body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-module</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-name</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-name</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">body-iface</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>PROC-MODULES&#30340;&#26816;&#26597;&#22120;&#65292;&#31532;1&#37096;&#20998;
<a name="(idx._(gentag._1280))"></a>
<a name="(idx._(gentag._1281))"></a>
<a name="(idx._(gentag._1282))"></a><a name="(elem._fig-8..15)"></a></p></blockquote></blockquote><p>&#29992;&#36825;&#20123;&#35268;&#21017;&#65292;&#24456;&#23481;&#26131;&#20889;&#20986; <span class="stt">interface-of</span> &#30340;&#20195;&#30721;&#65288;&#65289;&#12290;&#24403;&#25105;&#20204;
&#26816;&#26597; <span class="stt">module-proc</span> &#30340;&#20027;&#20307;&#26102;&#65292;&#25105;&#20204;&#25226;&#21442;&#25968;&#28155;&#21152;&#21040;&#31867;&#22411;&#29615;&#22659;&#20013;&#65292;&#23601;&#22909;&#20687;&#23427;&#26159;&#20301;&#20110;&#39030;&#23618;&#30340;
&#27169;&#22359;&#12290;&#36825;&#27573;&#20195;&#30721;&#29992;&#36807;&#31243; <span class="stt">rename-in-iface</span> &#23545;&#24471;&#21040;&#30340;&#25509;&#21475;&#36827;&#34892;&#20195;&#25442;&#12290;</p><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#25193;&#23637; <span class="stt">&lt;:-iface</span>&#65292;&#22788;&#29702;&#26032;&#30340;&#31867;&#22411;&#12290;&#29992;&#26469;&#27604;&#36739; <span class="stt">proc-iface</span> &#30340;&#35268;&#21017;&#20026;</p><blockquote class="Small"><p><span class="texMathDisplay">\infer{<span class="stt">((</span><span class="texMathInline">m_1</span><span class="stt"> : </span><span class="texMathInline">i_1</span><span class="stt">) =&gt; </span><span class="texMathInline">i^{\prime}_{1}</span><span class="stt">)</span> &lt;: <span class="stt">((</span><span class="texMathInline">m_2</span><span class="stt"> : </span><span class="texMathInline">i_2</span><span class="stt">) =&gt; </span><span class="texMathInline">i^{\prime}_{2}</span><span class="stt">)</span>}
      {i_2 &lt;: i_1 &amp;
       i^{\prime}_{1}<span class="stt">[</span><span class="texMathInline">m^{\prime}/m_{1}</span><span class="stt">]</span> &lt;: i^{\prime}_{2}<span class="stt">[</span><span class="texMathInline">m^{\prime}/m_{2}</span><span class="stt">]</span> &amp;
       m^{\prime} &#19981;&#22312; i^{\prime}_{1} &#25110; i^{\prime}_{2} &#20013;}</span></p></blockquote><p>&#35201;&#20351; <span class="stt">((</span><span class="texMathInline">m_1</span><span class="stt"> : </span><span class="texMathInline">i_1</span><span class="stt">) =&gt; </span><span class="texMathInline">i^{\prime}_{1}</span><span class="stt">)</span>&#65292;&#28385;&#36275;&#31532;&#19968;&#20010;&#25509;&#21475;&#30340;&#27169;&#22359;
<span class="texMathInline">m_0</span> &#20063;&#24517;&#39035;&#28385;&#36275;&#31532;&#20108;&#20010;&#25509;&#21475;&#12290;&#36825;&#23601;&#26159;&#35828;&#65292;&#25509;&#21475;&#20026; <span class="texMathInline">i_2</span> &#30340;&#20219;&#20309;&#27169;&#22359;&#37117;&#33021;&#20316;&#20026;&#21442;&#25968;&#65292;
&#20256;&#32473; <span class="texMathInline">m_0</span>&#65292;<span class="texMathInline">m_0</span> &#20135;&#29983;&#30340;&#20219;&#20309;&#27169;&#22359;&#37117;&#28385;&#36275; <span class="texMathInline">i^{\prime}_{2}</span>&#12290;</p><p>&#20026;&#28385;&#36275;&#31532;&#19968;&#20010;&#35201;&#27714;&#65292;&#25105;&#20204;&#35201;&#27714; <span class="texMathInline">i_2 &lt;: i_1</span>&#12290;&#36825;&#20445;&#35777;&#20102;&#28385;&#36275; <span class="texMathInline">i_2</span> &#30340;&#20219;&#20309;&#27169;&#22359;&#37117;&#33021;&#20316;
&#20026;&#21442;&#25968;&#20256;&#32473; <span class="texMathInline">m_0</span>&#12290;&#27880;&#24847;&#36870;&#24207;&#65306;&#25105;&#20204;&#35828;&#21442;&#25968;&#31867;&#22411;&#30340;<span class="emph">&#23376;&#31867;&#22411;&#21028;&#23450;</span> (<span class="emph">subtyping</span>)
&#26159;<span class="emph">&#36870;&#21464;&#30340;</span> (<span class="emph">contravariant</span>)&#12290;
<a name="(idx._(gentag._1283))"></a></p><p>&#32467;&#26524;&#30340;&#31867;&#22411;&#21602;&#65311;&#25105;&#20204;&#21487;&#20197;&#35201;&#27714; <span class="texMathInline">i^{\prime}_{1} &lt;: i^{\prime}_{2}</span>&#12290;&#19981;&#24184;&#30340;&#26159;&#65292;&#36825;&#34892;
&#19981;&#36890;&#12290;<span class="texMathInline">i^{\prime}_{1}</span> &#20013;&#65292;&#21487;&#33021;&#20986;&#29616;&#27169;&#22359;&#21464;&#37327; <span class="texMathInline">m_1</span>&#65292;<span class="texMathInline">i^{\prime}_{2}</span> &#20013;&#65292;&#21487;
&#33021;&#20986;&#29616;&#27169;&#22359;&#21464;&#37327; <span class="texMathInline">m_2</span> &#30340;&#23454;&#20363;&#12290;&#25152;&#20197;&#65292;&#35201;&#27604;&#36739;&#23427;&#20204;&#65292;&#25105;&#20204;&#24471;&#23558; <span class="texMathInline">m_1</span> &#21644; <span class="texMathInline">m_2</span> &#37325;
&#21629;&#21517;&#20026;&#26032;&#30340;&#27169;&#22359;&#21464;&#37327; <span class="texMathInline">m^{\prime}</span>&#12290;&#19968;&#26086;&#23436;&#25104;&#36825;&#19968;&#27493;&#65292;&#25105;&#20204;&#23601;&#33021;&#29031;&#24120;&#27604;&#36739;&#23427;&#20204;&#20102;&#12290;&#36825;&#23601;
&#24471;&#20986;&#26465;&#20214; <span class="texMathInline">i^{\prime}_{1}<span class="stt">[</span><span class="texMathInline">m^{\prime}/m_{1}</span><span class="stt">]</span> &lt;:
i^{\prime}_{2}<span class="stt">[</span><span class="texMathInline">m^{\prime}/m_{2}</span><span class="stt">]</span></span>&#12290;</p><p>&#21028;&#26029;&#36825;&#31181;&#20851;&#31995;&#30340;&#20195;&#30721;&#36739;&#20026;&#30452;&#30333;&#65288;&#65289;&#12290;&#21028;&#26029;
<span class="texMathInline">i^{\prime}_{1}<span class="stt">[</span><span class="texMathInline">m^{\prime}/m_{1}</span><span class="stt">]</span> &lt;:
i^{\prime}_{2}<span class="stt">[</span><span class="texMathInline">m^{\prime}/m_{2}</span><span class="stt">]</span></span> &#26102;&#65292;&#25105;&#20204;&#25193;&#23637;&#31867;&#22411;&#29615;&#22659;&#65292;&#32473;
<span class="texMathInline">m^{\prime}</span> &#28155;&#21152;&#32465;&#23450;&#12290;&#30001;&#20110; <span class="texMathInline">i_1</span> &#30340;&#27604; <span class="texMathInline">i_2</span> &#23567;&#65292;&#25105;&#20204;&#23558; <span class="texMathInline">m^{\prime}</span> &#19982;
&#23427;&#20851;&#32852;&#36215;&#26469;&#12290;&#25105;&#20204;&#35843;&#29992; <span class="stt">extend-tenv-with-module</span> &#27604;&#36739;&#32467;&#26524;&#30340;&#31867;&#22411;&#26102;&#65292;&#36824;&#35201;&#35843;&#29992;
<span class="stt">expand-iface</span> &#32500;&#25345;&#19981;&#21464;&#24335;&#12290;</p><p><a name="(idx._(gentag._1284))"></a>
&#29616;&#22312;&#65292;&#23436;&#25104;&#20102;&#12290;&#21507;&#26479;&#22307;&#20195;&#21543;&#65292;&#25918;&#20123;&#22902;&#27833;<span class="emph">&#21475;</span>&#21619;&#12289;&#28909;&#27975;&#27713;<span class="emph">&#21475;</span>&#21619;&#12289;&#36824;&#26377;
&#22362;&#26524;<span class="emph">&#21475;</span>&#21619;&#30340;&#20304;&#26009;&#12290;&#24590;&#20040;&#32452;&#21512;&#19981;&#35201;&#32039;&#65292;&#22909;&#21507;&#23601;&#34892;&#65281;
<a name="(idx._(gentag._1285))"></a>
<a name="(idx._(gentag._1286))"></a>
<a name="(idx._(gentag._1287))"></a>
<a name="(idx._(gentag._1288))"></a>
<a name="(idx._(gentag._1289))"></a>
<a name="(idx._(gentag._1290))"></a>
<a name="(idx._(gentag._1291))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">&lt;:-iface</span></span> : <span class="texMathInline">\mathit{Iface} \times \mathit{Iface} \times \mathit{Tenv} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;:-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">iface1</span><span class="hspace">&nbsp;</span><span class="RktSym">iface2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">iface1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">iface2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">decls1</span><span class="hspace">&nbsp;</span><span class="RktSym">decls2</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param-name2</span><span class="hspace">&nbsp;</span><span class="RktSym">param-iface2</span><span class="hspace">&nbsp;</span><span class="RktSym">result-iface2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param-name1</span><span class="hspace">&nbsp;</span><span class="RktSym">param-iface1</span><span class="hspace">&nbsp;</span><span class="RktSym">result-iface1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">interface</span><span class="hspace">&nbsp;</span><span class="RktSym">iface2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">simple-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">decls2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-iface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param-name2</span><span class="hspace">&nbsp;</span><span class="RktSym">param-iface2</span><span class="hspace">&nbsp;</span><span class="RktSym">result-iface2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh-module-name</span><span class="hspace">&nbsp;</span><span class="RktSym">param-name1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">result-iface1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rename-in-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">result-iface1</span><span class="hspace">&nbsp;</span><span class="RktSym">param-name1</span><span class="hspace">&nbsp;</span><span class="RktSym">new-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">result-iface2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rename-in-iface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">result-iface2</span><span class="hspace">&nbsp;</span><span class="RktSym">param-name2</span><span class="hspace">&nbsp;</span><span class="RktSym">new-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">param-iface2</span><span class="hspace">&nbsp;</span><span class="RktSym">param-iface1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;:-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">result-iface1</span><span class="hspace">&nbsp;</span><span class="RktSym">result-iface2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-module</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">new-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expand-iface</span><span class="hspace">&nbsp;</span><span class="RktSym">new-name</span><span class="hspace">&nbsp;</span><span class="RktSym">param-iface1</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>PROC-MODULES &#30340;&#26816;&#26597;&#22120;&#65292;&#31532; 2 &#37096;&#20998;
<a name="(idx._(gentag._1292))"></a>
<a name="(idx._(gentag._1293))"></a>
<a name="(idx._(gentag._1294))"></a>
<a name="(idx._(gentag._1295))"></a>
<a name="(idx._(gentag._1296))"></a>
<a name="(idx._(gentag._1297))"></a>
<a name="(idx._(gentag._1298))"></a><a name="(elem._fig-8..16)"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..24)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#30446;&#21069;&#65292;&#35843;&#29992;&#27169;&#22359;&#21482;&#33021;&#36890;&#36807;&#26631;&#35782;&#31526;&#12290;&#35201;&#26159;&#25105;&#20204;&#24819;&#26816;&#26597;&#35843;&#29992; <span class="stt">(m1 (m2 m3))</span>&#65292;&#31867;&#22411;&#35268;&#21017;&#26377;&#20160;
&#20040;&#38382;&#39064;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..25)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1299))"></a>
&#25193;&#23637; PROC-MODULES&#65292;&#20687;ex3.21 &#37027;&#26679;&#65292;&#20801;&#35768;&#27169;&#22359;&#21462;&#22810;&#20010;&#21442;&#25968;&#12290;
<a name="(idx._(gentag._1300))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#35821;&#35328;&#30340;&#27169;&#22359;&#20027;&#20307;&#65292;&#23558;&#27169;&#22359;&#35843;&#29992;&#30340;&#29983;&#25104;&#24335;&#25913;&#20026;</p><p><span class="Iidentity">\begin{align*}\mathit{ModuleBody} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{ModuleBody}</span><span class="stt"> </span><span class="Iidentity">\mathit{ModuleBody}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">app-module-body (rator rand)</span>}\end{align*}</span></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex8..27)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312; PROC-MODULES &#20013;&#65292;&#25105;&#20204;&#24635;&#35201;&#19968;&#36941;&#21448;&#19968;&#36941;&#20889;&#36825;&#31181;&#25509;&#21475;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">[opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)]</span></p></td></tr></table></blockquote><p>&#32473;&#31243;&#24207;&#28155;&#21152;&#35821;&#27861;&#65292;&#25903;&#25345;&#21629;&#21517;&#25509;&#21475;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#33021;&#20889;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">interface int-interface = [opaque t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">zero : t</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">succ : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">pred : (t -&gt; t)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">is-zero : (t -&gt; bool)]</span></p></td></tr><tr><td><p><span class="stt">module make-to-int</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">interface</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((ints : int-interface)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">=&gt; [to-int : from ints take t -&gt; int])</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">body</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">...</span></p></td></tr></table></blockquote></blockquote><h3 class="heading">9<tt>&nbsp;</tt><a name="(part._oac)"></a>&#23545;&#35937;&#21644;&#31867;<span class="button-group"><a href="#(part._oac)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(idx._(gentag._1301))"></a>
&#22312;&#35768;&#22810;&#32534;&#31243;&#24037;&#20316;&#20013;&#65292;&#31243;&#24207;&#37117;&#35201;&#29992;&#25509;&#21475;&#31649;&#29702;&#26576;&#20123;&#29366;&#24577;&#12290;&#20363;&#22914;&#65292;&#25991;&#20214;&#31995;&#32479;&#20869;&#37096;&#29366;&#24577;&#30340;&#35775;&#38382;&#21644;&#20462;&#25913;
&#21482;&#33021;&#36890;&#36807;&#31995;&#32479;&#30340;&#25509;&#21475;&#12290;&#29366;&#24577;&#24120;&#24120;&#28041;&#21450;&#22810;&#20010;&#21464;&#37327;&#65292;&#20026;&#20102;&#32500;&#25252;&#29366;&#24577;&#30340;&#19968;&#33268;&#24615;&#65292;&#24517;&#39035;&#21327;&#21516;&#20462;&#25913;&#37027;&#20123;
&#21464;&#37327;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#38656;&#35201;&#26576;&#31181;&#25216;&#26415;&#65292;&#30830;&#20445;&#32452;&#25104;&#29366;&#24577;&#30340;&#22810;&#20010;&#21464;&#37327;&#33021;&#21327;&#21516;&#26356;&#26032;&#12290;
<span class="emph">&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;</span> (<span class="emph">Object-oriented programming</span>) &#25216;&#26415;&#27491;&#26159;&#20026;&#20102;&#23436;&#25104;&#36825;&#19968;&#20219;&#21153;&#12290;</p><p><a name="(idx._(gentag._1302))"></a>
<a name="(idx._(gentag._1303))"></a>
<a name="(idx._(gentag._1304))"></a>
<a name="(idx._(gentag._1305))"></a>
&#22312;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#20013;&#65292;&#27599;&#20010;&#21463;&#31649;&#29702;&#30340;&#29366;&#24577;&#31216;&#20026;&#19968;&#20010;<span class="emph">&#23545;&#35937;</span> (<span class="emph">object</span>)&#12290;&#19968;&#20010;&#23545;&#35937;&#20013;&#23384;&#26377;
&#22810;&#20010;&#37327;&#65292;&#31216;&#20026;<span class="emph">&#23383;&#27573;</span> (<span class="emph">field</span>)&#65307;&#26377;&#22810;&#20010;&#30456;&#20851;&#36807;&#31243;&#65292;&#31216;&#20026;<span class="emph">&#26041;&#27861;</span> (<span class="emph">method</span>)&#65292;&#26041;
&#27861;&#33021;&#22815;&#35775;&#38382;&#23383;&#27573;&#12290;&#35843;&#29992;&#26041;&#27861;&#24120;&#34987;&#35270;&#20026;&#23558;&#26041;&#27861;&#21517;&#21644;&#21442;&#25968;&#24403;&#20316;&#28040;&#24687;&#20256;&#32473;&#23545;&#35937;&#65307;&#26377;&#26102;&#65292;&#21448;&#35828;&#36825;&#26159;
&#20174;<span class="emph">&#28040;&#24687;&#20256;&#36882;</span> (<span class="emph">message-psasing</span>) &#30340;&#35270;&#35282;&#30475;&#24453;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#12290;
<a name="(idx._(gentag._1306))"></a></p><p>&#22312;<a href="#%28part._state%29" data-pltdoc="x">&#29366;&#24577;</a>&#37027;&#26679;&#30340;&#26377;&#29366;&#24577;&#35821;&#35328;&#20013;&#65292;&#36807;&#31243;&#20063;&#33021;&#20307;&#29616;&#29992;&#23545;&#35937;&#32534;&#31243;&#30340;&#20248;&#21183;&#12290;&#36807;&#31243;&#26159;&#19968;&#31181;&#23545;&#35937;&#65292;
&#20854;&#29366;&#24577;&#21253;&#21547;&#20110;&#33258;&#30001;&#21464;&#37327;&#20043;&#20013;&#12290;&#38381;&#21253;&#21482;&#26377;&#19968;&#31181;&#34892;&#20026;&#65306;&#25343;&#21442;&#25968;&#35843;&#29992;&#23427;&#12290;&#20363;&#22914;&#65292;
g-counter&#30340; <span class="stt">g</span> &#25511;&#21046;&#35745;&#25968;&#22120;&#30340;&#29366;&#24577;&#65292;&#27492;&#29366;&#24577;&#30340;&#21807;&#19968;&#25805;&#20316;&#23601;&#26159;&#36882;&#22686;&#12290;&#20294;&#26356;&#24120;
&#35265;&#30340;&#26159;&#65292;&#19968;&#20010;&#23545;&#35937;&#20855;&#26377;&#22810;&#31181;&#34892;&#20026;&#12290;&#38754;&#21521;&#23545;&#35937;&#30340;&#32534;&#31243;&#35821;&#35328;&#20855;&#26377;&#36825;&#31181;&#33021;&#21147;&#12290;</p><p>&#19968;&#20010;&#26041;&#27861;&#36890;&#24120;&#38656;&#35201;&#31649;&#29702;&#22810;&#37325;&#29366;&#24577;&#65292;&#20363;&#22914;&#22810;&#20010;&#25991;&#20214;&#31995;&#32479;&#25110;&#31243;&#24207;&#20013;&#30340;&#22810;&#20010;&#38431;&#21015;&#12290;&#20026;&#20415;&#20110;&#26041;&#27861;&#20849;&#20139;&#65292;
&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#31995;&#32479;&#36890;&#24120;&#25552;&#20379;&#21517;&#20026;<span class="emph">&#31867;</span> (<span class="emph">class</span>) &#30340;&#32467;&#26500;&#65292;&#29992;&#26469;&#25351;&#23450;&#26576;&#31181;&#23545;&#35937;&#30340;&#23383;&#27573;&#21450;
&#26041;&#27861;&#12290;&#27599;&#20010;&#23545;&#35937;&#37117;&#21019;&#24314;&#20026;&#31867;&#30340;<span class="emph">&#23454;&#20363;</span> (<span class="emph">instance</span>)&#12290;
<a name="(idx._(gentag._1307))"></a></p><p><a name="(idx._(gentag._1308))"></a>
&#31867;&#20284;&#22320;&#65292;&#22810;&#20010;&#31867;&#21487;&#33021;&#26377;&#30456;&#20284;&#32780;&#19981;&#30456;&#21516;&#30340;&#23383;&#27573;&#21644;&#26041;&#27861;&#12290;&#20026;&#20415;&#20110;&#20849;&#20139;&#23454;&#29616;&#65292;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#35821;&#35328;&#36890;
&#24120;&#25903;&#25345;<span class="emph">&#32487;&#25215;</span> (<span class="emph">inheritance</span>)&#65292;&#20801;&#35768;&#31243;&#24207;&#21592;&#22686;&#25913;&#26576;&#20123;&#26041;&#27861;&#30340;&#34892;&#20026;&#65292;&#28155;&#21152;&#23383;&#27573;&#65292;&#23545;&#29616;&#26377;
&#31867;&#23567;&#20570;&#20462;&#25913;&#65292;&#23601;&#33021;&#23450;&#20041;&#26032;&#31867;&#12290;&#36825;&#26102;&#65292;&#30001;&#20110;&#26032;&#31867;&#30340;&#20854;&#20182;&#34892;&#20026;&#20174;&#21407;&#31867;&#32487;&#25215;&#32780;&#24471;&#65292;&#25105;&#20204;&#35828;
&#26032;&#31867;<span class="emph">&#32487;&#25215;&#20110;</span> (<span class="emph">inherit from</span>) &#25110;<span class="emph">&#25193;&#23637;</span> (<span class="emph">extend</span>) &#26087;&#31867;&#12290;</p><p>&#19981;&#35770;&#26159;&#29992;&#20195;&#30721;&#24314;&#27169;&#30495;&#23454;&#19990;&#30028;&#20013;&#30340;&#23545;&#35937;&#36824;&#26159;&#20154;&#24037;&#23618;&#38754;&#30340;&#31995;&#32479;&#29366;&#24577;&#65292;&#19968;&#26086;&#31243;&#24207;&#33021;&#30001;&#32467;&#21512;&#34892;&#20026;&#21644;&#29366;
&#24577;&#30340;&#23545;&#35937;&#32452;&#25104;&#65292;&#20854;&#32467;&#26500;&#36890;&#24120;&#37117;&#28165;&#26224;&#26126;&#20102;&#12290;&#23558;&#34892;&#20026;&#31867;&#20284;&#30340;&#23545;&#35937;&#19982;&#21516;&#19968;&#20010;&#31867;&#20851;&#32852;&#36215;&#26469;&#65292;&#20063;&#26159;&#33258;&#28982;
&#32780;&#28982;&#30340;&#12290;</p><p>&#30495;&#23454;&#19990;&#30028;&#20013;&#30340;&#23545;&#35937;&#36890;&#24120;&#20860;&#20855;<span class="emph">&#29366;&#24577;</span>&#21644;<span class="emph">&#34892;&#20026;</span>&#65292;&#21518;&#32773;&#35201;&#20040;&#25511;&#21046;&#21069;&#32773;&#65292;&#35201;&#20040;&#21463;&#21069;&#32773;&#25511;
&#21046;&#12290;&#20363;&#22914;&#65292;&#29483;&#33021;&#21507;&#65292;&#25171;&#21628;&#22108;&#65292;&#36339;&#65292;&#36538;&#19979;&#65292;&#36825;&#20123;&#27963;&#21160;&#37117;&#30001;&#29483;&#24403;&#21069;&#30340;&#29366;&#24577;&#25511;&#21046;&#65292;&#21253;&#25324;&#26377;&#22810;&#39295;&#65292;&#26377;
&#22810;&#32047;&#12290;</p><p><a name="(idx._(gentag._1309))"></a>
&#23545;&#35937;&#21644;&#27169;&#22359;&#26082;&#30456;&#20284;&#65292;&#21448;&#19981;&#21516;&#12290;&#27169;&#22359;&#21644;&#31867;&#37117;&#25552;&#20379;&#20102;&#23450;&#20041;&#27169;&#31946;&#31867;&#22411;&#30340;&#26426;&#21046;&#65292;&#20294;&#23545;&#35937;&#26159;&#19968;&#31181;&#20855;&#26377;&#34892;
&#20026;&#30340;&#25968;&#25454;&#32467;&#26500;&#65292;&#27169;&#22359;&#21482;&#26159;&#19968;&#32452;&#32465;&#23450;&#12290;&#21516;&#19968;&#20010;&#31867;&#21487;&#20197;&#26377;&#24456;&#22810;&#20010;&#23545;&#35937;&#65307;&#22823;&#22810;&#25968;&#27169;&#22359;&#31995;&#32479;&#27809;&#26377;&#25552;&#20379;
&#30456;&#20223;&#30340;&#33021;&#21147;&#12290;&#20294; PROC-MODULES &#36825;&#26679;&#30340;&#27169;&#22359;&#31995;&#32479;&#25552;&#20379;&#20102;&#26356;&#20026;&#28789;&#27963;&#30340;&#26041;&#24335;&#26469;&#25511;&#21046;&#21517;&#23383;&#30340;&#21487;&#35265;&#24615;&#12290;
&#27169;&#22359;&#21644;&#31867;&#33021;&#22815;&#30456;&#24471;&#30410;&#24432;&#12290;
<a name="(idx._(gentag._1310))"></a>
<a name="(idx._(gentag._1311))"></a></p><h4 class="heading">9.1<tt>&nbsp;</tt><a name="(part._s9..1)"></a>&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;<span class="button-group"><a href="#(part._s9..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>&#26412;&#31456;&#65292;&#25105;&#20204;&#30740;&#31350;&#19968;&#31181;&#31616;&#21333;&#30340;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#65292;&#21517;&#20026; CLASSES&#12290;CLASSES &#31243;&#24207;&#21253;&#21547;&#19968;&#20123;&#31867;&#22768;&#26126;&#65292;
&#28982;&#21518;&#26159;&#19968;&#20010;&#21487;&#33021;&#29992;&#21040;&#37027;&#20123;&#31867;&#30340;&#34920;&#36798;&#24335;&#12290;
<a name="(idx._(gentag._1312))"></a>
<a name="(idx._(gentag._1313))"></a></p><p><a name="(idx._(gentag._1314))"></a>
 &#23637;&#31034;&#20102;&#29992;&#36825;&#31181;&#35821;&#35328;&#20889;&#25104;&#30340;&#31616;&#21333;&#31243;&#24207;&#12290;&#23427;&#23450;&#20041;&#20102;&#32487;&#25215;&#20110; <span class="stt">object</span>
&#30340;&#31867; <span class="stt">c1</span>&#12290;&#31867; <span class="stt">c1</span> &#30340;&#27599;&#20010;&#23545;&#35937;&#37117;&#21253;&#21547;&#20004;&#20010;&#23383;&#27573;&#65292;&#21517;&#20026; <span class="stt">i</span> &#21644; <span class="stt">j</span>&#12290;
<a name="(idx._(gentag._1315))"></a>
<a name="(idx._(gentag._1316))"></a>
<a name="(idx._(gentag._1317))"></a>
&#23383;&#27573;&#21483;&#20570;<span class="emph">&#25104;&#21592;</span> (<span class="emph">member</span>) &#25110;<span class="emph">&#23454;&#20363;&#21464;&#37327;</span> (<span class="emph">instance variable</span>)&#12290;&#31867; <span class="stt">c1</span>
&#25903;&#25345;&#19977;&#20010;<span class="emph">&#26041;&#27861;</span>&#25110;<span class="emph">&#25104;&#21592;&#20989;&#25968;</span> (<span class="emph">member function</span>)&#65292;&#21517;&#20026; <span class="stt">initialize</span>&#12289;
<span class="stt">countup</span> &#21644; <span class="stt">getstate</span>&#12290;&#27599;&#20010;&#26041;&#27861;&#21253;&#21547;<span class="emph">&#26041;&#27861;&#21517;</span> (<span class="emph">method name</span>)&#65292;
&#33509;&#24178;<span class="emph">&#26041;&#27861;&#21464;&#37327;</span> (<span class="emph">method var</span>)&#65288;&#21448;&#31216;<span class="emph">&#26041;&#27861;&#21442;&#25968;</span> (<span class="emph">method parameters</span>)&#65289;&#65292;
&#20197;&#21450;<span class="emph">&#26041;&#27861;&#20027;&#20307;</span> (<span class="emph">method body</span>)&#12290;<a name="(idx._(gentag._1318))"></a>&#26041;&#27861;&#21517;&#23545;&#24212; <span class="stt">c1</span> &#23454;&#20363;&#33021;&#22815;&#21709;&#24212;&#30340;<span class="emph">&#28040;&#24687;</span>&#31181;&#31867;&#12290;&#26377;&#26102;&#65292;&#25105;&#20204;&#31216;&#20043;&#20026;
&#8220;<span class="stt">c1</span> &#30340;&#26041;&#27861; <span class="stt">countup</span>&#8221;&#12290;
<a name="(idx._(gentag._1319))"></a>
<a name="(idx._(gentag._1320))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class c1 extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field i</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field j</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set i = x;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set j = -(0,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method countup (d)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set i = +(i,d);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set j = -(j,d)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method getstate () list(i,j)</span></p></td></tr><tr><td><p><span class="stt">let t1 = 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">t2 = 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">o1 = new c1(3)</span></p></td></tr><tr><td><p><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set t1 = send o1 getstate();</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send o1 countup(2);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">set t2 = send o1 getstate();</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">list(t1,t2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#31616;&#21333;&#30340;&#38754;&#21521;&#23545;&#35937;&#31243;&#24207;<a name="(elem._fig-9..1)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1321))"></a>
<a name="(idx._(gentag._1322))"></a>
&#26412;&#20363;&#20013;&#65292;&#31867;&#30340;&#27599;&#20010;&#26041;&#27861;&#37117;&#32500;&#25252;&#23436;&#25972;&#24615;&#32422;&#26463;&#25110;<span class="emph">&#19981;&#21464;&#24335;</span> <span class="texMathInline">i = -j</span>&#12290;&#24403;&#28982;&#65292;&#30495;&#23454;&#31243;&#24207;&#30340;
&#23436;&#25972;&#24615;&#32422;&#26463;&#21487;&#33021;&#22797;&#26434;&#24471;&#22810;&#12290;</p><p> &#20013;&#30340;&#31243;&#24207;&#39318;&#20808;&#21021;&#22987;&#21270;&#19977;&#20010;&#21464;&#37327;&#12290;<span class="stt">t1</span> &#21644; <span class="stt">t2</span> &#21021;&#22987;&#21270;&#20026; 0&#12290;
<span class="stt">o1</span> &#21021;&#22987;&#21270;&#20026;&#31867; <span class="stt">c1</span> &#30340;&#19968;&#20010;&#23545;&#35937;&#12290;&#25105;&#20204;&#35828;&#36825;&#20010;&#23545;&#35937;&#26159;&#31867; <span class="stt">c1</span> &#30340;&#19968;&#20010;<span class="emph">&#23454;
&#20363;</span>&#12290;&#23545;&#35937;&#36890;&#36807; <span class="stt">new</span> &#25805;&#20316;&#21019;&#24314;&#12290;&#23427;&#20250;&#35302;&#21457;&#35843;&#29992;&#31867;&#30340;&#26041;&#27861; <span class="stt">initialize</span>&#65292;&#22312;&#26412;&#20363;&#20013;&#65292;
&#26159;&#23558;&#23545;&#35937;&#30340;&#23383;&#27573; <span class="stt">i</span> &#35774;&#32622;&#20026; 3&#65292;&#23383;&#27573; <span class="stt">j</span> &#35774;&#32622;&#20026; -3&#12290;&#28982;&#21518;&#65292;&#31243;&#24207;&#35843;&#29992; <span class="stt">o1</span> &#30340;
&#26041;&#27861; <span class="stt">getstate</span>&#65292;&#36820;&#22238;&#21015;&#34920; <span class="stt">(3 -3)</span>&#12290;&#25509;&#30528;&#65292;&#23427;&#35843;&#29992; <span class="stt">o1</span> &#30340;&#26041;&#27861;
<span class="stt">countup</span>&#65292;&#23558;&#20004;&#20010;&#23383;&#27573;&#30340;&#20540;&#25913;&#20026; 5 &#21644; -5&#65292;&#28982;&#21518;&#20877;&#27425;&#35843;&#29992; <span class="stt">getstate</span>&#65292;&#36820;&#22238;
<span class="stt">(5 -5)</span>&#12290;&#26368;&#21518;&#65292;&#20540; <span class="stt">list(t1,t2)</span>&#65292;&#21363; <span class="stt">((3 -3) (5 -5))</span>&#65292;&#25104;&#20026;&#25972;&#27573;&#31243;&#24207;&#30340;
&#36820;&#22238;&#20540;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class interior-node extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field left</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field right</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize (l, r)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set left = l;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set right = r</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method sum () +(send left sum(),send right sum())</span></p></td></tr><tr><td><p><span class="stt">class leaf-node extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field value</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize (v) set value = v</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method sum () value</span></p></td></tr><tr><td><p><span class="stt">let o1 = new interior-node(</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">new interior-node(</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">new leaf-node(3),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">new leaf-node(4)),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">new leaf-node(5))</span></p></td></tr><tr><td><p><span class="stt">in send o1 sum()</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#27714;&#26641;&#21494;&#20043;&#21644;&#30340;&#38754;&#21521;&#23545;&#35937;&#31243;&#24207;<a name="(elem._fig-9..2)"></a></p></blockquote></blockquote><p> &#35299;&#37322;&#20102;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#20013;&#30340;&#20851;&#38190;&#24605;&#24819;&#65306;<span class="emph">&#21160;&#24577;&#20998;&#21457;</span> (<span class="emph">dynamic
dispatch</span>)&#12290;&#22312;&#36825;&#27573;&#31243;&#24207;&#20013;&#65292;&#26641;&#26377;&#20004;&#31181;&#33410;&#28857;&#65292;<span class="stt">interior-node</span> &#21644;
<span class="stt">leaf-node</span>&#12290;&#36890;&#24120;&#65292;&#25105;&#20204;&#19981;&#30693;&#36947;&#26159;&#22312;&#32473;&#21738;&#31181;&#33410;&#28857;&#21457;&#36865;&#28040;&#24687;&#12290;&#30456;&#21453;&#65292;&#27599;&#20010;&#33410;&#28857;&#25509;&#25910;
<span class="stt">sum</span> &#28040;&#24687;&#65292;&#24182;&#29992;&#33258;&#36523;&#30340; <span class="stt">sum</span> &#26041;&#27861;&#20570;&#36866;&#24403;&#25805;&#20316;&#12290;&#36825;&#21483;&#20570;<span class="emph">&#21160;&#24577;&#20998;&#21457;</span>&#12290;&#36825;&#37324;&#65292;
&#34920;&#36798;&#24335;&#29983;&#25104;&#19968;&#26869;&#26641;&#65292;&#26377;&#20004;&#20010;&#20869;&#37096;&#33410;&#28857;&#65292;&#19977;&#20010;&#21494;&#33410;&#28857;&#12290;&#23427;&#23558; <span class="stt">sum</span> &#28040;&#24687;&#21457;&#32473;&#33410;&#28857; <span class="stt">o1</span>&#65307;
<span class="stt">o1</span> &#23558; <span class="stt">sum</span> &#28040;&#24687;&#21457;&#32473;&#23376;&#26641;&#65292;&#20381;&#27492;&#31867;&#25512;&#65292;&#26368;&#32456;&#36820;&#22238; 12&#12290;&#36825;&#27573;&#31243;&#24207;&#20063;&#34920;&#26126;&#65306;&#25152;&#26377;&#26041;
&#27861;&#37117;&#26159;&#20114;&#36882;&#24402;&#30340;&#12290;</p><p><a name="(idx._(gentag._1323))"></a>
&#26041;&#27861;&#20027;&#20307;&#21487;&#36890;&#36807;&#26631;&#35782;&#31526; <span class="stt">self</span>&#65288;&#26377;&#26102;&#21483;&#20570; <span class="stt">this</span>&#65289;&#35843;&#29992;&#21516;&#19968;&#23545;&#35937;&#30340;&#20854;&#20182;&#26041;&#27861;&#65292;
<span class="stt">self</span> &#24635;&#26159;&#32465;&#23450;&#20110;&#26041;&#27861;&#35843;&#29992;&#26102;&#30340;&#23545;&#35937;&#12290;&#20363;&#22914;&#65292;&#22312;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class oddeven extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize () 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method even (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if zero?(n) then 1 else send self odd(-(n,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method odd (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if zero?(n) then 0 else send self even(-(n,1))</span></p></td></tr><tr><td><p><span class="stt">let o1 = new oddeven()</span></p></td></tr><tr><td><p><span class="stt">in send o1 odd(13)</span></p></td></tr></table></blockquote><p>&#20013;&#65292;&#26041;&#27861; <span class="stt">even</span> &#21644; <span class="stt">odd</span> &#36882;&#24402;&#35843;&#29992;&#24444;&#27492;&#65292;&#22240;&#20026;&#23427;&#20204;&#25191;&#34892;&#26102;&#65292;<span class="stt">self</span> &#32465;&#23450;&#21040;&#21253;
&#21547;&#20108;&#32773;&#30340;&#23545;&#35937;&#12290;&#36825;&#23601;&#20687;ex3.37 &#20013;&#65292;&#29992;&#21160;&#24577;&#32465;&#23450;&#23454;&#29616;&#36882;&#24402;&#12290;
<a name="(idx._(gentag._1324))"></a></p></blockquote><h4 class="heading">9.2<tt>&nbsp;</tt><a name="(part._s9..2)"></a>&#32487;&#25215;<span class="button-group"><a href="#(part._s9..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1325))"></a>
&#36890;&#36807;&#32487;&#25215;&#65292;&#31243;&#24207;&#21592;&#33021;&#22815;&#28176;&#36827;&#22320;&#20462;&#25913;&#26087;&#31867;&#65292;&#24471;&#21040;&#26032;&#31867;&#12290;&#22312;&#23454;&#36341;&#20013;&#65292;&#36825;&#21313;&#20998;&#26377;&#29992;&#12290;
&#20363;&#22914; &#20013;&#30340;&#32463;&#20856;&#20363;&#23376;&#65306;&#26377;&#33394;&#28857;&#19982;&#28857;&#31867;&#20284;&#65292;&#20294;&#22810;&#20102;&#22788;&#29702;&#39068;&#33394;&#30340;&#26041;&#27861;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class point extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize (initx, inity)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = initx;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set y = inity</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method move (dx, dy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = +(x,dx);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set y = +(y,dy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method get-location () list(x,y)</span></p></td></tr><tr><td><p><span class="stt">class colorpoint extends point</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field color</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method set-color (c) set color = c</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method get-color () color</span></p></td></tr><tr><td><p><span class="stt">let p = new point(3,4)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">cp = new colorpoint(10, 20)</span></p></td></tr><tr><td><p><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send p move(3,4);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send cp set-color(87);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send cp move(10,20);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">list(send p get-location(),</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">% </span><span class="emph">&#36820;&#22238;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(6 8)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send cp get-location(),</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">% </span><span class="emph">&#36820;&#22238;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(20 40)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send cp get-color())</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">% </span><span class="emph">&#36820;&#22238;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">87</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#32487;&#25215;&#30340;&#32463;&#20856;&#20363;&#23376;&#65306;<span class="stt">colorpoint</span><a name="(elem._fig-9..3)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1326))"></a>
<a name="(idx._(gentag._1327))"></a>
<a name="(idx._(gentag._1328))"></a>
&#22914;&#26524;&#31867; <span class="texMathInline">c_2</span> &#25193;&#23637;&#31867; <span class="texMathInline">c_1</span>&#65292;&#25105;&#20204;&#35828; <span class="texMathInline">c_1</span> &#26159; <span class="texMathInline">c_2</span> &#30340;<span class="emph">&#29238;&#31867;</span> (<span class="emph">parent</span>)
<a name="(idx._(gentag._1329))"></a>
<a name="(idx._(gentag._1330))"></a>
&#25110;<span class="emph">&#36229;&#31867;</span> (<span class="emph">superclass</span>)&#65292;<span class="texMathInline">c_2</span> &#26159; <span class="texMathInline">c_1</span> &#30340;<span class="emph">&#23376;&#31867;</span> (<span class="emph">child</span>)&#12290;&#22312;&#32487;&#25215;&#20013;&#65292;
&#30001;&#20110; <span class="texMathInline">c_2</span> &#23450;&#20041;&#20026; <span class="texMathInline">c_1</span> &#30340;&#25193;&#23637;&#65292;&#25152;&#20197; <span class="texMathInline">c_1</span> &#24517;&#39035;&#22312; <span class="texMathInline">c_2</span> &#20043;&#21069;&#23450;&#20041;&#12290;&#20316;&#20026;&#36215;&#22987;&#65292;
&#35821;&#35328;&#36824;&#21253;&#21547;&#19968;&#20010;&#39044;&#20808;&#23450;&#20041;&#30340;&#31867;&#65292;&#21517;&#20026; <span class="stt">object</span>&#65292;&#23427;&#27809;&#26377;&#20219;&#20309;&#26041;&#27861;&#25110;&#23383;&#27573;&#12290;&#30001;&#20110;&#31867;
<span class="stt">object</span> &#27809;&#26377; <span class="stt">initialize</span> &#26041;&#27861;&#65292;&#22240;&#27492;&#26080;&#27861;&#29992;&#23427;&#21019;&#24314;&#23545;&#35937;&#12290;&#38500; <span class="stt">object</span> &#20043;&#22806;
&#30340;&#25152;&#26377;&#31867;&#37117;&#26377;&#21807;&#19968;&#29238;&#31867;&#65292;&#20294;&#21487;&#20197;&#26377;&#22810;&#20010;&#23376;&#31867;&#12290;&#22240;&#27492;&#65292;&#30001; <span class="stt">extends</span> &#24471;&#20986;&#30340;&#20851;&#31995;&#22312;&#31867;&#19982;&#31867;
&#20043;&#38388;&#20135;&#29983;&#20102;&#26641;&#29366;&#32467;&#26500;&#65292;&#26681;&#20026; <span class="stt">object</span>&#12290;&#22240;&#20026;&#27599;&#20010;&#31867;&#33267;&#22810;&#21482;&#26377;&#19968;&#20010;&#30452;&#25509;&#36229;&#31867;&#65292;&#36825;&#26159;&#19968;&#31181;
<span class="emph">&#21333;&#32487;&#25215;</span> (<span class="emph">single-inheritance</span>) &#35821;&#35328;&#12290;&#26377;&#20123;&#35821;&#35328;&#20801;&#35768;&#31867;&#32487;&#25215;&#33258;&#22810;&#20010;
&#36229;&#31867;&#12290;<span class="emph">&#22810;&#32487;&#25215;</span> (<span class="emph">multiple inheritance</span>) &#34429;&#28982;&#24378;&#22823;&#65292;&#21364;&#19981;&#26080;&#38382;&#39064;&#12290;&#22312;&#32451;&#20064;&#20013;&#65292;&#25105;&#20204;
&#20250;&#30475;&#21040;&#19968;&#20123;&#19981;&#20415;&#20043;&#22788;&#12290;
<a name="(idx._(gentag._1331))"></a>
<a name="(idx._(gentag._1332))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><a name="(elem._field-shadowing)"></a><span class="stt">class c1 extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize () 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method setx1 (v) set x = v</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method sety1 (v) set y = v</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method getx1 () x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method gety1 () y</span></p></td></tr><tr><td><p><span class="stt">class c2 extends c1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method sety2 (v) set y = v</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method getx2 () x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method gety2 () y</span></p></td></tr><tr><td><p><span class="stt">let o2 = new c2()</span></p></td></tr><tr><td><p><span class="stt">in begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send o2 setx1(101);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send o2 sety1(102);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send o2 sety2(999);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">list(send o2 getx1(),</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">% </span><span class="emph">&#36820;&#22238;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">101</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send o2 gety1(),</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">% </span><span class="emph">&#36820;&#22238;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">102</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send o2 getx2(),</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">% </span><span class="emph">&#36820;&#22238;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">101</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send o2 gety2())</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">% </span><span class="emph">&#36820;&#22238;</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">999</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#23383;&#27573;&#36974;&#34109;&#30340;&#20363;&#23376;<a name="(elem._fig-9..4)"></a></p></blockquote></blockquote><p>&#26415;&#35821;<span class="emph">&#32487;&#25215;</span>&#28304;&#20110;&#23447;&#35889;&#30340;&#31867;&#27604;&#12290;&#25105;&#20204;&#24120;&#24120;&#24341;&#30003;&#36825;&#19968;&#31867;&#27604;&#65292;&#35828;&#31867;&#30340;<span class="emph">&#31062;
&#20808;</span> (<span class="emph">ancestor</span>)<a name="(idx._(gentag._1333))"></a>&#65288;&#20174;&#31867;&#30340;&#29238;&#31867;&#21040;&#26681;&#31867; <span class="stt">object</span>&#65289;
<a name="(idx._(gentag._1334))"></a>
&#21644;<span class="emph">&#21518;&#20195;</span> (<span class="emph">descendant</span>)&#12290;&#22914;&#26524; <span class="texMathInline">c_2</span> &#26159; <span class="texMathInline">c_1</span> &#30340;&#21518;&#20195;&#65292;&#21487;&#20197;&#35828; <span class="texMathInline">c_2</span> &#26159;
<span class="texMathInline">c_1</span> &#30340;<span class="emph">&#23376;&#31867;</span> (<span class="emph">subclass</span>)&#65292;&#20889;&#20316; <span class="texMathInline">c_2 &lt; c_1</span>&#12290;
<a name="(idx._(gentag._1335))"></a>
<a name="(idx._(gentag._1336))"></a></p><p>&#22914;&#26524;&#31867; <span class="texMathInline">c_2</span> &#32487;&#25215;&#33258; <span class="texMathInline">c_1</span>&#65292;&#38500;&#38750;&#22312; <span class="texMathInline">c_2</span> &#20013;&#37325;&#26032;&#22768;&#26126;&#65292;<span class="texMathInline">c_1</span> &#30340;&#25152;&#26377;&#23383;&#27573;&#21644;&#26041;
&#27861;&#37117;&#23545; <span class="texMathInline">c_2</span> &#30340;&#26041;&#27861;&#21487;&#35265;&#12290;&#30001;&#20110;&#19968;&#20010;&#31867;&#32487;&#25215;&#20102;&#29238;&#31867;&#30340;&#25152;&#26377;&#26041;&#27861;&#21644;&#23383;&#27573;&#65292;&#20219;&#20309;&#33021;&#22815;&#20351;&#29992;&#29238;
&#31867;&#23454;&#20363;&#30340;&#22320;&#26041;&#37117;&#21487;&#20197;&#20351;&#29992;&#23376;&#31867;&#23454;&#20363;&#12290;&#31867;&#20284;&#22320;&#65292;&#20219;&#20309;&#33021;&#22815;&#20351;&#29992;&#31867;&#23454;&#20363;&#30340;&#22320;&#26041;&#37117;&#21487;&#20197;&#20351;&#29992;&#20854;&#21518;&#20195;
&#30340;&#23454;&#20363;&#12290;&#26377;&#26102;&#65292;&#36825;&#21483;&#20570;<span class="emph">&#23376;&#31867;&#22810;&#24577;</span> (<span class="emph">subclass polymorphism</span>)&#12290;&#25105;&#20204;&#30340;&#35821;&#35328;&#36873;&#25321;&#36825;&#31181;
&#35774;&#35745;&#65292;&#20854;&#20182;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#21487;&#33021;&#36873;&#25321;&#19981;&#21516;&#30340;&#21487;&#35265;&#24615;&#35268;&#21017;&#12290;<a name="(idx._(gentag._1337))"></a>
<a name="(idx._(gentag._1338))"></a></p><p>&#25509;&#19979;&#26469;&#65292;&#25105;&#20204;&#32771;&#34385;&#37325;&#26032;&#22768;&#26126;&#31867;&#30340;&#23383;&#27573;&#25110;&#26041;&#27861;&#26102;&#20250;&#21457;&#29983;&#20160;&#20040;&#12290;&#22914;&#26524; <span class="texMathInline">c_1</span> &#30340;&#26576;&#20010;&#23383;&#27573;&#22312;&#26576;
&#20010;&#23376;&#31867; <span class="texMathInline">c_2</span> &#20013;&#37325;&#26032;&#22768;&#26126;&#65292;&#26032;&#30340;&#22768;&#26126;<span class="emph">&#36974;&#34109;</span> (<span class="emph">shadow</span>) &#26087;&#30340;&#65292;&#23601;&#20687;&#35789;&#27861;&#23450;&#30028;&#19968;&#26679;&#12290;
<a name="(idx._(gentag._1339))"></a>
&#20363;&#22914;&#12290;&#31867; <span class="stt">c2</span> &#30340;&#23545;&#35937;&#26377;&#20004;&#20010;&#21517;&#20026; <span class="stt">y</span> &#30340;&#23383;&#27573;&#65306;<span class="stt">c1</span> &#20013;
&#22768;&#26126;&#30340;&#21644; <span class="stt">c2</span> &#20013;&#22768;&#26126;&#30340;&#12290;<span class="stt">c1</span> &#20013;&#22768;&#26126;&#30340;&#26041;&#27861;&#33021;&#30475;&#21040; <span class="stt">c1</span> &#30340;&#23383;&#27573; <span class="stt">x</span> &#21644;
<span class="stt">y</span>&#12290;&#22312; <span class="stt">c2</span> &#20013;&#65292;<span class="stt">getx2</span> &#20013;&#30340; <span class="stt">x</span> &#25351;&#20195; <span class="stt">c1</span> &#30340;&#23383;&#27573; <span class="stt">x</span>&#65292;&#20294;
<span class="stt">gety2</span> &#20013;&#30340; <span class="stt">y</span> &#25351;&#20195; <span class="stt">c2</span> &#30340;&#23383;&#27573; <span class="stt">y</span>&#12290;</p><p>&#22914;&#26524;&#31867; <span class="texMathInline">c_1</span> &#30340;&#26041;&#27861; <span class="texMathInline">m</span> &#22312;&#26576;&#20010;&#23376;&#31867; <span class="texMathInline">c_2</span> &#20013;&#37325;&#26032;&#22768;&#26126;&#65292;&#25105;&#20204;&#35828;&#26032;&#30340;
&#26041;&#27861;<span class="emph">&#35206;&#30422;</span> (<span class="emph">override</span>) &#26087;&#30340;&#26041;&#27861;&#12290;&#25105;&#20204;&#23558;&#26041;&#27861;&#22768;&#26126;&#25152;&#22312;&#30340;&#31867;&#31216;&#20026;&#26041;&#27861;
&#30340;<span class="emph">&#25345;&#26377;&#31867;</span> (<span class="emph">host class</span>)&#12290;
<a name="(idx._(gentag._1340))"></a>
<a name="(idx._(gentag._1341))"></a>
<a name="(idx._(gentag._1342))"></a>
&#31867;&#20284;&#22320;&#65292;&#25105;&#20204;&#23558;&#34920;&#36798;&#24335;&#30340;&#25345;&#26377;&#31867;&#23450;&#20041;&#20026;&#34920;&#36798;&#24335;&#25152;&#22312;&#26041;&#27861;&#65288;&#22914;&#26524;&#26377;&#30340;&#35805;&#65289;&#30340;&#25345;&#26377;&#31867;&#12290;&#25105;&#20204;&#36824;&#23558;
&#26041;&#27861;&#25110;&#34920;&#36798;&#24335;&#30340;&#36229;&#31867;&#23450;&#20041;&#20026;&#25345;&#26377;&#31867;&#30340;&#29238;&#31867;&#12290;
<a name="(idx._(gentag._1343))"></a>
<a name="(idx._(gentag._1344))"></a></p><p>&#22914;&#26524;&#32473;&#31867; <span class="texMathInline">c_2</span> &#30340;&#23545;&#35937;&#21457;&#36865;&#28040;&#24687; <span class="texMathInline">m</span>&#65292;&#24212;&#20351;&#29992;&#26032;&#30340;&#26041;&#27861;&#12290;&#36825;&#26465;&#35268;&#21017;&#24456;&#31616;&#21333;&#65292;&#32467;&#26524;&#21364;&#19981;
&#31616;&#21333;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class c1 extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize () 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m1 () 11</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m2 () send self m1()</span></p></td></tr><tr><td><p><span class="stt">class c2 extends c1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m1 () 22</span></p></td></tr><tr><td><p><span class="stt">let o1 = new c1() o2 = new c2()</span></p></td></tr><tr><td><p><span class="stt">in list(send o1 m1(), send o2 m1(), send o2 m2())</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#24076;&#26395; <span class="stt">send o1 m1()</span> &#36820;&#22238; 11&#65292;&#22240;&#20026; <span class="stt">o1</span> &#26159; <span class="stt">c1</span> &#30340;&#23454;&#20363;&#12290;&#21516;&#26679;&#22320;&#65292;&#25105;&#20204;
&#24076;&#26395; <span class="stt">send o2 m1()</span> &#36820;&#22238; 22&#65292;&#22240;&#20026; <span class="stt">o2</span> &#26159; <span class="stt">c2</span> &#30340;&#23454;&#20363;&#12290;&#37027;&#20040; <span class="stt">send o2
m2()</span> &#21602;&#65311;&#26041;&#27861; <span class="stt">m2</span> &#30452;&#25509;&#35843;&#29992;&#26041;&#27861; <span class="stt">m1</span>&#65292;&#20294;&#23427;&#35843;&#29992;&#30340;&#26159;&#21738;&#20010; <span class="stt">m1</span>&#65311;</p></blockquote><p><a name="(idx._(gentag._1345))"></a>
&#21160;&#24577;&#20998;&#21457;&#21578;&#35785;&#25105;&#20204;&#65292;&#24212;&#26597;&#30475;&#32465;&#23450;&#21040; <span class="stt">self</span> &#30340;&#23545;&#35937;&#23646;&#20110;&#21738;&#20010;&#31867;&#12290;<span class="stt">self</span> &#30340;&#20540;&#26159;
<span class="stt">o2</span>&#65292;&#23646;&#20110;&#31867; <span class="stt">c2</span>&#12290;&#22240;&#27492;&#65292;&#35843;&#29992; <span class="stt">send self m1()</span> &#24212;&#36820;&#22238; 22&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class point extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize (initx, inity)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = initx;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set y = inity</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method move (dx, dy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = +(x,dx);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set y = +(y,dy)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method get-location () list(x,y)</span></p></td></tr><tr><td><p><span class="stt">class colorpoint extends point</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field color</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize (initx, inity, initcolor)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = initx;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set y = inity;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set color = initcolor</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method set-color (c) set color = c</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method get-color () color</span></p></td></tr><tr><td><p><span class="stt">let o1 = new colorpoint(3,4,172)</span></p></td></tr><tr><td><p><span class="stt">in send o1 get-color()</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#28436;&#31034; <span class="stt">super</span> &#24517;&#35201;&#24615;&#30340;&#20363;&#23376;
<a name="(idx._(gentag._1346))"></a><a name="(elem._fig-9..5)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1347))"></a>
&#25105;&#20204;&#30340;&#35821;&#35328;&#36824;&#26377;&#19968;&#20010;&#37325;&#35201;&#29305;&#24615;&#65306;<span class="emph">&#36229;&#31867;&#35843;&#29992;</span> (<span class="emph">super call</span>)&#12290;
&#32771;&#34385; &#20013;&#30340;&#31243;&#24207;&#12290;&#25105;&#20204;&#22312;&#31867; <span class="stt">colorpoint</span> &#20013;&#37325;&#20889;&#20102;
<span class="stt">initialize</span> &#26041;&#27861;&#65292;&#21516;&#26102;&#35774;&#32622;&#23383;&#27573; <span class="stt">x</span>&#12289;<span class="stt">y</span> &#21644; <span class="stt">color</span>&#12290;&#20294;&#26159;&#65292;&#26032;&#26041;&#27861;&#30340;
&#20027;&#20307;&#22797;&#21046;&#20102;&#21407;&#26041;&#27861;&#30340;&#20195;&#30721;&#12290;&#22312;&#25105;&#20204;&#30340;&#23567;&#20363;&#23376;&#20013;&#65292;&#36825;&#23578;&#21487;&#25509;&#21463;&#65292;&#20294;&#22312;&#22823;&#22411;&#20363;&#23376;&#20013;&#65292;&#36825;&#26174;&#28982;&#26159;&#19968;
&#31181;&#22351;&#30340;&#20570;&#27861;&#65288;&#20026;&#20160;&#20040;&#65311;&#65289;&#12290;&#32780;&#19988;&#65292;&#22914;&#26524; <span class="stt">colorpoint</span> &#22768;&#26126;&#20102;&#23383;&#27573; <span class="stt">x</span>&#65292;&#23601;&#27809;&#27861;&#21021;&#22987;
&#21270; <span class="stt">point</span> &#30340;&#23383;&#27573; <span class="stt">x</span>&#65292;&#27491;&#22914;field-shadowing&#30340;&#20363;&#23376;&#20013;&#65292;&#27809;&#27861;&#21021;&#22987;&#21270;&#31532;
&#19968;&#20010; <span class="stt">y</span> &#19968;&#26679;&#12290;</p><p>&#35299;&#20915;&#26041;&#26696;&#26159;&#65292;&#25226; <span class="stt">colorpoint</span> &#30340; <span class="stt">initialize</span> &#26041;&#27861;&#20027;&#20307;&#20013;&#30340;&#37325;&#22797;&#20195;&#30721;&#26367;&#25442;
&#20026;<span class="emph">&#36229;&#31867;&#35843;&#29992;</span>&#65292;&#24418;&#22914; <span class="stt">super initialize()</span>&#12290;&#37027;&#20040; <span class="stt">colorpoint</span> &#20013;&#30340;
<span class="stt">initialize</span> &#26041;&#27861;&#20889;&#20316;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">method initialize (initx, inity, initcolor)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">super initialize(initx, inity);</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">set color = initcolor</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">end</span></p></td></tr></table></blockquote><p>&#26041;&#27861; <span class="texMathInline">m</span> &#20027;&#20307;&#20013;&#30340;&#36229;&#31867;&#35843;&#29992; <span class="stt">super </span><span class="texMathInline">n</span><span class="stt">(...)</span> &#20351;&#29992;&#30340;&#26159; <span class="texMathInline">m</span> &#25345;&#26377;&#31867;&#29238;&#31867;&#30340;&#26041;
&#27861; <span class="texMathInline">n</span>&#12290;&#36825;&#19981;&#19968;&#23450;&#26159; <span class="stt">self</span> &#25152;&#25351;&#31867;&#30340;&#29238;&#31867;&#12290;<span class="stt">self</span> &#25152;&#25351;&#31867;&#24635;&#26159; <span class="texMathInline">m</span> &#25345;&#26377;&#31867;&#30340;
&#23376;&#31867;&#65292;&#20294;&#19981;&#19968;&#23450;&#26159;&#21516;&#19968;&#20010;&#65292;<span class="NoteBox"><span class="NoteContent">&#20219;&#20309;&#31867;&#37117;&#26159;&#33258;&#36523;&#30340;&#23376;&#31867;&#65292;&#25925;&#26377;&#27492;&#35828;&#12290;&#8212;&#8212;<span class="emph">&#35793;&#27880;</span></span></span>&#22240;&#20026;
<span class="texMathInline">m</span> &#21487;&#33021;&#22312;&#30446;&#26631;&#23545;&#35937;&#30340;&#26576;&#20010;&#31062;&#20808;&#20013;&#22768;&#26126;&#12290;</p><p>&#35201;&#35299;&#37322;&#36825;&#31181;&#21306;&#21035;&#65292;&#32771;&#34385;&#12290;&#32473;&#31867; <span class="stt">c3</span> &#30340;&#23545;&#35937; <span class="stt">o3</span> &#21457;&#36865;&#28040;&#24687;
<span class="stt">m3</span>&#65292;&#25214;&#21040;&#30340;&#26159; <span class="stt">c2</span> &#30340;&#26041;&#27861; <span class="stt">m3</span>&#65292;&#23427;&#25191;&#34892; <span class="stt">super m1()</span>&#12290;<span class="stt">o3</span> &#30340;&#31867;&#26159;
<span class="stt">c3</span>&#65292;&#20854;&#29238;&#31867;&#26159; <span class="stt">c2</span>&#65292;&#20294;&#26041;&#27861;&#30340;&#25345;&#26377;&#31867;&#26159; <span class="stt">c2</span>&#65292;<span class="stt">c2</span> &#30340;&#36229;&#31867;&#26159; <span class="stt">c1</span>&#12290;
&#25152;&#20197;&#65292;&#25191;&#34892;&#30340;&#26159; <span class="stt">c1</span> &#30340;&#26041;&#27861; <span class="stt">m1</span>&#12290;&#36825;&#26159;<span class="emph">&#38745;&#24577;
&#26041;&#27861;&#20998;&#21457;</span> (<span class="emph">static method dispatch</span>) <a name="(idx._(gentag._1348))"></a>&#30340;&#20363;&#23376;&#12290;&#34429;&#28982;&#36827;&#34892;&#36229;&#31867;&#26041;&#27861;&#35843;&#29992;&#30340;&#23545;
&#35937;&#26159; <span class="stt">self</span>&#65292;&#26041;&#27861;&#20998;&#21457;&#21364;&#26159;&#38745;&#24577;&#30340;&#65292;&#22240;&#20026;&#35201;&#35843;&#29992;&#30340;&#26041;&#27861;&#21487;&#20197;&#20174;&#31243;&#24207;&#25991;&#26412;&#20013;&#25512;&#26029;&#20986;&#26469;&#65292;&#19982;
<span class="stt">self</span> &#25152;&#25351;&#31867;&#26080;&#20851;&#12290;</p><p>&#26412;&#20363;&#20013;&#65292;<span class="stt">c1</span> &#30340;&#26041;&#27861; <span class="stt">m1</span> &#35843;&#29992; <span class="stt">o3</span> &#30340;&#26041;&#27861; <span class="stt">m2</span>&#12290;&#36825;&#26159;&#26222;&#36890;&#26041;&#27861;&#35843;&#29992;&#65292;&#25152;
&#20197;&#20351;&#29992;&#21160;&#24577;&#20998;&#21457;&#65292;&#25214;&#20986;&#30340;&#26159; <span class="stt">c3</span> &#30340;&#26041;&#27861; <span class="stt">m2</span>&#65292;&#36820;&#22238; 33&#12290;
<a name="(idx._(gentag._1349))"></a>
<a name="(idx._(gentag._1350))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class c1 extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize () 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m1 () send self m2()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m2 () 13</span></p></td></tr><tr><td><p><span class="stt">class c2 extends c1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m1 () 22</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m2 () 23</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m3 () super m1()</span></p></td></tr><tr><td><p><span class="stt">class c3 extends c2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m1 () 32</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m2 () 33</span></p></td></tr><tr><td><p><span class="stt">let o3 = new c3()</span></p></td></tr><tr><td><p><span class="stt">in send o3 m3()</span></p></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#35299;&#37322; <span class="stt">super</span> &#35843;&#29992;&#19982; <span class="stt">self</span> &#30456;&#20114;&#20316;&#29992;&#30340;&#20363;&#23376;
<a name="(idx._(gentag._1351))"></a>
<a name="(idx._(gentag._1352))"></a><a name="(elem._fig-9..6)"></a></p></blockquote></blockquote><h4 class="heading">9.3<tt>&nbsp;</tt><a name="(part._s9..3)"></a>&#35821;&#35328;<span class="button-group"><a href="#(part._s9..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>&#25105;&#20204;&#30340;&#35821;&#35328; CLASSES &#30001; IMPLICIT-REFS &#25193;&#23637;&#32780;&#24471;&#65292;&#26032;&#22686;&#29983;&#25104;&#24335;&#22914;
&#25152;&#31034;&#12290;
<a name="(idx._(gentag._1353))"></a>
<a name="(idx._(gentag._1354))"></a>
&#31243;&#24207;&#24320;&#22836;&#26159;&#19968;&#20123;&#31867;&#22768;&#26126;&#65292;&#28982;&#21518;&#26159;&#19968;&#20010;&#24453;&#25191;&#34892;&#30340;&#34920;&#36798;&#24335;&#12290;&#31867;&#22768;&#26126;&#26377;&#21517;&#23383;&#65292;&#26368;&#30456;&#36817;&#30340;&#36229;&#31867;&#21517;&#65292;0
&#25110;&#22810;&#20010;&#23383;&#27573;&#22768;&#26126;&#65292;&#20197;&#21450; 0 &#25110;&#22810;&#20010;&#26041;&#27861;&#22768;&#26126;&#12290;&#26041;&#27861;&#22768;&#26126;&#31867;&#20284; <span class="stt">letrec</span> &#20013;&#30340;&#36807;&#31243;&#22768;&#26126;&#65292;
<a name="(idx._(gentag._1355))"></a>
<a name="(idx._(gentag._1356))"></a>
<a name="(idx._(gentag._1357))"></a>
<a name="(idx._(gentag._1358))"></a>
<a name="(idx._(gentag._1359))"></a>
&#26377;&#21517;&#23383;&#12289;&#24418;&#21442;&#21015;&#34920;&#20197;&#21450;&#20027;&#20307;&#12290;&#21516;&#26102;&#25105;&#20204;&#25193;&#23637;&#35821;&#35328;&#65292;&#25903;&#25345;&#22810;&#21442;&#25968;&#36807;&#31243;&#12289;&#22810;&#22768;&#26126; <span class="stt">let</span> &#21644;&#22810;
&#22768;&#26126; <span class="stt">letrec</span> &#34920;&#36798;&#24335;&#65292;&#36824;&#26377;&#20123;&#20854;&#20182;&#25805;&#20316;&#65292;&#22914;&#21152;&#27861;&#21644; <span class="stt">list</span>&#12290;
<a name="(idx._(gentag._1360))"></a>
&#21015;&#34920;&#25805;&#20316;&#21516;ex3.9&#12290;&#26368;&#21518;&#65292;&#25105;&#20204;&#22686;&#21152; <span class="stt">begin</span> &#34920;&#36798;&#24335;&#65292;
<a name="(idx._(gentag._1361))"></a>
&#21516;ex4.4&#65292;&#23427;&#20174;&#24038;&#21040;&#21491;&#27714;&#20986;&#23376;&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#36820;&#22238;&#26368;&#21518;&#19968;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;</p><p><div class="SIntrapara">&#25105;&#20204;&#26032;&#22686;&#23545;&#35937;&#21644;&#21015;&#34920;&#34920;&#36798;&#20540;&#65292;&#20110;&#26159;&#26377;
</div><div class="SIntrapara"><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc} + \mathit{Listof(ExpVal)} + \mathit{Obj}\\
\mathit{DenVal} &amp;= \mathit{Ref(ExpVal)}\end{align*}</span></p></blockquote></div><div class="SIntrapara"><blockquote class="SubFlow"><p>&#25105;&#20204;&#20889; <span class="texMathInline">\mathit{Listof(ExpVal)}</span>&#65292;&#34920;&#31034;&#21015;&#34920;&#21487;&#20197;&#21253;&#21547;&#20219;&#20309;&#34920;&#36798;&#20540;&#12290;</p></blockquote></div></p><p>&#25105;&#20204;&#23558;&#22312;<a href="#%28part._s9..4..1%29" data-pltdoc="x">&#23545;&#35937;</a>&#32771;&#23519; <span class="texMathInline">\mathit{Obj}</span>&#12290;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#31867;&#26082;&#19981;&#26159;&#25351;&#20195;&#20540;&#65292;&#20063;
&#19981;&#26159;&#34920;&#36798;&#20540;&#65306;&#23427;&#20204;&#33021;&#20316;&#20026;&#23545;&#35937;&#30340;&#19968;&#37096;&#20998;&#65292;&#20294;&#19981;&#33021;&#32465;&#23450;&#21040;&#21464;&#37327;&#25110;&#26159;&#25104;&#20026;&#34920;&#36798;&#24335;&#30340;&#20540;&#65288;&#20294;&#35201;
&#30475;&#30475;ex9.29&#65289;&#12290;</p><blockquote class="EoplFigure"><p>[!ht]
<span class="Iidentity">\begin{align*}   \mathit{Program} &amp;::= \{\mathit{ClassDecl}\}^{*} \phantom{x} \mathit{Expression} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">a-program (class-decls body)</span>} \\[5pt]
 \mathit{ClassDecl} &amp;::= <span class="stt">class </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> extends </span><span class="Iidentity">\mathit{Identifier}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \phantom{x}\{<span class="stt">field </span><span class="Iidentity">\mathit{Identifier}</span>\}^{*}\phantom{x}\{\mathit{MethodDecl}\}^{*} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{\begin{math}\begin{alignedat}{-1}
                                  &amp;<span class="stt">a-class-decl</span> \\
                                  &amp;\phantom{x}<span class="stt">(</span><span class="stt">class-name super-name</span> \\
                                  &amp;\phantom{xx}<span class="stt">field-names method-decls</span><span class="stt">)</span>
                                 \end{alignedat}\end{math}} \\[5pt]
\mathit{MethodDecl} &amp;::= <span class="stt">method </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\{\mathit{Identifier}\}^{*(,)}</span><span class="stt">) </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">a-method-decl (method-name vars body)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">new </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\{\mathit{Expression}\}^{*(,)}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">new-object-exp (class-name rands)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">send </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\{\mathit{Expression}\}^{*(,)}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">method-call-exp (obj-exp method-name rands)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">super </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\{\mathit{Expression}\}^{*(,)}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">super-call-exp (method-name rands)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">self</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">self-exp</span>}\end{align*}</span></p><blockquote class="caption"><p>&#31616;&#21333;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#20013;&#30340;&#26032;&#22686;&#29983;&#25104;&#24335;<a name="(elem._fig-9..7)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1362))"></a>
&#25105;&#20204;&#26032;&#22686;&#20102;&#22235;&#31181;&#34920;&#36798;&#24335;&#12290;<span class="stt">new</span> &#34920;&#36798;&#24335;&#21019;&#24314;&#25351;&#23450;&#31867;&#30340;&#23545;&#35937;&#65292;&#28982;&#21518;&#35843;&#29992; <span class="stt">initialize</span>
&#26041;&#27861;&#21021;&#22987;&#21270;&#23545;&#35937;&#30340;&#23383;&#27573;&#12290;<span class="stt">rands</span> &#27714;&#20540;&#21518;&#65292;&#20256;&#32473; <span class="stt">initialize</span> &#26041;&#27861;&#12290;&#36825;&#20010;&#26041;&#27861;&#35843;&#29992;
&#30340;&#36820;&#22238;&#20540;&#34987;&#30452;&#25509;&#25243;&#24323;&#65292;&#26032;&#23545;&#35937;&#21017;&#20316;&#20026; <span class="stt">new</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#36820;&#22238;&#12290;</p><p><a name="(idx._(gentag._1363))"></a>
<span class="stt">self</span> &#34920;&#36798;&#24335;&#36820;&#22238;&#24403;&#21069;&#26041;&#27861;&#25805;&#20316;&#30340;&#23545;&#35937;&#12290;</p><p><a name="(idx._(gentag._1364))"></a>
<a name="(idx._(gentag._1365))"></a>
<span class="stt">send</span> &#34920;&#36798;&#24335;&#21253;&#21547;&#19968;&#20010;&#20540;&#20026;&#23545;&#35937;&#30340;&#34920;&#36798;&#24335;&#65292;&#19968;&#20010;&#26041;&#27861;&#21517;&#65292;&#20197;&#21450; 0 &#25110;&#22810;&#20010;&#25805;&#20316;&#25968;&#12290;&#23427;&#20174;
&#23545;&#35937;&#30340;&#31867;&#20013;&#25214;&#20986;&#25351;&#23450;&#30340;&#26041;&#27861;&#65292;&#28982;&#21518;&#27714;&#25805;&#20316;&#25968;&#30340;&#20540;&#65292;&#23558;&#24471;&#21040;&#30340;&#23454;&#21442;&#20256;&#32473;&#35813;&#26041;&#27861;&#12290;&#23601;&#20687;
IMPLICIT-REFS &#37027;&#26679;&#65292;&#23427;&#35201;&#20026;&#27599;&#20010;&#23454;&#21442;&#20998;&#37197;&#19968;&#20010;&#26032;&#20301;&#32622;&#65292;&#28982;&#21518;&#23558;&#26041;&#27861;&#30340;&#24418;&#21442;&#19982;&#23545;&#24212;&#20301;&#32622;&#30340;&#24341;
&#29992;&#32465;&#23450;&#36215;&#26469;&#65292;&#24182;&#22312;&#36825;&#20010;&#35789;&#27861;&#32465;&#23450;&#20316;&#29992;&#22495;&#20869;&#27714;&#26041;&#27861;&#20027;&#20307;&#30340;&#20540;&#12290;
<a name="(idx._(gentag._1366))"></a></p><p><a name="(idx._(gentag._1367))"></a>
<span class="stt">super-call</span> &#34920;&#36798;&#24335;&#21253;&#21547;&#19968;&#20010;&#26041;&#27861;&#21517;&#21644; 0 &#25110;&#22810;&#20010;&#21442;&#25968;&#12290;&#23427;&#20174;&#34920;&#36798;&#24335;&#25345;&#26377;&#31867;&#30340;&#36229;&#31867;&#24320;&#22987;&#65292;
&#25214;&#20986;&#25351;&#23450;&#30340;&#26041;&#27861;&#65292;&#28982;&#21518;&#20197;&#24403;&#21069;&#23545;&#35937;&#20026; <span class="stt">self</span>&#65292;&#27714;&#20986;&#26041;&#27861;&#20027;&#20307;&#30340;&#20540;&#12290;
<a name="(idx._(gentag._1368))"></a></p><h4 class="heading">9.4<tt>&nbsp;</tt><a name="(part._s9..4)"></a>&#35299;&#37322;&#22120;<span class="button-group"><a href="#(part._s9..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1369))"></a>
<a name="(idx._(gentag._1370))"></a>
<a name="(idx._(gentag._1371))"></a>
&#25105;&#20204;&#27714;&#31243;&#24207;&#30340;&#20540;&#26102;&#65292;&#39318;&#20808;&#29992; <span class="stt">initialize-class-env!</span> &#22788;&#29702;&#25152;&#26377;&#31867;&#22768;&#26126;&#65292;&#28982;&#21518;&#27714;&#34920;&#36798;&#24335;
&#30340;&#20540;&#12290;&#36807;&#31243; <span class="stt">initialize-class-env!</span> &#21019;&#24314;&#19968;&#20010;&#20840;&#23616;<span class="emph">&#31867;
&#29615;&#22659;</span> (<span class="emph">class environment</span>)&#65292;&#23558;&#21508;&#20010;&#31867;&#21517;&#26144;&#23556;&#21040;&#31867;&#30340;&#26041;&#27861;&#12290;&#22240;&#20026;&#36825;&#20010;&#29615;&#22659;&#26159;&#20840;&#23616;&#30340;&#65292;&#25105;&#20204;&#29992;&#19968;&#20010; Scheme &#21464;&#37327;&#34920;&#31034;
&#23427;&#12290;&#22312;<a href="#%28part._s9..4..3%29" data-pltdoc="x">&#31867;&#21644;&#31867;&#29615;&#22659;</a>&#25105;&#20204;&#20877;&#35814;&#32454;&#35752;&#35770;&#31867;&#29615;&#22659;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-store!</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-class-env!</span><span class="hspace">&nbsp;</span><span class="RktSym">class-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20687;&#20043;&#21069;&#37027;&#26679;&#65292;&#35821;&#35328;&#20013;&#30340;&#21508;&#31181;&#34920;&#36798;&#24335;&#8212;&#8212;&#21253;&#25324;&#22235;&#31181;&#26032;&#29983;&#25104;&#24335;&#8212;&#8212;&#22312;&#36807;&#31243; <span class="stt">value-of</span> &#37324;&#37117;&#26377;&#23545;
&#24212;&#30340;&#35821;&#21477;&#12290;</p><p>&#25105;&#20204;&#20381;&#27425;&#32771;&#34385;&#21508;&#20010;&#26032;&#22686;&#30340;&#34920;&#36798;&#24335;&#12290;</p><p><a name="(idx._(gentag._1372))"></a>
<a name="(idx._(gentag._1373))"></a>
&#34920;&#36798;&#24335;&#38656;&#35201;&#27714;&#20540;&#65292;&#36890;&#24120;&#26159;&#22240;&#20026;&#23427;&#26159;&#25805;&#20316;&#26576;&#20010;&#23545;&#35937;&#30340;&#26041;&#27861;&#30340;&#19968;&#37096;&#20998;&#12290;&#22312;&#24403;&#21069;&#29615;&#22659;&#20013;&#65292;&#36825;&#20010;&#23545;&#35937;
&#32465;&#23450;&#21040;&#20266;&#21464;&#37327; <span class="stt">%self</span>&#12290;&#25105;&#20204;&#31216;&#20043;&#20026;<span class="emph">&#20266;&#21464;&#37327;</span> (<span class="emph">pseudo-variable</span>) &#26159;&#22240;&#20026;&#23427;&#34429;&#28982;
&#20687;&#26222;&#36890;&#21464;&#37327;&#37027;&#26679;&#36981;&#24490;&#35789;&#27861;&#32465;&#23450;&#65292;&#20294;&#21364;&#20687;&#19979;&#38754;&#23558;&#35201;&#25506;&#35752;&#30340;&#37027;&#26679;&#65292;&#20855;&#26377;&#19968;&#20123;&#29420;&#29305;&#24615;&#36136;&#12290;&#31867;&#20284;&#22320;&#65292;
&#24403;&#21069;&#26041;&#27861;&#25345;&#26377;&#31867;&#30340;&#36229;&#31867;&#21517;&#23383;&#32465;&#23450;&#21040;&#20266;&#21464;&#37327; <span class="stt">%super</span>&#12290;</p><p><a name="(idx._(gentag._1374))"></a>
&#27714; <span class="stt">self</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#26102;&#65292;&#36820;&#22238;&#30340;&#26159; <span class="stt">%self</span> &#30340;&#20540;&#12290;&#36825;&#23545;&#24212; <span class="stt">value-of</span> &#20013;&#30340;&#35821;
&#21477;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">self-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">%self</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1375))"></a></div></p></blockquote><p><a name="(idx._(gentag._1376))"></a>
&#27714; <span class="stt">send</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#26102;&#65292;&#25805;&#20316;&#25968;&#21644;&#23545;&#35937;&#34920;&#36798;&#24335;&#37117;&#38656;&#35201;&#27714;&#20540;&#12290;&#25105;&#20204;&#20174;&#23545;&#35937;&#20013;&#25214;&#20986;&#23427;&#30340;&#31867;
&#21517;&#65292;&#28982;&#21518;&#29992; <span class="stt">find-method</span> &#25214;&#20986;&#26041;&#27861;&#12290;<span class="stt">find-method</span> &#21462;&#19968;&#20010;&#31867;&#21517;&#21644;&#19968;&#20010;&#26041;&#27861;&#21517;&#65292;
&#36820;&#22238;&#19968;&#20010;&#26041;&#27861;&#12290;&#25509;&#30528;&#65292;&#25105;&#20204;&#29992;&#24403;&#21069;&#23545;&#35937;&#21644;&#26041;&#27861;&#30340;&#21442;&#25968;&#35843;&#29992;&#36825;&#20010;&#26041;&#27861;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-call-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">obj-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">args</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">values-of-exps</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">obj</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-method</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">find-method</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">object-&gt;class-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">args</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1377))"></a></div></p></blockquote><p><a name="(idx._(gentag._1378))"></a>
&#36229;&#31867;&#35843;&#29992;&#19982;&#26222;&#36890;&#26041;&#27861;&#35843;&#29992;&#31867;&#20284;&#65292;&#19981;&#21516;&#20043;&#22788;&#26159;&#65292;&#35201;&#22312;&#34920;&#36798;&#24335;&#25345;&#26377;&#31867;&#30340;&#36229;&#31867;&#20013;&#26597;&#25214;&#26041;&#27861;&#12290;
&#23427;&#22312; <span class="stt">value-of</span> &#20013;&#30340;&#23545;&#24212;&#35821;&#21477;&#26159;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">super-call-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">method-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">args</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">values-of-exps</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">obj</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">%self</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-method</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">find-method</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">%super</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">args</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1379))"></a></div></p></blockquote><p>&#26368;&#21518;&#19968;&#39033;&#24037;&#20316;&#26159;&#21019;&#24314;&#23545;&#35937;&#12290;&#27714; <span class="stt">new</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#27714;&#25805;&#20316;&#25968;&#30340;&#20540;&#65292;&#24182;&#26681;&#25454;&#31867;
&#21517;&#21019;&#24314;&#19968;&#20010;&#26032;&#23545;&#35937;&#12290;&#28982;&#21518;&#25105;&#20204;&#35843;&#29992;&#23545;&#35937;&#30340;&#21021;&#22987;&#21270;&#20989;&#25968;&#65292;&#20294;&#24573;&#30053;&#36825;&#20010;&#20989;&#25968;&#30340;&#20540;&#12290;&#26368;&#21518;&#65292;&#36820;&#22238;
&#35813;&#23545;&#35937;&#12290;</p><blockquote class="Small"><p><div class="SIntrapara"><a name="(idx._(gentag._1380))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">new-object-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">class-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">args</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">values-of-exps</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">obj</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">new-object</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">class-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-method</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">find-method</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">class-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">initialize</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">args</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p></blockquote><p>&#25509;&#19979;&#26469;&#65292;&#25105;&#20204;&#30830;&#23450;&#22914;&#20309;&#34920;&#31034;&#23545;&#35937;&#12289;&#26041;&#27861;&#21644;&#31867;&#12290;&#25105;&#20204;&#36890;&#36807;&#19968;&#20010;&#31034;&#20363;&#35299;&#37322;&#36825;&#31181;&#34920;&#31034;&#65292;
&#22914; &#25152;&#31034;&#12290;</p><blockquote class="EoplFigure"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class c1 extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize ()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = 11;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set y = 12</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m1 () ... x ... y ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m2 () ... send self m3() ...</span></p></td></tr><tr><td><p><span class="stt">class c2 extends c1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field y</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize ()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">super initialize();</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set y = 22</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m1 (u,v) ... x ... y ...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m3 () ...</span></p></td></tr><tr><td><p><span class="stt">class c3 extends c2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field z</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize ()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">super initialize();</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set x = 31;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set z = 32</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method m3 () ... x ... y ... z ...</span></p></td></tr><tr><td><p><span class="stt">let o3 = new c3()</span></p></td></tr><tr><td><p><span class="stt">in send o3 m1(7,8)</span></p></td></tr></table></blockquote><blockquote class="caption"><p>OOP &#23454;&#29616;&#30340;&#31034;&#20363;&#31243;&#24207;<a name="(elem._fig-9..8)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCentered"><p><img src="simple-object.svg" alt="简单对象" width="595.5pt" height="139.5pt"/></p></blockquote><blockquote class="caption"><p>&#31616;&#21333;&#23545;&#35937;<a name="(elem._fig-9..9)"></a></p></blockquote></blockquote><h5 class="heading">9.4.1<tt>&nbsp;</tt><a name="(part._s9..4..1)"></a>&#23545;&#35937;<span class="button-group"><a href="#(part._s9..4..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1381))"></a>
&#25105;&#20204;&#29992;&#21253;&#21547;&#31867;&#21517;&#21644;&#23383;&#27573;&#24341;&#29992;&#21015;&#34920;&#30340;&#25968;&#25454;&#31867;&#22411;&#34920;&#31034;&#23545;&#35937;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">object</span><span class="hspace">&nbsp;</span><span class="RktSym">object?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-name</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fields</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">reference?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#22312;&#21015;&#34920;&#20013;&#65292;&#25105;&#20204;&#25226;&#8220;&#26368;&#24180;&#38271;&#8221;&#31867;&#30340;&#23383;&#27573;&#25490;&#22312;&#21069;&#38754;&#12290;&#36825;&#26679;&#65292;
&#22312; &#20013;&#65292;&#31867; <span class="stt">c1</span> &#23545;&#35937;&#30340;&#23383;&#27573;&#25490;&#21015;&#20026; <span class="stt">(x y)</span>&#65307;&#31867; <span class="stt">c2</span> &#23545;
&#35937;&#30340;&#23383;&#27573;&#25490;&#21015;&#20026; <span class="stt">(x y y)</span>&#65292;&#20854;&#20013;&#65292;&#31532;&#20108;&#20010; <span class="stt">y</span> &#26159; <span class="stt">c2</span> &#20013;&#30340;&#65307;&#31867; <span class="stt">c3</span> &#23545;
&#35937;&#30340;&#23383;&#27573;&#25490;&#21015;&#20026; <span class="stt">(x y y x z)</span>&#12290; &#20013;&#23545;&#35937; <span class="stt">o3</span> &#30340;&#34920;&#31034;
&#22914; &#25152;&#31034;&#12290;&#24403;&#28982;&#65292;&#25105;&#20204;&#24819;&#35753;&#31867; <span class="stt">c3</span> &#20013;&#30340;&#26041;&#27861;&#20351;&#29992; <span class="stt">c3</span> &#20013;&#22768;
&#26126;&#30340;&#23383;&#27573; <span class="stt">x</span>&#65292;&#32780;&#19981;&#26159; <span class="stt">c1</span> &#20013;&#22768;&#26126;&#30340;&#12290;&#22312;&#24314;&#31435;&#26041;&#27861;&#20027;&#20307;&#30340;&#27714;&#20540;&#29615;&#22659;&#26102;&#65292;&#25105;&#20204;&#35201;&#22788;&#29702;
&#36825;&#19968;&#28857;&#12290;</p><p>&#36825;&#31181;&#26041;&#27861;&#26377;&#20010;&#22909;&#22788;&#65306;&#23545; <span class="stt">c3</span> &#30340;&#20219;&#20309;&#23376;&#31867;&#65292;&#21015;&#34920;&#20013;&#30340;&#30456;&#21516;&#20301;&#32622;&#20855;&#26377;&#30456;&#21516;&#23383;&#27573;&#65292;&#22240;&#20026;&#21518;&#28155;
&#21152;&#30340;&#20219;&#20309;&#23383;&#27573;&#37117;&#20250;&#20986;&#29616;&#22312;&#36825;&#20123;&#23383;&#27573;&#30340;&#21491;&#36793;&#12290;&#22312; <span class="stt">c3</span> &#20219;&#19968;&#23376;&#31867;&#23450;&#20041;&#30340;&#26576;&#20010;&#26041;&#27861;&#20013;&#65292;
<span class="stt">x</span> &#22312;&#20160;&#20040;&#20301;&#32622;&#21602;&#65311;&#25105;&#20204;&#30693;&#36947;&#65292;&#22914;&#26524;&#27809;&#26377;&#37325;&#23450;&#20041;&#65292;<span class="stt">x</span> &#22312;&#25152;&#26377;&#36825;&#20123;&#26041;&#27861;&#20013;&#30340;&#20301;&#32622;&#19968;&#23450;
&#26159; 3&#12290;&#36825;&#26679;&#65292;&#22312;&#22768;&#26126;&#23383;&#27573;&#21464;&#37327;&#26102;&#65292;&#21464;&#37327;&#23545;&#24212;&#20540;&#30340;&#20301;&#32622;&#20445;&#25345;&#19981;&#21464;&#12290;&#36825;&#19968;&#29305;&#28857;&#20351;&#23383;&#27573;&#24341;&#29992;&#30340;&#20301;&#32622;
&#33021;&#22815;&#38745;&#24577;&#22320;&#30830;&#23450;&#65292;&#23601;&#20687;&#25105;&#20204;&#22312;<a href="#%28part._s3..6%29" data-pltdoc="x">&#28040;&#38500;&#21464;&#37327;&#21517;</a>&#20013;&#22788;&#29702;&#21464;&#37327;&#37027;&#26679;&#12290;</p><p><a name="(idx._(gentag._1382))"></a>
&#21019;&#24314;&#26032;&#23545;&#35937;&#24456;&#23481;&#26131;&#12290;&#25105;&#20204;&#21482;&#38656;&#21019;&#24314; <span class="stt">an-object</span>&#65292;&#23427;&#26377;&#19968;&#20010;&#26032;&#24341;&#29992;&#21015;&#34920;&#65292;&#21015;&#34920;&#38271;&#24230;&#19982;&#23545;
&#35937;&#30340;&#23383;&#27573;&#25968;&#30446;&#30456;&#31561;&#12290;&#35201;&#30830;&#23450;&#20854;&#25968;&#30446;&#65292;&#25105;&#20204;&#20174;&#23545;&#35937;&#25152;&#23646;&#31867;&#20013;&#21462;&#20986;&#23383;&#27573;&#21464;&#37327;&#21015;&#34920;&#12290;&#25105;&#20204;&#29992;&#19981;&#21512;&#27861;
&#30340;&#20540;&#21021;&#22987;&#21270;&#25152;&#26377;&#20301;&#32622;&#65292;&#20197;&#20415;&#25506;&#30693;&#31243;&#24207;&#26159;&#21542;&#20351;&#29992;&#20102;&#26410;&#21021;&#22987;&#21270;&#30340;&#20301;&#32622;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{ClassName} = \mathit{Sym}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">new-object</span></span> : <span class="texMathInline">\mathit{ClassName} \to \mathit{Obj}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">new-object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">class-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">field-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">uninitialized-field</span><span class="hspace">&nbsp;</span><span class="RktSym">field-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-&gt;field-names</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-class</span><span class="hspace">&nbsp;</span><span class="RktSym">class-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><h5 class="heading">9.4.2<tt>&nbsp;</tt><a name="(part._s9..4..2)"></a>&#26041;&#27861;<span class="button-group"><a href="#(part._s9..4..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1383))"></a>
<a name="(idx._(gentag._1384))"></a>
<a name="(idx._(gentag._1385))"></a>
<a name="(idx._(gentag._1386))"></a>
&#25509;&#19979;&#26469;&#25105;&#20204;&#22788;&#29702;&#26041;&#27861;&#12290;&#26041;&#27861;&#23601;&#20687;&#36807;&#31243;&#65292;&#20294;&#26159;&#23427;&#20204;&#19981;&#20445;&#23384;&#29615;&#22659;&#65292;&#32780;&#26159;&#35760;&#24405;&#25152;&#24341;&#29992;&#30340;&#23383;&#27573;&#21517;&#12290;&#26041;
&#27861;&#35843;&#29992;&#22312;&#22914;&#19979;&#29615;&#22659;&#20013;&#25191;&#34892;&#20854;&#20027;&#20307;&#65306;</p><ul><li><p>&#26041;&#27861;&#30340;&#24418;&#21442;&#32465;&#23450;&#21040;&#26032;&#24341;&#29992;&#65292;&#24341;&#29992;&#21021;&#22987;&#21270;&#20026;&#23454;&#21442;&#30340;&#20540;&#12290;&#36825;&#19982; IMPLICIT-REFS &#20013;&#30340;
<span class="stt">apply-procedure</span> &#34892;&#20026;&#31867;&#20284;&#12290;</p></li><li><p>&#20266;&#21464;&#37327; <span class="stt">%self</span> &#32465;&#23450;&#21040;&#24403;&#21069;&#23545;&#35937;&#65292;<span class="stt">%super</span> &#32465;&#23450;&#21040;&#24403;&#21069;&#26041;&#27861;&#30340;&#36229;&#31867;&#12290;
<a name="(idx._(gentag._1387))"></a></p></li><li><p>&#21487;&#35265;&#23383;&#27573;&#21517;&#32465;&#23450;&#21040;&#24403;&#21069;&#23545;&#35937;&#30340;&#23383;&#27573;&#12290;&#35201;&#23454;&#29616;&#36825;&#28857;&#65292;&#25105;&#20204;&#23450;&#20041;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">method</span><span class="hspace">&nbsp;</span><span class="RktSym">method?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-method</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">super-name</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">field-names</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-method</span></span> : <span class="texMathInline">\mathit{Method} \times \mathit{Obj} \times \mathit{Listof(ExpVal)} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-method</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">self</span><span class="hspace">&nbsp;</span><span class="RktSym">args</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">method</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-method</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">super-name</span><span class="hspace">&nbsp;</span><span class="RktSym">field-names</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env*</span><span class="hspace">&nbsp;</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">newref</span><span class="hspace">&nbsp;</span><span class="RktSym">args</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-with-self-and-super</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">self</span><span class="hspace">&nbsp;</span><span class="RktSym">super-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env*</span><span class="hspace">&nbsp;</span><span class="RktSym">field-names</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">object-&gt;fields</span><span class="hspace">&nbsp;</span><span class="RktSym">self</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></li></ul><p>&#36825;&#37324;&#65292;&#25105;&#20204;&#20351;&#29992;ex2.10 &#20013;&#30340; <span class="stt">extend-env*</span>&#12290;&#23427;&#22312;&#25193;&#23637;&#29615;&#22659;&#26102;&#65292;&#25226;&#21464;
&#37327;&#21015;&#34920;&#32465;&#23450;&#21040;&#25351;&#20195;&#20540;&#30340;&#21015;&#34920;&#12290;&#25105;&#20204;&#36824;&#32473;&#29615;&#22659;&#25509;&#21475;&#26032;&#22686;&#36807;&#31243;
<span class="stt">extend-env-with-self-and-super</span>&#65292;&#20998;&#21035;&#23558; <span class="stt">%self</span> &#21644; <span class="stt">%super</span> &#32465;&#23450;&#21040;&#23545;&#35937;
&#21644;&#31867;&#21517;&#12290;</p><p>&#35201;&#30830;&#20445;&#21508;&#26041;&#27861;&#30475;&#21040;&#27491;&#30830;&#30340;&#23383;&#27573;&#65292;&#25105;&#20204;&#22312;&#26500;&#24314; <span class="stt">field-names</span> &#21015;&#34920;&#26102;&#38656;&#35201;&#23567;&#24515;&#12290;&#21508;&#26041;&#27861;&#21482;
&#24212;&#35265;&#21040;&#26368;&#21518;&#19968;&#20010;&#22768;&#26126;&#30340;&#21516;&#21517;&#23383;&#27573;&#65292;&#20854;&#20182;&#21516;&#21517;&#23383;&#27573;&#24212;&#34987;&#36974;&#34109;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#26500;&#24314;
<span class="stt">field-names</span> &#21015;&#34920;&#26102;&#65292;&#25226;&#26368;&#21491;&#36793;&#20043;&#22806;&#30340;&#20986;&#29616;&#30340;&#27599;&#20010;&#37325;&#22797;&#21517;&#23383;&#26367;&#25442;&#20026;&#26032;&#21517;&#12290;
 &#20013;&#30340;&#31243;&#24207;&#23545;&#24212;&#30340; <span class="stt">field-names</span> &#22914;&#19979;</p><blockquote class="SubFlow"><p><div class="SIntrapara"><a name="(elem._field-renaming)"></a></div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span style="font-weight: bold">&#31867;</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span style="font-weight: bold">&#23450;&#20041;&#30340;&#23383;&#27573;</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span style="font-weight: bold">&#23383;&#27573;</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span style="font-weight: bold"><span class="stt">field-names</span></span></p></td></tr><tr><td><p><span class="stt">c1</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="stt">x, y</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="stt">(x y)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="stt">(x</span><span class="texMathInline">\phantom{xxx}</span><span class="stt">y)</span></p></td></tr><tr><td><p><span class="stt">c2</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="stt">y</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="stt">(x y y)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="stt">(x</span><span class="texMathInline">\phantom{xxx}</span><span class="stt">y%1 y)</span></p></td></tr><tr><td><p><span class="stt">c3</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="stt">x, z</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="stt">(x y y x z)</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="stt">(x%1</span><span class="texMathInline">\phantom{x}</span><span class="stt">y%1 y x z)</span></p></td></tr></table></div></p><p>&#30001;&#20110;&#26041;&#27861;&#20027;&#20307;&#26080;&#20174;&#24471;&#30693; <span class="stt">x%1</span> &#21644; <span class="stt">y%1</span>&#65292;&#25152;&#20197;&#23427;&#20204;&#21482;&#33021;&#35265;&#21040;&#21508;&#23383;&#27573;&#21464;&#37327;&#22312;&#26368;&#21491;&#36793;&#30340;
&#22768;&#26126;&#65292;&#27491;&#21512;&#26399;&#26395;&#12290;</p></blockquote><p> &#23637;&#31034;&#30340;&#29615;&#22659;&#65292;&#26159;&#27714; &#20013; <span class="stt">send o3 m1(7,8)</span> &#20869;&#26041;
&#27861;&#20027;&#20307;&#30340;&#20540;&#26102;&#21019;&#24314;&#30340;&#12290;&#36825;&#24352;&#22270;&#34920;&#26126;&#65292;&#24341;&#29992;&#21015;&#34920;&#21487;&#33021;&#27604;&#21464;&#37327;&#21015;&#34920;&#38271;&#65306;&#21464;&#37327;&#21015;&#34920;&#21482;&#26159;
<span class="stt">(x y%1 y)</span>&#65292;&#22240;&#20026; <span class="stt">c2</span> &#30340;&#26041;&#27861; <span class="stt">m1</span> &#21482;&#33021;&#35265;&#21040;&#36825;&#20123;&#23383;&#27573;&#21464;&#37327;&#65292;&#20294;
<span class="stt">(object-&gt;fields self)</span> &#30340;&#20540;&#26159;&#23545;&#35937;&#20013;&#25152;&#26377;&#23383;&#27573;&#30340;&#21015;&#34920;&#12290;&#19981;&#36807;&#65292;&#30001;&#20110;&#19977;&#20010;&#21487;&#35265;&#23383;&#27573;&#21464;
&#37327;&#30340;&#20540;&#26159;&#21015;&#34920;&#20013;&#30340;&#22836;&#19977;&#20010;&#20803;&#32032;&#65292;&#32780;&#19988;&#25105;&#20204;&#25226;&#31532;&#19968;&#20010; <span class="stt">y</span> &#37325;&#21629;&#21517;&#20026; <span class="stt">y%1</span>&#65288;&#35813;&#26041;&#27861;&#23545;
&#27492;&#19968;&#26080;&#25152;&#30693;&#65289;&#65292;&#26041;&#27861; <span class="stt">m1</span> &#23558;&#25226;&#21464;&#37327; <span class="stt">y</span> &#19982; <span class="stt">c2</span> &#20013;&#22768;&#26126;&#30340; <span class="stt">y</span> &#20851;&#32852;&#36215;&#26469;&#65292;
&#27491;&#21512;&#26399;&#26395;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="env-for-method.svg" alt="方法调用时的环境" width="646.5pt" height="376.5pt"/></p></blockquote></div></p><p><div class="SIntrapara"><a name="(idx._(gentag._1388))"></a>
</div><div class="SIntrapara"><blockquote class="caption"><p>&#26041;&#27861;&#35843;&#29992;&#26102;&#30340;&#29615;&#22659;<a name="(elem._fig-9..10)"></a></p></blockquote></div></p></blockquote><p><a name="(idx._(gentag._1389))"></a>
&#24403; <span class="stt">self</span> &#30340;&#25345;&#26377;&#31867;&#21644;&#25152;&#23646;&#31867;&#30456;&#21516;&#26102;&#65292;&#21464;&#37327;&#21015;&#34920;&#30340;&#38271;&#24230;&#36890;&#24120;&#19982;&#23383;&#27573;&#24341;&#29992;&#21015;&#34920;&#30456;&#21516;&#12290;&#22914;&#26524;
&#25345;&#26377;&#31867;&#20301;&#20110;&#31867;&#38142;&#30340;&#19978;&#31471;&#65292;&#37027;&#20040;&#20301;&#32622;&#25968;&#21487;&#33021;&#22810;&#20110;&#23383;&#27573;&#21464;&#37327;&#25968;&#30446;&#65292;&#20294;&#23545;&#24212;&#20110;&#23383;&#27573;&#21464;&#37327;&#30340;&#20540;&#20301;&#20110;&#21015;
&#34920;&#24320;&#22836;&#65292;&#20854;&#20313;&#20540;&#21017;&#19981;&#21487;&#35265;&#12290;<a name="(idx._(gentag._1390))"></a>
<a name="(idx._(gentag._1391))"></a>
<a name="(idx._(gentag._1392))"></a>
<a name="(idx._(gentag._1393))"></a>
<a name="(idx._(gentag._1394))"></a></p><h5 class="heading">9.4.3<tt>&nbsp;</tt><a name="(part._s9..4..3)"></a>&#31867;&#21644;&#31867;&#29615;&#22659;<span class="button-group"><a href="#(part._s9..4..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1395))"></a>
<a name="(idx._(gentag._1396))"></a>
<a name="(idx._(gentag._1397))"></a>
<a name="(idx._(gentag._1398))"></a>
&#36804;&#20170;&#20026;&#27490;&#65292;&#25105;&#20204;&#30340;&#23454;&#29616;&#37117;&#20381;&#36182;&#20174;&#31867;&#21517;&#33719;&#21462;&#19982;&#31867;&#30456;&#20851;&#30340;&#20449;&#24687;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#38656;&#35201;
&#19968;&#20010;<span class="emph">&#31867;&#29615;&#22659;</span> (<span class="emph">class environment</span>) &#23436;&#25104;&#36825;&#19968;&#24037;&#20316;&#12290;&#31867;&#29615;&#22659;&#23558;&#27599;&#20010;&#31867;&#21517;&#19982;&#25551;&#36848;&#31867;&#30340;
&#25968;&#25454;&#32467;&#26500;&#20851;&#32852;&#36215;&#26469;&#12290;</p><p>&#31867;&#29615;&#22659;&#26159;&#20840;&#23616;&#30340;&#65306;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#31867;&#22768;&#26126;&#32858;&#38598;&#20110;&#31243;&#24207;&#24320;&#22836;&#65292;&#19988;&#23545;&#25972;&#20010;&#31243;&#24207;&#29983;&#25928;&#12290;&#25152;&#20197;&#65292;&#25105;
&#20204;&#29992;&#21517;&#20026; <span class="stt">the-class-env</span> &#30340;&#20840;&#23616;&#21464;&#37327;&#34920;&#31034;&#31867;&#29615;&#22659;&#65292;&#23427;&#21253;&#21547;&#21015;&#34920; <span class="stt">(&#31867;&#21517;,&#31867;)</span> &#30340;&#21015;
&#34920;&#65292;&#20294;&#25105;&#20204;&#29992;&#36807;&#31243; <span class="stt">add-to-class-env!</span> &#21644; <span class="stt">lookup-class</span> &#38544;&#34255;&#36825;&#19968;&#34920;&#31034;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{ClassEnv} = \mathit{Listof(List(ClassName, Class))}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">the-class-env</span></span> : <span class="texMathInline">\mathit{ClassEnv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">the-class-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">add-to-class-env!</span></span> : <span class="texMathInline">\mathit{ClassName} \times \mathit{Class} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">add-to-class-env!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-name</span><span class="hspace">&nbsp;</span><span class="RktSym">class</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-class-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">class-name</span><span class="hspace">&nbsp;</span><span class="RktSym">class</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">the-class-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">lookup-class</span></span> : <span class="texMathInline">\mathit{ClassName} \to \mathit{Class}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">lookup-class</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">maybe-pair</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">the-class-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">maybe-pair</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">maybe-pair</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-unknown-class</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23545;&#27599;&#20010;&#31867;&#65292;&#25105;&#20204;&#35760;&#24405;&#19977;&#26679;&#19996;&#35199;&#65306;&#36229;&#31867;&#30340;&#21517;&#23383;&#65292;&#23383;&#27573;&#21464;&#37327;&#30340;&#21015;&#34920;&#65292;&#20197;&#21450;&#23558;&#26041;&#27861;&#21517;&#26144;&#23556;&#21040;&#26041;&#27861;&#30340;
&#29615;&#22659;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">class</span><span class="hspace">&nbsp;</span><span class="RktSym">class?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-class</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">super-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">maybe</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">field-names</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-env</span><span class="hspace">&nbsp;</span><span class="RktSym">method-environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#65292;&#25105;&#20204;&#29992;&#35859;&#35789; <span class="stt">(maybe identifier?)</span> &#21028;&#26029;&#20540;&#26159;&#21542;&#20026;&#31526;&#21495;&#25110; <span class="stt">#f</span>&#12290;&#21518;&#19968;&#31181;&#24773;&#20917;
&#23545;&#26159;&#24517;&#39035;&#30340;&#65292;&#22240;&#20026;&#31867; <span class="stt">object</span> &#27809;&#26377;&#36229;&#31867;&#12290;<span class="stt">filed-names</span> &#26159;&#31867;&#30340;&#26041;&#27861;&#33021;&#35265;&#21040;&#30340;&#23383;&#27573;&#65292;
<span class="stt">method-env</span> &#26159;&#19968;&#29615;&#22659;&#65292;&#32473;&#20986;&#20102;&#31867;&#20013;&#27599;&#20010;&#26041;&#27861;&#21517;&#30340;&#23450;&#20041;&#12290;</p></blockquote><p>&#25105;&#20204;&#21021;&#22987;&#21270;&#31867;&#29615;&#22659;&#26102;&#65292;&#20026;&#31867; <span class="stt">object</span> &#28155;&#21152;&#19968;&#20010;&#32465;&#23450;&#12290;&#23545;&#27599;&#20010;&#22768;&#26126;&#65292;&#25105;&#20204;&#21521;&#31867;&#29615;&#22659;&#28155;&#21152;
&#19968;&#20010;&#26032;&#32465;&#23450;&#65292;&#23558;&#31867;&#21517;&#32465;&#23450;&#21040;&#19968;&#20010; <span class="stt">class</span>&#65292;&#23427;&#21253;&#21547;&#36229;&#31867;&#21517;&#12289;&#31867;&#20013;&#26041;&#27861;&#30340;
<span class="stt">field-names</span> &#20197;&#21450;&#31867;&#20013;&#26041;&#27861;&#30340;&#29615;&#22659;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a name="(elem._initialize-class-env!)"></a><span style="font-weight: bold"><span class="stt">initialize-class-env!</span></span> : <span class="texMathInline">\mathit{Listof(ClassDecl)} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">initialize-class-env!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set!</span><span class="hspace">&nbsp;</span><span class="RktSym">the-class-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">object</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-class</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for-each</span><span class="hspace">&nbsp;</span><span class="RktSym">initialize-class-decl!</span><span class="hspace">&nbsp;</span><span class="RktSym">c-decls</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">initialize-class-decl!</span></span> : <span class="texMathInline">\mathit{ClassDecl} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">initialize-class-decl!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-decl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">class-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">c-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-class-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-name</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktSym">f-names</span><span class="hspace">&nbsp;</span><span class="RktSym">m-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">f-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append-field-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-&gt;field-names</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-class</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">f-names</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-to-class-env!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">c-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-class</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktSym">f-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">merge-method-envs</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-&gt;method-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-class</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-decls-&gt;method-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktSym">f-names</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36807;&#31243; <span class="stt">append-field-names</span> &#29992;&#26469;&#32473;&#24403;&#21069;&#31867;&#21019;&#24314; <span class="stt">field-names</span>&#12290;&#23427;&#23558;&#26032;&#31867;&#22768;&#26126;&#30340;&#23383;
&#27573;&#28155;&#21152;&#21040;&#36229;&#31867;&#23383;&#27573;&#20043;&#21518;&#65292;&#21516;&#26102;&#23558;&#36229;&#31867;&#20013;&#34987;&#26032;&#23383;&#27573;&#36974;&#34109;&#30340;&#23383;&#27573;&#26367;&#25442;&#20026;&#26032;&#21517;&#23383;&#65292;
&#23601;&#20687;field-renaming&#30340;&#31034;&#20363;&#37027;&#26679;&#12290;</p><p><div class="SIntrapara"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">append-field-names</span></span> : <br/><span class="texMathInline">\phantom{xx}</span><span class="texMathInline">\mathit{Listof(FieldName)} \times \mathit{Listof(FieldName)} \to \mathit{Listof(FieldName)}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">append-field-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">super-fields</span><span class="hspace">&nbsp;</span><span class="RktSym">new-fields</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">super-fields</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-fields</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">memq</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">super-fields</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-fields</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fresh-identifier</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">super-fields</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">super-fields</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append-field-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">super-fields</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">new-fields</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1399))"></a>
<a name="(idx._(gentag._1400))"></a>
<a name="(idx._(gentag._1401))"></a></div></p><h5 class="heading">9.4.4<tt>&nbsp;</tt><a name="(part._s9..4..4)"></a>&#26041;&#27861;&#29615;&#22659;<span class="button-group"><a href="#(part._s9..4..4)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1402))"></a>
<a name="(idx._(gentag._1403))"></a>
&#21097;&#19979;&#30340;&#21482;&#26377; <span class="stt">find-method</span> &#21644; <span class="stt">merge-method-envs</span> &#20102;&#12290;</p><p>&#20687;&#22788;&#29702;&#31867;&#37027;&#26679;&#65292;&#25105;&#20204;&#29992;&#21015;&#34920; <span class="stt">(&#26041;&#27861;&#21517;,&#26041;&#27861;)</span> &#30340;&#21015;&#34920;&#34920;&#31034;&#26041;&#27861;&#29615;&#22659;&#65292;&#29992;
<span class="stt">find-method</span> &#26597;&#25214;&#26041;&#27861;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{MethodEnv} = \mathit{Listof(List(MethodName, Method))}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">find-method</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{Sym} \to \mathit{Method}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">find-method</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-name</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">m-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-&gt;method-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-class</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">maybe-pair</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assq</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktSym">m-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pair?</span><span class="hspace">&nbsp;</span><span class="RktSym">maybe-pair</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">maybe-pair</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-method-not-found</span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#29992;&#36825;&#19968;&#20449;&#24687;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986; <span class="stt">method-decls-&gt;method-env</span>&#12290;&#23427;&#21462;&#19968;&#20010;&#31867;&#30340;&#26041;&#27861;&#22768;&#26126;&#65292;&#21019;
&#24314;&#19968;&#20010;&#26041;&#27861;&#29615;&#22659;&#65292;&#35760;&#24405;&#27599;&#20010;&#26041;&#27861;&#30340;&#32465;&#23450;&#21464;&#37327;&#12289;&#20027;&#20307;&#12289;&#25345;&#26377;&#31867;&#30340;&#36229;&#31867;&#21517;&#65292;&#20197;&#21450;&#25345;&#26377;&#31867;&#30340;
<span class="stt">field-names</span>&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">method-decls-&gt;method-env</span></span> : <br/><span class="texMathInline">\phantom{xx}</span><span class="texMathInline">\mathit{Listof(MethodDecl)} \times \mathit{ClassName} \times \mathit{Listof(FieldName)} \to \mathit{MethodEnv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">method-decls-&gt;method-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">super-name</span><span class="hspace">&nbsp;</span><span class="RktSym">field-names</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-decl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">method-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">m-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-method-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-name</span><span class="hspace">&nbsp;</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">method-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-method</span><span class="hspace">&nbsp;</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">super-name</span><span class="hspace">&nbsp;</span><span class="RktSym">field-names</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-decls</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#20889;&#20986; <span class="stt">merge-method-envs</span>&#12290;&#30001;&#20110;&#26032;&#31867;&#20013;&#30340;&#26041;&#27861;&#35206;&#30422;&#20102;&#26087;&#31867;&#30340;&#21516;&#21517;&#26041;&#27861;&#65292;&#25105;
&#20204;&#21487;&#20197;&#30452;&#25509;&#25193;&#23637;&#29615;&#22659;&#65292;&#23558;&#26032;&#26041;&#27861;&#28155;&#21152;&#21040;&#21069;&#38754;&#12290;</p><p><div class="SIntrapara"><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">merge-method-envs</span></span> : <span class="texMathInline">\mathit{MethodEnv} \times \mathit{MethodEnv} \to \mathit{MethodEnv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">merge-method-envs</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">super-m-env</span><span class="hspace">&nbsp;</span><span class="RktSym">new-m-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span><span class="hspace">&nbsp;</span><span class="RktSym">new-m-env</span><span class="hspace">&nbsp;</span><span class="RktSym">super-m-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#26500;&#24314;&#26041;&#27861;&#29615;&#22659;&#36824;&#26377;&#20854;&#20182;&#19968;&#20123;&#26041;&#24335;&#65292;&#23427;&#20204;&#22312;&#26041;&#27861;&#26597;&#35810;&#26102;&#26356;&#39640;&#25928;&#65288;ex9.18&#65289;&#12290;</p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1404))"></a>
<a name="(idx._(gentag._1405))"></a>
<a name="(idx._(gentag._1406))"></a></div></p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">c3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-class</span><span class="hspace">&nbsp;</span><span class="RktVal">c2</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x%2</span><span class="hspace">&nbsp;</span><span class="RktVal">y%1</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">z</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">initialize</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:begin-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c2</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x%2</span><span class="hspace">&nbsp;</span><span class="RktVal">y%1</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">z</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m3</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c2</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x%2</span><span class="hspace">&nbsp;</span><span class="RktVal">y%1</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">z</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">initialize</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m1</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">u</span><span class="hspace">&nbsp;</span><span class="RktVal">v</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c1</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y%1</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m3</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">initialize</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m1</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m2</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:method-call-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:self-exp</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">m3</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">object</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-class</span><span class="hspace">&nbsp;</span><span class="RktVal">c1</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y%1</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">initialize</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:begin-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c1</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y%1</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m1</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">u</span><span class="hspace">&nbsp;</span><span class="RktVal">v</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c1</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y%1</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m3</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">23</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">c1</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y%1</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">initialize</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m1</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m2</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:method-call-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:self-exp</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">m3</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">object</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-class</span><span class="hspace">&nbsp;</span><span class="RktVal">object</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">initialize</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:begin-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">object</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m1</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">object</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">m2</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-method</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:method-call-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:self-exp</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">m3</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">object</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">y</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-class</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p> &#20013;&#30340;&#31867;&#29615;&#22659;
<a name="(idx._(gentag._1407))"></a>
<a name="(idx._(gentag._1408))"></a>
<a name="(idx._(gentag._1409))"></a><a name="(elem._fig-9..11)"></a></p></blockquote></blockquote><h5 class="heading">9.4.5<tt>&nbsp;</tt><a name="(part._s9..4..5)"></a>&#32451;&#20064;<span class="button-group"><a href="#(part._s9..4..5)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><blockquote class="EoplExercise"><p><a name="(elem._ex9..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#29992;&#26412;&#33410;&#30340;&#35821;&#35328;&#23454;&#29616;&#20197;&#19979;&#21508;&#39033;&#65306;</p><ol><li><p>&#38431;&#21015;&#31867; (queue)&#65292;&#21253;&#21547;&#26041;&#27861; <span class="stt">empty?</span>&#12289;<span class="stt">enqueue</span> &#21644; <span class="stt">dequeue</span>&#12290;</p></li><li><p>&#25193;&#23637;&#38431;&#21015;&#31867;&#65292;&#28155;&#21152;&#35745;&#25968;&#22120;&#65292;&#35760;&#24405;&#24403;&#21069;&#38431;&#21015;&#24050;&#36827;&#34892;&#30340;&#25805;&#20316;&#25968;&#12290;</p></li><li><p>&#25193;&#23637;&#38431;&#21015;&#31867;&#65292;&#28155;&#21152;&#35745;&#25968;&#22120;&#65292;&#35760;&#24405;&#26412;&#31867;&#25152;&#26377;&#38431;&#21015;&#24050;&#36827;&#34892;&#30340;&#25805;&#20316;&#24635;&#25968;&#12290;&#25552;&#31034;&#65306;&#20320;&#21487;&#20197;&#22312;
&#23545;&#35937;&#21021;&#22987;&#21270;&#26102;&#20256;&#36882;&#20849;&#20139;&#35745;&#25968;&#22120;&#12290;</p></li></ol></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..2)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32487;&#25215;&#21487;&#33021;&#24456;&#21361;&#38505;&#65292;&#22240;&#20026;&#23376;&#31867;&#21487;&#20197;&#35206;&#30422;&#20219;&#24847;&#26041;&#27861;&#65292;&#25913;&#21464;&#20854;&#34892;&#20026;&#12290;&#23450;&#20041;&#32487;&#25215;&#33258; <span class="stt">oddeven</span> &#30340;
&#31867; <span class="stt">bogus-oddeven</span>&#65292;&#35206;&#30422;&#26041;&#27861; <span class="stt">even</span>&#65292;&#20174;&#32780;&#23548;&#33268; <span class="stt">let o1 = new
bogus-oddeven() in send o1 odd (13)</span> &#32473;&#20986;&#38169;&#35823;&#30340;&#31572;&#26696;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..3)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312; &#20013;&#65292;&#21738;&#37324;&#26159;&#20849;&#20139;&#30340;&#26041;&#27861;&#29615;&#22659;&#65311;&#21738;&#37324;&#26159;&#20849;&#20139;&#30340; <span class="stt">field-names</span>
&#21015;&#34920;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..4)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#23545;&#35937;&#30340;&#34920;&#31034;&#65292;&#35753; <span class="texMathInline">\mathit{Obj}</span> &#21253;&#21547;&#23545;&#35937;&#25152;&#23646;&#30340;&#31867;&#65292;&#32780;&#38750;&#20854;&#21517;&#23383;&#12290;&#36319;&#25991;&#20013;&#30340;&#26041;&#24335;&#30456;
&#27604;&#65292;&#36825;&#31181;&#34920;&#31034;&#26377;&#20309;&#20248;&#21155;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..5)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a href="#%28part._s9..4%29" data-pltdoc="x">&#35299;&#37322;&#22120;</a>&#20013;&#30340;&#35299;&#37322;&#22120;&#22312;&#35789;&#27861;&#29615;&#22659;&#20013;&#23384;&#20648;&#26041;&#27861;&#25345;&#26377;&#31867;&#30340;&#36229;&#31867;&#21517;&#12290;&#20462;&#25913;&#23454;&#29616;&#65292;&#35753;&#26041;&#27861;&#23384;&#20648;
&#25345;&#26377;&#31867;&#30340;&#21517;&#23383;&#65292;&#28982;&#21518;&#29992;&#25345;&#26377;&#31867;&#30340;&#21517;&#23383;&#26597;&#25214;&#36229;&#31867;&#21517;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..6)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#25105;&#20204;&#30340;&#35821;&#35328;&#28155;&#21152;&#34920;&#36798;&#24335; <span class="stt">instanceof </span><span class="texMathInline">exp</span><span class="stt"> </span><span class="texMathInline">class\mbox{-}name</span>&#12290;&#24403;&#19988;&#20165;&#24403;&#34920;
&#36798;&#24335; <span class="texMathInline">exp</span> &#30340;&#20540;&#20026;&#23545;&#35937;&#65292;&#19988;&#20026; <span class="texMathInline">class\mbox{-}name</span> &#25110;&#20854;&#23376;&#31867;&#30340;&#23454;&#20363;&#26102;&#65292;&#36825;&#19968;&#34920;&#36798;&#24335;
&#30340;&#20540;&#20026;&#30495;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..7)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#26041;&#27861;&#29615;&#22659;&#21253;&#21547;&#25345;&#26377;&#31867;<span class="emph">&#21644;</span>&#36229;&#31867;&#22768;&#26126;&#30340;&#23383;&#27573;&#21464;&#37327;&#30340;&#32465;&#23450;&#12290;&#23558;&#20854;&#38480;&#21046;&#20026;
&#25345;&#26377;&#31867;&#30340;&#23383;&#27573;&#21464;&#37327;&#32465;&#23450;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..8)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#25105;&#20204;&#30340;&#35821;&#35328;&#28155;&#21152;&#26032;&#34920;&#36798;&#24335;&#65306;</p><blockquote class="SCentered"><p><span class="stt">fieldref </span><span class="texMathInline">obj</span><span class="stt"> </span><span class="texMathInline">field\mbox{-}name</span></p></blockquote><p>&#21462;&#20986;&#25351;&#23450;&#23545;&#35937;&#25351;&#23450;&#23383;&#27573;&#30340;&#20869;&#23481;&#12290;&#20877;&#28155;&#21152;&#65306;</p><blockquote class="SCentered"><p><span class="stt">fieldset </span><span class="texMathInline">obj</span><span class="stt"> </span><span class="texMathInline">field\mbox{-}name</span><span class="stt"> = </span><span class="texMathInline">exp</span></p></blockquote><p>&#23558;&#25351;&#23450;&#23383;&#27573;&#35774;&#32622;&#20026; <span class="texMathInline">exp</span> &#30340;&#20540;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..9)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#28155;&#21152; <span class="stt">superfieldref</span> <span class="texMathInline">field\mbox{-}name</span> &#21644; <span class="stt">superfieldset</span>
<span class="texMathInline">field\mbox{-}name</span> <span class="stt">=</span> <span class="texMathInline">exp</span> &#34920;&#36798;&#24335;&#65292;&#22788;&#29702; <span class="stt">self</span> &#20013;&#21407;&#26412;&#34987;&#36974;&#34109;&#30340;&#23383;&#27573;&#12290;
&#35760;&#20303;&#65306;<span class="stt">super</span> &#26159;&#38745;&#24577;&#30340;&#65292;&#24635;&#26159;&#25351;&#25345;&#26377;&#31867;&#30340;&#36229;&#31867;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..10)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#26377;&#20123;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#35821;&#35328;&#25903;&#25345;&#25351;&#23450;&#31867;&#21517;&#30340;&#26041;&#27861;&#35843;&#29992;&#21644;&#23383;&#27573;&#24341;&#29992;&#12290;&#22312;&#25351;&#23450;&#31867;&#21517;&#30340;&#26041;&#27861;&#35843;&#29992;&#20013;&#65292;&#21487;
&#20197;&#20889; <span class="stt">named-send c1 o m1()</span>&#12290;&#21482;&#35201; <span class="stt">o</span> &#26159; <span class="stt">c1</span> &#25110;&#20854;&#23376;&#31867;&#30340;&#23454;&#20363;&#65292;&#21363;&#20351;
<span class="stt">o</span> &#25152;&#23646;&#31867;&#35206;&#30422;&#20102; <span class="stt">m1</span>&#65292;&#36825;&#20063;&#20250;&#23545; <span class="stt">o</span> &#35843;&#29992; <span class="stt">c1</span> &#30340;&#26041;&#27861; <span class="stt">m1</span>&#12290;&#36825;&#26159;&#19968;
&#31181;&#38745;&#24577;&#26041;&#27861;&#20998;&#21457;&#12290;&#25351;&#23450;&#31867;&#21517;&#30340;&#23383;&#27573;&#19982;&#20043;&#31867;&#20284;&#12290;&#32473;&#26412;&#33410;&#30340;&#35821;&#35328;&#28155;&#21152;&#25351;&#23450;&#31867;&#21517;&#30340;&#26041;&#27861;&#35843;&#29992;&#12289;&#23383;&#27573;
&#24341;&#29992;&#21644;&#23383;&#27573;&#36171;&#20540;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..11)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1410))"></a>
&#20801;&#35768; CLASSES &#25351;&#23450;&#27599;&#20010;&#26041;&#27861;&#26159;<span class="emph">&#31169;&#26377;&#30340;</span> (<span class="emph">private</span>)&#65292;&#21482;&#33021;&#22312;&#25345;&#26377;&#31867;&#20869;&#35775;&#38382;&#65307;
&#25110;<span class="emph">&#21463;&#20445;&#25252;&#30340;</span> (<span class="emph">protected</span>)&#65292;&#21482;&#33021;&#22312;&#25345;&#26377;&#31867;&#21450;&#20854;&#21518;&#20195;&#20013;&#35775;&#38382;&#65307;&#25110;<span class="emph">&#20844;
&#26377;&#30340;</span> (<span class="emph">public</span>)&#65292;&#22312;&#25152;&#26377;&#20301;&#32622;&#37117;&#33021;&#35775;&#38382;&#12290;&#35768;&#22810;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#35821;&#35328;&#37117;&#21253;&#21547;&#20102;&#36825;&#19968;&#29305;&#24615;&#30340;&#26576;&#31181;&#29256;&#26412;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..12)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20687;ex9.11 &#37027;&#26679;&#65292;&#20801;&#35768; CLASSES &#25351;&#23450;&#27599;&#20010;&#23383;&#27573;&#26159;&#31169;&#26377;&#30340;&#12289;&#21463;&#20445;&#25252;&#30340;&#12289;&#25110;
&#20844;&#26377;&#30340;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..13)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20026;&#20102;&#38450;&#27490;ex9.2 &#37027;&#26679;&#30340;&#24694;&#24847;&#23376;&#31867;&#65292;&#35768;&#22810;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#35821;&#35328;&#37117;&#33021;&#25351;&#23450;&#26080;&#27861;&#35206;
&#30422;&#30340; <span class="emph">final</span> &#26041;&#27861;&#12290;&#32473; CLASSES &#28155;&#21152;&#36825;&#26679;&#30340;&#32452;&#20214;&#65292;&#37027;&#20040;&#25105;&#20204;&#23601;&#33021;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class oddeven extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize () 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">final method even (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if zero?(n) then 1 else send self odd(-(n,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">final method odd (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if zero?(n) then 0 else send self even(-(n,1))</span></p></td></tr></table></div><div class="SIntrapara"><a name="(idx._(gentag._1411))"></a></div></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..14)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21478;&#19968;&#31181;&#38450;&#27490;&#24694;&#24847;&#23376;&#31867;&#30340;&#26041;&#27861;&#26159;&#20351;&#29992;&#26576;&#31181;&#24418;&#24335;&#30340;<span class="emph">&#38745;&#24577;&#20998;&#21457;</span>&#12290;&#20462;&#25913; CLASSES&#65292;&#20351;&#36890;&#36807;
<span class="stt">self</span> &#35843;&#29992;&#30340;&#24635;&#26159;&#25345;&#26377;&#31867;&#30340;&#26041;&#27861;&#65292;&#32780;&#19981;&#26159;&#30446;&#26631;&#23545;&#35937;&#25152;&#23646;&#31867;&#30340;&#26041;&#27861;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..15)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1412))"></a>
<a name="(idx._(gentag._1413))"></a>
<a name="(idx._(gentag._1414))"></a>
<a name="(idx._(gentag._1415))"></a>
&#24456;&#22810;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#35821;&#35328;&#37117;&#25552;&#20379;<span class="emph">&#38745;&#24577;</span>&#21464;&#37327;&#25110;&#32773;<span class="emph">&#31867;</span>&#21464;&#37327;&#12290;&#38745;&#24577;&#21464;&#37327;&#19982;&#31867;&#30340;&#26576;&#20123;&#29366;
&#24577;&#30456;&#20851;&#32852;&#65307;&#31867;&#30340;&#25152;&#26377;&#23454;&#20363;&#20849;&#20139;&#36825;&#19968;&#29366;&#24577;&#12290;&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class c1 extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">static next-serial-number = 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field my-serial-number</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method get-serial-number () my-serial-number</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize ()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set my-serial-number = next-serial-number;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set next-serial-number = +(next-serial-number,1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt">let o1 = new c1()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">o2 = new c1()</span></p></td></tr><tr><td><p><span class="stt">in list(send o1 get-serial-number(),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">send o2 get-serial-number())</span></p></td></tr></table></blockquote><p>&#31867; <span class="stt">c1</span> &#30340;&#27599;&#20010;&#26032;&#23545;&#35937;&#20855;&#26377;&#36830;&#32493;&#30340;&#24207;&#21015;&#21495;&#12290;</p><p>&#32473;&#25105;&#20204;&#30340;&#35821;&#35328;&#28155;&#21152;&#38745;&#24577;&#21464;&#37327;&#12290;&#30001;&#20110;&#38745;&#24577;&#21464;&#37327;&#21487;&#20197;&#22312;&#26041;&#27861;&#20027;&#20307;&#20013;&#20986;&#29616;&#65292;<span class="stt">apply-method</span> &#24517;
&#39035;&#22312;&#23427;&#26500;&#24314;&#30340;&#29615;&#22659;&#20013;&#28155;&#21152;&#39069;&#22806;&#30340;&#32465;&#23450;&#12290;&#27714;&#38745;&#24577;&#21464;&#37327;&#21021;&#22987;&#21270;&#34920;&#36798;&#24335;&#65288;&#19978;&#20363;&#20013;&#30340; <span class="stt">1</span>&#65289;&#30340;&#20540;
&#26102;&#65292;&#24212;&#20351;&#29992;&#20160;&#20040;&#29615;&#22659;&#65311;
<a name="(idx._(gentag._1416))"></a>
<a name="(idx._(gentag._1417))"></a>
<a name="(idx._(gentag._1418))"></a>
<a name="(idx._(gentag._1419))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..16)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1420))"></a>
<a name="(idx._(gentag._1421))"></a>
&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#35821;&#35328;&#24120;&#20801;&#35768;<span class="emph">&#37325;&#36733;</span> (<span class="emph">overloading</span>) &#26041;&#27861;&#12290;&#36825;&#19968;&#29305;&#24615;&#20801;&#35768;&#31867;&#26377;&#22810;&#20010;&#21516;&#21517;
&#26041;&#27861;&#65292;&#21482;&#35201;&#23427;&#20204;&#26377;&#19981;&#21516;&#30340;<span class="emph">&#31614;&#21517;</span> (<span class="emph">signature</span>)&#12290;&#26041;&#27861;&#31614;&#21517;&#36890;&#24120;&#26159;&#26041;&#27861;&#21517;&#21152;&#19978;&#21442;&#25968;&#31867;&#22411;&#12290;
&#30001;&#20110; CLASSES &#20013;&#27809;&#26377;&#31867;&#22411;&#65292;&#25105;&#20204;&#21482;&#33021;&#20381;&#38752;&#26041;&#27861;&#21517;&#21644;&#21442;&#25968;&#20010;&#25968;&#37325;&#36733;&#26041;&#27861;&#12290;&#20363;&#22914;&#65292;&#26576;&#20010;&#31867;&#21487;&#33021;
&#26377;&#20004;&#20010; <span class="stt">initialize</span> &#26041;&#27861;&#65292;&#19968;&#20010;&#27809;&#26377;&#21442;&#25968;&#65292;&#29992;&#23427;&#26469;&#21021;&#22987;&#21270;&#26102;&#65292;&#38656;&#35201;&#32473;&#23383;&#27573;&#40664;&#35748;&#20540;&#65307;&#21478;
&#19968;&#20010;&#26377;&#19968;&#20010;&#21442;&#25968;&#65292;&#29992;&#23427;&#26469;&#21021;&#22987;&#21270;&#26102;&#65292;&#38656;&#35201;&#32473;&#23383;&#27573;&#29305;&#23450;&#20540;&#12290;&#25193;&#23637;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#65292;&#20801;&#35768;&#36890;&#36807;&#26041;&#27861;
&#30340;&#21442;&#25968;&#20010;&#25968;&#37325;&#36733;&#26041;&#27861;&#12290;
<a name="(idx._(gentag._1422))"></a>
<a name="(idx._(gentag._1423))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..17)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#26174;&#32780;&#26131;&#35265;&#65292;&#25105;&#20204;&#35821;&#35328;&#20013;&#30340;&#31867;&#23450;&#20041;&#26159;&#20840;&#23616;&#30340;&#12290;&#32473; CALSSES &#28155;&#21152;&#23616;&#37096;&#31867;&#65292;&#21487;&#20889;&#25104; <span class="stt">letclass</span><span class="stt">
</span><span class="texMathInline">c</span><span class="stt"> = ... in </span><span class="texMathInline">e</span>&#12290;&#25552;&#31034;&#65306;&#32771;&#34385;&#32473;&#35299;&#37322;&#22120;&#28155;&#21152;&#19968;&#20010;&#31867;&#29615;&#22659;&#21442;&#25968;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..18)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><span class="stt">merge-method-envs</span> &#20135;&#29983;&#30340;&#26041;&#27861;&#29615;&#22659;&#21487;&#33021;&#24456;&#38271;&#12290;&#20877;&#20889;&#20986;&#19968;&#29256; <span class="stt">merge-
method-envs</span>&#65292;&#20445;&#35777;&#27599;&#20010;&#26041;&#27861;&#21517;&#21482;&#20986;&#29616;&#19968;&#27425;&#65292;&#32780;&#19988;&#24635;&#26159;&#20986;&#29616;&#22312;&#26368;&#20808;&#22768;&#26126;&#30340;&#20301;&#32622;&#12290;&#20363;&#22914;&#65292;&#22312;
 &#20013;&#65292;&#22312; <span class="stt">c1</span>&#12289;<span class="stt">c2</span>&#12289;<span class="stt">c3</span>&#65292;&#20197;&#21450; <span class="stt">c3</span> &#20219;&#24847;&#21518;&#20195;&#30340;&#26041;
&#27861;&#29615;&#22659;&#20013;&#65292;&#26041;&#27861; <span class="stt">m2</span> &#24212;&#20986;&#29616;&#22312;&#21516;&#26679;&#30340;&#20301;&#32622;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..19)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1424))"></a>
<a name="(idx._(gentag._1425))"></a>
&#20026; CLASSES &#23454;&#29616;&#35789;&#27861;&#23547;&#22336;&#12290;&#39318;&#20808;&#65292;&#20026;&#26412;&#33410;&#35821;&#35328;&#20889;&#20986;&#31867;&#20284;<a href="#%28part._s3..7%29" data-pltdoc="x">&#23454;&#29616;&#35789;&#27861;&#22320;&#22336;</a>&#30340;&#35789;&#27861;&#22320;&#22336;&#35745;&#31639;&#22120;&#12290;
&#28982;&#21518;&#20462;&#25913;&#29615;&#22659;&#30340;&#23454;&#29616;&#65292;&#21435;&#25481;&#20854;&#20013;&#30340;&#21517;&#23383;&#12290;&#25509;&#30528;&#20462;&#25913; <span class="stt">value-of</span> &#21644; <span class="stt">apply-env</span>&#65292;&#19981;
&#20877;&#21462;&#31526;&#21495;&#65292;&#32780;&#26159;&#20687;<a href="#%28part._s3..7..2%29" data-pltdoc="x">&#26080;&#21517;&#35299;&#37322;&#22120;</a>&#37027;&#26679;&#21462;&#19968;&#35789;&#27861;&#22320;&#22336;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..20)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#26041;&#27861;&#35843;&#29992;&#20063;&#33021;&#22815;&#29992;&#31867;&#20284;ex9.19 &#37027;&#26679;&#30340;&#26041;&#24335;&#20248;&#21270;&#21527;&#65311;&#35752;&#35770;&#20026;&#20160;&#20040;&#33021;&#65292;&#25110;&#20026;&#20160;
&#20040;&#19981;&#33021;&#12290;
<a name="(idx._(gentag._1426))"></a>
<a name="(idx._(gentag._1427))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..21)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22914;&#26524;&#31867;&#20013;&#26377;&#24456;&#22810;&#26041;&#27861;&#65292;&#20174;&#22836;&#32447;&#24615;&#25628;&#32034;&#26041;&#27861;&#21015;&#34920;&#20250;&#24456;&#32791;&#26102;&#12290;&#23558;&#20854;&#20462;&#25913;&#20026;&#26356;&#24555;&#30340;&#23454;&#29616;&#12290;&#20320;&#30340;&#23454;&#29616;
&#33021;&#25913;&#36827;&#22810;&#23569;&#65311;&#19981;&#35770;&#20248;&#21155;&#65292;&#35299;&#37322;&#20320;&#30340;&#32467;&#26524;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..22)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1428))"></a>
<a name="(idx._(gentag._1429))"></a>
<a name="(idx._(gentag._1430))"></a>
&#22312;ex9.16 &#20013;&#65292;&#25105;&#20204;&#25193;&#23637;&#35299;&#37322;&#22120;&#65292;&#32473;&#35821;&#35328;&#28155;&#21152;&#20102;&#37325;&#36733;&#12290;&#21478;&#19968;&#31181;&#25903;&#25345;&#37325;&#36733;&#30340;&#26041;
&#24335;&#19981;&#38656;&#20462;&#25913;&#35299;&#37322;&#22120;&#65292;&#32780;&#26159;&#29992;&#35821;&#27861;&#39044;&#22788;&#29702;&#22120;&#12290;&#20889;&#19968;&#20010;&#39044;&#22788;&#29702;&#22120;&#65292;&#23558;&#27599;&#20010;&#26041;&#27861; <span class="texMathInline">m</span> &#37325;&#21629;&#21517;&#20026;
<span class="texMathInline">m:@n</span> &#30340;&#24418;&#24335;&#65292;&#20854;&#20013;&#65292;<span class="texMathInline">n</span> &#26159;&#26041;&#27861;&#22768;&#26126;&#20013;&#21442;&#25968;&#30340;&#25968;&#37327;&#12290;&#21516;&#26102;&#65292;&#23427;&#36824;&#24517;&#39035;&#26681;&#25454;&#25805;&#20316;&#25968;
&#30340;&#25968;&#37327;&#25913;&#21464;&#27599;&#20010;&#26041;&#27861;&#35843;&#29992;&#30340;&#21517;&#23383;&#12290;&#25105;&#20204;&#20551;&#23450;&#31243;&#24207;&#21592;&#22312;&#26041;&#27861;&#21517;&#20013;&#19981;&#20351;&#29992; <span class="texMathInline">:@</span>&#65292;&#20294;&#35299;&#37322;&#22120;
&#25509;&#21463;&#20351;&#29992; <span class="texMathInline">:@</span> &#30340;&#26041;&#27861;&#21517;&#12290;&#32534;&#35793;&#22120;&#32463;&#24120;&#20351;&#29992;&#36825;&#31181;&#25216;&#26415;&#23454;&#29616;&#26041;&#27861;&#37325;&#36733;&#12290;&#36825;&#26159;&#19968;&#31181;&#36890;&#29992;&#25216;&#24039;
&#30340;&#20363;&#23376;&#65292;&#21517;&#20026;<span class="emph">&#21517;&#31216;&#28151;&#28102;</span> (<span class="emph">name mangling</span>)&#12290;
<a name="(idx._(gentag._1431))"></a>
<a name="(idx._(gentag._1432))"></a>
<a name="(idx._(gentag._1433))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..23)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1434))"></a>
&#25105;&#20204;&#20197;&#35789;&#27861;&#32465;&#23450;&#30340;&#26041;&#24335;&#30475;&#24453;&#36229;&#31867;&#35843;&#29992;&#12290;&#20294;&#25105;&#20204;&#36824;&#21487;&#20197;&#20570;&#24471;&#26356;&#22909;&#65306;&#25105;&#20204;&#21487;&#20197;<span class="emph">&#38745;&#24577;&#22320;</span>&#30830;
&#23450; <span class="stt">super</span> &#35843;&#29992;&#12290;&#30001;&#20110;&#36229;&#31867;&#35843;&#29992;&#25351;&#21521;&#31867;&#30340;&#29238;&#31867;&#30340;&#26041;&#27861;&#65292;&#19988;&#29238;&#31867;&#19982;&#20854;&#26041;&#27861;&#22312;&#25191;&#34892;&#20043;&#21069;&#24050;&#30693;&#65292;
&#25105;&#20204;&#21487;&#20197;&#22312;&#36827;&#34892;&#35789;&#27861;&#23547;&#22336;&#21644;&#20854;&#20182;&#20998;&#26512;&#30340;&#21516;&#26102;&#30830;&#23450;&#36229;&#31867;&#35843;&#29992;&#31350;&#31455;&#25351;&#30340;&#26159;&#21738;&#20010;&#26041;&#27861;&#12290;&#20889;&#19968;&#20010;&#32763;&#35793;
&#22120;&#65292;&#23558;&#27599;&#20010;&#36229;&#31867;&#35843;&#29992;&#26367;&#25442;&#20026;&#19968;&#20010;&#25277;&#35937;&#35821;&#27861;&#26641;&#33410;&#28857;&#65292;&#33410;&#28857;&#20013;&#21253;&#21547;&#23454;&#38469;&#35201;&#35843;&#29992;&#30340;&#26041;&#27861;&#12290;
<a name="(idx._(gentag._1435))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..24)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20889;&#19968;&#20010;&#32763;&#35793;&#22120;&#65292;&#25226;ex9.10 &#20013;&#25351;&#23450;&#31867;&#35843;&#29992;&#30340;&#26041;&#27861;&#21517;&#26367;&#25442;&#20026;&#25968;&#23383;&#65292;&#35813;&#25968;&#23383;&#34920;&#31034;
&#36816;&#34892;&#26399;&#38388;&#65292;&#25351;&#23450;&#26041;&#27861;&#22312;&#25351;&#23450;&#31867;&#30340;&#26041;&#27861;&#34920;&#20013;&#30340;&#20559;&#31227;&#12290;&#20026;&#32763;&#35793;&#21518;&#30340;&#20195;&#30721;&#23454;&#29616;&#19968;&#20010;&#35299;&#37322;&#22120;&#65292;&#22312;&#24120;&#25968;
&#26102;&#38388;&#20869;&#35775;&#38382;&#25351;&#23450;&#30340;&#26041;&#27861;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..25)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1436))"></a>
&#25105;&#20204;&#32473; &#31532;&#19968;&#20010;&#32487;&#25215;&#20363;&#23376;&#20013;&#30340;&#31867; <span class="stt">point</span> &#28155;&#21152;&#19968;&#20010;&#26041;&#27861;&#65292;&#21028;&#26029;&#20004;
&#20010;&#28857;&#26159;&#21542;&#20855;&#26377;&#30456;&#21516;&#30340;&#27178;&#32437;&#22352;&#26631;&#12290;&#25105;&#20204;&#29031;&#19979;&#38754;&#36825;&#26679;&#32473;&#31867; <span class="stt">point</span> &#28155;&#21152;&#26041;&#27861;
<span class="stt">similarpoints</span>&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">method similarpoints (pt)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">if equal?(send pt getx(), x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">then equal?(send pt gety(), y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">else zero?(1)</span></p></td></tr></table></blockquote><p>&#36825;&#23545;&#25152;&#26377;&#31867;&#22411;&#30340;&#28857;&#37117;&#26377;&#25928;&#12290;&#22240;&#20026; <span class="stt">getx</span>&#12289;<span class="stt">gety</span> &#21644; <span class="stt">similarpoints</span> &#37117;&#22312;&#31867;
<span class="stt">point</span> &#20013;&#23450;&#20041;&#65292;&#36890;&#36807;&#32487;&#25215;&#65292;&#23427;&#20204;&#22312; <span class="stt">colorpoint</span> &#20013;&#20063;&#26377;&#23450;&#20041;&#12290;&#27979;&#35797;
<span class="stt">similarpoints</span>&#65292;&#27604;&#36739;&#28857;&#21644;&#28857;&#12289;&#28857;&#21644;&#26377;&#33394;&#28857;&#12289;&#26377;&#33394;&#28857;&#21644;&#28857;&#65292;&#20197;&#21450;&#26377;&#33394;&#28857;&#21644;&#26377;&#33394;&#28857;&#12290;</p><p>&#25509;&#19979;&#26469;&#32771;&#34385;&#19968;&#20010;&#23567;&#25193;&#23637;&#12290;&#25105;&#20204;&#32473;&#31867; <span class="stt">colorpoint</span> &#28155;&#21152;&#26032;&#26041;&#27861; <span class="stt">similarpoints</span>&#12290;&#25105;
&#20204;&#24076;&#26395;&#20004;&#20010;&#28857;&#27178;&#32437;&#22352;&#26631;&#30456;&#21516;&#12289;&#37117;&#26159;&#26377;&#33394;&#28857;&#19988;&#39068;&#33394;&#30456;&#21516;&#26102;&#65292;&#23427;&#36820;&#22238;&#30495;&#65307;&#21542;&#21017;&#36820;&#22238;&#20551;&#12290;&#36825;&#37324;&#26159;&#19968;
&#31181;&#38169;&#35823;&#20570;&#27861;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">method similarpoints (pt)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">if super similarpoints(pt)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">then equal?(send pt getcolor(),color)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">else zero?(1)</span></p></td></tr></table></blockquote><p>&#27979;&#35797;&#36825;&#19968;&#25193;&#23637;&#12290;&#35828;&#26126;&#23427;&#20026;&#20309;&#19981;&#36866;&#29992;&#20110;&#20219;&#24847;&#24773;&#20917;&#12290;&#20462;&#22797;&#23427;&#65292;&#35753;&#25152;&#26377;&#27979;&#35797;&#37117;&#36820;&#22238;&#27491;&#30830;&#30340;&#20540;&#12290;</p><p>&#36807;&#31243;&#20381;&#36182;&#22810;&#20010;&#23545;&#35937;&#36896;&#25104;&#30340;&#22256;&#38590;&#31216;&#20026;<span class="emph">&#20108;&#20803;&#26041;&#27861;&#38382;&#39064;</span> (<span class="emph">binary method problem</span>)&#12290;&#23427;&#34920;
&#26126;&#65292;&#26412;&#31456;&#25506;&#35752;&#30340;&#20197;&#31867;&#20026;&#20013;&#24515;&#30340;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#27169;&#22411;&#22312;&#22788;&#29702;&#22810;&#20010;&#23545;&#35937;&#26102;&#26377;&#20854;&#19981;&#36275;&#12290;&#36825;&#21483;&#20570;
<span class="emph">&#20108;&#20803;</span>&#26041;&#27861;&#38382;&#39064;&#65292;&#22240;&#20026;&#20004;&#20010;&#23545;&#35937;&#23601;&#33021;&#24341;&#36215;&#36825;&#19968;&#38382;&#39064;&#65292;&#20294;&#24403;&#23545;&#35937;&#25968;&#30446;&#22686;&#21152;&#26102;&#65292;&#23427;&#20250;&#24840;&#21457;
&#20005;&#37325;&#12290;
<a name="(idx._(gentag._1437))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22810;&#32487;&#25215;&#20801;&#35768;&#19968;&#20010;&#31867;&#26377;&#22810;&#20010;&#29238;&#31867;&#65292;&#36825;&#34429;&#28982;&#26377;&#29992;&#65292;&#20294;&#21487;&#33021;&#24102;&#26469;&#36807;&#24230;&#30340;&#22797;&#26434;&#24615;&#12290;&#22914;&#26524;&#20004;&#20010;&#34987;&#32487;&#25215;&#30340;
&#31867;&#20855;&#26377;&#21516;&#21517;&#26041;&#27861;&#21602;&#65311;&#21487;&#20197;&#31105;&#27490;&#36825;&#31181;&#24773;&#20917;&#65307;&#20063;&#21487;&#20197;&#25353;&#29031;&#26576;&#31181;&#35268;&#21017;&#36941;&#21382;&#26041;&#27861;&#65292;&#27604;&#22914;&#28145;&#24230;&#20248;&#20808;&#25110;&#20174;
&#24038;&#21040;&#21491;&#65307;&#36824;&#21487;&#20197;&#35201;&#27714;&#22312;&#35843;&#29992;&#26102;&#28040;&#38500;&#36825;&#31181;&#27495;&#20041;&#12290;&#23383;&#27573;&#30340;&#24773;&#20917;&#23601;&#26356;&#31967;&#20102;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#24773;&#24418;&#65292;&#31867;
<span class="stt">c4</span> &#32487;&#25215;&#33258; <span class="stt">c2</span> &#21644; <span class="stt">c3</span>&#65292;&#20108;&#32773;&#22343;&#32487;&#25215;&#33258; <span class="stt">c1</span>&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class c1 extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field x</span></p></td></tr><tr><td><p><span class="stt">class c2 extends c1</span></p></td></tr><tr><td><p><span class="stt">class c3 extends c1</span></p></td></tr><tr><td><p><span class="stt">class c4 extends c2, c3</span></p></td></tr></table></blockquote><p><span class="stt">c4</span> &#30340;&#23454;&#20363;&#20013;&#65292;&#26159;&#26377;&#19968;&#20010;&#30001; <span class="stt">c2</span> &#21644; <span class="stt">c3</span> &#20849;&#20139;&#30340;&#23383;&#27573; <span class="stt">x</span> &#23454;&#20363;&#21602;&#65292;&#36824;&#26159;&#26377;
&#20004;&#20010;&#20998;&#21035;&#32487;&#25215;&#33258; <span class="stt">c2</span> &#21644; <span class="stt">c3</span> &#30340;&#23383;&#27573; <span class="stt">x</span> &#21602;&#65311;&#26377;&#20123;&#35821;&#35328;&#36873;&#25321;&#20849;&#20139;&#65292;&#26377;&#20123;&#19981;&#65292;&#36824;
&#26377;&#19968;&#20123;&#65288;&#33267;&#23569;&#22312;&#26576;&#20123;&#26465;&#20214;&#19979;&#65289;&#20219;&#36873;&#12290;&#36825;&#38382;&#39064;&#30340;&#22797;&#26434;&#24615;&#33268;&#20351;&#20154;&#20204;&#22312;&#35774;&#35745;&#26102;&#65292;&#26356;&#20559;&#29233;&#31867;&#30340;&#21333;&#32487;&#25215;&#65292;
&#32780;&#22810;&#32487;&#25215;&#21482;&#29992;&#20110;&#25509;&#21475;&#65288;<a href="#%28part._s9..5%29" data-pltdoc="x">&#24102;&#26377;&#31867;&#22411;&#30340;&#35821;&#35328;</a>&#65289;&#65292;&#20197;&#23613;&#37327;&#36991;&#20813;&#36825;&#20123;&#22256;&#38590;&#12290;</p><p>&#32473; CLASSES &#28155;&#21152;&#22810;&#32487;&#25215;&#12290;&#23545;&#35821;&#27861;&#20570;&#24517;&#35201;&#25193;&#23637;&#12290;&#25351;&#20986;&#35299;&#20915;&#26041;&#27861;&#21517;&#21644;&#23383;&#27573;&#21517;&#20914;&#31361;&#26102;&#38754;&#20020;&#20160;&#20040;&#38382;
&#39064;&#12290;&#25551;&#36848;&#20849;&#24615;&#38382;&#39064;&#21450;&#20854;&#35299;&#20915;&#26041;&#27861;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..27)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#23454;&#29616;&#19979;&#38754;&#35774;&#35745;&#30340;&#26080;&#31867;&#26377;&#23545;&#35937;&#35821;&#35328;&#12290;&#23545;&#35937;&#26159;&#19968;&#32452;&#38381;&#21253;&#65292;&#21508;&#38381;&#21253;&#20849;&#20139;&#19968;&#20010;&#29615;&#22659;&#65288;&#20134;&#21363;&#26576;&#31181;&#29366;&#24577;&#65289;&#65292;
&#29615;&#22659;&#20197;&#26041;&#27861;&#21517;&#20026;&#32034;&#24341;&#12290;&#31867;&#21017;&#30001;&#36820;&#22238;&#23545;&#35937;&#30340;&#36807;&#31243;&#26367;&#20195;&#12290;&#25152;&#20197;&#65292;&#25105;&#20204;&#19981;&#29992;&#20889; <span class="stt">send o1
m1(11,22,33)</span>&#65292;&#32780;&#26159;&#20889;&#26222;&#36890;&#30340;&#36807;&#31243;&#35843;&#29992; <span class="stt">(getmethod(o1,m2) 11 22 33)</span>&#65307;&#19981;&#29992;&#20889;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class oddeven extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method initialize () 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method even (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if zero?(n) then 1 else send self odd(-(n,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method odd (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if zero?(n) then 0 else send self even(-(n,1))</span></p></td></tr><tr><td><p><span class="stt">let o1 = new oddeven()</span></p></td></tr><tr><td><p><span class="stt">in send o1 odd(13)</span></p></td></tr></table></blockquote><p>&#32780;&#26159;&#20889;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let make-oddeven</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">= proc ()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">newobject</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">even = proc (n) if zero?(n) then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else (getmethod(self,odd) -(n,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">odd = proc (n) if zero?(n) then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else (getmethod(self,even) -(n,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">endnewobject</span></p></td></tr><tr><td><p><span class="stt">in let o1 = (make-oddeven) in (getmethod(o1,odd) 13)</span></p></td></tr></table></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..28)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;ex9.27 &#30340;&#35821;&#35328;&#28155;&#21152;&#32487;&#25215;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..29)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1438))"></a>
&#35774;&#35745;&#21644;&#23454;&#29616;&#19981;&#38656;&#20889;&#26126;&#31867;&#30340;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#65292;&#35753;&#27599;&#20010;&#23545;&#35937;&#21253;&#21547;&#33258;&#36523;&#30340;&#26041;&#27861;&#29615;&#22659;&#12290;&#36825;&#31181;&#23545;&#35937;
&#21483;&#20570;<span class="emph">&#21407;&#22411;</span> (<span class="emph">prototype</span>)&#12290;&#25226;&#31867; <span class="stt">object</span> &#26367;&#25442;&#20026;&#27809;&#26377;&#26041;&#27861;&#21644;&#23383;&#27573;&#30340;&#21407;&#22411;&#23545;&#35937;&#12290;
&#25193;&#23637;&#31867;&#26102;&#65292;&#32473;&#20854;&#21407;&#22411;&#28155;&#21152;&#26041;&#27861;&#21644;&#23383;&#27573;&#65292;&#24471;&#21040;&#26032;&#30340;&#21407;&#22411;&#12290;&#36825;&#26679;&#65292;&#25105;&#20204;&#23601;&#33021;&#29992; <span class="stt">let c2 =
extend c1 ...</span> &#26367;&#20195; <span class="stt">class c2 extends c1 ...</span>&#12290;&#25226;&#25805;&#20316; <span class="stt">new</span> &#26367;&#25442;&#20026;
<span class="stt">clone</span>&#65292;&#23427;&#21462;&#19968;&#23545;&#35937;&#65292;&#30452;&#25509;&#22797;&#21046;&#23545;&#35937;&#30340;&#26041;&#27861;&#21644;&#23383;&#27573;&#12290;&#36825;&#31181;&#35821;&#35328;&#20013;&#30340;&#26041;&#27861;&#20986;&#29616;&#20110;&#19968;&#20010;&#35789;&#27861;
&#20316;&#29992;&#22495;&#20013;&#65292;&#25152;&#20197;&#24212;&#35813;&#33021;&#20687;&#36890;&#24120;&#37027;&#26679;&#35775;&#38382;&#35789;&#27861;&#19978;&#21487;&#35265;&#30340;&#21464;&#37327;&#20197;&#21450;&#23383;&#27573;&#21464;&#37327;&#12290;
&#24403;<span class="emph">&#36229;&#22411;</span> (<span class="emph">superprototype</span>) &#30340;&#23383;&#27573;&#21464;&#37327;&#19982;&#24403;&#21069;&#25152;&#22312;&#35789;&#27861;&#20316;&#29992;&#22495;&#30340;&#21464;&#37327;&#21516;&#21517;&#26102;&#65292;&#36974;&#34109;
&#20851;&#31995;&#26159;&#24590;&#26679;&#30340;&#65311;
<a name="(idx._(gentag._1439))"></a></p></blockquote><h4 class="heading">9.5<tt>&nbsp;</tt><a name="(part._s9..5)"></a>&#24102;&#26377;&#31867;&#22411;&#30340;&#35821;&#35328;<span class="button-group"><a href="#(part._s9..5)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1440))"></a>
<a name="(idx._(gentag._1441))"></a>
&#22312;<a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#65292;&#25105;&#20204;&#23637;&#31034;&#20102;&#22914;&#20309;&#29992;&#31867;&#22411;&#31995;&#32479;&#26816;&#26597;&#31243;&#24207;&#65292;&#20445;&#35777;&#31243;&#24207;&#25191;&#34892;&#26102;&#19981;&#20250;&#36827;&#34892;&#19981;&#24403;&#25805;
&#20316;&#12290;&#36890;&#36807;&#26816;&#26597;&#22120;&#30340;&#31243;&#24207;&#19981;&#20250;&#35843;&#29992;&#38750;&#36807;&#31243;&#22788;&#29702;&#23454;&#21442;&#65292;&#35843;&#29992;&#36807;&#31243;&#25110;&#20854;&#20182;&#25805;&#20316;&#31526;&#26102;&#65292;&#20063;&#19981;&#20250;&#20351;&#29992;&#38169;
&#35823;&#25968;&#37327;&#25110;&#31867;&#22411;&#30340;&#23454;&#21442;&#12290;</p><p>&#26412;&#33410;&#65292;&#25105;&#20204;&#23558;&#36825;&#31181;&#25216;&#26415;&#24212;&#29992;&#20110;&#21517;&#20026; TYPED-OO &#30340;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#12290;&#36825;&#31181;&#35821;&#35328;&#20855;&#26377;&#19978;&#36848;&#25152;&#26377;&#23433;&#20840;
&#24615;&#36136;&#65292;&#27492;&#22806;&#65292;&#36890;&#36807;&#25105;&#20204;&#26816;&#26597;&#22120;&#30340;&#31243;&#24207;&#19981;&#20250;&#32473;&#27809;&#26377;&#23545;&#24212;&#26041;&#27861;&#30340;&#23545;&#35937;&#21457;&#36865;&#28040;&#24687;&#65292;&#20063;&#19981;&#20250;&#32473;&#23545;&#35937;&#21457;
&#36865;&#23454;&#21442;&#25968;&#37327;&#25110;&#31867;&#22411;&#38169;&#35823;&#30340;&#28040;&#24687;&#12290;</p><p>TYPED-OO &#30340;&#31034;&#20363;&#31243;&#24207;&#22914; &#25152;&#31034;&#12290;&#36825;&#27573;&#31243;&#24207;&#23450;&#20041;&#20102;&#19968;&#20010;&#31867; <span class="stt">tree</span>&#65292;
&#20854;&#26041;&#27861; <span class="stt">sum</span> &#20687; &#37027;&#26679;&#27714;&#20986;&#26641;&#21494;&#20043;&#21644;&#65292;&#26041;&#27861; <span class="stt">equal</span> &#21462;&#21478;&#19968;
&#26869;&#26641;&#65292;&#36882;&#24402;&#21521;&#19979;&#22788;&#29702;&#26641;&#65292;&#21028;&#26029;&#20108;&#32773;&#26159;&#21542;&#30456;&#31561;&#12290;</p><p>&#36825;&#31181;&#35821;&#35328;&#30340;&#20027;&#35201;&#26032;&#29305;&#24615;&#26377;&#65306;</p><ul><li><p>&#23383;&#27573;&#21644;&#26041;&#27861;&#38656;&#35201;&#29992;&#21644;<a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#31867;&#20284;&#30340;&#35821;&#27861;&#25351;&#23450;&#31867;&#22411;&#12290;</p></li><li><p>&#22312;&#38754;&#21521;&#23545;&#35937;&#35774;&#20540;&#20013;&#65292;&#24341;&#20837;<span class="emph">&#25509;&#21475;</span> (<span class="emph">interface</span>) &#30340;&#27010;&#24565;&#12290;</p></li><li><p>&#35821;&#35328;&#20013;&#24341;&#20837;&#20102;<span class="emph">&#23376;&#31867;&#22411;&#22810;&#24577;</span> (<span class="emph">subtype polymorphism</span>) &#30340;&#27010;&#24565;&#12290;</p></li><li><p>&#35821;&#35328;&#20013;&#24341;&#20837;&#20102;<span class="emph">&#24378;&#21046;&#36716;&#25442;</span> (<span class="emph">casting</span>) &#30340;&#27010;&#24565;&#65292;&#21516;&#26102;&#20063;
&#21253;&#21547;ex9.6 &#20013;&#30340; <span class="stt">instanceof</span> &#21028;&#26029;&#12290;</p></li></ul><p>&#25105;&#20204;&#20381;&#27425;&#32771;&#34385;&#36825;&#20123;&#29305;&#24615;&#12290;</p><p>TYPED-OO &#20013;&#30340;&#26032;&#29983;&#25104;&#24335;&#22914; &#25152;&#31034;&#12290;&#25105;&#20204;&#28155;&#21152;&#19968;&#31181;&#31867;&#22411; <span class="stt">void</span>&#65292;
&#20316;&#20026; <span class="stt">set</span> &#25805;&#20316;&#30340;&#31867;&#22411;&#65292;&#28982;&#21518;&#28155;&#21152;ex7.9 &#20013;&#30340;&#21015;&#34920;&#31867;&#22411;&#65307;
&#20687;ex7.9 &#37027;&#26679;&#65292;&#25105;&#20204;&#35201;&#27714;&#35843;&#29992; <span class="stt">list</span> &#26102;&#33267;&#23569;&#32473;&#20986;&#19968;&#20010;&#23454;&#21442;&#12290;&#25105;&#20204;&#32473;&#31867;
&#22411;&#34920;&#36798;&#24335;&#30340;&#38598;&#21512;&#28155;&#21152;&#26631;&#35782;&#31526;&#65292;&#20294;&#22312;&#26412;&#31456;&#65292;&#29992;&#20316;&#31867;&#22411;&#30340;&#26631;&#35782;&#31526;&#19982;&#21516;&#21517;&#30340;&#31867;&#25110;&#25509;&#21475;&#30456;&#20851;&#32852;&#12290;&#31245;&#21518;
&#25105;&#20204;&#20180;&#32454;&#32771;&#34385;&#36825;&#31181;&#23545;&#24212;&#20851;&#31995;&#12290;&#26041;&#27861;&#38656;&#35201;&#25351;&#26126;&#32467;&#26524;&#31867;&#22411;&#21644;&#21442;&#25968;&#31867;&#22411;&#65292;&#20854;&#35821;&#27861;
&#19982;<a href="#%28part._types%29" data-pltdoc="x">&#31867;&#22411;</a>&#20013;&#30340; <span class="stt">letrec</span> &#31867;&#20284;&#12290;&#26368;&#21518;&#26159;&#20004;&#31181;&#26032;&#22686;&#30340;&#34920;&#36798;&#24335; <span class="stt">cast</span> &#21644;
<span class="stt">instanceof</span>&#12290;</p><p>&#35201;&#29702;&#35299;&#36825;&#31181;&#35821;&#35328;&#30340;&#26032;&#29305;&#24615;&#65292;&#25105;&#20204;&#24517;&#39035;&#20687; &#37027;&#26679;&#65292;&#23450;&#20041;&#35821;&#35328;&#30340;&#31867;&#22411;&#12290;</p><blockquote class="EoplDefinition"><p><a name="(elem._d9..5..1)"></a><span class="hspace">&nbsp;</span>&#23450;&#20041;&#31867;&#22411;&#20026; <span class="texMathInline">t</span> &#30340;&#34920;&#36798;&#20540; <span class="texMathInline">v</span> &#20855;&#26377;&#22914;&#19979;
&#24615;&#36136;&#65306;
<a name="(idx._(gentag._1442))"></a></p><ul><li><p>&#33509; <span class="texMathInline">c</span> &#20026;&#31867;&#65292;&#24403;&#19988;&#20165;&#24403;&#20540;&#26159;&#19968;&#20010;&#23545;&#35937;&#65292;&#19988;&#26159;&#31867; <span class="texMathInline">c</span> &#25110;&#20854;&#21518;&#20195;&#30340;&#23454;&#20363;&#26102;&#65292;&#20854;&#31867;
&#22411;&#20026; <span class="texMathInline">c</span>&#12290;</p></li><li><p>&#33509; <span class="texMathInline">I</span> &#20026;&#25509;&#21475;&#65292;&#24403;&#19988;&#20165;&#24403;&#20540;&#26159;&#19968;&#20010;&#23545;&#35937;&#65292;&#19988;&#25152;&#23646;&#31867;&#23454;&#29616;&#20102; <span class="texMathInline">I</span> &#26102;&#65292;&#20540;&#31867;&#22411;&#20026;
<span class="texMathInline">I</span>&#12290;&#24403;&#19988;&#20165;&#24403;&#31867;&#20855;&#26377; <span class="stt">implements </span><span class="texMathInline">I</span> &#22768;&#26126;&#65292;&#25110;&#20854;&#31062;&#20808;&#23454;&#29616;&#20102; <span class="texMathInline">I</span> &#26102;&#65292;&#31867;
&#23454;&#29616;&#20102; <span class="texMathInline">I</span>&#12290;</p></li><li><p>&#33509; <span class="texMathInline">t</span> &#20026;&#20854;&#20182;&#31867;&#22411;&#65292;&#21017;&#29992; &#20013;&#30340;&#35268;&#21017;&#12290;
<a name="(idx._(gentag._1443))"></a></p></li></ul></blockquote><p>&#23545;&#35937;&#21482;&#33021;&#26159;&#19968;&#20010;&#31867;&#30340;&#23454;&#20363;&#65292;&#20294;&#21487;&#20197;&#26377;&#24456;&#22810;&#31867;&#22411;&#12290;</p><ul><li><p>&#21019;&#24314;&#23545;&#35937;&#26102;&#30340;&#31867;&#26159;&#20854;&#31867;&#22411;&#12290;</p></li><li><p>&#35813;&#31867;&#30340;&#36229;&#31867;&#20197;&#21450;&#32487;&#25215;&#20851;&#31995;&#19978;&#26041;&#30340;&#25152;&#26377;&#31867;&#26159;&#20854;&#31867;&#22411;&#12290;&#29305;&#21035;&#22320;&#65292;&#27599;&#20010;&#23545;&#35937;&#37117;&#26159;
<span class="stt">object</span> &#31867;&#22411;&#12290;</p></li><li><p>&#23545;&#35937;&#25152;&#23646;&#31867;&#23454;&#29616;&#30340;&#20219;&#24847;&#25509;&#21475;&#22343;&#26159;&#20854;&#31867;&#22411;&#12290;</p></li></ul><p>&#31532;&#20108;&#26465;&#24615;&#36136;&#21483;&#20570;<span class="emph">&#23376;&#31867;&#22810;&#24577;</span> (<span class="emph">subclass polymorphism</span>)&#12290;&#31532;&#19977;&#26465;&#24615;&#36136;
&#21483;&#20570;<span class="emph">&#25509;&#21475;&#22810;&#24577;</span> (<span class="emph">interface polymorphism</span>)&#12290;
<a name="(idx._(gentag._1444))"></a>
<a name="(idx._(gentag._1445))"></a>
<a name="(idx._(gentag._1446))"></a></p><p><a name="(idx._(gentag._1447))"></a>
<a name="(idx._(gentag._1448))"></a>
&#25509;&#21475;&#34920;&#31034;&#23454;&#29616;&#26576;&#20123;&#26041;&#27861;&#30340;&#25152;&#26377;&#23545;&#35937;&#38598;&#21512;&#65292;&#32780;&#19981;&#35770;&#36825;&#20123;&#23545;&#35937;&#22914;&#20309;&#29983;&#25104;&#12290;&#20165;&#24403;&#31867; <span class="texMathInline">c</span> &#25353;&#29031;&#32422;
&#23450;&#30340;&#31867;&#22411;&#23454;&#29616;&#20102;&#25509;&#21475; <span class="texMathInline">I</span> &#35201;&#27714;&#30340;&#25152;&#26377;&#26041;&#27861;&#26102;&#65292;&#25105;&#20204;&#30340;&#21028;&#31867;&#31995;&#32479;&#25165;&#20801;&#35768; <span class="texMathInline">c</span> &#22768;&#31216;&#23454;&#29616;&#20102;
<span class="texMathInline">I</span>&#12290;&#34429;&#28982;&#25105;&#20204;&#30340;&#20363;&#23376;&#20013;&#21482;&#29992;&#20102;&#19968;&#20010;&#25509;&#21475;&#65292;&#20294;&#19968;&#20010;&#31867;&#21487;&#20197;&#23454;&#29616;&#22810;&#20010;&#19981;&#21516;&#25509;&#21475;&#12290;</p><blockquote class="EoplFigure"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">interface tree</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method int sum ()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method bool equal (t : tree)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">class interior-node extends object implements tree</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field tree left</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field tree right</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method void initialize(l : tree, r : tree)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">set left = l; set right = r</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method tree getleft () left</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method tree getright () right</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method int sum () +(send left sum(), send right sum())</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method bool equal (t : tree)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if instanceof t interior-node</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">then if send left equal(send</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">cast t interior-node</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">getleft())</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then send right equal(send</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">cast t interior-node</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">getright())</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else zero?(1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else zero?(1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">class leaf-node extends object implements tree</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">field int value</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method void initialize (v : int) set value = v</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method int sum () value</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method int getvalue () value</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method bool equal (t : tree)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if instanceof t leaf-node</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">then zero?(-(value, send cast t leaf-node getvalue()))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">else zero?(1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">let o1 = new interior-node (</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">new interior-node (</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">new leaf-node(3),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">new leaf-node(4)),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">new leaf-node(5))</span></p></td></tr><tr><td><p><span class="stt">in list(send o1 sum(),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if send o1 equal(o1) then 100 else 200)</span></p></td></tr></table></blockquote><blockquote class="caption"><p>TYPED-OO &#30340;&#31243;&#24207;&#31034;&#20363;<a name="(elem._fig-9..12)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><span class="Iidentity">\begin{align*}         \mathit{ClassDecl} &amp;::= <span class="stt">class </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> extends </span><span class="Iidentity">\mathit{Identifier}</span> \\
          &amp;\mathrel{\phantom{::=}} \phantom{x}\{<span class="stt">implements </span><span class="Iidentity">\mathit{Identifier}</span>\}^{*} \\
          &amp;\mathrel{\phantom{::=}} \phantom{x}\{<span class="stt">field </span><span class="Iidentity">\mathit{Type}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span>\}^{*} \\
          &amp;\mathrel{\phantom{::=}} \phantom{x}\{<span class="Iidentity">\mathit{MethodDecl}</span>\}^{*} \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{\begin{math}\begin{alignedat}{-1}
                                          &amp;<span class="stt">a-class-decl</span><span class="stt">(</span><span class="stt">c-name s-name i-names</span> \\
                                          &amp;\phantom{xxxxxxxxxxxx}<span class="stt">f-types f-names m-decls</span><span class="stt">)</span>
                                         \end{alignedat}\end{math}} \\[5pt]
         \mathit{ClassDecl} &amp;::= <span class="stt">interface </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> </span><span class="Iidentity">\{\mathit{AbstractMethodDecl}\}^{*}</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">an-interface-decl (i-name abs-m-decls)</span>} \\[5pt]
        \mathit{MethodDecl} &amp;::= <span class="stt">method </span><span class="Iidentity">\mathit{Type}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\{\mathit{Identifier} \ : \mathit{Type}\}^{*(,)}</span><span class="stt">) </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{{\begin{math}\begin{alignedat}{-1}
                                          &amp;<span class="stt">a-method-decl</span> \\
                                          &amp;\phantom{x}<span class="stt">(res-type m-name vars var-types body)</span>
                                         \end{alignedat}\end{math}}} \\[5pt]
\mathit{AbstractMethodDecl} &amp;::= <span class="stt">method </span><span class="Iidentity">\mathit{Type}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\{\mathit{Identifier} \ : \mathit{Type}\}^{*(,)}</span><span class="stt">)</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{{\begin{math}\begin{alignedat}{-1}
                                          &amp;<span class="stt">a-method-decl</span> \\
                                          &amp;\phantom{x}<span class="stt">(res-type m-name m-vars m-var-types)</span>
                                         \end{alignedat}\end{math}}} \\[5pt]
        \mathit{Expression} &amp;::= <span class="stt">cast </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">cast-exp (exp c-name)</span>} \\[5pt]
        \mathit{Expression} &amp;::= <span class="stt">instanceof </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\mathit{Identifier}</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">instanceof-exp (exp name)</span>} \\[5pt]
              \mathit{Type} &amp;::= <span class="stt">void</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">void-type ()</span>} \\[5pt]
              \mathit{Type} &amp;::= \mathit{Identifier} \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">class-type (class-name)</span>} \\[5pt]
              \mathit{Type} &amp;::= <span class="stt">listof </span><span class="Iidentity">\mathit{Type}</span> \\[-3pt]
          &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">list-type (type1)</span>}\end{align*}</span></p><blockquote class="caption"><p>TYPED-OO &#20013;&#30340;&#26032;&#29983;&#25104;&#24335;<a name="(elem._fig-9..13)"></a></p></blockquote></blockquote><p>&#22312; &#20013;&#65292;&#31867; <span class="stt">interior-node</span> &#21644; <span class="stt">leaf-node</span> &#37117;&#23454;&#29616;&#20102;&#25509;&#21475;
<span class="stt">tree</span>&#12290;&#31867;&#22411;&#26816;&#26597;&#22120;&#20801;&#35768;&#36825;&#26679;&#65292;&#22240;&#20026;&#23427;&#20204;&#37117;&#23454;&#29616;&#20102; <span class="stt">tree</span> &#25152;&#35201;&#27714;&#30340; <span class="stt">sum</span> &#21644;
<span class="stt">equal</span> &#26041;&#27861;&#12290;</p><p><a name="(idx._(gentag._1449))"></a>
&#24403; <span class="texMathInline">e</span> &#30340;&#20540;&#26159;&#19968;&#20010;&#23545;&#35937;&#65292;&#19988;&#26159;&#31867; <span class="texMathInline">c</span> &#25110;&#20854;&#21518;&#20195;&#30340;&#23454;&#20363;&#26102;&#65292;&#34920;&#36798;&#24335; <span class="stt">instanceof</span><span class="stt">
</span><span class="texMathInline">e</span><span class="stt"> </span><span class="texMathInline">c</span> &#36820;&#22238;&#30495;&#12290;&#24378;&#21046;&#36716;&#25442;&#26159; <span class="stt">instanceof</span> &#30340;&#34917;&#20805;&#12290;&#24403; <span class="texMathInline">e</span> &#30340;&#20540;&#26159;&#19968;&#23545;&#35937;&#65292;
&#19988;&#26159;&#31867; <span class="texMathInline">c</span> &#25110;&#20854;&#21518;&#20195;&#30340;&#23454;&#20363;&#26102;&#65292;<span class="stt">cast</span> &#34920;&#36798;&#24335; <span class="stt">cast </span><span class="texMathInline">e</span><span class="stt"> </span><span class="texMathInline">c</span> &#30340;&#20540;&#19982;
<span class="texMathInline">e</span> &#30340;&#20540;&#30456;&#21516;&#65307;&#21542;&#21017; <span class="stt">cast</span> &#34920;&#36798;&#24335;&#25253;&#38169;&#12290;<span class="stt">cast </span><span class="texMathInline">e</span><span class="stt"> </span><span class="texMathInline">c</span> &#30340;&#31867;&#22411;&#24635;&#26159;<span class="texMathInline">c</span>&#65292;
&#22240;&#20026;&#21482;&#35201;&#36820;&#22238;&#20540;&#65292;&#23427;&#30340;&#31867;&#22411;&#23601;&#19968;&#23450;&#26159; <span class="texMathInline">c</span>&#12290;</p><p>&#20363;&#22914;&#65292;&#25105;&#20204;&#30340;&#31034;&#20363;&#31243;&#24207;&#21253;&#21547;&#22914;&#19979;&#26041;&#27861;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">method bool equal(t : tree)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">if instanceof t interior-node</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">then if send left</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">equal(send cast t interior-node getleft())</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then send right</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">equal(send cast t interior-node getright())</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else false</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">else false</span></p></td></tr></table></blockquote><p>&#34920;&#36798;&#24335; <span class="stt">cast t interior-node</span> &#26816;&#26597; <span class="stt">t</span> &#30340;&#20540;&#26159;&#21542;&#20026; <span class="stt">interior-node</span>&#65288;&#25110;&#20854;
&#21518;&#20195;&#65292;&#22914;&#26524;&#26377;&#30340;&#35805;&#65289;&#30340;&#23454;&#20363;&#12290;&#22914;&#26524;&#26159;&#65292;&#21017;&#36820;&#22238; <span class="stt">t</span> &#30340;&#20540;&#65307;&#21542;&#21017;&#25253;&#38169;&#12290;&#24403;&#19988;&#20165;&#24403;&#23545;&#24212;&#30340;
<span class="stt">cast</span> &#25104;&#21151;&#26102;&#65292;<span class="stt">instanceof</span> &#34920;&#36798;&#24335;&#36820;&#22238;&#30495;&#20540;&#12290;&#22240;&#27492;&#65292;&#26412;&#20363;&#20013;&#30340; <span class="stt">instanceof</span>
&#30830;&#20445;&#24378;&#21046;&#36716;&#25442;&#19968;&#23450;&#25104;&#21151;&#12290;&#32780;&#24378;&#21046;&#36716;&#25442;&#21448;&#30830;&#20445; <span class="stt">send ... getleft()</span> &#33021;&#22815;&#20351;&#29992;&#12290;&#24378;&#21046;&#36716;
&#25442;&#34920;&#36798;&#24335;&#36820;&#22238;&#20540;&#30340;&#31867;&#22411;&#19968;&#23450;&#20026;&#31867; <span class="stt">interior-node</span>&#65292;&#22240;&#27492;&#65292;&#32473;&#36825;&#20010;&#20540;&#21457;&#36865;&#28040;&#24687;
<span class="stt">getleft</span> &#26159;&#23433;&#20840;&#30340;&#12290;</p></blockquote><p><a name="(idx._(gentag._1450))"></a>
<a name="(idx._(gentag._1451))"></a>
&#25105;&#20204;&#30340;&#23454;&#29616;&#20174;<a href="#%28part._s9..4..1%29" data-pltdoc="x">&#23545;&#35937;</a>&#20013;&#30340;&#35299;&#37322;&#22120;&#24320;&#22987;&#12290;&#25105;&#20204;&#32473; <span class="stt">value-of</span> &#28155;&#21152;&#20004;&#26465;&#35821;&#21477;&#65292;&#27714;
<span class="stt">instanceof</span> &#21644; <span class="stt">cast</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cast-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">obj</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">is-subclass?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">object-&gt;class-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">report-cast-error</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">instanceof-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">obj</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">is-subclass?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">object-&gt;class-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#36807;&#31243; <span class="stt">is-subclass?</span> &#27839;&#30528;&#31532;&#19968;&#20010;&#31867;&#32467;&#26500;&#30340;&#29238;&#31995;&#32780;&#19978;&#65292;&#30452;&#21040;&#25214;&#20986;&#31532;&#20108;&#20010;&#31867;&#65292;&#25110;&#22312;&#29238;&#31995;&#20026;
<span class="stt">#f</span> &#26102;&#20572;&#27490;&#12290;&#30001;&#20110;&#25509;&#21475;&#21482;&#29992;&#20316;&#31867;&#22411;&#65292;&#36825;&#20010;&#36807;&#31243;&#24573;&#30053;&#23427;&#20204;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">is-subclass?</span></span> : <span class="texMathInline">\mathit{ClassName} \times \mathit{ClassName} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">is-subclass?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-name1</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name1</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-&gt;super-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-class</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">is-subclass?</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#26679;&#65292;&#26412;&#33410;&#35821;&#35328;&#30340;&#35299;&#37322;&#22120;&#23601;&#20462;&#25913;&#23436;&#25104;&#20102;&#12290;
<a name="(idx._(gentag._1452))"></a>
<a name="(idx._(gentag._1453))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex9..30)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21019;&#24314;&#25509;&#21475; <span class="stt">summable</span>&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">interface summable</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method int sum ()</span></p></td></tr></table></blockquote><p>&#20026;&#21487;&#27714;&#21644;&#21015;&#34920;&#12289;&#21487;&#27714;&#21644;&#20108;&#21449;&#26641;&#65288;&#22914;&#65289;&#21644;&#21487;&#27714;&#21644;&#30340;&#24191;&#20041;&#26641;&#65288;&#27599;&#20010;&#33410;&#28857;
&#21253;&#21547;&#19968;&#20010;&#21487;&#27714;&#21644;&#30340;&#23376;&#33410;&#28857;&#21015;&#34920;&#65289;&#23450;&#20041;&#31867;&#12290;</p><p>&#28982;&#21518;&#20026;&#25509;&#21475;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">interface stringable</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method string to-string ()</span></p></td></tr></table></blockquote><p>&#20570;&#21516;&#26679;&#30340;&#25805;&#20316;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..31)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312; &#20013;&#65292;&#25226; <span class="stt">tree</span> &#23450;&#20041;&#20026;&#31867;&#65292;&#28982;&#21518;&#35753;&#20004;&#20010;&#33410;&#28857;&#31867;&#32487;&#25215;
<span class="stt">tree</span> &#21487;&#34892;&#21527;&#65311;&#22312;&#20160;&#20040;&#24773;&#20917;&#19979;&#36825;&#31181;&#26041;&#27861;&#27604;&#20351;&#29992; <span class="stt">summable</span> &#20043;&#31867;&#30340;&#25509;&#21475;&#26356;&#22909;&#65311;&#22312;&#20160;
&#20040;&#24773;&#20917;&#19979;&#26356;&#31967;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..32)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1454))"></a>
&#19981;&#20351;&#29992; <span class="stt">instanceof</span> &#21644; <span class="stt">cast</span>&#65292;&#32473;&#31867; <span class="stt">tree</span> &#20889;&#19968;&#20010;&#31561;&#20540;&#21028;&#26029;&#35859;&#35789;&#12290;&#36825;&#37324;&#38656;&#35201;
&#29992;<span class="emph">&#21452;&#27966;&#21457;</span> (<span class="emph">double dispatch</span>) &#26367;&#20195;&#36890;&#24120;&#26041;&#27861;&#20351;&#29992;&#30340;&#21333;&#27966;&#21457;&#12290;&#21487;&#20570;&#22914;&#19979;&#27169;&#25311;&#65306;&#19981;&#29992;
<span class="stt">instanceof</span> &#25214;&#20986;&#23454;&#21442; <span class="stt">t</span> &#30340;&#31867;&#65292;&#32780;&#26159;&#35753;&#24403;&#21069;&#30340;&#26641;&#32473; <span class="stt">t</span> &#36820;&#22238;&#19968;&#26465;&#28040;&#24687;&#65292;&#36825;&#26465;
&#28040;&#24687;&#32534;&#30721;&#20102;&#24403;&#21069;&#26641;&#30340;&#25152;&#23646;&#31867;&#65292;&#20854;&#21442;&#25968;&#21017;&#21253;&#21547;&#36866;&#24403;&#23383;&#27573;&#30340;&#20540;&#12290;</p></blockquote><h4 class="heading">9.6<tt>&nbsp;</tt><a name="(part._s9..6)"></a>&#31867;&#22411;&#26816;&#26597;&#22120;<span class="button-group"><a href="#(part._s9..6)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1455))"></a>
&#29616;&#22312;&#25105;&#20204;&#26469;&#30475;&#36825;&#31181;&#35821;&#35328;&#30340;&#26816;&#26597;&#22120;&#12290;&#26816;&#26597;&#22120;&#30340;&#30446;&#26631;&#26159;&#30830;&#20445;&#19968;&#20123;&#23433;&#20840;&#24615;&#36136;&#12290;&#23545;&#25105;&#20204;&#30340;&#35821;&#35328;&#26469;&#35828;&#65292;
&#36825;&#20123;&#24615;&#36136;&#21253;&#25324;&#21407;&#26377;&#36807;&#31243;&#24335;&#35821;&#35328;&#30340;&#37027;&#37096;&#20998;&#21644;&#20043;&#21518;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#22686;&#21152;&#30340;&#37027;&#37096;&#20998;&#65306;&#36890;&#36807;&#25105;&#20204;&#31867;&#22411;&#26816;
&#26597;&#22120;&#30340;&#31243;&#24207;&#19981;&#20250;</p><ul><li><p>&#32473;&#38750;&#23545;&#35937;&#21457;&#36865;&#28040;&#24687;&#65292;</p></li><li><p>&#32473;&#27809;&#26377;&#23545;&#24212;&#26041;&#27861;&#30340;&#23545;&#35937;&#21457;&#36865;&#28040;&#24687;&#65292;</p></li><li><p>&#32473;&#23545;&#35937;&#21457;&#36865;&#21442;&#25968;&#25968;&#37327;&#25110;&#31867;&#22411;&#38169;&#35823;&#30340;&#28040;&#24687;&#12290;
<a name="(idx._(gentag._1456))"></a></p></li></ul><p>&#25105;&#20204;&#26080;&#24847;&#39564;&#35777; <span class="stt">initialize</span> &#26041;&#27861;&#30830;&#23454;&#21021;&#22987;&#21270;&#20102;&#25152;&#26377;&#23383;&#27573;&#65292;&#25152;&#20197;&#31243;&#24207;&#20173;&#21487;&#33021;&#24341;&#29992;&#26410;&#21021;&#22987;
&#21270;&#30340;&#23383;&#27573;&#12290;&#21516;&#26679;&#22320;&#65292;&#30001;&#20110; <span class="stt">initialize</span> &#26041;&#27861;&#30340;&#31867;&#22411;&#36890;&#24120;&#38590;&#20197;&#39044;&#27979;&#65292;&#25105;&#20204;&#30340;&#26816;&#26597;&#22120;&#26410;&#38450;
&#27490;&#20197;&#38169;&#35823;&#25968;&#37327;&#25110;&#31867;&#22411;&#30340;&#21442;&#25968;&#26174;&#24335;&#35843;&#29992; <span class="stt">initialize</span> &#26041;&#27861;&#65292;&#20294;&#36890;&#36807; <span class="stt">new</span> &#38388;&#25509;&#35843;&#29992;
<span class="stt">initialize</span> &#26041;&#27861;&#19968;&#23450;&#26159;&#27491;&#30830;&#30340;&#12290;</p><p>&#26816;&#26597;&#22120;&#39318;&#20808;&#23454;&#29616; <span class="stt">type-of-program</span>&#12290;&#30001;&#20110;&#25152;&#26377;&#31867;&#30340;&#25152;&#26377;&#26041;&#27861;&#37117;&#26159;&#20114;&#36882;&#24402;&#30340;&#65292;&#25105;&#20204;&#30340;&#22788;
&#29702;&#26041;&#24335;&#31867;&#20284; <span class="stt">letrec</span>&#12290;&#23545; <span class="stt">letrec</span>&#65292;&#25105;&#20204;&#39318;&#20808;&#25910;&#38598;&#36807;&#31243;&#22768;&#26126;&#30340;&#31867;&#22411;&#65292;&#29983;&#25104;
<span class="stt">tenv-for-letrec-body</span>&#65288;&#65289;&#12290;&#28982;&#21518;&#65292;&#25105;&#20204;&#26681;&#25454;&#22768;&#26126;&#31867;&#22411;&#26816;&#26597;&#27599;
&#20010;&#36807;&#31243;&#20027;&#20307;&#12290;&#26368;&#21518;&#65292;&#25105;&#20204;&#22312; <span class="stt">tenv-for-letrec-body</span> &#20013;&#26816;&#26597; <span class="stt">letrec</span> &#30340;&#20027;&#20307;&#12290;</p><p><a name="(idx._(gentag._1457))"></a>
<a name="(idx._(gentag._1458))"></a>
&#36825;&#37324;&#65292;&#25105;&#20204;&#39318;&#20808;&#35843;&#29992; <span class="stt">initialize-static-class-env!</span>&#65292;&#36941;&#21382;&#31867;&#22768;&#26126;&#65292;&#23558;&#25152;&#26377;&#31867;&#22411;&#25910;&#38598;
&#21040;&#19968;&#20010;&#38745;&#24577;&#31867;&#29615;&#22659;&#20013;&#12290;&#30001;&#20110;&#36825;&#20010;&#29615;&#22659;&#26159;&#20840;&#23616;&#30340;&#65292;&#19988;&#19981;&#20250;&#25913;&#21464;&#65292;&#25105;&#20204;&#19981;&#26159;&#23558;&#20854;&#20316;&#21442;&#25968;&#20256;&#36882;&#65292;&#32780;
&#26159;&#25226;&#23427;&#23384;&#20648;&#22312;&#19968;&#20010; Scheme &#21464;&#37327;&#20013;&#12290;&#28982;&#21518;&#65292;&#25105;&#20204;&#29992; <span class="stt">check-class-decl!</span> &#26816;&#26597;&#27599;&#20010;&#31867;&#22768;
&#26126;&#12290;&#26368;&#21518;&#65292;&#25105;&#20204;&#25214;&#20986;&#31243;&#24207;&#20027;&#20307;&#30340;&#31867;&#22411;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">type-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-decls</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">initialize-static-class-env!</span><span class="hspace">&nbsp;</span><span class="RktSym">class-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for-each</span><span class="hspace">&nbsp;</span><span class="RktSym">check-class-decl!</span><span class="hspace">&nbsp;</span><span class="RktSym">class-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#38745;&#24577;&#31867;&#29615;&#22659;&#23558;&#27599;&#20010;&#31867;&#21517;&#26144;&#23556;&#21040;&#19968;&#20010;&#38745;&#24577;&#31867;&#65292;&#36825;&#20010;&#31867;&#21253;&#21547;&#29238;&#31867;&#30340;&#21517;&#23383;&#12289;&#23383;&#27573;&#30340;&#21517;&#23383;&#21644;&#31867;&#22411;&#65292;&#20197;
&#21450;&#26041;&#27861;&#30340;&#21517;&#23383;&#21644;&#31867;&#22411;&#12290;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#25509;&#21475;&#26082;&#27809;&#26377;&#29238;&#31867;&#65292;&#20063;&#27809;&#26377;&#23383;&#27573;&#65292;&#25152;&#20197;&#25105;&#20204;&#29992;&#21482;&#21547;&#25152;
&#38656;&#26041;&#27861;&#21517;&#23383;&#21644;&#31867;&#22411;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#23427;&#20204;&#65288;&#20294;&#26159;&#65292;&#30475;&#30475;ex9.36&#65289;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">static-class?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-static-class</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">super-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">maybe</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interface-names</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">field-names</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">field-types</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">type?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">method-tenv?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-interface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">method-tenv?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#22312;&#24605;&#32771;&#22914;&#20309;&#29983;&#25104;&#38745;&#24577;&#29615;&#22659;&#20043;&#21069;&#65292;&#25105;&#20204;&#20808;&#24605;&#32771;&#22914;&#20309;&#25193;&#23637; <span class="stt">type-of</span>&#65292;&#26816;&#26597;&#20845;&#31181;&#38754;&#21521;&#23545;&#35937;&#34920;
&#36798;&#24335;&#30340;&#31867;&#22411;&#65306;<span class="stt">self</span>&#12289;<span class="stt">instanceof</span>&#12289;<span class="stt">cast</span>&#12289;&#26041;&#27861;&#35843;&#29992;&#12289;&#36229;&#31867;&#35843;&#29992;&#65292;&#20197;&#21450;
<span class="stt">new</span>&#12290;</p><p><a name="(idx._(gentag._1459))"></a>
&#23545; <span class="stt">self</span> &#34920;&#36798;&#24335;&#65292;&#25105;&#20204;&#29992;&#20266;&#21464;&#37327; <span class="stt">%self</span> &#26597;&#35810;&#20854;&#31867;&#22411;&#12290;&#23601;&#20687;&#22312;&#35299;&#37322;&#22120;&#20013;&#65292;
<span class="stt">%self</span> &#32465;&#23450;&#21040;&#24403;&#21069;&#25345;&#26377;&#23545;&#35937;&#19968;&#26679;&#65292;&#22312;&#26816;&#26597;&#22120;&#20013;&#65292;&#35813;&#21464;&#37327;&#19968;&#23450;&#32465;&#23450;&#21040;&#24403;&#21069;&#25345;&#26377;&#31867;&#30340;&#31867;&#22411;&#12290;</p><p><span class="stt">instanceof</span> &#34920;&#36798;&#24335;&#22914;&#26524;&#36820;&#22238;&#65292;&#19968;&#23450;&#36820;&#22238; <span class="stt">bool</span> &#20540;&#12290;&#33509; <span class="texMathInline">e</span> &#30340;&#20540;&#26159;&#19968;&#20010;&#23545;&#35937;&#65292;
&#19988;&#26159; <span class="texMathInline">c</span> &#25110;&#23427;&#30340;&#26576;&#20010;&#21518;&#20195;&#30340;&#23454;&#20363;&#65292;&#21017;&#34920;&#36798;&#24335; <span class="stt">cast </span><span class="texMathInline">e</span><span class="stt"> </span><span class="texMathInline">c</span> &#36820;&#22238; <span class="texMathInline">e</span> &#30340;&#20540;&#12290;
&#22240;&#27492;&#65292;<span class="stt">cast </span><span class="texMathInline">e</span><span class="stt"> </span><span class="texMathInline">c</span> &#22914;&#26524;&#36820;&#22238;&#20540;&#65292;&#20540;&#30340;&#31867;&#22411;&#26159; <span class="texMathInline">c</span>&#12290;&#25152;&#20197;&#25105;&#20204;&#24635;&#33021;&#23558;
<span class="stt">cast </span><span class="texMathInline">e</span><span class="stt"> </span><span class="texMathInline">c</span> &#30340;&#31867;&#22411;&#35270;&#20026; <span class="texMathInline">c</span>&#12290;&#23545; <span class="stt">instanceof</span> &#21644; <span class="stt">cast</span> &#34920;&#36798;&#24335;&#65292;
&#35299;&#37322;&#22120;&#27714;&#20986;&#21442;&#25968;&#30340;&#20540;&#65292;&#24182;&#29992;&#23427;&#25191;&#34892; <span class="stt">object-&gt;class-name</span>&#65292;&#25152;&#20197;&#25105;&#20204;&#20063;&#24517;&#39035;&#30830;&#20445;&#25805;&#20316;&#25968;
&#31867;&#22411;&#27491;&#24120;&#65292;&#19988;&#36820;&#22238;&#20540;&#26159;&#19968;&#20010;&#23545;&#35937;&#12290;&#36825;&#19977;&#31181;&#24773;&#20917;&#30340;&#20195;&#30721;&#22914; &#25152;&#31034;&#12290;
<a name="(idx._(gentag._1460))"></a>
<a name="(idx._(gentag._1461))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">self-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-tenv</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tenv</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">%self</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">instanceof-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">class-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">obj-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">class-type?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj-type</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">bool-type</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">report-bad-type-to-instanceof</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cast-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">class-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">obj-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">if</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">class-type?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj-type</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">class-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">class-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">report-bad-type-to-cast</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#38754;&#21521;&#23545;&#35937;&#34920;&#36798;&#24335;&#22312; <span class="stt">type-of</span> &#20013;&#30340;&#23545;&#24212;&#35821;&#21477;&#65292;&#31532; 1 &#37096;&#20998;<a name="(elem._fig-9..14)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1462))"></a>
&#25509;&#19979;&#26469;&#25105;&#20204;&#32771;&#34385;&#26041;&#27861;&#35843;&#29992;&#12290;&#29616;&#22312;&#65292;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#26377;&#19977;&#31181;&#35843;&#29992;&#65306;&#36807;&#31243;&#35843;&#29992;&#12289;&#26041;&#27861;&#35843;&#29992;&#21644;&#36229;&#31867;&#35843;
&#29992;&#12290;&#25105;&#20204;&#25277;&#35937;&#20986;&#19968;&#20010;&#36807;&#31243;&#26469;&#26816;&#26597;&#23427;&#20204;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">type-of-call</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Listof(Type)} \times \mathit{Listof(Exp)} \times \mathit{Exp} \to \mathit{Type}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">type-of-call</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator-type</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-types</span><span class="hspace">&nbsp;</span><span class="RktSym">rands</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg-types</span><span class="hspace">&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-types</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-types</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-wrong-number-of-arguments</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-types</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-types</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for-each</span><span class="hspace">&nbsp;</span><span class="RktSym">check-is-subtype!</span><span class="hspace">&nbsp;</span><span class="RktSym">rand-types</span><span class="hspace">&nbsp;</span><span class="RktSym">arg-types</span><span class="hspace">&nbsp;</span><span class="RktSym">rands</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">result-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-rator-not-of-proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">rator-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#20010;&#36807;&#31243;&#31561;&#20215;&#20110; CHECKED &#20013; <span class="stt">call-exp</span> &#23545;&#24212;&#30340;&#37027;&#19968;&#34892;&#65288;&#65289;&#65292;&#20294;
&#22810;&#20102;&#20004;&#22788;&#26126;&#26174;&#21306;&#21035;&#12290;&#39318;&#20808;&#65292;&#30001;&#20110;&#25105;&#20204;&#30340;&#36807;&#31243;&#29616;&#22312;&#21462;&#22810;&#20010;&#21442;&#25968;&#65292;&#25105;&#20204;&#35201;&#30830;&#20445;&#35843;&#29992;&#26102;&#30340;&#23454;&#21442;&#25968;&#30446;
&#27491;&#30830;&#12290;&#22312; <span class="stt">for-each</span> &#36825;&#34892;&#65292;&#25105;&#20204;&#36880;&#19968;&#23545;&#29031;&#27599;&#20010;&#25805;&#20316;&#25968;&#30340;&#31867;&#22411;&#21644;&#36807;&#31243;&#31867;&#22411;&#20013;&#30456;&#24212;&#21442;&#25968;&#30340;
&#31867;&#22411;&#12290;&#26356;&#26377;&#24847;&#24605;&#30340;&#26159;&#31532;&#20108;&#28857;&#65292;&#25105;&#20204;&#25226; &#20013;&#30340; <span class="stt">check-equal-type!</span>
&#25442;&#25104;&#20102; <span class="stt">check-is-subtype!</span>&#12290;</p><p>&#20026;&#20160;&#20040;&#24517;&#39035;&#36825;&#26679;&#65311;&#23376;&#31867;&#22810;&#24577;&#21407;&#21017;&#26159;&#35828;&#65292;&#22914;&#26524;&#31867; <span class="texMathInline">c_2</span> &#25193;&#23637;&#20102; <span class="texMathInline">c_1</span>&#65292;&#37027;&#20040;&#31867; <span class="texMathInline">c_2</span>
<a name="(idx._(gentag._1463))"></a>
&#30340;&#23545;&#35937;&#21487;&#22312;&#31867; <span class="texMathInline">c_1</span> &#23545;&#35937;&#33021;&#22815;&#20986;&#29616;&#30340;&#20219;&#20309;&#22320;&#26041;&#20351;&#29992;&#12290;&#22914;&#26524;&#25105;&#20204;&#20889;&#20986;&#20102;&#36807;&#31243; <span class="stt">proc (o</span><span class="stt">
</span><span class="stt">: </span><span class="texMathInline">c_1</span><span class="stt">) ...</span>&#65292;&#37027;&#20040;&#35813;&#36807;&#31243;&#24212;&#35813;&#33021;&#21462;&#31867;&#22411;&#20026; <span class="texMathInline">c_2</span> &#30340;&#23454;&#21442;&#12290;</p><p>&#23376;&#31867;&#22810;&#24577;&#30340;&#27010;&#24565;&#21487;&#20197;&#22823;&#20307;&#19978;&#25512;&#24191;&#21040;<span class="emph">&#23376;&#31867;&#22411;&#22810;&#24577;</span>&#65292;&#23601;&#20687;<a href="#%28part._modules%29" data-pltdoc="x">&#27169;&#22359;</a>&#20013;&#30340;
<span class="stt">&lt;:</span> &#37027;&#26679;&#12290;&#25105;&#20204;&#35828; <span class="texMathInline">t_1</span> &#26159; <span class="texMathInline">t_2</span> &#30340;&#23376;&#31867;&#22411;&#65292;&#24403;&#19988;&#20165;&#24403;&#65306;
<a name="(idx._(gentag._1464))"></a></p><ul><li><p><span class="texMathInline">t_1</span> &#21644; <span class="texMathInline">t_2</span> &#26159;&#31867;&#65292;&#19988; <span class="texMathInline">t_1</span> &#26159; <span class="texMathInline">t_2</span> &#30340;&#23376;&#31867;&#65292;&#25110;</p></li><li><p><span class="texMathInline">t_1</span> &#26159;&#31867;&#65292;<span class="texMathInline">t_2</span> &#26159;&#25509;&#21475;&#65292;&#19988; <span class="texMathInline">t_1</span> &#25110;&#20854;&#26576;&#20010;&#36229;&#31867;&#23454;&#29616;&#20102; <span class="texMathInline">t_2</span>&#65292;&#25110;</p></li><li><p><span class="texMathInline">t_1</span> &#21644; <span class="texMathInline">t_2</span> &#26159;&#36807;&#31243;&#31867;&#22411;&#65292;&#19988; <span class="texMathInline">t_2</span> &#21442;&#25968;&#31867;&#22411;&#26159; <span class="texMathInline">t_1</span> &#21442;&#25968;&#31867;&#22411;&#30340;&#23376;
&#31867;&#22411;&#65292;<span class="texMathInline">t_1</span> &#32467;&#26524;&#31867;&#22411;&#26159; <span class="texMathInline">t_2</span> &#32467;&#26524;&#31867;&#22411;&#30340;&#23376;&#31867;&#22411;&#12290;</p></li></ul><blockquote class="EoplFigure"><p><div class="SIntrapara">[!th]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="subtyping-proc-type.svg" alt="过程类型的子类型判定" width="423.0pt" height="166.5pt"/></p></blockquote></div></p><blockquote class="caption"><p>&#36807;&#31243;&#31867;&#22411;&#30340;&#23376;&#31867;&#22411;&#21028;&#23450;<a name="(elem._fig-9..15)"></a></p></blockquote></blockquote><p>&#35201;&#29702;&#35299;&#26368;&#21518;&#19968;&#26465;&#35268;&#21017;&#65292;&#20196; <span class="texMathInline">t_1</span> &#20026; <span class="stt">(c1 -&gt; d1)</span>&#65292;<span class="texMathInline">t_2</span> &#20026; <span class="stt">(c2 -&gt; d2)</span>&#65292;
&#19988; <span class="stt">c2 &lt; c1</span>&#65292;<span class="stt">d1 &lt; d2</span>&#12290;&#20196; <span class="stt">f</span> &#20026;&#19968;&#36807;&#31243;&#65292;&#31867;&#22411;&#20026; <span class="texMathInline">t_1</span>&#12290;&#25105;&#20204;&#35828; <span class="stt">f</span>
&#31867;&#22411;&#20063;&#20026; <span class="texMathInline">t_2</span>&#12290;&#20026;&#20160;&#20040;&#65311;&#20551;&#35774;&#25105;&#20204;&#32473; <span class="stt">f</span> &#20256;&#36882;&#20102;&#31867;&#22411;&#20026; <span class="stt">c2</span> &#30340;&#21442;&#25968;&#12290;&#30001;&#20110;
<span class="stt">c2 &lt; c1</span>&#65292;&#21442;&#25968;&#31867;&#22411;&#20063;&#26159; <span class="stt">c1</span>&#65292;&#25152;&#20197; <span class="stt">f</span> &#21487;&#20197;&#25509;&#21463;&#36825;&#20010;&#21442;&#25968;&#12290;&#28982;&#21518;&#65292;<span class="stt">f</span>&#36820;
&#22238;&#20540;&#31867;&#22411;&#20026; <span class="stt">d1</span>&#12290;&#20294;&#30001;&#20110; <span class="stt">d1 &lt; d2</span>&#65292;&#36825;&#20010;&#32467;&#26524;&#31867;&#22411;&#20063;&#26159; <span class="stt">d2</span>&#12290;&#25152;&#20197;&#65292;&#22914;&#26524;&#32473;
<span class="stt">f</span> &#19968;&#20010;&#31867;&#22411;&#20026; <span class="stt">c2</span> &#30340;&#21442;&#25968;&#65292;&#20854;&#36820;&#22238;&#20540;&#31867;&#22411;&#20026; <span class="stt">d2</span>&#12290;&#22240;&#27492;&#65292;<span class="stt">f</span> &#31867;&#22411;&#20026;
<span class="stt">(c2 -&gt; d2)</span>&#12290;&#25105;&#20204;&#35828;&#32467;&#26524;&#31867;&#22411;&#30340;&#23376;&#31867;&#22411;&#21028;&#23450;&#26159;<span class="emph">&#21327;&#21464;&#30340;</span> (<span class="emph">covariant</span>)&#65292;&#21442;&#25968;&#31867;
&#22411;&#30340;&#23376;&#31867;&#22411;&#21028;&#23450;&#26159;<span class="emph">&#36870;&#21464;&#30340;</span> (<span class="emph">contravariant</span>)&#12290;&#35265;&#12290;&#36825;&#19982;
<a href="#%28part._s8..3..2%29" data-pltdoc="x">&#23454;&#29616;</a>&#20013; <span class="stt">&lt;:-iface</span> &#30340;&#23450;&#20041;&#31867;&#20284;&#12290;
<a name="(idx._(gentag._1465))"></a>
<a name="(idx._(gentag._1466))"></a></p><p>&#36825;&#37096;&#20998;&#20195;&#30721;&#22914; &#25152;&#31034;&#12290;&#20195;&#30721;&#20351;&#29992;<span class="stt">every2?</span>&#65292;
&#23427;&#25193;&#23637;ex1.24 &#20013;&#30340;&#36807;&#31243; <span class="stt">every?</span>&#65292;&#21462;&#19968;&#20010;&#21452;&#21442;&#25968;&#35859;&#35789;&#21644;&#20004;&#20010;&#21015;&#34920;&#65292;&#24403;
&#21015;&#34920;&#38271;&#24230;&#30456;&#21516;&#19988;&#23545;&#24212;&#20803;&#32032;&#28385;&#36275;&#35859;&#35789;&#26102;&#65292;&#36820;&#22238; <span class="stt">#t</span>&#65292;&#21542;&#21017;&#36820;&#22238; <span class="stt">#f</span>&#12290;
<a name="(idx._(gentag._1467))"></a>
<a name="(idx._(gentag._1468))"></a>
<a name="(idx._(gentag._1469))"></a></p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">check-is-subtype!</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Type} \times \mathit{Exp} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">check-is-subtype!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">is-subtype?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-subtype-failure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-to-external-form</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">is-subtype?</span></span> : <span class="texMathInline">\mathit{Type} \times \mathit{Type} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">is-subtype?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">statically-is-subclass?</span><span class="hspace">&nbsp;</span><span class="RktSym">name1</span><span class="hspace">&nbsp;</span><span class="RktSym">name2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">args1</span><span class="hspace">&nbsp;</span><span class="RktSym">res1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">type</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">args2</span><span class="hspace">&nbsp;</span><span class="RktSym">res2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">every2?</span><span class="hspace">&nbsp;</span><span class="RktSym">is-subtype?</span><span class="hspace">&nbsp;</span><span class="RktSym">args2</span><span class="hspace">&nbsp;</span><span class="RktSym">args1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">is-subtype?</span><span class="hspace">&nbsp;</span><span class="RktSym">res1</span><span class="hspace">&nbsp;</span><span class="RktSym">res2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">equal?</span><span class="hspace">&nbsp;</span><span class="RktSym">ty1</span><span class="hspace">&nbsp;</span><span class="RktSym">ty2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">statically-is-subclass?</span></span> : <span class="texMathInline">\mathit{ClassName} \times \mathit{ClassName} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">statically-is-subclass?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">name1</span><span class="hspace">&nbsp;</span><span class="RktSym">name2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">name1</span><span class="hspace">&nbsp;</span><span class="RktSym">name2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">super-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;super-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">name1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">super-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">statically-is-subclass?</span><span class="hspace">&nbsp;</span><span class="RktSym">super-name</span><span class="hspace">&nbsp;</span><span class="RktSym">name2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">interface-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;interface-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">name1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">memv</span><span class="hspace">&nbsp;</span><span class="RktSym">name2</span><span class="hspace">&nbsp;</span><span class="RktSym">interface-names</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>TYPED-OO &#30340;&#23376;&#31867;&#22411;&#21028;&#23450;
<a name="(idx._(gentag._1470))"></a>
<a name="(idx._(gentag._1471))"></a><a name="(elem._fig-9..16)"></a></p></blockquote></blockquote><p>&#29616;&#22312;&#21487;&#20197;&#36880;&#19968;&#32771;&#34385;&#19977;&#31181;&#35843;&#29992;&#65288;&#65289;&#12290;&#23545;&#26041;&#27861;&#35843;&#29992;&#65292;&#25105;&#20204;&#39318;&#20808;&#20687;&#36890;&#24120;&#37027;
&#26679;&#65292;&#25214;&#20986;&#30446;&#26631;&#23545;&#35937;&#21644;&#25805;&#20316;&#25968;&#30340;&#31867;&#22411;&#12290;&#25105;&#20204;&#29992;&#31867;&#20284; <span class="stt">find-method</span> &#30340;
<span class="stt">find-method-type</span> &#25214;&#20986;&#26041;&#27861;&#30340;&#31867;&#22411;&#12290;&#22914;&#26524;&#30446;&#26631;&#31867;&#22411;&#19981;&#26159;&#31867;&#25110;&#25509;&#21475;&#65292;&#37027;&#20040;
<span class="stt">type-&gt;class-name</span> &#25253;&#38169;&#12290;&#22914;&#26524;&#27809;&#26377;&#23545;&#24212;&#26041;&#27861;&#65292;&#37027;&#20040; <span class="stt">find-method-type</span> &#25253;&#38169;&#12290;
&#28982;&#21518;&#65292;&#25105;&#20204;&#35843;&#29992; <span class="stt">type-of-call</span> &#39564;&#35777;&#25805;&#20316;&#25968;&#30340;&#31867;&#22411;&#19982;&#26041;&#27861;&#30340;&#26399;&#26395;&#26159;&#21542;&#30456;&#31526;&#65292;&#24182;&#36820;&#22238;&#32467;
&#26524;&#30340;&#31867;&#22411;&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-call-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">obj-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">arg-types</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">types-of-exps</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">obj-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">type-of-call</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">find-method-type</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">type-&gt;class-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">obj-type</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg-types</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">super-call-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">method-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">arg-types</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">types-of-exps</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">obj-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-tenv</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tenv</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">%self</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">type-of-call</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">find-method-type</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-tenv</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tenv</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">%super</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-name</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg-types</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">new-object-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">class-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">arg-types</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">types-of-exps</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">c</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">class-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">static-class</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">c</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">an-interface</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">method-tenv</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">report-cant-instantiate-interface</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">class-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">a-static-class</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">super-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">i-names</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">field-names</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">field-types</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">method-tenv</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">type-of-call</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">find-method-type</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">class-name</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">'</span><span class="RktSym">initialize</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg-types</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rands</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">class-type</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">class-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="caption"><p>&#38754;&#21521;&#23545;&#35937;&#34920;&#36798;&#24335;&#22312; <span class="stt">type-of</span> &#20013;&#30340;&#23545;&#24212;&#35821;&#21477;&#65292;&#31532; 2 &#37096;&#20998;<a name="(elem._fig-9..17)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1472))"></a>
&#23545; <span class="stt">new</span> &#34920;&#36798;&#24335;&#65292;&#25105;&#20204;&#39318;&#20808;&#21462;&#20986;&#31867;&#21517;&#23545;&#24212;&#30340;&#31867;&#20449;&#24687;&#12290;&#22914;&#26524;&#27809;&#26377;&#31867;&#19982;&#21517;&#23383;&#30456;&#20851;&#32852;&#65292;&#37027;&#23601;&#25253;
&#38169;&#12290;&#20043;&#21518;&#65292;&#29992;&#25805;&#20316;&#25968;&#30340;&#31867;&#22411;&#35843;&#29992; <span class="stt">type-of-call</span>&#65292;&#26816;&#26597;&#35843;&#29992; <span class="stt">initialize</span> &#26159;&#21542;&#23433;
&#20840;&#12290;&#22914;&#26524;&#26816;&#26597;&#36890;&#36807;&#65292;&#37027;&#20040;&#25191;&#34892;&#34920;&#36798;&#24335;&#23601;&#26159;&#23433;&#20840;&#30340;&#12290;&#30001;&#20110; <span class="stt">new</span> &#34920;&#36798;&#24335;&#36820;&#22238;&#25351;&#23450;&#31867;&#30340;&#26032;&#23545;
&#35937;&#65292;&#32467;&#26524;&#31867;&#22411;&#23601;&#26159;&#23545;&#24212;&#31867;&#30340;&#31867;&#22411;&#12290;</p><p>TYPED-OO &#20013;&#34920;&#36798;&#24335;&#30340;&#26816;&#26597;&#35752;&#35770;&#23436;&#20102;&#65292;&#25105;&#20204;&#25509;&#30528;&#26469;&#26500;&#24314;&#38745;&#24577;&#31867;&#29615;&#22659;&#12290;</p><p><a name="(idx._(gentag._1473))"></a>
<a name="(idx._(gentag._1474))"></a>
&#35201;&#26500;&#24314;&#38745;&#24577;&#31867;&#29615;&#22659;&#65292;<span class="stt">initialize-static-class-env!</span> &#39318;&#20808;&#23558;&#20854;&#35774;&#32622;&#20026;&#31354;&#65292;&#28982;&#21518;&#20026;&#31867;
<span class="stt">object</span> &#28155;&#21152;&#32465;&#23450;&#12290;&#25509;&#30528;&#65292;&#23427;&#36941;&#21382;&#21508;&#20010;&#31867;&#21644;&#25509;&#21475;&#22768;&#26126;&#65292;&#32473;&#38745;&#24577;&#31867;&#29615;&#22659;&#28155;&#21152;&#36866;&#24403;&#30340;&#20869;&#23481;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">initialize-static-class-env!</span></span> : <span class="texMathInline">\mathit{Listof(ClassDecl)} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">initialize-static-class-env!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-the-static-class-env!</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-static-class-binding!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">object</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-static-class</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for-each</span><span class="hspace">&nbsp;</span><span class="RktSym">add-class-decl-to-static-class-env!</span><span class="hspace">&nbsp;</span><span class="RktSym">c-decls</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">add-class-decl-to-static-class-env!</span></span> : <span class="texMathInline">\mathit{ClassDecl} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">add-class-decl-to-static-class-env!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-decl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">class-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">c-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-interface-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">i-name</span><span class="hspace">&nbsp;</span><span class="RktSym">abs-m-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">m-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">abs-method-decls-&gt;method-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">abs-m-decls</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-no-dups!</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">m-tenv</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">i-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-static-class-binding!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">i-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-interface</span><span class="hspace">&nbsp;</span><span class="RktSym">m-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-class-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-name</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktSym">i-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">f-types</span><span class="hspace">&nbsp;</span><span class="RktSym">f-names</span><span class="hspace">&nbsp;</span><span class="RktSym">m-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">i-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;interface-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">i-names</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append-field-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;field-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">f-names</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f-types</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">append</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;field-types</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">f-types</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">local-method-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-decls-&gt;method-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">m-decls</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-no-dups!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">local-method-tenv</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">merge-method-tenvs</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;method-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">local-method-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-no-dups!</span><span class="hspace">&nbsp;</span><span class="RktSym">i-names</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-no-dups!</span><span class="hspace">&nbsp;</span><span class="RktSym">f-names</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-for-initialize!</span><span class="hspace">&nbsp;</span><span class="RktSym">method-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-static-class-binding!</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-static-class</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktSym">i-names</span><span class="hspace">&nbsp;</span><span class="RktSym">f-names</span><span class="hspace">&nbsp;</span><span class="RktSym">f-types</span><span class="hspace">&nbsp;</span><span class="RktSym">method-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p><span class="stt">add-class-decl-to-static-class-env!</span><a name="(elem._fig-9..18)"></a></p></blockquote></blockquote><p>&#36807;&#31243; <span class="stt">add-class-decl-to-static-class-env!</span>&#65288;&#65289;&#25215;&#25285;&#21019;&#24314;&#38745;
&#24577;&#31867;&#30340;&#33392;&#24040;&#24037;&#20316;&#12290;&#23545;&#27599;&#20010;&#31867;&#65292;&#25105;&#20204;&#24517;&#39035;&#25910;&#38598;&#20854;&#25509;&#21475;&#12289;&#23383;&#27573;&#21644;&#26041;&#27861;&#65306;</p><ul><li><p>&#31867;&#23454;&#29616;&#29238;&#31867;&#23454;&#29616;&#30340;&#20219;&#20309;&#25509;&#21475;&#65292;&#20197;&#21450;&#33258;&#36523;&#22768;&#31216;&#23454;&#29616;&#30340;&#25509;&#21475;&#12290;</p></li><li><p>&#31867;&#20855;&#26377;&#29238;&#31867;&#30340;&#25152;&#26377;&#23383;&#27573;&#65292;&#20197;&#21450;&#33258;&#36523;&#30340;&#23383;&#27573;&#65292;&#20294;&#26159;&#29238;&#31867;&#23383;&#27573;&#34987;&#24403;&#21069;&#22768;&#26126;&#30340;&#23383;&#27573;&#36974;&#34109;&#12290;
&#25152;&#20197;&#65292;<span class="stt">field-names</span> &#30001; <span class="stt">append-field-names</span> &#35745;&#31639;&#32780;&#24471;&#65292;&#23601;&#20687;
<span class="stt">initialize-class-env!</span> &#37027;&#26679;&#65288;initialize-class-env&#65289;&#12290;</p></li><li><p>&#31867;&#23383;&#27573;&#30340;&#31867;&#22411;&#21253;&#25324;&#29238;&#31867;&#23383;&#27573;&#30340;&#31867;&#22411;&#65292;&#20197;&#21450;&#33258;&#36523;&#22768;&#26126;&#23383;&#27573;&#30340;&#31867;&#22411;&#12290;</p></li><li><p>&#31867;&#30340;&#26041;&#27861;&#21253;&#25324;&#29238;&#31867;&#30340;&#21644;&#33258;&#36523;&#30340;&#65292;&#26041;&#27861;&#24102;&#26377;&#22768;&#26126;&#31867;&#22411;&#12290;&#25105;&#20204;&#29992; <span class="stt">proc-type</span>
<a name="(idx._(gentag._1475))"></a> &#35760;&#24405;&#26041;&#27861;&#30340;&#31867;&#22411;&#12290;&#25105;&#20204;&#25226;&#24403;&#21069;&#22768;&#26126;&#30340;&#26041;&#27861;&#25918;&#22312;&#21069;&#38754;&#65292;
&#22240;&#20026;&#23427;&#20204;&#35206;&#30422;&#29238;&#31867;&#30340;&#26041;&#27861;&#12290;</p></li><li><p>&#25105;&#20204;&#30830;&#20445;&#24403;&#21069;&#31867;&#20013;&#22768;&#26126;&#30340;&#26041;&#27861;&#21517;&#12289;&#25509;&#21475;&#21517;&#21644;&#23383;&#27573;&#21517;&#19981;&#37325;&#22797;&#12290;&#25105;&#20204;&#36824;&#30830;&#20445;&#31867;&#20013;&#19968;&#23450;&#26377;
<span class="stt">initialize</span> &#26041;&#27861;&#12290;</p></li></ul><p><a name="(idx._(gentag._1476))"></a>
&#23545;&#25509;&#21475;&#22768;&#26126;&#65292;&#25105;&#20204;&#21482;&#38656;&#22788;&#29702;&#26041;&#27861;&#21517;&#21644;&#31867;&#22411;&#12290;</p><p><a name="(idx._(gentag._1477))"></a>
<a name="(idx._(gentag._1478))"></a>
<a name="(idx._(gentag._1479))"></a>
<a name="(idx._(gentag._1480))"></a>
&#19968;&#26086;&#24314;&#31435;&#20102;&#38745;&#24577;&#31867;&#29615;&#22659;&#65292;&#25105;&#20204;&#21487;&#20197;&#26816;&#26597;&#27599;&#20010;&#31867;&#22768;&#26126;&#12290;&#36825;&#30001;
<span class="stt">check-class-decl!</span>&#65288;&#65289;&#23436;&#25104;&#12290;&#23545;&#25509;&#21475;&#65292;&#20160;&#20040;&#37117;&#19981;&#24517;&#26816;&#26597;&#12290;&#23545;
&#31867;&#22768;&#26126;&#65292;&#25105;&#20204;&#20256;&#36882;&#20174;&#38745;&#24577;&#31867;&#29615;&#22659;&#25910;&#38598;&#21040;&#30340;&#20449;&#24687;&#65292;&#26816;&#26597;&#27599;&#20010;&#26041;&#27861;&#12290;&#26368;&#21518;&#65292;&#25105;&#20204;&#26816;&#26597;&#31867;&#26159;&#21542;&#23454;&#29616;
&#20102;&#23427;&#22768;&#31216;&#23454;&#29616;&#30340;&#27599;&#20010;&#25509;&#21475;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">check-class-decl!</span></span> : <span class="texMathInline">\mathit{ClassDecl} \to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">check-class-decl!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-decl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">class-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">c-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-interface-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">i-name</span><span class="hspace">&nbsp;</span><span class="RktSym">abs-method-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-class-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-name</span><span class="hspace">&nbsp;</span><span class="RktSym">super-name</span><span class="hspace">&nbsp;</span><span class="RktSym">i-names</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">field-types</span><span class="hspace">&nbsp;</span><span class="RktSym">field-names</span><span class="hspace">&nbsp;</span><span class="RktSym">method-decls</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">sc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">class-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for-each</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-decl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-method-decl!</span><span class="hspace">&nbsp;</span><span class="RktSym">method-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">class-name</span><span class="hspace">&nbsp;</span><span class="RktSym">super-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;field-names</span><span class="hspace">&nbsp;</span><span class="RktSym">sc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;field-types</span><span class="hspace">&nbsp;</span><span class="RktSym">sc</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">method-decls</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for-each</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">i-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-if-implements!</span><span class="hspace">&nbsp;</span><span class="RktSym">class-name</span><span class="hspace">&nbsp;</span><span class="RktSym">i-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">i-names</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p><span class="stt">check-class-decl!</span>
<a name="(idx._(gentag._1481))"></a>
<a name="(idx._(gentag._1482))"></a>
<a name="(idx._(gentag._1483))"></a><a name="(elem._fig-9..19)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._1484))"></a>
<a name="(idx._(gentag._1485))"></a>
&#35201;&#26816;&#26597;&#26041;&#27861;&#22768;&#26126;&#65292;&#25105;&#20204;&#39318;&#20808;&#26816;&#26597;&#20854;&#20027;&#20307;&#26159;&#21542;&#31526;&#21512;&#22768;&#26126;&#31867;&#22411;&#12290;&#35201;&#36825;&#26679;&#20570;&#65292;&#25105;&#20204;&#24314;&#31435;&#19968;&#20010;&#31867;&#22411;&#29615;
&#22659;&#65292;&#35813;&#29615;&#22659;&#19982;&#20027;&#20307;&#27714;&#20540;&#26102;&#30340;&#29615;&#22659;&#30456;&#31526;&#12290;&#28982;&#21518;&#25105;&#20204;&#26816;&#26597;&#20027;&#20307;&#30340;&#32467;&#26524;&#31867;&#22411;&#26159;&#21542;&#20026;&#22768;&#26126;&#20013;&#32467;&#26524;&#31867;&#22411;
&#30340;&#23376;&#31867;&#22411;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">check-method-decl!</span></span> : <br/> <span class="texMathInline">\phantom{x}\mathit{MethodDecl} \times \mathit{ClassName} \times \mathit{ClassName} \times \mathit{Listof(FieldName)} \times \mathit{Listof(Type)} \\ \phantom{xxxx}\to \mathit{Unspecified}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">check-method-decl!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">self-name</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktSym">f-names</span><span class="hspace">&nbsp;</span><span class="RktSym">f-types</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">method-decl</span><span class="hspace">&nbsp;</span><span class="RktSym">m-decl</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-method-decl</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">res-type</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">var-types</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">var-types</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv-with-self-and-super</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">class-type</span><span class="hspace">&nbsp;</span><span class="RktSym">self-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">s-name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-tenv</span><span class="hspace">&nbsp;</span><span class="RktSym">f-names</span><span class="hspace">&nbsp;</span><span class="RktSym">f-types</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">body-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">type-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-is-subtype!</span><span class="hspace">&nbsp;</span><span class="RktSym">body-type</span><span class="hspace">&nbsp;</span><span class="RktSym">res-type</span><span class="hspace">&nbsp;</span><span class="RktSym">m-decl</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">initialize</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">maybe-super-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">maybe-find-method-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;method-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">s-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">maybe-super-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-is-subtype!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-type</span><span class="hspace">&nbsp;</span><span class="RktSym">var-types</span><span class="hspace">&nbsp;</span><span class="RktSym">res-type</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">maybe-super-type</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p><span class="stt">check-method-decl!</span>
<a name="(idx._(gentag._1486))"></a>
<a name="(idx._(gentag._1487))"></a>
<a name="(idx._(gentag._1488))"></a><a name="(elem._fig-9..20)"></a></p></blockquote></blockquote><p>&#20294;&#36824;&#27809;&#23436;&#65306;&#22914;&#26524;&#36825;&#20010;&#26041;&#27861;&#35206;&#30422;&#20102;&#36229;&#31867;&#20013;&#30340;&#26576;&#20010;&#26041;&#27861;&#65292;&#25105;&#20204;&#35201;&#30830;&#20445;&#23427;&#30340;&#31867;&#22411;&#20860;&#23481;&#36229;&#31867;&#20013;&#30340;&#26041;&#27861;
&#31867;&#22411;&#12290;&#20043;&#25152;&#20197;&#22914;&#27492;&#65292;&#26159;&#22240;&#20026;&#36825;&#20010;&#26041;&#27861;&#21487;&#33021;&#30001;&#21478;&#19968;&#26041;&#27861;&#35843;&#29992;&#65292;&#32780;&#21478;&#19968;&#26041;&#27861;&#21482;&#30693;&#36947;&#36229;&#31867;&#26041;&#27861;&#30340;&#31867;
&#22411;&#12290;&#36825;&#26465;&#35268;&#21017;&#30340;&#21807;&#19968;&#20363;&#22806;&#26159; <span class="stt">initialize</span>&#65292;&#23427;&#21482;&#22312;&#24403;&#21069;&#31867;&#20013;&#35843;&#29992;&#65292;&#19988;&#38543;&#32487;&#25215;&#25913;&#21464;&#31867;&#22411;
&#65288;&#35265;&#65289;&#12290;&#35201;&#36825;&#26679;&#20570;&#65292;&#23427;&#35843;&#29992; <span class="stt">maybe-find-method-type</span>&#65292;&#21518;&#32773;
&#36820;&#22238;&#24050;&#32465;&#23450;&#26041;&#27861;&#30340;&#31867;&#22411;&#65292;&#25110;&#32773; <span class="stt">#f</span>&#12290;&#35265;&#12290;</p><p>&#22914;&#65292;&#36807;&#31243; <span class="stt">check-if-implements?</span> &#21462;&#20004;&#20010;&#31526;&#21495;&#65292;&#20998;&#21035;&#20026;&#31867;&#21517;&#21644;
&#25509;&#21475;&#21517;&#12290;&#23427;&#39318;&#20808;&#26816;&#26597;&#20004;&#20010;&#31526;&#21495;&#30830;&#23454;&#20026;&#31867;&#21517;&#21644;&#25509;&#21475;&#21517;&#12290;&#28982;&#21518;&#65292;&#23427;&#36941;&#21382;&#25509;&#21475;&#20013;&#30340;&#27599;&#20010;&#26041;&#27861;&#65292;&#26816;&#26597;
&#31867;&#26159;&#21542;&#25552;&#20379;&#20102;&#21516;&#21517;&#19988;&#31867;&#22411;&#20860;&#23481;&#30340;&#26041;&#27861;&#12290;</p><p>&#20026; &#20013;&#31034;&#20363;&#31243;&#24207;&#29983;&#25104;&#30340;&#38745;&#24577;&#31867;&#29615;&#22659;&#22914; &#25152;&#31034;&#12290;
&#38745;&#24577;&#31867;&#26159;&#36870;&#24207;&#30340;&#65292;&#36825;&#21453;&#26144;&#20102;&#29983;&#25104;&#31867;&#29615;&#22659;&#30340;&#39034;&#24207;&#12290;&#19977;&#20010;&#31867;&#20013;&#30340;&#26041;&#27861;&#39034;&#24207;&#30456;&#21516;&#65292;&#19988;&#31867;&#22411;&#30456;&#21516;&#65292;&#31526;
&#21512;&#26399;&#26395;&#12290;</p><p>&#36825;&#26679;&#65292;&#26816;&#26597;&#22120;&#23601;&#23436;&#25104;&#20102;&#12290;
<a name="(idx._(gentag._1489))"></a>
<a name="(idx._(gentag._1490))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">check-if-implements!</span></span> : <span class="texMathInline">\mathit{ClassName} \times \mathit{InterfaceName} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">check-if-implements!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">c-name</span><span class="hspace">&nbsp;</span><span class="RktSym">i-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">static-class</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">i-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-static-class</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-name</span><span class="hspace">&nbsp;</span><span class="RktSym">i-names</span><span class="hspace">&nbsp;</span><span class="RktSym">f-names</span><span class="hspace">&nbsp;</span><span class="RktSym">f-types</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-cant-implement-non-interface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">c-name</span><span class="hspace">&nbsp;</span><span class="RktSym">i-name</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-interface</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-tenv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">class-method-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">static-class-&gt;method-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup-static-class</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for-each</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">method-binding</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">m-name</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">method-binding</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">m-type</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">method-binding</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">c-method-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">maybe-find-method-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">class-method-tenv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">m-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktSym">c-method-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-is-subtype!</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">c-method-type</span><span class="hspace">&nbsp;</span><span class="RktSym">m-type</span><span class="hspace">&nbsp;</span><span class="RktSym">c-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-missing-method</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">c-name</span><span class="hspace">&nbsp;</span><span class="RktSym">i-name</span><span class="hspace">&nbsp;</span><span class="RktSym">m-name</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">method-tenv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p><span class="stt">check-if-implements!</span>
<a name="(idx._(gentag._1491))"></a>
<a name="(idx._(gentag._1492))"></a><a name="(elem._fig-9..21)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-static-class</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">tree</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">value</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:int-type</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">initialize</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:int-type</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:void-type</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">sum</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:int-type</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">getvalue</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:int-type</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">equal</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:class-type</span><span class="hspace">&nbsp;</span><span class="RktVal">tree</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:bool-type</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interior-node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-static-class</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">tree</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">left</span><span class="hspace">&nbsp;</span><span class="RktVal">right</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:class-type</span><span class="hspace">&nbsp;</span><span class="RktVal">tree</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:class-type</span><span class="hspace">&nbsp;</span><span class="RktVal">tree</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">initialize</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:class-type</span><span class="hspace">&nbsp;</span><span class="RktVal">tree</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:class-type</span><span class="hspace">&nbsp;</span><span class="RktVal">tree</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:void-type</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">getleft</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:class-type</span><span class="hspace">&nbsp;</span><span class="RktVal">tree</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">getright</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:class-type</span><span class="hspace">&nbsp;</span><span class="RktVal">tree</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">sum</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:int-type</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">equal</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:class-type</span><span class="hspace">&nbsp;</span><span class="RktVal">tree</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:bool-type</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tree</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:an-interface</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">sum</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:int-type</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">equal</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:proc-type</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:class-type</span><span class="hspace">&nbsp;</span><span class="RktVal">tree</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:bool-type</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-static-class</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#20026;&#31034;&#20363;&#31243;&#24207;&#29983;&#25104;&#30340;&#38745;&#24577;&#31867;&#29615;&#22659;
<a name="(idx._(gentag._1493))"></a>
<a name="(idx._(gentag._1494))"></a>
<a name="(idx._(gentag._1495))"></a><a name="(elem._fig-9..22)"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..33)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#31867;&#22411;&#26816;&#26597;&#22120;&#65292;&#30830;&#20445;&#23433;&#20840;&#24615;&#36136;&#65306;<span class="stt">instanceof</span> &#21644; <span class="stt">cast</span> &#19981;&#20250;&#22788;&#29702;&#38750;&#23545;&#35937;&#20540;&#25110;&#38750;
&#31867;&#31867;&#22411;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..34)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#33509; <span class="texMathInline">e</span> &#30340;&#31867;&#22411;&#19981;&#26159; <span class="texMathInline">c</span> &#30340;&#21518;&#20195;&#25110;&#32773;&#31062;&#20808;&#65292;&#21017;&#34920;&#36798;&#24335; <span class="stt">cast </span><span class="texMathInline">e</span><span class="stt"> </span><span class="texMathInline">c</span> &#19981;&#20250;&#25104;
&#21151;&#65288;&#20026;&#20160;&#20040;&#65311;&#65289;&#12290;&#25193;&#23637;&#31867;&#22411;&#26816;&#26597;&#22120;&#65292;&#30830;&#20445;&#31243;&#24207;&#21482;&#23545;&#28385;&#36275;&#36825;&#26465;&#24615;&#36136;&#30340; <span class="stt">cast</span> &#34920;&#36798;&#24335;&#27714;&#20540;&#12290;
&#20877;&#23545; <span class="stt">instanceof</span> &#30340;&#26816;&#26597;&#20570;&#30456;&#24212;&#25193;&#23637;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..35)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#31867;&#22411;&#26816;&#26597;&#22120;&#65292;&#30830;&#20445; <span class="stt">initialize</span> &#26041;&#27861;&#21482;&#20174; <span class="stt">new-object-exp</span> &#20869;&#37096;&#35843;&#29992;&#65292;&#20174;&#32780;
&#21152;&#24378;&#23433;&#20840;&#24615;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..36)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#35821;&#35328;&#65292;&#20801;&#35768;&#25509;&#21475;&#32487;&#25215;&#33258;&#20854;&#20182;&#25509;&#21475;&#12290;&#25509;&#21475;&#24212;&#35201;&#27714;&#23454;&#29616;&#29238;&#31867;&#35201;&#27714;&#23454;&#29616;&#30340;&#25152;&#26377;&#26041;&#27861;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..37)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1496))"></a>
&#25105;&#20204;&#30340; TYPED-OO &#35821;&#35328;&#20351;&#29992;&#21160;&#24577;&#20998;&#21457;&#12290;&#21478;&#19968;&#31181;&#26041;&#24335;&#26159;<span class="emph">&#38745;&#24577;&#20998;&#21457;</span>&#12290;&#22312;&#38745;&#24577;&#20998;&#21457;&#20013;&#65292;&#26041;
&#27861;&#30340;&#36873;&#25321;&#20381;&#36182;&#20110;&#23545;&#35937;&#30340;&#31867;&#22411;&#65292;&#32780;&#19981;&#26159;&#25152;&#23646;&#31867;&#12290;&#32771;&#34385;&#20363;&#23376;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">class c1 extends object</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method int initialize () 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method int m1 () 11</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">staticmethod int m2 () 21</span></p></td></tr><tr><td><p><span class="stt">class c2 extends c1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">method void m1 () 12</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">staticmethod int m2 () 22</span></p></td></tr><tr><td><p><span class="stt">let f = proc (x : c1) send x m1()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">g = proc (x : c1) send x m2()</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">o = new c2()</span></p></td></tr><tr><td><p><span class="stt">in list((f o), (g o))</span></p></td></tr></table></blockquote><p>&#35843;&#29992; <span class="stt">f</span> &#21644; <span class="stt">g</span> &#26102;&#65292;<span class="stt">x</span> &#31867;&#22411;&#20026; <span class="stt">c1</span>&#65292;&#20294;&#32465;&#23450;&#21040;&#31867; <span class="stt">c2</span> &#30340;&#23545;&#35937;&#12290;&#26041;&#27861;
<span class="stt">m1</span> &#20351;&#29992;&#21160;&#24577;&#20998;&#21457;&#65292;&#25152;&#20197;&#35843;&#29992;&#30340;&#26159; <span class="stt">c2</span> &#30340;&#26041;&#27861; <span class="stt">m1</span>&#65292;&#36820;&#22238; 12&#12290;&#26041;&#27861; <span class="stt">m2</span>
&#20351;&#29992;&#38745;&#24577;&#20998;&#21457;&#65292;&#25152;&#20197;&#32473; <span class="stt">x</span> &#21457;&#36865;&#28040;&#24687; <span class="stt">m2</span> &#26102;&#65292;&#35843;&#29992;&#30340;&#26159;&#19982; <span class="stt">x</span> &#31867;&#22411;&#65288;&#21363;&#26412;&#20363;
&#20013;&#30340; <span class="stt">c1</span>&#65289;&#23545;&#24212;&#30340;&#26041;&#27861;&#65292;&#25152;&#20197;&#36820;&#22238; 21&#12290;</p><p>&#20462;&#25913;<a href="#%28part._s9..5%29" data-pltdoc="x">&#24102;&#26377;&#31867;&#22411;&#30340;&#35821;&#35328;</a>&#20013;&#30340;&#35299;&#37322;&#22120;&#65292;&#22788;&#29702;&#38745;&#24577;&#20998;&#21457;&#12290;&#25552;&#31034;&#65306;&#32771;&#34385;&#22312;&#29615;&#22659;&#20013;&#35760;&#24405;&#31867;&#22411;&#20449;&#24687;&#65292;&#37027;&#20040;
&#35299;&#37322;&#22120;&#23601;&#33021;&#22312; <span class="stt">send</span> &#20013;&#25214;&#20986;&#30446;&#26631;&#34920;&#36798;&#24335;&#30340;&#31867;&#22411;&#12290;
<a name="(idx._(gentag._1497))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..38)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20026;&#20160;&#20040;&#31867;&#30340;&#20449;&#24687;&#24517;&#39035;&#22312;&#26816;&#26597;&#26041;&#27861;&#20043;&#21069;&#21152;&#20837;&#21040;&#38745;&#24577;&#31867;&#29615;&#22659;&#20013;&#65311;&#25552;&#31034;&#65306;&#24605;&#32771;&#19968;&#19979;&#65292;&#26576;&#20010;&#26041;&#27861;&#20027;&#20307;
&#36890;&#36807; <span class="stt">self</span> &#35843;&#29992;&#26041;&#27861;&#26102;&#20250;&#21457;&#29983;&#20160;&#20040;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..39)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#38500;&#20102;&#22312; <span class="stt">new</span> &#20869;&#38544;&#24335;&#35843;&#29992; <span class="stt">initialize</span> &#20043;&#22806;&#65292;&#35753;&#31867;&#22411;&#26816;&#26597;&#22120;&#31105;&#27490;&#35843;&#29992;
<span class="stt">initialize</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..40)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#35821;&#35328;&#30340;&#35774;&#35745;&#65292;&#35753;&#27599;&#20010;&#23383;&#27573;&#22768;&#26126;&#21253;&#21547;&#19968;&#20010;&#29992;&#20110;&#21021;&#22987;&#21270;&#23383;&#27573;&#30340;&#34920;&#36798;&#24335;&#12290;&#36825;&#31181;&#35774;&#35745;&#30340;&#20248;&#21183;&#26159;&#65292;
&#36890;&#36807;&#26816;&#26597;&#30340;&#31243;&#24207;&#19981;&#20250;&#20351;&#29992;&#26410;&#21021;&#22987;&#21270;&#30340;&#20540;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..41)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#31867;&#22411;&#26816;&#26597;&#22120;&#65292;&#20687;ex9.8 &#37027;&#26679;&#65292;&#22788;&#29702; <span class="stt">fieldref</span> &#21644; <span class="stt">fieldset</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex9..42)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._1498))"></a>
&#22312;&#31867;&#22411;&#26816;&#26597;&#22120;&#20013;&#65292;&#38745;&#24577;&#26041;&#27861;&#19982;&#26222;&#36890;&#26041;&#27861;&#22788;&#29702;&#26041;&#24335;&#30456;&#21516;&#65292;&#21482;&#26159;&#38745;&#24577;&#26041;&#27861;&#19981;&#33021;&#35206;&#30422;&#21160;&#24577;&#26041;&#27861;&#65292;&#21453;
&#20043;&#20134;&#28982;&#12290;&#25193;&#23637;&#26816;&#26597;&#22120;&#65292;&#22788;&#29702;&#38745;&#24577;&#26041;&#27861;&#12290;
<a name="(idx._(gentag._1499))"></a></p></blockquote><p class="SPretitle"><span class="appendix"></span></p><h3 class="heading">10<tt>&nbsp;</tt><a name="(part._further-reading)"></a>&#25193;&#23637;&#38405;&#35835;<span class="button-group"><a href="#(part._further-reading)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(elem._readings)"></a></p><p>&#36825;&#37324;&#30340;&#19968;&#20123;&#38405;&#35835;&#26448;&#26009;&#25945;&#20250;&#65292;&#24433;&#21709;&#65292;&#25110;&#32773;&#21551;&#21457;&#20102;&#25105;&#20204;&#21019;&#20316;&#26412;&#20070;&#12290;&#24076;&#26395;&#20320;&#33021;&#20687;&#25105;&#20204;&#19968;&#26679;&#65292;&#33267;&#23569;&#21916;
&#27426;&#20854;&#20013;&#30340;&#19968;&#37096;&#20998;&#12290;</p><p>&#19981;&#29087;&#24713;&#36882;&#24402;&#32534;&#31243;&#21644;&#31526;&#21495;&#35745;&#31639;&#30340;&#35835;&#32773;&#21487;&#20197;&#30475;&#30475; <span class="emph">The Little Schemer</span>
(<a name="(idx._(gentag._1500))"></a>Friedman &amp; <a name="(idx._(gentag._1501))"></a>Felleisen, 1996)&#65292;&#25110; <span class="emph">The Little
MLer</span> (<a name="(idx._(gentag._1502))"></a>Felleisen &amp; <a name="(idx._(gentag._1503))"></a>Friedman, 1996)&#65292;&#25110;&#32773;&#26377;&#32771;&#25454;&#30294;&#65292;&#30475;&#30475;
<span class="emph">The Little LISPer</span> (<a name="(idx._(gentag._1504))"></a>Friedman, 1974)&#12290;&#20316;&#20026;&#35745;&#31639;&#31532;&#19968;&#35838;&#65292;
<span class="emph">How to Design Programs</span> (<a name="(idx._(gentag._1505))"></a>Felleisen et al., 2001) &#28145;&#20837;&#25506;&#35752;&#20102;&#22914;
&#20309;&#36882;&#24402;&#32534;&#31243;&#12290;</p><p><a name="(idx._(gentag._1506))"></a>
<a name="(idx._(gentag._1507))"></a>
<a name="(idx._(gentag._1508))"></a>
<a name="(idx._(gentag._1509))"></a>
&#29992;&#24402;&#32435;&#27861;&#23450;&#20041;&#38598;&#21512;&#21644;&#20851;&#31995;&#65292;&#26159;&#25968;&#29702;&#36923;&#36753;&#20013;&#20037;&#24050;&#23384;&#22312;&#30340;&#25216;&#26415;&#12290;&#25105;&#20204;&#30340;&#33258;&#24213;&#21521;&#19978;&#21644;&#25512;&#29702;&#35268;&#21017;&#24335;&#24402;
&#32435;&#22823;&#33268;&#25928;&#20223; <a name="(idx._(gentag._1510))"></a>Plotkin (1975, 1981) &#30340;&#24037;&#20316;&#12290;&#25105;&#20204;&#30340;&#8220;&#33258;&#39030;&#21521;&#19979;
&#8221;&#24335;&#24402;&#32435;&#25928;&#20223;&#21478;&#19968;&#31181;&#25216;&#26415;&#65292;&#21517;&#20026;<span class="emph">&#20313;&#24402;&#32435;</span> (<span class="emph">coinduction</span>)
<a name="(idx._(gentag._1511))"></a>
<a name="(idx._(gentag._1512))"></a>
&#65288;&#21442;&#35265;<a name="(idx._(gentag._1513))"></a>Gordon, 1995; <a name="(idx._(gentag._1514))"></a>Jacobs &amp; <a name="(idx._(gentag._1515))"></a>Rutten,
1997&#65289;&#65292;<a name="(idx._(gentag._1516))"></a>Felleisen et al. (2001) &#20063;&#20351;&#29992;&#20102;&#36825;&#31181;&#25216;&#26415;&#12290;</p><p><a name="(idx._(gentag._1517))"></a>
<a name="(idx._(gentag._1518))"></a>
&#19978;&#19979;&#25991;&#26080;&#20851;&#35821;&#27861;&#26159;&#35821;&#35328;&#23398;&#21644;&#35745;&#31639;&#26426;&#31185;&#23398;&#30340;&#26631;&#20934;&#24037;&#20855;&#12290;&#22823;&#22810;&#25968;&#32534;&#35793;&#22120;&#20070;&#31821;&#65292;&#27604;&#22914;
<a name="(idx._(gentag._1519))"></a>Aho et al. (2006)&#65292;&#37117;&#23545;&#35821;&#27861;&#21644;&#35299;&#26512;&#31639;&#27861;&#36827;&#34892;&#20102;&#22823;&#31687;&#24133;&#30340;&#35752;&#35770;&#12290;
<a name="(idx._(gentag._1520))"></a>
<a name="(idx._(gentag._1521))"></a>
<a name="(idx._(gentag._1522))"></a>
&#23558;&#20855;&#20307;&#35821;&#27861;&#21644;&#25277;&#35937;&#35821;&#27861;&#20998;&#24320;&#30340;&#24605;&#24819;&#36890;&#24120;&#24402;&#21151;&#20110;<a name="(idx._(gentag._1523))"></a>McCarthy (1962)&#12290;&#20182;&#24378;&#35843;&#29992;&#25509;
&#21475;&#25277;&#35937;&#35821;&#27861;&#26641;&#12290;</p><p><a name="(idx._(gentag._1524))"></a>
<a name="(idx._(gentag._1525))"></a>
&#25105;&#20204;&#30340;&#21475;&#21495;<span class="emph">&#36981;&#24490;&#35821;&#27861;</span>&#22522;&#20110;<span class="emph">&#32467;&#26500;&#21270;&#24402;&#32435;&#27861;</span>&#65292;&#30001; <a name="(idx._(gentag._1526))"></a>Burstall
(1969) &#25552;&#20986;&#12290;&#21363;&#20351;&#36807;&#31243;&#27809;&#26377;<span style="font-weight: bold">&#36981;&#24490;&#35821;&#27861;</span>&#65292;<span class="emph">&#23376;&#30446;&#26631;&#24402;&#32435;</span> (<span class="emph">subgoal induction</span>)
(<a name="(idx._(gentag._1527))"></a>Morris &amp; <a name="(idx._(gentag._1528))"></a>Wegbreit, 1977) &#20173;&#26159;&#35777;&#26126;&#36882;&#24402;&#36807;&#31243;&#27491;&#30830;&#24615;&#30340;&#26377;&#25928;
&#26041;&#27861;&#12290;&#36807;&#31243;&#30340;&#21487;&#33021;&#36755;&#20837;&#21463;&#19981;&#21464;&#24335;&#32422;&#26463;&#26102;&#65292;&#23376;&#30446;&#26631;&#24402;&#32435;&#20063;&#26377;&#25928;&#12290;
<a name="(idx._(gentag._1529))"></a>
<a name="(idx._(gentag._1530))"></a></p><p><a name="(idx._(gentag._1531))"></a>
<span class="emph">&#27867;&#21270;</span> (<span class="emph">generalization</span>) &#26159;&#28304;&#33258;&#25968;&#23398;&#30340;&#26631;&#20934;&#25216;&#26415;&#65292;&#24120;&#29992;&#26469;&#35777;&#26126;&#26576;&#20010;&#29305;&#23450;&#38472;&#36848;&#26159;&#26576;&#20010;
&#26356;&#36890;&#29992;&#38472;&#36848;&#30340;&#29305;&#20363;&#12290;&#25105;&#20204;&#25226;&#39069;&#22806;&#21442;&#25968;&#25551;&#36848;&#20026;&#19978;&#19979;&#25991;&#30340;&#25277;&#35937;&#65292;&#26159;&#21463;&#21040;&#23646;&#24615;&#35821;&#27861;
(<a name="(idx._(gentag._1532))"></a>Knuth, 1968)&#20013;&#30340;<span class="emph">&#32487;&#25215;&#23646;&#24615;</span> &#21551;&#21457;&#12290;<a name="(idx._(gentag._1533))"></a></p><p><a name="(idx._(gentag._1534))"></a>
<a name="(idx._(gentag._1535))"></a>
&#25105;&#20204;&#30340;&#26500;&#36896;&#22120; <span class="stt">define-datatype</span> &#21644; <span class="stt">cases</span> &#26159;&#21463; ML &#30340; <span class="stt">datatype</span> &#21644;&#27169;&#24335;
&#21305;&#37197;&#24037;&#20855;&#21551;&#21457;&#65292;&#35814;&#35265; <a name="(idx._(gentag._1536))"></a>Milner et al. (1989) &#21450;&#20854;&#20462;&#35746;&#29256;
<a name="(idx._(gentag._1537))"></a>Milner et al. (1997)&#12290;</p><p><a name="(idx._(gentag._1538))"></a>
Lambda &#28436;&#31639;&#30001;&#37041;&#22855;&#21457;&#26126; (<a name="(idx._(gentag._1539))"></a>Church, 1941)&#65292;&#29992;&#20110;&#30740;&#31350;&#25968;&#29702;&#36923;&#36753;&#65292;&#20294;&#24050;&#25104;&#20026;&#35832;
&#22810;&#29616;&#20195;&#32534;&#31243;&#35821;&#35328;&#29702;&#35770;&#30340;&#28789;&#24863;&#26469;&#28304;&#12290;Lambda &#28436;&#31639;&#30340;&#20171;&#32461;&#21442;&#35265; <a name="(idx._(gentag._1540))"></a>Hankin (1994)&#12289;
<a name="(idx._(gentag._1541))"></a>Peyton Jones (1987) &#25110; <a name="(idx._(gentag._1542))"></a>Stoy (1977)&#12290;
<a name="(idx._(gentag._1543))"></a>Barendregt (1981, 1991) &#25552;&#20379;&#20102;&#30334;&#31185;&#20840;&#20070;&#24335;&#30340;&#21442;&#32771;&#12290;</p><p><a name="(idx._(gentag._1544))"></a>
<a name="(idx._(gentag._1545))"></a>
<a name="(idx._(gentag._1546))"></a>
 &#37027;&#26679;&#30340;&#31561;&#28145;&#32447;&#29992;&#26469;&#35299;&#37322;&#35789;&#27861;&#20316;&#29992;&#22495;&#65292;&#39318;&#20808;&#30001;
<a name="(idx._(gentag._1547))"></a>Johnston (1971) &#25552;&#20986;&#12290;&#26080;&#21517;&#35299;&#37322;&#22120;&#21644;&#32763;&#35793;&#22120;&#22522;&#20110;&#24503;&#24067;&#40065;&#37329;&#32034;&#24341;
(<a name="(idx._(gentag._1548))"></a>de Bruijn, 1972)&#12290;
<a name="(idx._(gentag._1549))"></a></p><p>Scheme &#30001; <a name="(idx._(gentag._1550))"></a>Sussman &amp; <a name="(idx._(gentag._1551))"></a>Steele (1975) &#21457;&#26126;&#12290;&#20854;&#24320;&#21457;&#36807;&#31243;&#35760;&#24405;
&#22312; <a name="(idx._(gentag._1552))"></a>Steele &amp; <a name="(idx._(gentag._1553))"></a>Sussman (1978); <a name="(idx._(gentag._1554))"></a>Clinger et
al. (1985a); <a name="(idx._(gentag._1555))"></a>Rees et al. (1986); <a name="(idx._(gentag._1556))"></a>Clinger et
al. (1991); <a name="(idx._(gentag._1557))"></a>Kelsey et al. (1998)&#12290;Scheme &#26631;&#20934;&#30001; IEEE standard
(IEEE, 1991) &#21644; <span class="emph"><span class="texMathInline">\textit{Revised}^6</span> Report on the Algorithmic Language
Scheme</span> (<a name="(idx._(gentag._1558))"></a>Sperber et al., 2007) &#21046;&#23450;&#12290;</p><p><a name="(idx._(gentag._1559))"></a>Dybvig (2003) &#31616;&#30701;&#20171;&#32461;&#20102; Scheme&#65292;&#21152;&#20837;&#20102;&#35768;&#22810;&#23500;&#26377;&#27934;&#35265;&#30340;&#20363;&#23376;&#12290;</p><p><a name="(idx._(gentag._1560))"></a>
&#35299;&#37322;&#22120;&#24605;&#24819;&#33267;&#23569;&#33021;&#36861;&#28335;&#21040;&#22270;&#28789;&#65292;&#20182;&#23450;&#20041;&#20102;&#33021;&#22815;&#27169;&#25311;&#20219;&#20309;&#22270;&#28789;&#26426;&#30340;&#8220;&#36890;&#29992;
&#8221;&#26426;&#22120;&#12290;&#36825;&#31181;&#36890;&#29992;&#26426;&#22120;&#23454;&#38469;&#19978;&#26159;&#19968;&#20010;&#35299;&#37322;&#22120;&#65292;&#21462;&#19968;&#22871;&#25551;&#36848;&#22270;&#28789;&#26426;&#30340;&#32534;&#30721;&#65292;&#27169;
&#25311;&#35299;&#30721;&#26426;&#22120; (Turing, 1936)&#12290;&#32463;&#20856;&#30340;&#20911;&#35834;&#20381;&#26364;&#26426; (<a name="(idx._(gentag._1561))"></a>von Neumann, 1945) &#21516;
&#26679;&#26159;&#30828;&#20214;&#23454;&#29616;&#30340;&#35299;&#37322;&#22120;&#65292;&#29992;&#26469;&#35299;&#37322;&#26426;&#22120;&#35821;&#35328;&#31243;&#24207;&#12290;
<a name="(idx._(gentag._1562))"></a></p><p><a name="(idx._(gentag._1563))"></a>
<a name="(idx._(gentag._1564))"></a>
<a name="(idx._(gentag._1565))"></a>
<a name="(idx._(gentag._1566))"></a>
&#23545;&#35299;&#37322;&#22120;&#30340;&#29616;&#20195;&#24212;&#29992;&#21487;&#36861;&#28335;&#21040; <a name="(idx._(gentag._1567))"></a>McCarthy (1960)&#65292;&#20182;&#25552;&#20986;&#20102;<span class="emph">&#33258;&#24490;&#29615;&#35299;&#37322;&#22120;</span> (<span class="emph">metacircular
interpreter</span>)&#65288;&#29992;&#34987;&#23450;&#35821;&#35328;&#26412;&#36523;&#20889;&#23601;&#30340;&#35299;&#37322;&#22120;&#65289;&#65292;&#29992;&#26469;&#35299;&#37322; Lisp &#30340;&#33021;&#21147;&#12290;
&#24403;&#28982;&#65292;&#36825;&#26679;&#30340;&#35299;&#37322;&#22120;&#24102;&#26469;&#19968;&#22823;&#38590;&#39064;&#65306;&#22914;&#26524;&#34987;&#23450;&#35821;&#35328;&#30001;&#33258;&#36523;&#23450;&#20041;&#65292;&#25105;&#20204;&#35201;&#29702;&#35299;&#35821;&#35328;&#30340;&#23450;&#20041;&#65292;&#23601;
&#35201;&#20808;&#29702;&#35299;&#36825;&#31181;&#35821;&#35328;&#12290;&#30830;&#23454;&#65292;&#21363;&#20351;&#35299;&#37322;&#22120;&#19981;&#26159;&#33258;&#24490;&#29615;&#30340;&#65292;&#20063;&#20250;&#38754;&#20020;&#21516;&#26679;&#30340;&#38382;&#39064;&#12290;&#35835;&#32773;&#29702;&#35299;&#34987;&#23450;
&#20041;&#30340;&#20107;&#29289;&#20043;&#21069;&#65292;&#20173;&#38656;&#29702;&#35299;&#20070;&#20889;&#23450;&#20041;&#29992;&#30340;&#35821;&#35328;&#12290;</p><p>&#36825;&#20123;&#24180;&#26469;&#65292;&#22823;&#37327;&#25216;&#26415;&#29992;&#26469;&#35299;&#20915;&#36825;&#19968;&#38590;&#39064;&#12290;&#25105;&#20204;&#25226;&#35299;&#37322;&#22120;&#35270;&#20026;&#26041;&#31243;&#24335;&#35268;&#33539;&#30340;&#36716;&#20889;
<a name="(idx._(gentag._1568))"></a>
(<a name="(idx._(gentag._1569))"></a>Goguen et al., 1977) &#25110;&#32773; <a name="(idx._(gentag._1570))"></a>Plotkin (1975, 1981) &#24335;&#30340;&#22823;
&#27493;&#25805;&#20316;&#35821;&#20041;&#12290;&#36825;&#21482;&#38656;&#35201;&#38750;&#24120;&#30452;&#35266;&#30340;&#25968;&#23398;&#12290;</p><p><a name="(idx._(gentag._1571))"></a>
&#25351;&#31216;&#35821;&#20041;&#26159;&#21478;&#19968;&#31181;&#29992;&#25968;&#23398;&#23450;&#20041;&#35821;&#35328;&#30340;&#25216;&#26415;&#12290;&#36825;&#31181;&#26041;&#27861;&#23558;&#35299;&#37322;&#22120;&#26367;&#25442;&#20026;&#19968;&#20010;&#20989;&#25968;&#65292;&#35813;&#20989;&#25968;&#25226;&#27599;
&#20010;&#34987;&#23450;&#35821;&#35328;&#30340;&#31243;&#24207;&#32763;&#35793;&#20026;&#23450;&#20041;&#20854;&#34892;&#20026;&#30340;&#25968;&#23398;&#23545;&#35937;&#12290;<a name="(idx._(gentag._1572))"></a>Plotkin (1977) &#23545;&#36825;&#31181;&#25216;
&#26415;&#20570;&#20102;&#26080;&#21487;&#26367;&#20195;&#30340;&#20171;&#32461;&#65292;<a name="(idx._(gentag._1573))"></a>Winskel (1993) &#20570;&#20102;&#26356;&#23485;&#27867;&#30340;&#25506;&#35752;&#12290;
<a name="(idx._(gentag._1574))"></a>Milne &amp; <a name="(idx._(gentag._1575))"></a>Strachey (1976) &#26159;&#26412;&#30334;&#31185;&#20840;&#20070;&#65292;&#30740;&#31350;&#20102;&#22914;&#20309;&#29992;&#36825;&#31181;
&#25216;&#26415;&#24314;&#27169;&#22823;&#37327;&#35821;&#35328;&#29305;&#24615;&#65292;</p><p>&#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#20889;&#20986;&#34987;&#23450;&#35821;&#35328;&#23376;&#38598;&#30340;&#35299;&#37322;&#22120;&#12290;&#20363;&#22914;&#65292;<a href="#%28part._state%29" data-pltdoc="x">&#29366;&#24577;</a>&#30340;&#20960;&#20010;&#35299;&#37322;&#22120;&#20381;&#38752;
Scheme &#30340;&#23384;&#20648;&#22120;&#26469;&#35299;&#37322;&#23384;&#20648;&#22120;&#30340;&#27010;&#24565;&#65292;&#20294;&#23427;&#20204;&#21482;&#29992;&#20102;&#19968;&#20010;&#20840;&#23616;&#21487;&#21464;&#23545;&#35937;&#65292;&#32780;&#19981;&#26159; Scheme
&#21487;&#21464;&#21464;&#37327;&#30340;&#25152;&#26377;&#33021;&#21147;&#12290;<a name="(idx._(gentag._1576))"></a></p><p><a name="(idx._(gentag._1577))"></a>
<a name="(idx._(gentag._1578))"></a>
&#23558;&#35745;&#31639;&#35270;&#20026;&#25805;&#20316;&#23384;&#20648;&#22120;&#30340;&#24605;&#24819;&#21487;&#36861;&#28335;&#21040;&#29616;&#20195;&#35745;&#31639;&#65288;&#21442;&#35265; <a name="(idx._(gentag._1579))"></a>von Neumann, 1945&#65289;
&#30340;&#24320;&#31471;&#12290;EXPLICIT-REFS &#30340;&#35774;&#35745;&#22522;&#20110; ML (<a name="(idx._(gentag._1580))"></a>Milner et al., 1989) &#30340;&#23384;&#20648;&#22120;
&#27169;&#22411;&#65292;&#32780;&#21518;&#32773;&#19982; Bliss (<a name="(idx._(gentag._1581))"></a>Wulf, 1971) &#31867;&#20284;&#12290;IMPLICIT-REFS &#30340;&#35774;&#35745;&#31867;&#20284;&#20110;
&#22823;&#22810;&#25968;&#20855;&#26377;&#21487;&#21464;&#23616;&#37096;&#20540;&#30340;&#26631;&#20934;&#32534;&#31243;&#35821;&#35328;&#65292;&#35832;&#22914; Pascal&#12289;Scheme &#21644; Java&#12290;</p><p><a name="(idx._(gentag._1582))"></a>
<a name="(idx._(gentag._1583))"></a>
&#26415;&#35821;&#8220;&#24038;&#20540;&#8221;&#21644;&#8220;&#21491;&#20540;&#8221;&#65292;&#20197;&#21450;
&#20869;&#23384;&#30340;&#29615;&#22659;-&#23384;&#20648;&#22120;&#27169;&#22411;&#28304;&#33258; <a name="(idx._(gentag._1584))"></a>Strachey (1967)&#12290;</p><p><a name="(idx._(gentag._1585))"></a>
Fortran (<a name="(idx._(gentag._1586))"></a>Backus et al., 1957) &#26159;&#31532;&#19968;&#31181;&#20351;&#29992;&#25353;&#25351;&#35843;&#29992;&#30340;&#35821;&#35328;&#65292;Algol 60
(<a name="(idx._(gentag._1587))"></a>Naur et al., 1963) &#26159;&#31532;&#19968;&#31181;&#20351;&#29992;&#25353;&#21517;&#35843;&#29992;&#30340;&#35821;&#35328;&#12290;
<a name="(idx._(gentag._1588))"></a>
<a name="(idx._(gentag._1589))"></a>Friedman &amp; <a name="(idx._(gentag._1590))"></a>Wise (1976) &#36739;&#26089;&#20171;&#32461;&#20102;&#20840;&#38754;&#20351;&#29992;&#25042;&#27714;&#20540;&#30340;&#23041;&#21147;&#12290;
<a name="(idx._(gentag._1591))"></a>
<a name="(idx._(gentag._1592))"></a>
<a name="(idx._(gentag._1593))"></a>
Haskell (<a name="(idx._(gentag._1594))"></a>Hudak et al., 1990) &#26159;&#31532;&#19968;&#31181;&#20351;&#29992;&#25353;&#38656;&#35843;&#29992;&#30340;&#23454;&#38469;&#35821;&#35328;&#12290;&#20026;&#20102;&#24314;
&#27169;&#25353;&#21517;&#35843;&#29992;&#65292;<a name="(idx._(gentag._1595))"></a>Ingerman (1961) &#21457;&#26126;&#20102;<span class="emph">&#20540;&#31665;</span> (<span class="emph">thunk</span>)&#12290;&#25105;&#20204;&#29992;&#23427;&#20204;
&#21644;&#25928;&#26524;&#24314;&#27169;&#25353;&#38656;&#35843;&#29992;&#12290;&#36825;&#19982;<span class="emph">&#21161;&#35760;&#27861;</span> (<span class="emph">memoization</span>) (<a name="(idx._(gentag._1596))"></a>Michie, 1968) &#31867;&#20284;&#12290;
<a name="(idx._(gentag._1597))"></a>
<a name="(idx._(gentag._1598))"></a></p><p><a name="(idx._(gentag._1599))"></a>
<span class="emph">Monads</span> &#30001; <a name="(idx._(gentag._1600))"></a>Moggi (1991) &#25552;&#20986;&#65292;&#22240; <a name="(idx._(gentag._1601))"></a>Wadler (1992)
&#27969;&#34892;&#12290;&#23427;&#25552;&#20379;&#20102;&#32534;&#31243;&#35821;&#35328;&#25928;&#26524;&#30340;&#36890;&#29992;&#27169;&#22411;&#12290;&#22312;&#20989;&#25968;&#24335;&#35821;&#35328; Haskell (<a name="(idx._(gentag._1602))"></a>Peyton
Jones, 2001) &#20013;&#65292;monads &#25552;&#20379;&#20102;&#38750;&#20989;&#25968;&#24335;&#34892;&#20026;&#30340;&#32452;&#32455;&#21407;&#21017;&#12290;</p><p><a name="(idx._(gentag._1603))"></a>
<a name="(idx._(gentag._1604))"></a>
<a name="(idx._(gentag._1605))"></a>
&#32493;&#25991;&#30001;&#22810;&#20154;&#29420;&#31435;&#21457;&#29616;&#65292;<a name="(idx._(gentag._1606))"></a>Reynolds (1993) &#20171;&#32461;&#20102;&#36825;&#19968;&#36855;&#20154;&#21382;&#21490;&#12290;
<a name="(idx._(gentag._1607))"></a>Strachey &amp; <a name="(idx._(gentag._1608))"></a>Wadsworth (1974) &#25110;&#35768;&#26159;&#20854;&#20013;&#24433;&#21709;&#26368;&#22823;&#30340;&#12290;
<a name="(idx._(gentag._1609))"></a>Reynolds (1972) &#23558;&#19968;&#20010;&#33258;&#24490;&#29615;&#35299;&#37322;&#22120;&#20570;&#20102; CPS &#21464;&#25442;&#65292;&#24182;&#23637;&#31034;&#20102;&#36825;&#26679;&#20570;&#22914;&#20309;
&#36991;&#20813;&#33258;&#24490;&#29615;&#30340;&#26576;&#20123;&#38382;&#39064;&#12290;&#23558;&#23614;&#24335;&#31243;&#24207;&#32763;&#35793;&#20026;&#21629;&#20196;&#24335;&#21487;&#36861;&#28335;&#21040; <a name="(idx._(gentag._1610))"></a>McCarthy
(1962)&#65292;<a name="(idx._(gentag._1611))"></a>Abelson &amp; <a name="(idx._(gentag._1612))"></a>Sussman (1985, 1996) &#24378;&#35843;&#20102;&#23558;&#20854;&#20316;&#20026;
&#19968;&#31181;&#32534;&#31243;&#25216;&#26415;&#30340;&#37325;&#35201;&#24615;&#12290;
<a name="(idx._(gentag._1613))"></a>
<a name="(idx._(gentag._1614))"></a></p><p><a name="(idx._(gentag._1615))"></a>Plotkin (1975) &#32473;&#20986;&#20102;&#30456;&#24403;&#28165;&#26224;&#30340; CPS &#21464;&#25442;&#65292;&#21457;&#29616;&#20102;&#23427;&#30340;&#29702;&#35770;&#24615;&#36136;&#12290;
<a name="(idx._(gentag._1616))"></a>Fischer (1972) &#25552;&#20986;&#20102;&#38750;&#24120;&#31867;&#20284;&#30340;&#21464;&#25442;&#12290;<a name="(idx._(gentag._1617))"></a>Wand (1980b) &#29575;&#20808;
&#25506;&#35752;&#20102;&#32493;&#25991;&#21644;<a name="(idx._(gentag._1618))"></a>&#32047;&#21152;&#22120;&#20043;&#38388;&#30340;&#32852;&#31995;&#65292;&#20687;<a href="#%28part._s6..1%29" data-pltdoc="x">&#20889;&#20986;&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;&#30340;&#31243;&#24207;</a>&#32467;&#23614;&#30340;&#20363;&#23376;
<span class="stt">fact</span> &#37027;&#26679;&#12290;</p><p>&#22312;&#31243;&#24207;&#20013;&#30452;&#25509;&#20351;&#29992;&#32493;&#25991;&#30340;&#24605;&#24819;&#28304;&#33258;&#20110; <a name="(idx._(gentag._1619))"></a>Landin (1965a) &#65288;&#21478;&#35265;
<a name="(idx._(gentag._1620))"></a>Landin 1965b&#65289;&#65292;&#22312; Lisp &#21644;&#26089;&#26399;&#29256;&#26412;&#30340; Scheme (<a name="(idx._(gentag._1621))"></a>Steele &amp;
<a name="(idx._(gentag._1622))"></a>Sussman, 1978) &#20013;&#24191;&#27867;&#20351;&#29992;&#12290;&#25105;&#20204;&#30340; <span class="stt">letcc</span> &#22522;&#20110; Scheme &#30340;
<span class="stt">call-with-current-continuation</span>&#65292;&#22987;&#35265;&#20110; <a name="(idx._(gentag._1623))"></a>Clinger et al. (1985b)&#12290;
<a name="(idx._(gentag._1624))"></a></p><p><a name="(idx._(gentag._1625))"></a>
<a name="(idx._(gentag._1626))"></a>
<a name="(idx._(gentag._1627))"></a>Wand (1980a) &#23637;&#31034;&#20102;&#22914;&#20309;&#29992;&#32493;&#25991;&#24314;&#27169;&#36731;&#37327;&#32423;&#36827;&#31243;&#25110;&#32447;&#31243;&#12290;&#32493;&#25991;&#29992;&#36884;&#24191;&#27867;&#65292;&#36828;
&#36229;&#26412;&#20070;&#35752;&#35770;&#33539;&#22260;&#65292;&#22914;<span class="emph">&#21327;&#31243;</span> (<span class="emph">coroutine</span>) (<a name="(idx._(gentag._1628))"></a>Haynes et al., 1986)&#12290;</p><p>&#25105;&#20204;&#23545;&#32447;&#31243;&#30340;&#35752;&#35770;&#27169;&#25311;&#20102; POSIX &#32447;&#31243; &#65288;&#20363;&#22914;&#65292;&#21442;&#35265; <a name="(idx._(gentag._1629))"></a>Lewis &amp;
<a name="(idx._(gentag._1630))"></a>Berg, 1998&#65289;&#12290;{ex5.56} &#22522;&#20110; Erlang &#30340;&#28040;&#24687;&#20256;&#36882;&#24182;&#21457;&#27169;&#22411;
(<a name="(idx._(gentag._1631))"></a>Armstrong, 2007)&#12290;
<a name="(idx._(gentag._1632))"></a>
<a name="(idx._(gentag._1633))"></a></p><p><a name="(idx._(gentag._1634))"></a>Steele &#30340; RABBIT &#32534;&#35793;&#22120; (<a name="(idx._(gentag._1635))"></a>Steele, 1978) &#20197; CPS &#21464;&#25442;&#20026;&#22522;
&#30784;&#12290;&#36825;&#19968;&#32534;&#35793;&#22120;&#39318;&#20808;&#23545;&#28304;&#31243;&#24207;&#20570; CPS &#21464;&#25442;&#65292;&#28982;&#21518;&#20197;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#32493;&#25991;&#12290;&#24471;&#20986;&#30340;&#31243;&#24207;&#20687;&#25105;&#20204;
&#30340;&#23492;&#23384;&#31243;&#24207;&#19968;&#26679;&#65292;&#24456;&#23481;&#26131;&#32534;&#35793;&#12290;&#36825;&#26465;&#32447;&#21457;&#23637;&#20986;&#20102; ORBIT &#32534;&#35793;&#22120; (<a name="(idx._(gentag._1636))"></a>Kranz et
al., 1986) &#21644; Standard ML of New Jersey &#32534;&#35793;&#22120; (<a name="(idx._(gentag._1637))"></a>Appel &amp;
<a name="(idx._(gentag._1638))"></a>Jim, 1989)&#12290;</p><p><a href="#%28part._cps%29" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a>&#30340; CPS &#31639;&#27861;&#22522;&#20110; <a name="(idx._(gentag._1639))"></a>Danvy &amp; <a name="(idx._(gentag._1640))"></a>Nielsen (2003) &#25552;
&#20986;&#30340;&#19968;&#38454;&#32452;&#21512;&#24335;&#31639;&#27861;&#12290;CPS &#32763;&#35793;&#21382;&#21490;&#24736;&#20037;&#65292;&#21253;&#25324; <a name="(idx._(gentag._1641))"></a>Sabry &amp;
<a name="(idx._(gentag._1642))"></a>Wadler (1997)&#65292;&#20182;&#20204;&#25913;&#36827;&#20102; <a name="(idx._(gentag._1643))"></a>Sabry &amp;
<a name="(idx._(gentag._1644))"></a>Felleisen (1993)&#65292;&#32780;&#21518;&#32773;&#21448;&#26159;&#21463;&#26412;&#20070;&#21021;&#29256;&#31532; 8 &#31456;&#30340; CPS &#31639;&#27861;&#21551;&#21457;&#12290;
{ex6.30} &#22522;&#20110; <a name="(idx._(gentag._1645))"></a>Danvy &amp; <a name="(idx._(gentag._1646))"></a>Filinski (1992) &#25552;
&#20986;&#30340;&#39640;&#38454;&#32452;&#21512;&#24335; CPS &#31639;&#27861;&#12290;CPS &#20043;&#22806;&#36824;&#26377;<a name="(idx._(gentag._1647))"></a> A-normal form&#65288;{ex6.34}&#65289;&#65292;&#30001;
<a name="(idx._(gentag._1648))"></a>Sabry &amp; <a name="(idx._(gentag._1649))"></a>Felleisen (1992); <a name="(idx._(gentag._1650))"></a>Flanagan et
al. (1993) &#25552;&#20986;&#12290;
<a name="(idx._(gentag._1651))"></a></p><p>&#24403;&#21069;&#22823;&#22810;&#25968;&#20851;&#20110;&#26377;&#31867;&#22411;&#32534;&#31243;&#35821;&#35328;&#30340;&#24037;&#20316;&#37117;&#33021;&#36861;&#28335;&#21040; <a name="(idx._(gentag._1652))"></a>Milner (1978)&#65292;&#20182;&#22312; ML
&#20013;&#24341;&#20837;&#20102;&#31867;&#22411;&#65292;&#20316;&#20026;&#20445;&#35777;&#35745;&#31639;&#26426;&#29983;&#25104;&#35777;&#26126;&#21487;&#38752;&#24615;&#30340;&#24037;&#20855;&#12290;<a name="(idx._(gentag._1653))"></a>Ullman (1998) &#23545;
&#27492;&#20570;&#20102;&#31934;&#36767;&#30340;&#20171;&#32461;&#12290;&#26356;&#22810;&#35752;&#35770;&#21442;&#35265; <a name="(idx._(gentag._1654))"></a>Felleisen &amp; <a name="(idx._(gentag._1655))"></a>Friedman
(1996)&#65292;&#21478;&#35265; <a name="(idx._(gentag._1656))"></a>Paulson (1996); <a name="(idx._(gentag._1657))"></a>Smith (2006)&#12290;</p><p><a name="(idx._(gentag._1658))"></a>
&#20154;&#20204;&#22810;&#27425;&#21457;&#29616;&#20102;&#31867;&#22411;&#25512;&#23548;&#12290;&#26631;&#20934;&#21442;&#32771;&#20070;&#26159; <a name="(idx._(gentag._1659))"></a>Hindley (1969)&#65292;&#20294;
<a name="(idx._(gentag._1660))"></a>Hindley &#25552;&#21040;&#65292;<a name="(idx._(gentag._1661))"></a>Curry &#22312; 1950 &#24180;&#20195;&#24050;&#32463;&#30693;&#36947;
&#20102;&#36825;&#20123;&#32467;&#35770;&#12290;<a name="(idx._(gentag._1662))"></a>Morris (1968) &#20063;&#25552;&#20986;&#20102;&#31867;&#22411;&#25512;&#23548;&#65292;&#20294;&#22312;<a name="(idx._(gentag._1663))"></a>Milner
1978 &#24180;&#30340;&#35770;&#25991;&#21457;&#34920;&#20043;&#21069;&#65292;&#31867;&#22411;&#25512;&#23548;&#20174;&#26410;&#24191;&#27867;&#24212;&#29992;&#12290;</p><p><a name="(idx._(gentag._1664))"></a>
<a name="(idx._(gentag._1665))"></a>Wand (1987) &#29575;&#20808;&#38416;&#26126;&#20102;&#22914;&#20309;&#23558;&#31867;&#22411;&#25512;&#23548;&#20998;&#20026;&#26041;&#31243;&#26500;&#24314;&#21644;&#27714;&#35299;&#12290;&#21517;&#20026;
<a name="(idx._(gentag._1666))"></a>
Hindley-Milner &#22810;&#24577;&#30340; <a name="(idx._(gentag._1667))"></a>Milner (1978) &#31995;&#32479;&#19982;{ex7.28} &#20013;
&#30340;&#31995;&#32479;&#22522;&#26412;&#30456;&#21516;&#12290;<a name="(idx._(gentag._1668))"></a>Pierce (2002, 2004) &#30340;&#20004;&#21367;&#33879;&#20316;&#23545;&#31867;&#22411;&#20570;&#20102;&#30334;&#31185;&#20840;&#20070;&#24335;
&#30340;&#35752;&#35770;&#12290;
<a name="(idx._(gentag._1669))"></a></p><p>&#24191;&#20026;&#35770;&#36848;&#30340;&#25968;&#25454;&#25277;&#35937;&#24605;&#24819;&#26159; 1970 &#24180;&#20195;&#30340;&#19968;&#22823;&#21019;&#20030;&#12290;&#36825;&#37324;&#25105;&#20204;&#20165;&#20165;&#25552;&#21450;
<a name="(idx._(gentag._1670))"></a>Parnas (1972)&#65292;&#20182;&#24378;&#35843;&#20102;&#20197;&#25509;&#21475;&#20316;&#20026;&#20449;&#24687;&#38544;&#34255;&#36793;&#30028;&#30340;&#37325;&#35201;&#24615;&#12290;&#25968;&#25454;&#31867;&#22411;&#30340;&#23454;
&#29616;&#26159;&#28385;&#36275;&#35813;&#31867;&#22411;&#23450;&#20041;&#30340;&#20219;&#24847;&#20540;&#21644;&#25805;&#20316;&#30340;&#38598;&#21512;&#12290;<a name="(idx._(gentag._1671))"></a>Goguen et al. (1977) &#35777;&#26126;&#65292;
&#20219;&#24847;&#25968;&#25454;&#31867;&#22411;&#37117;&#33021;&#20197;&#26641;&#30340;&#38598;&#21512;&#23454;&#29616;&#65292;&#26641;&#20013;&#35760;&#24405;&#20102;&#20540;&#22914;&#20309;&#26500;&#24314;&#65292;&#19988;&#20174;&#19968;&#20010;&#26641;&#30340;&#38598;&#21512;&#21040;&#35813;&#25968;&#25454;&#31867;
&#22411;&#21478;&#19968;&#23454;&#29616;&#30340;&#38598;&#21512;&#20855;&#26377;&#21807;&#19968;&#26144;&#23556;&#12290;&#30456;&#24212;&#22320;&#65292;&#20219;&#24847;&#25968;&#25454;&#31867;&#22411;&#37117;&#33021;&#20197;&#36807;&#31243;&#34920;&#31034;&#27861;&#23454;&#29616;&#65292;&#19988;&#20174;&#35813;&#25968;
&#25454;&#31867;&#22411;&#30340;&#20219;&#20309;&#20854;&#20182;&#23454;&#29616;&#21040;&#36807;&#31243;&#34920;&#31034;&#27861;&#37117;&#26377;&#21807;&#19968;&#26144;&#23556; (<a name="(idx._(gentag._1672))"></a>Giarratana et al.,
1976; <a name="(idx._(gentag._1673))"></a>Wand, 1979; <a name="(idx._(gentag._1674))"></a>Kamin, 1980)&#12290;
<a name="(idx._(gentag._1675))"></a>
<a name="(idx._(gentag._1676))"></a>
<a name="(idx._(gentag._1677))"></a>
<a name="(idx._(gentag._1678))"></a>
<a name="(idx._(gentag._1679))"></a></p><p><a name="(idx._(gentag._1680))"></a>
&#29992;&#31867;&#22411;&#24378;&#21270;&#25968;&#25454;&#25277;&#35937;&#22987;&#35265;&#20110; <a name="(idx._(gentag._1681))"></a>Reynolds (1975)&#65292;&#31867;&#22411;&#24212;&#29992;&#20110; CLU
(<a name="(idx._(gentag._1682))"></a>Liskov et al., 1977)&#12290;&#36825;&#21457;&#23637;&#20026; Standard ML (<a name="(idx._(gentag._1683))"></a>Milner et
al., 1989) &#65288;&#21478;&#35265; <a name="(idx._(gentag._1684))"></a>Paulson, 1996; <a name="(idx._(gentag._1685))"></a>Ullman, 1998&#65289;&#30340;&#27169;&#22359;
&#31995;&#32479;&#12290;&#25105;&#20204;&#30340;&#27169;&#22359;&#31995;&#32479;&#22522;&#20110; <a name="(idx._(gentag._1686))"></a>Leroy (1994)&#65292;&#23427;&#24212;&#29992;&#20110; CAML&#65288;&#21442;&#35265;
<a name="(idx._(gentag._1687))"></a>Smith, 2006&#65289;&#65292;&#32780;&#36825;&#26159; ML &#30340;&#21478;&#19968;&#21464;&#20307;&#12290;</p><p>&#36890;&#24120;&#35270; Simula 67 (<a name="(idx._(gentag._1688))"></a>Birtwistle et al., 1973) &#20026;&#31532;&#19968;&#31181;&#38754;&#21521;&#23545;&#35937;&#35821;&#35328;&#12290;&#38754;
&#21521;&#23545;&#35937;&#30340;&#31867;&#27604;&#30001; Smalltalk (<a name="(idx._(gentag._1689))"></a>Goldberg &amp; <a name="(idx._(gentag._1690))"></a>Robson, 1983) &#21644;
Actors (<a name="(idx._(gentag._1691))"></a>Hewitt, 1977) &#25193;&#20805;&#12290;&#20108;&#32773;&#37117;&#20351;&#29992;&#20154;&#31867;&#20114;&#21160;&#20197;&#21450;&#25910;&#21457;&#28040;&#24687;&#30340;&#31867;&#27604;&#26469;
&#35299;&#37322;&#20182;&#20204;&#30340;&#24605;&#24819;&#12290;<a name="(idx._(gentag._1692))"></a>Sussman &#21644; <a name="(idx._(gentag._1693))"></a>Steele &#21407;&#25171;&#31639;&#29992; Scheme &#29702;&#35299;
Hewitt &#30340; actor &#27169;&#22411;&#65292;&#20294; Scheme &#36229;&#36234;&#20854;&#21407;&#24847;&#12290;<a name="(idx._(gentag._1694))"></a>Abelson &amp;
<a name="(idx._(gentag._1695))"></a>Sussman (1985, 1996) &#21644; <a name="(idx._(gentag._1696))"></a>Springer &amp;
<a name="(idx._(gentag._1697))"></a>Friedman (1989) &#32473;&#20986;&#20102;&#26356;&#22810;&#29992; Scheme &#36827;&#34892;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#30340;&#20363;&#23376;&#65292;&#35752;&#35770;&#20102;
&#20989;&#25968;&#24335;&#32534;&#31243;&#21644;&#21629;&#20196;&#24335;&#32534;&#31243;&#22312;&#21738;&#20123;&#26102;&#20505;&#26368;&#36866;&#21512;&#12290;<a name="(idx._(gentag._1698))"></a>Steele (1990) &#21644;
<a name="(idx._(gentag._1699))"></a>Kiczales et al. (1991) &#25551;&#36848;&#20102; Common Lisp &#20013;&#24378;&#22823;&#30340;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#32452;&#20214;
CLOS&#12290;</p><p><a href="#%28part._oac%29" data-pltdoc="x">&#23545;&#35937;&#21644;&#31867;</a>&#30340;&#35821;&#35328;&#22522;&#20110; Java &#30340;&#23545;&#35937;&#27169;&#22411;&#12290;Java &#30340;&#26631;&#20934;&#21442;&#32771;&#20070;&#26159; <a name="(idx._(gentag._1700))"></a>Arnold
&amp; <a name="(idx._(gentag._1701))"></a>Gosling (1998)&#65292;&#26377;&#24847;&#31934;&#30740;&#30340;&#35835;&#32773;&#21487;&#20197;&#38405;&#35835;&#20854;&#35268;&#33539; <a name="(idx._(gentag._1702))"></a>Gosling
et al. (1996)&#12290;</p><p>Ruby &#65288;&#21442;&#35265; <a name="(idx._(gentag._1703))"></a>Thomas et al., 2005&#65289;&#12289;Python &#65288;<a name="(idx._(gentag._1704))"></a>van Rossum
&amp; <a name="(idx._(gentag._1705))"></a>Drake, 2006&#65289;&#21644; Perl&#65288;<a name="(idx._(gentag._1706))"></a>Wall et al., 2000;
<a name="(idx._(gentag._1707))"></a>Dominus, 2005&#65289;&#26159;&#20855;&#26377;&#23545;&#35937;&#21644;&#36807;&#31243;&#30340;&#26080;&#31867;&#22411;&#35821;&#35328;&#65292;&#22823;&#33268;&#31867;&#20284;&#25105;&#20204;&#30340; CLASSES&#12290;
C# &#26159;&#19968;&#31181;&#24102;&#31867;&#22411;&#30340;&#35821;&#35328;&#65292;&#30456;&#36739; Java &#28155;&#21152;&#20102;&#24456;&#22810;&#29305;&#24615;&#65292;&#26368;&#33879;&#21517;&#30340;&#26159;&#19982;&#36807;&#31243;&#31867;&#20284;
&#30340;<span class="emph">&#22996;&#25176;</span> (<span class="emph">delegates</span>)&#65292;&#23427;&#36824;&#20801;&#35768;&#31243;&#24207;&#21592;&#25351;&#23450;&#26576;&#20123;&#35843;&#29992;&#24212;&#35813;&#26159;&#23614;&#35843;&#29992;&#12290;
<a name="(idx._(gentag._1708))"></a></p><p><a name="(idx._(gentag._1709))"></a>Abadi &amp; <a name="(idx._(gentag._1710))"></a>Cardelli (1996) &#23450;&#20041;&#20102;&#19968;&#31181;&#31616;&#21333;&#30340;&#23545;&#35937;&#28436;&#31639;&#65292;&#20026;&#38754;
&#21521;&#23545;&#35937;&#31995;&#32479;&#20013;&#30340;&#31867;&#22411;&#30740;&#31350;&#22880;&#23450;&#20102;&#22522;&#30784;&#12290;<a name="(idx._(gentag._1711))"></a>Flatt et al. (1998) &#24418;&#24335;&#21270;&#20102; Java
&#30340;&#19968;&#20010;&#23376;&#38598;&#12290;&#21478;&#19968;&#26377;&#29992;&#30340;&#23376;&#38598;&#26159; <span class="emph">Featherweight Java</span> (Igarashi et al., 1999)&#12290;</p><p><a name="(idx._(gentag._1712))"></a>Gamma et al. (1995) &#32534;&#20889;&#20102;&#19968;&#26412;&#22791;&#21463;&#20851;&#27880;&#30340;&#25163;&#20876;&#65292;&#19987;&#35770;&#32534;&#20889;&#38754;&#21521;&#23545;&#35937;&#31243;&#24207;
&#30340;&#26377;&#25928;&#32452;&#32455;&#21407;&#21017;&#12290;</p><p>ACM &#20110; 1978 &#24180; (<a name="(idx._(gentag._1713))"></a>Wexelblatt, 1978)&#12289;1996 &#24180; (<a name="(idx._(gentag._1714))"></a>Bergin &amp;
<a name="(idx._(gentag._1715))"></a>Gibson, 1996) &#21644; 2007 &#24180;(<a name="(idx._(gentag._1716))"></a>Hailpern, 2007) &#19977;&#27425;&#20030;&#21150;&#20250;&#35758;&#65292;
&#19987;&#38376;&#35752;&#35770;&#32534;&#31243;&#35821;&#35328;&#30340;&#21382;&#21490;&#12290;&#36825;&#20123;&#20250;&#35758;&#22218;&#25324;&#20102;&#35752;&#35770;&#21508;&#31181;&#32534;&#31243;&#35821;&#35328;&#21382;&#21490;&#30340;&#35770;&#25991;&#12290;IEEE Annals of
the History of Computing &#22218;&#25324;&#20102;&#20171;&#32461;&#26041;&#26041;&#38754;&#38754;&#35745;&#31639;&#21382;&#21490;&#30340;&#23398;&#26415;&#24615;&#25991;&#31456;&#65292;&#20063;&#21253;&#25324;&#32534;&#31243;&#35821;&#35328;&#12290;
<a name="(idx._(gentag._1717))"></a>Knuth &amp; <a name="(idx._(gentag._1718))"></a>Pardo (1977) &#20171;&#32461;&#20102;&#21021;&#26399;&#32534;&#31243;&#35821;&#35328;&#30340;&#36855;&#20154;&#21382;&#21490;&#12290;</p><p>&#19981;&#35745;&#20854;&#25968;&#30340;&#20250;&#35758;&#22312;&#27719;&#25253;&#32534;&#31243;&#35821;&#35328;&#30340;&#26032;&#36827;&#23637;&#12290;&#33267;&#23569;&#23601;&#26412;&#20070;&#35752;&#35770;&#30340;&#35805;&#39064;&#26469;&#35828;&#65292;&#19977;&#20010;&#39030;&#32423;&#20250;&#35758;&#26159;
<span class="emph">ACM Symposium on Principles of Programming Languages</span> (POPL)&#12289;<span class="emph">ACM
SIGPLAN International Conference on Functional Programming</span> (ICFP) &#21644; <span class="emph">ACM
SIGPLAN Conference on Programming Language Design and Implementation</span> (PLDI)&#12290;&#32534;
&#31243;&#35821;&#35328;&#30340;&#20027;&#35201;&#23398;&#26415;&#26399;&#21002;&#21253;&#25324; <span class="emph">ACM Transactions on Programming Languages and
Systems</span>&#12289;<span class="emph">Journal of Functional Programming</span> &#21644; <span class="emph">Higher-Order and
Symbolic Computation</span>&#12290;&#38500;&#27492;&#20043;&#22806;&#65292;&#36824;&#26377;&#20123;&#32593;&#31449;&#19987;&#27880;&#20110;&#32534;&#31243;&#35821;&#35328;&#30340;&#26041;&#26041;&#38754;&#38754;&#12290;</p><h3 class="heading">11<tt>&nbsp;</tt><a name="(part._sllgen-parsing-system)"></a>SLLGEN&#35299;&#26512;&#31995;&#32479;<span class="button-group"><a href="#(part._sllgen-parsing-system)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(elem._sllgen)"></a></p><p>&#31243;&#24207;&#21482;&#26159;&#23383;&#31526;&#20018;&#12290;&#35201;&#22788;&#29702;&#31243;&#24207;&#65292;&#38656;&#35201;&#23558;&#36825;&#20123;&#23383;&#31526;&#24402;&#31867;&#20026;&#26377;&#24847;&#20041;&#30340;&#21333;&#20803;&#12290;&#36825;&#31181;&#24402;&#31867;&#36890;&#24120;&#20998;&#20026;&#20004;
&#20010;&#38454;&#27573;&#65306;<span class="emph">&#25195;&#25551;</span> &#21644;<span class="emph">&#35299;&#26512;</span>&#12290;</p><p><a name="(idx._(gentag._1719))"></a>
&#25195;&#25551;&#36807;&#31243;&#23558;&#23383;&#31526;&#24207;&#21015;&#20998;&#20026;&#21333;&#35789;&#65292;&#26631;&#28857;&#31561;&#31561;&#12290;&#36825;&#20123;&#21333;&#20803;&#21483;&#20570;<span class="emph">&#35789;&#26465;</span>&#12289;<span class="emph">&#35789;
&#32032;</span>&#65292;&#25110;&#32773;&#26368;&#24120;&#35265;&#30340;<span class="emph">&#35789;&#29260;</span>&#12290;&#35299;&#26512;&#36807;&#31243;&#23558;&#35789;&#29260;&#24207;&#21015;&#32452;&#32455;&#25104;&#26377;&#23618;&#27425;&#30340;&#35821;&#27861;&#32467;&#26500;&#65292;&#22914;&#34920;
&#36798;&#24335;&#12289;&#35821;&#21477;&#21644;&#22359;&#12290;&#36825;&#23601;&#20687;&#29992;&#20174;&#21477;&#32452;&#32455;&#21477;&#23376;&#12290;</p><p>SLLGEN &#26159;&#19968;&#20010; Scheme <span class="emph">&#25193;&#23637;&#21253;</span> (<span class="emph">package</span>)&#65292;&#29992;&#26469;&#29983;&#25104;&#35299;&#26512;&#22120;&#21644;&#25195;&#25551;&#22120;&#12290;&#22312;&#26412;&#38468;&#24405;
&#20013;&#65292;&#25105;&#20204;&#39318;&#20808;&#20171;&#32461;&#25195;&#25551;&#21644;&#35299;&#26512;&#30340;&#22522;&#30784;&#65292;&#28982;&#21518;&#32771;&#34385;&#22914;&#20309;&#29992; SLLGEN &#23454;&#29616;&#36825;&#20123;&#21151;&#33021;&#12290;</p><h4 class="heading">11.1<tt>&nbsp;</tt><a name="(part._.B..1)"></a>&#25195;&#25551;<span class="button-group"><a href="#(part._.B..1)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1720))"></a>
&#25195;&#25551;&#38382;&#39064;&#22914; &#25152;&#31034;&#12290;&#25105;&#20204;&#22312;&#20854;&#20013;&#23637;&#31034;&#20102;&#19968;&#23567;&#27573;&#31243;&#24207;&#65292;&#20197;&#21450;&#24212;&#22914;&#20309;&#23558;&#20854;
&#20998;&#21106;&#20026;&#22522;&#26412;&#21333;&#20803;&#12290;</p><p>&#23383;&#31526;&#27969;&#24212;&#22914;&#20309;&#20998;&#21106;&#20026;&#35789;&#26465;&#26159;&#35821;&#35328;&#35268;&#33539;&#30340;&#19968;&#37096;&#20998;&#12290;&#35821;&#35328;&#30340;&#36825;&#37096;&#20998;&#35268;&#33539;&#26377;&#26102;&#31216;&#20026;<span class="emph">&#35789;&#27861;&#35268;&#33539;</span> (<span class="emph">lexical
specification</span>)&#12290;&#20856;&#22411;&#30340;&#35789;&#27861;&#35268;&#33539;&#21487;&#33021;&#21253;&#25324;&#65306;
<a name="(idx._(gentag._1721))"></a></p><ul><li><p>&#20219;&#20309;&#31354;&#26684;&#21644;&#25442;&#34892;&#24207;&#21015;&#37117;&#31561;&#20215;&#20110;&#21333;&#20010;&#31354;&#26684;&#12290;</p></li><li><p>&#27880;&#37322;&#20197; <span class="stt">%</span> &#24320;&#22836;&#65292;&#21040;&#34892;&#23614;&#25130;&#27490;&#12290;</p></li><li><p>&#26631;&#35782;&#31526;&#26159;&#20197;&#23383;&#27597;&#24320;&#22836;&#30340;&#23383;&#27597;&#21644;&#25968;&#23383;&#24207;&#21015;&#12290;</p></li></ul><blockquote class="EoplFigure"><p><img src="task-of-scanner.svg" alt="扫描器的任务" width="379.5pt" height="268.5pt"/></p><blockquote class="caption"><p>&#25195;&#25551;&#22120;&#30340;&#20219;&#21153;<a name="(elem._fig-.B..1)"></a></p></blockquote></blockquote><p>&#25195;&#25551;&#22120;&#30340;&#20219;&#21153;&#26159;&#36941;&#21382;&#21644;&#20998;&#26512;&#36755;&#20837;&#65292;&#20135;&#29983;&#21547;&#26377;&#36825;&#20123;&#35789;&#26465;&#30340;&#25968;&#25454;&#32467;&#26500;&#12290;&#36890;&#24120;&#30340;&#35821;&#35328;&#20013;&#65292;&#25195;&#25551;&#22120;&#21487;
&#33021;&#26159;&#19968;&#20010;&#36807;&#31243;&#65292;&#22312;&#35843;&#29992;&#26102;&#65292;&#30001;&#36755;&#20837;&#20135;&#29983;&#8220;&#19979;&#19968;&#20010;&#8221;&#35789;&#29260;&#12290;</p><p>&#21487;&#20197;&#20174;&#22836;&#20889;&#20986;&#19968;&#20010;&#25195;&#25551;&#22120;&#65292;&#20294;&#37027;&#21448;&#40635;&#28902;&#65292;&#21448;&#26131;&#38169;&#12290;&#26356;&#22909;&#30340;&#26041;&#24335;&#26159;&#20889;&#20986;&#25351;&#23450;&#35821;&#35328;&#30340;&#35789;&#27861;&#35268;&#33539;&#12290;
&#36825;&#19968;&#20219;&#21153;&#26368;&#24120;&#29992;&#30340;&#35821;&#35328;&#26159;<span class="emph">&#27491;&#21017;&#34920;&#36798;&#24335;</span> (<span class="emph">regular expressions</span>)&#12290;&#27491;&#21017;&#34920;&#36798;&#24335;&#35821;&#35328;&#23450;
&#20041;&#22914;&#19979;&#65306;<a name="(idx._(gentag._1722))"></a>
<span class="texMathDisplay">\mathit{R} ::= \mathit{Character} \mid \mathit{RR} \mid \mathit{R} \cup \mathit{R} \mid \neg\mathit{Character}</span></p><p>&#27599;&#20010;&#27491;&#21017;&#34920;&#36798;&#24335;&#21305;&#37197;&#19968;&#20123;&#23383;&#31526;&#20018;&#12290;&#25105;&#20204;&#21487;&#20197;&#29992;&#24402;&#32435;&#27861;&#23450;&#20041;&#27599;&#20010;&#27491;&#21017;&#34920;&#36798;&#24335;&#21305;&#37197;&#30340;&#23383;&#31526;&#20018;&#38598;&#21512;&#12290;</p><ul><li><p>&#21305;&#37197;&#23383;&#31526; <span class="texMathInline">c</span> &#30340;&#23383;&#31526;&#20018;&#21482;&#21547;&#23383;&#31526; <span class="texMathInline">c</span>&#12290;</p></li><li><p>&#21305;&#37197; <span class="texMathInline">\neg c</span> &#30340;&#23383;&#31526;&#20018;&#21482;&#21547;&#19968;&#20010; <span class="texMathInline">c</span> &#20043;&#22806;&#30340;&#23383;&#31526;&#12290;</p></li><li><p>&#21305;&#37197; <span class="texMathInline">\mathit{RS}</span> &#30340;&#23383;&#31526;&#20018;&#30001;&#21305;&#37197; <span class="texMathInline">\mathit{R}</span> &#21644;&#21305;&#37197; <span class="texMathInline">\mathit{S}</span>
&#30340;&#23383;&#31526;&#20018;&#30456;&#25509;&#32780;&#24471;&#12290;&#36825;&#21483;&#20570;<span class="emph">&#20018;&#32852;</span> (<span class="emph">concatenation</span>)&#12290;<a name="(idx._(gentag._1723))"></a></p></li><li><p>&#21305;&#37197; <span class="texMathInline">\mathit{R} \cup \mathit{S}</span> &#30340;&#23383;&#31526;&#20018;&#21305;&#37197; <span class="texMathInline">\mathit{R}</span> &#25110;
<span class="texMathInline">\mathit{S}</span>&#12290;&#36825;&#26377;&#26102;&#20889;&#20316; <span class="texMathInline">\mathit{R} \mid \mathit{S}</span>&#65292;
&#21483;&#20570;<span class="emph">&#24182;&#32852;</span> (<span class="emph">alternation</span>)&#12290;<a name="(idx._(gentag._1724))"></a></p></li><li><p>&#21305;&#37197; <span class="texMathInline">\mathit{R}^{*}</span> &#30340;&#23383;&#31526;&#20018;&#30001; <span class="texMathInline">n</span> (<span class="texMathInline">n \geq 0</span>) &#20010;&#21305;&#37197;
<span class="texMathInline">\mathit{R}</span> &#30340;&#23383;&#31526;&#20018;&#20018;&#32852;&#32780;&#24471;&#12290;&#36825;&#21483;&#20570; <span class="texMathInline">\mathit{R}</span> &#30340;<span class="emph">&#20811;&#33713;&#23612;&#38381;&#21253;</span> (<span class="emph">Kleene
 closure</span>)&#12290;
<a name="(idx._(gentag._1725))"></a></p></li></ul><p>&#30475;&#20123;&#20363;&#23376;&#26356;&#26377;&#24110;&#21161;&#65306;</p><ul><li><p><span class="texMathInline">ab</span> &#21482;&#21305;&#37197;&#23383;&#31526;&#20018; <span class="stt">ab</span>&#12290;</p></li><li><p><span class="texMathInline">ab \cup cd</span> &#21305;&#37197;&#23383;&#31526;&#20018; <span class="stt">ab</span> &#25110; <span class="stt">cd</span>&#12290;</p></li><li><p><span class="texMathInline">(ab \cup cd)(ab \cup cd \cup ef)</span> &#21305;&#37197;&#23383;&#31526;&#20018; <span class="stt">abab</span>&#12289;<span class="stt">abcd</span>&#12289;
<span class="stt">abef</span>&#12289;<span class="stt">cdab</span>&#12289;<span class="stt">cdcd</span> &#21644; <span class="stt">cdef</span>&#12290;</p></li><li><p><span class="texMathInline">(ab)^{*}</span> &#21305;&#37197;&#31354;&#23383;&#31526;&#20018;&#12289;<span class="stt">ab</span>&#12289;<span class="stt">abab</span>&#12289;<span class="stt">ababab</span>&#12289;<span class="stt">abababab</span>&#12289;
<span class="stt">...</span>&#12290;</p></li><li><p><span class="texMathInline">(ab \cup cd)^{*}</span> &#21305;&#37197;&#31354;&#23383;&#31526;&#20018;&#12289;<span class="stt">ab</span>&#12289;<span class="stt">cd</span>&#12289;<span class="stt">abab</span>&#12289;<span class="stt">abcd</span>&#12289;
<span class="stt">cdab</span>&#12289;<span class="stt">cdcd</span>&#12289;<span class="stt">ababab</span>&#12289;<span class="stt">...cdcdcd</span>&#12289;<span class="stt">...</span>&#12290;</p></li></ul><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#35299;&#37322;&#20102;&#19981;&#21516;&#25805;&#20316;&#30340;&#20248;&#20808;&#32423;&#65292;&#25152;&#20197;&#65292;<span class="texMathInline">{ab}^{*} \cup cd</span> &#34920;&#31034; <span class="texMathInline">(a(b^{*}))
\cup (cd)</span>&#12290;</p><p>&#25105;&#20204;&#20363;&#23376;&#20013;&#30340;&#35268;&#33539;&#21487;&#29992;&#27491;&#21017;&#34920;&#36798;&#24335;&#20889;&#20316;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="texMathInline">whitespace = (space \cup newline)(space \cup newline)^{*}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">comment = <span class="stt">%</span>(\neg newline)^{*}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">identifier = letter(letter \cup digit)^{*}</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._1726))"></a>
&#25195;&#25551;&#22120;&#29992;&#27491;&#21017;&#34920;&#36798;&#24335;&#33719;&#21462;&#35789;&#29260;&#26102;&#65292;&#35268;&#21017;&#24635;&#26159;&#21462;<span class="emph">&#26368;&#38271;</span>&#21305;&#37197;&#12290;&#25152;&#20197; <span class="stt">xyz</span> &#25195;&#25551;&#20026;&#19968;
&#20010;&#26631;&#35782;&#31526;&#65292;&#32780;&#38750;&#19977;&#20010;&#12290;</p><p>&#25195;&#25551;&#22120;&#25214;&#21040;&#19968;&#20010;&#35789;&#29260;&#26102;&#65292;&#23427;&#36820;&#22238;&#30340;&#25968;&#25454;&#32467;&#26500;&#33267;&#23569;&#21253;&#21547;&#19979;&#21015;&#25968;&#25454;&#65306;</p><ul><li><p>&#19968;&#20010;<span class="emph">&#31867;&#21035;</span> (<span class="emph">class</span>)&#65292;&#25551;&#36848;&#35789;&#29260;&#30340;&#31181;&#31867;&#12290;&#31867;&#21035;&#30340;&#38598;&#21512;&#26159;&#35789;&#27861;&#35268;&#33539;&#30340;&#19968;&#37096;&#20998;&#12290;
SLLGEN &#20351;&#29992; Scheme &#31526;&#21495;&#21306;&#20998;&#36825;&#20123;&#31867;&#21035;&#65307;&#20854;&#20182;&#35821;&#27861;&#20998;&#26512;&#22120;&#21487;&#33021;&#20351;&#29992;&#20854;&#20182;&#25968;&#25454;&#32467;&#26500;&#12290;</p></li><li><p>&#19968;&#27573;&#25968;&#25454;&#65292;&#25551;&#36848;&#29305;&#23450;&#35789;&#29260;&#12290;&#36825;&#27573;&#25968;&#25454;&#30340;&#24615;&#36136;&#20063;&#26159;&#35789;&#27861;&#35268;&#33539;&#30340;&#19968;&#37096;&#20998;&#12290;&#22312;&#25105;&#20204;&#30340;&#31995;&#32479;
&#20013;&#65292;&#25968;&#25454;&#22914;&#19979;&#65306;&#26631;&#35782;&#31526;&#30340;&#25968;&#25454;&#26159;&#30001;&#35789;&#29260;&#23383;&#31526;&#20018;&#20135;&#29983;&#30340; Scheme &#31526;&#21495;&#65307;&#25968;&#23383;&#30340;&#25968;&#25454;&#26159;&#30001;&#25968;&#23383;
&#23383;&#38754;&#20540;&#25551;&#36848;&#30340;&#25968;&#20540;&#65307;&#23383;&#31526;&#20018;&#23383;&#38754;&#20540;&#30340;&#25968;&#25454;&#23601;&#26159;&#23383;&#31526;&#20018;&#12290;&#23383;&#31526;&#20018;&#25968;&#25454;&#29992;&#20316;&#20851;&#38190;&#23383;&#21644;&#26631;&#28857;&#12290;&#22312;
&#27809;&#26377;&#31526;&#21495;&#30340;&#23454;&#29616;&#35821;&#35328;&#20013;&#65292;&#21487;&#20197;&#25913;&#29992;&#23383;&#31526;&#20018;&#65288;&#26631;&#35782;&#31526;&#30340;&#21517;&#23383;&#65289;&#65292;&#25110;&#32773;&#20197;&#26631;&#35782;&#31526;&#20026;&#32034;&#24341;&#30340;&#21704;&#24076;
&#34920;&#65288;<span class="emph">&#31526;&#21495;&#34920;</span> (<span class="emph">symbol table</span>)&#65289;&#26465;&#30446;&#12290;</p></li><li><p>&#19968;&#27573;&#25968;&#25454;&#65292;&#25551;&#36848;&#35813;&#35789;&#29260;&#22312;&#36755;&#20837;&#20013;&#30340;&#20301;&#32622;&#12290;&#35299;&#26512;&#22120;&#29992;&#36825;&#19968;&#20449;&#24687;&#24110;&#21161;&#31243;&#24207;&#21592;&#23450;&#20301;&#35821;&#27861;&#38169;
&#35823;&#12290;</p></li></ul><p>&#36890;&#24120;&#65292;&#35789;&#29260;&#30340;&#20869;&#37096;&#32467;&#26500;&#21482;&#19982;&#25195;&#25551;&#22120;&#21644;&#35299;&#26512;&#22120;&#30456;&#20851;&#65292;&#25152;&#20197;&#25105;&#20204;&#19981;&#20877;&#35814;&#21152;&#20171;&#32461;&#12290;
<a name="(idx._(gentag._1727))"></a>
<a name="(idx._(gentag._1728))"></a></p><h4 class="heading">11.2<tt>&nbsp;</tt><a name="(part._.B..2)"></a>&#35299;&#26512;<span class="button-group"><a href="#(part._.B..2)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><a name="(idx._(gentag._1729))"></a>
&#35299;&#26512;&#36807;&#31243;&#23558;&#35789;&#29260;&#24207;&#21015;&#32452;&#32455;&#25104;&#26377;&#23618;&#27425;&#30340;&#35821;&#27861;&#32467;&#26500;&#65292;&#22914;&#34920;&#36798;&#24335;&#65292;&#35821;&#21477;&#21644;&#22359;&#12290;&#36825;&#23601;&#20687;&#29992;&#20174;&#21477;&#32452;&#32455;&#21477;
&#23376;&#12290;&#35821;&#35328;&#30340;&#35821;&#27861;&#32467;&#26500;&#36890;&#24120;&#30001; BNF &#23450;&#20041;&#65292;&#20063;&#21483;&#20570;<span class="emph">&#19978;&#19979;&#25991;&#26080;
&#20851;&#35821;&#27861;</span> (<span class="emph">context-free grammar</span>)&#65288;<a href="#%28part._s1..1..2%29" data-pltdoc="x">&#35821;&#27861;&#23450;&#20041;&#27861;</a>&#65289;&#12290;
<a name="(idx._(gentag._1730))"></a>
<a name="(idx._(gentag._1731))"></a>
<a name="(idx._(gentag._1732))"></a></p><p><div class="SIntrapara"><a name="(idx._(gentag._1733))"></a>&#35299;&#26512;&#22120;&#36755;&#20837;&#20026;&#35789;&#29260;&#24207;&#21015;&#65292;&#36755;&#20986;&#20026;&#19968;&#26869;&#25277;&#35937;&#35821;&#27861;&#26641;
&#65288;<a href="#%28part._s2..5%29" data-pltdoc="x">&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</a>&#65289;&#12290;SLLGEN &#29983;&#25104;&#30340;&#25277;&#35937;&#35821;&#27861;&#26641;&#21487;&#29992; <span class="stt">define-datatype</span> &#25551;&#36848;&#12290;
<a name="(idx._(gentag._1734))"></a>
&#23545;&#32473;&#23450;&#30340;&#35821;&#27861;&#65292;&#27599;&#20010;&#38750;&#32456;&#32467;&#31526;&#37117;&#23545;&#24212;&#19968;&#20010;&#25968;&#25454;&#31867;&#22411;&#12290;&#20197;&#27599;&#20010;&#38750;&#32456;&#32467;&#31526;&#20026;&#24038;&#36793;&#20869;&#23481;&#30340;&#29983;&#25104;&#24335;&#37117;
&#23545;&#24212;&#19968;&#20010;&#21464;&#20307;&#12290;&#24335;&#23376;&#21491;&#36793;&#20986;&#29616;&#30340;&#27599;&#20010;&#38750;&#32456;&#32467;&#31526;&#12289;&#26631;&#35782;&#31526;&#21644;&#25968;&#23383;&#37117;&#23545;&#24212;&#21464;&#20307;&#20013;&#30340;&#19968;&#20010;&#23383;&#27573;&#12290;
<a href="#%28part._s2..5%29" data-pltdoc="x">&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</a>&#26377;&#19968;&#20010;&#31616;&#21333;&#31034;&#20363;&#12290;&#24403;&#35821;&#27861;&#20013;&#26377;&#22810;&#20010;&#38750;&#32456;&#32467;&#31526;&#26102;&#65292;&#21487;&#20197;&#32771;&#34385;
{ex4.22} &#20013;&#30340;&#35821;&#27861;&#12290;
<a name="(idx._(gentag._1735))"></a>
</div><div class="SIntrapara"><blockquote class="Small"><p><span class="Iidentity">\begin{align*} \mathit{Statement} &amp;::= <span class="stt">{ </span><span class="Iidentity">\mathit{Statement}</span><span class="stt"> ; </span><span class="Iidentity">\mathit{Statement}</span><span class="stt"> }</span> \\[-3pt]
                    &amp;::= <span class="stt">while </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> do </span><span class="Iidentity">\mathit{Statement}</span> \\[-3pt]
                    &amp;::= <span class="Iidentity">\mathit{Identifier}</span><span class="stt"> := </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
\mathit{Expression} &amp;::= \mathit{Identifier} \\[-3pt]
                    &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> - </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span>\end{align*}</span></p></blockquote></div></p><p>&#36825;&#20010;&#35821;&#27861;&#20135;&#29983;&#30340;&#26641;&#30001;&#22914;&#19979;&#25968;&#25454;&#31867;&#22411;&#25551;&#36848;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">statement</span><span class="hspace">&nbsp;</span><span class="RktSym">statement?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compound-statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stmt1</span><span class="hspace">&nbsp;</span><span class="RktSym">statement?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stmt2</span><span class="hspace">&nbsp;</span><span class="RktSym">statement?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">while-statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">statement?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">assign-statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#24335;&#23376;&#21491;&#36793;&#30340;&#27599;&#20010;&#38750;&#32456;&#32467;&#31526;&#23545;&#24212;&#30340;&#26641;&#20316;&#20026;&#19968;&#20010;&#23383;&#27573;&#65307;&#26631;&#35782;&#31526;&#23545;&#24212;&#30340;&#31526;&#21495;&#20316;&#20026;&#19968;&#20010;&#23383;&#27573;&#12290;&#21464;&#20307;&#21517;
&#23383;&#22312;&#29992; SLLGEN &#20889;&#35821;&#27861;&#26102;&#25351;&#23450;&#12290;&#23383;&#27573;&#21517;&#26159;&#33258;&#21160;&#29983;&#25104;&#30340;&#65307;&#36825;&#37324;&#65292;&#25105;&#20204;&#32473;&#23383;&#27573;&#36215;&#20102;&#19968;&#20123;&#20415;&#20110;&#35760;&#24518;
&#30340;&#21517;&#23383;&#12290;&#20363;&#22914;&#65292;&#36755;&#20837;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">{x := foo; while x do x := (x - bar)}</span></p></td></tr></table></blockquote><p>&#20135;&#29983;&#36755;&#20986;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:compound-statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:assign-statement</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">foo</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:while-statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:assign-statement</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">bar</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._1736))"></a></div></p></blockquote></blockquote><h4 class="heading">11.3<tt>&nbsp;</tt><a name="(part._.B..3)"></a>SLLGEN &#20013;&#30340;&#25195;&#25551;&#22120;&#21644;&#35299;&#26512;&#22120;<span class="button-group"><a href="#(part._.B..3)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><h5 class="heading"><a name="(part._.B..3-scanners)"></a>&#23450;&#20041;&#25195;&#25551;&#22120;<span class="button-group"><a href="#(part._.B..3-scanners)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1737))"></a>
&#22312; SLLGEN &#20013;&#65292;&#25195;&#25551;&#22120;&#29992;&#27491;&#21017;&#34920;&#36798;&#24335;&#23450;&#20041;&#12290;&#25105;&#20204;&#30340;&#20363;&#23376;&#29992; SLLGEN&#65292;&#35201;&#20889;&#25104;&#19979;&#38754;&#36825;&#26679;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">scanner-spec-a</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">white-sp</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">whitespace</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">skip</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">comment</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"%"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">arbno</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">not</span><span class="hspace">&nbsp;</span><span class="RktVal">#\newline</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">skip</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">identifier</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">letter</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">arbno</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">or</span><span class="hspace">&nbsp;</span><span class="RktVal">letter</span><span class="hspace">&nbsp;</span><span class="RktVal">digit</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">symbol</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">number</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">digit</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">arbno</span><span class="hspace">&nbsp;</span><span class="RktVal">digit</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">number</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#22914;&#26524;&#25195;&#25551;&#22120;&#35201;&#21644;&#22788;&#29702;&#20851;&#38190;&#23383;&#25110;&#26631;&#28857;&#65288;&#22914; <span class="stt">while</span> &#25110; <span class="stt">=</span>&#65289;&#30340;&#35299;&#26512;&#22120;&#20849;&#29992;&#65292;&#19981;&#38656;&#35201;&#25163;
&#21160;&#23558;&#36825;&#20123;&#25918;&#20837;&#25195;&#25551;&#22120;&#20013;&#65307;&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;&#20250;&#33258;&#21160;&#28155;&#21152;&#23427;&#20204;&#12290;</p><p>SLLGEN &#20013;&#30340;&#25195;&#25551;&#22120;&#23450;&#20041;&#26159;&#28385;&#36275;&#22914;&#19979;&#35821;&#27861;&#30340;&#21015;&#34920;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}            \mathit{Scanner\mbox{-}spec} &amp;::= <span class="stt">(</span><span class="Iidentity">\{\mathit{Regexp\mbox{-}and\mbox{-}action}\}^{*}</span><span class="stt">)</span> \\[-3pt]
\mathit{Regexp\mbox{-}and\mbox{-}action} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Name}</span><span class="stt"> (</span><span class="Iidentity">\{\mathit{Regexp}\}^{*}</span><span class="stt">) </span><span class="Iidentity">\mathit{Action}</span><span class="stt">)</span> \\[-3pt]
                           \mathit{Name} &amp;::= \mathit{Symbol} \\[-3pt]
                         \mathit{Regexp} &amp;::= \mathit{String} \mid <span class="stt">letter</span> \mid <span class="stt">digit</span> \mid <span class="stt">whitespace</span> \mid <span class="stt">any</span> \\[-3pt]
                                         &amp;::= <span class="stt">(not </span><span class="Iidentity">\mathit{Character}</span><span class="stt">)</span> \mid <span class="stt">(or </span><span class="Iidentity">\{\mathit{Regexp}\}^{*}</span><span class="stt">)</span> \\[-3pt]
                                         &amp;::= <span class="stt">(arbno </span><span class="Iidentity">\mathit{Regexp}</span><span class="stt">)</span> \mid <span class="stt">(concat </span><span class="Iidentity">\{\mathit{Regexp}\}^{*}</span><span class="stt">)</span> \\[-3pt]
                         \mathit{Action} &amp;::= <span class="stt">skip</span> \mid <span class="stt">symbol</span> \mid <span class="stt">number</span> \mid <span class="stt">string</span>\end{align*}</span></p></blockquote><p>&#21015;&#34920;&#20013;&#30340;&#27599;&#19968;&#39033;&#37117;&#23450;&#20041;&#20102;&#19968;&#20010;&#27491;&#21017;&#34920;&#36798;&#24335;&#65292;&#23450;&#20041;&#21253;&#21547;&#21517;&#23383;&#12289;&#19968;&#31995;&#21015;&#27491;&#21017;&#34920;&#36798;&#24335;&#65292;&#20197;&#21450;&#21305;&#37197;&#25104;
&#21151;&#26102;&#30340;&#21160;&#20316;&#12290;&#21517;&#23383;&#26159;&#19968;&#20010; Scheme &#31526;&#21495;&#65292;&#34920;&#31034;&#35789;&#29260;&#30340;&#31867;&#21035;&#12290;</p><p>&#30001;&#20110;&#25195;&#25551;&#22120;&#20013;&#30340;&#39030;&#23618;<span class="emph">&#27491;&#21017;&#34920;&#36798;&#24335;</span> (<span class="emph">regexp</span>) &#20960;&#20046;&#24635;&#26159;&#20018;&#32852;&#32780;&#24471;&#65292;&#23450;&#20041;&#30340;&#31532;&#20108;&#37096;&#20998;&#26159;
&#19968;&#31995;&#21015;&#27491;&#21017;&#34920;&#36798;&#24335;&#12290;&#27491;&#21017;&#34920;&#36798;&#24335;&#21487;&#20197;&#26159;&#19968;&#20010;&#23383;&#31526;&#20018;&#65307;&#21487;&#20197;&#26159;&#39044;&#20808;&#23450;&#20041;&#30340;&#22235;&#20010;&#27979;&#35797;&#22120;&#20043;&#19968;&#65306;
<span class="stt">letter</span>&#65288;&#21305;&#37197;&#20219;&#20309;&#23383;&#27597;&#65289;&#65292;<span class="stt">digit</span>&#65288;&#21305;&#37197;&#20219;&#20309;&#25968;&#23383;&#65289;&#65292;<span class="stt">whitespace</span>&#65288;&#21305;&#37197;&#20219;
&#20309; Scheme &#31354;&#30333;&#23383;&#31526;&#65289;&#65292;&#20197;&#21450; <span class="stt">any</span>&#65288;&#21305;&#37197;&#20219;&#24847;&#23383;&#31526;&#65289;&#65307;&#21487;&#20197;&#26159;&#19968;&#20010;&#21435;&#21453;&#23383;&#31526;&#65307;&#20063;&#21487;&#20197;
&#26159;&#32452;&#21512;&#32780;&#24471;&#30340;&#27491;&#21017;&#34920;&#36798;&#24335;&#65292;&#37319;&#29992; Scheme &#24335;&#30340;&#35821;&#27861;&#65292;&#20197; <span class="stt">or</span> &#34920;&#31034;&#24182;&#32852;&#65292;&#20197;
<span class="stt">concat</span> &#34920;&#31034;&#20018;&#32852;&#65292;&#20197; <span class="stt">arbno</span> &#34920;&#31034;&#20811;&#33713;&#23612;&#26143;&#21495;&#12290;</p><p>&#25195;&#25551;&#22120;&#24037;&#20316;&#26102;&#65292;&#25226;&#23383;&#31526;&#25910;&#38598;&#21040;&#19968;&#20010;&#32531;&#23384;&#20013;&#12290;&#24403;&#25195;&#25551;&#22120;&#26029;&#23450;&#25214;&#20986;&#20102;&#23450;&#20041;&#20013;&#25152;&#26377;&#27491;&#21017;&#34920;&#36798;&#24335;&#30340;&#26368;
&#38271;&#21305;&#37197;&#26102;&#65292;&#23427;&#25191;&#34892;&#23545;&#24212;&#27491;&#21017;&#34920;&#36798;&#24335;&#30340;<span class="emph">&#21160;&#20316;</span>&#12290;</p><p>&#21160;&#20316;&#20026;&#19979;&#21015;&#20043;&#19968;&#65306;</p><ul><li><p>&#31526;&#21495; <span class="stt">skip</span>&#12290;&#36825;&#34920;&#31034;&#35789;&#29260;&#32467;&#26463;&#65292;&#20294;&#19981;&#20135;&#29983;&#20219;&#20309;&#35789;&#29260;&#12290;&#25195;&#25551;&#22120;&#32487;&#32493;&#22788;&#29702;&#23383;&#31526;&#20018;&#65292;
&#25214;&#20986;&#19979;&#19968;&#20010;&#35789;&#29260;&#12290;&#36825;&#19968;&#21160;&#20316;&#29992;&#20110;&#31354;&#30333;&#23383;&#31526;&#21644;&#27880;&#37322;&#12290;</p></li><li><p>&#31526;&#21495; <span class="stt">symbol</span>&#12290;&#32531;&#23384;&#20013;&#30340;&#23383;&#31526;&#36716;&#25442;&#20026;&#19968;&#20010; Scheme &#31526;&#21495;&#65292;&#24182;&#20135;&#29983;&#19968;&#20010;&#35789;&#29260;&#65292;&#20197;
&#25351;&#23450;&#31867;&#21035;&#21517;&#20026;&#20854;&#31867;&#21035;&#65292;&#20197;&#23545;&#24212;&#31526;&#21495;&#20026;&#20854;&#25968;&#25454;&#12290;</p></li><li><p>&#31526;&#21495; <span class="stt">number</span>&#12290;&#32531;&#23384;&#20013;&#30340;&#23383;&#31526;&#36716;&#25442;&#20026;&#19968;&#20010; Scheme &#25968;&#20540;&#65292;&#24182;&#20135;&#29983;&#19968;&#20010;&#35789;&#29260;&#65292;&#20197;
&#25351;&#23450;&#31867;&#21035;&#21517;&#20026;&#20854;&#31867;&#21035;&#65292;&#20197;&#23545;&#24212;&#25968;&#20540;&#20026;&#20854;&#25968;&#25454;&#12290;</p></li><li><p>&#31526;&#21495; <span class="stt">string</span>&#12290;&#32531;&#23384;&#20013;&#30340;&#23383;&#31526;&#36716;&#25442;&#20026;&#19968;&#20010; Scheme &#23383;&#31526;&#20018;&#65292;&#24182;&#20135;&#29983;&#19968;&#20010;&#35789;&#29260;&#65292;
&#20197;&#25351;&#23450;&#31867;&#21035;&#21517;&#20026;&#20854;&#31867;&#21035;&#65292;&#20197;&#23545;&#24212;&#23383;&#31526;&#20018;&#20026;&#20854;&#25968;&#25454;&#12290;</p></li></ul><p>&#22914;&#26524;&#20004;&#20010;&#27491;&#21017;&#34920;&#36798;&#24335;&#21516;&#26102;&#20026;&#26368;&#38271;&#21305;&#37197;&#65292;<span class="stt">string</span> &#20248;&#20808;&#20110; <span class="stt">symbol</span>&#12290;&#36825;&#26465;&#35268;&#21017;&#24847;&#21619;&#30528;
&#20851;&#38190;&#23383;&#20250;&#25353;&#20851;&#38190;&#23383;&#22788;&#29702;&#65292;&#32780;&#38750;&#26631;&#35782;&#31526;&#12290;
<a name="(idx._(gentag._1738))"></a></p><h5 class="heading"><a name="(part._.B..3-grammars)"></a>&#23450;&#20041;&#35821;&#27861;<span class="button-group"><a href="#(part._.B..3-grammars)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><a name="(idx._(gentag._1739))"></a>
SLLGEN &#36824;&#21253;&#21547;&#19968;&#31181;&#23450;&#20041;&#35821;&#27861;&#30340;&#35821;&#35328;&#12290;&#19978;&#38754;&#30340;&#31616;&#21333;&#35821;&#27861;&#29992; SLLGEN &#20889;&#20316;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-a1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"{"</span><span class="hspace">&nbsp;</span><span class="RktVal">statement</span><span class="hspace">&nbsp;</span><span class="RktVal">";"</span><span class="hspace">&nbsp;</span><span class="RktVal">statement</span><span class="hspace">&nbsp;</span><span class="RktVal">"}"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">compound-statement</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"while"</span><span class="hspace">&nbsp;</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">"do"</span><span class="hspace">&nbsp;</span><span class="RktVal">statement</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">while-statement</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">identifier</span><span class="hspace">&nbsp;</span><span class="RktVal">":="</span><span class="hspace">&nbsp;</span><span class="RktVal">expression</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">assign-statement</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">identifier</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">var-exp</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"("</span><span class="hspace">&nbsp;</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">"-"</span><span class="hspace">&nbsp;</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">")"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">diff-exp</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>SLLGEN &#20013;&#30340;&#35821;&#27861;&#26159;&#30001;&#19979;&#21015;&#35821;&#27861;&#25551;&#36848;&#30340;&#21015;&#34920;&#65306;</p><blockquote class="Small"><p><a name="(idx._(gentag._1740))"></a>
<span class="Iidentity">\begin{align*}          \mathit{Grammar} &amp;::= <span class="stt">(</span><span class="Iidentity">\{\mathit{Production}\}^{*}</span><span class="stt">)</span> \\[-3pt]
       \mathit{Production} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Lhs}</span><span class="stt"> (</span><span class="Iidentity">\{\mathit{Rhs\mbox{-}item}\}^{*}</span><span class="stt">) </span><span class="Iidentity">\mathit{Prod\mbox{-}name}</span><span class="stt">)</span> \\[-3pt]
             \mathit{Lhs} &amp;::= \mathit{Symbol} \\[-3pt]
 \mathit{Rhs\mbox{-}item} &amp;::= \mathit{Symbol} \mid \mathit{String} \\[-3pt]
                          &amp;::= <span class="stt">(arbno </span><span class="Iidentity">\mathit{\{Rhs\mbox{-}item\}^{*}}</span><span class="stt">)</span> \\[-3pt]
                          &amp;::= <span class="stt">(separated-list </span><span class="Iidentity">\mathit{\{Rhs\mbox{-}item\}^{*}}</span><span class="stt"> </span><span class="Iidentity">\mathit{String}</span><span class="stt">)</span> \\[-3pt]
\mathit{Prod\mbox{-}name} &amp;::= \mathit{Symbol}\end{align*}</span></p></blockquote><p>&#35821;&#27861;&#26159;&#29983;&#25104;&#24335;&#21015;&#34920;&#12290;&#31532;&#19968;&#20010;&#29983;&#25104;&#24335;&#30340;&#24038;&#36793;&#26159;&#35821;&#27861;&#30340;&#36215;&#22987;&#31526;&#21495;&#12290;&#27599;&#20010;&#29983;&#25104;&#24335;&#21253;&#21547;&#24038;&#36793;&#65288;&#19968;&#20010;&#38750;
&#32456;&#32467;&#31526;&#21495;&#65289;&#12289;&#21491;&#36793;&#65288;<span class="texMathInline">rhs\mbox{-}item</span> &#30340;&#21015;&#34920;&#65289;&#65292;&#20197;&#21450;&#29983;&#25104;&#24335;&#21517;&#23383;&#12290;&#29983;&#25104;&#24335;&#30340;&#21491;&#36793;&#26159;&#31526;
&#21495;&#25110;&#32773;&#23383;&#31526;&#20018;&#21015;&#34920;&#12290;&#31526;&#21495;&#26159;&#38750;&#32456;&#32467;&#31526;&#65307;&#23383;&#31526;&#20018;&#26159;&#23383;&#31526;&#20018;&#23383;&#38754;&#20540;&#12290;&#24335;&#23376;&#21491;&#36793;&#20063;&#21487;&#20197;&#21253;&#21547;
<span class="stt">arbno</span> &#25110; <span class="stt">separated-list</span>&#65307;&#36825;&#20123;&#30041;&#24453;&#19979;&#38754;&#35752;&#35770;&#12290;&#29983;&#25104;&#24335;&#30340;&#21517;&#23383;&#26159;&#19968;&#20010;&#31526;&#21495;&#65292;&#25104;
&#20026; <span class="stt">define-datatype</span> &#20013;&#23545;&#24212;&#29983;&#25104;&#24335;&#30340;&#21464;&#20307;&#21517;&#12290;</p><p>&#22312; SLLGEN &#20013;&#65292;&#35299;&#26512;&#22120;&#24517;&#39035;&#22312;&#20165;&#33719;&#30693;&#20197;&#19979;&#20869;&#23481;&#30340;&#26465;&#20214;&#19979;&#65292;&#36890;&#36807;&#35821;&#27861;&#26029;&#23450;&#29983;&#25104;&#24335;&#65306;(1) &#27491;&#22312;&#23547;
&#25214;&#21738;&#19968;&#38750;&#32456;&#32467;&#31526;&#65292;(2) &#27491;&#22312;&#35299;&#26512;&#30340;&#23383;&#31526;&#20018;&#20013;&#30340;&#39318;&#20010;&#31526;&#21495;&#65288;&#35789;&#29260;&#65289;&#12290;&#36825;&#31181;&#24418;&#24335;&#30340;&#35821;&#27861;&#21483;&#20570;
<span class="texMathInline">LL(1)</span> &#35821;&#27861;&#65307;SLLGEN &#34920;&#31034; Scheme <span class="texMathInline">LL(1)</span> &#35299;&#26512;&#22120;<span style="font-weight: bold">&#29983;&#25104;</span>&#22120;&#65288;Scheme
<span class="texMathInline">LL(1)</span> parser GENerator&#65289;&#12290;&#22312;&#23454;&#36341;&#20013;&#65292;&#36825;&#26377;&#20123;&#36807;&#20110;&#20005;&#26684;&#20102;&#65292;&#20294;&#36275;&#20197;&#24212;&#20184;&#26412;&#20070;&#38656;&#35201;&#12290;&#22914;
&#26524;&#36755;&#20837;&#35821;&#27861;&#19981;&#28385;&#36275;&#36825;&#19968;&#26465;&#20214;&#65292;SLLGEN &#20250;&#32473;&#20986;&#19968;&#26465;&#35686;&#21578;&#12290;</p><h5 class="heading"><a name="(part._.B..3-operations)"></a>SLLGEN&#30340;&#25805;&#20316;<span class="button-group"><a href="#(part._.B..3-operations)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p>SLLGEN &#21253;&#21547;&#20960;&#20010;&#36807;&#31243;&#65292;&#23558;&#25195;&#25551;&#22120;&#21644;&#35821;&#27861;&#32467;&#21512;&#36215;&#26469;&#65292;&#24418;&#25104;&#21487;&#20197;&#25191;&#34892;&#30340;&#35299;&#26512;&#22120;&#12290;
 &#23637;&#31034;&#20102;&#29992; SLLGEN &#23450;&#20041;&#35821;&#35328;&#25195;&#25551;&#22120;&#21644;&#35299;&#26512;&#22120;&#30340;&#20363;&#23376;&#12290;</p><p>&#36807;&#31243; <span class="stt">sllgen:make-define-datatypes</span> &#36127;&#36131;&#20026;&#35821;&#27861;&#30340;&#27599;&#20010;&#29983;&#25104;&#24335;&#20135;&#29983;&#19968;&#20010;
<span class="stt">define-datatype</span> &#34920;&#36798;&#24335;&#65292;&#20379; <span class="stt">cases</span> &#20351;&#29992;&#12290;&#36807;&#31243;
<span class="stt">sllgen:list-define-datatypes</span> &#20063;&#29983;&#25104; <span class="stt">define-datatype</span> &#34920;&#36798;&#24335;&#65292;&#20294;&#26159;&#20250;&#20197;&#21015;
&#34920;&#24418;&#24335;&#36820;&#22238;&#65292;&#32780;&#38750;&#25191;&#34892;&#23427;&#20204;&#12290;&#30001;&#36825;&#20123;&#36807;&#31243;&#29983;&#25104;&#30340;&#23383;&#27573;&#21517;&#19981;&#22815;&#30452;&#35266;&#65292;&#22240;&#20026;&#35821;&#27861;&#20013;&#27809;&#26377;&#36825;&#20123;&#20449;&#24687;&#65307;
&#35201;&#24471;&#21040;&#26356;&#22909;&#30340;&#23383;&#27573;&#21517;&#65292;&#38656;&#35201;&#20889;&#20986; <span class="stt">define-datatype</span>&#12290;</p><p>&#36807;&#31243; <span class="stt">sllgen:make-string-scanner</span> &#21462;&#19968;&#25195;&#25551;&#22120;&#21644;&#19968;&#35821;&#27861;&#65292;&#29983;&#25104;&#19968;&#20010;&#25195;&#25551;&#36807;&#31243;&#12290;&#24471;&#20986;
&#30340;&#36807;&#31243;&#21487;&#20197;&#22788;&#29702;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#24471;&#21040;&#19968;&#20010;&#35789;&#29260;&#21015;&#34920;&#12290;&#35821;&#27861;&#29992;&#26469;&#32473;&#24471;&#21040;&#30340;&#25195;&#25551;&#36807;&#31243;&#28155;&#21152;&#20851;&#38190;&#23383;&#12290;
&#36825;&#19968;&#36807;&#31243;&#20027;&#35201;&#29992;&#20110;&#35843;&#35797;&#12290;</p><p>&#36807;&#31243; <span class="stt">sllgen:make-string-parser</span> &#29983;&#25104;&#19968;&#20010;&#35299;&#26512;&#22120;&#12290;&#35299;&#26512;&#22120;&#26159;&#19968;&#36807;&#31243;&#65292;&#23427;&#21462;&#19968;&#23383;&#31526;&#20018;&#65292;
&#29992;&#25195;&#25551;&#22120;&#25195;&#25551;&#23427;&#65292;&#29992;&#35821;&#27861;&#35299;&#26512;&#23427;&#65292;&#28982;&#21518;&#36820;&#22238;&#19968;&#26869;&#25277;&#35937;&#35821;&#27861;&#26641;&#12290;&#20687;
<span class="stt">sllgen:make-string-scanner</span> &#19968;&#26679;&#65292;&#35821;&#27861;&#20013;&#30340;&#23383;&#31526;&#20018;&#23383;&#38754;&#20540;&#21253;&#21547;&#22312;&#25195;&#25551;&#22120;&#20013;&#12290;</p><p>SLLGEN &#20063;&#21487;&#20197;&#29992;&#26469;&#29983;&#25104;&#35835;&#20837;-&#27714;&#20540;-&#25171;&#21360;&#24490;&#29615;&#65288;<a href="#%28part._s3..1%29" data-pltdoc="x">&#35268;&#33539;&#21644;&#23454;&#29616;&#31574;&#30053;</a>&#65289;&#12290;&#36807;&#31243;
<span class="stt">sllgen:make-stream-parser</span> &#19982;&#23383;&#31526;&#20018;&#29256;&#26412;&#31867;&#20284;&#65292;&#20294;&#26159;&#23427;&#30340;&#36755;&#20837;&#26159;&#23383;&#31526;&#27969;&#65292;&#36755;&#20986;&#26159;&#35789;
&#29260;&#27969;&#12290;&#36807;&#31243; <span class="stt">sllgen:make-rep-loop</span> &#21462;&#19968;&#23383;&#31526;&#20018;&#65292;&#19968;&#20010;&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#19968;&#20010;&#27969;&#24335;&#35299;&#26512;&#22120;&#65292;
&#29983;&#25104;&#19968;&#20010;&#35835;&#20837;-&#27714;&#20540;-&#25171;&#21360;&#24490;&#29615;&#65292;&#20197;&#25351;&#23450;&#23383;&#31526;&#20018;&#20026;&#26631;&#20934;&#36755;&#20986;&#20013;&#30340;&#25552;&#31034;&#31526;&#65292;&#20174;&#26631;&#20934;&#36755;&#20837;&#35835;&#20837;&#23383;&#31526;&#65292;
&#35299;&#26512;&#23427;&#20204;&#65292;&#28982;&#21518;&#20197;&#25351;&#23450;&#36807;&#31243;&#22788;&#29702;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#23558;&#32467;&#26524;&#25171;&#21360;&#20986;&#26469;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">scanner-spec-1</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-1</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">sllgen:make-define-datatypes</span><span class="hspace">&nbsp;</span><span class="RktSym">scanner-spec-1</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">list-the-datatypes</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sllgen:list-define-datatypes</span><span class="hspace">&nbsp;</span><span class="RktSym">scanner-spec-1</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">just-scan</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sllgen:make-string-scanner</span><span class="hspace">&nbsp;</span><span class="RktSym">scanner-spec-1</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">scan&amp;parse</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sllgen:make-string-parser</span><span class="hspace">&nbsp;</span><span class="RktSym">scanner-spec-1</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">read-eval-print</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sllgen:make-rep-loop</span><span class="hspace">&nbsp;</span><span class="RktVal">"--&gt; "</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of--program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sllgen:make-stream-parser</span><span class="hspace">&nbsp;</span><span class="RktSym">scanner-spec-1</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#20351;&#29992; SLLGEN<a name="(elem._fig-.B..2)"></a></p></blockquote></blockquote><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (define read-eval-print</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(sllgen:make-rep-loop "--&gt; " eval-program</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(sllgen:make-stream-parser</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">scanner-spec-3-1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">grammar-3-1)))</span></p></td></tr><tr><td><p><span class="stt">&gt; (read-eval-print)</span></p></td></tr><tr><td><p><span class="stt">--&gt; 5</span></p></td></tr><tr><td><p><span class="stt">5</span></p></td></tr><tr><td><p><span class="stt">--&gt; add1(2)</span></p></td></tr><tr><td><p><span class="stt">3</span></p></td></tr><tr><td><p><span class="stt">--&gt; +(add1(2),-(6,4))</span></p></td></tr><tr><td><p><span class="stt">5</span></p></td></tr></table></blockquote><p>&#25511;&#21046;&#27969;&#31243;&#20174;&#36825;&#19968;&#24490;&#29615;&#36820;&#22238; Scheme &#35835;&#20837;-&#27714;&#20540;-&#25171;&#21360;&#24490;&#29615;&#30340;&#26041;&#24335;&#30001;&#31995;&#32479;&#20915;&#23450;&#12290;</p><h5 class="heading"><a name="(part._.B..3-arbno)"></a><span class="stt">arbno</span>
&#21644; <span class="stt">separated-list</span> &#27169;&#26495;&#20851;&#38190;&#23383;<span class="button-group"><a href="#(part._.B..3-arbno)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h5><p><div class="SIntrapara"><span class="stt">arbno</span> &#20851;&#38190;&#23383;&#21363;&#35821;&#27861;&#20013;&#30340;&#20811;&#33713;&#23612;&#26143;&#21495;&#65306;&#23427;&#21305;&#37197;&#37325;&#22797;&#20219;&#24847;&#27425;&#25968;&#30340;&#26465;&#30446;&#12290;&#20363;&#22914;&#65292;&#29983;&#25104;&#24335;
</div><div class="SIntrapara"><blockquote class="Small"><p><span class="texMathDisplay">\mathit{statement} ::= <span class="stt">{ </span><span class="texMathInline">\{statement <span class="stt">;</span>\}^{*}</span><span class="stt"> }</span></span></p></blockquote></div><div class="SIntrapara"><blockquote class="SubFlow"><p>&#22312; SLLGEN &#20013;&#21487;&#20889;&#20316;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-a2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"{"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">arbno</span><span class="hspace">&nbsp;</span><span class="RktVal">statement</span><span class="hspace">&nbsp;</span><span class="RktVal">";"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"}"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">compound-statement</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#21305;&#37197;&#19968;&#26465;&#22797;&#21512;&#35821;&#21477;&#65292;&#30001;&#20219;&#24847;&#25968;&#37327;&#20998;&#21495;&#20998;&#38548;&#30340;&#35821;&#21477;&#24207;&#21015;&#32452;&#25104;&#12290;</p></blockquote></div></p><p><span class="stt">arbno</span> &#22312;&#25277;&#35937;&#35821;&#27861;&#26641;&#20013;&#23545;&#24212;&#21333;&#20010;&#23383;&#27573;&#12290;&#35813;&#23383;&#27573;&#21253;&#21547;&#19968;&#20010;<span class="emph">&#21015;&#34920;</span>&#65292;&#30001; <span class="stt">arbno</span>
&#20869;&#30340;&#38750;&#32456;&#32467;&#31526;&#25968;&#25454;&#32452;&#25104;&#12290;&#25105;&#20204;&#30340;&#20363;&#23376;&#29983;&#25104;&#22914;&#19979;&#25968;&#25454;&#31867;&#22411;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">statement</span><span class="hspace">&nbsp;</span><span class="RktSym">statement?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compound-statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compound-statement32</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">statement?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#31616;&#21333;&#20132;&#20114;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (define scan&amp;parse2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(sllgen:make-string-parser scanner-spec-a grammar-a2))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&gt; (scan&amp;parse2 "{x := foo; y := bar; z := uu;}")</span></p></td></tr><tr><td><p><span class="stt">(compound-statement</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((assign-statement x (var-exp foo))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(assign-statement y (var-exp bar))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(assign-statement z (var-exp uu))))</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#21487;&#20197;&#25226;&#38750;&#32456;&#32467;&#31526;&#24207;&#21015;&#25918;&#20837; <span class="stt">arbno</span> &#20013;&#12290;&#36825;&#26102;&#65292;&#33410;&#28857;&#20013;&#20250;&#26377;&#22810;&#20010;&#23383;&#27573;&#65292;&#27599;&#20010;&#23545;&#24212;&#19968;&#20010;
&#38750;&#32456;&#32467;&#31526;&#65307;&#27599;&#20010;&#23383;&#27573;&#21253;&#21547;&#19968;&#20010;&#35821;&#27861;&#26641;&#21015;&#34920;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-a3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">identifier</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">var-exp</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"let"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">arbno</span><span class="hspace">&nbsp;</span><span class="RktVal">identifier</span><span class="hspace">&nbsp;</span><span class="RktVal">"="</span><span class="hspace">&nbsp;</span><span class="RktVal">expression</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"in"</span><span class="hspace">&nbsp;</span><span class="RktVal">expression</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">let-exp</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">scan&amp;parse3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sllgen:make-string-parser</span><span class="hspace">&nbsp;</span><span class="RktSym">scanner-spec-a</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-a3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#29983;&#25104;&#25968;&#25454;&#31867;&#22411;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp4</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp9</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp7</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp8</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#26159;&#36816;&#29992;&#35813;&#35821;&#27861;&#30340;&#20363;&#23376;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (scan&amp;parse3 "let x = y u = v in z")</span></p></td></tr><tr><td><p><span class="stt">(let-exp</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(x u)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((var-exp y) (var-exp v))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(var-exp z))</span></p></td></tr></table></blockquote><p>&#23450;&#20041; <span class="stt">(arbno identifier "=" expression)</span> &#29983;&#25104;&#20004;&#20010;&#21015;&#34920;&#65306;&#26631;&#35782;&#31526;&#21015;&#34920;&#21644;&#34920;&#36798;&#24335;&#21015;&#34920;&#12290;
&#36825;&#24456;&#26041;&#20415;&#65292;&#22240;&#20026;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#33021;&#30452;&#25509;&#20174;&#20013;&#21462;&#20986;&#19968;&#37096;&#20998;&#34920;&#36798;&#24335;&#12290;</p></blockquote><p>&#23545;&#26576;&#20123;&#35821;&#35328;&#30340;&#35821;&#27861;&#65292;&#22312;&#21015;&#34920;&#20013;&#21482;&#29992;&#20998;&#38548;&#31526;&#65292;&#32780;&#19981;&#29992;&#32467;&#26463;&#31526;&#20250;&#26356;&#26041;&#20415;&#12290;&#36825;&#21313;&#20998;&#24120;&#35265;&#65292;&#22240;&#27492;
SLLGEN &#20869;&#32622;&#36825;&#31181;&#25805;&#20316;&#12290;&#25105;&#20204;&#21487;&#20197;&#20889;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-a4</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"{"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">separated-list</span><span class="hspace">&nbsp;</span><span class="RktVal">statement</span><span class="hspace">&nbsp;</span><span class="RktVal">";"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"}"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">compound-statement</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">...</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23427;&#29983;&#25104;&#25968;&#25454;&#31867;&#22411;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">statement</span><span class="hspace">&nbsp;</span><span class="RktSym">statement?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compound-statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compound-statement103</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">statement?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#26159;&#31616;&#21333;&#20132;&#20114;&#30340;&#20363;&#23376;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (define scan&amp;parse4</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(sllgen:make-string-parser scanner-spec-a grammar-a4))</span></p></td></tr><tr><td><p><span class="stt">&gt; (scan&amp;parse4 "{}")</span></p></td></tr><tr><td><p><span class="stt">(compound-statement ())</span></p></td></tr><tr><td><p><span class="stt">&gt; (scan&amp;parse4 "{x:= y; u := v ; z := t}")</span></p></td></tr><tr><td><p><span class="stt">(compound-statement</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((assign-statement x (var-exp y))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(assign-statement u (var-exp v))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(assign-statement z (var-exp t))))</span></p></td></tr><tr><td><p><span class="stt">&gt; (scan&amp;parse4 "{x:= y; u := v ; z := t ;}")</span></p></td></tr><tr><td><p><span class="stt">Error in parsing: at line 1</span></p></td></tr><tr><td><p><span class="stt">Nonterminal &lt;seplist3&gt; can&#8217;t begin with string "}"</span></p></td></tr></table></blockquote><p>&#22312;&#26412;&#20363;&#20013;&#65292;&#36755;&#20837;&#23383;&#31526;&#20018;&#32467;&#23614;&#26377;&#19968;&#20010;&#20998;&#21495;&#65292;&#19982;&#35821;&#27861;&#19981;&#31526;&#65292;&#25152;&#20197;&#25253;&#38169;&#12290;</p></blockquote><p>&#31867;&#20284;&#20110; <span class="stt">arbno</span>&#65292;&#25105;&#20204;&#21487;&#20197;&#22312; <span class="stt">separated-list</span> &#20851;&#38190;&#23383;&#20013;&#25918;&#32622;&#20219;&#24847;&#38750;&#32456;&#32467;&#31526;&#24207;&#21015;&#12290;
&#36825;&#26102;&#65292;&#33410;&#28857;&#20013;&#20250;&#26377;&#22810;&#20010;&#23383;&#27573;&#65292;&#27599;&#20010;&#23545;&#24212;&#19968;&#20010;&#38750;&#32456;&#32467;&#31526;&#65307;&#27599;&#20010;&#23383;&#27573;&#21253;&#21547;&#19968;&#20010;&#35821;&#27861;&#26641;&#21015;&#34920;&#12290;&#36825;&#21644;
<span class="stt">arbno</span> &#29983;&#25104;&#30340;&#25968;&#25454;&#23436;&#20840;&#30456;&#21516;&#65307;&#19981;&#21516;&#30340;&#21482;&#26159;&#20855;&#20307;&#35821;&#27861;&#12290;</p><p>&#25105;&#20204;&#20598;&#23572;&#20250;&#23884;&#22871; <span class="stt">arbno</span> &#21644; <span class="stt">separated-list</span>&#12290;<span class="stt">arbno</span> &#20869;&#30340;&#38750;&#32456;&#32467;&#31526;&#29983;&#25104;&#19968;
&#20010;&#21015;&#34920;&#65292;&#25152;&#20197; <span class="stt">arbno</span> &#20869;&#30340; <span class="stt">arbno</span> &#20869;&#30340;&#38750;&#32456;&#32467;&#31526;&#29983;&#25104;&#21015;&#34920;&#30340;&#21015;&#34920;&#12290;</p><p>&#20030;&#20010;&#20363;&#23376;&#65292;&#32771;&#34385;&#19982; <span class="stt">grammar-a4</span> &#31867;&#20284;&#30340; <span class="stt">compound-statement</span>&#65292;&#20294;&#23427;&#25903;&#25345;&#22810;&#36171;&#20540;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">grammar-a5</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">"{"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">separated-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">separated-list</span><span class="hspace">&nbsp;</span><span class="RktVal">identifier</span><span class="hspace">&nbsp;</span><span class="RktVal">","</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">":="</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">separated-list</span><span class="hspace">&nbsp;</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">","</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">";"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"}"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">compound-statement</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">number</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">lit-exp</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">identifier</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">var-exp</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (define scan&amp;parse5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(sllgen:make-string-parser scanner-spec-a grammar-a5))</span></p></td></tr></table></blockquote><p>&#23427;&#20026; <span class="stt">statement</span> &#29983;&#25104;&#22914;&#19979;&#25968;&#25454;&#31867;&#22411;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">statement</span><span class="hspace">&nbsp;</span><span class="RktSym">statement?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compound-statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compound-statement4</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">compound-statement3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#19968;&#33324;&#30340;&#20132;&#20114;&#22914;&#19979;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&gt; (scan&amp;parse5 "{x,y := u,v ; z := 4; t1, t2 := 5, 6}")</span></p></td></tr><tr><td><p><span class="stt">(compound-statement</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((x y) (z) (t1 t2))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(((var-exp u) (var-exp v))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">((lit-exp 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">((lit-exp 5) (lit-exp 6))))</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;<span class="stt">compound-statement</span> &#26377;&#20004;&#20010;&#23383;&#27573;&#65306;&#26631;&#35782;&#31526;&#21015;&#34920;&#30340;&#21015;&#34920;&#65292;&#23545;&#24212;&#30340;&#34920;&#36798;&#24335;&#21015;&#34920;&#30340;&#21015;
&#34920;&#12290;&#26412;&#20363;&#20013;&#65292;&#25105;&#20204;&#29992; <span class="stt">separated-list</span> &#20195;&#26367;&#20102; <span class="stt">arbno</span>&#65292;&#20294;&#26159; <span class="stt">arbno</span> &#20063;&#20250;&#29983;
&#25104;&#21516;&#26679;&#30340;&#25968;&#25454;&#12290;
<a name="(idx._(gentag._1741))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex.B..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19979;&#21015;&#35821;&#27861;&#25353;&#29031;&#36890;&#24120;&#30340;&#31639;&#26415;&#25805;&#20316;&#31526;&#20248;&#20808;&#32423;&#65292;&#23450;&#20041;&#20102;&#31639;&#26415;&#25805;&#20316;&#34920;&#36798;&#24335;&#65306;</p><p><span class="Iidentity">\begin{align*}        \mathit{Arith\mbox{-}expr} &amp;::= \mathit{Arith\mbox{-}term} \ \{\mathit{Additive\mbox{-}op}\ \mathit{Arith\mbox{-}term}\}^{*} \\[-3pt]
       \mathit{Arith\mbox{-}term} &amp;::= \mathit{Arith\mbox{-}factor} \ \{\mathit{Multiplicative\mbox{-}op}\ \mathit{Arith\mbox{-}factor}\}^{*} \\[-3pt]
     \mathit{Arith\mbox{-}factor} &amp;::= \mathit{Number} \\[-3pt]
                                  &amp;::= <span class="stt">( </span><span class="Iidentity">\mathit{Arith\mbox{-}expr}</span><span class="stt"> )</span> \\[-3pt]
     \mathit{Additive\mbox{-}op} &amp;::= <span class="stt">+</span> \mid <span class="stt">-</span> \\[-3pt]
\mathit{Multiplicative\mbox{-}op} &amp;::= <span class="stt">*</span> \mid <span class="stt">/</span>\end{align*}</span></p><p>&#36825;&#22871;&#35821;&#27861;&#26159;&#35828;&#65292;&#27599;&#20010;&#31639;&#26415;&#34920;&#36798;&#24335;&#37117;&#26159;&#38750;&#31354;&#39033;&#24207;&#21015;&#30340;&#21644;&#65307;&#27599;&#19968;&#39033;&#37117;&#26159;&#38750;&#31354;&#22240;&#25968;&#24207;&#21015;&#30340;&#29983;&#25104;&#24335;&#65307;
&#27599;&#20010;&#22240;&#25968;&#26159;&#19968;&#20010;&#24120;&#25968;&#25110;&#32773;&#25324;&#21495;&#34920;&#36798;&#24335;&#12290;</p><p>&#29992; SLLGEN &#20889;&#20986;&#35789;&#27861;&#35268;&#33539;&#21644;&#35821;&#27861;&#65292;&#26681;&#25454;&#36825;&#22871;&#35821;&#27861;&#36827;&#34892;&#25195;&#25551;&#21644;&#35299;&#26512;&#12290;&#39564;&#35777;&#36825;&#22871;&#35821;&#27861;&#33021;&#27491;&#30830;&#22788;&#29702;
&#20248;&#20808;&#32423;&#65292;&#37027;&#20040;&#65292;<span class="stt">3+2*66-5</span> &#33021;&#27491;&#30830;&#20998;&#32452;&#20026; <span class="texMathInline">3 + (2 \times 66) - 5</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex.B..2)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19978;&#38754;&#30340;&#35821;&#27861;&#20026;&#20160;&#20040;&#19981;&#33021;&#20889;&#25104; <span class="stt">separated-list</span>&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex.B..3)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#23450;&#20041;&#19968;&#20010;&#35299;&#37322;&#22120;&#65292;&#21462;{exB.1} &#20013;&#35299;&#26512;&#22120;&#29983;&#25104;&#30340;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#23558;&#20854;&#24403;&#20316;&#31639;&#26415;&#34920;
&#36798;&#24335;&#27714;&#20540;&#12290;&#35299;&#26512;&#22120;&#22788;&#29702;&#36890;&#24120;&#30340;&#31639;&#26415;&#25805;&#20316;&#20248;&#20808;&#32423;&#65307;&#20294;&#35299;&#37322;&#22120;&#35201;&#22788;&#29702;&#20851;&#32852;&#24615;&#65292;&#21363;&#65292;&#30830;&#20445;&#21516;&#19968;&#20248;&#20808;
&#32423;&#65288;&#27604;&#22914;&#21152;&#21644;&#20943;&#65289;&#30340;&#25805;&#20316;&#20174;&#24038;&#21521;&#21491;&#36827;&#34892;&#12290;&#30001;&#20110;&#36825;&#20123;&#34920;&#36798;&#24335;&#20013;&#27809;&#26377;&#21464;&#37327;&#65292;&#35299;&#37322;&#22120;&#19981;&#38656;&#35201;&#21462;&#29615;&#22659;
&#21442;&#25968;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex.B..4)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#21069;&#19968;&#36947;&#32451;&#20064;&#20013;&#30340;&#35821;&#35328;&#21644;&#35299;&#37322;&#22120;&#65292;&#21152;&#20837;&#21464;&#37327;&#12290;&#36825;&#20010;&#26032;&#35299;&#37322;&#22120;&#38656;&#35201;&#29615;&#22659;&#21442;&#25968;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex.B..5)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#35821;&#35328;&#21644;&#35299;&#37322;&#22120;&#28155;&#21152;&#21333;&#21442;&#25968;&#25805;&#20316;&#21462;&#21453;&#65292;&#20351;&#20043;&#33021;&#27491;&#30830;&#22788;&#29702;&#36755;&#20837; <span class="stt">3*-2</span>&#12290;</p></blockquote><h3 class="heading"><a name="(part._bib)"></a>&#21442;&#32771;&#20070;&#30446;<span class="button-group"><a href="#(part._bib)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><blockquote class="BibPara"><p><a name="(idx._(gentag._1742))"></a>Abadi, Mart&#237;n, &amp; <a name="(idx._(gentag._1743))"></a>Cardelli, Luca. 1996. <span class="emph">A Theory of Objects</span>. Berlin, Heidelberg,
and New York: Springer-Verlag.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1744))"></a>Abelson, Harold, &amp; <a name="(idx._(gentag._1745))"></a>Sussman, Gerald Jay. 1985. <span class="emph">The Structure and Interpretation
of Computer Programs</span>. Cambridge, MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1746))"></a>Abelson, Harold, &amp; <a name="(idx._(gentag._1747))"></a>Sussman, Gerald Jay. 1996. <span class="emph">Structure and Interpretation of
Computer Programs</span>. Second edition. Cambridge, MA: McGraw Hill.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1748))"></a>Aho, Alfred V., <a name="(idx._(gentag._1749))"></a>Lam, Monica S., <a name="(idx._(gentag._1750))"></a>Sethi, Ravi, &amp; <a name="(idx._(gentag._1751))"></a>Ullman, Jeffrey
D. 2006. <span class="emph">Compilers: Principles, Techniques, and Tools</span>. Second edition. Boston:
Addison-Wesley Longman.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1752))"></a>Appel, Andrew W., &amp; <a name="(idx._(gentag._1753))"></a>Jim, Trevor. 1989. <span class="emph">Continuation-Passing, Closure-Passing
Style</span>. Pages 293&#8211;302 of: Proceedings ACM Symposium on Principles of Programming
Languages.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1754))"></a>Arnold, Ken, &amp; <a name="(idx._(gentag._1755))"></a>Gosling, James. 1998. <span class="emph">The Java Programming Language</span>. Second
edition. The Java Series. Reading, MA: Addison-Wesley.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1756))"></a>Armstrong, Joe. 2007. <span class="emph">Programming Erlang: Software for a Concurrent World</span>. The
Pragmatic Programmers Publishers.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1757))"></a>Backus, John W., <span class="emph">et al</span>. 1957. <span class="emph">The Fortran Automatic Coding System</span>. Pages 188&#8211;198
of: Western Joint Computer Conference.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1758))"></a>Barendregt, Henk P. 1981. <span class="emph">The Lambda Calculus: Its Syntax and
Semantics</span>. Amsterdam: North-Holland.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1759))"></a>Barendregt, Henk P. 1991. <span class="emph">The Lambda Calculus</span>. Revised edition. Studies in Logic
and the Foundations of Mathematics, no. 103. Amsterdam: North-Holland.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1760))"></a>Bergin, Thomas J., &amp; <a name="(idx._(gentag._1761))"></a>Gibson, Richard G. (eds.). 1996. <span class="emph">History of Programming
Languages</span>. New York: Addison-Wesley.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1762))"></a>Birtwistle, Graham M., <a name="(idx._(gentag._1763))"></a>Dahl, Ole-Johan, &amp; <a name="(idx._(gentag._1764))"></a>Myhrhaug, Bjorn. 1973. <span class="emph">Simula Begin</span>.
Philadelphia: Auerbach.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1765))"></a>Burstall, Rod M. 1969. <span class="emph">Proving Properties of Programs by Structural
Induction</span>. Computer Journal, <span style="font-weight: bold">12</span>(1), 41&#8211;48.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1766))"></a>Church, Alonzo. 1941. <span class="emph">The Calculi of Lambda Conversion</span>. Princeton, NJ: Princeton
University Press. Reprinted 1963 by University Microfilms, Ann Arbor, MI.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1767))"></a>Clinger, William D., <span class="emph">et al</span>. 1985a. The Revised Revised Report on Scheme or The
Uncommon Lisp. Technical Memo AIM-848. Massachusetts Institute of Technology,
Artificial Intelligence Laboratory.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1768))"></a>Clinger, William D., <a name="(idx._(gentag._1769))"></a>Friedman, Daniel P., &amp; <a name="(idx._(gentag._1770))"></a>Wand, Mitchell. 1985b. A Scheme for
a Higher-Level Semantic Algebra. Pages 237&#8211;250 of: Reynolds, John, &amp; Nivat,
Maurice (eds.), <span class="emph">Algebraic Methods in Semantics: Proceedings of the US-French
Seminar on the Application of Algebra to Language Definition and Compilation
(Fontainebleau, France, June, 1982)</span>. Cambridge: Cambridge University Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1771))"></a>Clinger, William D., <a name="(idx._(gentag._1772))"></a>Rees, Jonathan, <span class="emph">et al</span>. 1991. The Revised<span style="vertical-align: super; font-size: 80%">4</span> Report on the
Algorithmic Language Scheme. <span class="emph">ACM Lisp Pointers</span>, <span style="font-weight: bold">4</span>(3), 1&#8211;55.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1773))"></a>Danvy, Olivier, &amp; <a name="(idx._(gentag._1774))"></a>Filinski, Andrzej. 1992. Representing Control: A Study of the
CPS Transformation. <span class="emph">Mathematical Structures in Computer Science</span>, <span style="font-weight: bold">2</span>(4), 361&#8211;391.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1775))"></a>Danvy, Olivier, &amp; <a name="(idx._(gentag._1776))"></a>Nielsen, Lasse R. 2003. A First-order One-pass CPS
Transformation. <span class="emph">Theoretical Computer Science</span>, <span style="font-weight: bold">308</span>(1-3), 239&#8211;257.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1777))"></a>de Bruijn, N. G. 1972. Lambda Calculus Notation with Nameless Dummies: A Tool
for Automatic FormulaManipulation, with Application to the Church-Rosser
Theorem. <span class="emph">Indagationes Mathematicae</span>, <span style="font-weight: bold">34</span>, 381&#8211;392.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1778))"></a>Dominus, Mark Jason. 2005. <span class="emph">Higher-Order Perl: Transforming Programs with
Programs</span>. San Francisco: Morgan Kaufmann Publishers.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1779))"></a>Dybvig, R. Kent. 2003. <span class="emph">The Scheme Programming Language</span>. Third
edition. Cambridge, MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1780))"></a>Felleisen, Matthias, &amp; <a name="(idx._(gentag._1781))"></a>Friedman, Daniel P. 1996. <span class="emph">The Little MLer</span>. Cambridge, MA:
MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1782))"></a>Felleisen, Matthias, <a name="(idx._(gentag._1783))"></a>Findler, Robert Bruce, <a name="(idx._(gentag._1784))"></a>Flatt, Matthew, &amp; <a name="(idx._(gentag._1785))"></a>Krishnamurthi,
Shriram. 2001. <span class="emph">How to Design Programs</span>. Cambridge, MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1786))"></a>Fischer, Michael J. 1972. Lambda-Calculus Schemata. Pages 104&#8211;109 of:
<span class="emph">Proceedings ACM Conference on Proving Assertions about Programs</span>. Republished in
Lisp and Symbolic Computation, <span style="font-weight: bold">6</span>(3/4), 259&#8211;288.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1787))"></a>Flanagan, Cormac, <a name="(idx._(gentag._1788))"></a>Sabry, Amr, <a name="(idx._(gentag._1789))"></a>Duba, Bruce F., &amp; <a name="(idx._(gentag._1790))"></a>Felleisen, Matthias. 1993. The
Essence of Compiling with Continuations. Pages 237&#8211;247 of: <span class="emph">Proceedings ACM
SIGPLAN 1993 Conf. on Programming Language Design and Implementation, PLDI&#8217;93,
Albuquerque, NM, USA, 23&#8211;25 June 1993</span>, vol. <span style="font-weight: bold">28</span>(6). New York: ACM Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1791))"></a>Flatt, Matthew, <a name="(idx._(gentag._1792))"></a>Krishnamurthi, Shriram, &amp; <a name="(idx._(gentag._1793))"></a>Felleisen, Matthias. 1998. Classes and
Mixins. Pages 171&#8211;183 of: <span class="emph">Proceedings ACMSymposium on Principles of Programming
Languages</span>.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1794))"></a>Friedman, Daniel P. 1974. <span class="emph">The Little LISPer</span>. Palo Alto, CA: Science Research
Associates.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1795))"></a>Friedman, Daniel P., &amp; <a name="(idx._(gentag._1796))"></a>Felleisen, Matthias. 1996. <span class="emph">The Little Schemer</span>. Fourth
edition. Cambridge, MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1797))"></a>Friedman, Daniel P., &amp; <a name="(idx._(gentag._1798))"></a>Wise, David S. 1976. Cons should not Evaluate its
Arguments. Pages 257&#8211;284 of: Michaelson, S., &amp;
<a name="(idx._(gentag._1799))"></a>Milner, R. (eds.), <span class="emph">Automata,
Languages and Programming</span>. Edinburgh: Edinburgh University Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1800))"></a>Gamma, Erich, <a name="(idx._(gentag._1801))"></a>Helm, Richard, <a name="(idx._(gentag._1802))"></a>Johnson, Ralph, &amp; <a name="(idx._(gentag._1803))"></a>Vlissides, John. 1995. <span class="emph">Design
Patterns: Bookents of Reusable Object-Oriented Software</span>. Reading, MA: Addison
Wesley.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1804))"></a>Giarratana, V., <a name="(idx._(gentag._1805))"></a>Gimona, F., &amp;
<a name="(idx._(gentag._1806))"></a>Montanari, U. 1976. Observability Concepts in
Abstract Data Type Specifications. Pages 576&#8211;587 of: Mazurkiewicz, A. (ed.),
<span class="emph">Mathematical Foundations of Computer Science 1976</span>. Lecture Notes in Computer
Science, vol. 45. Berlin, Heidelberg, New York: Springer-Verlag.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1807))"></a>Goguen, Joseph A., <a name="(idx._(gentag._1808))"></a>Thatcher, James W.,
<a name="(idx._(gentag._1809))"></a>Wagner, Eric G., &amp; <a name="(idx._(gentag._1810))"></a>Wright, Jesse B. 1977.  Initial
Algebra Semantics and Continuous Algebras. <span class="emph">Journal of the ACM</span>,
<span style="font-weight: bold">24</span>, 68&#8211;95.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1811))"></a>Goldberg, Adele, &amp; <a name="(idx._(gentag._1812))"></a>Robson, David. 1983. <span class="emph">Smalltalk-80: The Language and Its
Implementation</span>. Reading, MA: Addison-Wesley.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1813))"></a>Gordon, Andrew D. 1995. A Tutorial on Co-induction and Functional Programming.
Pages 78&#8211;95 of: <span class="emph">Functional Programming, Glasgow 1994</span>. Berlin, Heidelberg, and
New York: SpringerWorkshops in Computing.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1814))"></a>Gosling, James, <a name="(idx._(gentag._1815))"></a>Joy, Bill, &amp; <a name="(idx._(gentag._1816))"></a>Steele, Guy L. 1996. <span class="emph">The Java Language
Specification</span>. The Java Series. Reading, MA: Addison-Wesley.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1817))"></a>Hailpern, Brent (ed.). 2007. <span class="emph">HOPL III: Proceedings of the Third ACM SIGPLAN
Conference on History of Programming Languages</span>. New York: ACM Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1818))"></a>Hankin, Chris. 1994. <span class="emph">Lambda Calculi: A Guide for Computer Scientists</span>. Graduate
Texts in Computer Science, vol. 3. Oxford: Clarendon Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1819))"></a>Haynes, Christopher T., <a name="(idx._(gentag._1820))"></a>Friedman, Daniel P., &amp;
<a name="(idx._(gentag._1821))"></a>Wand, Mitchell. 1986. Obtaining Coroutines with
Continuations. <span class="emph">J. of Computer Languages</span>, <span style="font-weight: bold">11</span>(3/4), 143&#8211;153.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1822))"></a>Hewitt, Carl. 1977. Viewing Control Structures as Patterns of Passing
Messages. <span class="emph">Artificial Intelligence</span>, <span style="font-weight: bold">8</span>, 323&#8211;364.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1823))"></a>Hindley, Roger. 1969. The Principal Type-Scheme of an Object in Combinatory
Logic. <span class="emph">Transactions of the American Mathematical Society</span>, <span style="font-weight: bold">146</span>, 29&#8211;60.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1824))"></a>Hudak, Paul, <span class="emph">et al</span>. 1990. Report on the Programming Language HASKELL. Technical
Report YALEU/DCS/RR-777. Yale University, CS Dept.</p></blockquote><blockquote class="BibPara"><p>IEEE. 1991. <span class="emph">IEEE Standard for the Scheme Programming Language, IEEE Standard
1178-1990</span>. IEEE Computer Society, New York.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1825))"></a>Igarashi, Atshushi, <a name="(idx._(gentag._1826))"></a>Pierce, Benjamin C., &amp;
<a name="(idx._(gentag._1827))"></a>Wadler, Philip. 1999. Featherweight Java: AMinimal Core Calculus
for Java and GJ. Pages 132&#8211;146 of: Meissner, Loren (ed.), <span class="emph">Proceedings
of the 1999 ACM SIGPLAN Conference on Object-Oriented Programming, Systems,
Languages &amp; Applications (OOPSLA &#8216;99)</span>.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1828))"></a>Ingerman, Peter Z. 1961. Thunks, A Way of Compiling Procedure Statements with
Some Comments on Procedure Declarations. <span class="emph">Communications of the ACM</span>, <span style="font-weight: bold">4</span>(1), 55&#8211;58.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1829))"></a>Jacobs, Bart, &amp; <a name="(idx._(gentag._1830))"></a>Rutten, Jan. 1997. A Tutorial on (Co)Algebras and (Co)Induction.
<span class="emph">Bulletin of the European Association for Theoretical Computer Science</span>, <span style="font-weight: bold">62</span>,
222&#8211;259.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1831))"></a>Johnston, John B. 1971. The Contour Model of Block Structured Processes. <span class="emph">SIGPLAN</span>
Notices, <span style="font-weight: bold">6</span>(2), 55&#8211;82.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1832))"></a>Kamin, Samuel. 1980. Final Data Type Specifications: A New Data Type
Specification Method. Pages 131&#8211;138 of: <span class="emph">Proceedings ACM Symposium on Principles
of Programming Languages</span>.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1833))"></a>Kelsey, Richard,
<a name="(idx._(gentag._1834))"></a>Clinger, William D., &amp;
<a name="(idx._(gentag._1835))"></a>Rees, Jonathan. 1998. Revised<span style="vertical-align: super; font-size: 80%">5</span> Report on
the Algorithmic Language Scheme. <span class="emph">Higher-Order and Symbolic Computation</span>, <span style="font-weight: bold">11</span>(1),
7&#8211;104.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1836))"></a>Kiczales, G.,
<a name="(idx._(gentag._1837))"></a>des Rivi&#232;res, J., &amp;
<a name="(idx._(gentag._1838))"></a>Bobrow, D. G.
1991. <span class="emph">The Art of the Meta-Object Protocol</span>. Cambridge, MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1839))"></a>Knuth, Donald E. 1968. Semantics of Context-Free Languages. <span class="emph">Mathematical Systems
Theory</span>, <span style="font-weight: bold">2</span>, 127&#8211;145. Correction, 5:95&#8211;96, 1971.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1840))"></a>Knuth, Donald E., &amp;
<a name="(idx._(gentag._1841))"></a>Pardo, L. T.
1977. The Early Development of Programming Languages. Pages 419&#8211;493 of: Belzer,
J., Holzman, A. G., &amp; Kent, D. (eds.), <span class="emph">Encyclopedia of Computer
Science and Technology</span>, vol. 6. New York: Marcel Dekker.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1842))"></a>Kranz, David A.,
<a name="(idx._(gentag._1843))"></a>Kelsey, Richard, <a name="(idx._(gentag._1844))"></a>Rees, Jonathan A.,
<a name="(idx._(gentag._1845))"></a>Hudak, Paul, <a name="(idx._(gentag._1846))"></a>Philbin, James, &amp;
<a name="(idx._(gentag._1847))"></a>Adams, Norman I.
1986. Orbit: An Optimizing Compiler for Scheme. Pages
219&#8211;223 of: <span class="emph">Proceedings SIGPLAN &#8217;86 Symposium on Compiler Construction</span>.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1848))"></a>Landin, Peter J. 1965a. Correspondence between ALGOL 60 and Church&#8217;s
Lambda-notation: Part I. <span class="emph">Commun</span>. ACM, <span style="font-weight: bold">8</span>(2), 89&#8211;101.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1849))"></a>Landin, Peter J. 1965b. A Generalization of Jumps and Labels. Technical Report.
UNIVAC Systems Programming Research. Reprinted with a foreword in <span class="emph">Higher-Order
and Symbolic Computation</span>, <span style="font-weight: bold">11</span>(2):125&#8211;143, 1998.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1850))"></a>Leroy, Xavier. 1994. Manifest Types, Modules, and Separate Compilation. Pages
190&#8211;122 of: <span class="emph">Proceedings ACM Symposium on Principles of Programming Languages</span>.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1851))"></a>Lewis, Bil, &amp; <a name="(idx._(gentag._1852))"></a>Berg, Daniel J. 1998. <span class="emph">Multithreaded Programming with
PThreads</span>. Englewood Cliffs, NJ: Prentice-Hall.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1853))"></a>Liskov, Barbara, <a name="(idx._(gentag._1854))"></a>Snyder, Alan, <a name="(idx._(gentag._1855))"></a>Atkinson, R., &amp;
<a name="(idx._(gentag._1856))"></a>Schaffert, Craig. 1977. Abstraction Mechanisms in
CLU. <span class="emph">Communications of the ACM</span>, <span style="font-weight: bold">20</span>, 564&#8211;576.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1857))"></a>McCarthy, John. 1960. Recursive Functions of Symbolic Expressions and their
Computation by Machine, Part I. <span class="emph">Communications of the ACM</span>, <span style="font-weight: bold">3</span>, 184&#8211;195.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1858))"></a>McCarthy, John. 1962. Towards aMathematical Science of Computation. Pages 21&#8211;28
of: Popplewell (ed.), <span class="emph">Information Processing 62</span>. Amsterdam: North-Holland.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1859))"></a>Michie, Donald. 1968. &#8220;Memo&#8221; Functions and Machine Learning. <span class="emph">Nature</span>, <span style="font-weight: bold">218</span>(1&#8211;3),
218&#8211;219.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1860))"></a>Milne, Robert, &amp; <a name="(idx._(gentag._1861))"></a>Strachey, Christopher. 1976. <span class="emph">A Theory of Programming Language
Semantics</span>. London: Chapman and Hall.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1862))"></a>Milner, Robin. 1978. A Theory of Type Polymorphism in Programming. <span class="emph">Journal of
Computer and Systems Science</span>, <span style="font-weight: bold">17</span>, 348&#8211;375.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1863))"></a>Milner, Robin, <a name="(idx._(gentag._1864))"></a>Tofte, Mads, &amp; <a name="(idx._(gentag._1865))"></a>Harper, Robert. 1989. <span class="emph">The Definition of Standard
ML</span>. Cambridge, MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1866))"></a>Milner, Robin, <a name="(idx._(gentag._1867))"></a>Tofte, Mads,
<a name="(idx._(gentag._1868))"></a>Harper, Robert, &amp; <a name="(idx._(gentag._1869))"></a>MacQueen, David B.
1997. <span class="emph">The Standard ML Programming Language (Revised)</span>. Cambridge,
MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1870))"></a>Moggi, Eugenio. 1991. Notions of Computation and Monads. <span class="emph">Information and
Computation</span>, <span style="font-weight: bold">93</span>(1), 55&#8211;92.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1871))"></a>Morris, Jr., James H. 1968. Lambda Calculus Models of Programming Languages.
Ph.D. thesis, MIT, Cambridge, MA.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1872))"></a>Morris, Jr., James H., &amp; <a name="(idx._(gentag._1873))"></a>Wegbreit, Ben. 1977. Subgoal Induction. <span class="emph">Communications
of the ACM</span>, <span style="font-weight: bold">20</span>, 209&#8211;222.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1874))"></a>Naur, Peter, <span class="emph">et al</span>. 1963. Revised Report on the Algorithmic Language ALGOL 60.
<span class="emph">Communications of the ACM</span>, <span style="font-weight: bold">5</span>(1), 1&#8211;17.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1875))"></a>Parnas, David L. 1972. A Technique for Module Specification with
Examples. <span class="emph">Communications of the ACM</span>, <span style="font-weight: bold">15</span>(5), 330&#8211;336.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1876))"></a>Paulson, Laurence C. 1996. <span class="emph">ML for the Working Programmer</span>. Second edition. New
York: Cambridge University Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1877))"></a>Peyton Jones, Simon L. 1987. <span class="emph">The Implementation of Functional Programming
Languages</span>. Englewood Cliffs, NJ: Prentice-Hall International.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1878))"></a>Peyton Jones, Simon L. 2001.Tackling the Awkward Squad: Monadic Input/Output,
Concurrency, Exceptions, and Foreign-Language Calls in Haskell. In: Hoare,
C.A.R., Broy, Manfred, &amp; Steinbruggen, Ralf (eds.),  <span class="emph">Engineering Theories of
Software Construction, Marktoberdorf Summer School</span>. Amsterdam, The Netherlands:
IOS Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1879))"></a>Pierce, Benjamin C. 2002. <span class="emph">Types and Programming Languges</span>. Cambridge, MA:MIT
Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1880))"></a>Pierce, Benjamin C. 2004. <span class="emph">Advanced Topics in Types and Programming
Languges</span>. Cambridge, MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1881))"></a>Plotkin, Gordon D. 1975. Call-by-Name, Call-by-Value and the
&#955;-Calculus. <span class="emph">Theoretical Computer Science</span>, <span style="font-weight: bold">1</span>, 125&#8211;159.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1882))"></a>Plotkin, Gordon D. 1977. LCF Considered as a Programming Language. <span class="emph">Theoretical
Computer Science</span>, <span style="font-weight: bold">5</span>, 223&#8211;255.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1883))"></a>Plotkin, Gordon D. 1981. A Structural Approach to Operational
Semantics. Technical Report FN 19, DAIMI, Department of Computer
Science. University of Aarhus, Aarhus, Denmark.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1884))"></a>Pratt, Terrence W., &amp; <a name="(idx._(gentag._1885))"></a>Zelkowitz, Marvin V. 2001. <span class="emph">Programming Languages: Design
and Implementation</span>. 4th edition. Englewood Cliffs, NJ: Prentice-Hall.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1886))"></a>Rees, Jonathan A., <a name="(idx._(gentag._1887))"></a>Clinger, William D., <span class="emph">et al</span>. 1986. Revised<span style="vertical-align: super; font-size: 80%">3</span> Report on the
Algorithmic Language Scheme. <span class="emph">SIGPLAN Notices</span>, <span style="font-weight: bold">21</span>(12), 37&#8211;79.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1888))"></a>Reynolds, John C. 1972. Definitional Interpreters for Higher-Order Programming
Languages. Pages 717&#8211;740 of: <span class="emph">Proceedings ACM National Conference</span>. Reprinted,
with a foreword, in <span class="emph">Higher-Order and Symbolic Computation</span> <span style="font-weight: bold">11</span>(4) 363-397 (1998).</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1889))"></a>Reynolds, John C. 1975. User-Defined Types and Procedural Data Structures as
Complementary Approaches to Data Abstraction. In: <span class="emph">Conference on New Directions
on Algorithmic Languages</span>. IFIPWP 2.1, Munich.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1890))"></a>Reynolds, John C. 1993. The Discoveries of Continuations. <span class="emph">Lisp and Symbolic
Computation</span>, <span style="font-weight: bold">6</span>(3/4), 233&#8211;248.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1891))"></a>Sabry, Amr, &amp; <a name="(idx._(gentag._1892))"></a>Felleisen, Matthias. 1992. Reasoning about Programs in
Continuation-Passing Style. Pages 288&#8211;298 of: <span class="emph">Proceedings 1992 ACM Conf. on
Lisp and Functional Programming</span>. New York: ACM Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1893))"></a>Sabry, Amr, &amp; <a name="(idx._(gentag._1894))"></a>Felleisen, Matthias. 1993. Reasoning about Programs in
Continuation-Passing Style. <span class="emph">Lisp and Symbolic Computation</span>, <span style="font-weight: bold">6</span>(3/4), 289&#8211;360.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1895))"></a>Sabry, Amr, &amp; <a name="(idx._(gentag._1896))"></a>Wadler, Philip. 1997. A Reflection on Call-by-Value. <span class="emph">ACM
Transactions on Programming Languages and Systems</span>, <span style="font-weight: bold">19</span>(6), 916&#8211;941.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1897))"></a>Scott, Michael L. 2005. <span class="emph">Programming Language Pragmatics</span>. Second edition. San
Francisco: Morgan Kaufmann.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1898))"></a>Sebesta, Robert W. 2007. <span class="emph">Concepts of Programming Languages</span>. 8th edition. Boston:
Addison-Wesley Longman Publishing Co., Inc.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1899))"></a>Smith, Joshua B. 2006. <span class="emph">Practical OCaml</span>. Berkeley, CA: Apress.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1900))"></a>Sperber, Michael, <a name="(idx._(gentag._1901))"></a>Dybvig, R. Kent, <a name="(idx._(gentag._1902))"></a>Flatt, Matthew, &amp; <a name="(idx._(gentag._1903))"></a>van Straaten, Anton. 2007.
<span class="emph">Revised<span style="vertical-align: super; font-size: 80%">6</span> Report on the Algorithmic Language Scheme</span>. <a href="www.r6rs.org"><span class="url">www.r6rs.org</span></a>.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1904))"></a>Springer, George, &amp; <a name="(idx._(gentag._1905))"></a>Friedman, Daniel P. 1989. <span class="emph">Scheme and the Art of Programming</span>.
New York: McGraw-Hill.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1906))"></a>Steele, Guy L. 1978. Rabbit: A Compiler for Scheme. Artificial Intelligence
Laboratory Technical Report 474. Massachusetts Institute of Technology,
Cambridge, MA.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1907))"></a>Steele, Guy L. 1990. <span class="emph">Common Lisp: the Language</span>. Second edition. Burlington, MA:
Digital Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1908))"></a>Steele, Guy L., &amp; <a name="(idx._(gentag._1909))"></a>Sussman, Gerald Jay. 1978. The Revised Report on
SCHEME. Artificial Intelligence Memo 452. Massachusetts Institute of Technology,
Cambridge, MA.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1910))"></a>Stoy, Joseph E. 1977. <span class="emph">Denotational Semantics: The Scott-Strachey Approach to
Programming Language Theory</span>. Cambridge, MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1911))"></a>Strachey, Christopher. 1967. <span class="emph">Fundamental Concepts in Programming
Languages</span>. Unpublished notes from International Summer School on Programming
Languages, Copenhagen. Reprinted, with a foreword, in Higher-Order and Symbolic
Computation <span style="font-weight: bold">13</span>(1&#8211;2) 11&#8211;49 (2000).</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1912))"></a>Strachey, Christopher, &amp; <a name="(idx._(gentag._1913))"></a>Wadsworth, Christopher P. 1974. Continuations: A
Mathematical Semantics for Handling Full Jumps. Technical Monograph
PRG-11. Oxford University Computing Laboratory. Reprinted, with a foreword, in
Higher-Order and Symbolic Computation <span style="font-weight: bold">13</span>(1&#8211;2) 135&#8211;152 (2000).</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1914))"></a>Sussman, Gerald Jay, &amp; <a name="(idx._(gentag._1915))"></a>Steele, Guy L. 1975. SCHEME: An Interpreter for Extended
Lambda Calculus. Artificial Intelligence Memo 349. Massachusetts Institute of
Technology, Cambridge, MA. Reprinted, with a foreword, in Higher-Order and
Symbolic Computation <span style="font-weight: bold">11</span>(4) 405-439 (1998).</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1916))"></a>Thomas, Dave, <a name="(idx._(gentag._1917))"></a>Fowler, Chad, &amp; <a name="(idx._(gentag._1918))"></a>Hunt, Andy. 2005. <span class="emph">Programming Ruby: The Pragmatic
Programmers&#8217; Guide</span>. Second edition. Raleigh, NC: The Pragmatic Bookshelf.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1919))"></a>Turing, A. M. 1936. On
Computable Numbers, with an Application to the
Entscheidungsproblem. <span class="emph">Proc. London Math. Soc.</span>, <span style="font-weight: bold">42</span>(1),
230&#8211;265.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1920))"></a>Ullman, Jeffrey D. 1998. <span class="emph">Elements of ML Programming</span>. ML97 edition. Englewood
Cliffs, NJ: Prentice-Hall.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1921))"></a>van Rossum, Guido, &amp; <a name="(idx._(gentag._1922))"></a>Drake, Fred L. Jr. 2006. <span class="emph">The Python Language
Reference Manual (Version 2.5)</span>. Bristol, UK: Network Theory Ltd.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1923))"></a>von Neumann, John. 1945. First Draft of a Report on the EDVAC. Technical Report.
Moore School of Electrical Engineering, University of Pennsylvania.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1924))"></a>Wadler, Philip. 1992. The Essence of Functional Programming. Pages 1&#8211;14 of:
<span class="emph">Proceedings ACM Symposium on Principles of Programming Languages</span>.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1925))"></a>Wall, Larry, <a name="(idx._(gentag._1926))"></a>Christiansen, Tom, &amp; <a name="(idx._(gentag._1927))"></a>Orwant, Jon. 2000. <span class="emph">Programming Perl</span>. 3rd
edition. Cambridge, MA: O&#8217;Reilly.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1928))"></a>Wand, Mitchell. 1979. Final Algebra Semantics and Data Type Extensions. <span class="emph">Journal
of Computer and Systems Science</span>, <span style="font-weight: bold">19</span>, 27&#8211;44.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1929))"></a>Wand, Mitchell. 1980a. Continuation-Based Multiprocessing. Pages 19&#8211;28 of:
Allen, J. (ed.), <span class="emph">Conference Record of the 1980 LISP Conference</span>. Palo Alto, CA:
The Lisp Company. Republished by ACM. Reprinted, with a foreword, in
Higher-Order and Symbolic Computation <span style="font-weight: bold">12</span>(3) 285&#8211;299 (1999).</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1930))"></a>Wand, Mitchell. 1980b. Continuation-Based Program Transformation
Strategies. <span class="emph">Journal of the ACM</span>, <span style="font-weight: bold">27</span>, 164&#8211;180.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1931))"></a>Wand, Mitchell. 1987. A Simple Algorithm and Proof for Type
Inference. <span class="emph">Fundamenta Informaticae</span>, <span style="font-weight: bold">10</span>, 115&#8211;122.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1932))"></a>Wexelblatt, R. L.
(ed.). 1978. <span class="emph">Special Issue: History of Programming Languages
Conference</span>. Vol. 13. New York: ACM Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1933))"></a>Winskel, Glynn. 1993. <span class="emph">The Formal Semantics of Programming Languages</span>. Cambridge,
MA: MIT Press.</p></blockquote><blockquote class="BibPara"><p><a name="(idx._(gentag._1934))"></a>Wulf, William. 1971. BLISS: A Language for Systems Programming. <span class="emph">Communications
of the ACM</span>, <span style="font-weight: bold">14</span>(12), 780&#8211;790.</p></blockquote><p class="SPretitle">\setlength{\columnsep}{35pt}\twocolumn</p><h3 class="heading"><a name="(part._indices)"></a>&#32034;&#24341;<span class="button-group"><a href="#(part._indices)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p><a name="(idx._(gentag._1935))"></a>
<a name="(idx._(gentag._1936))"></a>
<a name="(idx._(gentag._1937))"></a>
<a name="(idx._(gentag._1938))"></a>
<a name="(idx._(gentag._1939))"></a>
<a name="(idx._(gentag._1940))"></a>
<a name="(idx._(gentag._1941))"></a></p><p><a name="(idx._(gentag._1942))"></a>
<a name="(idx._(gentag._1943))"></a>
<a name="(idx._(gentag._1944))"></a>
<a name="(idx._(gentag._1945))"></a></p><p></p><p>\printindex
\onecolumn</p></div></div><div id="contextindicator">&nbsp;</div></body></html>